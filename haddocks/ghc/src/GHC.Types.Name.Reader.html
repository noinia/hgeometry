<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621682533074"><span id="local-6989586621682533075"><span id="local-6989586621682533076"><span id="local-6989586621682533077"><span id="local-6989586621682533078"><span id="local-6989586621682533079"><span id="local-6989586621682533080"><span id="local-6989586621682533081"><span id="local-6989586621682533082"><span id="local-6989586621682533083"><span id="local-6989586621682533084"><span id="local-6989586621682533085"><span id="local-6989586621682533086"><span id="local-6989586621682533087"><span id="local-6989586621682533088"><span id="local-6989586621682533089"><span id="local-6989586621682533090"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998
-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- #name_types#</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- GHC uses several kinds of name internally:</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- * 'GHC.Types.Name.Occurrence.OccName': see &quot;GHC.Types.Name.Occurrence#name_types&quot;</span><span>
</span><span id="line-18"></span><span class="hs-comment">--</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- * 'GHC.Types.Name.Reader.RdrName' is the type of names that come directly from the parser. They</span><span>
</span><span id="line-20"></span><span class="hs-comment">--   have not yet had their scoping and binding resolved by the renamer and can be</span><span>
</span><span id="line-21"></span><span class="hs-comment">--   thought of to a first approximation as an 'GHC.Types.Name.Occurrence.OccName' with an optional module</span><span>
</span><span id="line-22"></span><span class="hs-comment">--   qualifier</span><span>
</span><span id="line-23"></span><span class="hs-comment">--</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- * 'GHC.Types.Name.Name': see &quot;GHC.Types.Name#name_types&quot;</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- * 'GHC.Types.Id.Id': see &quot;GHC.Types.Id#name_types&quot;</span><span>
</span><span id="line-27"></span><span class="hs-comment">--</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- * 'GHC.Types.Var.Var': see &quot;GHC.Types.Var#name_types&quot;</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><span class="hs-comment">-- * The main type</span></span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier">RdrName</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- Constructors exported only to GHC.Iface.Binary</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Construction</span></span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier">mkRdrUnqual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkRdrQual"><span class="hs-identifier">mkRdrQual</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkUnqual"><span class="hs-identifier">mkUnqual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkVarUnqual"><span class="hs-identifier">mkVarUnqual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkQual"><span class="hs-identifier">mkQual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkOrig"><span class="hs-identifier">mkOrig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#nameRdrName"><span class="hs-identifier">nameRdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#getRdrName"><span class="hs-identifier">getRdrName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Destruction</span></span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier">rdrNameOcc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#rdrNameSpace"><span class="hs-identifier">rdrNameSpace</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrName"><span class="hs-identifier">demoteRdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrNameTv"><span class="hs-identifier">demoteRdrNameTv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#promoteRdrName"><span class="hs-identifier">promoteRdrName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isRdrDataCon"><span class="hs-identifier">isRdrDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isRdrTyVar"><span class="hs-identifier">isRdrTyVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isRdrTc"><span class="hs-identifier">isRdrTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isQual"><span class="hs-identifier">isQual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isQual_maybe"><span class="hs-identifier">isQual_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isUnqual"><span class="hs-identifier">isUnqual</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isOrig"><span class="hs-identifier">isOrig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isOrig_maybe"><span class="hs-identifier">isOrig_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isExact"><span class="hs-identifier">isExact</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isExact_maybe"><span class="hs-identifier">isExact_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isSrcRdrName"><span class="hs-identifier">isSrcRdrName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Local mapping of 'RdrName' to 'Name.Name'</span></span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier">LocalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#emptyLocalRdrEnv"><span class="hs-identifier">emptyLocalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#extendLocalRdrEnv"><span class="hs-identifier">extendLocalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#extendLocalRdrEnvList"><span class="hs-identifier">extendLocalRdrEnvList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupLocalRdrEnv"><span class="hs-identifier">lookupLocalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupLocalRdrOcc"><span class="hs-identifier">lookupLocalRdrOcc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#elemLocalRdrEnv"><span class="hs-identifier">elemLocalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#inLocalRdrEnvScope"><span class="hs-identifier">inLocalRdrEnvScope</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#localRdrEnvElts"><span class="hs-identifier">localRdrEnvElts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#minusLocalRdrEnv"><span class="hs-identifier">minusLocalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#minusLocalRdrEnvList"><span class="hs-identifier">minusLocalRdrEnvList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Global mapping of 'RdrName' to 'GlobalRdrElt's</span></span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier">GlobalRdrEnvX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier">GlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#IfGlobalRdrEnv"><span class="hs-identifier">IfGlobalRdrEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#emptyGlobalRdrEnv"><span class="hs-identifier">emptyGlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkGlobalRdrEnv"><span class="hs-identifier">mkGlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#plusGlobalRdrEnv"><span class="hs-identifier">plusGlobalRdrEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#extendGlobalRdrEnv"><span class="hs-identifier">extendGlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier">greOccName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#pprGlobalRdrEnv"><span class="hs-identifier">pprGlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#globalRdrEnvElts"><span class="hs-identifier">globalRdrEnvElts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#globalRdrEnvLocal"><span class="hs-identifier">globalRdrEnvLocal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Looking up 'GlobalRdrElt's</span></span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldsOrSelectors"><span class="hs-identifier">FieldsOrSelectors</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#filterFieldGREs"><span class="hs-identifier">filterFieldGREs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#allowGRE"><span class="hs-identifier">allowGRE</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupGRE"><span class="hs-identifier">LookupGRE</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupGRE"><span class="hs-identifier">lookupGRE</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#WhichGREs"><span class="hs-identifier">WhichGREs</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#AllRelevantGREs"><span class="hs-identifier">AllRelevantGREs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RelevantGREsFOS"><span class="hs-identifier">RelevantGREsFOS</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greIsRelevant"><span class="hs-identifier">greIsRelevant</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupChild"><span class="hs-identifier">LookupChild</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupGRE_Name"><span class="hs-identifier">lookupGRE_Name</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupGRE_FieldLabel"><span class="hs-identifier">lookupGRE_FieldLabel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#getGRE_NameQualifier_maybes"><span class="hs-identifier">getGRE_NameQualifier_maybes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#transformGREs"><span class="hs-identifier">transformGREs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#pickGREs"><span class="hs-identifier">pickGREs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#pickGREsModExp"><span class="hs-identifier">pickGREsModExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span>        </span><span class="annot"><span class="hs-comment">-- * GlobalRdrElts</span></span><span>
</span><span id="line-70"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#availFromGRE"><span class="hs-identifier">availFromGRE</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greRdrNames"><span class="hs-identifier">greRdrNames</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greSrcSpan"><span class="hs-identifier">greSrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greQualModName"><span class="hs-identifier">greQualModName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#gresToAvailInfo"><span class="hs-identifier">gresToAvailInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greDefinitionModule"><span class="hs-identifier">greDefinitionModule</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greDefinitionSrcSpan"><span class="hs-identifier">greDefinitionSrcSpan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greFieldLabel_maybe"><span class="hs-identifier">greFieldLabel_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Global 'RdrName' mapping elements: 'GlobalRdrElt', 'Provenance', 'ImportSpec'</span></span><span>
</span><span id="line-77"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier">GlobalRdrEltX</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier">GlobalRdrElt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#IfGlobalRdrElt"><span class="hs-identifier">IfGlobalRdrElt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldGlobalRdrElt"><span class="hs-identifier">FieldGlobalRdrElt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier">greName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greNameSpace"><span class="hs-identifier">greNameSpace</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greParent"><span class="hs-identifier">greParent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greInfo"><span class="hs-identifier">greInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#plusGRE"><span class="hs-identifier">plusGRE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#insertGRE"><span class="hs-identifier">insertGRE</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#forceGlobalRdrEnv"><span class="hs-identifier">forceGlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#hydrateGlobalRdrEnv"><span class="hs-identifier">hydrateGlobalRdrEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isLocalGRE"><span class="hs-identifier">isLocalGRE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isImportedGRE"><span class="hs-identifier">isImportedGRE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier">isRecFldGRE</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#fieldGREInfo"><span class="hs-identifier">fieldGREInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isDuplicateRecFldGRE"><span class="hs-identifier">isDuplicateRecFldGRE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isNoFieldSelectorGRE"><span class="hs-identifier">isNoFieldSelectorGRE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isFieldSelectorGRE"><span class="hs-identifier">isFieldSelectorGRE</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#unQualOK"><span class="hs-identifier">unQualOK</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#qualSpecOK"><span class="hs-identifier">qualSpecOK</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#unQualSpecOK"><span class="hs-identifier">unQualSpecOK</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#pprNameProvenance"><span class="hs-identifier">pprNameProvenance</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkGRE"><span class="hs-identifier">mkGRE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkExactGRE"><span class="hs-identifier">mkExactGRE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkLocalGRE"><span class="hs-identifier">mkLocalGRE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkLocalVanillaGRE"><span class="hs-identifier">mkLocalVanillaGRE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkLocalTyConGRE"><span class="hs-identifier">mkLocalTyConGRE</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkLocalConLikeGRE"><span class="hs-identifier">mkLocalConLikeGRE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkLocalFieldGREs"><span class="hs-identifier">mkLocalFieldGREs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#gresToNameSet"><span class="hs-identifier">gresToNameSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Shadowing</span></span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greClashesWith"><span class="hs-identifier">greClashesWith</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#shadowNames"><span class="hs-identifier">shadowNames</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Information attached to a 'GlobalRdrElt'</span></span><span>
</span><span id="line-94"></span><span>        </span><span class="annot"><a href="GHC.Types.GREInfo.html#ConLikeName"><span class="hs-identifier">ConLikeName</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>        </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier">GREInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#RecFieldInfo"><span class="hs-identifier">RecFieldInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>        </span><span class="annot"><a href="GHC.Types.GREInfo.html#plusGREInfo"><span class="hs-identifier">plusGREInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#recFieldConLike_maybe"><span class="hs-identifier">recFieldConLike_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#recFieldInfo_maybe"><span class="hs-identifier">recFieldInfo_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#fieldGRE_maybe"><span class="hs-identifier">fieldGRE_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#fieldGRELabel"><span class="hs-identifier">fieldGRELabel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Parent information</span></span><span>
</span><span id="line-101"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier">Parent</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#greParent_maybe"><span class="hs-identifier">greParent_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkParent"><span class="hs-identifier">mkParent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#availParent"><span class="hs-identifier">availParent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier">ImportSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpDeclSpec"><span class="hs-identifier">ImpDeclSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpItemSpec"><span class="hs-identifier">ImpItemSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#importSpecLoc"><span class="hs-identifier">importSpecLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#importSpecModule"><span class="hs-identifier">importSpecModule</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#isExplicitItem"><span class="hs-identifier">isExplicitItem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#bestImport"><span class="hs-identifier">bestImport</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Utils</span></span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#opIsAt"><span class="hs-identifier">opIsAt</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Avail.html"><span class="hs-identifier">GHC.Types.Avail</span></a></span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html"><span class="hs-identifier">GHC.Types.GREInfo</span></a></span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html"><span class="hs-identifier">GHC.Types.FieldLabel</span></a></span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier">NameEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#nonDetNameEnvElts"><span class="hs-identifier">nonDetNameEnvElts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#emptyNameEnv"><span class="hs-identifier">emptyNameEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#extendNameEnv_Acc"><span class="hs-identifier">extendNameEnv_Acc</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.PkgQual.html"><span class="hs-identifier">GHC.Types.PkgQual</span></a></span><span>
</span><span id="line-125"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SrcLoc</span></span><span>
</span><span id="line-126"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html"><span class="hs-identifier">GHC.Types.Unique</span></a></span><span>
</span><span id="line-127"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html"><span class="hs-identifier">GHC.Types.Unique.FM</span></a></span><span>
</span><span id="line-128"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span>
</span><span id="line-129"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Uniques.html"><span class="hs-identifier">GHC.Builtin.Uniques</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Uniques.html#isFldNSUnique"><span class="hs-identifier">isFldNSUnique</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Utils</span></span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html"><span class="hs-identifier">Control.DeepSeq</span></a></span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">guard</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Data.html"><span class="hs-identifier">Data.Data</span></a></span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">sort</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-142"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/System.IO.Unsafe.html"><span class="hs-identifier">System.IO.Unsafe</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">unsafePerformIO</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{The main data type}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- | Reader Name</span><span>
</span><span id="line-155"></span><span class="hs-comment">--</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- Do not use the data constructors of RdrName directly: prefer the family</span><span>
</span><span id="line-157"></span><span class="hs-comment">-- of functions that creates them, such as 'mkRdrUnqual'</span><span>
</span><span id="line-158"></span><span class="hs-comment">--</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- - Note: A Located RdrName will only have API Annotations if it is a</span><span>
</span><span id="line-160"></span><span class="hs-comment">--         compound one,</span><span>
</span><span id="line-161"></span><span class="hs-comment">--   e.g.</span><span>
</span><span id="line-162"></span><span class="hs-comment">--</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- &gt; `bar`</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- &gt; ( ~ )</span><span>
</span><span id="line-165"></span><span class="hs-comment">--</span><span>
</span><span id="line-166"></span><span class="hs-keyword">data</span><span> </span><span id="RdrName"><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-var">RdrName</span></a></span></span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Unqual"><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span>
</span><span id="line-168"></span><span>        </span><span class="hs-comment">-- ^ Unqualified  name</span><span>
</span><span id="line-169"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-170"></span><span>        </span><span class="hs-comment">-- Used for ordinary, unqualified occurrences, e.g. @x@, @y@ or @Foo@.</span><span>
</span><span id="line-171"></span><span>        </span><span class="hs-comment">-- Create such a 'RdrName' with 'mkRdrUnqual'</span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Qual"><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-var">Qual</span></a></span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span>
</span><span id="line-174"></span><span>        </span><span class="hs-comment">-- ^ Qualified name</span><span>
</span><span id="line-175"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-176"></span><span>        </span><span class="hs-comment">-- A qualified name written by the user in</span><span>
</span><span id="line-177"></span><span>        </span><span class="hs-comment">-- /source/ code.  The module isn't necessarily</span><span>
</span><span id="line-178"></span><span>        </span><span class="hs-comment">-- the module where the thing is defined;</span><span>
</span><span id="line-179"></span><span>        </span><span class="hs-comment">-- just the one from which it is imported.</span><span>
</span><span id="line-180"></span><span>        </span><span class="hs-comment">-- Examples are @Bar.x@, @Bar.y@ or @Bar.Foo@.</span><span>
</span><span id="line-181"></span><span>        </span><span class="hs-comment">-- Create such a 'RdrName' with 'mkRdrQual'</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Orig"><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-var">Orig</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span>
</span><span id="line-184"></span><span>        </span><span class="hs-comment">-- ^ Original name</span><span>
</span><span id="line-185"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-186"></span><span>        </span><span class="hs-comment">-- An original name; the module is the /defining/ module.</span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-comment">-- This is used when GHC generates code that will be fed</span><span>
</span><span id="line-188"></span><span>        </span><span class="hs-comment">-- into the renamer (e.g. from deriving clauses), but where</span><span>
</span><span id="line-189"></span><span>        </span><span class="hs-comment">-- we want to say \&quot;Use Prelude.map dammit\&quot;. One of these</span><span>
</span><span id="line-190"></span><span>        </span><span class="hs-comment">-- can be created with 'mkOrig'</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Exact"><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-var">Exact</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-193"></span><span>        </span><span class="hs-comment">-- ^ Exact name</span><span>
</span><span id="line-194"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span>        </span><span class="hs-comment">-- We know exactly the 'Name'. This is used:</span><span>
</span><span id="line-196"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-comment">--  (1) When the parser parses built-in syntax like @[]@</span><span>
</span><span id="line-198"></span><span>        </span><span class="hs-comment">--      and @(,)@, but wants a 'RdrName' from it</span><span>
</span><span id="line-199"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-200"></span><span>        </span><span class="hs-comment">--  (2) By Template Haskell, when TH has generated a unique name</span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-comment">-- Such a 'RdrName' can be created by using 'getRdrName' on a 'Name'</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682533317"><span id="local-6989586621682533330"><span id="local-6989586621682533339"><span id="local-6989586621682533341"><span id="local-6989586621682533343"><span id="local-6989586621682533349"><span id="local-6989586621682533354"><span id="local-6989586621682533357"><span id="local-6989586621682533360"><span id="local-6989586621682533363"><span id="local-6989586621682533366"><span id="local-6989586621682533369"><span id="local-6989586621682533374"><span id="local-6989586621682533379"><span class="annot"><span class="annottext">Typeable RdrName
Typeable RdrName =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; RdrName -&gt; c RdrName)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c RdrName)
-&gt; (RdrName -&gt; Constr)
-&gt; (RdrName -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c RdrName))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c RdrName))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; RdrName -&gt; RdrName)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; RdrName -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; RdrName -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; RdrName -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; RdrName -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName)
-&gt; Data RdrName
RdrName -&gt; Constr
RdrName -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; RdrName -&gt; RdrName
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; RdrName -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; RdrName -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; RdrName -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; RdrName -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c RdrName
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; RdrName -&gt; c RdrName
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c RdrName)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c RdrName)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; RdrName -&gt; c RdrName
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; RdrName -&gt; c RdrName
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c RdrName
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c RdrName
$ctoConstr :: RdrName -&gt; Constr
toConstr :: RdrName -&gt; Constr
$cdataTypeOf :: RdrName -&gt; DataType
dataTypeOf :: RdrName -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c RdrName)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c RdrName)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c RdrName)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c RdrName)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; RdrName -&gt; RdrName
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; RdrName -&gt; RdrName
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; RdrName -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; RdrName -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; RdrName -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; RdrName -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; RdrName -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; RdrName -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; RdrName -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; RdrName -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; RdrName -&gt; m RdrName
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Simple functions}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#HasOccName"><span class="hs-identifier hs-type">HasOccName</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-214"></span><span>  </span><span id="local-6989586621682533392"><span class="annot"><span class="annottext">occName :: RdrName -&gt; OccName
</span><a href="#local-6989586621682533392"><span class="hs-identifier hs-var hs-var hs-var">occName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-type">rdrNameOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span>
</span><span id="line-217"></span><span id="rdrNameOcc"><span class="annot"><span class="annottext">rdrNameOcc :: RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var hs-var">rdrNameOcc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682533394"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533394"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533394"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-218"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682533395"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533395"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533395"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-219"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682533396"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533396"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533396"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-220"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533397"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533397"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533397"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#rdrNameSpace"><span class="hs-identifier hs-type">rdrNameSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span>
</span><span id="line-223"></span><span id="rdrNameSpace"><span class="annot"><span class="annottext">rdrNameSpace :: RdrName -&gt; NameSpace
</span><a href="GHC.Types.Name.Reader.html#rdrNameSpace"><span class="hs-identifier hs-var hs-var">rdrNameSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#occNameSpace"><span class="hs-identifier hs-var">occNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; NameSpace)
-&gt; (RdrName -&gt; OccName) -&gt; RdrName -&gt; NameSpace
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-comment">-- demoteRdrName lowers the NameSpace of RdrName.</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- See Note [Demotion] in GHC.Rename.Env</span><span>
</span><span id="line-227"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrName"><span class="hs-identifier hs-type">demoteRdrName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-228"></span><span id="demoteRdrName"><span class="annot"><span class="annottext">demoteRdrName :: RdrName -&gt; Maybe RdrName
</span><a href="GHC.Types.Name.Reader.html#demoteRdrName"><span class="hs-identifier hs-var hs-var">demoteRdrName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682533401"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533401"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; RdrName) -&gt; Maybe OccName -&gt; Maybe RdrName
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Maybe OccName
</span><a href="GHC.Types.Name.Occurrence.html#demoteOccName"><span class="hs-identifier hs-var">demoteOccName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533401"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrName"><span class="hs-identifier hs-var">demoteRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682533403"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533403"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682533404"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533404"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; RdrName) -&gt; Maybe OccName -&gt; Maybe RdrName
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-var">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533403"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Maybe OccName
</span><a href="GHC.Types.Name.Occurrence.html#demoteOccName"><span class="hs-identifier hs-var">demoteOccName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533404"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrName"><span class="hs-identifier hs-var">demoteRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RdrName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-231"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrName"><span class="hs-identifier hs-var">demoteRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RdrName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrNameTv"><span class="hs-identifier hs-type">demoteRdrNameTv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-234"></span><span id="demoteRdrNameTv"><span class="annot"><span class="annottext">demoteRdrNameTv :: RdrName -&gt; Maybe RdrName
</span><a href="GHC.Types.Name.Reader.html#demoteRdrNameTv"><span class="hs-identifier hs-var hs-var">demoteRdrNameTv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682533405"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533405"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; RdrName) -&gt; Maybe OccName -&gt; Maybe RdrName
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Maybe OccName
</span><a href="GHC.Types.Name.Occurrence.html#demoteOccTvName"><span class="hs-identifier hs-var">demoteOccTvName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533405"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrNameTv"><span class="hs-identifier hs-var">demoteRdrNameTv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682533407"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533407"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682533408"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533408"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; RdrName) -&gt; Maybe OccName -&gt; Maybe RdrName
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-var">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533407"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Maybe OccName
</span><a href="GHC.Types.Name.Occurrence.html#demoteOccTvName"><span class="hs-identifier hs-var">demoteOccTvName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533408"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrNameTv"><span class="hs-identifier hs-var">demoteRdrNameTv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RdrName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-237"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrNameTv"><span class="hs-identifier hs-var">demoteRdrNameTv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RdrName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- promoteRdrName promotes the NameSpace of RdrName.</span><span>
</span><span id="line-240"></span><span class="hs-comment">-- See Note [Promotion] in GHC.Rename.Env.</span><span>
</span><span id="line-241"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#promoteRdrName"><span class="hs-identifier hs-type">promoteRdrName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-242"></span><span id="promoteRdrName"><span class="annot"><span class="annottext">promoteRdrName :: RdrName -&gt; Maybe RdrName
</span><a href="GHC.Types.Name.Reader.html#promoteRdrName"><span class="hs-identifier hs-var hs-var">promoteRdrName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682533409"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533409"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; RdrName) -&gt; Maybe OccName -&gt; Maybe RdrName
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Maybe OccName
</span><a href="GHC.Types.Name.Occurrence.html#promoteOccName"><span class="hs-identifier hs-var">promoteOccName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533409"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#promoteRdrName"><span class="hs-identifier hs-var">promoteRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682533411"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533411"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682533412"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533412"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; RdrName) -&gt; Maybe OccName -&gt; Maybe RdrName
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-var">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533411"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Maybe OccName
</span><a href="GHC.Types.Name.Occurrence.html#promoteOccName"><span class="hs-identifier hs-var">promoteOccName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533412"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#promoteRdrName"><span class="hs-identifier hs-var">promoteRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RdrName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-245"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#promoteRdrName"><span class="hs-identifier hs-var">promoteRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RdrName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span>        </span><span class="hs-comment">-- These two are the basic constructors</span><span>
</span><span id="line-248"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-type">mkRdrUnqual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-249"></span><span id="mkRdrUnqual"><span class="annot"><span class="annottext">mkRdrUnqual :: OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var hs-var">mkRdrUnqual</span></a></span></span><span> </span><span id="local-6989586621682533413"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533413"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533413"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkRdrQual"><span class="hs-identifier hs-type">mkRdrQual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-252"></span><span id="mkRdrQual"><span class="annot"><span class="annottext">mkRdrQual :: ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrQual"><span class="hs-identifier hs-var hs-var">mkRdrQual</span></a></span></span><span> </span><span id="local-6989586621682533414"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533414"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682533415"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533415"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-var">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533414"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533415"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkOrig"><span class="hs-identifier hs-type">mkOrig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-255"></span><span id="mkOrig"><span class="annot"><span class="annottext">mkOrig :: Module -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkOrig"><span class="hs-identifier hs-var hs-var">mkOrig</span></a></span></span><span> </span><span id="local-6989586621682533416"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533416"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682533417"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533417"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-var">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533416"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533417"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-comment">---------------</span><span>
</span><span id="line-258"></span><span>        </span><span class="hs-comment">-- These two are used when parsing source files</span><span>
</span><span id="line-259"></span><span>        </span><span class="hs-comment">-- They do encode the module and occurrence names</span><span>
</span><span id="line-260"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkUnqual"><span class="hs-identifier hs-type">mkUnqual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-261"></span><span id="mkUnqual"><span class="annot"><span class="annottext">mkUnqual :: NameSpace -&gt; FastString -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkUnqual"><span class="hs-identifier hs-var hs-var">mkUnqual</span></a></span></span><span> </span><span id="local-6989586621682533418"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682533418"><span class="hs-identifier hs-var">sp</span></a></span></span><span> </span><span id="local-6989586621682533419"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682533419"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkOccNameFS"><span class="hs-identifier hs-var">mkOccNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682533418"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682533419"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkVarUnqual"><span class="hs-identifier hs-type">mkVarUnqual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-264"></span><span id="mkVarUnqual"><span class="annot"><span class="annottext">mkVarUnqual :: FastString -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkVarUnqual"><span class="hs-identifier hs-var hs-var">mkVarUnqual</span></a></span></span><span> </span><span id="local-6989586621682533421"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682533421"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682533421"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- | Make a qualified 'RdrName' in the given namespace and where the 'ModuleName' and</span><span>
</span><span id="line-267"></span><span class="hs-comment">-- the 'OccName' are taken from the first and second elements of the tuple respectively</span><span>
</span><span id="line-268"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkQual"><span class="hs-identifier hs-type">mkQual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-269"></span><span id="mkQual"><span class="annot"><span class="annottext">mkQual :: NameSpace -&gt; (FastString, FastString) -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkQual"><span class="hs-identifier hs-var hs-var">mkQual</span></a></span></span><span> </span><span id="local-6989586621682533424"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682533424"><span class="hs-identifier hs-var">sp</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682533425"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682533425"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682533426"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682533426"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-var">Qual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; ModuleName
</span><a href="Language.Haskell.Syntax.Module.Name.html#mkModuleNameFS"><span class="hs-identifier hs-var">mkModuleNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682533425"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkOccNameFS"><span class="hs-identifier hs-var">mkOccNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682533424"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682533426"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span id="local-6989586621682532770"><span class="annot"><a href="GHC.Types.Name.Reader.html#getRdrName"><span class="hs-identifier hs-type">getRdrName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#NamedThing"><span class="hs-identifier hs-type">NamedThing</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532770"><span class="hs-identifier hs-type">thing</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682532770"><span class="hs-identifier hs-type">thing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span></span><span>
</span><span id="line-272"></span><span id="getRdrName"><span class="annot"><span class="annottext">getRdrName :: forall thing. NamedThing thing =&gt; thing -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#getRdrName"><span class="hs-identifier hs-var hs-var">getRdrName</span></a></span></span><span> </span><span id="local-6989586621682533430"><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621682533430"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#nameRdrName"><span class="hs-identifier hs-var">nameRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">thing -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">thing
</span><a href="#local-6989586621682533430"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#nameRdrName"><span class="hs-identifier hs-type">nameRdrName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-275"></span><span id="nameRdrName"><span class="annot"><span class="annottext">nameRdrName :: Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#nameRdrName"><span class="hs-identifier hs-var hs-var">nameRdrName</span></a></span></span><span> </span><span id="local-6989586621682533432"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533432"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-var">Exact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533432"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-276"></span><span class="hs-comment">-- Keep the Name even for Internal names, so that the</span><span>
</span><span id="line-277"></span><span class="hs-comment">-- unique is still there for debug printing, particularly</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- of Types (which are converted to IfaceTypes before printing)</span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#nukeExact"><span class="hs-identifier hs-type">nukeExact</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-281"></span><span id="nukeExact"><span class="annot"><span class="annottext">nukeExact :: Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#nukeExact"><span class="hs-identifier hs-var hs-var">nukeExact</span></a></span></span><span> </span><span id="local-6989586621682533434"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533434"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isExternalName"><span class="hs-identifier hs-var">isExternalName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533434"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-var">Orig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Module
Name -&gt; Module
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533434"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533434"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533434"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isRdrDataCon"><span class="hs-identifier hs-type">isRdrDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-286"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isRdrTyVar"><span class="hs-identifier hs-type">isRdrTyVar</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-287"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isRdrTc"><span class="hs-identifier hs-type">isRdrTc</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span id="isRdrDataCon"><span class="annot"><span class="annottext">isRdrDataCon :: RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrDataCon"><span class="hs-identifier hs-var hs-var">isRdrDataCon</span></a></span></span><span> </span><span id="local-6989586621682533437"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533437"><span class="hs-identifier hs-var">rn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isDataOcc"><span class="hs-identifier hs-var">isDataOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533437"><span class="hs-identifier hs-var">rn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span id="isRdrTyVar"><span class="annot"><span class="annottext">isRdrTyVar :: RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrTyVar"><span class="hs-identifier hs-var hs-var">isRdrTyVar</span></a></span></span><span>   </span><span id="local-6989586621682533439"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533439"><span class="hs-identifier hs-var">rn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTvOcc"><span class="hs-identifier hs-var">isTvOcc</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533439"><span class="hs-identifier hs-var">rn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span id="isRdrTc"><span class="annot"><span class="annottext">isRdrTc :: RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrTc"><span class="hs-identifier hs-var hs-var">isRdrTc</span></a></span></span><span>      </span><span id="local-6989586621682533441"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533441"><span class="hs-identifier hs-var">rn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTcOcc"><span class="hs-identifier hs-var">isTcOcc</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533441"><span class="hs-identifier hs-var">rn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isSrcRdrName"><span class="hs-identifier hs-type">isSrcRdrName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-294"></span><span id="isSrcRdrName"><span class="annot"><span class="annottext">isSrcRdrName :: RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isSrcRdrName"><span class="hs-identifier hs-var hs-var">isSrcRdrName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-295"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isSrcRdrName"><span class="hs-identifier hs-var">isSrcRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-296"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isSrcRdrName"><span class="hs-identifier hs-var">isSrcRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isUnqual"><span class="hs-identifier hs-type">isUnqual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-299"></span><span id="isUnqual"><span class="annot"><span class="annottext">isUnqual :: RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isUnqual"><span class="hs-identifier hs-var hs-var">isUnqual</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-300"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isUnqual"><span class="hs-identifier hs-var">isUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isQual"><span class="hs-identifier hs-type">isQual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-303"></span><span id="isQual"><span class="annot"><span class="annottext">isQual :: RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isQual"><span class="hs-identifier hs-var hs-var">isQual</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-304"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isQual"><span class="hs-identifier hs-var">isQual</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isQual_maybe"><span class="hs-identifier hs-type">isQual_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span id="isQual_maybe"><span class="annot"><span class="annottext">isQual_maybe :: RdrName -&gt; Maybe (ModuleName, OccName)
</span><a href="GHC.Types.Name.Reader.html#isQual_maybe"><span class="hs-identifier hs-var hs-var">isQual_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682533443"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533443"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682533444"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533444"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ModuleName, OccName) -&gt; Maybe (ModuleName, OccName)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533443"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533444"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isQual_maybe"><span class="hs-identifier hs-var">isQual_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (ModuleName, OccName)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isOrig"><span class="hs-identifier hs-type">isOrig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-311"></span><span id="isOrig"><span class="annot"><span class="annottext">isOrig :: RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isOrig"><span class="hs-identifier hs-var hs-var">isOrig</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-312"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isOrig"><span class="hs-identifier hs-var">isOrig</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isOrig_maybe"><span class="hs-identifier hs-type">isOrig_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-315"></span><span id="isOrig_maybe"><span class="annot"><span class="annottext">isOrig_maybe :: RdrName -&gt; Maybe (Module, OccName)
</span><a href="GHC.Types.Name.Reader.html#isOrig_maybe"><span class="hs-identifier hs-var hs-var">isOrig_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span id="local-6989586621682533445"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533445"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682533446"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533446"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Module, OccName) -&gt; Maybe (Module, OccName)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533445"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533446"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isOrig_maybe"><span class="hs-identifier hs-var">isOrig_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Module, OccName)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isExact"><span class="hs-identifier hs-type">isExact</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-319"></span><span id="isExact"><span class="annot"><span class="annottext">isExact :: RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isExact"><span class="hs-identifier hs-var hs-var">isExact</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-320"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isExact"><span class="hs-identifier hs-var">isExact</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isExact_maybe"><span class="hs-identifier hs-type">isExact_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-323"></span><span id="isExact_maybe"><span class="annot"><span class="annottext">isExact_maybe :: RdrName -&gt; Maybe Name
</span><a href="GHC.Types.Name.Reader.html#isExact_maybe"><span class="hs-identifier hs-var hs-var">isExact_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533447"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533447"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533447"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-324"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isExact_maybe"><span class="hs-identifier hs-var">isExact_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Name
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Instances}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621682533462"><span class="annot"><span class="annottext">ppr :: RdrName -&gt; SDoc
</span><a href="#local-6989586621682533462"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533464"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533464"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533464"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-336"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682533465"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533465"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533465"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682533466"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533466"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682533467"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533467"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533466"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#dot"><span class="hs-identifier hs-var">dot</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533467"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-338"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span id="local-6989586621682533470"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533470"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682533471"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533471"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PprStyle -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#getPprStyle"><span class="hs-identifier hs-var">getPprStyle</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682533473"><span class="annot"><span class="annottext">PprStyle
</span><a href="#local-6989586621682533473"><span class="hs-identifier hs-var">sty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; Module -&gt; OccName -&gt; SDoc
</span><a href="GHC.Types.Name.html#pprModulePrefix"><span class="hs-identifier hs-var">pprModulePrefix</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="#local-6989586621682533473"><span class="hs-identifier hs-var">sty</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533470"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533471"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533471"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682533481"><span class="annot"><a href="GHC.Utils.Outputable.html#OutputableBndr"><span class="hs-identifier hs-type">OutputableBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-341"></span><span>    </span><span id="local-6989586621682533489"><span class="annot"><span class="annottext">pprBndr :: BindingSite -&gt; RdrName -&gt; SDoc
</span><a href="#local-6989586621682533489"><span class="hs-identifier hs-var hs-var hs-var">pprBndr</span></a></span></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682533491"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533491"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-342"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTvOcc"><span class="hs-identifier hs-var">isTvOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533491"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
forall doc. IsLine doc =&gt; Char -&gt; doc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'@'</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533491"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-343"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533491"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span>    </span><span id="local-6989586621682533494"><span class="annot"><span class="annottext">pprInfixOcc :: RdrName -&gt; SDoc
</span><a href="#local-6989586621682533494"><span class="hs-identifier hs-var hs-var hs-var">pprInfixOcc</span></a></span></span><span>  </span><span id="local-6989586621682533496"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533496"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprInfixVar"><span class="hs-identifier hs-var">pprInfixVar</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isSymOcc"><span class="hs-identifier hs-var">isSymOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533496"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533496"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>    </span><span id="local-6989586621682533502"><span class="annot"><span class="annottext">pprPrefixOcc :: RdrName -&gt; SDoc
</span><a href="#local-6989586621682533502"><span class="hs-identifier hs-var hs-var hs-var">pprPrefixOcc</span></a></span></span><span> </span><span id="local-6989586621682533504"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533504"><span class="hs-identifier hs-var">rdr</span></a></span></span><span>
</span><span id="line-347"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682533505"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533505"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Maybe Name
</span><a href="GHC.Types.Name.Reader.html#isExact_maybe"><span class="hs-identifier hs-var">isExact_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533504"><span class="hs-identifier hs-var">rdr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. NamedThing a =&gt; a -&gt; SDoc
</span><a href="GHC.Types.Name.html#pprPrefixName"><span class="hs-identifier hs-var">pprPrefixName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533505"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-348"></span><span>             </span><span class="hs-comment">-- pprPrefixName has some special cases, so</span><span>
</span><span id="line-349"></span><span>             </span><span class="hs-comment">-- we delegate to them rather than reproduce them</span><span>
</span><span id="line-350"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprPrefixVar"><span class="hs-identifier hs-var">pprPrefixVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isSymOcc"><span class="hs-identifier hs-var">isSymOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533504"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533504"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682533510"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-353"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533527"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533527"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span>    </span><span id="local-6989586621682533528"><span class="annot"><span class="annottext">== :: RdrName -&gt; RdrName -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533529"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533529"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533527"><span class="hs-identifier hs-var">n1</span></a></span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533529"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-354"></span><span>        </span><span class="hs-comment">-- Convert exact to orig</span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533530"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533530"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span id="local-6989586621682533531"><span class="annot"><span class="annottext">r2 :: RdrName
</span><a href="#local-6989586621682533531"><span class="hs-identifier hs-var">r2</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#nukeExact"><span class="hs-identifier hs-var">nukeExact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533530"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533531"><span class="hs-identifier hs-var">r2</span></a></span><span>
</span><span id="line-356"></span><span>    </span><span id="local-6989586621682533532"><span class="annot"><span class="annottext">r1 :: RdrName
</span><a href="#local-6989586621682533532"><span class="hs-identifier hs-var">r1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533533"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533533"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533532"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#nukeExact"><span class="hs-identifier hs-var">nukeExact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533533"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span id="local-6989586621682533534"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533534"><span class="hs-identifier hs-var">m1</span></a></span></span><span> </span><span id="local-6989586621682533535"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533535"><span class="hs-identifier hs-var">o1</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span id="local-6989586621682533536"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533536"><span class="hs-identifier hs-var">m2</span></a></span></span><span> </span><span id="local-6989586621682533537"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533537"><span class="hs-identifier hs-var">o2</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533534"><span class="hs-identifier hs-var">m1</span></a></span><span class="annot"><span class="annottext">Module -&gt; Module -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533536"><span class="hs-identifier hs-var">m2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533535"><span class="hs-identifier hs-var">o1</span></a></span><span class="annot"><span class="annottext">OccName -&gt; OccName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533537"><span class="hs-identifier hs-var">o2</span></a></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682533539"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533539"><span class="hs-identifier hs-var">m1</span></a></span></span><span> </span><span id="local-6989586621682533540"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533540"><span class="hs-identifier hs-var">o1</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682533541"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533541"><span class="hs-identifier hs-var">m2</span></a></span></span><span> </span><span id="local-6989586621682533542"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533542"><span class="hs-identifier hs-var">o2</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533539"><span class="hs-identifier hs-var">m1</span></a></span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533541"><span class="hs-identifier hs-var">m2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533540"><span class="hs-identifier hs-var">o1</span></a></span><span class="annot"><span class="annottext">OccName -&gt; OccName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533542"><span class="hs-identifier hs-var">o2</span></a></span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682533543"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533543"><span class="hs-identifier hs-var">o1</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682533544"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533544"><span class="hs-identifier hs-var">o2</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533543"><span class="hs-identifier hs-var">o1</span></a></span><span class="annot"><span class="annottext">OccName -&gt; OccName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533544"><span class="hs-identifier hs-var">o2</span></a></span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>             </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682533553"><span id="local-6989586621682533557"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-364"></span><span>    </span><span id="local-6989586621682533561"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533561"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682533562"><span class="annot"><span class="annottext">&lt;= :: RdrName -&gt; RdrName -&gt; Bool
</span><a href="#local-6989586621682533562"><span class="hs-operator hs-var hs-var hs-var">&lt;=</span></a></span></span><span> </span><span id="local-6989586621682533564"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533564"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533561"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533564"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">;</span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">;</span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-365"></span><span>    </span><span id="local-6989586621682533567"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533567"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682533568"><span class="annot"><span class="annottext">&lt; :: RdrName -&gt; RdrName -&gt; Bool
</span><a href="#local-6989586621682533568"><span class="hs-operator hs-var hs-var hs-var">&lt;</span></a></span></span><span>  </span><span id="local-6989586621682533570"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533570"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533567"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533570"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">;</span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-366"></span><span>    </span><span id="local-6989586621682533572"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533572"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682533573"><span class="annot"><span class="annottext">&gt;= :: RdrName -&gt; RdrName -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">&gt;=</span></span></span><span> </span><span id="local-6989586621682533574"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533574"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533572"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533574"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">;</span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-367"></span><span>    </span><span id="local-6989586621682533576"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533576"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682533577"><span class="annot"><span class="annottext">&gt; :: RdrName -&gt; RdrName -&gt; Bool
</span><a href="#local-6989586621682533577"><span class="hs-operator hs-var hs-var hs-var">&gt;</span></a></span></span><span>  </span><span id="local-6989586621682533579"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533579"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533576"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533579"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span>        </span><span class="hs-comment">-- Exact &lt; Unqual &lt; Qual &lt; Orig</span><span>
</span><span id="line-370"></span><span>        </span><span class="hs-comment">-- [Note: Apr 2004] We used to use nukeExact to convert Exact to Orig</span><span>
</span><span id="line-371"></span><span>        </span><span class="hs-comment">--      before comparing so that Prelude.map == the exact Prelude.map, but</span><span>
</span><span id="line-372"></span><span>        </span><span class="hs-comment">--      that meant that we reported duplicates when renaming bindings</span><span>
</span><span id="line-373"></span><span>        </span><span class="hs-comment">--      generated by Template Haskell; e.g</span><span>
</span><span id="line-374"></span><span>        </span><span class="hs-comment">--      do { n1 &lt;- newName &quot;foo&quot;; n2 &lt;- newName &quot;foo&quot;;</span><span>
</span><span id="line-375"></span><span>        </span><span class="hs-comment">--           &lt;decl involving n1,n2&gt; }</span><span>
</span><span id="line-376"></span><span>        </span><span class="hs-comment">--      I think we can do without this conversion</span><span>
</span><span id="line-377"></span><span>    </span><span id="local-6989586621682533593"><span class="annot"><span class="annottext">compare :: RdrName -&gt; RdrName -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var">compare</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533594"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533594"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533595"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533595"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533594"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533595"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-378"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-381"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682533596"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533596"><span class="hs-identifier hs-var">o1</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span>  </span><span id="local-6989586621682533597"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533597"><span class="hs-identifier hs-var">o2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533596"><span class="hs-identifier hs-var">o1</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccName -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533597"><span class="hs-identifier hs-var">o2</span></a></span><span>
</span><span id="line-382"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-385"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-386"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682533598"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533598"><span class="hs-identifier hs-var">m1</span></a></span></span><span> </span><span id="local-6989586621682533599"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533599"><span class="hs-identifier hs-var">o1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682533600"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533600"><span class="hs-identifier hs-var">m2</span></a></span></span><span> </span><span id="local-6989586621682533601"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533601"><span class="hs-identifier hs-var">o2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccName -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533599"><span class="hs-identifier hs-var">o1</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533601"><span class="hs-identifier hs-var">o2</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Ordering
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533598"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682533600"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-387"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span id="local-6989586621682533602"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533602"><span class="hs-identifier hs-var">m1</span></a></span></span><span> </span><span id="local-6989586621682533603"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533603"><span class="hs-identifier hs-var">o1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span id="local-6989586621682533604"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533604"><span class="hs-identifier hs-var">m2</span></a></span></span><span> </span><span id="local-6989586621682533605"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533605"><span class="hs-identifier hs-var">o2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccName -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533603"><span class="hs-identifier hs-var">o1</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533605"><span class="hs-identifier hs-var">o2</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Ordering
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Module -&gt; Module -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533602"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533604"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-390"></span><span>    </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                        LocalRdrEnv
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="hs-comment">{- Note [LocalRdrEnv]
~~~~~~~~~~~~~~~~~~~~~
The LocalRdrEnv is used to store local bindings (let, where, lambda, case).

* It is keyed by OccName, because we never use it for qualified names.

* It maps the OccName to a Name.  That Name is almost always an
  Internal Name, but (hackily) it can be External too for top-level
  pattern bindings.  See Note [bindLocalNames for an External name]
  in GHC.Rename.Pat

* We keep the current mapping (lre_env), *and* the set of all Names in
  scope (lre_in_scope).  Reason: see Note [Splicing Exact names] in
  GHC.Rename.Env.
-}</span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span class="hs-comment">-- | Local Reader Environment</span><span>
</span><span id="line-417"></span><span class="hs-comment">-- See Note [LocalRdrEnv]</span><span>
</span><span id="line-418"></span><span class="hs-keyword">data</span><span> </span><span id="LocalRdrEnv"><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-var">LocalRdrEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LRE"><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-var">LRE</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="lre_env"><span class="annot"><span class="annottext">LocalRdrEnv -&gt; OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var hs-var">lre_env</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccEnv"><span class="hs-identifier hs-type">OccEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-419"></span><span>                       </span><span class="hs-special">,</span><span> </span><span id="lre_in_scope"><span class="annot"><span class="annottext">LocalRdrEnv -&gt; NameSet
</span><a href="GHC.Types.Name.Reader.html#lre_in_scope"><span class="hs-identifier hs-var hs-var">lre_in_scope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-422"></span><span>  </span><span id="local-6989586621682533621"><span class="annot"><span class="annottext">ppr :: LocalRdrEnv -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">lre_env :: LocalRdrEnv -&gt; OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533622"><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533622"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lre_in_scope :: LocalRdrEnv -&gt; NameSet
</span><a href="GHC.Types.Name.Reader.html#lre_in_scope"><span class="hs-identifier hs-var">lre_in_scope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533623"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533623"><span class="hs-identifier hs-var">ns</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LocalRdrEnv {&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-424"></span><span>         </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;env =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; SDoc) -&gt; OccEnv Name -&gt; SDoc
forall a. (a -&gt; SDoc) -&gt; OccEnv a -&gt; SDoc
</span><a href="GHC.Types.Name.Occurrence.html#pprOccEnv"><span class="hs-identifier hs-var">pprOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
</span><a href="#local-6989586621682533629"><span class="hs-identifier hs-var">ppr_elt</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533622"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-425"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;in_scope =&quot;</span></span><span>
</span><span id="line-426"></span><span>                    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Name Name -&gt; ([Name] -&gt; SDoc) -&gt; SDoc
forall {k} (key :: k) a. UniqFM key a -&gt; ([a] -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Types.Unique.FM.html#pprUFM"><span class="hs-identifier hs-var">pprUFM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSet -&gt; UniqFM Name Name
forall a. UniqSet a -&gt; UniqFM a a
</span><a href="GHC.Types.Unique.Set.html#getUniqSet"><span class="hs-identifier hs-var">getUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533623"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; ([Name] -&gt; SDoc) -&gt; [Name] -&gt; SDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; SDoc) -&gt; [Name] -&gt; SDoc
forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>                 </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
forall doc. IsLine doc =&gt; Char -&gt; doc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'}'</span></span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-429"></span><span>      </span><span id="local-6989586621682533629"><span class="annot"><span class="annottext">ppr_elt :: Name -&gt; SDoc
</span><a href="#local-6989586621682533629"><span class="hs-identifier hs-var hs-var">ppr_elt</span></a></span></span><span> </span><span id="local-6989586621682533638"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533638"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533638"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533638"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-430"></span><span>                     </span><span class="hs-comment">-- So we can see if the keys line up correctly</span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#emptyLocalRdrEnv"><span class="hs-identifier hs-type">emptyLocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span>
</span><span id="line-433"></span><span id="emptyLocalRdrEnv"><span class="annot"><span class="annottext">emptyLocalRdrEnv :: LocalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#emptyLocalRdrEnv"><span class="hs-identifier hs-var hs-var">emptyLocalRdrEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lre_env :: OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccEnv Name
forall a. OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#emptyOccEnv"><span class="hs-identifier hs-var">emptyOccEnv</span></a></span><span>
</span><span id="line-434"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lre_in_scope :: NameSet
</span><a href="GHC.Types.Name.Reader.html#lre_in_scope"><span class="hs-identifier hs-var">lre_in_scope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#extendLocalRdrEnv"><span class="hs-identifier hs-type">extendLocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span>
</span><span id="line-437"></span><span class="hs-comment">-- See Note [LocalRdrEnv]</span><span>
</span><span id="line-438"></span><span id="extendLocalRdrEnv"><span class="annot"><span class="annottext">extendLocalRdrEnv :: LocalRdrEnv -&gt; Name -&gt; LocalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#extendLocalRdrEnv"><span class="hs-identifier hs-var hs-var">extendLocalRdrEnv</span></a></span></span><span> </span><span id="local-6989586621682533642"><span class="annot"><span class="annottext">lre :: LocalRdrEnv
</span><a href="#local-6989586621682533642"><span class="hs-identifier hs-var">lre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lre_env :: LocalRdrEnv -&gt; OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533643"><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533643"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lre_in_scope :: LocalRdrEnv -&gt; NameSet
</span><a href="GHC.Types.Name.Reader.html#lre_in_scope"><span class="hs-identifier hs-var">lre_in_scope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533644"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533644"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682533645"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533645"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682533642"><span class="hs-identifier hs-var">lre</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#extendOccEnv"><span class="hs-identifier hs-type">extendOccEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533643"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-type">nameOccName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533645"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682533645"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-440"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lre_in_scope"><span class="hs-identifier hs-var">lre_in_scope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#extendNameSet"><span class="hs-identifier hs-type">extendNameSet</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533644"><span class="hs-identifier hs-type">ns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533645"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#extendLocalRdrEnvList"><span class="hs-identifier hs-type">extendLocalRdrEnvList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span>
</span><span id="line-443"></span><span class="hs-comment">-- See Note [LocalRdrEnv]</span><span>
</span><span id="line-444"></span><span id="extendLocalRdrEnvList"><span class="annot"><span class="annottext">extendLocalRdrEnvList :: LocalRdrEnv -&gt; [Name] -&gt; LocalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#extendLocalRdrEnvList"><span class="hs-identifier hs-var hs-var">extendLocalRdrEnvList</span></a></span></span><span> </span><span id="local-6989586621682533648"><span class="annot"><span class="annottext">lre :: LocalRdrEnv
</span><a href="#local-6989586621682533648"><span class="hs-identifier hs-var">lre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lre_env :: LocalRdrEnv -&gt; OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533649"><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533649"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lre_in_scope :: LocalRdrEnv -&gt; NameSet
</span><a href="GHC.Types.Name.Reader.html#lre_in_scope"><span class="hs-identifier hs-var">lre_in_scope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533650"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533650"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682533651"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682533651"><span class="hs-identifier hs-var">names</span></a></span></span><span>
</span><span id="line-445"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682533648"><span class="hs-identifier hs-var">lre</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#extendOccEnvList"><span class="hs-identifier hs-type">extendOccEnvList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533649"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-type">nameOccName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533653"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682533653"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682533653"><span class="annot"><a href="#local-6989586621682533653"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682533651"><span class="hs-identifier hs-type">names</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-446"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lre_in_scope"><span class="hs-identifier hs-var">lre_in_scope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#extendNameSetList"><span class="hs-identifier hs-type">extendNameSetList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533650"><span class="hs-identifier hs-type">ns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533651"><span class="hs-identifier hs-type">names</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupLocalRdrEnv"><span class="hs-identifier hs-type">lookupLocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-449"></span><span id="lookupLocalRdrEnv"><span class="annot"><span class="annottext">lookupLocalRdrEnv :: LocalRdrEnv -&gt; RdrName -&gt; Maybe Name
</span><a href="GHC.Types.Name.Reader.html#lookupLocalRdrEnv"><span class="hs-identifier hs-var hs-var">lookupLocalRdrEnv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lre_env :: LocalRdrEnv -&gt; OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533655"><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533655"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lre_in_scope :: LocalRdrEnv -&gt; NameSet
</span><a href="GHC.Types.Name.Reader.html#lre_in_scope"><span class="hs-identifier hs-var">lre_in_scope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533656"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533656"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682533657"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533657"><span class="hs-identifier hs-var">rdr</span></a></span></span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682533658"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533658"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533657"><span class="hs-identifier hs-var">rdr</span></a></span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccEnv Name -&gt; OccName -&gt; Maybe Name
forall a. OccEnv a -&gt; OccName -&gt; Maybe a
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv"><span class="hs-identifier hs-var">lookupOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533655"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533658"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-comment">-- See Note [Local bindings with Exact Names]</span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533660"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533660"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533657"><span class="hs-identifier hs-var">rdr</span></a></span><span>
</span><span id="line-455"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533660"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; NameSet -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533656"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533660"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-459"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Name
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupLocalRdrOcc"><span class="hs-identifier hs-type">lookupLocalRdrOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-462"></span><span id="lookupLocalRdrOcc"><span class="annot"><span class="annottext">lookupLocalRdrOcc :: LocalRdrEnv -&gt; OccName -&gt; Maybe Name
</span><a href="GHC.Types.Name.Reader.html#lookupLocalRdrOcc"><span class="hs-identifier hs-var hs-var">lookupLocalRdrOcc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lre_env :: LocalRdrEnv -&gt; OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533662"><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533662"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682533663"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533663"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccEnv Name -&gt; OccName -&gt; Maybe Name
forall a. OccEnv a -&gt; OccName -&gt; Maybe a
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv"><span class="hs-identifier hs-var">lookupOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533662"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533663"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-463"></span><span>
</span><span id="line-464"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#elemLocalRdrEnv"><span class="hs-identifier hs-type">elemLocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-465"></span><span id="elemLocalRdrEnv"><span class="annot"><span class="annottext">elemLocalRdrEnv :: RdrName -&gt; LocalRdrEnv -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#elemLocalRdrEnv"><span class="hs-identifier hs-var hs-var">elemLocalRdrEnv</span></a></span></span><span> </span><span id="local-6989586621682533664"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533664"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lre_env :: LocalRdrEnv -&gt; OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533665"><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533665"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lre_in_scope :: LocalRdrEnv -&gt; NameSet
</span><a href="GHC.Types.Name.Reader.html#lre_in_scope"><span class="hs-identifier hs-var">lre_in_scope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533666"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533666"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533664"><span class="hs-identifier hs-var">rdr_name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-467"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682533667"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533667"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533667"><span class="hs-identifier hs-var">occ</span></a></span><span>  </span><span class="annot"><span class="annottext">OccName -&gt; OccEnv Name -&gt; Bool
forall a. OccName -&gt; OccEnv a -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#elemOccEnv"><span class="hs-operator hs-var">`elemOccEnv`</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533665"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-468"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682533669"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533669"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533669"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; NameSet -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533666"><span class="hs-identifier hs-var">ns</span></a></span><span>  </span><span class="hs-comment">-- See Note [Local bindings with Exact Names]</span><span>
</span><span id="line-469"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-470"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#localRdrEnvElts"><span class="hs-identifier hs-type">localRdrEnvElts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-473"></span><span id="localRdrEnvElts"><span class="annot"><span class="annottext">localRdrEnvElts :: LocalRdrEnv -&gt; [Name]
</span><a href="GHC.Types.Name.Reader.html#localRdrEnvElts"><span class="hs-identifier hs-var hs-var">localRdrEnvElts</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lre_env :: LocalRdrEnv -&gt; OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533670"><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533670"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccEnv Name -&gt; [Name]
forall a. OccEnv a -&gt; [a]
</span><a href="GHC.Types.Name.Occurrence.html#nonDetOccEnvElts"><span class="hs-identifier hs-var">nonDetOccEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533670"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#inLocalRdrEnvScope"><span class="hs-identifier hs-type">inLocalRdrEnvScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-476"></span><span class="hs-comment">-- This is the point of the NameSet</span><span>
</span><span id="line-477"></span><span id="inLocalRdrEnvScope"><span class="annot"><span class="annottext">inLocalRdrEnvScope :: Name -&gt; LocalRdrEnv -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#inLocalRdrEnvScope"><span class="hs-identifier hs-var hs-var">inLocalRdrEnvScope</span></a></span></span><span> </span><span id="local-6989586621682533672"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533672"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lre_in_scope :: LocalRdrEnv -&gt; NameSet
</span><a href="GHC.Types.Name.Reader.html#lre_in_scope"><span class="hs-identifier hs-var">lre_in_scope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533673"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533673"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533672"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; NameSet -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533673"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-478"></span><span>
</span><span id="line-479"></span><span id="local-6989586621682532809"><span class="annot"><a href="GHC.Types.Name.Reader.html#minusLocalRdrEnv"><span class="hs-identifier hs-type">minusLocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccEnv"><span class="hs-identifier hs-type">OccEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532809"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span></span><span>
</span><span id="line-480"></span><span id="minusLocalRdrEnv"><span class="annot"><span class="annottext">minusLocalRdrEnv :: forall a. LocalRdrEnv -&gt; OccEnv a -&gt; LocalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#minusLocalRdrEnv"><span class="hs-identifier hs-var hs-var">minusLocalRdrEnv</span></a></span></span><span> </span><span id="local-6989586621682533674"><span class="annot"><span class="annottext">lre :: LocalRdrEnv
</span><a href="#local-6989586621682533674"><span class="hs-identifier hs-var">lre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lre_env :: LocalRdrEnv -&gt; OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533675"><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533675"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682533676"><span class="annot"><span class="annottext">OccEnv a
</span><a href="#local-6989586621682533676"><span class="hs-identifier hs-var">occs</span></a></span></span><span>
</span><span id="line-481"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682533674"><span class="hs-identifier hs-var">lre</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#minusOccEnv"><span class="hs-identifier hs-type">minusOccEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533675"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533676"><span class="hs-identifier hs-type">occs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-482"></span><span>
</span><span id="line-483"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#minusLocalRdrEnvList"><span class="hs-identifier hs-type">minusLocalRdrEnvList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span>
</span><span id="line-484"></span><span id="minusLocalRdrEnvList"><span class="annot"><span class="annottext">minusLocalRdrEnvList :: LocalRdrEnv -&gt; [OccName] -&gt; LocalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#minusLocalRdrEnvList"><span class="hs-identifier hs-var hs-var">minusLocalRdrEnvList</span></a></span></span><span> </span><span id="local-6989586621682533678"><span class="annot"><span class="annottext">lre :: LocalRdrEnv
</span><a href="#local-6989586621682533678"><span class="hs-identifier hs-var">lre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LRE"><span class="hs-identifier hs-type">LRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lre_env :: LocalRdrEnv -&gt; OccEnv Name
</span><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533679"><span class="annot"><span class="annottext">OccEnv Name
</span><a href="#local-6989586621682533679"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682533680"><span class="annot"><span class="annottext">[OccName]
</span><a href="#local-6989586621682533680"><span class="hs-identifier hs-var">occs</span></a></span></span><span>
</span><span id="line-485"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682533678"><span class="hs-identifier hs-var">lre</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lre_env"><span class="hs-identifier hs-var">lre_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#delListFromOccEnv"><span class="hs-identifier hs-type">delListFromOccEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533679"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533680"><span class="hs-identifier hs-type">occs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span class="hs-comment">{-
Note [Local bindings with Exact Names]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
With Template Haskell we can make local bindings that have Exact Names.
Computing shadowing etc may use elemLocalRdrEnv (at least it certainly
does so in GHC.Rename.HsType.bindHsQTyVars), so for an Exact Name we must consult
the in-scope-name-set.


************************************************************************
*                                                                      *
                        GlobalRdrEnv
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span class="annot"><span class="hs-comment">-- | Global Reader Environment</span></span><span>
</span><span id="line-504"></span><span class="hs-keyword">type</span><span> </span><span id="GlobalRdrEnv"><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-var">GlobalRdrEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier hs-type">GREInfo</span></a></span><span>
</span><span id="line-505"></span><span class="hs-comment">-- ^ Keyed by 'OccName'; when looking up a qualified name</span><span>
</span><span id="line-506"></span><span class="hs-comment">-- we look up the 'OccName' part, and then check the 'Provenance'</span><span>
</span><span id="line-507"></span><span class="hs-comment">-- to see if the appropriate qualification is valid.  This</span><span>
</span><span id="line-508"></span><span class="hs-comment">-- saves routinely doubling the size of the env by adding both</span><span>
</span><span id="line-509"></span><span class="hs-comment">-- qualified and unqualified names to the domain.</span><span>
</span><span id="line-510"></span><span class="hs-comment">--</span><span>
</span><span id="line-511"></span><span class="hs-comment">-- The list in the codomain is required because there may be name clashes</span><span>
</span><span id="line-512"></span><span class="hs-comment">-- These only get reported on lookup, not on construction</span><span>
</span><span id="line-513"></span><span class="hs-comment">--</span><span>
</span><span id="line-514"></span><span class="hs-comment">-- INVARIANT 1: All the members of the list have distinct</span><span>
</span><span id="line-515"></span><span class="hs-comment">--              'gre_name' fields; that is, no duplicate Names</span><span>
</span><span id="line-516"></span><span class="hs-comment">--</span><span>
</span><span id="line-517"></span><span class="hs-comment">-- INVARIANT 2: Imported provenance =&gt; Name is an ExternalName</span><span>
</span><span id="line-518"></span><span class="hs-comment">--              However LocalDefs can have an InternalName.  This</span><span>
</span><span id="line-519"></span><span class="hs-comment">--              happens only when type-checking a [d| ... |] Template</span><span>
</span><span id="line-520"></span><span class="hs-comment">--              Haskell quotation; see this note in GHC.Rename.Names</span><span>
</span><span id="line-521"></span><span class="hs-comment">--              Note [Top-level Names in Template Haskell decl quotes]</span><span>
</span><span id="line-522"></span><span class="hs-comment">--</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- INVARIANT 3: If the GlobalRdrEnv maps [occ -&gt; gre], then</span><span>
</span><span id="line-524"></span><span class="hs-comment">--                 greOccName gre = occ</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span class="hs-comment">-- | A 'GlobalRdrEnv' in which the 'GlobalRdrElt's don't have any 'GREInfo'</span><span>
</span><span id="line-527"></span><span class="hs-comment">-- attached to them. This is useful to avoid space leaks, see Note [IfGlobalRdrEnv].</span><span>
</span><span id="line-528"></span><span class="hs-keyword">type</span><span> </span><span id="IfGlobalRdrEnv"><span class="annot"><a href="GHC.Types.Name.Reader.html#IfGlobalRdrEnv"><span class="hs-identifier hs-var">IfGlobalRdrEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span class="hs-comment">-- | Parametrises 'GlobalRdrEnv' over the presence or absence of 'GREInfo'.</span><span>
</span><span id="line-531"></span><span class="hs-comment">--</span><span>
</span><span id="line-532"></span><span class="hs-comment">-- See Note [IfGlobalRdrEnv].</span><span>
</span><span id="line-533"></span><span class="hs-keyword">type</span><span> </span><span id="GlobalRdrEnvX"><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-var">GlobalRdrEnvX</span></a></span></span><span> </span><span id="local-6989586621682533683"><span class="annot"><a href="#local-6989586621682533683"><span class="hs-identifier hs-type">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccEnv"><span class="hs-identifier hs-type">OccEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533683"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span class="hs-comment">-- | Global Reader Element</span><span>
</span><span id="line-536"></span><span class="hs-comment">--</span><span>
</span><span id="line-537"></span><span class="hs-comment">-- Something in scope in the renamer; usually a member of the 'GlobalRdrEnv'.</span><span>
</span><span id="line-538"></span><span class="hs-comment">-- See Note [GlobalRdrElt provenance].</span><span>
</span><span id="line-539"></span><span>
</span><span id="line-540"></span><span class="hs-keyword">type</span><span> </span><span id="GlobalRdrElt"><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-var">GlobalRdrElt</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier hs-type">GREInfo</span></a></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="hs-comment">-- | A 'GlobalRdrElt' in which we stripped out the 'GREInfo' field,</span><span>
</span><span id="line-543"></span><span class="hs-comment">-- in order to avoid space leaks.</span><span>
</span><span id="line-544"></span><span class="hs-comment">--</span><span>
</span><span id="line-545"></span><span class="hs-comment">-- See Note [IfGlobalRdrEnv].</span><span>
</span><span id="line-546"></span><span class="hs-keyword">type</span><span> </span><span id="IfGlobalRdrElt"><span class="annot"><a href="GHC.Types.Name.Reader.html#IfGlobalRdrElt"><span class="hs-identifier hs-var">IfGlobalRdrElt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span>
</span><span id="line-548"></span><span class="hs-comment">-- | Global Reader Element</span><span>
</span><span id="line-549"></span><span class="hs-comment">--</span><span>
</span><span id="line-550"></span><span class="hs-comment">-- Something in scope in the renamer; usually a member of the 'GlobalRdrEnv'.</span><span>
</span><span id="line-551"></span><span class="hs-comment">-- See Note [GlobalRdrElt provenance].</span><span>
</span><span id="line-552"></span><span class="hs-comment">--</span><span>
</span><span id="line-553"></span><span class="hs-comment">-- Why do we parametrise over the 'gre_info' field? See Note [IfGlobalRdrEnv].</span><span>
</span><span id="line-554"></span><span class="hs-keyword">data</span><span> </span><span id="GlobalRdrEltX"><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-var">GlobalRdrEltX</span></a></span></span><span> </span><span id="local-6989586621682532814"><span class="annot"><a href="#local-6989586621682532814"><span class="hs-identifier hs-type">info</span></a></span></span><span>
</span><span id="line-555"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="GRE"><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-var">GRE</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="gre_name"><span class="annot"><span class="annottext">forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var hs-var">gre_name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-556"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="gre_par"><span class="annot"><span class="annottext">forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var hs-var">gre_par</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span>            </span><span class="annot"><span class="hs-comment">-- ^ See Note [Parents]</span></span><span>
</span><span id="line-557"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="gre_lcl"><span class="annot"><span class="annottext">forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var hs-var">gre_lcl</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>              </span><span class="annot"><span class="hs-comment">-- ^ True &lt;=&gt; the thing was defined locally</span></span><span>
</span><span id="line-558"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="gre_imp"><span class="annot"><span class="annottext">forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var hs-var">gre_imp</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ In scope through these imports</span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-comment">-- See Note [GlobalRdrElt provenance] for the relation between gre_lcl and gre_imp.</span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="gre_info"><span class="annot"><span class="annottext">forall info. GlobalRdrEltX info -&gt; info
</span><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var hs-var">gre_info</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682532814"><span class="hs-identifier hs-type">info</span></a></span><span>
</span><span id="line-562"></span><span>            </span><span class="hs-comment">-- ^ Information the renamer knows about this particular 'Name'.</span><span>
</span><span id="line-563"></span><span>            </span><span class="hs-comment">--</span><span>
</span><span id="line-564"></span><span>            </span><span class="hs-comment">-- Careful about forcing this field! Forcing it can trigger</span><span>
</span><span id="line-565"></span><span>            </span><span class="hs-comment">-- the loading of interface files.</span><span>
</span><span id="line-566"></span><span>            </span><span class="hs-comment">--</span><span>
</span><span id="line-567"></span><span>            </span><span class="hs-comment">-- Note [Retrieving the GREInfo from interfaces] in GHC.Types.GREInfo.</span><span>
</span><span id="line-568"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682533695"><span id="local-6989586621682533706"><span id="local-6989586621682533714"><span id="local-6989586621682533716"><span id="local-6989586621682533718"><span id="local-6989586621682533724"><span id="local-6989586621682533730"><span id="local-6989586621682533733"><span id="local-6989586621682533736"><span id="local-6989586621682533739"><span id="local-6989586621682533742"><span id="local-6989586621682533745"><span id="local-6989586621682533750"><span id="local-6989586621682533755"><span class="annot"><span class="annottext">Typeable (GlobalRdrEltX info)
Typeable (GlobalRdrEltX info) =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g)
 -&gt; GlobalRdrEltX info
 -&gt; c (GlobalRdrEltX info))
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (GlobalRdrEltX info))
-&gt; (GlobalRdrEltX info -&gt; Constr)
-&gt; (GlobalRdrEltX info -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (GlobalRdrEltX info)))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c (GlobalRdrEltX info)))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; GlobalRdrEltX info -&gt; GlobalRdrEltX info)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; GlobalRdrEltX info -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; GlobalRdrEltX info -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; GlobalRdrEltX info -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; GlobalRdrEltX info -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info))
-&gt; Data (GlobalRdrEltX info)
GlobalRdrEltX info -&gt; Constr
GlobalRdrEltX info -&gt; DataType
(forall b. Data b =&gt; b -&gt; b)
-&gt; GlobalRdrEltX info -&gt; GlobalRdrEltX info
forall info. Data info =&gt; Typeable (GlobalRdrEltX info)
forall info. Data info =&gt; GlobalRdrEltX info -&gt; Constr
forall info. Data info =&gt; GlobalRdrEltX info -&gt; DataType
forall info.
Data info =&gt;
(forall b. Data b =&gt; b -&gt; b)
-&gt; GlobalRdrEltX info -&gt; GlobalRdrEltX info
forall info u.
Data info =&gt;
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; GlobalRdrEltX info -&gt; u
forall info u.
Data info =&gt;
(forall d. Data d =&gt; d -&gt; u) -&gt; GlobalRdrEltX info -&gt; [u]
forall info r r'.
Data info =&gt;
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; GlobalRdrEltX info -&gt; r
forall info r r'.
Data info =&gt;
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; GlobalRdrEltX info -&gt; r
forall info (m :: * -&gt; *).
(Data info, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info)
forall info (m :: * -&gt; *).
(Data info, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info)
forall info (c :: * -&gt; *).
Data info =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (GlobalRdrEltX info)
forall info (c :: * -&gt; *).
Data info =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; GlobalRdrEltX info
-&gt; c (GlobalRdrEltX info)
forall info (t :: * -&gt; *) (c :: * -&gt; *).
(Data info, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (GlobalRdrEltX info))
forall info (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data info, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c (GlobalRdrEltX info))
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; GlobalRdrEltX info -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; GlobalRdrEltX info -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; GlobalRdrEltX info -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; GlobalRdrEltX info -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info)
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info)
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (GlobalRdrEltX info)
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; GlobalRdrEltX info
-&gt; c (GlobalRdrEltX info)
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (GlobalRdrEltX info))
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c (GlobalRdrEltX info))
$cgfoldl :: forall info (c :: * -&gt; *).
Data info =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; GlobalRdrEltX info
-&gt; c (GlobalRdrEltX info)
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; GlobalRdrEltX info
-&gt; c (GlobalRdrEltX info)
$cgunfold :: forall info (c :: * -&gt; *).
Data info =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (GlobalRdrEltX info)
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (GlobalRdrEltX info)
$ctoConstr :: forall info. Data info =&gt; GlobalRdrEltX info -&gt; Constr
toConstr :: GlobalRdrEltX info -&gt; Constr
$cdataTypeOf :: forall info. Data info =&gt; GlobalRdrEltX info -&gt; DataType
dataTypeOf :: GlobalRdrEltX info -&gt; DataType
$cdataCast1 :: forall info (t :: * -&gt; *) (c :: * -&gt; *).
(Data info, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (GlobalRdrEltX info))
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (GlobalRdrEltX info))
$cdataCast2 :: forall info (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data info, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c (GlobalRdrEltX info))
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c (GlobalRdrEltX info))
$cgmapT :: forall info.
Data info =&gt;
(forall b. Data b =&gt; b -&gt; b)
-&gt; GlobalRdrEltX info -&gt; GlobalRdrEltX info
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; GlobalRdrEltX info -&gt; GlobalRdrEltX info
$cgmapQl :: forall info r r'.
Data info =&gt;
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; GlobalRdrEltX info -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; GlobalRdrEltX info -&gt; r
$cgmapQr :: forall info r r'.
Data info =&gt;
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; GlobalRdrEltX info -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; GlobalRdrEltX info -&gt; r
$cgmapQ :: forall info u.
Data info =&gt;
(forall d. Data d =&gt; d -&gt; u) -&gt; GlobalRdrEltX info -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; GlobalRdrEltX info -&gt; [u]
$cgmapQi :: forall info u.
Data info =&gt;
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; GlobalRdrEltX info -&gt; u
gmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; GlobalRdrEltX info -&gt; u
$cgmapM :: forall info (m :: * -&gt; *).
(Data info, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info)
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info)
$cgmapMp :: forall info (m :: * -&gt; *).
(Data info, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info)
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info)
$cgmapMo :: forall info (m :: * -&gt; *).
(Data info, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; GlobalRdrEltX info -&gt; m (GlobalRdrEltX info)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span>
</span><span id="line-570"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682532834"><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532834"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532834"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-571"></span><span>  </span><span id="local-6989586621682533775"><span class="annot"><span class="annottext">rnf :: GlobalRdrEltX a -&gt; ()
</span><a href="#local-6989586621682533775"><span class="hs-identifier hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span id="local-6989586621682533777"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533777"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682533778"><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533778"><span class="hs-identifier hs-var">par</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682533779"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682533779"><span class="hs-identifier hs-var">imp</span></a></span></span><span> </span><span id="local-6989586621682533780"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682533780"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533777"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Parent -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533778"><span class="hs-identifier hs-var">par</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682533779"><span class="hs-identifier hs-var">imp</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682533780"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span class="hs-comment">{- Note [IfGlobalRdrEnv]
~~~~~~~~~~~~~~~~~~~~~~~~
Information pertinent to the renamer about a 'Name' is stored in the fields of
'GlobalRdrElt'. The 'gre_info' field, described in Note [GREInfo] in GHC.Types.GREInfo,
is a bit special: as Note [Retrieving the GREInfo from interfaces] in GHC.Types.GREInfo
describes, for imported 'Name's it is usually obtained by a look up in a type environment,
and forcing can cause the interface file for the module defining the 'Name' to be
loaded. As described in Note [Forcing GREInfo] in GHC.Types.GREInfo, keeping it
a thunk can cause space leaks, while forcing it can cause extra work to be done.
So it's best to discard it when we don't need it, for example when we are about
to store it in a 'ModIface'.

We thus parametrise 'GlobalRdrElt' (and 'GlobalRdrEnv') over the presence or
absence of the 'GREInfo' field.

  - When we are about to stash the 'GlobalRdrElt' in a long-lived data structure,
    e.g. a 'ModIface', we force it by setting all the 'GREInfo' fields to '()'.
    See 'forceGlobalRdrEnv'.
  - To go back the other way, we use 'hydrateGlobalRdrEnv', which sets the
    'gre_info' fields back to lazy lookups.

This parametrisation also helps ensure that we don't accidentally force the
GREInfo field (which can cause unnecessary loading of interface files).
In particular, the 'lookupGRE' function is statically guaranteed to not consult
the 'GREInfo' field when using 'SameNameSpace', which is important
as we sometimes need to use this function with an 'IfaceGlobalRdrEnv' in which
the 'GREInfo' fields have been stripped.
-}</span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span class="hs-comment">-- | A 'FieldGlobalRdrElt' is a 'GlobalRdrElt'</span><span>
</span><span id="line-604"></span><span class="hs-comment">-- in which the 'gre_info' field is 'IAmRecField'.</span><span>
</span><span id="line-605"></span><span class="hs-keyword">type</span><span> </span><span id="FieldGlobalRdrElt"><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldGlobalRdrElt"><span class="hs-identifier hs-var">FieldGlobalRdrElt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span id="local-6989586621682533782"><span class="annot"><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-type">greName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533782"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span></span><span>
</span><span id="line-608"></span><span id="greName"><span class="annot"><span class="annottext">greName :: forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var hs-var">greName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var">gre_name</span></a></span><span>
</span><span id="line-609"></span><span>
</span><span id="line-610"></span><span id="local-6989586621682532839"><span class="annot"><a href="GHC.Types.Name.Reader.html#greNameSpace"><span class="hs-identifier hs-type">greNameSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532839"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span></span><span>
</span><span id="line-611"></span><span id="greNameSpace"><span class="annot"><span class="annottext">greNameSpace :: forall info. GlobalRdrEltX info -&gt; NameSpace
</span><a href="GHC.Types.Name.Reader.html#greNameSpace"><span class="hs-identifier hs-var hs-var">greNameSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; NameSpace
</span><a href="GHC.Types.Name.html#nameNameSpace"><span class="hs-identifier hs-var">nameNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; NameSpace)
-&gt; (GlobalRdrEltX info -&gt; Name) -&gt; GlobalRdrEltX info -&gt; NameSpace
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span id="local-6989586621682533784"><span class="annot"><a href="GHC.Types.Name.Reader.html#greParent"><span class="hs-identifier hs-type">greParent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533784"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span></span><span>
</span><span id="line-614"></span><span id="greParent"><span class="annot"><span class="annottext">greParent :: forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#greParent"><span class="hs-identifier hs-var hs-var">greParent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Parent
forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#greInfo"><span class="hs-identifier hs-type">greInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier hs-type">GREInfo</span></a></span><span>
</span><span id="line-617"></span><span id="greInfo"><span class="annot"><span class="annottext">greInfo :: GlobalRdrElt -&gt; GREInfo
</span><a href="GHC.Types.Name.Reader.html#greInfo"><span class="hs-identifier hs-var hs-var">greInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; GREInfo
forall info. GlobalRdrEltX info -&gt; info
</span><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span>
</span><span id="line-618"></span><span>
</span><span id="line-619"></span><span class="annot"><span class="hs-comment">-- | See Note [Parents]</span></span><span>
</span><span id="line-620"></span><span class="hs-keyword">data</span><span> </span><span id="Parent"><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-var">Parent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NoParent"><span class="annot"><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span></span><span>
</span><span id="line-621"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span id="ParentIs"><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-var">ParentIs</span></a></span></span><span>  </span><span class="hs-special">{</span><span> </span><span id="par_is"><span class="annot"><span class="annottext">Parent -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#par_is"><span class="hs-identifier hs-var hs-var">par_is</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-622"></span><span>            </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682533789"><span id="local-6989586621682533795"><span class="annot"><span class="annottext">Parent -&gt; Parent -&gt; Bool
(Parent -&gt; Parent -&gt; Bool)
-&gt; (Parent -&gt; Parent -&gt; Bool) -&gt; Eq Parent
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Parent -&gt; Parent -&gt; Bool
== :: Parent -&gt; Parent -&gt; Bool
$c/= :: Parent -&gt; Parent -&gt; Bool
/= :: Parent -&gt; Parent -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682533801"><span id="local-6989586621682533804"><span id="local-6989586621682533807"><span id="local-6989586621682533809"><span id="local-6989586621682533811"><span id="local-6989586621682533816"><span id="local-6989586621682533821"><span id="local-6989586621682533824"><span id="local-6989586621682533827"><span id="local-6989586621682533830"><span id="local-6989586621682533833"><span id="local-6989586621682533836"><span id="local-6989586621682533841"><span id="local-6989586621682533846"><span class="annot"><span class="annottext">Typeable Parent
Typeable Parent =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; Parent -&gt; c Parent)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Parent)
-&gt; (Parent -&gt; Constr)
-&gt; (Parent -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Parent))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Parent))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; Parent -&gt; Parent)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Parent -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Parent -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Parent -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Parent -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent)
-&gt; Data Parent
Parent -&gt; Constr
Parent -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; Parent -&gt; Parent
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Parent -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Parent -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Parent -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Parent -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Parent
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Parent -&gt; c Parent
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Parent)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Parent)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Parent -&gt; c Parent
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Parent -&gt; c Parent
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Parent
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Parent
$ctoConstr :: Parent -&gt; Constr
toConstr :: Parent -&gt; Constr
$cdataTypeOf :: Parent -&gt; DataType
dataTypeOf :: Parent -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Parent)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Parent)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Parent)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Parent)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Parent -&gt; Parent
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Parent -&gt; Parent
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Parent -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Parent -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Parent -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Parent -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Parent -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Parent -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Parent -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Parent -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Parent -&gt; m Parent
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-623"></span><span>
</span><span id="line-624"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-625"></span><span>   </span><span id="local-6989586621682533856"><span class="annot"><span class="annottext">ppr :: Parent -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-626"></span><span>   </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span> </span><span id="local-6989586621682533858"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533858"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;parent:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533858"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-627"></span><span>
</span><span id="line-628"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-629"></span><span>  </span><span id="local-6989586621682533861"><span class="annot"><span class="annottext">rnf :: Parent -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-630"></span><span>  </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span> </span><span id="local-6989586621682533862"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533862"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533862"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-631"></span><span>
</span><span id="line-632"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#plusParent"><span class="hs-identifier hs-type">plusParent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span>
</span><span id="line-633"></span><span class="hs-comment">-- See Note [Combining parents]</span><span>
</span><span id="line-634"></span><span id="plusParent"><span class="annot"><span class="annottext">plusParent :: Parent -&gt; Parent -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#plusParent"><span class="hs-identifier hs-var hs-var">plusParent</span></a></span></span><span> </span><span id="local-6989586621682533864"><span class="annot"><span class="annottext">p1 :: Parent
</span><a href="#local-6989586621682533864"><span class="hs-identifier hs-var">p1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span id="local-6989586621682533865"><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533865"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent -&gt; Parent -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#hasParent"><span class="hs-identifier hs-var">hasParent</span></a></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533864"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533865"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-635"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#plusParent"><span class="hs-identifier hs-var">plusParent</span></a></span><span> </span><span id="local-6989586621682533867"><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533867"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621682533868"><span class="annot"><span class="annottext">p2 :: Parent
</span><a href="#local-6989586621682533868"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent -&gt; Parent -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#hasParent"><span class="hs-identifier hs-var">hasParent</span></a></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533868"><span class="hs-identifier hs-var">p2</span></a></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533867"><span class="hs-identifier hs-var">p1</span></a></span><span>
</span><span id="line-636"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#plusParent"><span class="hs-identifier hs-var">plusParent</span></a></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>
</span><span id="line-637"></span><span>
</span><span id="line-638"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#hasParent"><span class="hs-identifier hs-type">hasParent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span class="hs-cpp">
#if defined(DEBUG)
</span><span class="hs-identifier">hasParent</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-identifier">NoParent</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">p</span><span>
</span><span id="line-641"></span><span class="hs-identifier">hasParent</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-identifier">p'</span><span>
</span><span id="line-642"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-operator">/=</span><span> </span><span class="hs-identifier">p'</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">pprPanic</span><span> </span><span class="hs-string">&quot;hasParent&quot;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">p</span><span> </span><span class="hs-operator">&lt;+&gt;</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">p'</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Parents should agree</span><span class="hs-cpp">
#endif
</span><span id="hasParent"><span class="annot"><span class="annottext">hasParent :: Parent -&gt; Parent -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#hasParent"><span class="hs-identifier hs-var hs-var">hasParent</span></a></span></span><span> </span><span id="local-6989586621682533869"><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533869"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">Parent
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533869"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-645"></span><span>
</span><span id="line-646"></span><span>
</span><span id="line-647"></span><span class="hs-comment">{- Note [GlobalRdrElt provenance]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The gre_lcl and gre_imp fields of a GlobalRdrElt describe its &quot;provenance&quot;,
i.e. how the Name came to be in scope.  It can be in scope in one of the following
three ways:

  A. The Name was locally bound, in the current module.
     gre_lcl = True

     The renamer adds this Name to the GlobalRdrEnv after renaming the binding.
     See the calls to &quot;extendGlobalRdrEnvRn&quot; in GHC.Rename.Module.rnSrcDecls.

  B. The Name was imported
     gre_imp = Just imps &lt;=&gt; brought into scope by the imports &quot;imps&quot;

     The renamer adds this Name to the GlobalRdrEnv after processing the imports.
     See GHC.Rename.Names.filterImports and GHC.Tc.Module.tcRnImports.

  C. We followed an exact reference (i.e. an Exact or Orig RdrName)
     gre_lcl = False, gre_imp = Nothing

     In this case, we directly fetch a Name and its GREInfo from direct reference.
     We don't add it to the GlobalRdrEnv. See &quot;GHC.Rename.Env.lookupExactOrOrig&quot;.

It is just about possible to have *both* gre_lcl = True and gre_imp = Just imps.
This can happen with module loops: a Name is defined locally in A, and also
brought into scope by importing a module that SOURCE-imported A.

Example (#7672):

 A.hs-boot   module A where
               data T

 B.hs        module B(Decl.T) where
               import {-# SOURCE #-} qualified A as Decl

 A.hs        module A where
               import qualified B
               data T = Z | S B.T

In A.hs, 'T' is locally bound, *and* imported as B.T.


Note [Parents]
~~~~~~~~~~~~~~~~~
The children of a Name are the things that are abbreviated by the &quot;..&quot; notation
in export lists.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  Parent           Children
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  data T           Data constructors
                   Record-field ids

  data family T    Data constructors and record-field ids
                   of all visible data instances of T

  class C          Class operations
                   Associated type constructors

~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  Constructor      Meaning
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  NoParent         Not bundled with a type constructor.
  ParentIs n       Bundled with the type constructor corresponding to n.

Pattern synonym constructors (and their record fields, if any) are unusual:
their gre_par is NoParent in the module in which they are defined.  However, a
pattern synonym can be bundled with a type constructor on export, in which case
whenever the pattern synonym is imported the gre_par will be ParentIs.

Thus the gre_name and gre_par fields are independent, because a normal datatype
introduces FieldGlobalRdrElts using ParentIs, but a record pattern synonym can
introduce FieldGlobalRdrElts that use NoParent. (In the past we represented
fields using an additional constructor of the Parent type, which could not
adequately represent this situation.) See also
Note [Representing pattern synonym fields in AvailInfo] in GHC.Types.Avail.

Note [Combining parents]
~~~~~~~~~~~~~~~~~~~~~~~~
With an associated type we might have
   module M where
     class C a where
       data T a
       op :: T a -&gt; a
     instance C Int where
       data T Int = TInt
     instance C Bool where
       data T Bool = TBool

Then:   C is the parent of T
        T is the parent of TInt and TBool
So: in an export list
    C(..) is short for C( op, T )
    T(..) is short for T( TInt, TBool )

Module M exports everything, so its exports will be
   AvailTC C [C,T,op]
   AvailTC T [T,TInt,TBool]
On import we convert to GlobalRdrElt and then combine
those.  For T that will mean we have
  one GRE with Parent C
  one GRE with NoParent
That's why plusParent picks the &quot;best&quot; case.
-}</span><span>
</span><span id="line-752"></span><span>
</span><span id="line-753"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkGRE"><span class="hs-identifier hs-type">mkGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier hs-type">GREInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-754"></span><span id="mkGRE"><span class="annot"><span class="annottext">mkGRE :: (Name -&gt; Maybe ImportSpec)
-&gt; GREInfo -&gt; Parent -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkGRE"><span class="hs-identifier hs-var hs-var">mkGRE</span></a></span></span><span> </span><span id="local-6989586621682533870"><span class="annot"><span class="annottext">Name -&gt; Maybe ImportSpec
</span><a href="#local-6989586621682533870"><span class="hs-identifier hs-var">prov_fn</span></a></span></span><span> </span><span id="local-6989586621682533871"><span class="annot"><span class="annottext">GREInfo
</span><a href="#local-6989586621682533871"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621682533872"><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533872"><span class="hs-identifier hs-var">par</span></a></span></span><span> </span><span id="local-6989586621682533873"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533873"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-755"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe ImportSpec
</span><a href="#local-6989586621682533870"><span class="hs-identifier hs-var">prov_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533873"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-756"></span><span>      </span><span class="hs-comment">-- Nothing =&gt; bound locally</span><span>
</span><span id="line-757"></span><span>      </span><span class="hs-comment">-- Just is =&gt; imported from 'is'</span><span>
</span><span id="line-758"></span><span>    </span><span class="annot"><span class="annottext">Maybe ImportSpec
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_name :: Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var">gre_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533873"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_par :: Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533872"><span class="hs-identifier hs-var">par</span></a></span><span>
</span><span id="line-759"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-760"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_info :: GREInfo
</span><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GREInfo
</span><a href="#local-6989586621682533871"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-761"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682533875"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682533875"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_name :: Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var">gre_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533873"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_par :: Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533872"><span class="hs-identifier hs-var">par</span></a></span><span>
</span><span id="line-762"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; Bag ImportSpec
forall a. a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682533875"><span class="hs-identifier hs-var">is</span></a></span><span>
</span><span id="line-763"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_info :: GREInfo
</span><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GREInfo
</span><a href="#local-6989586621682533871"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-764"></span><span>
</span><span id="line-765"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkExactGRE"><span class="hs-identifier hs-type">mkExactGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier hs-type">GREInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-766"></span><span id="mkExactGRE"><span class="annot"><span class="annottext">mkExactGRE :: Name -&gt; GREInfo -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkExactGRE"><span class="hs-identifier hs-var hs-var">mkExactGRE</span></a></span></span><span> </span><span id="local-6989586621682533877"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533877"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621682533878"><span class="annot"><span class="annottext">GREInfo
</span><a href="#local-6989586621682533878"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-767"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_name :: Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var">gre_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533877"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_par :: Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>
</span><span id="line-768"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-769"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_info :: GREInfo
</span><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GREInfo
</span><a href="#local-6989586621682533878"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-770"></span><span>
</span><span id="line-771"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkLocalGRE"><span class="hs-identifier hs-type">mkLocalGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier hs-type">GREInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-772"></span><span id="mkLocalGRE"><span class="annot"><span class="annottext">mkLocalGRE :: GREInfo -&gt; Parent -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkLocalGRE"><span class="hs-identifier hs-var hs-var">mkLocalGRE</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Maybe ImportSpec)
-&gt; GREInfo -&gt; Parent -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkGRE"><span class="hs-identifier hs-var">mkGRE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ImportSpec -&gt; Name -&gt; Maybe ImportSpec
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Maybe ImportSpec
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-773"></span><span>
</span><span id="line-774"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkLocalVanillaGRE"><span class="hs-identifier hs-type">mkLocalVanillaGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-775"></span><span id="mkLocalVanillaGRE"><span class="annot"><span class="annottext">mkLocalVanillaGRE :: Parent -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkLocalVanillaGRE"><span class="hs-identifier hs-var hs-var">mkLocalVanillaGRE</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GREInfo -&gt; Parent -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkLocalGRE"><span class="hs-identifier hs-var">mkLocalGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GREInfo
</span><a href="GHC.Types.GREInfo.html#Vanilla"><span class="hs-identifier hs-var">Vanilla</span></a></span><span>
</span><span id="line-776"></span><span>
</span><span id="line-777"></span><span class="annot"><span class="hs-comment">-- | Create a local 'GlobalRdrElt' for a 'TyCon'.</span></span><span>
</span><span id="line-778"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkLocalTyConGRE"><span class="hs-identifier hs-type">mkLocalTyConGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TyConFlavour"><span class="hs-identifier hs-type">TyConFlavour</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-779"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-780"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-781"></span><span id="mkLocalTyConGRE"><span class="annot"><span class="annottext">mkLocalTyConGRE :: TyConFlavour Name -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkLocalTyConGRE"><span class="hs-identifier hs-var hs-var">mkLocalTyConGRE</span></a></span></span><span> </span><span id="local-6989586621682533881"><span class="annot"><span class="annottext">TyConFlavour Name
</span><a href="#local-6989586621682533881"><span class="hs-identifier hs-var">flav</span></a></span></span><span> </span><span id="local-6989586621682533882"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533882"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GREInfo -&gt; Parent -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkLocalGRE"><span class="hs-identifier hs-var">mkLocalGRE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyConFlavour Name -&gt; GREInfo
</span><a href="GHC.Types.GREInfo.html#IAmTyCon"><span class="hs-identifier hs-var">IAmTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyConFlavour Name
</span><a href="#local-6989586621682533881"><span class="hs-identifier hs-var">flav</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533884"><span class="hs-identifier hs-var">par</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533882"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-782"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-783"></span><span>    </span><span id="local-6989586621682533884"><span class="annot"><span class="annottext">par :: Parent
</span><a href="#local-6989586621682533884"><span class="hs-identifier hs-var hs-var">par</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyConFlavour Name -&gt; Maybe Name
forall tc. TyConFlavour tc -&gt; Maybe tc
</span><a href="GHC.Types.Basic.html#tyConFlavourAssoc_maybe"><span class="hs-identifier hs-var">tyConFlavourAssoc_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyConFlavour Name
</span><a href="#local-6989586621682533881"><span class="hs-identifier hs-var">flav</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-784"></span><span>      </span><span class="annot"><span class="annottext">Maybe Name
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>
</span><span id="line-785"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682533886"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533886"><span class="hs-identifier hs-var">p</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-var">ParentIs</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533886"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-786"></span><span>
</span><span id="line-787"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkLocalConLikeGRE"><span class="hs-identifier hs-type">mkLocalConLikeGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.GREInfo.html#ConLikeName"><span class="hs-identifier hs-type">ConLikeName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#ConInfo"><span class="hs-identifier hs-type">ConInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-788"></span><span id="mkLocalConLikeGRE"><span class="annot"><span class="annottext">mkLocalConLikeGRE :: Parent -&gt; (ConLikeName, ConInfo) -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkLocalConLikeGRE"><span class="hs-identifier hs-var hs-var">mkLocalConLikeGRE</span></a></span></span><span> </span><span id="local-6989586621682533887"><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533887"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682533888"><span class="annot"><span class="annottext">ConLikeName
</span><a href="#local-6989586621682533888"><span class="hs-identifier hs-var">con_nm</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682533889"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621682533889"><span class="hs-identifier hs-var">con_info</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-789"></span><span>  </span><span class="annot"><span class="annottext">GREInfo -&gt; Parent -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkLocalGRE"><span class="hs-identifier hs-var">mkLocalGRE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConInfo -&gt; GREInfo
</span><a href="GHC.Types.GREInfo.html#IAmConLike"><span class="hs-identifier hs-var">IAmConLike</span></a></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621682533889"><span class="hs-identifier hs-var">con_info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533887"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConLikeName -&gt; Name
</span><a href="GHC.Types.GREInfo.html#conLikeName_Name"><span class="hs-identifier hs-var">conLikeName_Name</span></a></span><span> </span><span class="annot"><span class="annottext">ConLikeName
</span><a href="#local-6989586621682533888"><span class="hs-identifier hs-var">con_nm</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-790"></span><span>
</span><span id="line-791"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkLocalFieldGREs"><span class="hs-identifier hs-type">mkLocalFieldGREs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.GREInfo.html#ConLikeName"><span class="hs-identifier hs-type">ConLikeName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#ConInfo"><span class="hs-identifier hs-type">ConInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-792"></span><span id="mkLocalFieldGREs"><span class="annot"><span class="annottext">mkLocalFieldGREs :: Parent -&gt; [(ConLikeName, ConInfo)] -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#mkLocalFieldGREs"><span class="hs-identifier hs-var hs-var">mkLocalFieldGREs</span></a></span></span><span> </span><span id="local-6989586621682533892"><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533892"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621682533893"><span class="annot"><span class="annottext">[(ConLikeName, ConInfo)]
</span><a href="#local-6989586621682533893"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-793"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">GREInfo -&gt; Parent -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkLocalGRE"><span class="hs-identifier hs-var">mkLocalGRE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecFieldInfo -&gt; GREInfo
</span><a href="GHC.Types.GREInfo.html#IAmRecField"><span class="hs-identifier hs-var">IAmRecField</span></a></span><span> </span><span class="annot"><span class="annottext">RecFieldInfo
</span><a href="#local-6989586621682533894"><span class="hs-identifier hs-var">fld_info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533892"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533895"><span class="hs-identifier hs-var">fld_nm</span></a></span><span>
</span><span id="line-794"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html#Arg"><span class="hs-identifier hs-type">S.Arg</span></a></span><span> </span><span id="local-6989586621682533895"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533895"><span class="hs-identifier hs-var">fld_nm</span></a></span></span><span> </span><span id="local-6989586621682533897"><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682533897"><span class="hs-identifier hs-var">fl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682533898"><span class="annot"><span class="annottext">UniqSet ConLikeName
</span><a href="#local-6989586621682533898"><span class="hs-identifier hs-var">fl_cons</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Arg Name FieldLabel, UniqSet ConLikeName)]
</span><a href="#local-6989586621682533899"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-795"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682533894"><span class="annot"><span class="annottext">fld_info :: RecFieldInfo
</span><a href="#local-6989586621682533894"><span class="hs-identifier hs-var hs-var">fld_info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#RecFieldInfo"><span class="hs-identifier hs-type">RecFieldInfo</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recFieldLabel :: FieldLabel
</span><a href="GHC.Types.GREInfo.html#recFieldLabel"><span class="hs-identifier hs-var">recFieldLabel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682533897"><span class="hs-identifier hs-var">fl</span></a></span><span>
</span><span id="line-796"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recFieldCons :: UniqSet ConLikeName
</span><a href="GHC.Types.GREInfo.html#recFieldCons"><span class="hs-identifier hs-var">recFieldCons</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqSet ConLikeName
</span><a href="#local-6989586621682533898"><span class="hs-identifier hs-var">fl_cons</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-797"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-798"></span><span>    </span><span class="hs-comment">-- We are given a map taking a constructor to its fields, but we want</span><span>
</span><span id="line-799"></span><span>    </span><span class="hs-comment">-- a map taking a field to the constructors which have it.</span><span>
</span><span id="line-800"></span><span>    </span><span class="hs-comment">-- We thus need to convert [(Con, [Field])] into [(Field, [Con])].</span><span>
</span><span id="line-801"></span><span>    </span><span id="local-6989586621682533899"><span class="annot"><span class="annottext">flds :: [(Arg Name FieldLabel, UniqSet ConLikeName)]
</span><a href="#local-6989586621682533899"><span class="hs-identifier hs-var hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Arg Name FieldLabel) (UniqSet ConLikeName)
-&gt; [(Arg Name FieldLabel, UniqSet ConLikeName)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#toList"><span class="hs-identifier hs-var">Map.toList</span></a></span><span>
</span><span id="line-802"></span><span>         </span><span class="annot"><span class="annottext">(Map (Arg Name FieldLabel) (UniqSet ConLikeName)
 -&gt; [(Arg Name FieldLabel, UniqSet ConLikeName)])
-&gt; Map (Arg Name FieldLabel) (UniqSet ConLikeName)
-&gt; [(Arg Name FieldLabel, UniqSet ConLikeName)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(UniqSet ConLikeName -&gt; UniqSet ConLikeName -&gt; UniqSet ConLikeName)
-&gt; [(Arg Name FieldLabel, UniqSet ConLikeName)]
-&gt; Map (Arg Name FieldLabel) (UniqSet ConLikeName)
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; [(k, a)] -&gt; Map k a
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.Internal.html#fromListWith"><span class="hs-identifier hs-var">Map.fromListWith</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet ConLikeName -&gt; UniqSet ConLikeName -&gt; UniqSet ConLikeName
forall a. UniqSet a -&gt; UniqSet a -&gt; UniqSet a
</span><a href="GHC.Types.Unique.Set.html#unionUniqSets"><span class="hs-identifier hs-var">unionUniqSets</span></a></span><span>
</span><span id="line-803"></span><span>         </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; FieldLabel -&gt; Arg Name FieldLabel
forall a b. a -&gt; b -&gt; Arg a b
</span><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html#Arg"><span class="hs-identifier hs-var">S.Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var">flSelector</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682533907"><span class="hs-identifier hs-var">fl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682533907"><span class="hs-identifier hs-var">fl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConLikeName -&gt; UniqSet ConLikeName
forall a. Uniquable a =&gt; a -&gt; UniqSet a
</span><a href="GHC.Types.Unique.Set.html#unitUniqSet"><span class="hs-identifier hs-var">unitUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">ConLikeName
</span><a href="#local-6989586621682533909"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682533909"><span class="annot"><span class="annottext">ConLikeName
</span><a href="#local-6989586621682533909"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682533910"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621682533910"><span class="hs-identifier hs-var">con_info</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(ConLikeName, ConInfo)]
</span><a href="#local-6989586621682533893"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-805"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#ConInfo"><span class="hs-identifier hs-type">ConInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ConLikeInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.GREInfo.html#ConHasRecordFields"><span class="hs-identifier hs-type">ConHasRecordFields</span></a></span><span> </span><span id="local-6989586621682533913"><span class="annot"><span class="annottext">NonEmpty FieldLabel
</span><a href="#local-6989586621682533913"><span class="hs-identifier hs-var">fls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621682533910"><span class="hs-identifier hs-var">con_info</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-806"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682533907"><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682533907"><span class="hs-identifier hs-var">fl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldLabel -&gt; [FieldLabel]
forall a. NonEmpty a -&gt; [a]
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#toList"><span class="hs-identifier hs-var">NE.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldLabel
</span><a href="#local-6989586621682533913"><span class="hs-identifier hs-var">fls</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-807"></span><span>
</span><span id="line-808"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682532876"><span class="annot"><a href="GHC.Types.Name.Occurrence.html#HasOccName"><span class="hs-identifier hs-type">HasOccName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532876"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-809"></span><span>  </span><span id="local-6989586621682533917"><span class="annot"><span class="annottext">occName :: GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#occName"><span class="hs-identifier hs-var hs-var hs-var">occName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span>
</span><span id="line-810"></span><span>
</span><span id="line-811"></span><span id="local-6989586621682533918"><span class="annot"><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-type">greOccName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533918"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span></span><span>
</span><span id="line-812"></span><span id="greOccName"><span class="annot"><span class="annottext">greOccName :: forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var hs-var">greOccName</span></a></span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_name :: forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var">gre_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533919"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533919"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533919"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-813"></span><span>
</span><span id="line-814"></span><span class="annot"><span class="hs-comment">-- | The SrcSpan of the name pointed to by the GRE.</span></span><span>
</span><span id="line-815"></span><span id="local-6989586621682532878"><span class="annot"><a href="GHC.Types.Name.Reader.html#greDefinitionSrcSpan"><span class="hs-identifier hs-type">greDefinitionSrcSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532878"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span></span><span>
</span><span id="line-816"></span><span id="greDefinitionSrcSpan"><span class="annot"><span class="annottext">greDefinitionSrcSpan :: forall info. GlobalRdrEltX info -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#greDefinitionSrcSpan"><span class="hs-identifier hs-var hs-var">greDefinitionSrcSpan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SrcSpan
</span><a href="GHC.Types.Name.html#nameSrcSpan"><span class="hs-identifier hs-var">nameSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; SrcSpan)
-&gt; (GlobalRdrEltX info -&gt; Name) -&gt; GlobalRdrEltX info -&gt; SrcSpan
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span>
</span><span id="line-817"></span><span>
</span><span id="line-818"></span><span class="annot"><span class="hs-comment">-- | The module in which the name pointed to by the GRE is defined.</span></span><span>
</span><span id="line-819"></span><span id="local-6989586621682532881"><span class="annot"><a href="GHC.Types.Name.Reader.html#greDefinitionModule"><span class="hs-identifier hs-type">greDefinitionModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532881"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span></span><span>
</span><span id="line-820"></span><span id="greDefinitionModule"><span class="annot"><span class="annottext">greDefinitionModule :: forall info. GlobalRdrEltX info -&gt; Maybe Module
</span><a href="GHC.Types.Name.Reader.html#greDefinitionModule"><span class="hs-identifier hs-var hs-var">greDefinitionModule</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Module
</span><a href="GHC.Types.Name.html#nameModule_maybe"><span class="hs-identifier hs-var">nameModule_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Maybe Module)
-&gt; (GlobalRdrEltX info -&gt; Name)
-&gt; GlobalRdrEltX info
-&gt; Maybe Module
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span>
</span><span id="line-821"></span><span>
</span><span id="line-822"></span><span id="local-6989586621682532883"><span class="annot"><a href="GHC.Types.Name.Reader.html#greQualModName"><span class="hs-identifier hs-type">greQualModName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532883"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532883"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span></span><span>
</span><span id="line-823"></span><span class="hs-comment">-- Get a suitable module qualifier for the GRE</span><span>
</span><span id="line-824"></span><span class="hs-comment">-- (used in mkPrintUnqualified)</span><span>
</span><span id="line-825"></span><span class="hs-comment">-- Precondition: the gre_name is always External</span><span>
</span><span id="line-826"></span><span id="greQualModName"><span class="annot"><span class="annottext">greQualModName :: forall info. Outputable info =&gt; GlobalRdrEltX info -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#greQualModName"><span class="hs-identifier hs-var hs-var">greQualModName</span></a></span></span><span> </span><span id="local-6989586621682533927"><span class="annot"><span class="annottext">gre :: GlobalRdrEltX info
</span><a href="#local-6989586621682533927"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533928"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682533928"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533929"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682533929"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-827"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682533928"><span class="hs-identifier hs-var">lcl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682533930"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533930"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Maybe Module
forall info. GlobalRdrEltX info -&gt; Maybe Module
</span><a href="GHC.Types.Name.Reader.html#greDefinitionModule"><span class="hs-identifier hs-var">greDefinitionModule</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533927"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682533930"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-828"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682533932"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682533932"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; Maybe ImportSpec
forall a. Bag a -&gt; Maybe a
</span><a href="GHC.Data.Bag.html#headMaybe"><span class="hs-identifier hs-var">headMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682533929"><span class="hs-identifier hs-var">iss</span></a></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#is_as"><span class="hs-identifier hs-var">is_as</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682533932"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-829"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; ModuleName
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;greQualModName&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533927"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span>
</span><span id="line-831"></span><span id="local-6989586621682532890"><span class="annot"><a href="GHC.Types.Name.Reader.html#greRdrNames"><span class="hs-identifier hs-type">greRdrNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532890"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-832"></span><span id="greRdrNames"><span class="annot"><span class="annottext">greRdrNames :: forall info. GlobalRdrEltX info -&gt; [RdrName]
</span><a href="GHC.Types.Name.Reader.html#greRdrNames"><span class="hs-identifier hs-var hs-var">greRdrNames</span></a></span></span><span> </span><span id="local-6989586621682533937"><span class="annot"><span class="annottext">gre :: GlobalRdrEltX info
</span><a href="#local-6989586621682533937"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533938"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682533938"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533939"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682533939"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-833"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag RdrName -&gt; [RdrName]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">(Bag RdrName -&gt; [RdrName]) -&gt; Bag RdrName -&gt; [RdrName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682533938"><span class="hs-identifier hs-var">lcl</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bag RdrName
forall a. a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533941"><span class="hs-identifier hs-var">unqual</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Bag RdrName
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag RdrName -&gt; Bag RdrName -&gt; Bag RdrName
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpDeclSpec -&gt; Bag RdrName) -&gt; Bag ImpDeclSpec -&gt; Bag RdrName
forall a b. (a -&gt; Bag b) -&gt; Bag a -&gt; Bag b
</span><a href="GHC.Data.Bag.html#concatMapBag"><span class="hs-identifier hs-var">concatMapBag</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Bag RdrName
</span><a href="#local-6989586621682533944"><span class="hs-identifier hs-var">do_spec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ImportSpec -&gt; ImpDeclSpec) -&gt; Bag ImportSpec -&gt; Bag ImpDeclSpec
forall a b. (a -&gt; b) -&gt; Bag a -&gt; Bag b
</span><a href="GHC.Data.Bag.html#mapBag"><span class="hs-identifier hs-var">mapBag</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682533939"><span class="hs-identifier hs-var">iss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-834"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-835"></span><span>    </span><span id="local-6989586621682533946"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621682533946"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533937"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-836"></span><span>    </span><span id="local-6989586621682533941"><span class="annot"><span class="annottext">unqual :: RdrName
</span><a href="#local-6989586621682533941"><span class="hs-identifier hs-var hs-var">unqual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533946"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-837"></span><span>    </span><span id="local-6989586621682533944"><span class="annot"><span class="annottext">do_spec :: ImpDeclSpec -&gt; Bag RdrName
</span><a href="#local-6989586621682533944"><span class="hs-identifier hs-var hs-var">do_spec</span></a></span></span><span> </span><span id="local-6989586621682533947"><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682533947"><span class="hs-identifier hs-var">decl_spec</span></a></span></span><span>
</span><span id="line-838"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_qual"><span class="hs-identifier hs-var">is_qual</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682533947"><span class="hs-identifier hs-var">decl_spec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bag RdrName
forall a. a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533949"><span class="hs-identifier hs-var">qual</span></a></span><span>
</span><span id="line-839"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[RdrName] -&gt; Bag RdrName
forall a. [a] -&gt; Bag a
</span><a href="GHC.Data.Bag.html#listToBag"><span class="hs-identifier hs-var">listToBag</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533941"><span class="hs-identifier hs-var">unqual</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682533949"><span class="hs-identifier hs-var">qual</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-840"></span><span>        </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682533949"><span class="annot"><span class="annottext">qual :: RdrName
</span><a href="#local-6989586621682533949"><span class="hs-identifier hs-var hs-var">qual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-var">Qual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#is_as"><span class="hs-identifier hs-var">is_as</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682533947"><span class="hs-identifier hs-var">decl_spec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682533946"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-841"></span><span>
</span><span id="line-842"></span><span class="hs-comment">-- the SrcSpan that pprNameProvenance prints out depends on whether</span><span>
</span><span id="line-843"></span><span class="hs-comment">-- the Name is defined locally or not: for a local definition the</span><span>
</span><span id="line-844"></span><span class="hs-comment">-- definition site is used, otherwise the location of the import</span><span>
</span><span id="line-845"></span><span class="hs-comment">-- declaration.  We want to sort the export locations in</span><span>
</span><span id="line-846"></span><span class="hs-comment">-- exportClashErr by this SrcSpan, we need to extract it:</span><span>
</span><span id="line-847"></span><span id="local-6989586621682532899"><span class="annot"><a href="GHC.Types.Name.Reader.html#greSrcSpan"><span class="hs-identifier hs-type">greSrcSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532899"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532899"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span></span><span>
</span><span id="line-848"></span><span id="greSrcSpan"><span class="annot"><span class="annottext">greSrcSpan :: forall info. Outputable info =&gt; GlobalRdrEltX info -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#greSrcSpan"><span class="hs-identifier hs-var hs-var">greSrcSpan</span></a></span></span><span> </span><span id="local-6989586621682533955"><span class="annot"><span class="annottext">gre :: GlobalRdrEltX info
</span><a href="#local-6989586621682533955"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533956"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682533956"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533957"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682533957"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-849"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682533956"><span class="hs-identifier hs-var">lcl</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; SrcSpan
forall info. GlobalRdrEltX info -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#greDefinitionSrcSpan"><span class="hs-identifier hs-var">greDefinitionSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533955"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-850"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682533958"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682533958"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; Maybe ImportSpec
forall a. Bag a -&gt; Maybe a
</span><a href="GHC.Data.Bag.html#headMaybe"><span class="hs-identifier hs-var">headMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682533957"><span class="hs-identifier hs-var">iss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#is_dloc"><span class="hs-identifier hs-var">is_dloc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682533958"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-851"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; SrcSpan
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;greSrcSpan&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533955"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-852"></span><span>
</span><span id="line-853"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkParent"><span class="hs-identifier hs-type">mkParent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span>
</span><span id="line-854"></span><span id="mkParent"><span class="annot"><span class="annottext">mkParent :: Name -&gt; AvailInfo -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#mkParent"><span class="hs-identifier hs-var hs-var">mkParent</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#Avail"><span class="hs-identifier hs-type">Avail</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>
</span><span id="line-855"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkParent"><span class="hs-identifier hs-var">mkParent</span></a></span><span> </span><span id="local-6989586621682533961"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533961"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-type">AvailTC</span></a></span><span> </span><span id="local-6989586621682533963"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533963"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533961"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533963"><span class="hs-identifier hs-var">m</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>
</span><span id="line-856"></span><span>                         </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-var">ParentIs</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533963"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-857"></span><span>
</span><span id="line-858"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#availParent"><span class="hs-identifier hs-type">availParent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span>
</span><span id="line-859"></span><span id="availParent"><span class="annot"><span class="annottext">availParent :: AvailInfo -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#availParent"><span class="hs-identifier hs-var hs-var">availParent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-type">AvailTC</span></a></span><span> </span><span id="local-6989586621682533964"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533964"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-var">ParentIs</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533964"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-860"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#availParent"><span class="hs-identifier hs-var">availParent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#Avail"><span class="hs-identifier hs-type">Avail</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>
</span><span id="line-861"></span><span>
</span><span id="line-862"></span><span>
</span><span id="line-863"></span><span id="local-6989586621682532902"><span class="annot"><a href="GHC.Types.Name.Reader.html#greParent_maybe"><span class="hs-identifier hs-type">greParent_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532902"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span></span><span>
</span><span id="line-864"></span><span id="greParent_maybe"><span class="annot"><span class="annottext">greParent_maybe :: forall info. GlobalRdrEltX info -&gt; Maybe Name
</span><a href="GHC.Types.Name.Reader.html#greParent_maybe"><span class="hs-identifier hs-var hs-var">greParent_maybe</span></a></span></span><span> </span><span id="local-6989586621682533965"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533965"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Parent
forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533965"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-865"></span><span>                        </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Name
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-866"></span><span>                        </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span> </span><span id="local-6989586621682533966"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533966"><span class="hs-identifier hs-var">n</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533966"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-867"></span><span>
</span><span id="line-868"></span><span id="local-6989586621682532904"><span class="annot"><a href="GHC.Types.Name.Reader.html#gresToNameSet"><span class="hs-identifier hs-type">gresToNameSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532904"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span></span><span>
</span><span id="line-869"></span><span id="gresToNameSet"><span class="annot"><span class="annottext">gresToNameSet :: forall info. [GlobalRdrEltX info] -&gt; NameSet
</span><a href="GHC.Types.Name.Reader.html#gresToNameSet"><span class="hs-identifier hs-var hs-var">gresToNameSet</span></a></span></span><span> </span><span id="local-6989586621682533968"><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682533968"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEltX info -&gt; NameSet -&gt; NameSet)
-&gt; NameSet -&gt; [GlobalRdrEltX info] -&gt; NameSet
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; NameSet -&gt; NameSet
forall {info}. GlobalRdrEltX info -&gt; NameSet -&gt; NameSet
</span><a href="#local-6989586621682533970"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682533968"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-870"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682533970"><span class="annot"><span class="annottext">add :: GlobalRdrEltX info -&gt; NameSet -&gt; NameSet
</span><a href="#local-6989586621682533970"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621682533971"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533971"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span id="local-6989586621682533972"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533972"><span class="hs-identifier hs-var">set</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; Name -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#extendNameSet"><span class="hs-identifier hs-var">extendNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533972"><span class="hs-identifier hs-var">set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533971"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-871"></span><span>
</span><span id="line-872"></span><span class="hs-comment">-- | Takes a list of distinct GREs and folds them</span><span>
</span><span id="line-873"></span><span class="hs-comment">-- into AvailInfos. This is more efficient than mapping each individual</span><span>
</span><span id="line-874"></span><span class="hs-comment">-- GRE to an AvailInfo and then folding using `plusAvail`, but needs the</span><span>
</span><span id="line-875"></span><span class="hs-comment">-- uniqueness assumption.</span><span>
</span><span id="line-876"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#gresToAvailInfo"><span class="hs-identifier hs-type">gresToAvailInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682532910"><span class="annot"><a href="#local-6989586621682532910"><span class="hs-identifier hs-type">info</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532910"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-877"></span><span id="gresToAvailInfo"><span class="annot"><span class="annottext">gresToAvailInfo :: forall info. [GlobalRdrEltX info] -&gt; [AvailInfo]
</span><a href="GHC.Types.Name.Reader.html#gresToAvailInfo"><span class="hs-identifier hs-var hs-var">gresToAvailInfo</span></a></span></span><span> </span><span id="local-6989586621682533976"><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682533976"><span class="hs-identifier hs-var">gres</span></a></span></span><span>
</span><span id="line-878"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameEnv AvailInfo -&gt; [AvailInfo]
forall a. NameEnv a -&gt; [a]
</span><a href="GHC.Types.Name.Env.html#nonDetNameEnvElts"><span class="hs-identifier hs-var">nonDetNameEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv AvailInfo
</span><a href="#local-6989586621682533977"><span class="hs-identifier hs-var">avail_env</span></a></span><span>
</span><span id="line-879"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-880"></span><span>    </span><span class="annot"><a href="#local-6989586621682533977"><span class="hs-identifier hs-type">avail_env</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span> </span><span class="hs-comment">-- Keyed by the parent</span><span>
</span><span id="line-881"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682533977"><span class="annot"><span class="annottext">NameEnv AvailInfo
</span><a href="#local-6989586621682533977"><span class="hs-identifier hs-var">avail_env</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((NameEnv AvailInfo, NameSet)
 -&gt; GlobalRdrEltX info -&gt; (NameEnv AvailInfo, NameSet))
-&gt; (NameEnv AvailInfo, NameSet)
-&gt; [GlobalRdrEltX info]
-&gt; (NameEnv AvailInfo, NameSet)
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">(NameEnv AvailInfo, NameSet)
-&gt; GlobalRdrEltX info -&gt; (NameEnv AvailInfo, NameSet)
</span><a href="#local-6989586621682533979"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameEnv AvailInfo
forall a. NameEnv a
</span><a href="GHC.Types.Name.Env.html#emptyNameEnv"><span class="hs-identifier hs-var">emptyNameEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682533976"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-882"></span><span>
</span><span id="line-883"></span><span>    </span><span class="annot"><a href="#local-6989586621682533979"><span class="hs-identifier hs-type">add</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-884"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532910"><span class="hs-identifier hs-type">info</span></a></span><span>
</span><span id="line-885"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-886"></span><span>    </span><span id="local-6989586621682533979"><span class="annot"><span class="annottext">add :: (NameEnv AvailInfo, NameSet)
-&gt; GlobalRdrEltX info -&gt; (NameEnv AvailInfo, NameSet)
</span><a href="#local-6989586621682533979"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682533980"><span class="annot"><span class="annottext">NameEnv AvailInfo
</span><a href="#local-6989586621682533980"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682533981"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533981"><span class="hs-identifier hs-var">done</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682533982"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533982"><span class="hs-identifier hs-var">gre</span></a></span></span><span>
</span><span id="line-887"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533983"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; NameSet -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533981"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-888"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameEnv AvailInfo
</span><a href="#local-6989586621682533980"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533981"><span class="hs-identifier hs-var">done</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Don't insert twice into the AvailInfo</span><span>
</span><span id="line-889"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-890"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEltX info -&gt; AvailInfo -&gt; AvailInfo)
-&gt; (GlobalRdrEltX info -&gt; AvailInfo)
-&gt; NameEnv AvailInfo
-&gt; Name
-&gt; GlobalRdrEltX info
-&gt; NameEnv AvailInfo
forall a b.
(a -&gt; b -&gt; b) -&gt; (a -&gt; b) -&gt; NameEnv b -&gt; Name -&gt; a -&gt; NameEnv b
</span><a href="GHC.Types.Name.Env.html#extendNameEnv_Acc"><span class="hs-identifier hs-var">extendNameEnv_Acc</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; AvailInfo -&gt; AvailInfo
</span><a href="#local-6989586621682533984"><span class="hs-identifier hs-var">comb</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; AvailInfo
forall info. GlobalRdrEltX info -&gt; AvailInfo
</span><a href="GHC.Types.Name.Reader.html#availFromGRE"><span class="hs-identifier hs-var">availFromGRE</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv AvailInfo
</span><a href="#local-6989586621682533980"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533985"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533982"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-891"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682533981"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; Name -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#extendNameSet"><span class="hs-operator hs-var">`extendNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533983"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-893"></span><span>        </span><span id="local-6989586621682533983"><span class="annot"><span class="annottext">name :: Name
</span><a href="#local-6989586621682533983"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533982"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-894"></span><span>        </span><span id="local-6989586621682533985"><span class="annot"><span class="annottext">key :: Name
</span><a href="#local-6989586621682533985"><span class="hs-identifier hs-var hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Maybe Name
forall info. GlobalRdrEltX info -&gt; Maybe Name
</span><a href="GHC.Types.Name.Reader.html#greParent_maybe"><span class="hs-identifier hs-var">greParent_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533982"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-895"></span><span>                 </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682533986"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533986"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533986"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-896"></span><span>                 </span><span class="annot"><span class="annottext">Maybe Name
</span><span class="hs-identifier hs-var">Nothing</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533982"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-897"></span><span>
</span><span id="line-898"></span><span>        </span><span class="hs-comment">-- We want to insert the child `k` into a list of children but</span><span>
</span><span id="line-899"></span><span>        </span><span class="hs-comment">-- need to maintain the invariant that the parent is first.</span><span>
</span><span id="line-900"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-901"></span><span>        </span><span class="hs-comment">-- We also use the invariant that `k` is not already in `ns`.</span><span>
</span><span id="line-902"></span><span>        </span><span class="annot"><a href="#local-6989586621682533987"><span class="hs-identifier hs-type">insertChildIntoChildren</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-903"></span><span>        </span><span id="local-6989586621682533987"><span class="annot"><span class="annottext">insertChildIntoChildren :: Name -&gt; [Name] -&gt; Name -&gt; [Name]
</span><a href="#local-6989586621682533987"><span class="hs-identifier hs-var hs-var">insertChildIntoChildren</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621682533988"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533988"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533988"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-904"></span><span>        </span><span class="annot"><a href="#local-6989586621682533987"><span class="hs-identifier hs-var">insertChildIntoChildren</span></a></span><span> </span><span id="local-6989586621682533989"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533989"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682533990"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533990"><span class="hs-identifier hs-var">n</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682533991"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682533991"><span class="hs-identifier hs-var">ns</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682533992"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533992"><span class="hs-identifier hs-var">k</span></a></span></span><span>
</span><span id="line-905"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533989"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533992"><span class="hs-identifier hs-var">k</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533992"><span class="hs-identifier hs-var">k</span></a></span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [Name]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533990"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [Name]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682533991"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-906"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533990"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [Name]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533992"><span class="hs-identifier hs-var">k</span></a></span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [Name]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682533991"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-907"></span><span>
</span><span id="line-908"></span><span>        </span><span class="annot"><a href="#local-6989586621682533984"><span class="hs-identifier hs-type">comb</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532910"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span>
</span><span id="line-909"></span><span>        </span><span id="local-6989586621682533984"><span class="annot"><span class="annottext">comb :: GlobalRdrEltX info -&gt; AvailInfo -&gt; AvailInfo
</span><a href="#local-6989586621682533984"><span class="hs-identifier hs-var hs-var">comb</span></a></span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#Avail"><span class="hs-identifier hs-type">Avail</span></a></span><span> </span><span id="local-6989586621682533993"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533993"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; AvailInfo
</span><a href="GHC.Types.Avail.html#Avail"><span class="hs-identifier hs-var">Avail</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533993"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-comment">-- Duplicated name, should not happen</span><span>
</span><span id="line-910"></span><span>        </span><span class="annot"><a href="#local-6989586621682533984"><span class="hs-identifier hs-var">comb</span></a></span><span> </span><span id="local-6989586621682533994"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533994"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-type">AvailTC</span></a></span><span> </span><span id="local-6989586621682533995"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533995"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682533996"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682533996"><span class="hs-identifier hs-var">ns</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-911"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Parent
forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533994"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-912"></span><span>              </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; AvailInfo
</span><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-var">AvailTC</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533995"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533994"><span class="hs-identifier hs-var">gre</span></a></span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [Name]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682533996"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Not sure this ever happens</span><span>
</span><span id="line-913"></span><span>              </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; AvailInfo
</span><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-var">AvailTC</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533995"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; Name -&gt; [Name]
</span><a href="#local-6989586621682533987"><span class="hs-identifier hs-var">insertChildIntoChildren</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533995"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682533996"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682533994"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-914"></span><span>
</span><span id="line-915"></span><span id="local-6989586621682532919"><span class="annot"><a href="GHC.Types.Name.Reader.html#availFromGRE"><span class="hs-identifier hs-type">availFromGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532919"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span></span><span>
</span><span id="line-916"></span><span id="availFromGRE"><span class="annot"><span class="annottext">availFromGRE :: forall info. GlobalRdrEltX info -&gt; AvailInfo
</span><a href="GHC.Types.Name.Reader.html#availFromGRE"><span class="hs-identifier hs-var hs-var">availFromGRE</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_name :: forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var">gre_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533997"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533997"><span class="hs-identifier hs-var">child</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_par :: forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682533998"><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533998"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-917"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="#local-6989586621682533998"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-918"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span> </span><span id="local-6989586621682533999"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533999"><span class="hs-identifier hs-var">p</span></a></span></span><span>
</span><span id="line-919"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; AvailInfo
</span><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-var">AvailTC</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533999"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533997"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-920"></span><span>      </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>
</span><span id="line-921"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isTyConName"><span class="hs-identifier hs-var">isTyConName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533997"><span class="hs-identifier hs-var">child</span></a></span><span> </span><span class="hs-comment">-- NB: don't force the GREInfo field unnecessarily.</span><span>
</span><span id="line-922"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; AvailInfo
</span><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-var">AvailTC</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533997"><span class="hs-identifier hs-var">child</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533997"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-923"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-924"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; AvailInfo
</span><a href="GHC.Types.Avail.html#Avail"><span class="hs-identifier hs-var">Avail</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682533997"><span class="hs-identifier hs-var">child</span></a></span><span>
</span><span id="line-925"></span><span>
</span><span id="line-926"></span><span id="local-6989586621682532921"><span class="annot"><a href="GHC.Types.Name.Reader.html#emptyGlobalRdrEnv"><span class="hs-identifier hs-type">emptyGlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532921"><span class="hs-identifier hs-type">info</span></a></span></span><span>
</span><span id="line-927"></span><span id="emptyGlobalRdrEnv"><span class="annot"><span class="annottext">emptyGlobalRdrEnv :: forall info. GlobalRdrEnvX info
</span><a href="GHC.Types.Name.Reader.html#emptyGlobalRdrEnv"><span class="hs-identifier hs-var hs-var">emptyGlobalRdrEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccEnv [GlobalRdrEltX info]
forall a. OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#emptyOccEnv"><span class="hs-identifier hs-var">emptyOccEnv</span></a></span><span>
</span><span id="line-928"></span><span>
</span><span id="line-929"></span><span id="local-6989586621682532924"><span class="annot"><a href="GHC.Types.Name.Reader.html#globalRdrEnvElts"><span class="hs-identifier hs-type">globalRdrEnvElts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532924"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532924"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-930"></span><span id="globalRdrEnvElts"><span class="annot"><span class="annottext">globalRdrEnvElts :: forall info. GlobalRdrEnvX info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#globalRdrEnvElts"><span class="hs-identifier hs-var hs-var">globalRdrEnvElts</span></a></span></span><span> </span><span id="local-6989586621682534001"><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534001"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([GlobalRdrEltX info]
 -&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info])
-&gt; [GlobalRdrEltX info]
-&gt; GlobalRdrEnvX info
-&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; OccEnv a -&gt; b
</span><a href="GHC.Types.Name.Occurrence.html#nonDetFoldOccEnv"><span class="hs-identifier hs-var">nonDetFoldOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
-&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">(++)</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534001"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-931"></span><span>
</span><span id="line-932"></span><span id="local-6989586621682532929"><span class="annot"><a href="GHC.Types.Name.Reader.html#globalRdrEnvLocal"><span class="hs-identifier hs-type">globalRdrEnvLocal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532929"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532929"><span class="hs-identifier hs-type">info</span></a></span></span><span>
</span><span id="line-933"></span><span id="globalRdrEnvLocal"><span class="annot"><span class="annottext">globalRdrEnvLocal :: forall info. GlobalRdrEnvX info -&gt; GlobalRdrEnvX info
</span><a href="GHC.Types.Name.Reader.html#globalRdrEnvLocal"><span class="hs-identifier hs-var hs-var">globalRdrEnvLocal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([GlobalRdrEltX info] -&gt; [GlobalRdrEltX info])
-&gt; OccEnv [GlobalRdrEltX info] -&gt; OccEnv [GlobalRdrEltX info]
forall a b. (a -&gt; b) -&gt; OccEnv a -&gt; OccEnv b
</span><a href="GHC.Types.Name.Occurrence.html#mapOccEnv"><span class="hs-identifier hs-var">mapOccEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GlobalRdrEltX info -&gt; Bool)
-&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isLocalGRE"><span class="hs-identifier hs-var">isLocalGRE</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-934"></span><span>
</span><span id="line-935"></span><span class="hs-comment">-- | Drop all 'GREInfo' fields in a 'GlobalRdrEnv' in order to</span><span>
</span><span id="line-936"></span><span class="hs-comment">-- avoid space leaks.</span><span>
</span><span id="line-937"></span><span class="hs-comment">-- See Note [Forcing GREInfo] in GHC.Types.GREInfo.</span><span>
</span><span id="line-938"></span><span id="local-6989586621682532934"><span class="annot"><a href="GHC.Types.Name.Reader.html#forceGlobalRdrEnv"><span class="hs-identifier hs-type">forceGlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532934"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#IfGlobalRdrEnv"><span class="hs-identifier hs-type">IfGlobalRdrEnv</span></a></span></span><span>
</span><span id="line-939"></span><span id="forceGlobalRdrEnv"><span class="annot"><span class="annottext">forceGlobalRdrEnv :: forall info. GlobalRdrEnvX info -&gt; IfGlobalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#forceGlobalRdrEnv"><span class="hs-identifier hs-var hs-var">forceGlobalRdrEnv</span></a></span></span><span> </span><span id="local-6989586621682534004"><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534004"><span class="hs-identifier hs-var">rdrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-940"></span><span>  </span><span class="annot"><span class="annottext">([GlobalRdrEltX info] -&gt; [GlobalRdrEltX ()])
-&gt; GlobalRdrEnvX info -&gt; IfGlobalRdrEnv
forall a b. (a -&gt; b) -&gt; OccEnv a -&gt; OccEnv b
</span><a href="GHC.Types.Name.Occurrence.html#strictMapOccEnv"><span class="hs-identifier hs-var">strictMapOccEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GlobalRdrEltX info -&gt; GlobalRdrEltX ())
-&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX ()]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="GHC.Utils.Misc.html#strictMap"><span class="hs-identifier hs-var">strictMap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682534007"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534007"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534007"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534004"><span class="hs-identifier hs-var">rdrs</span></a></span><span>
</span><span id="line-941"></span><span>
</span><span id="line-942"></span><span class="hs-comment">-- | Hydrate a previously dehydrated 'GlobalRdrEnv',</span><span>
</span><span id="line-943"></span><span class="hs-comment">-- by (lazily!) looking up the 'GREInfo' using the provided function.</span><span>
</span><span id="line-944"></span><span class="hs-comment">--</span><span>
</span><span id="line-945"></span><span class="hs-comment">-- See Note [Forcing GREInfo] in GHC.Types.GREInfo.</span><span>
</span><span id="line-946"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#hydrateGlobalRdrEnv"><span class="hs-identifier hs-type">hydrateGlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682532939"><span class="annot"><a href="#local-6989586621682532939"><span class="hs-identifier hs-type">info</span></a></span></span><span> </span><span id="local-6989586621682532940"><span class="annot"><a href="#local-6989586621682532940"><span class="hs-identifier hs-type">noInfo</span></a></span></span><span>
</span><span id="line-947"></span><span>                    </span><span class="hs-operator">.</span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621682532939"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-948"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532940"><span class="hs-identifier hs-type">noInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532939"><span class="hs-identifier hs-type">info</span></a></span><span>
</span><span id="line-949"></span><span id="hydrateGlobalRdrEnv"><span class="annot"><span class="annottext">hydrateGlobalRdrEnv :: forall info noInfo.
(Name -&gt; IO info) -&gt; GlobalRdrEnvX noInfo -&gt; GlobalRdrEnvX info
</span><a href="GHC.Types.Name.Reader.html#hydrateGlobalRdrEnv"><span class="hs-identifier hs-var hs-var">hydrateGlobalRdrEnv</span></a></span></span><span> </span><span id="local-6989586621682534010"><span class="annot"><span class="annottext">Name -&gt; IO info
</span><a href="#local-6989586621682534010"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([GlobalRdrEltX noInfo] -&gt; [GlobalRdrEltX info])
-&gt; OccEnv [GlobalRdrEltX noInfo] -&gt; OccEnv [GlobalRdrEltX info]
forall a b. (a -&gt; b) -&gt; OccEnv a -&gt; OccEnv b
</span><a href="GHC.Types.Name.Occurrence.html#mapOccEnv"><span class="hs-identifier hs-var">mapOccEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GlobalRdrEltX noInfo -&gt; GlobalRdrEltX info)
-&gt; [GlobalRdrEltX noInfo] -&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX noInfo -&gt; GlobalRdrEltX info
</span><a href="#local-6989586621682534011"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-950"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-951"></span><span>    </span><span id="local-6989586621682534011"><span class="annot"><span class="annottext">g :: GlobalRdrEltX noInfo -&gt; GlobalRdrEltX info
</span><a href="#local-6989586621682534011"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span id="local-6989586621682534012"><span class="annot"><span class="annottext">GlobalRdrEltX noInfo
</span><a href="#local-6989586621682534012"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX noInfo
</span><a href="#local-6989586621682534012"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">unsafePerformIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682534010"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-type">greName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682534012"><span class="hs-identifier hs-type">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-952"></span><span>    </span><span class="hs-comment">-- NB: use unsafePerformIO to delay the lookup until it is forced.</span><span>
</span><span id="line-953"></span><span>    </span><span class="hs-comment">-- See also 'GHC.Rename.Env.lookupGREInfo'.</span><span>
</span><span id="line-954"></span><span>
</span><span id="line-955"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682532885"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532885"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532885"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-956"></span><span>  </span><span id="local-6989586621682534020"><span class="annot"><span class="annottext">ppr :: GlobalRdrEltX info -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682534021"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534021"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534021"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Parent -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Parent
forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534021"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">info -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; info
forall info. GlobalRdrEltX info -&gt; info
</span><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534021"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-957"></span><span>               </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; SDoc
forall info. GlobalRdrEltX info -&gt; SDoc
</span><a href="GHC.Types.Name.Reader.html#pprNameProvenance"><span class="hs-identifier hs-var">pprNameProvenance</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534021"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-958"></span><span>
</span><span id="line-959"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#pprGlobalRdrEnv"><span class="hs-identifier hs-type">pprGlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-960"></span><span id="pprGlobalRdrEnv"><span class="annot"><span class="annottext">pprGlobalRdrEnv :: Bool -&gt; GlobalRdrEnv -&gt; SDoc
</span><a href="GHC.Types.Name.Reader.html#pprGlobalRdrEnv"><span class="hs-identifier hs-var hs-var">pprGlobalRdrEnv</span></a></span></span><span> </span><span id="local-6989586621682534022"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534022"><span class="hs-identifier hs-var">locals_only</span></a></span></span><span> </span><span id="local-6989586621682534023"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534023"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-961"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GlobalRdrEnv&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
forall doc. IsOutput doc =&gt; Bool -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#ppWhen"><span class="hs-identifier hs-var">ppWhen</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534022"><span class="hs-identifier hs-var">locals_only</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(locals only)&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-962"></span><span>             </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#lbrace"><span class="hs-identifier hs-var">lbrace</span></a></span><span>
</span><span id="line-963"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; SDoc
forall {info}. Outputable info =&gt; [GlobalRdrEltX info] -&gt; SDoc
</span><a href="#local-6989586621682534027"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; [GlobalRdrElt]
</span><a href="#local-6989586621682534028"><span class="hs-identifier hs-var">remove_locals</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534029"><span class="hs-identifier hs-var">gre_list</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682534029"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534029"><span class="hs-identifier hs-var">gre_list</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; [[GlobalRdrElt]]
forall a. OccEnv a -&gt; [a]
</span><a href="GHC.Types.Name.Occurrence.html#nonDetOccEnvElts"><span class="hs-identifier hs-var">nonDetOccEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534023"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-964"></span><span>             </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#rbrace"><span class="hs-identifier hs-var">rbrace</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-965"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-966"></span><span>    </span><span id="local-6989586621682534028"><span class="annot"><span class="annottext">remove_locals :: [GlobalRdrElt] -&gt; [GlobalRdrElt]
</span><a href="#local-6989586621682534028"><span class="hs-identifier hs-var hs-var">remove_locals</span></a></span></span><span> </span><span id="local-6989586621682534031"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534031"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534022"><span class="hs-identifier hs-var">locals_only</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Bool) -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isLocalGRE"><span class="hs-identifier hs-var">isLocalGRE</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534031"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-967"></span><span>                       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534031"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-968"></span><span>    </span><span id="local-6989586621682534027"><span class="annot"><span class="annottext">pp :: [GlobalRdrEltX info] -&gt; SDoc
</span><a href="#local-6989586621682534027"><span class="hs-identifier hs-var hs-var">pp</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-969"></span><span>    </span><span class="annot"><a href="#local-6989586621682534027"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span id="local-6989586621682534040"><span class="annot"><span class="annottext">gres :: [GlobalRdrEltX info]
</span><a href="#local-6989586621682534040"><span class="hs-identifier hs-var">gres</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621682534041"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534041"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534042"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-970"></span><span>                         </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GlobalRdrEltX info -&gt; SDoc) -&gt; [GlobalRdrEltX info] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534040"><span class="hs-identifier hs-var">gres</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-971"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-972"></span><span>        </span><span id="local-6989586621682534042"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621682534042"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534041"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-973"></span><span>
</span><span id="line-974"></span><span class="hs-comment">{-
Note [NoFieldSelectors]
~~~~~~~~~~~~~~~~~~~~~~~
The NoFieldSelectors extension allows record fields to be defined without
bringing the corresponding selector functions into scope.  However, such fields
may still be used in contexts such as record construction, pattern matching or
update. This requires us to distinguish contexts in which selectors are required
from those in which any field may be used.  For example:

  {-# LANGUAGE NoFieldSelectors #-}
  module M (T(foo), foo) where  -- T(foo) refers to the field,
                                -- unadorned foo to the value binding
    data T = MkT { foo :: Int }
    foo = ()

    bar = foo -- refers to the value binding, field ignored

  module N where
    import M (T(..))
    baz = MkT { foo = 3 } -- refers to the field
    oops = foo -- an error: the field is in scope but the value binding is not

Each 'FieldLabel' indicates (in the 'flHasFieldSelector' field) whether the
FieldSelectors extension was enabled in the defining module.  This allows them
to be filtered out by 'filterFieldGREs'.

Even when NoFieldSelectors is in use, we still generate selector functions
internally. For example, the expression
   getField @&quot;foo&quot; t
or (with dot-notation)
   t.foo
extracts the `foo` field of t::T, and hence needs the selector function
(see Note [HasField instances] in GHC.Tc.Instance.Class).

In many of the name lookup functions in this module we pass a FieldsOrSelectors
value, indicating what we are looking for:

 * WantNormal: fields are in scope only if they have an accompanying selector
   function, e.g. we are looking up a variable in an expression
   (lookupExprOccRn).

 * WantBoth: any name or field will do, regardless of whether the selector
   function is available, e.g. record updates (lookupRecUpdFields) with
   NoDisambiguateRecordFields.

 * WantField: any field will do, regardless of whether the selector function is
   available, but ignoring any non-field names, e.g. record updates
   (lookupRecUpdFields with DisambiguateRecordFields.

-----------------------------------------------------------------------------------
  Context                                  FieldsOrSelectors
-----------------------------------------------------------------------------------
  Record construction/pattern match        WantField, but unless DisambiguateRecordFields
  e.g. MkT { foo = 3 }                     is in effect, also look up using WantBoth
  Record update, e.g. e { foo = 3 }        to report when a non-field clashes with a field.

  :info in GHCi                            WantBoth

  Variable occurrence in expression        WantNormal
  Type variable, data constructor
  Pretty much everything else
-----------------------------------------------------------------------------------
-}</span><span>
</span><span id="line-1037"></span><span>
</span><span id="line-1038"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#fieldGRE_maybe"><span class="hs-identifier hs-type">fieldGRE_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldGlobalRdrElt"><span class="hs-identifier hs-type">FieldGlobalRdrElt</span></a></span><span>
</span><span id="line-1039"></span><span id="fieldGRE_maybe"><span class="annot"><span class="annottext">fieldGRE_maybe :: GlobalRdrElt -&gt; Maybe GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#fieldGRE_maybe"><span class="hs-identifier hs-var hs-var">fieldGRE_maybe</span></a></span></span><span> </span><span id="local-6989586621682534044"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534044"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1040"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-var">isRecFldGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534044"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1041"></span><span>  </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe GlobalRdrElt
forall a. a -&gt; Maybe a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534044"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1042"></span><span>
</span><span id="line-1043"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#fieldGRELabel"><span class="hs-identifier hs-type">fieldGRELabel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldGlobalRdrElt"><span class="hs-identifier hs-type">FieldGlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span>
</span><span id="line-1044"></span><span id="fieldGRELabel"><span class="annot"><span class="annottext">fieldGRELabel :: HasDebugCallStack =&gt; GlobalRdrElt -&gt; FieldLabel
</span><a href="GHC.Types.Name.Reader.html#fieldGRELabel"><span class="hs-identifier hs-var hs-var">fieldGRELabel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RecFieldInfo -&gt; FieldLabel
</span><a href="GHC.Types.GREInfo.html#recFieldLabel"><span class="hs-identifier hs-var">recFieldLabel</span></a></span><span> </span><span class="annot"><span class="annottext">(RecFieldInfo -&gt; FieldLabel)
-&gt; (GlobalRdrElt -&gt; RecFieldInfo) -&gt; GlobalRdrElt -&gt; FieldLabel
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; GlobalRdrElt -&gt; RecFieldInfo
GlobalRdrElt -&gt; RecFieldInfo
</span><a href="GHC.Types.Name.Reader.html#fieldGREInfo"><span class="hs-identifier hs-var">fieldGREInfo</span></a></span><span>
</span><span id="line-1045"></span><span>
</span><span id="line-1046"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#fieldGREInfo"><span class="hs-identifier hs-type">fieldGREInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldGlobalRdrElt"><span class="hs-identifier hs-type">FieldGlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#RecFieldInfo"><span class="hs-identifier hs-type">RecFieldInfo</span></a></span><span>
</span><span id="line-1047"></span><span id="fieldGREInfo"><span class="annot"><span class="annottext">fieldGREInfo :: HasDebugCallStack =&gt; GlobalRdrElt -&gt; RecFieldInfo
</span><a href="GHC.Types.Name.Reader.html#fieldGREInfo"><span class="hs-identifier hs-var hs-var">fieldGREInfo</span></a></span></span><span> </span><span id="local-6989586621682534060"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534060"><span class="hs-identifier hs-var">gre</span></a></span></span><span>
</span><span id="line-1048"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; RecFieldInfo -&gt; RecFieldInfo
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-var">isRecFldGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534060"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534060"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RecFieldInfo -&gt; RecFieldInfo) -&gt; RecFieldInfo -&gt; RecFieldInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1049"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; GREInfo
</span><a href="GHC.Types.Name.Reader.html#greInfo"><span class="hs-identifier hs-var">greInfo</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534060"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1050"></span><span>      </span><span class="annot"><a href="GHC.Types.GREInfo.html#IAmRecField"><span class="hs-identifier hs-type">IAmRecField</span></a></span><span> </span><span id="local-6989586621682534062"><span class="annot"><span class="annottext">RecFieldInfo
</span><a href="#local-6989586621682534062"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RecFieldInfo
</span><a href="#local-6989586621682534062"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-1051"></span><span>      </span><span id="local-6989586621682534063"><span class="annot"><span class="annottext">GREInfo
</span><a href="#local-6989586621682534063"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; RecFieldInfo
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fieldGREInfo&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; RecFieldInfo) -&gt; SDoc -&gt; RecFieldInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1052"></span><span>        </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gre_name:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534060"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1053"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;info:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GREInfo -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GREInfo
</span><a href="#local-6989586621682534063"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1054"></span><span>
</span><span id="line-1055"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#recFieldConLike_maybe"><span class="hs-identifier hs-type">recFieldConLike_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#ConInfo"><span class="hs-identifier hs-type">ConInfo</span></a></span><span>
</span><span id="line-1056"></span><span id="recFieldConLike_maybe"><span class="annot"><span class="annottext">recFieldConLike_maybe :: HasDebugCallStack =&gt; GlobalRdrElt -&gt; Maybe ConInfo
</span><a href="GHC.Types.Name.Reader.html#recFieldConLike_maybe"><span class="hs-identifier hs-var hs-var">recFieldConLike_maybe</span></a></span></span><span> </span><span id="local-6989586621682534065"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534065"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1057"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; GREInfo
</span><a href="GHC.Types.Name.Reader.html#greInfo"><span class="hs-identifier hs-var">greInfo</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534065"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1058"></span><span>    </span><span class="annot"><a href="GHC.Types.GREInfo.html#IAmConLike"><span class="hs-identifier hs-type">IAmConLike</span></a></span><span> </span><span id="local-6989586621682534066"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621682534066"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConInfo -&gt; Maybe ConInfo
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621682534066"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-1059"></span><span>    </span><span class="annot"><span class="annottext">GREInfo
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ConInfo
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1060"></span><span>
</span><span id="line-1061"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#recFieldInfo_maybe"><span class="hs-identifier hs-type">recFieldInfo_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#RecFieldInfo"><span class="hs-identifier hs-type">RecFieldInfo</span></a></span><span>
</span><span id="line-1062"></span><span id="recFieldInfo_maybe"><span class="annot"><span class="annottext">recFieldInfo_maybe :: HasDebugCallStack =&gt; GlobalRdrElt -&gt; Maybe RecFieldInfo
</span><a href="GHC.Types.Name.Reader.html#recFieldInfo_maybe"><span class="hs-identifier hs-var hs-var">recFieldInfo_maybe</span></a></span></span><span> </span><span id="local-6989586621682534071"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534071"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1063"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; GREInfo
</span><a href="GHC.Types.Name.Reader.html#greInfo"><span class="hs-identifier hs-var">greInfo</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534071"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1064"></span><span>    </span><span class="annot"><a href="GHC.Types.GREInfo.html#IAmRecField"><span class="hs-identifier hs-type">IAmRecField</span></a></span><span> </span><span id="local-6989586621682534072"><span class="annot"><span class="annottext">RecFieldInfo
</span><a href="#local-6989586621682534072"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; Maybe RecFieldInfo -&gt; Maybe RecFieldInfo
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-var">isRecFldGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534071"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534071"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe RecFieldInfo -&gt; Maybe RecFieldInfo)
-&gt; Maybe RecFieldInfo -&gt; Maybe RecFieldInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RecFieldInfo -&gt; Maybe RecFieldInfo
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">RecFieldInfo
</span><a href="#local-6989586621682534072"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-1065"></span><span>    </span><span class="annot"><span class="annottext">GREInfo
</span><span class="hs-identifier">_</span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe RecFieldInfo
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1066"></span><span>
</span><span id="line-1067"></span><span class="hs-comment">-- | When looking up GREs, we may or may not want to include fields that were</span><span>
</span><span id="line-1068"></span><span class="hs-comment">-- defined in modules with @NoFieldSelectors@ enabled.  See Note</span><span>
</span><span id="line-1069"></span><span class="hs-comment">-- [NoFieldSelectors].</span><span>
</span><span id="line-1070"></span><span class="hs-keyword">data</span><span> </span><span id="FieldsOrSelectors"><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldsOrSelectors"><span class="hs-identifier hs-var">FieldsOrSelectors</span></a></span></span><span>
</span><span id="line-1071"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="WantNormal"><span class="annot"><a href="GHC.Types.Name.Reader.html#WantNormal"><span class="hs-identifier hs-var">WantNormal</span></a></span></span><span> </span><span class="hs-comment">-- ^ Include normal names, and fields with selectors, but</span><span>
</span><span id="line-1072"></span><span>                 </span><span class="hs-comment">-- ignore fields without selectors.</span><span>
</span><span id="line-1073"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="WantBoth"><span class="annot"><a href="GHC.Types.Name.Reader.html#WantBoth"><span class="hs-identifier hs-var">WantBoth</span></a></span></span><span>   </span><span class="hs-comment">-- ^ Include normal names and all fields (regardless of whether</span><span>
</span><span id="line-1074"></span><span>                 </span><span class="hs-comment">-- they have selectors).</span><span>
</span><span id="line-1075"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="WantField"><span class="annot"><a href="GHC.Types.Name.Reader.html#WantField"><span class="hs-identifier hs-var">WantField</span></a></span></span><span>  </span><span class="hs-comment">-- ^ Include only fields, with or without selectors, ignoring</span><span>
</span><span id="line-1076"></span><span>                 </span><span class="hs-comment">-- any non-fields in scope.</span><span>
</span><span id="line-1077"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682534077"><span id="local-6989586621682534081"><span class="annot"><span class="annottext">FieldsOrSelectors -&gt; FieldsOrSelectors -&gt; Bool
(FieldsOrSelectors -&gt; FieldsOrSelectors -&gt; Bool)
-&gt; (FieldsOrSelectors -&gt; FieldsOrSelectors -&gt; Bool)
-&gt; Eq FieldsOrSelectors
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: FieldsOrSelectors -&gt; FieldsOrSelectors -&gt; Bool
== :: FieldsOrSelectors -&gt; FieldsOrSelectors -&gt; Bool
$c/= :: FieldsOrSelectors -&gt; FieldsOrSelectors -&gt; Bool
/= :: FieldsOrSelectors -&gt; FieldsOrSelectors -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682534084"><span id="local-6989586621682534086"><span id="local-6989586621682534090"><span class="annot"><span class="annottext">Int -&gt; FieldsOrSelectors -&gt; ShowS
[FieldsOrSelectors] -&gt; ShowS
FieldsOrSelectors -&gt; String
(Int -&gt; FieldsOrSelectors -&gt; ShowS)
-&gt; (FieldsOrSelectors -&gt; String)
-&gt; ([FieldsOrSelectors] -&gt; ShowS)
-&gt; Show FieldsOrSelectors
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; FieldsOrSelectors -&gt; ShowS
showsPrec :: Int -&gt; FieldsOrSelectors -&gt; ShowS
$cshow :: FieldsOrSelectors -&gt; String
show :: FieldsOrSelectors -&gt; String
$cshowList :: [FieldsOrSelectors] -&gt; ShowS
showList :: [FieldsOrSelectors] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1078"></span><span>
</span><span id="line-1079"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#filterFieldGREs"><span class="hs-identifier hs-type">filterFieldGREs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldsOrSelectors"><span class="hs-identifier hs-type">FieldsOrSelectors</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1080"></span><span id="filterFieldGREs"><span class="annot"><span class="annottext">filterFieldGREs :: FieldsOrSelectors -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#filterFieldGREs"><span class="hs-identifier hs-var hs-var">filterFieldGREs</span></a></span></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#WantBoth"><span class="hs-identifier hs-var">WantBoth</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-1081"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#filterFieldGREs"><span class="hs-identifier hs-var">filterFieldGREs</span></a></span><span> </span><span id="local-6989586621682534095"><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="#local-6989586621682534095"><span class="hs-identifier hs-var">fos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Bool) -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldsOrSelectors -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#allowGRE"><span class="hs-identifier hs-var">allowGRE</span></a></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="#local-6989586621682534095"><span class="hs-identifier hs-var">fos</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1082"></span><span>
</span><span id="line-1083"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#allowGRE"><span class="hs-identifier hs-type">allowGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldsOrSelectors"><span class="hs-identifier hs-type">FieldsOrSelectors</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1084"></span><span id="allowGRE"><span class="annot"><span class="annottext">allowGRE :: FieldsOrSelectors -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#allowGRE"><span class="hs-identifier hs-var hs-var">allowGRE</span></a></span></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#WantBoth"><span class="hs-identifier hs-var">WantBoth</span></a></span><span>   </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1085"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1086"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#allowGRE"><span class="hs-identifier hs-var">allowGRE</span></a></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#WantNormal"><span class="hs-identifier hs-var">WantNormal</span></a></span><span> </span><span id="local-6989586621682534096"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534096"><span class="hs-identifier hs-var">gre</span></a></span></span><span>
</span><span id="line-1087"></span><span>  </span><span class="hs-comment">-- NB: we only need to consult the GREInfo for record field GREs,</span><span>
</span><span id="line-1088"></span><span>  </span><span class="hs-comment">-- to check whether they define field selectors.</span><span>
</span><span id="line-1089"></span><span>  </span><span class="hs-comment">-- By checking 'isRecFldGRE' first, which only consults the NameSpace,</span><span>
</span><span id="line-1090"></span><span>  </span><span class="hs-comment">-- we avoid forcing the GREInfo for things that aren't record fields.</span><span>
</span><span id="line-1091"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-var">isRecFldGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534096"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1092"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; FieldSelectors
</span><a href="GHC.Types.FieldLabel.html#flHasFieldSelector"><span class="hs-identifier hs-var">flHasFieldSelector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; GlobalRdrElt -&gt; FieldLabel
GlobalRdrElt -&gt; FieldLabel
</span><a href="GHC.Types.Name.Reader.html#fieldGRELabel"><span class="hs-identifier hs-var">fieldGRELabel</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534096"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldSelectors -&gt; FieldSelectors -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FieldSelectors
</span><a href="GHC.Types.FieldLabel.html#FieldSelectors"><span class="hs-identifier hs-var">FieldSelectors</span></a></span><span>
</span><span id="line-1093"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1094"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1095"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#allowGRE"><span class="hs-identifier hs-var">allowGRE</span></a></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#WantField"><span class="hs-identifier hs-var">WantField</span></a></span><span> </span><span id="local-6989586621682534099"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534099"><span class="hs-identifier hs-var">gre</span></a></span></span><span>
</span><span id="line-1096"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-var">isRecFldGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534099"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1097"></span><span>
</span><span id="line-1098"></span><span class="hs-comment">-- | What should we look up in a 'GlobalRdrEnv'? Should we only look up</span><span>
</span><span id="line-1099"></span><span class="hs-comment">-- names with the exact same 'OccName', or do we allow different 'NameSpace's?</span><span>
</span><span id="line-1100"></span><span class="hs-comment">--</span><span>
</span><span id="line-1101"></span><span class="hs-comment">-- Depending on the answer, we might need more or less information from the</span><span>
</span><span id="line-1102"></span><span class="hs-comment">-- 'GlobalRdrEnv', e.g. if we want to include matching record fields we need</span><span>
</span><span id="line-1103"></span><span class="hs-comment">-- to know if the corresponding record fields define field selectors, for which</span><span>
</span><span id="line-1104"></span><span class="hs-comment">-- we need to consult the 'GREInfo'. This is why this datatype is a GADT.</span><span>
</span><span id="line-1105"></span><span class="hs-comment">--</span><span>
</span><span id="line-1106"></span><span class="hs-comment">-- See Note [IfGlobalRdrEnv].</span><span>
</span><span id="line-1107"></span><span class="hs-keyword">data</span><span> </span><span id="LookupGRE"><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupGRE"><span class="hs-identifier hs-var">LookupGRE</span></a></span></span><span> </span><span id="local-6989586621682534100"><span class="annot"><a href="#local-6989586621682534100"><span class="hs-identifier hs-type">info</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1108"></span><span>  </span><span class="hs-comment">-- | Look for this specific 'OccName', with the exact same 'NameSpace',</span><span>
</span><span id="line-1109"></span><span>  </span><span class="hs-comment">-- in the 'GlobalRdrEnv'.</span><span>
</span><span id="line-1110"></span><span>  </span><span id="local-6989586621682532979"><span id="LookupOccName"><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupOccName"><span class="hs-identifier hs-var">LookupOccName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ the 'OccName' to look up</span></span><span>
</span><span id="line-1111"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#WhichGREs"><span class="hs-identifier hs-type">WhichGREs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532979"><span class="hs-identifier hs-type">info</span></a></span><span>
</span><span id="line-1112"></span><span>                    </span><span class="annot"><span class="hs-comment">-- ^ information about other relevant 'NameSpace's</span></span><span>
</span><span id="line-1113"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupGRE"><span class="hs-identifier hs-type">LookupGRE</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532979"><span class="hs-identifier hs-type">info</span></a></span></span><span>
</span><span id="line-1114"></span><span>
</span><span id="line-1115"></span><span>  </span><span class="hs-comment">-- | Look up the 'OccName' of this 'RdrName' in the 'GlobalRdrEnv',</span><span>
</span><span id="line-1116"></span><span>  </span><span class="hs-comment">-- filtering out those whose qualification matches that of the 'RdrName'.</span><span>
</span><span id="line-1117"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1118"></span><span>  </span><span class="hs-comment">-- Lookup returns an empty result for 'Exact' or 'Orig' 'RdrName's.</span><span>
</span><span id="line-1119"></span><span>  </span><span id="local-6989586621682534102"><span id="LookupRdrName"><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupRdrName"><span class="hs-identifier hs-var">LookupRdrName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ the 'RdrName' to look up</span></span><span>
</span><span id="line-1120"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#WhichGREs"><span class="hs-identifier hs-type">WhichGREs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682534102"><span class="hs-identifier hs-type">info</span></a></span><span>
</span><span id="line-1121"></span><span>                    </span><span class="annot"><span class="hs-comment">-- ^ information about other relevant 'NameSpace's</span></span><span>
</span><span id="line-1122"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupGRE"><span class="hs-identifier hs-type">LookupGRE</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682534102"><span class="hs-identifier hs-type">info</span></a></span></span><span>
</span><span id="line-1123"></span><span>
</span><span id="line-1124"></span><span>  </span><span class="hs-comment">-- | Look for 'GRE's with the same unique as the given 'Name'</span><span>
</span><span id="line-1125"></span><span>  </span><span class="hs-comment">-- in the 'GlobalRdrEnv'.</span><span>
</span><span id="line-1126"></span><span>  </span><span id="local-6989586621682532956"><span id="LookupExactName"><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupExactName"><span class="hs-identifier hs-var">LookupExactName</span></a></span></span><span>
</span><span id="line-1127"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">{</span><span> </span><span id="lookupExactName"><span class="annot"><span class="annottext">forall info. LookupGRE info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#lookupExactName"><span class="hs-identifier hs-var hs-var">lookupExactName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1128"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ the 'Name' to look up</span></span><span>
</span><span id="line-1129"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="lookInAllNameSpaces"><span class="annot"><span class="annottext">forall info. LookupGRE info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookInAllNameSpaces"><span class="hs-identifier hs-var hs-var">lookInAllNameSpaces</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1130"></span><span>          </span><span class="hs-comment">-- ^ whether to look in *all* 'NameSpace's, or just</span><span>
</span><span id="line-1131"></span><span>          </span><span class="hs-comment">-- in the 'NameSpace' of the 'Name'</span><span>
</span><span id="line-1132"></span><span>          </span><span class="hs-comment">-- See Note [Template Haskell ambiguity]</span><span>
</span><span id="line-1133"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-1134"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupGRE"><span class="hs-identifier hs-type">LookupGRE</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532956"><span class="hs-identifier hs-type">info</span></a></span></span><span>
</span><span id="line-1135"></span><span>
</span><span id="line-1136"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Look up children 'GlobalRdrElt's with a given 'Parent'.</span></span><span>
</span><span id="line-1137"></span><span>  </span><span id="local-6989586621682534107"><span id="LookupChildren"><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupChildren"><span class="hs-identifier hs-var">LookupChildren</span></a></span></span><span>
</span><span id="line-1138"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ the 'OccName' to look up</span></span><span>
</span><span id="line-1139"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupChild"><span class="hs-identifier hs-type">LookupChild</span></a></span><span>
</span><span id="line-1140"></span><span>         </span><span class="hs-comment">-- ^ information to decide which 'GlobalRdrElt's</span><span>
</span><span id="line-1141"></span><span>         </span><span class="hs-comment">-- are valid children after looking up</span><span>
</span><span id="line-1142"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupGRE"><span class="hs-identifier hs-type">LookupGRE</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682534107"><span class="hs-identifier hs-type">info</span></a></span></span><span>
</span><span id="line-1143"></span><span>
</span><span id="line-1144"></span><span class="hs-comment">-- | How should we look up in a 'GlobalRdrEnv'?</span><span>
</span><span id="line-1145"></span><span class="hs-comment">-- Which 'NameSpace's are considered relevant for a given lookup?</span><span>
</span><span id="line-1146"></span><span class="hs-keyword">data</span><span> </span><span id="WhichGREs"><span class="annot"><a href="GHC.Types.Name.Reader.html#WhichGREs"><span class="hs-identifier hs-var">WhichGREs</span></a></span></span><span> </span><span id="local-6989586621682534109"><span class="annot"><a href="#local-6989586621682534109"><span class="hs-identifier hs-type">info</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1147"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Only consider 'GlobalRdrElt's with the exact 'NameSpace' we look up.</span></span><span>
</span><span id="line-1148"></span><span>  </span><span id="local-6989586621682534110"><span id="SameNameSpace"><span class="annot"><a href="GHC.Types.Name.Reader.html#SameNameSpace"><span class="hs-identifier hs-var">SameNameSpace</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#WhichGREs"><span class="hs-identifier hs-type">WhichGREs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682534110"><span class="hs-identifier hs-type">info</span></a></span></span><span>
</span><span id="line-1149"></span><span>  </span><span class="hs-comment">-- | Allow 'GlobalRdrElt's with different 'NameSpace's, e.g. allow looking up</span><span>
</span><span id="line-1150"></span><span>  </span><span class="hs-comment">-- record fields from the variable 'NameSpace', or looking up a 'TyCon' from</span><span>
</span><span id="line-1151"></span><span>  </span><span class="hs-comment">-- the data constructor 'NameSpace'.</span><span>
</span><span id="line-1152"></span><span>  </span><span id="RelevantGREs"><span class="annot"><a href="GHC.Types.Name.Reader.html#RelevantGREs"><span class="hs-identifier hs-var">RelevantGREs</span></a></span></span><span>
</span><span id="line-1153"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">{</span><span> </span><span id="includeFieldSelectors"><span class="annot"><span class="annottext">WhichGREs GREInfo -&gt; FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#includeFieldSelectors"><span class="hs-identifier hs-var hs-var">includeFieldSelectors</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldsOrSelectors"><span class="hs-identifier hs-type">FieldsOrSelectors</span></a></span><span>
</span><span id="line-1154"></span><span>        </span><span class="hs-comment">-- ^ how should we handle looking up variables?</span><span>
</span><span id="line-1155"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1156"></span><span>        </span><span class="hs-comment">--   - should we include record fields defined with @-XNoFieldSelectors@?</span><span>
</span><span id="line-1157"></span><span>        </span><span class="hs-comment">--   - should we include non-fields?</span><span>
</span><span id="line-1158"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1159"></span><span>        </span><span class="hs-comment">-- See Note [NoFieldSelectors].</span><span>
</span><span id="line-1160"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="lookupVariablesForFields"><span class="annot"><span class="annottext">WhichGREs GREInfo -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookupVariablesForFields"><span class="hs-identifier hs-var hs-var">lookupVariablesForFields</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1161"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ when looking up a record field, should we also look up plain variables?</span></span><span>
</span><span id="line-1162"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="lookupTyConsAsWell"><span class="annot"><span class="annottext">WhichGREs GREInfo -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookupTyConsAsWell"><span class="hs-identifier hs-var hs-var">lookupTyConsAsWell</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1163"></span><span>          </span><span class="hs-comment">-- ^ when looking up a variable, field or data constructor, should we</span><span>
</span><span id="line-1164"></span><span>          </span><span class="hs-comment">-- also try the type constructor 'NameSpace'?</span><span>
</span><span id="line-1165"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-1166"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#WhichGREs"><span class="hs-identifier hs-type">WhichGREs</span></a></span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier hs-type">GREInfo</span></a></span><span>
</span><span id="line-1167"></span><span>
</span><span id="line-1168"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682532962"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#WhichGREs"><span class="hs-identifier hs-type">WhichGREs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532962"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1169"></span><span>  </span><span id="local-6989586621682534122"><span class="annot"><span class="annottext">ppr :: WhichGREs info -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">WhichGREs info
</span><a href="GHC.Types.Name.Reader.html#SameNameSpace"><span class="hs-identifier hs-var">SameNameSpace</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SameNameSpace&quot;</span></span><span>
</span><span id="line-1170"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#RelevantGREs"><span class="hs-identifier hs-type">RelevantGREs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">includeFieldSelectors :: WhichGREs GREInfo -&gt; FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#includeFieldSelectors"><span class="hs-identifier hs-var">includeFieldSelectors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534133"><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="#local-6989586621682534133"><span class="hs-identifier hs-var">sel</span></a></span></span><span>
</span><span id="line-1171"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lookupVariablesForFields :: WhichGREs GREInfo -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookupVariablesForFields"><span class="hs-identifier hs-var">lookupVariablesForFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534134"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534134"><span class="hs-identifier hs-var">vars</span></a></span></span><span>
</span><span id="line-1172"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lookupTyConsAsWell :: WhichGREs GREInfo -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookupTyConsAsWell"><span class="hs-identifier hs-var">lookupTyConsAsWell</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534135"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534135"><span class="hs-identifier hs-var">tcs_too</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1173"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span>
</span><span id="line-1174"></span><span>       </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RelevantGREs&quot;</span></span><span>
</span><span id="line-1175"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldsOrSelectors -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="#local-6989586621682534133"><span class="hs-identifier hs-var">sel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1176"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534134"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[vars]&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1177"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534135"><span class="hs-identifier hs-var">tcs_too</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[tcs]&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span class="annot"><span class="hs-comment">-- | Look up as many possibly relevant 'GlobalRdrElt's as possible.</span></span><span>
</span><span id="line-1180"></span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#AllRelevantGREs"><span class="hs-identifier hs-type">AllRelevantGREs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#WhichGREs"><span class="hs-identifier hs-type">WhichGREs</span></a></span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier hs-type">GREInfo</span></a></span><span>
</span><span id="line-1181"></span><span class="hs-keyword">pattern</span><span> </span><span id="AllRelevantGREs"><span id="%24mAllRelevantGREs"><span id="%24bAllRelevantGREs"><span class="annot"><span class="annottext">$mAllRelevantGREs :: forall {r}. WhichGREs GREInfo -&gt; ((# #) -&gt; r) -&gt; ((# #) -&gt; r) -&gt; r
$bAllRelevantGREs :: WhichGREs GREInfo
</span><a href="GHC.Types.Name.Reader.html#AllRelevantGREs"><span class="hs-identifier hs-var hs-var hs-var">AllRelevantGREs</span></a></span></span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1182"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RelevantGREs"><span class="hs-identifier hs-type">RelevantGREs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#includeFieldSelectors"><span class="hs-identifier hs-var">includeFieldSelectors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#WantBoth"><span class="hs-identifier hs-type">WantBoth</span></a></span><span>
</span><span id="line-1183"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupVariablesForFields"><span class="hs-identifier hs-var">lookupVariablesForFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span>
</span><span id="line-1184"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupTyConsAsWell"><span class="hs-identifier hs-var">lookupTyConsAsWell</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1185"></span><span>
</span><span id="line-1186"></span><span class="hs-comment">-- | Look up relevant GREs, taking into account the interaction between the</span><span>
</span><span id="line-1187"></span><span class="hs-comment">-- variable and field 'NameSpace's as determined by the 'FieldsOrSelector'</span><span>
</span><span id="line-1188"></span><span class="hs-comment">-- argument.</span><span>
</span><span id="line-1189"></span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RelevantGREsFOS"><span class="hs-identifier hs-type">RelevantGREsFOS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldsOrSelectors"><span class="hs-identifier hs-type">FieldsOrSelectors</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#WhichGREs"><span class="hs-identifier hs-type">WhichGREs</span></a></span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier hs-type">GREInfo</span></a></span><span>
</span><span id="line-1190"></span><span class="hs-keyword">pattern</span><span> </span><span id="RelevantGREsFOS"><span id="%24mRelevantGREsFOS"><span id="%24bRelevantGREsFOS"><span class="annot"><span class="annottext">$mRelevantGREsFOS :: forall {r}.
WhichGREs GREInfo -&gt; (FieldsOrSelectors -&gt; r) -&gt; ((# #) -&gt; r) -&gt; r
$bRelevantGREsFOS :: FieldsOrSelectors -&gt; WhichGREs GREInfo
</span><a href="GHC.Types.Name.Reader.html#RelevantGREsFOS"><span class="hs-identifier hs-var hs-var hs-var">RelevantGREsFOS</span></a></span></span></span></span><span> </span><span class="annot"><a href="#local-6989586621682534143"><span class="hs-identifier hs-type">fos</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RelevantGREs"><span class="hs-identifier hs-type">RelevantGREs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#includeFieldSelectors"><span class="hs-identifier hs-var">includeFieldSelectors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534143"><span class="annot"><a href="#local-6989586621682534143"><span class="hs-identifier hs-var">fos</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1191"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1192"></span><span>    </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RelevantGREsFOS"><span class="hs-identifier hs-var">RelevantGREsFOS</span></a></span><span> </span><span id="local-6989586621682534145"><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="#local-6989586621682534145"><span class="hs-identifier hs-var">fos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1193"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RelevantGREs"><span class="hs-identifier hs-type">RelevantGREs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">includeFieldSelectors :: FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#includeFieldSelectors"><span class="hs-identifier hs-var">includeFieldSelectors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="#local-6989586621682534145"><span class="hs-identifier hs-var">fos</span></a></span><span>
</span><span id="line-1194"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lookupVariablesForFields :: Bool
</span><a href="GHC.Types.Name.Reader.html#lookupVariablesForFields"><span class="hs-identifier hs-var">lookupVariablesForFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="#local-6989586621682534145"><span class="hs-identifier hs-var">fos</span></a></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors -&gt; FieldsOrSelectors -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#WantBoth"><span class="hs-identifier hs-var">WantBoth</span></a></span><span>
</span><span id="line-1195"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lookupTyConsAsWell :: Bool
</span><a href="GHC.Types.Name.Reader.html#lookupTyConsAsWell"><span class="hs-identifier hs-var">lookupTyConsAsWell</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1196"></span><span>
</span><span id="line-1197"></span><span class="hs-keyword">data</span><span> </span><span id="LookupChild"><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupChild"><span class="hs-identifier hs-var">LookupChild</span></a></span></span><span>
</span><span id="line-1198"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="LookupChild"><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupChild"><span class="hs-identifier hs-var">LookupChild</span></a></span></span><span>
</span><span id="line-1199"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="wantedParent"><span class="annot"><span class="annottext">LookupChild -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#wantedParent"><span class="hs-identifier hs-var hs-var">wantedParent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1200"></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ the parent we are looking up children of</span></span><span>
</span><span id="line-1201"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="lookupDataConFirst"><span class="annot"><span class="annottext">LookupChild -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookupDataConFirst"><span class="hs-identifier hs-var hs-var">lookupDataConFirst</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1202"></span><span>     </span><span class="hs-comment">-- ^ for type constructors, should we look in the data constructor</span><span>
</span><span id="line-1203"></span><span>     </span><span class="hs-comment">-- namespace first?</span><span>
</span><span id="line-1204"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="prioritiseParent"><span class="annot"><span class="annottext">LookupChild -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#prioritiseParent"><span class="hs-identifier hs-var hs-var">prioritiseParent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1205"></span><span>    </span><span class="hs-comment">-- ^ should we prioritise getting the right 'Parent'?</span><span>
</span><span id="line-1206"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1207"></span><span>    </span><span class="hs-comment">--  - @True@: prioritise getting the right 'Parent'</span><span>
</span><span id="line-1208"></span><span>    </span><span class="hs-comment">--  - @False@: prioritise getting the right 'NameSpace'</span><span>
</span><span id="line-1209"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1210"></span><span>    </span><span class="hs-comment">-- See Note [childGREPriority].</span><span>
</span><span id="line-1211"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1212"></span><span>
</span><span id="line-1213"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupChild"><span class="hs-identifier hs-type">LookupChild</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1214"></span><span>  </span><span id="local-6989586621682534163"><span class="annot"><span class="annottext">ppr :: LookupChild -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupChild"><span class="hs-identifier hs-type">LookupChild</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wantedParent :: LookupChild -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#wantedParent"><span class="hs-identifier hs-var">wantedParent</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534164"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534164"><span class="hs-identifier hs-var">par</span></a></span></span><span>
</span><span id="line-1215"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lookupDataConFirst :: LookupChild -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookupDataConFirst"><span class="hs-identifier hs-var">lookupDataConFirst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534165"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534165"><span class="hs-identifier hs-var">dc</span></a></span></span><span>
</span><span id="line-1216"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">prioritiseParent :: LookupChild -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#prioritiseParent"><span class="hs-identifier hs-var">prioritiseParent</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534166"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534166"><span class="hs-identifier hs-var">prio_parent</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1217"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span>
</span><span id="line-1218"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LookupChild&quot;</span></span><span>
</span><span id="line-1219"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;parent:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534164"><span class="hs-identifier hs-var">par</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1220"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534165"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[dc_first]&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1221"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534166"><span class="hs-identifier hs-var">prio_parent</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[prio_parent]&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1222"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1223"></span><span>
</span><span id="line-1224"></span><span class="hs-comment">-- | After looking up something with the given 'NameSpace', is the resulting</span><span>
</span><span id="line-1225"></span><span class="hs-comment">-- 'GlobalRdrElt' we have obtained relevant, according to the 'RelevantGREs'</span><span>
</span><span id="line-1226"></span><span class="hs-comment">-- specification of which 'NameSpace's are relevant?</span><span>
</span><span id="line-1227"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#greIsRelevant"><span class="hs-identifier hs-type">greIsRelevant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#WhichGREs"><span class="hs-identifier hs-type">WhichGREs</span></a></span><span> </span><span class="annot"><a href="GHC.Types.GREInfo.html#GREInfo"><span class="hs-identifier hs-type">GREInfo</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ specification of which 'GlobalRdrElt's to consider relevant</span></span><span>
</span><span id="line-1228"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ the 'NameSpace' of the thing we are looking up</span></span><span>
</span><span id="line-1229"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-comment">-- ^ the 'GlobalRdrElt' we have looked up, in a</span><span>
</span><span id="line-1230"></span><span>                              </span><span class="hs-comment">-- potentially different 'NameSpace' than we wanted</span><span>
</span><span id="line-1231"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1232"></span><span id="greIsRelevant"><span class="annot"><span class="annottext">greIsRelevant :: WhichGREs GREInfo -&gt; NameSpace -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#greIsRelevant"><span class="hs-identifier hs-var hs-var">greIsRelevant</span></a></span></span><span> </span><span id="local-6989586621682534167"><span class="annot"><span class="annottext">WhichGREs GREInfo
</span><a href="#local-6989586621682534167"><span class="hs-identifier hs-var">which_gres</span></a></span></span><span> </span><span id="local-6989586621682534168"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534168"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span id="local-6989586621682534169"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534169"><span class="hs-identifier hs-var">gre</span></a></span></span><span>
</span><span id="line-1233"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534168"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NameSpace -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534170"><span class="hs-identifier hs-var">other_ns</span></a></span><span>
</span><span id="line-1234"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1235"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1236"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WhichGREs GREInfo
</span><a href="#local-6989586621682534167"><span class="hs-identifier hs-var">which_gres</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1237"></span><span>      </span><span class="annot"><span class="annottext">WhichGREs GREInfo
</span><a href="GHC.Types.Name.Reader.html#SameNameSpace"><span class="hs-identifier hs-var">SameNameSpace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1238"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RelevantGREs"><span class="hs-identifier hs-type">RelevantGREs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">includeFieldSelectors :: WhichGREs GREInfo -&gt; FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#includeFieldSelectors"><span class="hs-identifier hs-var">includeFieldSelectors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534174"><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="#local-6989586621682534174"><span class="hs-identifier hs-var">fos</span></a></span></span><span>
</span><span id="line-1239"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lookupVariablesForFields :: WhichGREs GREInfo -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookupVariablesForFields"><span class="hs-identifier hs-var">lookupVariablesForFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534175"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534175"><span class="hs-identifier hs-var">vars_for_flds</span></a></span></span><span>
</span><span id="line-1240"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lookupTyConsAsWell :: WhichGREs GREInfo -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookupTyConsAsWell"><span class="hs-identifier hs-var">lookupTyConsAsWell</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534176"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534176"><span class="hs-identifier hs-var">tycons_too</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1241"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534168"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NameSpace -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span>
</span><span id="line-1242"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isFieldNameSpace"><span class="hs-identifier hs-var">isFieldNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534170"><span class="hs-identifier hs-var">other_ns</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#allowGRE"><span class="hs-identifier hs-var">allowGRE</span></a></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="#local-6989586621682534174"><span class="hs-identifier hs-var">fos</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534169"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534180"><span class="hs-identifier hs-var">tc_too</span></a></span><span>
</span><span id="line-1243"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isFieldNameSpace"><span class="hs-identifier hs-var">isFieldNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534168"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1244"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534175"><span class="hs-identifier hs-var">vars_for_flds</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1245"></span><span>          </span><span class="hs-special">(</span><span>  </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534170"><span class="hs-identifier hs-var">other_ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NameSpace -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span>
</span><span id="line-1246"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isFieldNameSpace"><span class="hs-identifier hs-var">isFieldNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534170"><span class="hs-identifier hs-var">other_ns</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#allowGRE"><span class="hs-identifier hs-var">allowGRE</span></a></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="#local-6989586621682534174"><span class="hs-identifier hs-var">fos</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534169"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1247"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534180"><span class="hs-identifier hs-var">tc_too</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1248"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isDataConNameSpace"><span class="hs-identifier hs-var">isDataConNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534168"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1249"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534180"><span class="hs-identifier hs-var">tc_too</span></a></span><span>
</span><span id="line-1250"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1251"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1252"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1253"></span><span>          </span><span id="local-6989586621682534180"><span class="annot"><span class="annottext">tc_too :: Bool
</span><a href="#local-6989586621682534180"><span class="hs-identifier hs-var hs-var">tc_too</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534176"><span class="hs-identifier hs-var">tycons_too</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTcClsNameSpace"><span class="hs-identifier hs-var">isTcClsNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534170"><span class="hs-identifier hs-var">other_ns</span></a></span><span>
</span><span id="line-1254"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1255"></span><span>    </span><span id="local-6989586621682534170"><span class="annot"><span class="annottext">other_ns :: NameSpace
</span><a href="#local-6989586621682534170"><span class="hs-identifier hs-var hs-var">other_ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; NameSpace
forall info. GlobalRdrEltX info -&gt; NameSpace
</span><a href="GHC.Types.Name.Reader.html#greNameSpace"><span class="hs-identifier hs-var">greNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534169"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1256"></span><span>
</span><span id="line-1257"></span><span class="hs-comment">{- Note [childGREPriority]
~~~~~~~~~~~~~~~~~~~~~~~~~~
There are currently two places in the compiler where we look up GlobalRdrElts
which have a given Parent. These are the two calls to lookupSubBndrOcc_helper:

  A. Looking up children in an export item, e.g.

       module M ( T(MkT, D) ) where { data T = MkT; data D = D }

  B. Looking up binders in a class or instance declaration, e.g.
     the operator +++ in the fixity declaration:

       class C a where { type (+++) :: a -&gt; a -&gt;; infixl 6 +++ }
       (+++) :: Int -&gt; Int -&gt; Int; (+++) = (+)

In these two situations, there are two competing metrics for finding the &quot;best&quot;
'GlobalRdrElt' that a particular 'OccName' resolves to:

  - does the resolved 'GlobalRdrElt' have the correct parent?
  - does the resolved 'GlobalRdrElt' have the same 'NameSpace' as the 'OccName'?

(A) and (B) have competing requirements.

For the example of (A) above, we know that the child 'D' of 'T' must live
in the data namespace, so we look up the OccName 'OccName DataName &quot;D&quot;' and
prioritise the lookup results based on the 'NameSpace'.
This means we get an error message of the form:

  The type constructor 'T' is not the parent of the data constructor 'D'.

as opposed to the rather unhelpful and confusing:

  The type constructor 'T' is not the parent of the type constructor 'D'.

See test case T11970.

For the example of (B) above, the fixity declaration for +++ lies inside the
class, so we should prioritise looking up 'GlobalRdrElt's whose parent is 'C'.
Not doing so led to #23664.
-}</span><span>
</span><span id="line-1297"></span><span>
</span><span id="line-1298"></span><span class="hs-comment">-- | Scoring priority function for looking up children 'GlobalRdrElt'.</span><span>
</span><span id="line-1299"></span><span class="hs-comment">--</span><span>
</span><span id="line-1300"></span><span class="hs-comment">-- We score by 'Parent' and 'NameSpace', with higher priorities having lower</span><span>
</span><span id="line-1301"></span><span class="hs-comment">-- numbers. Which lexicographic order we use ('Parent' or 'NameSpace' first)</span><span>
</span><span id="line-1302"></span><span class="hs-comment">-- is determined by the first argument; see Note [childGREPriority].</span><span>
</span><span id="line-1303"></span><span id="local-6989586621682532968"><span class="annot"><a href="GHC.Types.Name.Reader.html#childGREPriority"><span class="hs-identifier hs-type">childGREPriority</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupChild"><span class="hs-identifier hs-type">LookupChild</span></a></span><span> </span><span class="hs-comment">-- ^ what kind of child do we want,</span><span>
</span><span id="line-1304"></span><span>                                </span><span class="hs-comment">-- e.g. what should its parent be?</span><span>
</span><span id="line-1305"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ what 'NameSpace' are we originally looking in?</span></span><span>
</span><span id="line-1306"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532968"><span class="hs-identifier hs-type">info</span></a></span><span>
</span><span id="line-1307"></span><span>                                </span><span class="hs-comment">-- ^ the result of looking up; it might be in a different</span><span>
</span><span id="line-1308"></span><span>                                </span><span class="hs-comment">-- 'NameSpace', which is used to determine the score</span><span>
</span><span id="line-1309"></span><span>                                </span><span class="hs-comment">-- (in the first component)</span><span>
</span><span id="line-1310"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-1311"></span><span id="childGREPriority"><span class="annot"><span class="annottext">childGREPriority :: forall info.
LookupChild -&gt; NameSpace -&gt; GlobalRdrEltX info -&gt; Maybe (Int, Int)
</span><a href="GHC.Types.Name.Reader.html#childGREPriority"><span class="hs-identifier hs-var hs-var">childGREPriority</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupChild"><span class="hs-identifier hs-type">LookupChild</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wantedParent :: LookupChild -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#wantedParent"><span class="hs-identifier hs-var">wantedParent</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534195"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534195"><span class="hs-identifier hs-var">wanted_parent</span></a></span></span><span>
</span><span id="line-1312"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lookupDataConFirst :: LookupChild -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookupDataConFirst"><span class="hs-identifier hs-var">lookupDataConFirst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534196"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534196"><span class="hs-identifier hs-var">try_dc_first</span></a></span></span><span>
</span><span id="line-1313"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">prioritiseParent :: LookupChild -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#prioritiseParent"><span class="hs-identifier hs-var">prioritiseParent</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534197"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534197"><span class="hs-identifier hs-var">par_first</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1314"></span><span>  </span><span id="local-6989586621682534198"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534198"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span id="local-6989586621682534199"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534199"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1315"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Maybe Int
</span><a href="#local-6989586621682534200"><span class="hs-identifier hs-var">child_ns_prio</span></a></span><span> </span><span class="annot"><span class="annottext">(NameSpace -&gt; Maybe Int) -&gt; NameSpace -&gt; Maybe Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; NameSpace
forall info. GlobalRdrEltX info -&gt; NameSpace
</span><a href="GHC.Types.Name.Reader.html#greNameSpace"><span class="hs-identifier hs-var">greNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534199"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1316"></span><span>      </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, Int)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1317"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682534201"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682534201"><span class="hs-identifier hs-var">ns_prio</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1318"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682534202"><span class="annot"><span class="annottext">par_prio :: Int
</span><a href="#local-6989586621682534202"><span class="hs-identifier hs-var hs-var">par_prio</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parent -&gt; Int
</span><a href="#local-6989586621682534203"><span class="hs-identifier hs-var">parent_prio</span></a></span><span> </span><span class="annot"><span class="annottext">(Parent -&gt; Int) -&gt; Parent -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Parent
forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#greParent"><span class="hs-identifier hs-var">greParent</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534199"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1319"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; Maybe (Int, Int)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((Int, Int) -&gt; Maybe (Int, Int)) -&gt; (Int, Int) -&gt; Maybe (Int, Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534197"><span class="hs-identifier hs-var">par_first</span></a></span><span>
</span><span id="line-1320"></span><span>                  </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682534202"><span class="hs-identifier hs-var">par_prio</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682534201"><span class="hs-identifier hs-var">ns_prio</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1321"></span><span>                  </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682534201"><span class="hs-identifier hs-var">ns_prio</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682534202"><span class="hs-identifier hs-var">par_prio</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1322"></span><span>          </span><span class="hs-comment">-- See Note [childGREPriority].</span><span>
</span><span id="line-1323"></span><span>
</span><span id="line-1324"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1325"></span><span>      </span><span class="hs-comment">-- Pick out the possible 'NameSpace's in order of priority.</span><span>
</span><span id="line-1326"></span><span>      </span><span class="annot"><a href="#local-6989586621682534200"><span class="hs-identifier hs-type">child_ns_prio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-1327"></span><span>      </span><span id="local-6989586621682534200"><span class="annot"><span class="annottext">child_ns_prio :: NameSpace -&gt; Maybe Int
</span><a href="#local-6989586621682534200"><span class="hs-identifier hs-var hs-var">child_ns_prio</span></a></span></span><span> </span><span id="local-6989586621682534204"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534204"><span class="hs-identifier hs-var">other_ns</span></a></span></span><span>
</span><span id="line-1328"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534204"><span class="hs-identifier hs-var">other_ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NameSpace -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534198"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1329"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1330"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTermVarOrFieldNameSpace"><span class="hs-identifier hs-var">isTermVarOrFieldNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534198"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1331"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTermVarOrFieldNameSpace"><span class="hs-identifier hs-var">isTermVarOrFieldNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534204"><span class="hs-identifier hs-var">other_ns</span></a></span><span>
</span><span id="line-1332"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1333"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isValNameSpace"><span class="hs-identifier hs-var">isValNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span>
</span><span id="line-1334"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534204"><span class="hs-identifier hs-var">other_ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NameSpace -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#tcName"><span class="hs-identifier hs-var">tcName</span></a></span><span>
</span><span id="line-1335"></span><span>        </span><span class="hs-comment">-- When looking up children, we sometimes want a value name</span><span>
</span><span id="line-1336"></span><span>        </span><span class="hs-comment">-- to resolve to a type constructor.</span><span>
</span><span id="line-1337"></span><span>        </span><span class="hs-comment">-- For example, for an infix declaration &quot;infixr 3 +!&quot; or &quot;infix 2 `Fun`&quot;</span><span>
</span><span id="line-1338"></span><span>        </span><span class="hs-comment">-- inside a class declaration, we want to account for the possibility</span><span>
</span><span id="line-1339"></span><span>        </span><span class="hs-comment">-- that the identifier refers to an associated type (type constructor</span><span>
</span><span id="line-1340"></span><span>        </span><span class="hs-comment">-- NameSpace), when otherwise &quot;+!&quot; would be in the term-level variable</span><span>
</span><span id="line-1341"></span><span>        </span><span class="hs-comment">-- NameSpace, and &quot;Fun&quot; would be in the term-level data constructor</span><span>
</span><span id="line-1342"></span><span>        </span><span class="hs-comment">-- NameSpace.  See tests T10816, T23664, T24037.</span><span>
</span><span id="line-1343"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1344"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534198"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NameSpace -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#tcName"><span class="hs-identifier hs-var">tcName</span></a></span><span>
</span><span id="line-1345"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534204"><span class="hs-identifier hs-var">other_ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NameSpace -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#dataName"><span class="hs-identifier hs-var">dataName</span></a></span><span>
</span><span id="line-1346"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534196"><span class="hs-identifier hs-var">try_dc_first</span></a></span><span> </span><span class="hs-comment">-- try data namespace before type/class namespace?</span><span>
</span><span id="line-1347"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1348"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1349"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1350"></span><span>
</span><span id="line-1351"></span><span>      </span><span class="annot"><a href="#local-6989586621682534203"><span class="hs-identifier hs-type">parent_prio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Parent"><span class="hs-identifier hs-type">Parent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1352"></span><span>      </span><span id="local-6989586621682534203"><span class="annot"><span class="annottext">parent_prio :: Parent -&gt; Int
</span><a href="#local-6989586621682534203"><span class="hs-identifier hs-var hs-var">parent_prio</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span> </span><span id="local-6989586621682534209"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534209"><span class="hs-identifier hs-var">other_parent</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1353"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534209"><span class="hs-identifier hs-var">other_parent</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534195"><span class="hs-identifier hs-var">wanted_parent</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1354"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1355"></span><span>      </span><span class="annot"><a href="#local-6989586621682534203"><span class="hs-identifier hs-var">parent_prio</span></a></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1356"></span><span>
</span><span id="line-1357"></span><span class="hs-comment">-- | Look something up in the Global Reader Environment.</span><span>
</span><span id="line-1358"></span><span class="hs-comment">--</span><span>
</span><span id="line-1359"></span><span class="hs-comment">-- The 'LookupGRE' argument specifies what to look up, and in particular</span><span>
</span><span id="line-1360"></span><span class="hs-comment">-- whether there should there be any lee-way if the 'NameSpace's don't</span><span>
</span><span id="line-1361"></span><span class="hs-comment">-- exactly match.</span><span>
</span><span id="line-1362"></span><span id="local-6989586621682532971"><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupGRE"><span class="hs-identifier hs-type">lookupGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532971"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupGRE"><span class="hs-identifier hs-type">LookupGRE</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532971"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532971"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1363"></span><span id="lookupGRE"><span class="annot"><span class="annottext">lookupGRE :: forall info.
GlobalRdrEnvX info -&gt; LookupGRE info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#lookupGRE"><span class="hs-identifier hs-var hs-var">lookupGRE</span></a></span></span><span> </span><span id="local-6989586621682534220"><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534220"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1364"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupOccName"><span class="hs-identifier hs-type">LookupOccName</span></a></span><span> </span><span id="local-6989586621682534221"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534221"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span id="local-6989586621682534222"><span class="annot"><span class="annottext">WhichGREs info
</span><a href="#local-6989586621682534222"><span class="hs-identifier hs-var">which_gres</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1365"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WhichGREs info
</span><a href="#local-6989586621682534222"><span class="hs-identifier hs-var">which_gres</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1366"></span><span>      </span><span class="annot"><span class="annottext">WhichGREs info
</span><a href="GHC.Types.Name.Reader.html#SameNameSpace"><span class="hs-identifier hs-var">SameNameSpace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1367"></span><span>        </span><span class="annot"><span class="annottext">Maybe [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">(Maybe [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info])
-&gt; Maybe [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info -&gt; OccName -&gt; Maybe [GlobalRdrEltX info]
forall a. OccEnv a -&gt; OccName -&gt; Maybe a
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv"><span class="hs-identifier hs-var">lookupOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534220"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534221"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1368"></span><span>      </span><span id="local-6989586621682534224"><span class="annot"><span class="annottext">rel :: WhichGREs info
</span><a href="#local-6989586621682534224"><span class="hs-identifier hs-var">rel</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#RelevantGREs"><span class="hs-identifier hs-type">RelevantGREs</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1369"></span><span>        </span><span class="annot"><span class="annottext">(GlobalRdrEltX info -&gt; Bool)
-&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhichGREs GREInfo -&gt; NameSpace -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#greIsRelevant"><span class="hs-identifier hs-var">greIsRelevant</span></a></span><span> </span><span class="annot"><span class="annottext">WhichGREs info
WhichGREs GREInfo
</span><a href="#local-6989586621682534224"><span class="hs-identifier hs-var">rel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#occNameSpace"><span class="hs-identifier hs-var">occNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534221"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([GlobalRdrEltX info] -&gt; [GlobalRdrEltX info])
-&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1370"></span><span>          </span><span class="annot"><span class="annottext">[[GlobalRdrEltX info]] -&gt; [GlobalRdrEltX info]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[GlobalRdrEltX info]] -&gt; [GlobalRdrEltX info])
-&gt; [[GlobalRdrEltX info]] -&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info -&gt; OccName -&gt; [[GlobalRdrEltX info]]
forall a. OccEnv a -&gt; OccName -&gt; [a]
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv_AllNameSpaces"><span class="hs-identifier hs-var">lookupOccEnv_AllNameSpaces</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534220"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534221"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1371"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupRdrName"><span class="hs-identifier hs-type">LookupRdrName</span></a></span><span> </span><span id="local-6989586621682534228"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682534228"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span id="local-6989586621682534229"><span class="annot"><span class="annottext">WhichGREs info
</span><a href="#local-6989586621682534229"><span class="hs-identifier hs-var">rel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1372"></span><span>    </span><span class="annot"><span class="annottext">RdrName -&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall info.
RdrName -&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#pickGREs"><span class="hs-identifier hs-var">pickGREs</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682534228"><span class="hs-identifier hs-var">rdr</span></a></span><span> </span><span class="annot"><span class="annottext">([GlobalRdrEltX info] -&gt; [GlobalRdrEltX info])
-&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info -&gt; LookupGRE info -&gt; [GlobalRdrEltX info]
forall info.
GlobalRdrEnvX info -&gt; LookupGRE info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#lookupGRE"><span class="hs-identifier hs-var">lookupGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534220"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; WhichGREs info -&gt; LookupGRE info
forall info. OccName -&gt; WhichGREs info -&gt; LookupGRE info
</span><a href="GHC.Types.Name.Reader.html#LookupOccName"><span class="hs-identifier hs-var">LookupOccName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682534228"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WhichGREs info
</span><a href="#local-6989586621682534229"><span class="hs-identifier hs-var">rel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1373"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupExactName"><span class="hs-identifier hs-type">LookupExactName</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lookupExactName :: forall info. LookupGRE info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#lookupExactName"><span class="hs-identifier hs-var">lookupExactName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534230"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534230"><span class="hs-identifier hs-var">nm</span></a></span></span><span>
</span><span id="line-1374"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lookInAllNameSpaces :: forall info. LookupGRE info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#lookInAllNameSpaces"><span class="hs-identifier hs-var">lookInAllNameSpaces</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534231"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534231"><span class="hs-identifier hs-var">all_ns</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1375"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534232"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682534232"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534232"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534233"><span class="hs-identifier hs-var">lkup</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534232"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534230"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1376"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1377"></span><span>      </span><span id="local-6989586621682534234"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621682534234"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534230"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-1378"></span><span>      </span><span id="local-6989586621682534233"><span class="annot"><span class="annottext">lkup :: [GlobalRdrEltX info]
</span><a href="#local-6989586621682534233"><span class="hs-identifier hs-var hs-var">lkup</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534231"><span class="hs-identifier hs-var">all_ns</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[GlobalRdrEltX info]] -&gt; [GlobalRdrEltX info]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[GlobalRdrEltX info]] -&gt; [GlobalRdrEltX info])
-&gt; [[GlobalRdrEltX info]] -&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info -&gt; OccName -&gt; [[GlobalRdrEltX info]]
forall a. OccEnv a -&gt; OccName -&gt; [a]
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv_AllNameSpaces"><span class="hs-identifier hs-var">lookupOccEnv_AllNameSpaces</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534220"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534234"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1379"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
-&gt; Maybe [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Maybe [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info])
-&gt; Maybe [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info -&gt; OccName -&gt; Maybe [GlobalRdrEltX info]
forall a. OccEnv a -&gt; OccName -&gt; Maybe a
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv"><span class="hs-identifier hs-var">lookupOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534220"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534234"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1380"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupChildren"><span class="hs-identifier hs-type">LookupChildren</span></a></span><span> </span><span id="local-6989586621682534236"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534236"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span id="local-6989586621682534237"><span class="annot"><span class="annottext">LookupChild
</span><a href="#local-6989586621682534237"><span class="hs-identifier hs-var">which_child</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1381"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682534238"><span class="annot"><span class="annottext">ns :: NameSpace
</span><a href="#local-6989586621682534238"><span class="hs-identifier hs-var hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#occNameSpace"><span class="hs-identifier hs-var">occNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534236"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1382"></span><span>        </span><span id="local-6989586621682534239"><span class="annot"><span class="annottext">all_gres :: [GlobalRdrEltX info]
</span><a href="#local-6989586621682534239"><span class="hs-identifier hs-var hs-var">all_gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[GlobalRdrEltX info]] -&gt; [GlobalRdrEltX info]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[GlobalRdrEltX info]] -&gt; [GlobalRdrEltX info])
-&gt; [[GlobalRdrEltX info]] -&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info -&gt; OccName -&gt; [[GlobalRdrEltX info]]
forall a. OccEnv a -&gt; OccName -&gt; [a]
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv_AllNameSpaces"><span class="hs-identifier hs-var">lookupOccEnv_AllNameSpaces</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534220"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534236"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1383"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEltX info -&gt; Maybe (Int, Int))
-&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall gre prio. Ord prio =&gt; (gre -&gt; Maybe prio) -&gt; [gre] -&gt; [gre]
</span><a href="GHC.Types.Name.Reader.html#highestPriorityGREs"><span class="hs-identifier hs-var">highestPriorityGREs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LookupChild -&gt; NameSpace -&gt; GlobalRdrEltX info -&gt; Maybe (Int, Int)
forall info.
LookupChild -&gt; NameSpace -&gt; GlobalRdrEltX info -&gt; Maybe (Int, Int)
</span><a href="GHC.Types.Name.Reader.html#childGREPriority"><span class="hs-identifier hs-var">childGREPriority</span></a></span><span> </span><span class="annot"><span class="annottext">LookupChild
</span><a href="#local-6989586621682534237"><span class="hs-identifier hs-var">which_child</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534238"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534239"><span class="hs-identifier hs-var">all_gres</span></a></span><span>
</span><span id="line-1384"></span><span>
</span><span id="line-1385"></span><span class="hs-comment">-- | Collect the 'GlobalRdrElt's with the highest priority according</span><span>
</span><span id="line-1386"></span><span class="hs-comment">-- to the given function (lower value &lt;=&gt; higher priority).</span><span>
</span><span id="line-1387"></span><span class="hs-comment">--</span><span>
</span><span id="line-1388"></span><span class="hs-comment">-- This allows us to first look in e.g. the data 'NameSpace', and then fall back</span><span>
</span><span id="line-1389"></span><span class="hs-comment">-- to the type/class 'NameSpace'.</span><span>
</span><span id="line-1390"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#highestPriorityGREs"><span class="hs-identifier hs-type">highestPriorityGREs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682532982"><span class="annot"><a href="#local-6989586621682532982"><span class="hs-identifier hs-type">gre</span></a></span></span><span> </span><span id="local-6989586621682532981"><span class="annot"><a href="#local-6989586621682532981"><span class="hs-identifier hs-type">prio</span></a></span></span><span>
</span><span id="line-1391"></span><span>                    </span><span class="hs-operator">.</span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621682532981"><span class="hs-identifier hs-type">prio</span></a></span><span>
</span><span id="line-1392"></span><span>                    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682532982"><span class="hs-identifier hs-type">gre</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621682532981"><span class="hs-identifier hs-type">prio</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1393"></span><span>                      </span><span class="hs-comment">-- ^ priority function</span><span>
</span><span id="line-1394"></span><span>                      </span><span class="hs-comment">-- lower value &lt;=&gt; higher priority</span><span>
</span><span id="line-1395"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682532982"><span class="hs-identifier hs-type">gre</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682532982"><span class="hs-identifier hs-type">gre</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1396"></span><span id="highestPriorityGREs"><span class="annot"><span class="annottext">highestPriorityGREs :: forall gre prio. Ord prio =&gt; (gre -&gt; Maybe prio) -&gt; [gre] -&gt; [gre]
</span><a href="GHC.Types.Name.Reader.html#highestPriorityGREs"><span class="hs-identifier hs-var hs-var">highestPriorityGREs</span></a></span></span><span> </span><span id="local-6989586621682534248"><span class="annot"><span class="annottext">gre -&gt; Maybe prio
</span><a href="#local-6989586621682534248"><span class="hs-identifier hs-var">priority</span></a></span></span><span> </span><span id="local-6989586621682534249"><span class="annot"><span class="annottext">[gre]
</span><a href="#local-6989586621682534249"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1397"></span><span>  </span><span class="annot"><span class="annottext">[NonEmpty (Arg prio gre)] -&gt; [gre]
</span><a href="#local-6989586621682534250"><span class="hs-identifier hs-var">take_highest_prio</span></a></span><span> </span><span class="annot"><span class="annottext">([NonEmpty (Arg prio gre)] -&gt; [gre])
-&gt; [NonEmpty (Arg prio gre)] -&gt; [gre]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Arg prio gre] -&gt; [NonEmpty (Arg prio gre)]
forall (f :: * -&gt; *) a. (Foldable f, Eq a) =&gt; f a -&gt; [NonEmpty a]
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#group"><span class="hs-identifier hs-var">NE.group</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg prio gre] -&gt; [NonEmpty (Arg prio gre)])
-&gt; [Arg prio gre] -&gt; [NonEmpty (Arg prio gre)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Arg prio gre] -&gt; [Arg prio gre]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">sort</span></span><span>
</span><span id="line-1398"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">prio -&gt; gre -&gt; Arg prio gre
forall a b. a -&gt; b -&gt; Arg a b
</span><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html#Arg"><span class="hs-identifier hs-var">S.Arg</span></a></span><span> </span><span class="annot"><span class="annottext">prio
</span><a href="#local-6989586621682534252"><span class="hs-identifier hs-var">prio</span></a></span><span> </span><span class="annot"><span class="annottext">gre
</span><a href="#local-6989586621682534253"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1399"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682534253"><span class="annot"><span class="annottext">gre
</span><a href="#local-6989586621682534253"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[gre]
</span><a href="#local-6989586621682534249"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-1400"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682534252"><span class="annot"><span class="annottext">prio
</span><a href="#local-6989586621682534252"><span class="hs-identifier hs-var">prio</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe prio -&gt; [prio]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe prio -&gt; [prio]) -&gt; Maybe prio -&gt; [prio]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">gre -&gt; Maybe prio
</span><a href="#local-6989586621682534248"><span class="hs-identifier hs-var">priority</span></a></span><span> </span><span class="annot"><span class="annottext">gre
</span><a href="#local-6989586621682534253"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1401"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1402"></span><span>    </span><span class="annot"><a href="#local-6989586621682534250"><span class="hs-identifier hs-type">take_highest_prio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html#Arg"><span class="hs-identifier hs-type">S.Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532981"><span class="hs-identifier hs-type">prio</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532982"><span class="hs-identifier hs-type">gre</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682532982"><span class="hs-identifier hs-type">gre</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1403"></span><span>    </span><span id="local-6989586621682534250"><span class="annot"><span class="annottext">take_highest_prio :: [NonEmpty (Arg prio gre)] -&gt; [gre]
</span><a href="#local-6989586621682534250"><span class="hs-identifier hs-var hs-var">take_highest_prio</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1404"></span><span>    </span><span class="annot"><a href="#local-6989586621682534250"><span class="hs-identifier hs-var">take_highest_prio</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682534255"><span class="annot"><span class="annottext">NonEmpty (Arg prio gre)
</span><a href="#local-6989586621682534255"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[NonEmpty (Arg prio gre)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Arg prio gre -&gt; gre) -&gt; [Arg prio gre] -&gt; [gre]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html#Arg"><span class="hs-identifier hs-type">S.Arg</span></a></span><span> </span><span class="annot"><span class="annottext">prio
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682534256"><span class="annot"><span class="annottext">gre
</span><a href="#local-6989586621682534256"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">gre
</span><a href="#local-6989586621682534256"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Arg prio gre] -&gt; [gre]) -&gt; [Arg prio gre] -&gt; [gre]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Arg prio gre) -&gt; [Arg prio gre]
forall a. NonEmpty a -&gt; [a]
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#toList"><span class="hs-identifier hs-var">NE.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Arg prio gre)
</span><a href="#local-6989586621682534255"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-1405"></span><span class="hs-pragma">{-# INLINEABLE</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#highestPriorityGREs"><span class="hs-pragma hs-type">highestPriorityGREs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1406"></span><span>
</span><span id="line-1407"></span><span class="hs-comment">-- | Look for precisely this 'Name' in the environment,</span><span>
</span><span id="line-1408"></span><span class="hs-comment">-- in the __same 'NameSpace'__ as the 'Name'.</span><span>
</span><span id="line-1409"></span><span class="hs-comment">--</span><span>
</span><span id="line-1410"></span><span class="hs-comment">-- This tests whether it is in scope, ignoring anything</span><span>
</span><span id="line-1411"></span><span class="hs-comment">-- else that might be in scope which doesn't have the same 'Unique'.</span><span>
</span><span id="line-1412"></span><span id="local-6989586621682532991"><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupGRE_Name"><span class="hs-identifier hs-type">lookupGRE_Name</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532991"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnvX"><span class="hs-identifier hs-type">GlobalRdrEnvX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532991"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532991"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1413"></span><span id="lookupGRE_Name"><span class="annot"><span class="annottext">lookupGRE_Name :: forall info.
Outputable info =&gt;
GlobalRdrEnvX info -&gt; Name -&gt; Maybe (GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#lookupGRE_Name"><span class="hs-identifier hs-var hs-var">lookupGRE_Name</span></a></span></span><span> </span><span id="local-6989586621682534267"><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534267"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682534268"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534268"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1414"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info -&gt; LookupGRE info -&gt; [GlobalRdrEltX info]
forall info.
GlobalRdrEnvX info -&gt; LookupGRE info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#lookupGRE"><span class="hs-identifier hs-var">lookupGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnvX info
</span><a href="#local-6989586621682534267"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#LookupExactName"><span class="hs-identifier hs-type">LookupExactName</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lookupExactName :: Name
</span><a href="GHC.Types.Name.Reader.html#lookupExactName"><span class="hs-identifier hs-var">lookupExactName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534268"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1415"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lookInAllNameSpaces :: Bool
</span><a href="GHC.Types.Name.Reader.html#lookInAllNameSpaces"><span class="hs-identifier hs-var">lookInAllNameSpaces</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1416"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (GlobalRdrEltX info)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1417"></span><span>      </span><span class="hs-special">[</span><span id="local-6989586621682534269"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534269"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534269"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1418"></span><span>      </span><span id="local-6989586621682534270"><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534270"><span class="hs-identifier hs-var">gres</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Maybe (GlobalRdrEltX info)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lookupGRE_Name&quot;</span></span><span>
</span><span id="line-1419"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534268"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534268"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534270"><span class="hs-identifier hs-var">gres</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1420"></span><span>               </span><span class="hs-comment">-- See INVARIANT 1 on GlobalRdrEnv</span><span>
</span><span id="line-1421"></span><span>
</span><span id="line-1422"></span><span class="annot"><span class="hs-comment">-- | Look for a particular record field selector in the environment.</span></span><span>
</span><span id="line-1423"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupGRE_FieldLabel"><span class="hs-identifier hs-type">lookupGRE_FieldLabel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#FieldGlobalRdrElt"><span class="hs-identifier hs-type">FieldGlobalRdrElt</span></a></span><span>
</span><span id="line-1424"></span><span id="lookupGRE_FieldLabel"><span class="annot"><span class="annottext">lookupGRE_FieldLabel :: GlobalRdrEnv -&gt; FieldLabel -&gt; Maybe GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#lookupGRE_FieldLabel"><span class="hs-identifier hs-var hs-var">lookupGRE_FieldLabel</span></a></span></span><span> </span><span id="local-6989586621682534272"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534272"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682534273"><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682534273"><span class="hs-identifier hs-var">fl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1425"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; Name -&gt; Maybe GlobalRdrElt
forall info.
Outputable info =&gt;
GlobalRdrEnvX info -&gt; Name -&gt; Maybe (GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#lookupGRE_Name"><span class="hs-identifier hs-var">lookupGRE_Name</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534272"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var">flSelector</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682534273"><span class="hs-identifier hs-var">fl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1426"></span><span>    </span><span class="annot"><span class="annottext">Maybe GlobalRdrElt
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe GlobalRdrElt
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1427"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682534274"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534274"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1428"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; Maybe GlobalRdrElt -&gt; Maybe GlobalRdrElt
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-var">isRecFldGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534274"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1429"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lookupGre_FieldLabel:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682534273"><span class="hs-identifier hs-var">fl</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe GlobalRdrElt -&gt; Maybe GlobalRdrElt)
-&gt; Maybe GlobalRdrElt -&gt; Maybe GlobalRdrElt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1430"></span><span>        </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe GlobalRdrElt
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534274"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1431"></span><span>
</span><span id="line-1432"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#getGRE_NameQualifier_maybes"><span class="hs-identifier hs-type">getGRE_NameQualifier_maybes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-1433"></span><span class="hs-comment">-- Returns all the qualifiers by which 'x' is in scope</span><span>
</span><span id="line-1434"></span><span class="hs-comment">-- Nothing means &quot;the unqualified version is in scope&quot;</span><span>
</span><span id="line-1435"></span><span class="hs-comment">-- [] means the thing is not in scope at all</span><span>
</span><span id="line-1436"></span><span id="getGRE_NameQualifier_maybes"><span class="annot"><span class="annottext">getGRE_NameQualifier_maybes :: GlobalRdrEnv -&gt; Name -&gt; [Maybe [ModuleName]]
</span><a href="GHC.Types.Name.Reader.html#getGRE_NameQualifier_maybes"><span class="hs-identifier hs-var hs-var">getGRE_NameQualifier_maybes</span></a></span></span><span> </span><span id="local-6989586621682534275"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534275"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682534276"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534276"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-1437"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; Name -&gt; Maybe GlobalRdrElt
forall info.
Outputable info =&gt;
GlobalRdrEnvX info -&gt; Name -&gt; Maybe (GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#lookupGRE_Name"><span class="hs-identifier hs-var">lookupGRE_Name</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534275"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534276"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1438"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682534277"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534277"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe [ModuleName]
forall {info}. GlobalRdrEltX info -&gt; Maybe [ModuleName]
</span><a href="#local-6989586621682534278"><span class="hs-identifier hs-var">qualifier_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534277"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1439"></span><span>      </span><span class="annot"><span class="annottext">Maybe GlobalRdrElt
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1440"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1441"></span><span>    </span><span id="local-6989586621682534278"><span class="annot"><span class="annottext">qualifier_maybe :: GlobalRdrEltX info -&gt; Maybe [ModuleName]
</span><a href="#local-6989586621682534278"><span class="hs-identifier hs-var hs-var">qualifier_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534279"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534279"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534280"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534280"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1442"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534279"><span class="hs-identifier hs-var">lcl</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [ModuleName]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1443"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ModuleName] -&gt; Maybe [ModuleName]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">([ModuleName] -&gt; Maybe [ModuleName])
-&gt; [ModuleName] -&gt; Maybe [ModuleName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ImportSpec -&gt; ModuleName) -&gt; [ImportSpec] -&gt; [ModuleName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#is_as"><span class="hs-identifier hs-var">is_as</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpDeclSpec -&gt; ModuleName)
-&gt; (ImportSpec -&gt; ImpDeclSpec) -&gt; ImportSpec -&gt; ModuleName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; [ImportSpec]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534280"><span class="hs-identifier hs-var">iss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1444"></span><span>
</span><span id="line-1445"></span><span class="annot"><span class="hs-comment">-- | Is this 'GlobalRdrElt' defined locally?</span></span><span>
</span><span id="line-1446"></span><span id="local-6989586621682534281"><span class="annot"><a href="GHC.Types.Name.Reader.html#isLocalGRE"><span class="hs-identifier hs-type">isLocalGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682534281"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1447"></span><span id="isLocalGRE"><span class="annot"><span class="annottext">isLocalGRE :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isLocalGRE"><span class="hs-identifier hs-var hs-var">isLocalGRE</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534282"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534282"><span class="hs-identifier hs-var">lcl</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534282"><span class="hs-identifier hs-var">lcl</span></a></span><span>
</span><span id="line-1448"></span><span>
</span><span id="line-1449"></span><span class="hs-comment">-- | Is this 'GlobalRdrElt' imported?</span><span>
</span><span id="line-1450"></span><span class="hs-comment">--</span><span>
</span><span id="line-1451"></span><span class="hs-comment">-- Not just the negation of 'isLocalGRE', because it might be an Exact or</span><span>
</span><span id="line-1452"></span><span class="hs-comment">-- Orig name reference. See Note [GlobalRdrElt provenance].</span><span>
</span><span id="line-1453"></span><span id="local-6989586621682534283"><span class="annot"><a href="GHC.Types.Name.Reader.html#isImportedGRE"><span class="hs-identifier hs-type">isImportedGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682534283"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1454"></span><span id="isImportedGRE"><span class="annot"><span class="annottext">isImportedGRE :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isImportedGRE"><span class="hs-identifier hs-var hs-var">isImportedGRE</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534284"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534284"><span class="hs-identifier hs-var">imps</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534284"><span class="hs-identifier hs-var">imps</span></a></span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span class="hs-comment">-- | Is this a record field GRE?</span><span>
</span><span id="line-1457"></span><span class="hs-comment">--</span><span>
</span><span id="line-1458"></span><span class="hs-comment">-- Important: does /not/ consult the 'GreInfo' field.</span><span>
</span><span id="line-1459"></span><span id="local-6989586621682534287"><span class="annot"><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-type">isRecFldGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682534287"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1460"></span><span id="isRecFldGRE"><span class="annot"><span class="annottext">isRecFldGRE :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-var hs-var">isRecFldGRE</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_name :: forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var">gre_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534288"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534288"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isFieldName"><span class="hs-identifier hs-var">isFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534288"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-1461"></span><span>
</span><span id="line-1462"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isDuplicateRecFldGRE"><span class="hs-identifier hs-type">isDuplicateRecFldGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1463"></span><span class="annot"><span class="hs-comment">-- ^ Is this a record field defined with DuplicateRecordFields?</span></span><span>
</span><span id="line-1464"></span><span id="isDuplicateRecFldGRE"><span class="annot"><span class="annottext">isDuplicateRecFldGRE :: GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isDuplicateRecFldGRE"><span class="hs-identifier hs-var hs-var">isDuplicateRecFldGRE</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1465"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; (FieldLabel -&gt; Bool) -&gt; Maybe FieldLabel -&gt; Bool
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">DuplicateRecordFields
</span><a href="GHC.Types.FieldLabel.html#DuplicateRecordFields"><span class="hs-identifier hs-var">DuplicateRecordFields</span></a></span><span> </span><span class="annot"><span class="annottext">DuplicateRecordFields -&gt; DuplicateRecordFields -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(DuplicateRecordFields -&gt; Bool)
-&gt; (FieldLabel -&gt; DuplicateRecordFields) -&gt; FieldLabel -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; DuplicateRecordFields
</span><a href="GHC.Types.FieldLabel.html#flHasDuplicateRecordFields"><span class="hs-identifier hs-var">flHasDuplicateRecordFields</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe FieldLabel -&gt; Bool)
-&gt; (GlobalRdrElt -&gt; Maybe FieldLabel) -&gt; GlobalRdrElt -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe FieldLabel
</span><a href="GHC.Types.Name.Reader.html#greFieldLabel_maybe"><span class="hs-identifier hs-var">greFieldLabel_maybe</span></a></span><span>
</span><span id="line-1466"></span><span>
</span><span id="line-1467"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isNoFieldSelectorGRE"><span class="hs-identifier hs-type">isNoFieldSelectorGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1468"></span><span class="hs-comment">-- ^ Is this a record field defined with NoFieldSelectors?</span><span>
</span><span id="line-1469"></span><span class="hs-comment">-- (See Note [NoFieldSelectors] in GHC.Rename.Env)</span><span>
</span><span id="line-1470"></span><span id="isNoFieldSelectorGRE"><span class="annot"><span class="annottext">isNoFieldSelectorGRE :: GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isNoFieldSelectorGRE"><span class="hs-identifier hs-var hs-var">isNoFieldSelectorGRE</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1471"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; (FieldLabel -&gt; Bool) -&gt; Maybe FieldLabel -&gt; Bool
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldSelectors
</span><a href="GHC.Types.FieldLabel.html#NoFieldSelectors"><span class="hs-identifier hs-var">NoFieldSelectors</span></a></span><span> </span><span class="annot"><span class="annottext">FieldSelectors -&gt; FieldSelectors -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldSelectors -&gt; Bool)
-&gt; (FieldLabel -&gt; FieldSelectors) -&gt; FieldLabel -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; FieldSelectors
</span><a href="GHC.Types.FieldLabel.html#flHasFieldSelector"><span class="hs-identifier hs-var">flHasFieldSelector</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe FieldLabel -&gt; Bool)
-&gt; (GlobalRdrElt -&gt; Maybe FieldLabel) -&gt; GlobalRdrElt -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe FieldLabel
</span><a href="GHC.Types.Name.Reader.html#greFieldLabel_maybe"><span class="hs-identifier hs-var">greFieldLabel_maybe</span></a></span><span>
</span><span id="line-1472"></span><span>
</span><span id="line-1473"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isFieldSelectorGRE"><span class="hs-identifier hs-type">isFieldSelectorGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1474"></span><span class="hs-comment">-- ^ Is this a record field defined with FieldSelectors?</span><span>
</span><span id="line-1475"></span><span class="hs-comment">-- (See Note [NoFieldSelectors] in GHC.Rename.Env)</span><span>
</span><span id="line-1476"></span><span id="isFieldSelectorGRE"><span class="annot"><span class="annottext">isFieldSelectorGRE :: GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isFieldSelectorGRE"><span class="hs-identifier hs-var hs-var">isFieldSelectorGRE</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1477"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; (FieldLabel -&gt; Bool) -&gt; Maybe FieldLabel -&gt; Bool
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldSelectors
</span><a href="GHC.Types.FieldLabel.html#FieldSelectors"><span class="hs-identifier hs-var">FieldSelectors</span></a></span><span> </span><span class="annot"><span class="annottext">FieldSelectors -&gt; FieldSelectors -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldSelectors -&gt; Bool)
-&gt; (FieldLabel -&gt; FieldSelectors) -&gt; FieldLabel -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; FieldSelectors
</span><a href="GHC.Types.FieldLabel.html#flHasFieldSelector"><span class="hs-identifier hs-var">flHasFieldSelector</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe FieldLabel -&gt; Bool)
-&gt; (GlobalRdrElt -&gt; Maybe FieldLabel) -&gt; GlobalRdrElt -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe FieldLabel
</span><a href="GHC.Types.Name.Reader.html#greFieldLabel_maybe"><span class="hs-identifier hs-var">greFieldLabel_maybe</span></a></span><span>
</span><span id="line-1478"></span><span>
</span><span id="line-1479"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#greFieldLabel_maybe"><span class="hs-identifier hs-type">greFieldLabel_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span>
</span><span id="line-1480"></span><span class="annot"><span class="hs-comment">-- ^ Returns the field label of this GRE, if it has one</span></span><span>
</span><span id="line-1481"></span><span id="greFieldLabel_maybe"><span class="annot"><span class="annottext">greFieldLabel_maybe :: GlobalRdrElt -&gt; Maybe FieldLabel
</span><a href="GHC.Types.Name.Reader.html#greFieldLabel_maybe"><span class="hs-identifier hs-var hs-var">greFieldLabel_maybe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; FieldLabel)
-&gt; Maybe GlobalRdrElt -&gt; Maybe FieldLabel
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; GlobalRdrElt -&gt; FieldLabel
GlobalRdrElt -&gt; FieldLabel
</span><a href="GHC.Types.Name.Reader.html#fieldGRELabel"><span class="hs-identifier hs-var">fieldGRELabel</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe GlobalRdrElt -&gt; Maybe FieldLabel)
-&gt; (GlobalRdrElt -&gt; Maybe GlobalRdrElt)
-&gt; GlobalRdrElt
-&gt; Maybe FieldLabel
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#fieldGRE_maybe"><span class="hs-identifier hs-var">fieldGRE_maybe</span></a></span><span>
</span><span id="line-1482"></span><span>
</span><span id="line-1483"></span><span id="local-6989586621682534294"><span class="annot"><a href="GHC.Types.Name.Reader.html#unQualOK"><span class="hs-identifier hs-type">unQualOK</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682534294"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1484"></span><span class="annot"><span class="hs-comment">-- ^ Test if an unqualified version of this thing would be in scope</span></span><span>
</span><span id="line-1485"></span><span id="unQualOK"><span class="annot"><span class="annottext">unQualOK :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#unQualOK"><span class="hs-identifier hs-var hs-var">unQualOK</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534296"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534296"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534297"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534297"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1486"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534296"><span class="hs-identifier hs-var">lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1487"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ImportSpec -&gt; Bool) -&gt; Bag ImportSpec -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#unQualSpecOK"><span class="hs-identifier hs-var">unQualSpecOK</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534297"><span class="hs-identifier hs-var">iss</span></a></span><span>
</span><span id="line-1488"></span><span>
</span><span id="line-1489"></span><span class="hs-comment">{- Note [GRE filtering]
~~~~~~~~~~~~~~~~~~~~~~~
(pickGREs rdr gres) takes a list of GREs which have the same OccName
as 'rdr', say &quot;x&quot;.  It does two things:

(a) filters the GREs to a subset that are in scope
    * Qualified,   as 'M.x'  if want_qual    is Qual M _
    * Unqualified, as 'x'    if want_unqual  is Unqual _

(b) for that subset, filter the provenance field (gre_lcl and gre_imp)
    to ones that brought it into scope qualified or unqualified resp.

Example:
      module A ( f ) where
      import qualified Foo( f )
      import Baz( f )
      f = undefined

Let's suppose that Foo.f and Baz.f are the same entity really, but the local
'f' is different, so there will be two GREs matching &quot;f&quot;:
   gre1:  gre_lcl = True,  gre_imp = []
   gre2:  gre_lcl = False, gre_imp = [ imported from Foo, imported from Bar ]

The use of &quot;f&quot; in the export list is ambiguous because it's in scope
from the local def and the import Baz(f); but *not* the import qualified Foo.
pickGREs returns two GRE
   gre1:   gre_lcl = True,  gre_imp = []
   gre2:   gre_lcl = False, gre_imp = [ imported from Bar ]

Now the &quot;ambiguous occurrence&quot; message can correctly report how the
ambiguity arises.
-}</span><span>
</span><span id="line-1521"></span><span>
</span><span id="line-1522"></span><span id="local-6989586621682532978"><span class="annot"><a href="GHC.Types.Name.Reader.html#pickGREs"><span class="hs-identifier hs-type">pickGREs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532978"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532978"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1523"></span><span class="hs-comment">-- ^ Takes a list of GREs which have the right OccName 'x'</span><span>
</span><span id="line-1524"></span><span class="hs-comment">-- Pick those GREs that are in scope</span><span>
</span><span id="line-1525"></span><span class="hs-comment">--    * Qualified,   as 'M.x'  if want_qual    is Qual M _</span><span>
</span><span id="line-1526"></span><span class="hs-comment">--    * Unqualified, as 'x'    if want_unqual  is Unqual _</span><span>
</span><span id="line-1527"></span><span class="hs-comment">--</span><span>
</span><span id="line-1528"></span><span class="hs-comment">-- Return each such GRE, with its ImportSpecs filtered, to reflect</span><span>
</span><span id="line-1529"></span><span class="hs-comment">-- how it is in scope qualified or unqualified respectively.</span><span>
</span><span id="line-1530"></span><span class="hs-comment">-- See Note [GRE filtering]</span><span>
</span><span id="line-1531"></span><span id="pickGREs"><span class="annot"><span class="annottext">pickGREs :: forall info.
RdrName -&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#pickGREs"><span class="hs-identifier hs-var hs-var">pickGREs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span id="local-6989586621682534299"><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534299"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info))
-&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
forall info. GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#pickUnqualGRE"><span class="hs-identifier hs-var">pickUnqualGRE</span></a></span><span>     </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534299"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-1532"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#pickGREs"><span class="hs-identifier hs-var">pickGREs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682534302"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534302"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682534303"><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534303"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info))
-&gt; [GlobalRdrEltX info] -&gt; [GlobalRdrEltX info]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
forall info.
ModuleName -&gt; GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#pickQualGRE"><span class="hs-identifier hs-var">pickQualGRE</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534302"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534303"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-1533"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#pickGREs"><span class="hs-identifier hs-var">pickGREs</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>            </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- I don't think this actually happens</span><span>
</span><span id="line-1534"></span><span>
</span><span id="line-1535"></span><span id="local-6989586621682533007"><span class="annot"><a href="GHC.Types.Name.Reader.html#pickUnqualGRE"><span class="hs-identifier hs-type">pickUnqualGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533007"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533007"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1536"></span><span id="pickUnqualGRE"><span class="annot"><span class="annottext">pickUnqualGRE :: forall info. GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#pickUnqualGRE"><span class="hs-identifier hs-var hs-var">pickUnqualGRE</span></a></span></span><span> </span><span id="local-6989586621682534306"><span class="annot"><span class="annottext">gre :: GlobalRdrEltX info
</span><a href="#local-6989586621682534306"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534307"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534307"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534308"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534308"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1537"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534307"><span class="hs-identifier hs-var">lcl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; Bool
forall a. Bag a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534310"><span class="hs-identifier hs-var">iss'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GlobalRdrEltX info)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1538"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534306"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682534310"><span class="hs-identifier hs-type">iss'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1539"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1540"></span><span>    </span><span id="local-6989586621682534310"><span class="annot"><span class="annottext">iss' :: Bag ImportSpec
</span><a href="#local-6989586621682534310"><span class="hs-identifier hs-var hs-var">iss'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ImportSpec -&gt; Bool) -&gt; Bag ImportSpec -&gt; Bag ImportSpec
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#filterBag"><span class="hs-identifier hs-var">filterBag</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#unQualSpecOK"><span class="hs-identifier hs-var">unQualSpecOK</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534308"><span class="hs-identifier hs-var">iss</span></a></span><span>
</span><span id="line-1541"></span><span>
</span><span id="line-1542"></span><span id="local-6989586621682533008"><span class="annot"><a href="GHC.Types.Name.Reader.html#pickQualGRE"><span class="hs-identifier hs-type">pickQualGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533008"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533008"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1543"></span><span id="pickQualGRE"><span class="annot"><span class="annottext">pickQualGRE :: forall info.
ModuleName -&gt; GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#pickQualGRE"><span class="hs-identifier hs-var hs-var">pickQualGRE</span></a></span></span><span> </span><span id="local-6989586621682534314"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534314"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682534315"><span class="annot"><span class="annottext">gre :: GlobalRdrEltX info
</span><a href="#local-6989586621682534315"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534316"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534316"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534317"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534317"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1544"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534318"><span class="hs-identifier hs-var">lcl'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; Bool
forall a. Bag a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534319"><span class="hs-identifier hs-var">iss'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GlobalRdrEltX info)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1545"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534315"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682534318"><span class="hs-identifier hs-type">lcl'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682534319"><span class="hs-identifier hs-type">iss'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1546"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1547"></span><span>    </span><span id="local-6989586621682534319"><span class="annot"><span class="annottext">iss' :: Bag ImportSpec
</span><a href="#local-6989586621682534319"><span class="hs-identifier hs-var hs-var">iss'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ImportSpec -&gt; Bool) -&gt; Bag ImportSpec -&gt; Bag ImportSpec
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#filterBag"><span class="hs-identifier hs-var">filterBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; ImportSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#qualSpecOK"><span class="hs-identifier hs-var">qualSpecOK</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534314"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534317"><span class="hs-identifier hs-var">iss</span></a></span><span>
</span><span id="line-1548"></span><span>    </span><span id="local-6989586621682534318"><span class="annot"><span class="annottext">lcl' :: Bool
</span><a href="#local-6989586621682534318"><span class="hs-identifier hs-var hs-var">lcl'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534316"><span class="hs-identifier hs-var">lcl</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Bool
</span><a href="#local-6989586621682534320"><span class="hs-identifier hs-var">name_is_from</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534314"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-1549"></span><span>
</span><span id="line-1550"></span><span>    </span><span class="annot"><a href="#local-6989586621682534320"><span class="hs-identifier hs-type">name_is_from</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1551"></span><span>    </span><span id="local-6989586621682534320"><span class="annot"><span class="annottext">name_is_from :: ModuleName -&gt; Bool
</span><a href="#local-6989586621682534320"><span class="hs-identifier hs-var hs-var">name_is_from</span></a></span></span><span> </span><span id="local-6989586621682534321"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534321"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Maybe Module
forall info. GlobalRdrEltX info -&gt; Maybe Module
</span><a href="GHC.Types.Name.Reader.html#greDefinitionModule"><span class="hs-identifier hs-var">greDefinitionModule</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534315"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1552"></span><span>                         </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682534322"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682534322"><span class="hs-identifier hs-var">n_mod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682534322"><span class="hs-identifier hs-var">n_mod</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534321"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-1553"></span><span>                         </span><span class="annot"><span class="annottext">Maybe Module
</span><span class="hs-identifier hs-var">Nothing</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1554"></span><span>
</span><span id="line-1555"></span><span id="local-6989586621682533013"><span class="annot"><a href="GHC.Types.Name.Reader.html#pickGREsModExp"><span class="hs-identifier hs-type">pickGREsModExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533013"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533013"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533013"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-1556"></span><span class="hs-comment">-- ^ Pick GREs that are in scope *both* qualified *and* unqualified</span><span>
</span><span id="line-1557"></span><span class="hs-comment">-- Return each GRE that is, as a pair</span><span>
</span><span id="line-1558"></span><span class="hs-comment">--    (qual_gre, unqual_gre)</span><span>
</span><span id="line-1559"></span><span class="hs-comment">-- These two GREs are the original GRE with imports filtered to express how</span><span>
</span><span id="line-1560"></span><span class="hs-comment">-- it is in scope qualified an unqualified respectively</span><span>
</span><span id="line-1561"></span><span class="hs-comment">--</span><span>
</span><span id="line-1562"></span><span class="hs-comment">-- Used only for the 'module M' item in export list;</span><span>
</span><span id="line-1563"></span><span class="hs-comment">--   see 'GHC.Tc.Gen.Export.exports_from_avail'</span><span>
</span><span id="line-1564"></span><span id="pickGREsModExp"><span class="annot"><span class="annottext">pickGREsModExp :: forall info.
ModuleName
-&gt; [GlobalRdrEltX info]
-&gt; [(GlobalRdrEltX info, GlobalRdrEltX info)]
</span><a href="GHC.Types.Name.Reader.html#pickGREsModExp"><span class="hs-identifier hs-var hs-var">pickGREsModExp</span></a></span></span><span> </span><span id="local-6989586621682534323"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534323"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682534324"><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534324"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEltX info
 -&gt; Maybe (GlobalRdrEltX info, GlobalRdrEltX info))
-&gt; [GlobalRdrEltX info]
-&gt; [(GlobalRdrEltX info, GlobalRdrEltX info)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName
-&gt; GlobalRdrEltX info
-&gt; Maybe (GlobalRdrEltX info, GlobalRdrEltX info)
forall info.
ModuleName
-&gt; GlobalRdrEltX info
-&gt; Maybe (GlobalRdrEltX info, GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#pickBothGRE"><span class="hs-identifier hs-var">pickBothGRE</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534323"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX info]
</span><a href="#local-6989586621682534324"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-1565"></span><span>
</span><span id="line-1566"></span><span class="hs-comment">-- | isBuiltInSyntax filter out names for built-in syntax They</span><span>
</span><span id="line-1567"></span><span class="hs-comment">-- just clutter up the environment (esp tuples), and the</span><span>
</span><span id="line-1568"></span><span class="hs-comment">-- parser will generate Exact RdrNames for them, so the</span><span>
</span><span id="line-1569"></span><span class="hs-comment">-- cluttered envt is no use.  Really, it's only useful for</span><span>
</span><span id="line-1570"></span><span class="hs-comment">-- GHC.Base and GHC.Tuple.</span><span>
</span><span id="line-1571"></span><span id="local-6989586621682533015"><span class="annot"><a href="GHC.Types.Name.Reader.html#pickBothGRE"><span class="hs-identifier hs-type">pickBothGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533015"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533015"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682533015"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1572"></span><span id="pickBothGRE"><span class="annot"><span class="annottext">pickBothGRE :: forall info.
ModuleName
-&gt; GlobalRdrEltX info
-&gt; Maybe (GlobalRdrEltX info, GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#pickBothGRE"><span class="hs-identifier hs-var hs-var">pickBothGRE</span></a></span></span><span> </span><span id="local-6989586621682534326"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534326"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682534327"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534327"><span class="hs-identifier hs-var">gre</span></a></span></span><span>
</span><span id="line-1573"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isBuiltInSyntax"><span class="hs-identifier hs-var">isBuiltInSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534327"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1574"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GlobalRdrEltX info, GlobalRdrEltX info)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1575"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682534329"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534329"><span class="hs-identifier hs-var">gre1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
forall info.
ModuleName -&gt; GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#pickQualGRE"><span class="hs-identifier hs-var">pickQualGRE</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534326"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534327"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1576"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682534330"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534330"><span class="hs-identifier hs-var">gre2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
forall info. GlobalRdrEltX info -&gt; Maybe (GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#pickUnqualGRE"><span class="hs-identifier hs-var">pickUnqualGRE</span></a></span><span>   </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534327"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1577"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEltX info, GlobalRdrEltX info)
-&gt; Maybe (GlobalRdrEltX info, GlobalRdrEltX info)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534329"><span class="hs-identifier hs-var">gre1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534330"><span class="hs-identifier hs-var">gre2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1578"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1579"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GlobalRdrEltX info, GlobalRdrEltX info)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1580"></span><span>
</span><span id="line-1581"></span><span class="hs-comment">-- Building GlobalRdrEnvs</span><span>
</span><span id="line-1582"></span><span>
</span><span id="line-1583"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#plusGlobalRdrEnv"><span class="hs-identifier hs-type">plusGlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span>
</span><span id="line-1584"></span><span id="plusGlobalRdrEnv"><span class="annot"><span class="annottext">plusGlobalRdrEnv :: GlobalRdrEnv -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#plusGlobalRdrEnv"><span class="hs-identifier hs-var hs-var">plusGlobalRdrEnv</span></a></span></span><span> </span><span id="local-6989586621682534331"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534331"><span class="hs-identifier hs-var">env1</span></a></span></span><span> </span><span id="local-6989586621682534332"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534332"><span class="hs-identifier hs-var">env2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([GlobalRdrElt] -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt])
-&gt; GlobalRdrEnv -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
forall a. (a -&gt; a -&gt; a) -&gt; OccEnv a -&gt; OccEnv a -&gt; OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#plusOccEnv_C"><span class="hs-identifier hs-var">plusOccEnv_C</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt])
-&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#insertGRE"><span class="hs-identifier hs-var">insertGRE</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534331"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534332"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-1585"></span><span>
</span><span id="line-1586"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#mkGlobalRdrEnv"><span class="hs-identifier hs-type">mkGlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span>
</span><span id="line-1587"></span><span id="mkGlobalRdrEnv"><span class="annot"><span class="annottext">mkGlobalRdrEnv :: [GlobalRdrElt] -&gt; GlobalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#mkGlobalRdrEnv"><span class="hs-identifier hs-var hs-var">mkGlobalRdrEnv</span></a></span></span><span> </span><span id="local-6989586621682534334"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534334"><span class="hs-identifier hs-var">gres</span></a></span></span><span>
</span><span id="line-1588"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv)
-&gt; GlobalRdrEnv -&gt; [GlobalRdrElt] -&gt; GlobalRdrEnv
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
</span><a href="#local-6989586621682534335"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
forall info. GlobalRdrEnvX info
</span><a href="GHC.Types.Name.Reader.html#emptyGlobalRdrEnv"><span class="hs-identifier hs-var">emptyGlobalRdrEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534334"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-1589"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1590"></span><span>    </span><span id="local-6989586621682534335"><span class="annot"><span class="annottext">add :: GlobalRdrElt -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
</span><a href="#local-6989586621682534335"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621682534336"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534336"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span id="local-6989586621682534337"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534337"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt])
-&gt; (GlobalRdrElt -&gt; [GlobalRdrElt])
-&gt; GlobalRdrEnv
-&gt; OccName
-&gt; GlobalRdrElt
-&gt; GlobalRdrEnv
forall a b.
(a -&gt; b -&gt; b) -&gt; (a -&gt; b) -&gt; OccEnv b -&gt; OccName -&gt; a -&gt; OccEnv b
</span><a href="GHC.Types.Name.Occurrence.html#extendOccEnv_Acc"><span class="hs-identifier hs-var">extendOccEnv_Acc</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#insertGRE"><span class="hs-identifier hs-var">insertGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [GlobalRdrElt]
forall a. a -&gt; [a]
</span><a href="GHC.Utils.Misc.html#singleton"><span class="hs-identifier hs-var">Utils.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534337"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-1591"></span><span>                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534336"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1592"></span><span>                                   </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534336"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1593"></span><span>
</span><span id="line-1594"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#insertGRE"><span class="hs-identifier hs-type">insertGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1595"></span><span id="insertGRE"><span class="annot"><span class="annottext">insertGRE :: GlobalRdrElt -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#insertGRE"><span class="hs-identifier hs-var hs-var">insertGRE</span></a></span></span><span> </span><span id="local-6989586621682534340"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534340"><span class="hs-identifier hs-var">new_g</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534340"><span class="hs-identifier hs-var">new_g</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1596"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#insertGRE"><span class="hs-identifier hs-var">insertGRE</span></a></span><span> </span><span id="local-6989586621682534341"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534341"><span class="hs-identifier hs-var">new_g</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682534342"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534342"><span class="hs-identifier hs-var">old_g</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682534343"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534343"><span class="hs-identifier hs-var">old_gs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1597"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534341"><span class="hs-identifier hs-var">new_g</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534342"><span class="hs-identifier hs-var">old_g</span></a></span><span>
</span><span id="line-1598"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534341"><span class="hs-identifier hs-var">new_g</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; GlobalRdrElt -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#plusGRE"><span class="hs-operator hs-var">`plusGRE`</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534342"><span class="hs-identifier hs-var">old_g</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534343"><span class="hs-identifier hs-var">old_gs</span></a></span><span>
</span><span id="line-1599"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1600"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534342"><span class="hs-identifier hs-var">old_g</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#insertGRE"><span class="hs-identifier hs-var">insertGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534341"><span class="hs-identifier hs-var">new_g</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534343"><span class="hs-identifier hs-var">old_gs</span></a></span><span>
</span><span id="line-1601"></span><span>
</span><span id="line-1602"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#plusGRE"><span class="hs-identifier hs-type">plusGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-1603"></span><span class="hs-comment">-- Used when the gre_name fields match</span><span>
</span><span id="line-1604"></span><span id="plusGRE"><span class="annot"><span class="annottext">plusGRE :: GlobalRdrElt -&gt; GlobalRdrElt -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#plusGRE"><span class="hs-identifier hs-var hs-var">plusGRE</span></a></span></span><span> </span><span id="local-6989586621682534344"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534344"><span class="hs-identifier hs-var">g1</span></a></span></span><span> </span><span id="local-6989586621682534345"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534345"><span class="hs-identifier hs-var">g2</span></a></span></span><span>
</span><span id="line-1605"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_name :: Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var">gre_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var">gre_name</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534344"><span class="hs-identifier hs-var">g1</span></a></span><span>
</span><span id="line-1606"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534344"><span class="hs-identifier hs-var">g1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534345"><span class="hs-identifier hs-var">g2</span></a></span><span>
</span><span id="line-1607"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bag ImportSpec
forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534344"><span class="hs-identifier hs-var">g1</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; Bag ImportSpec -&gt; Bag ImportSpec
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bag ImportSpec
forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534345"><span class="hs-identifier hs-var">g2</span></a></span><span>
</span><span id="line-1608"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_par :: Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Parent
forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534344"><span class="hs-identifier hs-var">g1</span></a></span><span> </span><span class="annot"><span class="annottext">Parent -&gt; Parent -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#plusParent"><span class="hs-operator hs-var">`plusParent`</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Parent
forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#gre_par"><span class="hs-identifier hs-var">gre_par</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534345"><span class="hs-identifier hs-var">g2</span></a></span><span>
</span><span id="line-1609"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_info :: GREInfo
</span><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; GREInfo
forall info. GlobalRdrEltX info -&gt; info
</span><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534344"><span class="hs-identifier hs-var">g1</span></a></span><span> </span><span class="annot"><span class="annottext">GREInfo -&gt; GREInfo -&gt; GREInfo
</span><a href="GHC.Types.GREInfo.html#plusGREInfo"><span class="hs-operator hs-var">`plusGREInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; GREInfo
forall info. GlobalRdrEltX info -&gt; info
</span><a href="GHC.Types.Name.Reader.html#gre_info"><span class="hs-identifier hs-var">gre_info</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534345"><span class="hs-identifier hs-var">g2</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1610"></span><span>
</span><span id="line-1611"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#transformGREs"><span class="hs-identifier hs-type">transformGREs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1612"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1613"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span>
</span><span id="line-1614"></span><span class="annot"><span class="hs-comment">-- ^ Apply a transformation function to the GREs for these OccNames</span></span><span>
</span><span id="line-1615"></span><span id="transformGREs"><span class="annot"><span class="annottext">transformGREs :: (GlobalRdrElt -&gt; GlobalRdrElt)
-&gt; [OccName] -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#transformGREs"><span class="hs-identifier hs-var hs-var">transformGREs</span></a></span></span><span> </span><span id="local-6989586621682534346"><span class="annot"><span class="annottext">GlobalRdrElt -&gt; GlobalRdrElt
</span><a href="#local-6989586621682534346"><span class="hs-identifier hs-var">trans_gre</span></a></span></span><span> </span><span id="local-6989586621682534347"><span class="annot"><span class="annottext">[OccName]
</span><a href="#local-6989586621682534347"><span class="hs-identifier hs-var">occs</span></a></span></span><span> </span><span id="local-6989586621682534348"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534348"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span>
</span><span id="line-1616"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv)
-&gt; GlobalRdrEnv -&gt; [OccName] -&gt; GlobalRdrEnv
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
</span><a href="#local-6989586621682534349"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534348"><span class="hs-identifier hs-var">rdr_env</span></a></span><span> </span><span class="annot"><span class="annottext">[OccName]
</span><a href="#local-6989586621682534347"><span class="hs-identifier hs-var">occs</span></a></span><span>
</span><span id="line-1617"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1618"></span><span>    </span><span id="local-6989586621682534349"><span class="annot"><span class="annottext">trans :: OccName -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
</span><a href="#local-6989586621682534349"><span class="hs-identifier hs-var hs-var">trans</span></a></span></span><span> </span><span id="local-6989586621682534350"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534350"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span id="local-6989586621682534351"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534351"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-1619"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; OccName -&gt; Maybe [GlobalRdrElt]
forall a. OccEnv a -&gt; OccName -&gt; Maybe a
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv"><span class="hs-identifier hs-var">lookupOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534351"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534350"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1620"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682534352"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534352"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; OccName -&gt; [GlobalRdrElt] -&gt; GlobalRdrEnv
forall a. OccEnv a -&gt; OccName -&gt; a -&gt; OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#extendOccEnv"><span class="hs-identifier hs-var">extendOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534351"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682534350"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; GlobalRdrElt) -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; GlobalRdrElt
</span><a href="#local-6989586621682534346"><span class="hs-identifier hs-var">trans_gre</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534352"><span class="hs-identifier hs-var">gres</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1621"></span><span>           </span><span class="annot"><span class="annottext">Maybe [GlobalRdrElt]
</span><span class="hs-identifier hs-var">Nothing</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534351"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-1622"></span><span>
</span><span id="line-1623"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#extendGlobalRdrEnv"><span class="hs-identifier hs-type">extendGlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span>
</span><span id="line-1624"></span><span id="extendGlobalRdrEnv"><span class="annot"><span class="annottext">extendGlobalRdrEnv :: GlobalRdrEnv -&gt; GlobalRdrElt -&gt; GlobalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#extendGlobalRdrEnv"><span class="hs-identifier hs-var hs-var">extendGlobalRdrEnv</span></a></span></span><span> </span><span id="local-6989586621682534353"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534353"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682534354"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534354"><span class="hs-identifier hs-var">gre</span></a></span></span><span>
</span><span id="line-1625"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt])
-&gt; (GlobalRdrElt -&gt; [GlobalRdrElt])
-&gt; GlobalRdrEnv
-&gt; OccName
-&gt; GlobalRdrElt
-&gt; GlobalRdrEnv
forall a b.
(a -&gt; b -&gt; b) -&gt; (a -&gt; b) -&gt; OccEnv b -&gt; OccName -&gt; a -&gt; OccEnv b
</span><a href="GHC.Types.Name.Occurrence.html#extendOccEnv_Acc"><span class="hs-identifier hs-var">extendOccEnv_Acc</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#insertGRE"><span class="hs-identifier hs-var">insertGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [GlobalRdrElt]
forall a. a -&gt; [a]
</span><a href="GHC.Utils.Misc.html#singleton"><span class="hs-identifier hs-var">Utils.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534353"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-1626"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534354"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534354"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1627"></span><span>
</span><span id="line-1628"></span><span class="hs-comment">{- Note [GlobalRdrEnv shadowing]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Before adding new names to the GlobalRdrEnv we nuke some existing entries;
this is &quot;shadowing&quot;.  The actual work is done by GHC.Types.Name.Reader.shadowNames.
Suppose

   env' = shadowNames env { f } `extendGlobalRdrEnv` { M.f }

Then:
   * Looking up (Unqual f) in env' should succeed, returning M.f,
     even if env contains existing unqualified bindings for f.
     They are shadowed

   * Looking up (Qual M.f) in env' should succeed, returning M.f

   * Looking up (Qual X.f) in env', where X /= M, should be the same as
     looking up (Qual X.f) in env.

     That is, shadowNames does /not/ delete earlier qualified bindings

There are two reasons for shadowing:

* The GHCi REPL

  - Ids bought into scope on the command line (eg let x = True) have
    External Names, like Ghci4.x.  We want a new binding for 'x' (say)
    to override the existing binding for 'x'.  Example:

           ghci&gt; :load M    -- Brings `x` and `M.x` into scope
           ghci&gt; x
           ghci&gt; &quot;Hello&quot;
           ghci&gt; M.x
           ghci&gt; &quot;hello&quot;
           ghci&gt; let x = True  -- Shadows `x`
           ghci&gt; x             -- The locally bound `x`
                               -- NOT an ambiguous reference
           ghci&gt; True
           ghci&gt; M.x           -- M.x is still in scope!
           ghci&gt; &quot;Hello&quot;

    So when we add `x = True` we must not delete the `M.x` from the
    `GlobalRdrEnv`; rather we just want to make it &quot;qualified only&quot;;
    hence the `set_qual` in `shadowNames`.  See also Note
    [Interactively-bound Ids in GHCi] in GHC.Runtime.Context

  - Data types also have External Names, like Ghci4.T; but we still want
    'T' to mean the newly-declared 'T', not an old one.

* Nested Template Haskell declaration brackets
  See Note [Top-level Names in Template Haskell decl quotes] in GHC.Rename.Names

  Consider a TH decl quote:
      module M where
        f x = h [d| f = ...f...M.f... |]
  We must shadow the outer unqualified binding of 'f', else we'll get
  a complaint when extending the GlobalRdrEnv, saying that there are
  two bindings for 'f'.  There are several tricky points:

    - This shadowing applies even if the binding for 'f' is in a
      where-clause, and hence is in the *local* RdrEnv not the *global*
      RdrEnv.  This is done in lcl_env_TH in extendGlobalRdrEnvRn.

    - The External Name M.f from the enclosing module must certainly
      still be available.  So we don't nuke it entirely; we just make
      it seem like qualified import.

    - We only shadow *External* names (which come from the main module),
      or from earlier GHCi commands. Do not shadow *Internal* names
      because in the bracket
          [d| class C a where f :: a
              f = 4 |]
      rnSrcDecls will first call extendGlobalRdrEnvRn with C[f] from the
      class decl, and *separately* extend the envt with the value binding.
      At that stage, the class op 'f' will have an Internal name.

Wrinkle [Shadowing namespaces]

  In the following GHCi session:

    &gt; data A = MkA { foo :: Int }
    &gt; foo = False
    &gt; bar = foo

  We expect the variable 'foo' to shadow the record field 'foo', even though
  they are in separate namespaces, so that the occurrence of 'foo' in the body
  of 'bar' is not ambiguous.

-}</span><span>
</span><span id="line-1716"></span><span>
</span><span id="line-1717"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#shadowNames"><span class="hs-identifier hs-type">shadowNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ discard names that are only available qualified?</span></span><span>
</span><span id="line-1718"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span>
</span><span id="line-1719"></span><span class="hs-comment">-- Remove certain old GREs that share the same OccName as this new Name.</span><span>
</span><span id="line-1720"></span><span class="hs-comment">-- See Note [GlobalRdrEnv shadowing] for details</span><span>
</span><span id="line-1721"></span><span id="shadowNames"><span class="annot"><span class="annottext">shadowNames :: Bool -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#shadowNames"><span class="hs-identifier hs-var hs-var">shadowNames</span></a></span></span><span> </span><span id="local-6989586621682534355"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534355"><span class="hs-identifier hs-var">drop_only_qualified</span></a></span></span><span> </span><span id="local-6989586621682534356"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534356"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682534357"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534357"><span class="hs-identifier hs-var">new_gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UniqFM NameSpace [GlobalRdrElt]
 -&gt; UniqFM NameSpace [GlobalRdrElt]
 -&gt; UniqFM NameSpace [GlobalRdrElt])
-&gt; GlobalRdrEnv -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
forall a b.
(UniqFM NameSpace a -&gt; UniqFM NameSpace b -&gt; UniqFM NameSpace a)
-&gt; OccEnv a -&gt; OccEnv b -&gt; OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#minusOccEnv_C_Ns"><span class="hs-identifier hs-var">minusOccEnv_C_Ns</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM NameSpace [GlobalRdrElt]
-&gt; UniqFM NameSpace [GlobalRdrElt]
-&gt; UniqFM NameSpace [GlobalRdrElt]
</span><a href="#local-6989586621682534359"><span class="hs-identifier hs-var">do_shadowing</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534356"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682534357"><span class="hs-identifier hs-var">new_gres</span></a></span><span>
</span><span id="line-1722"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1723"></span><span>
</span><span id="line-1724"></span><span>    </span><span class="annot"><a href="#local-6989586621682534359"><span class="hs-identifier hs-type">do_shadowing</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1725"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1726"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1727"></span><span>    </span><span id="local-6989586621682534359"><span class="annot"><span class="annottext">do_shadowing :: UniqFM NameSpace [GlobalRdrElt]
-&gt; UniqFM NameSpace [GlobalRdrElt]
-&gt; UniqFM NameSpace [GlobalRdrElt]
</span><a href="#local-6989586621682534359"><span class="hs-identifier hs-var hs-var">do_shadowing</span></a></span></span><span> </span><span id="local-6989586621682534360"><span class="annot"><span class="annottext">UniqFM NameSpace [GlobalRdrElt]
</span><a href="#local-6989586621682534360"><span class="hs-identifier hs-var">olds</span></a></span></span><span> </span><span id="local-6989586621682534361"><span class="annot"><span class="annottext">UniqFM NameSpace [GlobalRdrElt]
</span><a href="#local-6989586621682534361"><span class="hs-identifier hs-var">news</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1728"></span><span>      </span><span class="hs-comment">-- Start off by accumulating all 'NameSpace's shadowed</span><span>
</span><span id="line-1729"></span><span>      </span><span class="hs-comment">-- by the entire collection of new GREs.</span><span>
</span><span id="line-1730"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621682534362"><span class="hs-identifier hs-type">shadowed_gres</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-type">ShadowedGREs</span></a></span><span>
</span><span id="line-1731"></span><span>          </span><span id="local-6989586621682534362"><span class="annot"><span class="annottext">shadowed_gres :: ShadowedGREs
</span><a href="#local-6989586621682534362"><span class="hs-identifier hs-var hs-var">shadowed_gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1732"></span><span>            </span><span class="annot"><span class="annottext">([GlobalRdrElt] -&gt; ShadowedGREs -&gt; ShadowedGREs)
-&gt; ShadowedGREs -&gt; UniqFM NameSpace [GlobalRdrElt] -&gt; ShadowedGREs
forall {k} elt a (key :: k).
(elt -&gt; a -&gt; a) -&gt; a -&gt; UniqFM key elt -&gt; a
</span><a href="GHC.Types.Unique.FM.html#nonDetFoldUFM"><span class="hs-identifier hs-var">nonDetFoldUFM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682534364"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534364"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span id="local-6989586621682534365"><span class="annot"><span class="annottext">ShadowedGREs
</span><a href="#local-6989586621682534365"><span class="hs-identifier hs-var">shads</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; ShadowedGREs) -&gt; [GlobalRdrElt] -&gt; ShadowedGREs
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; [a] -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; ShadowedGREs
</span><a href="GHC.Types.Name.Reader.html#greShadowedNameSpaces"><span class="hs-identifier hs-var">greShadowedNameSpaces</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534364"><span class="hs-identifier hs-var">gres</span></a></span><span> </span><span class="annot"><span class="annottext">ShadowedGREs -&gt; ShadowedGREs -&gt; ShadowedGREs
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ShadowedGREs
</span><a href="#local-6989586621682534365"><span class="hs-identifier hs-var">shads</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1733"></span><span>              </span><span class="annot"><span class="annottext">ShadowedGREs
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">UniqFM NameSpace [GlobalRdrElt]
</span><a href="#local-6989586621682534361"><span class="hs-identifier hs-var">news</span></a></span><span>
</span><span id="line-1734"></span><span>
</span><span id="line-1735"></span><span>      </span><span class="hs-comment">-- Then shadow the old 'GlobalRdrElt's, now that we know which 'NameSpace's</span><span>
</span><span id="line-1736"></span><span>      </span><span class="hs-comment">-- should be shadowed.</span><span>
</span><span id="line-1737"></span><span>          </span><span class="annot"><a href="#local-6989586621682534368"><span class="hs-identifier hs-type">shadow_list</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1738"></span><span>          </span><span id="local-6989586621682534368"><span class="annot"><span class="annottext">shadow_list :: Unique -&gt; [GlobalRdrElt] -&gt; Maybe [GlobalRdrElt]
</span><a href="#local-6989586621682534368"><span class="hs-identifier hs-var hs-var">shadow_list</span></a></span></span><span> </span><span id="local-6989586621682534369"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682534369"><span class="hs-identifier hs-var">old_ns</span></a></span></span><span> </span><span id="local-6989586621682534370"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534370"><span class="hs-identifier hs-var">old_gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1739"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; ShadowedGREs -&gt; IsShadowed
</span><a href="GHC.Types.Name.Reader.html#namespace_is_shadowed"><span class="hs-identifier hs-var">namespace_is_shadowed</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682534369"><span class="hs-identifier hs-var">old_ns</span></a></span><span> </span><span class="annot"><span class="annottext">ShadowedGREs
</span><a href="#local-6989586621682534362"><span class="hs-identifier hs-var">shadowed_gres</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1740"></span><span>              </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsNotShadowed"><span class="hs-identifier hs-var">IsNotShadowed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; Maybe [GlobalRdrElt]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534370"><span class="hs-identifier hs-var">old_gres</span></a></span><span>
</span><span id="line-1741"></span><span>              </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsShadowed"><span class="hs-identifier hs-var">IsShadowed</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; Maybe [GlobalRdrElt]
forall a. [a] -&gt; Maybe [a]
</span><a href="#local-6989586621682534374"><span class="hs-identifier hs-var">guard_nonEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">([GlobalRdrElt] -&gt; Maybe [GlobalRdrElt])
-&gt; [GlobalRdrElt] -&gt; Maybe [GlobalRdrElt]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Maybe GlobalRdrElt)
-&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe GlobalRdrElt
</span><a href="#local-6989586621682534375"><span class="hs-identifier hs-var">shadow</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534370"><span class="hs-identifier hs-var">old_gres</span></a></span><span>
</span><span id="line-1742"></span><span>              </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsShadowedIfFieldSelector"><span class="hs-identifier hs-var">IsShadowedIfFieldSelector</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1743"></span><span>                </span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; Maybe [GlobalRdrElt]
forall a. [a] -&gt; Maybe [a]
</span><a href="#local-6989586621682534374"><span class="hs-identifier hs-var">guard_nonEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">([GlobalRdrElt] -&gt; Maybe [GlobalRdrElt])
-&gt; [GlobalRdrElt] -&gt; Maybe [GlobalRdrElt]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1744"></span><span>                </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Maybe GlobalRdrElt)
-&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682534377"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534377"><span class="hs-identifier hs-var">old_gre</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isFieldSelectorGRE"><span class="hs-identifier hs-var">isFieldSelectorGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534377"><span class="hs-identifier hs-var">old_gre</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe GlobalRdrElt
</span><a href="#local-6989586621682534375"><span class="hs-identifier hs-var">shadow</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534377"><span class="hs-identifier hs-var">old_gre</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe GlobalRdrElt
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534377"><span class="hs-identifier hs-var">old_gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1745"></span><span>                  </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682534370"><span class="hs-identifier hs-var">old_gres</span></a></span><span>
</span><span id="line-1746"></span><span>
</span><span id="line-1747"></span><span>      </span><span class="hs-comment">-- Now do all of the shadowing in a single go. This avoids traversing</span><span>
</span><span id="line-1748"></span><span>      </span><span class="hs-comment">-- the old GlobalRdrEnv multiple times over.</span><span>
</span><span id="line-1749"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(Unique -&gt; [GlobalRdrElt] -&gt; Maybe [GlobalRdrElt])
-&gt; UniqFM NameSpace [GlobalRdrElt]
-&gt; UniqFM NameSpace [GlobalRdrElt]
forall {k} elt1 elt2 (key :: k).
(Unique -&gt; elt1 -&gt; Maybe elt2)
-&gt; UniqFM key elt1 -&gt; UniqFM key elt2
</span><a href="GHC.Types.Unique.FM.html#mapMaybeWithKeyUFM"><span class="hs-identifier hs-var">mapMaybeWithKeyUFM</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; [GlobalRdrElt] -&gt; Maybe [GlobalRdrElt]
</span><a href="#local-6989586621682534368"><span class="hs-identifier hs-var">shadow_list</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM NameSpace [GlobalRdrElt]
</span><a href="#local-6989586621682534360"><span class="hs-identifier hs-var">olds</span></a></span><span>
</span><span id="line-1750"></span><span>
</span><span id="line-1751"></span><span>    </span><span id="local-6989586621682533032"><span class="annot"><a href="#local-6989586621682534374"><span class="hs-identifier hs-type">guard_nonEmpty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682533032"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682533032"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1752"></span><span>    </span><span id="local-6989586621682534374"><span class="annot"><span class="annottext">guard_nonEmpty :: forall a. [a] -&gt; Maybe [a]
</span><a href="#local-6989586621682534374"><span class="hs-identifier hs-var hs-var">guard_nonEmpty</span></a></span></span><span> </span><span id="local-6989586621682534380"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682534380"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682534380"><span class="hs-identifier hs-var">xs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [a]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1753"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Maybe [a]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682534380"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1754"></span><span>
</span><span id="line-1755"></span><span>    </span><span class="hs-comment">-- Shadow a single GRE, by either qualifying it or removing it entirely.</span><span>
</span><span id="line-1756"></span><span>    </span><span class="annot"><a href="#local-6989586621682534375"><span class="hs-identifier hs-type">shadow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-1757"></span><span>    </span><span id="local-6989586621682534375"><span class="annot"><span class="annottext">shadow :: GlobalRdrElt -&gt; Maybe GlobalRdrElt
</span><a href="#local-6989586621682534375"><span class="hs-identifier hs-var hs-var">shadow</span></a></span></span><span> </span><span id="local-6989586621682534381"><span class="annot"><span class="annottext">old_gre :: GlobalRdrElt
</span><a href="#local-6989586621682534381"><span class="hs-identifier hs-var">old_gre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534382"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534382"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534383"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534383"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1758"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe Module
forall info. GlobalRdrEltX info -&gt; Maybe Module
</span><a href="GHC.Types.Name.Reader.html#greDefinitionModule"><span class="hs-identifier hs-var">greDefinitionModule</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534381"><span class="hs-identifier hs-var">old_gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1759"></span><span>        </span><span class="annot"><span class="annottext">Maybe Module
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe GlobalRdrElt
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534381"><span class="hs-identifier hs-var">old_gre</span></a></span><span>   </span><span class="hs-comment">-- Old name is Internal; do not shadow</span><span>
</span><span id="line-1760"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682534384"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682534384"><span class="hs-identifier hs-var">old_mod</span></a></span></span><span>
</span><span id="line-1761"></span><span>           </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; Bool
forall a. Bag a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534385"><span class="hs-identifier hs-var">iss'</span></a></span><span>            </span><span class="hs-comment">-- Nothing remains</span><span>
</span><span id="line-1762"></span><span>           </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534355"><span class="hs-identifier hs-var">drop_only_qualified</span></a></span><span>
</span><span id="line-1763"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe GlobalRdrElt
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1764"></span><span>
</span><span id="line-1765"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1766"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe GlobalRdrElt
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534381"><span class="hs-identifier hs-var">old_gre</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682534385"><span class="hs-identifier hs-type">iss'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1767"></span><span>
</span><span id="line-1768"></span><span>           </span><span class="hs-keyword">where</span><span>
</span><span id="line-1769"></span><span>             </span><span id="local-6989586621682534385"><span class="annot"><span class="annottext">iss' :: Bag ImportSpec
</span><a href="#local-6989586621682534385"><span class="hs-identifier hs-var hs-var">iss'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534386"><span class="hs-identifier hs-var">lcl_imp</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; Bag ImportSpec -&gt; Bag ImportSpec
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">(ImportSpec -&gt; ImportSpec) -&gt; Bag ImportSpec -&gt; Bag ImportSpec
forall a b. (a -&gt; b) -&gt; Bag a -&gt; Bag b
</span><a href="GHC.Data.Bag.html#mapBag"><span class="hs-identifier hs-var">mapBag</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ImportSpec
</span><a href="#local-6989586621682534387"><span class="hs-identifier hs-var">set_qual</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534383"><span class="hs-identifier hs-var">iss</span></a></span><span>
</span><span id="line-1770"></span><span>             </span><span id="local-6989586621682534386"><span class="annot"><span class="annottext">lcl_imp :: Bag ImportSpec
</span><a href="#local-6989586621682534386"><span class="hs-identifier hs-var hs-var">lcl_imp</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534382"><span class="hs-identifier hs-var">lcl</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; Bag ImportSpec
forall a. a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a></span><span> </span><span class="annot"><span class="annottext">(ImportSpec -&gt; Bag ImportSpec) -&gt; ImportSpec -&gt; Bag ImportSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Module -&gt; ImportSpec
forall {info}. GlobalRdrEltX info -&gt; Module -&gt; ImportSpec
</span><a href="#local-6989586621682534388"><span class="hs-identifier hs-var">mk_fake_imp_spec</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534381"><span class="hs-identifier hs-var">old_gre</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682534384"><span class="hs-identifier hs-var">old_mod</span></a></span><span>
</span><span id="line-1771"></span><span>                     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-1772"></span><span>
</span><span id="line-1773"></span><span>    </span><span id="local-6989586621682534388"><span class="annot"><span class="annottext">mk_fake_imp_spec :: GlobalRdrEltX info -&gt; Module -&gt; ImportSpec
</span><a href="#local-6989586621682534388"><span class="hs-identifier hs-var hs-var">mk_fake_imp_spec</span></a></span></span><span> </span><span id="local-6989586621682534389"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534389"><span class="hs-identifier hs-var">old_gre</span></a></span></span><span> </span><span id="local-6989586621682534390"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682534390"><span class="hs-identifier hs-var">old_mod</span></a></span></span><span>    </span><span class="hs-comment">-- Urgh!</span><span>
</span><span id="line-1774"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; ImpItemSpec -&gt; ImportSpec
</span><a href="GHC.Types.Name.Reader.html#ImpSpec"><span class="hs-identifier hs-var">ImpSpec</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682534392"><span class="hs-identifier hs-var">id_spec</span></a></span><span> </span><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="GHC.Types.Name.Reader.html#ImpAll"><span class="hs-identifier hs-var">ImpAll</span></a></span><span>
</span><span id="line-1775"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1776"></span><span>        </span><span id="local-6989586621682534394"><span class="annot"><span class="annottext">old_mod_name :: ModuleName
</span><a href="#local-6989586621682534394"><span class="hs-identifier hs-var hs-var">old_mod_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682534390"><span class="hs-identifier hs-var">old_mod</span></a></span><span>
</span><span id="line-1777"></span><span>        </span><span id="local-6989586621682534392"><span class="annot"><span class="annottext">id_spec :: ImpDeclSpec
</span><a href="#local-6989586621682534392"><span class="hs-identifier hs-var hs-var">id_spec</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpDeclSpec"><span class="hs-identifier hs-type">ImpDeclSpec</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">is_mod :: Module
</span><a href="GHC.Types.Name.Reader.html#is_mod"><span class="hs-identifier hs-var">is_mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682534390"><span class="hs-identifier hs-var">old_mod</span></a></span><span>
</span><span id="line-1778"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_as :: ModuleName
</span><a href="GHC.Types.Name.Reader.html#is_as"><span class="hs-identifier hs-var">is_as</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534394"><span class="hs-identifier hs-var">old_mod_name</span></a></span><span>
</span><span id="line-1779"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_pkg_qual :: PkgQual
</span><a href="GHC.Types.Name.Reader.html#is_pkg_qual"><span class="hs-identifier hs-var">is_pkg_qual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PkgQual
</span><a href="GHC.Types.PkgQual.html#NoPkgQual"><span class="hs-identifier hs-var">NoPkgQual</span></a></span><span>
</span><span id="line-1780"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_qual :: Bool
</span><a href="GHC.Types.Name.Reader.html#is_qual"><span class="hs-identifier hs-var">is_qual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1781"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_isboot :: IsBootInterface
</span><a href="GHC.Types.Name.Reader.html#is_isboot"><span class="hs-identifier hs-var">is_isboot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="Language.Haskell.Syntax.ImpExp.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span>
</span><span id="line-1782"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_dloc :: SrcSpan
</span><a href="GHC.Types.Name.Reader.html#is_dloc"><span class="hs-identifier hs-var">is_dloc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; SrcSpan
forall info. GlobalRdrEltX info -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#greDefinitionSrcSpan"><span class="hs-identifier hs-var">greDefinitionSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621682534389"><span class="hs-identifier hs-var">old_gre</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1783"></span><span>
</span><span id="line-1784"></span><span>    </span><span class="annot"><a href="#local-6989586621682534387"><span class="hs-identifier hs-type">set_qual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span>
</span><span id="line-1785"></span><span>    </span><span id="local-6989586621682534387"><span class="annot"><span class="annottext">set_qual :: ImportSpec -&gt; ImportSpec
</span><a href="#local-6989586621682534387"><span class="hs-identifier hs-var hs-var">set_qual</span></a></span></span><span> </span><span id="local-6989586621682534401"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534401"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534401"><span class="hs-identifier hs-var">is</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682534401"><span class="hs-identifier hs-type">is</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#is_qual"><span class="hs-identifier hs-var">is_qual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1786"></span><span>
</span><span id="line-1787"></span><span class="hs-comment">-- | @greClashesWith new_gre old_gre@ computes whether @new_gre@ clashes</span><span>
</span><span id="line-1788"></span><span class="hs-comment">-- with @old_gre@ (assuming they both have the same underlying 'occNameFS').</span><span>
</span><span id="line-1789"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#greClashesWith"><span class="hs-identifier hs-type">greClashesWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-1790"></span><span id="greClashesWith"><span class="annot"><span class="annottext">greClashesWith :: GlobalRdrElt -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#greClashesWith"><span class="hs-identifier hs-var hs-var">greClashesWith</span></a></span></span><span> </span><span id="local-6989586621682534403"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534403"><span class="hs-identifier hs-var">new_gre</span></a></span></span><span> </span><span id="local-6989586621682534404"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534404"><span class="hs-identifier hs-var">old_gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1791"></span><span>  </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534404"><span class="hs-identifier hs-var">old_gre</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; ShadowedGREs -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#greIsShadowed"><span class="hs-operator hs-var">`greIsShadowed`</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; ShadowedGREs
</span><a href="GHC.Types.Name.Reader.html#greShadowedNameSpaces"><span class="hs-identifier hs-var">greShadowedNameSpaces</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534403"><span class="hs-identifier hs-var">new_gre</span></a></span><span>
</span><span id="line-1792"></span><span>
</span><span id="line-1793"></span><span class="annot"><span class="hs-comment">-- | Is the given 'GlobalRdrElt' shadowed, as specified by the 'ShadowedNameSpace's?</span></span><span>
</span><span id="line-1794"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#greIsShadowed"><span class="hs-identifier hs-type">greIsShadowed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-type">ShadowedGREs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1795"></span><span id="greIsShadowed"><span class="annot"><span class="annottext">greIsShadowed :: GlobalRdrElt -&gt; ShadowedGREs -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#greIsShadowed"><span class="hs-identifier hs-var hs-var">greIsShadowed</span></a></span></span><span> </span><span id="local-6989586621682534406"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534406"><span class="hs-identifier hs-var">old_gre</span></a></span></span><span> </span><span id="local-6989586621682534407"><span class="annot"><span class="annottext">ShadowedGREs
</span><a href="#local-6989586621682534407"><span class="hs-identifier hs-var">shadowed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1796"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534409"><span class="hs-identifier hs-var">old_ns</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; ShadowedGREs -&gt; IsShadowed
</span><a href="GHC.Types.Name.Reader.html#namespace_is_shadowed"><span class="hs-operator hs-var">`namespace_is_shadowed`</span></a></span><span> </span><span class="annot"><span class="annottext">ShadowedGREs
</span><a href="#local-6989586621682534407"><span class="hs-identifier hs-var">shadowed</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1797"></span><span>    </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsShadowed"><span class="hs-identifier hs-var">IsShadowed</span></a></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1798"></span><span>    </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsNotShadowed"><span class="hs-identifier hs-var">IsNotShadowed</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1799"></span><span>    </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsShadowedIfFieldSelector"><span class="hs-identifier hs-var">IsShadowedIfFieldSelector</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isFieldSelectorGRE"><span class="hs-identifier hs-var">isFieldSelectorGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534406"><span class="hs-identifier hs-var">old_gre</span></a></span><span>
</span><span id="line-1800"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1801"></span><span>    </span><span id="local-6989586621682534409"><span class="annot"><span class="annottext">old_ns :: NameSpace
</span><a href="#local-6989586621682534409"><span class="hs-identifier hs-var hs-var">old_ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#occNameSpace"><span class="hs-identifier hs-var">occNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; NameSpace) -&gt; OccName -&gt; NameSpace
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534406"><span class="hs-identifier hs-var">old_gre</span></a></span><span>
</span><span id="line-1802"></span><span>
</span><span id="line-1803"></span><span>
</span><span id="line-1804"></span><span class="hs-comment">-- | Whether a 'GlobalRdrElt' is definitely shadowed, definitely not shadowed,</span><span>
</span><span id="line-1805"></span><span class="hs-comment">-- or conditionally shadowed based on more information beyond the 'NameSpace'.</span><span>
</span><span id="line-1806"></span><span class="hs-keyword">data</span><span> </span><span id="IsShadowed"><span class="annot"><a href="GHC.Types.Name.Reader.html#IsShadowed"><span class="hs-identifier hs-var">IsShadowed</span></a></span></span><span>
</span><span id="line-1807"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The GRE is not shadowed.</span></span><span>
</span><span id="line-1808"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IsNotShadowed"><span class="annot"><a href="GHC.Types.Name.Reader.html#IsNotShadowed"><span class="hs-identifier hs-var">IsNotShadowed</span></a></span></span><span>
</span><span id="line-1809"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The GRE is shadowed.</span></span><span>
</span><span id="line-1810"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IsShadowed"><span class="annot"><a href="GHC.Types.Name.Reader.html#IsShadowed"><span class="hs-identifier hs-var">IsShadowed</span></a></span></span><span>
</span><span id="line-1811"></span><span>  </span><span class="hs-comment">-- | The GRE is shadowed iff it is a record field GRE</span><span>
</span><span id="line-1812"></span><span>  </span><span class="hs-comment">-- which defines a field selector (i.e. FieldSelectors is enabled in its</span><span>
</span><span id="line-1813"></span><span>  </span><span class="hs-comment">-- defining module).</span><span>
</span><span id="line-1814"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IsShadowedIfFieldSelector"><span class="annot"><a href="GHC.Types.Name.Reader.html#IsShadowedIfFieldSelector"><span class="hs-identifier hs-var">IsShadowedIfFieldSelector</span></a></span></span><span>
</span><span id="line-1815"></span><span>
</span><span id="line-1816"></span><span class="hs-comment">-- | Internal function: is a 'GlobalRdrElt' with the 'NameSpace' with given</span><span>
</span><span id="line-1817"></span><span class="hs-comment">-- 'Unique' shadowed by the specified 'ShadowedGREs'?</span><span>
</span><span id="line-1818"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#namespace_is_shadowed"><span class="hs-identifier hs-type">namespace_is_shadowed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-type">ShadowedGREs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#IsShadowed"><span class="hs-identifier hs-type">IsShadowed</span></a></span><span>
</span><span id="line-1819"></span><span id="namespace_is_shadowed"><span class="annot"><span class="annottext">namespace_is_shadowed :: Unique -&gt; ShadowedGREs -&gt; IsShadowed
</span><a href="GHC.Types.Name.Reader.html#namespace_is_shadowed"><span class="hs-identifier hs-var hs-var">namespace_is_shadowed</span></a></span></span><span> </span><span id="local-6989586621682534411"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682534411"><span class="hs-identifier hs-var">old_ns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-type">ShadowedGREs</span></a></span><span> </span><span id="local-6989586621682534412"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534412"><span class="hs-identifier hs-var">shadowed_nonflds</span></a></span></span><span> </span><span id="local-6989586621682534413"><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="#local-6989586621682534413"><span class="hs-identifier hs-var">shadowed_flds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1820"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Bool
</span><a href="GHC.Builtin.Uniques.html#isFldNSUnique"><span class="hs-identifier hs-var">isFldNSUnique</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682534411"><span class="hs-identifier hs-var">old_ns</span></a></span><span>
</span><span id="line-1821"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="#local-6989586621682534413"><span class="hs-identifier hs-var">shadowed_flds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1822"></span><span>      </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowAllFieldGREs"><span class="hs-identifier hs-var">ShadowAllFieldGREs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsShadowed"><span class="hs-identifier hs-var">IsShadowed</span></a></span><span>
</span><span id="line-1823"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldSelectorsAnd"><span class="hs-identifier hs-type">ShadowFieldSelectorsAnd</span></a></span><span> </span><span id="local-6989586621682534416"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534416"><span class="hs-identifier hs-var">shadowed</span></a></span></span><span>
</span><span id="line-1824"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682534411"><span class="hs-identifier hs-var">old_ns</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; UniqSet NameSpace -&gt; Bool
forall a. Unique -&gt; UniqSet a -&gt; Bool
</span><a href="GHC.Types.Unique.Set.html#elemUniqSet_Directly"><span class="hs-operator hs-var">`elemUniqSet_Directly`</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534416"><span class="hs-identifier hs-var">shadowed</span></a></span><span>
</span><span id="line-1825"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsShadowed"><span class="hs-identifier hs-var">IsShadowed</span></a></span><span>
</span><span id="line-1826"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1827"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsShadowedIfFieldSelector"><span class="hs-identifier hs-var">IsShadowedIfFieldSelector</span></a></span><span>
</span><span id="line-1828"></span><span>      </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldNameSpaces"><span class="hs-identifier hs-type">ShadowFieldNameSpaces</span></a></span><span> </span><span id="local-6989586621682534419"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534419"><span class="hs-identifier hs-var">shadowed</span></a></span></span><span>
</span><span id="line-1829"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682534411"><span class="hs-identifier hs-var">old_ns</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; UniqSet NameSpace -&gt; Bool
forall a. Unique -&gt; UniqSet a -&gt; Bool
</span><a href="GHC.Types.Unique.Set.html#elemUniqSet_Directly"><span class="hs-operator hs-var">`elemUniqSet_Directly`</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534419"><span class="hs-identifier hs-var">shadowed</span></a></span><span>
</span><span id="line-1830"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsShadowed"><span class="hs-identifier hs-var">IsShadowed</span></a></span><span>
</span><span id="line-1831"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1832"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsNotShadowed"><span class="hs-identifier hs-var">IsNotShadowed</span></a></span><span>
</span><span id="line-1833"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682534411"><span class="hs-identifier hs-var">old_ns</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; UniqSet NameSpace -&gt; Bool
forall a. Unique -&gt; UniqSet a -&gt; Bool
</span><a href="GHC.Types.Unique.Set.html#elemUniqSet_Directly"><span class="hs-operator hs-var">`elemUniqSet_Directly`</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534412"><span class="hs-identifier hs-var">shadowed_nonflds</span></a></span><span>
</span><span id="line-1834"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsShadowed"><span class="hs-identifier hs-var">IsShadowed</span></a></span><span>
</span><span id="line-1835"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1836"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsShadowed
</span><a href="GHC.Types.Name.Reader.html#IsNotShadowed"><span class="hs-identifier hs-var">IsNotShadowed</span></a></span><span>
</span><span id="line-1837"></span><span>
</span><span id="line-1838"></span><span class="annot"><span class="hs-comment">-- | What are all the 'GlobalRdrElt's that are shadowed by this new 'GlobalRdrElt'?</span></span><span>
</span><span id="line-1839"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#greShadowedNameSpaces"><span class="hs-identifier hs-type">greShadowedNameSpaces</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-type">ShadowedGREs</span></a></span><span>
</span><span id="line-1840"></span><span id="greShadowedNameSpaces"><span class="annot"><span class="annottext">greShadowedNameSpaces :: GlobalRdrElt -&gt; ShadowedGREs
</span><a href="GHC.Types.Name.Reader.html#greShadowedNameSpaces"><span class="hs-identifier hs-var hs-var">greShadowedNameSpaces</span></a></span></span><span> </span><span id="local-6989586621682534420"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534420"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; ShadowedFieldGREs -&gt; ShadowedGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-var">ShadowedGREs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534421"><span class="hs-identifier hs-var">shadowed_nonflds</span></a></span><span> </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="#local-6989586621682534422"><span class="hs-identifier hs-var">shadowed_flds</span></a></span><span>
</span><span id="line-1841"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1842"></span><span>    </span><span id="local-6989586621682534423"><span class="annot"><span class="annottext">ns :: NameSpace
</span><a href="#local-6989586621682534423"><span class="hs-identifier hs-var hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#occNameSpace"><span class="hs-identifier hs-var">occNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; NameSpace) -&gt; OccName -&gt; NameSpace
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534420"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1843"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682534421"><span class="annot"><span class="annottext">shadowed_nonflds :: UniqSet NameSpace
</span><a href="#local-6989586621682534421"><span class="hs-identifier hs-var hs-var">shadowed_nonflds</span></a></span></span><span>
</span><span id="line-1844"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isFieldNameSpace"><span class="hs-identifier hs-var">isFieldNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534423"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1845"></span><span>      </span><span class="hs-comment">-- A new record field shadows variables if it defines a field selector.</span><span>
</span><span id="line-1846"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isFieldSelectorGRE"><span class="hs-identifier hs-var">isFieldSelectorGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534420"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1847"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; UniqSet NameSpace
forall a. Uniquable a =&gt; a -&gt; UniqSet a
</span><a href="GHC.Types.Unique.Set.html#unitUniqSet"><span class="hs-identifier hs-var">unitUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span>
</span><span id="line-1848"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
forall a. UniqSet a
</span><a href="GHC.Types.Unique.Set.html#emptyUniqSet"><span class="hs-identifier hs-var">emptyUniqSet</span></a></span><span>
</span><span id="line-1849"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1850"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; UniqSet NameSpace
forall a. Uniquable a =&gt; a -&gt; UniqSet a
</span><a href="GHC.Types.Unique.Set.html#unitUniqSet"><span class="hs-identifier hs-var">unitUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534423"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1851"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682534422"><span class="annot"><span class="annottext">shadowed_flds :: ShadowedFieldGREs
</span><a href="#local-6989586621682534422"><span class="hs-identifier hs-var hs-var">shadowed_flds</span></a></span></span><span>
</span><span id="line-1852"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534423"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NameSpace -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span>
</span><span id="line-1853"></span><span>      </span><span class="hs-comment">-- A new variable shadows record fields with field selectors.</span><span>
</span><span id="line-1854"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowFieldSelectorsAnd"><span class="hs-identifier hs-var">ShadowFieldSelectorsAnd</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
forall a. UniqSet a
</span><a href="GHC.Types.Unique.Set.html#emptyUniqSet"><span class="hs-identifier hs-var">emptyUniqSet</span></a></span><span>
</span><span id="line-1855"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isFieldNameSpace"><span class="hs-identifier hs-var">isFieldNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534423"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1856"></span><span>      </span><span class="hs-comment">-- A new record field shadows record fields unless it is a duplicate record field.</span><span>
</span><span id="line-1857"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isDuplicateRecFldGRE"><span class="hs-identifier hs-var">isDuplicateRecFldGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682534420"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1858"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowFieldNameSpaces"><span class="hs-identifier hs-var">ShadowFieldNameSpaces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; UniqSet NameSpace
forall a. Uniquable a =&gt; a -&gt; UniqSet a
</span><a href="GHC.Types.Unique.Set.html#unitUniqSet"><span class="hs-identifier hs-var">unitUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682534423"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1859"></span><span>        </span><span class="hs-comment">-- NB: we must still shadow fields with the same constructor name.</span><span>
</span><span id="line-1860"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowAllFieldGREs"><span class="hs-identifier hs-var">ShadowAllFieldGREs</span></a></span><span>
</span><span id="line-1861"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1862"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowFieldNameSpaces"><span class="hs-identifier hs-var">ShadowFieldNameSpaces</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
forall a. UniqSet a
</span><a href="GHC.Types.Unique.Set.html#emptyUniqSet"><span class="hs-identifier hs-var">emptyUniqSet</span></a></span><span>
</span><span id="line-1863"></span><span>
</span><span id="line-1864"></span><span class="annot"><span class="hs-comment">-- | A description of which 'GlobalRdrElt's are shadowed.</span></span><span>
</span><span id="line-1865"></span><span class="hs-keyword">data</span><span> </span><span id="ShadowedGREs"><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-var">ShadowedGREs</span></a></span></span><span>
</span><span id="line-1866"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ShadowedGREs"><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-var">ShadowedGREs</span></a></span></span><span>
</span><span id="line-1867"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="shadowedNonFieldNameSpaces"><span class="annot"><span class="annottext">ShadowedGREs -&gt; UniqSet NameSpace
</span><a href="GHC.Types.Name.Reader.html#shadowedNonFieldNameSpaces"><span class="hs-identifier hs-var hs-var">shadowedNonFieldNameSpaces</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.Set.html#UniqSet"><span class="hs-identifier hs-type">UniqSet</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1868"></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ These specific non-field 'NameSpace's are shadowed.</span></span><span>
</span><span id="line-1869"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="shadowedFieldGREs"><span class="annot"><span class="annottext">ShadowedGREs -&gt; ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#shadowedFieldGREs"><span class="hs-identifier hs-var hs-var">shadowedFieldGREs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedFieldGREs"><span class="hs-identifier hs-type">ShadowedFieldGREs</span></a></span><span>
</span><span id="line-1870"></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ These field 'GlobalRdrElt's are shadowed.</span></span><span>
</span><span id="line-1871"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1872"></span><span>
</span><span id="line-1873"></span><span class="annot"><span class="hs-comment">-- | A description of which record field 'GlobalRdrElt's are shadowed.</span></span><span>
</span><span id="line-1874"></span><span class="hs-keyword">data</span><span> </span><span id="ShadowedFieldGREs"><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedFieldGREs"><span class="hs-identifier hs-var">ShadowedFieldGREs</span></a></span></span><span>
</span><span id="line-1875"></span><span>  </span><span class="annot"><span class="hs-comment">-- | All field 'GlobalRdrElt's are shadowed.</span></span><span>
</span><span id="line-1876"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ShadowAllFieldGREs"><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowAllFieldGREs"><span class="hs-identifier hs-var">ShadowAllFieldGREs</span></a></span></span><span>
</span><span id="line-1877"></span><span>  </span><span class="hs-comment">-- | Record field GREs defining field selectors, as well as those</span><span>
</span><span id="line-1878"></span><span>  </span><span class="hs-comment">-- with the explicitly specified field 'NameSpace's, are shadowed.</span><span>
</span><span id="line-1879"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ShadowFieldSelectorsAnd"><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldSelectorsAnd"><span class="hs-identifier hs-var">ShadowFieldSelectorsAnd</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="shadowedFieldNameSpaces"><span class="annot"><span class="annottext">ShadowedFieldGREs -&gt; UniqSet NameSpace
</span><a href="GHC.Types.Name.Reader.html#shadowedFieldNameSpaces"><span class="hs-identifier hs-var hs-var">shadowedFieldNameSpaces</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.Set.html#UniqSet"><span class="hs-identifier hs-type">UniqSet</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1880"></span><span>  </span><span class="annot"><span class="hs-comment">-- | These specific field 'NameSpace's are shadowed.</span></span><span>
</span><span id="line-1881"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ShadowFieldNameSpaces"><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldNameSpaces"><span class="hs-identifier hs-var">ShadowFieldNameSpaces</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="shadowedFieldNameSpaces"><span class="annot"><a href="GHC.Types.Name.Reader.html#shadowedFieldNameSpaces"><span class="hs-identifier hs-var">shadowedFieldNameSpaces</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.Set.html#UniqSet"><span class="hs-identifier hs-type">UniqSet</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1882"></span><span>
</span><span id="line-1883"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682534433"><span id="local-6989586621682534437"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedFieldGREs"><span class="hs-identifier hs-type">ShadowedFieldGREs</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1884"></span><span>  </span><span id="local-6989586621682534440"><span class="annot"><span class="annottext">mempty :: ShadowedFieldGREs
</span><span class="hs-identifier hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldNameSpaces"><span class="hs-identifier hs-type">ShadowFieldNameSpaces</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">shadowedFieldNameSpaces :: UniqSet NameSpace
</span><a href="GHC.Types.Name.Reader.html#shadowedFieldNameSpaces"><span class="hs-identifier hs-var">shadowedFieldNameSpaces</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
forall a. UniqSet a
</span><a href="GHC.Types.Unique.Set.html#emptyUniqSet"><span class="hs-identifier hs-var">emptyUniqSet</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1885"></span><span>
</span><span id="line-1886"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682534443"><span id="local-6989586621682534446"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedFieldGREs"><span class="hs-identifier hs-type">ShadowedFieldGREs</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1887"></span><span>  </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowAllFieldGREs"><span class="hs-identifier hs-var">ShadowAllFieldGREs</span></a></span><span> </span><span id="local-6989586621682534456"><span class="annot"><span class="annottext">&lt;&gt; :: ShadowedFieldGREs -&gt; ShadowedFieldGREs -&gt; ShadowedFieldGREs
</span><span class="hs-operator hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowAllFieldGREs"><span class="hs-identifier hs-var">ShadowAllFieldGREs</span></a></span><span>
</span><span id="line-1888"></span><span>  </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowAllFieldGREs"><span class="hs-identifier hs-var">ShadowAllFieldGREs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowAllFieldGREs"><span class="hs-identifier hs-var">ShadowAllFieldGREs</span></a></span><span>
</span><span id="line-1889"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldSelectorsAnd"><span class="hs-identifier hs-type">ShadowFieldSelectorsAnd</span></a></span><span> </span><span id="local-6989586621682534457"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534457"><span class="hs-identifier hs-var">ns1</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldSelectorsAnd"><span class="hs-identifier hs-type">ShadowFieldSelectorsAnd</span></a></span><span> </span><span id="local-6989586621682534458"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534458"><span class="hs-identifier hs-var">ns2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1890"></span><span>    </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowFieldSelectorsAnd"><span class="hs-identifier hs-var">ShadowFieldSelectorsAnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534457"><span class="hs-identifier hs-var">ns1</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; UniqSet NameSpace -&gt; UniqSet NameSpace
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534458"><span class="hs-identifier hs-var">ns2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1891"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldSelectorsAnd"><span class="hs-identifier hs-type">ShadowFieldSelectorsAnd</span></a></span><span> </span><span id="local-6989586621682534459"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534459"><span class="hs-identifier hs-var">ns1</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldNameSpaces"><span class="hs-identifier hs-type">ShadowFieldNameSpaces</span></a></span><span> </span><span id="local-6989586621682534460"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534460"><span class="hs-identifier hs-var">ns2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1892"></span><span>    </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowFieldSelectorsAnd"><span class="hs-identifier hs-var">ShadowFieldSelectorsAnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534459"><span class="hs-identifier hs-var">ns1</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; UniqSet NameSpace -&gt; UniqSet NameSpace
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534460"><span class="hs-identifier hs-var">ns2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1893"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldNameSpaces"><span class="hs-identifier hs-type">ShadowFieldNameSpaces</span></a></span><span> </span><span id="local-6989586621682534461"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534461"><span class="hs-identifier hs-var">ns1</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldSelectorsAnd"><span class="hs-identifier hs-type">ShadowFieldSelectorsAnd</span></a></span><span> </span><span id="local-6989586621682534462"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534462"><span class="hs-identifier hs-var">ns2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1894"></span><span>    </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowFieldSelectorsAnd"><span class="hs-identifier hs-var">ShadowFieldSelectorsAnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534461"><span class="hs-identifier hs-var">ns1</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; UniqSet NameSpace -&gt; UniqSet NameSpace
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534462"><span class="hs-identifier hs-var">ns2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1895"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldNameSpaces"><span class="hs-identifier hs-type">ShadowFieldNameSpaces</span></a></span><span> </span><span id="local-6989586621682534463"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534463"><span class="hs-identifier hs-var">ns1</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowFieldNameSpaces"><span class="hs-identifier hs-type">ShadowFieldNameSpaces</span></a></span><span> </span><span id="local-6989586621682534464"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534464"><span class="hs-identifier hs-var">ns2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1896"></span><span>    </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowFieldNameSpaces"><span class="hs-identifier hs-var">ShadowFieldNameSpaces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534463"><span class="hs-identifier hs-var">ns1</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; UniqSet NameSpace -&gt; UniqSet NameSpace
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534464"><span class="hs-identifier hs-var">ns2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1897"></span><span>
</span><span id="line-1898"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682534469"><span id="local-6989586621682534472"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-type">ShadowedGREs</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1899"></span><span>  </span><span id="local-6989586621682534475"><span class="annot"><span class="annottext">mempty :: ShadowedGREs
</span><span class="hs-identifier hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1900"></span><span>    </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-type">ShadowedGREs</span></a></span><span>
</span><span id="line-1901"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">shadowedNonFieldNameSpaces :: UniqSet NameSpace
</span><a href="GHC.Types.Name.Reader.html#shadowedNonFieldNameSpaces"><span class="hs-identifier hs-var">shadowedNonFieldNameSpaces</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
forall a. UniqSet a
</span><a href="GHC.Types.Unique.Set.html#emptyUniqSet"><span class="hs-identifier hs-var">emptyUniqSet</span></a></span><span>
</span><span id="line-1902"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">shadowedFieldGREs :: ShadowedFieldGREs
</span><a href="GHC.Types.Name.Reader.html#shadowedFieldGREs"><span class="hs-identifier hs-var">shadowedFieldGREs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShadowedFieldGREs
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1903"></span><span>
</span><span id="line-1904"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682534478"><span id="local-6989586621682534481"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-type">ShadowedGREs</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1905"></span><span>  </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-type">ShadowedGREs</span></a></span><span> </span><span id="local-6989586621682534487"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534487"><span class="hs-identifier hs-var">nonflds1</span></a></span></span><span> </span><span id="local-6989586621682534488"><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="#local-6989586621682534488"><span class="hs-identifier hs-var">flds1</span></a></span></span><span> </span><span id="local-6989586621682534489"><span class="annot"><span class="annottext">&lt;&gt; :: ShadowedGREs -&gt; ShadowedGREs -&gt; ShadowedGREs
</span><span class="hs-operator hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-type">ShadowedGREs</span></a></span><span> </span><span id="local-6989586621682534490"><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534490"><span class="hs-identifier hs-var">nonflds2</span></a></span></span><span> </span><span id="local-6989586621682534491"><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="#local-6989586621682534491"><span class="hs-identifier hs-var">flds2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1906"></span><span>    </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; ShadowedFieldGREs -&gt; ShadowedGREs
</span><a href="GHC.Types.Name.Reader.html#ShadowedGREs"><span class="hs-identifier hs-var">ShadowedGREs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534487"><span class="hs-identifier hs-var">nonflds1</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace -&gt; UniqSet NameSpace -&gt; UniqSet NameSpace
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">UniqSet NameSpace
</span><a href="#local-6989586621682534490"><span class="hs-identifier hs-var">nonflds2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="#local-6989586621682534488"><span class="hs-identifier hs-var">flds1</span></a></span><span> </span><span class="annot"><span class="annottext">ShadowedFieldGREs -&gt; ShadowedFieldGREs -&gt; ShadowedFieldGREs
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ShadowedFieldGREs
</span><a href="#local-6989586621682534491"><span class="hs-identifier hs-var">flds2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1907"></span><span>
</span><span id="line-1908"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                        ImportSpec
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1915"></span><span>
</span><span id="line-1916"></span><span class="hs-comment">-- | Import Specification</span><span>
</span><span id="line-1917"></span><span class="hs-comment">--</span><span>
</span><span id="line-1918"></span><span class="hs-comment">-- The 'ImportSpec' of something says how it came to be imported</span><span>
</span><span id="line-1919"></span><span class="hs-comment">-- It's quite elaborate so that we can give accurate unused-name warnings.</span><span>
</span><span id="line-1920"></span><span class="hs-keyword">data</span><span> </span><span id="ImportSpec"><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-var">ImportSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ImpSpec"><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSpec"><span class="hs-identifier hs-var">ImpSpec</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="is_decl"><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var hs-var">is_decl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpDeclSpec"><span class="hs-identifier hs-type">ImpDeclSpec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1921"></span><span>                            </span><span id="is_item"><span class="annot"><span class="annottext">ImportSpec -&gt; ImpItemSpec
</span><a href="GHC.Types.Name.Reader.html#is_item"><span class="hs-identifier hs-var hs-var">is_item</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpItemSpec"><span class="hs-identifier hs-type">ImpItemSpec</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1922"></span><span>                </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span id="local-6989586621682534494"><span id="local-6989586621682534500"><span class="annot"><span class="annottext">ImportSpec -&gt; ImportSpec -&gt; Bool
(ImportSpec -&gt; ImportSpec -&gt; Bool)
-&gt; (ImportSpec -&gt; ImportSpec -&gt; Bool) -&gt; Eq ImportSpec
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ImportSpec -&gt; ImportSpec -&gt; Bool
== :: ImportSpec -&gt; ImportSpec -&gt; Bool
$c/= :: ImportSpec -&gt; ImportSpec -&gt; Bool
/= :: ImportSpec -&gt; ImportSpec -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682534506"><span id="local-6989586621682534512"><span id="local-6989586621682534516"><span id="local-6989586621682534518"><span id="local-6989586621682534520"><span id="local-6989586621682534525"><span id="local-6989586621682534530"><span id="local-6989586621682534533"><span id="local-6989586621682534536"><span id="local-6989586621682534539"><span id="local-6989586621682534542"><span id="local-6989586621682534545"><span id="local-6989586621682534550"><span id="local-6989586621682534555"><span class="annot"><span class="annottext">Typeable ImportSpec
Typeable ImportSpec =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; ImportSpec -&gt; c ImportSpec)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImportSpec)
-&gt; (ImportSpec -&gt; Constr)
-&gt; (ImportSpec -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImportSpec))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c ImportSpec))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; ImportSpec -&gt; ImportSpec)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImportSpec -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImportSpec -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImportSpec -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImportSpec -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec)
-&gt; Data ImportSpec
ImportSpec -&gt; Constr
ImportSpec -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; ImportSpec -&gt; ImportSpec
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImportSpec -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImportSpec -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImportSpec -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImportSpec -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImportSpec
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ImportSpec -&gt; c ImportSpec
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImportSpec)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ImportSpec)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ImportSpec -&gt; c ImportSpec
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ImportSpec -&gt; c ImportSpec
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImportSpec
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImportSpec
$ctoConstr :: ImportSpec -&gt; Constr
toConstr :: ImportSpec -&gt; Constr
$cdataTypeOf :: ImportSpec -&gt; DataType
dataTypeOf :: ImportSpec -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImportSpec)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImportSpec)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ImportSpec)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ImportSpec)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ImportSpec -&gt; ImportSpec
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ImportSpec -&gt; ImportSpec
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImportSpec -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImportSpec -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImportSpec -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImportSpec -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImportSpec -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImportSpec -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImportSpec -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImportSpec -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImportSpec -&gt; m ImportSpec
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1923"></span><span>
</span><span id="line-1924"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1925"></span><span>  </span><span id="local-6989586621682534560"><span class="annot"><span class="annottext">rnf :: ImportSpec -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ()
forall a. a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rwhnf"><span class="hs-identifier hs-var">rwhnf</span></a></span><span> </span><span class="hs-comment">-- All fields are strict, so we don't need to do anything</span><span>
</span><span id="line-1926"></span><span>
</span><span id="line-1927"></span><span class="hs-comment">-- | Import Declaration Specification</span><span>
</span><span id="line-1928"></span><span class="hs-comment">--</span><span>
</span><span id="line-1929"></span><span class="hs-comment">-- Describes a particular import declaration and is</span><span>
</span><span id="line-1930"></span><span class="hs-comment">-- shared among all the 'Provenance's for that decl</span><span>
</span><span id="line-1931"></span><span class="hs-keyword">data</span><span> </span><span id="ImpDeclSpec"><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpDeclSpec"><span class="hs-identifier hs-var">ImpDeclSpec</span></a></span></span><span>
</span><span id="line-1932"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ImpDeclSpec"><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpDeclSpec"><span class="hs-identifier hs-var">ImpDeclSpec</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1933"></span><span>        </span><span id="is_mod"><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Module
</span><a href="GHC.Types.Name.Reader.html#is_mod"><span class="hs-identifier hs-var hs-var">is_mod</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- ^ Module imported, e.g. @import Muggle@</span><span>
</span><span id="line-1934"></span><span>                                   </span><span class="hs-comment">-- Note the @Muggle@ may well not be</span><span>
</span><span id="line-1935"></span><span>                                   </span><span class="hs-comment">-- the defining module for this thing!</span><span>
</span><span id="line-1936"></span><span>
</span><span id="line-1937"></span><span>                                   </span><span class="hs-comment">-- TODO: either should be Module, or there</span><span>
</span><span id="line-1938"></span><span>                                   </span><span class="hs-comment">-- should be a Maybe UnitId here too.</span><span>
</span><span id="line-1939"></span><span>        </span><span id="is_as"><span class="annot"><span class="annottext">ImpDeclSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#is_as"><span class="hs-identifier hs-var hs-var">is_as</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-comment">-- ^ Import alias, e.g. from @as M@ (or @Muggle@ if there is no @as@ clause)</span></span><span>
</span><span id="line-1940"></span><span>        </span><span id="is_pkg_qual"><span class="annot"><span class="annottext">ImpDeclSpec -&gt; PkgQual
</span><a href="GHC.Types.Name.Reader.html#is_pkg_qual"><span class="hs-identifier hs-var hs-var">is_pkg_qual</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.PkgQual.html#PkgQual"><span class="hs-identifier hs-type">PkgQual</span></a></span><span class="hs-special">,</span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Was this a package import?</span></span><span>
</span><span id="line-1941"></span><span>        </span><span id="is_qual"><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_qual"><span class="hs-identifier hs-var hs-var">is_qual</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>       </span><span class="annot"><span class="hs-comment">-- ^ Was this import qualified?</span></span><span>
</span><span id="line-1942"></span><span>        </span><span id="is_dloc"><span class="annot"><span class="annottext">ImpDeclSpec -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#is_dloc"><span class="hs-identifier hs-var hs-var">is_dloc</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span>    </span><span class="annot"><span class="hs-comment">-- ^ The location of the entire import declaration</span></span><span>
</span><span id="line-1943"></span><span>        </span><span id="is_isboot"><span class="annot"><span class="annottext">ImpDeclSpec -&gt; IsBootInterface
</span><a href="GHC.Types.Name.Reader.html#is_isboot"><span class="hs-identifier hs-var hs-var">is_isboot</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#IsBootInterface"><span class="hs-identifier hs-type">IsBootInterface</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Was this a SOURCE import?</span></span><span>
</span><span id="line-1944"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682534563"><span id="local-6989586621682534576"><span class="annot"><span class="annottext">ImpDeclSpec -&gt; ImpDeclSpec -&gt; Bool
(ImpDeclSpec -&gt; ImpDeclSpec -&gt; Bool)
-&gt; (ImpDeclSpec -&gt; ImpDeclSpec -&gt; Bool) -&gt; Eq ImpDeclSpec
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ImpDeclSpec -&gt; ImpDeclSpec -&gt; Bool
== :: ImpDeclSpec -&gt; ImpDeclSpec -&gt; Bool
$c/= :: ImpDeclSpec -&gt; ImpDeclSpec -&gt; Bool
/= :: ImpDeclSpec -&gt; ImpDeclSpec -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682534582"><span id="local-6989586621682534594"><span id="local-6989586621682534603"><span id="local-6989586621682534605"><span id="local-6989586621682534607"><span id="local-6989586621682534612"><span id="local-6989586621682534617"><span id="local-6989586621682534620"><span id="local-6989586621682534623"><span id="local-6989586621682534626"><span id="local-6989586621682534629"><span id="local-6989586621682534632"><span id="local-6989586621682534637"><span id="local-6989586621682534642"><span class="annot"><span class="annottext">Typeable ImpDeclSpec
Typeable ImpDeclSpec =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; ImpDeclSpec -&gt; c ImpDeclSpec)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImpDeclSpec)
-&gt; (ImpDeclSpec -&gt; Constr)
-&gt; (ImpDeclSpec -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImpDeclSpec))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c ImpDeclSpec))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; ImpDeclSpec -&gt; ImpDeclSpec)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpDeclSpec -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpDeclSpec -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImpDeclSpec -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImpDeclSpec -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec)
-&gt; Data ImpDeclSpec
ImpDeclSpec -&gt; Constr
ImpDeclSpec -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; ImpDeclSpec -&gt; ImpDeclSpec
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImpDeclSpec -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImpDeclSpec -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpDeclSpec -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpDeclSpec -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImpDeclSpec
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ImpDeclSpec -&gt; c ImpDeclSpec
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImpDeclSpec)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ImpDeclSpec)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ImpDeclSpec -&gt; c ImpDeclSpec
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ImpDeclSpec -&gt; c ImpDeclSpec
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImpDeclSpec
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImpDeclSpec
$ctoConstr :: ImpDeclSpec -&gt; Constr
toConstr :: ImpDeclSpec -&gt; Constr
$cdataTypeOf :: ImpDeclSpec -&gt; DataType
dataTypeOf :: ImpDeclSpec -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImpDeclSpec)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImpDeclSpec)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ImpDeclSpec)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ImpDeclSpec)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ImpDeclSpec -&gt; ImpDeclSpec
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ImpDeclSpec -&gt; ImpDeclSpec
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpDeclSpec -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpDeclSpec -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpDeclSpec -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpDeclSpec -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImpDeclSpec -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImpDeclSpec -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImpDeclSpec -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImpDeclSpec -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpDeclSpec -&gt; m ImpDeclSpec
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1945"></span><span>
</span><span id="line-1946"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpDeclSpec"><span class="hs-identifier hs-type">ImpDeclSpec</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1947"></span><span>  </span><span id="local-6989586621682534648"><span class="annot"><span class="annottext">rnf :: ImpDeclSpec -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; ()
forall a. a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rwhnf"><span class="hs-identifier hs-var">rwhnf</span></a></span><span> </span><span class="hs-comment">-- Already strict in all fields</span><span>
</span><span id="line-1948"></span><span>
</span><span id="line-1949"></span><span class="hs-comment">-- | Import Item Specification</span><span>
</span><span id="line-1950"></span><span class="hs-comment">--</span><span>
</span><span id="line-1951"></span><span class="hs-comment">-- Describes import info a particular Name</span><span>
</span><span id="line-1952"></span><span class="hs-keyword">data</span><span> </span><span id="ImpItemSpec"><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpItemSpec"><span class="hs-identifier hs-var">ImpItemSpec</span></a></span></span><span>
</span><span id="line-1953"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ImpAll"><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpAll"><span class="hs-identifier hs-var">ImpAll</span></a></span></span><span>              </span><span class="hs-comment">-- ^ The import had no import list,</span><span>
</span><span id="line-1954"></span><span>                        </span><span class="hs-comment">-- or had a hiding list</span><span>
</span><span id="line-1955"></span><span>
</span><span id="line-1956"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ImpSome"><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSome"><span class="hs-identifier hs-var">ImpSome</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1957"></span><span>        </span><span id="is_explicit"><span class="annot"><span class="annottext">ImpItemSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_explicit"><span class="hs-identifier hs-var hs-var">is_explicit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-1958"></span><span>        </span><span id="is_iloc"><span class="annot"><span class="annottext">ImpItemSpec -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#is_iloc"><span class="hs-identifier hs-var hs-var">is_iloc</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>  </span><span class="hs-comment">-- Location of the import item</span><span>
</span><span id="line-1959"></span><span>    </span><span class="hs-special">}</span><span>   </span><span class="hs-comment">-- ^ The import had an import list.</span><span>
</span><span id="line-1960"></span><span>        </span><span class="hs-comment">-- The 'is_explicit' field is @True@ iff the thing was named</span><span>
</span><span id="line-1961"></span><span>        </span><span class="hs-comment">-- /explicitly/ in the import specs rather</span><span>
</span><span id="line-1962"></span><span>        </span><span class="hs-comment">-- than being imported as part of a &quot;...&quot; group. Consider:</span><span>
</span><span id="line-1963"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1964"></span><span>        </span><span class="hs-comment">-- &gt; import C( T(..) )</span><span>
</span><span id="line-1965"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1966"></span><span>        </span><span class="hs-comment">-- Here the constructors of @T@ are not named explicitly;</span><span>
</span><span id="line-1967"></span><span>        </span><span class="hs-comment">-- only @T@ is named explicitly.</span><span>
</span><span id="line-1968"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682534653"><span id="local-6989586621682534659"><span class="annot"><span class="annottext">ImpItemSpec -&gt; ImpItemSpec -&gt; Bool
(ImpItemSpec -&gt; ImpItemSpec -&gt; Bool)
-&gt; (ImpItemSpec -&gt; ImpItemSpec -&gt; Bool) -&gt; Eq ImpItemSpec
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ImpItemSpec -&gt; ImpItemSpec -&gt; Bool
== :: ImpItemSpec -&gt; ImpItemSpec -&gt; Bool
$c/= :: ImpItemSpec -&gt; ImpItemSpec -&gt; Bool
/= :: ImpItemSpec -&gt; ImpItemSpec -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682534664"><span id="local-6989586621682534668"><span id="local-6989586621682534672"><span id="local-6989586621682534674"><span id="local-6989586621682534676"><span id="local-6989586621682534681"><span id="local-6989586621682534686"><span id="local-6989586621682534689"><span id="local-6989586621682534692"><span id="local-6989586621682534695"><span id="local-6989586621682534698"><span id="local-6989586621682534701"><span id="local-6989586621682534706"><span id="local-6989586621682534711"><span class="annot"><span class="annottext">Typeable ImpItemSpec
Typeable ImpItemSpec =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; ImpItemSpec -&gt; c ImpItemSpec)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImpItemSpec)
-&gt; (ImpItemSpec -&gt; Constr)
-&gt; (ImpItemSpec -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImpItemSpec))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c ImpItemSpec))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; ImpItemSpec -&gt; ImpItemSpec)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpItemSpec -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpItemSpec -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImpItemSpec -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImpItemSpec -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec)
-&gt; Data ImpItemSpec
ImpItemSpec -&gt; Constr
ImpItemSpec -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; ImpItemSpec -&gt; ImpItemSpec
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImpItemSpec -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImpItemSpec -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpItemSpec -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpItemSpec -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImpItemSpec
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ImpItemSpec -&gt; c ImpItemSpec
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImpItemSpec)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ImpItemSpec)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ImpItemSpec -&gt; c ImpItemSpec
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ImpItemSpec -&gt; c ImpItemSpec
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImpItemSpec
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ImpItemSpec
$ctoConstr :: ImpItemSpec -&gt; Constr
toConstr :: ImpItemSpec -&gt; Constr
$cdataTypeOf :: ImpItemSpec -&gt; DataType
dataTypeOf :: ImpItemSpec -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImpItemSpec)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ImpItemSpec)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ImpItemSpec)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c ImpItemSpec)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ImpItemSpec -&gt; ImpItemSpec
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ImpItemSpec -&gt; ImpItemSpec
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpItemSpec -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpItemSpec -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpItemSpec -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ImpItemSpec -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImpItemSpec -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ImpItemSpec -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImpItemSpec -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ImpItemSpec -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ImpItemSpec -&gt; m ImpItemSpec
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1969"></span><span>
</span><span id="line-1970"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#bestImport"><span class="hs-identifier hs-type">bestImport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span>
</span><span id="line-1971"></span><span class="hs-comment">-- See Note [Choosing the best import declaration]</span><span>
</span><span id="line-1972"></span><span id="bestImport"><span class="annot"><span class="annottext">bestImport :: NonEmpty ImportSpec -&gt; ImportSpec
</span><a href="GHC.Types.Name.Reader.html#bestImport"><span class="hs-identifier hs-var hs-var">bestImport</span></a></span></span><span> </span><span id="local-6989586621682534715"><span class="annot"><span class="annottext">NonEmpty ImportSpec
</span><a href="#local-6989586621682534715"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty ImportSpec -&gt; ImportSpec
forall a. NonEmpty a -&gt; a
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#head"><span class="hs-identifier hs-var">NE.head</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty ImportSpec -&gt; ImportSpec)
-&gt; NonEmpty ImportSpec -&gt; ImportSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ImportSpec -&gt; ImportSpec -&gt; Ordering)
-&gt; NonEmpty ImportSpec -&gt; NonEmpty ImportSpec
forall a. (a -&gt; a -&gt; Ordering) -&gt; NonEmpty a -&gt; NonEmpty a
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#sortBy"><span class="hs-identifier hs-var">NE.sortBy</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ImportSpec -&gt; Ordering
</span><a href="#local-6989586621682534718"><span class="hs-identifier hs-var">best</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty ImportSpec
</span><a href="#local-6989586621682534715"><span class="hs-identifier hs-var">iss</span></a></span><span>
</span><span id="line-1973"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1974"></span><span>    </span><span class="annot"><a href="#local-6989586621682534718"><span class="hs-identifier hs-type">best</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-1975"></span><span>    </span><span class="hs-comment">-- Less means better</span><span>
</span><span id="line-1976"></span><span>    </span><span class="hs-comment">-- Unqualified always wins over qualified; then</span><span>
</span><span id="line-1977"></span><span>    </span><span class="hs-comment">-- import-all wins over import-some; then</span><span>
</span><span id="line-1978"></span><span>    </span><span class="hs-comment">-- earlier declaration wins over later</span><span>
</span><span id="line-1979"></span><span>    </span><span id="local-6989586621682534718"><span class="annot"><span class="annottext">best :: ImportSpec -&gt; ImportSpec -&gt; Ordering
</span><a href="#local-6989586621682534718"><span class="hs-identifier hs-var hs-var">best</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSpec"><span class="hs-identifier hs-type">ImpSpec</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">is_item :: ImportSpec -&gt; ImpItemSpec
</span><a href="GHC.Types.Name.Reader.html#is_item"><span class="hs-identifier hs-var">is_item</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534719"><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="#local-6989586621682534719"><span class="hs-identifier hs-var">item1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_decl :: ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534720"><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682534720"><span class="hs-identifier hs-var">d1</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1980"></span><span>         </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSpec"><span class="hs-identifier hs-type">ImpSpec</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">is_item :: ImportSpec -&gt; ImpItemSpec
</span><a href="GHC.Types.Name.Reader.html#is_item"><span class="hs-identifier hs-var">is_item</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534721"><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="#local-6989586621682534721"><span class="hs-identifier hs-var">item2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">is_decl :: ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534722"><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682534722"><span class="hs-identifier hs-var">d2</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1981"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_qual"><span class="hs-identifier hs-var">is_qual</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682534720"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_qual"><span class="hs-identifier hs-var">is_qual</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682534722"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Ordering
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpItemSpec -&gt; ImpItemSpec -&gt; Ordering
</span><a href="#local-6989586621682534723"><span class="hs-identifier hs-var">best_item</span></a></span><span> </span><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="#local-6989586621682534719"><span class="hs-identifier hs-var">item1</span></a></span><span> </span><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="#local-6989586621682534721"><span class="hs-identifier hs-var">item2</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Ordering
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span>
</span><span id="line-1982"></span><span>        </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="GHC.Types.SrcLoc.html#leftmost_smallest"><span class="hs-identifier hs-var">SrcLoc.leftmost_smallest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#is_dloc"><span class="hs-identifier hs-var">is_dloc</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682534720"><span class="hs-identifier hs-var">d1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#is_dloc"><span class="hs-identifier hs-var">is_dloc</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682534722"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1983"></span><span>
</span><span id="line-1984"></span><span>    </span><span class="annot"><a href="#local-6989586621682534723"><span class="hs-identifier hs-type">best_item</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpItemSpec"><span class="hs-identifier hs-type">ImpItemSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpItemSpec"><span class="hs-identifier hs-type">ImpItemSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-1985"></span><span>    </span><span id="local-6989586621682534723"><span class="annot"><span class="annottext">best_item :: ImpItemSpec -&gt; ImpItemSpec -&gt; Ordering
</span><a href="#local-6989586621682534723"><span class="hs-identifier hs-var hs-var">best_item</span></a></span></span><span> </span><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="GHC.Types.Name.Reader.html#ImpAll"><span class="hs-identifier hs-var">ImpAll</span></a></span><span> </span><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="GHC.Types.Name.Reader.html#ImpAll"><span class="hs-identifier hs-var">ImpAll</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-1986"></span><span>    </span><span class="annot"><a href="#local-6989586621682534723"><span class="hs-identifier hs-var">best_item</span></a></span><span> </span><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="GHC.Types.Name.Reader.html#ImpAll"><span class="hs-identifier hs-var">ImpAll</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSome"><span class="hs-identifier hs-type">ImpSome</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-1987"></span><span>    </span><span class="annot"><a href="#local-6989586621682534723"><span class="hs-identifier hs-var">best_item</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSome"><span class="hs-identifier hs-type">ImpSome</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="GHC.Types.Name.Reader.html#ImpAll"><span class="hs-identifier hs-var">ImpAll</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-1988"></span><span>    </span><span class="annot"><a href="#local-6989586621682534723"><span class="hs-identifier hs-var">best_item</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSome"><span class="hs-identifier hs-type">ImpSome</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">is_explicit :: ImpItemSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_explicit"><span class="hs-identifier hs-var">is_explicit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534725"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534725"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1989"></span><span>              </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSome"><span class="hs-identifier hs-type">ImpSome</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">is_explicit :: ImpItemSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_explicit"><span class="hs-identifier hs-var">is_explicit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534726"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534726"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534725"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534726"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1990"></span><span>     </span><span class="hs-comment">-- False &lt; True, so if e1 is explicit and e2 is not, we get GT</span><span>
</span><span id="line-1991"></span><span>
</span><span id="line-1992"></span><span class="hs-comment">{- Note [Choosing the best import declaration]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When reporting unused import declarations we use the following rules.
   (see [wiki:commentary/compiler/unused-imports])

Say that an import-item is either
  * an entire import-all decl (eg import Foo), or
  * a particular item in an import list (eg import Foo( ..., x, ...)).
The general idea is that for each /occurrence/ of an imported name, we will
attribute that use to one import-item. Once we have processed all the
occurrences, any import items with no uses attributed to them are unused,
and are warned about. More precisely:

1. For every RdrName in the program text, find its GlobalRdrElt.

2. Then, from the [ImportSpec] (gre_imp) of that GRE, choose one
   the &quot;chosen import-item&quot;, and mark it &quot;used&quot;. This is done
   by 'bestImport'

3. After processing all the RdrNames, bleat about any
   import-items that are unused.
   This is done in GHC.Rename.Names.warnUnusedImportDecls.

The function 'bestImport' returns the dominant import among the
ImportSpecs it is given, implementing Step 2.  We say import-item A
dominates import-item B if we choose A over B. In general, we try to
choose the import that is most likely to render other imports
unnecessary.  Here is the dominance relationship we choose:

    a) import Foo dominates import qualified Foo.

    b) import Foo dominates import Foo(x).

    c) Otherwise choose the textually first one.

Rationale for (a).  Consider
   import qualified M  -- Import #1
   import M( x )       -- Import #2
   foo = M.x + x

The unqualified 'x' can only come from import #2.  The qualified 'M.x'
could come from either, but bestImport picks import #2, because it is
more likely to be useful in other imports, as indeed it is in this
case (see #5211 for a concrete example).

But the rules are not perfect; consider
   import qualified M  -- Import #1
   import M( x )       -- Import #2
   foo = M.x + M.y

The M.x will use import #2, but M.y can only use import #1.
-}</span><span>
</span><span id="line-2044"></span><span>
</span><span id="line-2045"></span><span>
</span><span id="line-2046"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#unQualSpecOK"><span class="hs-identifier hs-type">unQualSpecOK</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2047"></span><span class="annot"><span class="hs-comment">-- ^ Is in scope unqualified?</span></span><span>
</span><span id="line-2048"></span><span id="unQualSpecOK"><span class="annot"><span class="annottext">unQualSpecOK :: ImportSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#unQualSpecOK"><span class="hs-identifier hs-var hs-var">unQualSpecOK</span></a></span></span><span> </span><span id="local-6989586621682534727"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534727"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_qual"><span class="hs-identifier hs-var">is_qual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534727"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2049"></span><span>
</span><span id="line-2050"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#qualSpecOK"><span class="hs-identifier hs-type">qualSpecOK</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2051"></span><span class="annot"><span class="hs-comment">-- ^ Is in scope qualified with the given module?</span></span><span>
</span><span id="line-2052"></span><span id="qualSpecOK"><span class="annot"><span class="annottext">qualSpecOK :: ModuleName -&gt; ImportSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#qualSpecOK"><span class="hs-identifier hs-var hs-var">qualSpecOK</span></a></span></span><span> </span><span id="local-6989586621682534728"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534728"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682534729"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534729"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682534728"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#is_as"><span class="hs-identifier hs-var">is_as</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534729"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2053"></span><span>
</span><span id="line-2054"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#importSpecLoc"><span class="hs-identifier hs-type">importSpecLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-2055"></span><span id="importSpecLoc"><span class="annot"><span class="annottext">importSpecLoc :: ImportSpec -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#importSpecLoc"><span class="hs-identifier hs-var hs-var">importSpecLoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSpec"><span class="hs-identifier hs-type">ImpSpec</span></a></span><span> </span><span id="local-6989586621682534730"><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682534730"><span class="hs-identifier hs-var">decl</span></a></span></span><span> </span><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="GHC.Types.Name.Reader.html#ImpAll"><span class="hs-identifier hs-var">ImpAll</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#is_dloc"><span class="hs-identifier hs-var">is_dloc</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682534730"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-2056"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#importSpecLoc"><span class="hs-identifier hs-var">importSpecLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSpec"><span class="hs-identifier hs-type">ImpSpec</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><span class="hs-identifier">_</span></span><span>    </span><span id="local-6989586621682534731"><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="#local-6989586621682534731"><span class="hs-identifier hs-var">item</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpItemSpec -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#is_iloc"><span class="hs-identifier hs-var">is_iloc</span></a></span><span> </span><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="#local-6989586621682534731"><span class="hs-identifier hs-var">item</span></a></span><span>
</span><span id="line-2057"></span><span>
</span><span id="line-2058"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#importSpecModule"><span class="hs-identifier hs-type">importSpecModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-2059"></span><span id="importSpecModule"><span class="annot"><span class="annottext">importSpecModule :: ImportSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#importSpecModule"><span class="hs-identifier hs-var hs-var">importSpecModule</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">(Module -&gt; ModuleName)
-&gt; (ImportSpec -&gt; Module) -&gt; ImportSpec -&gt; ModuleName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Module
</span><a href="GHC.Types.Name.Reader.html#is_mod"><span class="hs-identifier hs-var">is_mod</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpDeclSpec -&gt; Module)
-&gt; (ImportSpec -&gt; ImpDeclSpec) -&gt; ImportSpec -&gt; Module
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span>
</span><span id="line-2060"></span><span>
</span><span id="line-2061"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isExplicitItem"><span class="hs-identifier hs-type">isExplicitItem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpItemSpec"><span class="hs-identifier hs-type">ImpItemSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2062"></span><span id="isExplicitItem"><span class="annot"><span class="annottext">isExplicitItem :: ImpItemSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isExplicitItem"><span class="hs-identifier hs-var hs-var">isExplicitItem</span></a></span></span><span> </span><span class="annot"><span class="annottext">ImpItemSpec
</span><a href="GHC.Types.Name.Reader.html#ImpAll"><span class="hs-identifier hs-var">ImpAll</span></a></span><span>                        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2063"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#isExplicitItem"><span class="hs-identifier hs-var">isExplicitItem</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImpSome"><span class="hs-identifier hs-type">ImpSome</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">is_explicit :: ImpItemSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_explicit"><span class="hs-identifier hs-var">is_explicit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534732"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534732"><span class="hs-identifier hs-var">exp</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534732"><span class="hs-identifier hs-var">exp</span></a></span><span>
</span><span id="line-2064"></span><span>
</span><span id="line-2065"></span><span id="local-6989586621682532945"><span class="annot"><a href="GHC.Types.Name.Reader.html#pprNameProvenance"><span class="hs-identifier hs-type">pprNameProvenance</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEltX"><span class="hs-identifier hs-type">GlobalRdrEltX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682532945"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span></span><span>
</span><span id="line-2066"></span><span class="hs-comment">-- ^ Print out one place where the name was define/imported</span><span>
</span><span id="line-2067"></span><span class="hs-comment">-- (With -dppr-debug, print them all)</span><span>
</span><span id="line-2068"></span><span id="pprNameProvenance"><span class="annot"><span class="annottext">pprNameProvenance :: forall info. GlobalRdrEltX info -&gt; SDoc
</span><a href="GHC.Types.Name.Reader.html#pprNameProvenance"><span class="hs-identifier hs-var hs-var">pprNameProvenance</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_name :: forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var">gre_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534744"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534744"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534745"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534745"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682534746"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534746"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2069"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsOutput doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#ifPprDebug"><span class="hs-identifier hs-var">ifPprDebug</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682534748"><span class="hs-identifier hs-var">pp_provs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2070"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="GHC.Prelude.Basic.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682534748"><span class="hs-identifier hs-var">pp_provs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2071"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2072"></span><span>    </span><span id="local-6989586621682534748"><span class="annot"><span class="annottext">pp_provs :: [SDoc]
</span><a href="#local-6989586621682534748"><span class="hs-identifier hs-var hs-var">pp_provs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682534750"><span class="hs-identifier hs-var">pp_lcl</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; [SDoc] -&gt; [SDoc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(ImportSpec -&gt; SDoc) -&gt; [ImportSpec] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; SDoc
</span><a href="#local-6989586621682534751"><span class="hs-identifier hs-var">pp_is</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; [ImportSpec]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682534746"><span class="hs-identifier hs-var">iss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2073"></span><span>    </span><span id="local-6989586621682534750"><span class="annot"><span class="annottext">pp_lcl :: [SDoc]
</span><a href="#local-6989586621682534750"><span class="hs-identifier hs-var hs-var">pp_lcl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534745"><span class="hs-identifier hs-var">lcl</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;defined at&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#nameSrcLoc"><span class="hs-identifier hs-var">nameSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534744"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2074"></span><span>                    </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2075"></span><span>    </span><span id="local-6989586621682534751"><span class="annot"><span class="annottext">pp_is :: ImportSpec -&gt; SDoc
</span><a href="#local-6989586621682534751"><span class="hs-identifier hs-var hs-var">pp_is</span></a></span></span><span> </span><span id="local-6989586621682534753"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534753"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ImportSpec -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534753"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; Name -&gt; SDoc
</span><a href="GHC.Types.Name.Reader.html#ppr_defn_site"><span class="hs-identifier hs-var">ppr_defn_site</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534753"><span class="hs-identifier hs-var">is</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534744"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2076"></span><span>
</span><span id="line-2077"></span><span class="hs-comment">-- If we know the exact definition point (which we may do with GHCi)</span><span>
</span><span id="line-2078"></span><span class="hs-comment">-- then show that too.  But not if it's just &quot;imported from X&quot;.</span><span>
</span><span id="line-2079"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#ppr_defn_site"><span class="hs-identifier hs-type">ppr_defn_site</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2080"></span><span id="ppr_defn_site"><span class="annot"><span class="annottext">ppr_defn_site :: ImportSpec -&gt; Name -&gt; SDoc
</span><a href="GHC.Types.Name.Reader.html#ppr_defn_site"><span class="hs-identifier hs-var hs-var">ppr_defn_site</span></a></span></span><span> </span><span id="local-6989586621682534756"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534756"><span class="hs-identifier hs-var">imp_spec</span></a></span></span><span> </span><span id="local-6989586621682534757"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534757"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-2081"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534758"><span class="hs-identifier hs-var">same_module</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; Bool
</span><a href="GHC.Types.SrcLoc.html#isGoodSrcSpan"><span class="hs-identifier hs-var">isGoodSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682534760"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2082"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>              </span><span class="hs-comment">-- Nothing interesting to say</span><span>
</span><span id="line-2083"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-2084"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;and originally defined&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682534761"><span class="hs-identifier hs-var">pp_mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2085"></span><span>                </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc
</span><a href="GHC.Types.Name.Reader.html#pprLoc"><span class="hs-identifier hs-var">pprLoc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682534760"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2086"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2087"></span><span>    </span><span id="local-6989586621682534760"><span class="annot"><span class="annottext">loc :: SrcSpan
</span><a href="#local-6989586621682534760"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SrcSpan
</span><a href="GHC.Types.Name.html#nameSrcSpan"><span class="hs-identifier hs-var">nameSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534757"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2088"></span><span>    </span><span id="local-6989586621682534763"><span class="annot"><span class="annottext">defining_mod :: Module
</span><a href="#local-6989586621682534763"><span class="hs-identifier hs-var hs-var">defining_mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; Module -&gt; Module
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isExternalName"><span class="hs-identifier hs-var">isExternalName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534757"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534757"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Module -&gt; Module) -&gt; Module -&gt; Module
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Module
Name -&gt; Module
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682534757"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2089"></span><span>    </span><span id="local-6989586621682534758"><span class="annot"><span class="annottext">same_module :: Bool
</span><a href="#local-6989586621682534758"><span class="hs-identifier hs-var hs-var">same_module</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#importSpecModule"><span class="hs-identifier hs-var">importSpecModule</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534756"><span class="hs-identifier hs-var">imp_spec</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682534763"><span class="hs-identifier hs-var">defining_mod</span></a></span><span>
</span><span id="line-2090"></span><span>    </span><span id="local-6989586621682534761"><span class="annot"><span class="annottext">pp_mod :: SDoc
</span><a href="#local-6989586621682534761"><span class="hs-identifier hs-var hs-var">pp_mod</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682534758"><span class="hs-identifier hs-var">same_module</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2091"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;in&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682534763"><span class="hs-identifier hs-var">defining_mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2092"></span><span>
</span><span id="line-2093"></span><span>
</span><span id="line-2094"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2095"></span><span>   </span><span id="local-6989586621682534775"><span class="annot"><span class="annottext">ppr :: ImportSpec -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682534776"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534776"><span class="hs-identifier hs-var">imp_spec</span></a></span></span><span>
</span><span id="line-2096"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;imported&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682534777"><span class="hs-identifier hs-var">qual</span></a></span><span>
</span><span id="line-2097"></span><span>        </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;from&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#importSpecModule"><span class="hs-identifier hs-var">importSpecModule</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534776"><span class="hs-identifier hs-var">imp_spec</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2098"></span><span>        </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc
</span><a href="GHC.Types.Name.Reader.html#pprLoc"><span class="hs-identifier hs-var">pprLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportSpec -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#importSpecLoc"><span class="hs-identifier hs-var">importSpecLoc</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534776"><span class="hs-identifier hs-var">imp_spec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2099"></span><span>     </span><span class="hs-keyword">where</span><span>
</span><span id="line-2100"></span><span>       </span><span id="local-6989586621682534777"><span class="annot"><span class="annottext">qual :: SDoc
</span><a href="#local-6989586621682534777"><span class="hs-identifier hs-var hs-var">qual</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_qual"><span class="hs-identifier hs-var">is_qual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682534776"><span class="hs-identifier hs-var">imp_spec</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;qualified&quot;</span></span><span>
</span><span id="line-2101"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2102"></span><span>
</span><span id="line-2103"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#pprLoc"><span class="hs-identifier hs-type">pprLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-2104"></span><span id="pprLoc"><span class="annot"><span class="annottext">pprLoc :: SrcSpan -&gt; SDoc
</span><a href="GHC.Types.Name.Reader.html#pprLoc"><span class="hs-identifier hs-var hs-var">pprLoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span id="local-6989586621682534779"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682534779"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;at&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682534779"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-2105"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#pprLoc"><span class="hs-identifier hs-var">pprLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#UnhelpfulSpan"><span class="hs-identifier hs-type">UnhelpfulSpan</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2106"></span><span>
</span><span id="line-2107"></span><span class="annot"><span class="hs-comment">-- | Indicate if the given name is the &quot;@&quot; operator</span></span><span>
</span><span id="line-2108"></span><span class="annot"><a href="GHC.Types.Name.Reader.html#opIsAt"><span class="hs-identifier hs-type">opIsAt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2109"></span><span id="opIsAt"><span class="annot"><span class="annottext">opIsAt :: RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#opIsAt"><span class="hs-identifier hs-var hs-var">opIsAt</span></a></span></span><span> </span><span id="local-6989586621682534781"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682534781"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682534781"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; FastString -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkUnqual"><span class="hs-identifier hs-var">mkUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2110"></span></pre></body></html>