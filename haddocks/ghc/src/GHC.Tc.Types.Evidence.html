<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621682611195"><span id="local-6989586621682611196"><span id="local-6989586621682611197"><span id="local-6989586621682611198"><span id="local-6989586621682611199"><span id="local-6989586621682611200"><span id="local-6989586621682611201"><span id="local-6989586621682611202"><span id="local-6989586621682611203"><span id="local-6989586621682611204"><span id="local-6989586621682611205"><span id="local-6989586621682611206"><span id="local-6989586621682611207"><span id="local-6989586621682611208"><span id="local-6989586621682611209"><span id="local-6989586621682611210"><span id="local-6989586621682611211"><span id="local-6989586621682611212"><span id="local-6989586621682611213"><span id="local-6989586621682611214"><span id="local-6989586621682611215"><span id="local-6989586621682611216"><span id="local-6989586621682611217"><span id="local-6989586621682611218"><span id="local-6989586621682611219"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-comment">-- (c) The University of Glasgow 2006</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html"><span class="hs-identifier">GHC.Tc.Types.Evidence</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span>  </span><span class="annot"><span class="hs-comment">-- * HsWrapper</span></span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier">HsWrapper</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator">(&lt;.&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpTyApps"><span class="hs-identifier">mkWpTyApps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpEvApps"><span class="hs-identifier">mkWpEvApps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpEvVarApps"><span class="hs-identifier">mkWpEvVarApps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpTyLams"><span class="hs-identifier">mkWpTyLams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpForAllCast"><span class="hs-identifier">mkWpForAllCast</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpEvLams"><span class="hs-identifier">mkWpEvLams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpLet"><span class="hs-identifier">mkWpLet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpFun"><span class="hs-identifier">mkWpFun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpCastN"><span class="hs-identifier">mkWpCastN</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpCastR"><span class="hs-identifier">mkWpCastR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpEta"><span class="hs-identifier">mkWpEta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#collectHsWrapBinders"><span class="hs-identifier">collectHsWrapBinders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#idHsWrapper"><span class="hs-identifier">idHsWrapper</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isIdHsWrapper"><span class="hs-identifier">isIdHsWrapper</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#pprHsWrapper"><span class="hs-identifier">pprHsWrapper</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#hsWrapDictBinders"><span class="hs-identifier">hsWrapDictBinders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Evidence bindings</span></span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier">TcEvBinds</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier">EvBindsVar</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier">EvBindMap</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#emptyEvBindMap"><span class="hs-identifier">emptyEvBindMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#extendEvBinds"><span class="hs-identifier">extendEvBinds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#lookupEvBind"><span class="hs-identifier">lookupEvBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evBindMapBinds"><span class="hs-identifier">evBindMapBinds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#foldEvBindMap"><span class="hs-identifier">foldEvBindMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#nonDetStrictFoldEvBindMap"><span class="hs-identifier">nonDetStrictFoldEvBindMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#filterEvBindMap"><span class="hs-identifier">filterEvBindMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isEmptyEvBindMap"><span class="hs-identifier">isEmptyEvBindMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evBindMapToVarSet"><span class="hs-identifier">evBindMapToVarSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#varSetMinusEvBindMap"><span class="hs-identifier">varSetMinusEvBindMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindInfo"><span class="hs-identifier">EvBindInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier">EvBind</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#emptyTcEvBinds"><span class="hs-identifier">emptyTcEvBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isEmptyTcEvBinds"><span class="hs-identifier">isEmptyTcEvBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkGivenEvBind"><span class="hs-identifier">mkGivenEvBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWantedEvBind"><span class="hs-identifier">mkWantedEvBind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evBindVar"><span class="hs-identifier">evBindVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isCoEvBindsVar"><span class="hs-identifier">isCoEvBindsVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><span class="hs-comment">-- * EvTerm (already a CoreExpr)</span></span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier">EvTerm</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier">EvExpr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evId"><span class="hs-identifier">evId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evCoercion"><span class="hs-identifier">evCoercion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evCast"><span class="hs-identifier">evCast</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evDFunApp"><span class="hs-identifier">evDFunApp</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evDataConApp"><span class="hs-identifier">evDataConApp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evSelector"><span class="hs-identifier">evSelector</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkEvCast"><span class="hs-identifier">mkEvCast</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerm"><span class="hs-identifier">evVarsOfTerm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkEvScSelectors"><span class="hs-identifier">mkEvScSelectors</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evTypeable"><span class="hs-identifier">evTypeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#findNeededEvVars"><span class="hs-identifier">findNeededEvVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evTermCoercion"><span class="hs-identifier">evTermCoercion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evTermCoercion_maybe"><span class="hs-identifier">evTermCoercion_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvCallStack"><span class="hs-identifier">EvCallStack</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier">EvTypeable</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><span class="hs-comment">-- * HoleExprRef</span></span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HoleExprRef"><span class="hs-identifier">HoleExprRef</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><span class="hs-comment">-- * TcCoercion</span></span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier">TcCoercion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionR"><span class="hs-identifier">TcCoercionR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionN"><span class="hs-identifier">TcCoercionN</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionP"><span class="hs-identifier">TcCoercionP</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier">CoercionHole</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcMCoercion"><span class="hs-identifier">TcMCoercion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcMCoercionN"><span class="hs-identifier">TcMCoercionN</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcMCoercionR"><span class="hs-identifier">TcMCoercionR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#MultiplicityCheckCoercions"><span class="hs-identifier">MultiplicityCheckCoercions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier">Role</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#LeftOrRight"><span class="hs-identifier">LeftOrRight</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#pickLR"><span class="hs-identifier">pickLR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#maybeSymCo"><span class="hs-identifier">maybeSymCo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#unwrapIP"><span class="hs-identifier">unwrapIP</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#wrapIP"><span class="hs-identifier">wrapIP</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><span class="hs-comment">-- * QuoteWrapper</span></span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier">QuoteWrapper</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#applyQuoteWrapper"><span class="hs-identifier">applyQuoteWrapper</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#quoteWrapperTyVarTy"><span class="hs-identifier">quoteWrapperTyVarTy</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DFM.html"><span class="hs-identifier">GHC.Types.Unique.DFM</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html"><span class="hs-identifier">GHC.Types.Unique.FM</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idScaledType"><span class="hs-identifier">idScaledType</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html"><span class="hs-identifier">GHC.Core.Coercion.Axiom</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html"><span class="hs-identifier">GHC.Core.Coercion</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Ppr.html"><span class="hs-identifier">GHC.Core.Ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Instance OutputableBndr TyVar</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier">DataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConWrapId"><span class="hs-identifier">dataConWrapId</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html"><span class="hs-identifier">GHC.Types.Var.Set</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html"><span class="hs-identifier">GHC.Core.Predicate</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Class.html"><span class="hs-identifier">GHC.Core.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Class.html#Class"><span class="hs-identifier">Class</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Class.html#classSCSelId"><span class="hs-identifier">classSCSelId</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.FVs.html"><span class="hs-identifier">GHC.Core.FVs</span></a></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.FVs.html#exprSomeFreeVars"><span class="hs-identifier">exprSomeFreeVars</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html"><span class="hs-identifier">GHC.Core.InstEnv</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#CanonicalEvidence"><span class="hs-identifier">CanonicalEvidence</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Data.html"><span class="hs-identifier">Data.Data</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Data</span></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.IORef.html"><span class="hs-identifier">Data.IORef</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">IORef</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html"><span class="hs-identifier">GHC.Core.Multiplicity</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-comment">{-
Note [TcCoercions]
~~~~~~~~~~~~~~~~~~
| TcCoercions are a hack used by the typechecker. Normally,
Coercions have free variables of type (a ~# b): we call these
CoVars. However, the type checker passes around equality evidence
(boxed up) at type (a ~ b).

An TcCoercion is simply a Coercion whose free variables have may be either
boxed or unboxed. After we are done with typechecking the desugarer finds the
boxed free variables, unboxes them, and creates a resulting real Coercion with
kosher free variables.

-}</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">type</span><span> </span><span id="TcCoercion"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-var">TcCoercion</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-106"></span><span class="hs-keyword">type</span><span> </span><span id="TcCoercionN"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionN"><span class="hs-identifier hs-var">TcCoercionN</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionN"><span class="hs-identifier hs-type">CoercionN</span></a></span><span>    </span><span class="hs-comment">-- A Nominal          coercion ~N</span><span>
</span><span id="line-107"></span><span class="hs-keyword">type</span><span> </span><span id="TcCoercionR"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionR"><span class="hs-identifier hs-var">TcCoercionR</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionR"><span class="hs-identifier hs-type">CoercionR</span></a></span><span>    </span><span class="hs-comment">-- A Representational coercion ~R</span><span>
</span><span id="line-108"></span><span class="hs-keyword">type</span><span> </span><span id="TcCoercionP"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionP"><span class="hs-identifier hs-var">TcCoercionP</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionP"><span class="hs-identifier hs-type">CoercionP</span></a></span><span>    </span><span class="hs-comment">-- a phantom coercion</span><span>
</span><span id="line-109"></span><span class="hs-keyword">type</span><span> </span><span id="TcMCoercion"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcMCoercion"><span class="hs-identifier hs-var">TcMCoercion</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercion"><span class="hs-identifier hs-type">MCoercion</span></a></span><span>
</span><span id="line-110"></span><span class="hs-keyword">type</span><span> </span><span id="TcMCoercionN"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcMCoercionN"><span class="hs-identifier hs-var">TcMCoercionN</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercionN"><span class="hs-identifier hs-type">MCoercionN</span></a></span><span>  </span><span class="hs-comment">-- nominal</span><span>
</span><span id="line-111"></span><span class="hs-keyword">type</span><span> </span><span id="TcMCoercionR"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcMCoercionR"><span class="hs-identifier hs-var">TcMCoercionR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercionR"><span class="hs-identifier hs-type">MCoercionR</span></a></span><span>  </span><span class="hs-comment">-- representational</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-keyword">type</span><span> </span><span id="MultiplicityCheckCoercions"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#MultiplicityCheckCoercions"><span class="hs-identifier hs-var">MultiplicityCheckCoercions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- Coercions which must all be reflexivity after zonking.</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- See Note [Coercions returned from tcSubMult] in GHC.Tc.Utils.Unify.</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="annot"><span class="hs-comment">-- | If a 'SwapFlag' is 'IsSwapped', flip the orientation of a coercion</span></span><span>
</span><span id="line-119"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#maybeSymCo"><span class="hs-identifier hs-type">maybeSymCo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#SwapFlag"><span class="hs-identifier hs-type">SwapFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span>
</span><span id="line-120"></span><span id="maybeSymCo"><span class="annot"><span class="annottext">maybeSymCo :: SwapFlag -&gt; TcCoercion -&gt; TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#maybeSymCo"><span class="hs-identifier hs-var hs-var">maybeSymCo</span></a></span></span><span> </span><span class="annot"><span class="annottext">SwapFlag
</span><a href="GHC.Types.Basic.html#IsSwapped"><span class="hs-identifier hs-var">IsSwapped</span></a></span><span>  </span><span id="local-6989586621682611384"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611384"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkSymCo"><span class="hs-identifier hs-var">mkSymCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611384"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-121"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#maybeSymCo"><span class="hs-identifier hs-var">maybeSymCo</span></a></span><span> </span><span class="annot"><span class="annottext">SwapFlag
</span><a href="GHC.Types.Basic.html#NotSwapped"><span class="hs-identifier hs-var">NotSwapped</span></a></span><span> </span><span id="local-6989586621682611387"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611387"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611387"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">{-
%************************************************************************
%*                                                                      *
                  HsWrapper
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">-- We write    wrap :: t1 ~&gt; t2</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- if       wrap[ e::t1 ] :: t2</span><span>
</span><span id="line-133"></span><span class="hs-keyword">data</span><span> </span><span id="HsWrapper"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-var">HsWrapper</span></a></span></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="WpHole"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span></span><span>                      </span><span class="hs-comment">-- The identity coercion</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WpCompose"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-identifier hs-var">WpCompose</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-137"></span><span>       </span><span class="hs-comment">-- (wrap1 `WpCompose` wrap2)[e] = wrap1[ wrap2[ e ]]</span><span>
</span><span id="line-138"></span><span>       </span><span class="hs-comment">--</span><span>
</span><span id="line-139"></span><span>       </span><span class="hs-comment">-- Hence  (\a. []) `WpCompose` (\b. []) = (\a b. [])</span><span>
</span><span id="line-140"></span><span>       </span><span class="hs-comment">-- But    ([] a)   `WpCompose` ([] b)   = ([] b a)</span><span>
</span><span id="line-141"></span><span>       </span><span class="hs-comment">--</span><span>
</span><span id="line-142"></span><span>       </span><span class="hs-comment">-- If wrap1 :: t2 ~&gt; t3</span><span>
</span><span id="line-143"></span><span>       </span><span class="hs-comment">--    wrap2 :: t1 ~&gt; t2</span><span>
</span><span id="line-144"></span><span>       </span><span class="hs-comment">--- Then (wrap1 `WpCompose` wrap2) :: t1 ~&gt; t3</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WpFun"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-var">WpFun</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTypeFRR"><span class="hs-identifier hs-type">TcTypeFRR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>       </span><span class="hs-comment">-- (WpFun wrap1 wrap2 (w, t1))[e] = \(x:_w exp_arg). wrap2[ e wrap1[x] ]</span><span>
</span><span id="line-148"></span><span>       </span><span class="hs-comment">-- So note that if  e     :: act_arg -&gt; act_res</span><span>
</span><span id="line-149"></span><span>       </span><span class="hs-comment">--                  wrap1 :: exp_arg ~&gt; act_arg</span><span>
</span><span id="line-150"></span><span>       </span><span class="hs-comment">--                  wrap2 :: act_res ~&gt; exp_res</span><span>
</span><span id="line-151"></span><span>       </span><span class="hs-comment">--           then   WpFun wrap1 wrap2 : (act_arg -&gt; arg_res) ~&gt; (exp_arg -&gt; exp_res)</span><span>
</span><span id="line-152"></span><span>       </span><span class="hs-comment">-- This isn't the same as for mkFunCo, but it has to be this way</span><span>
</span><span id="line-153"></span><span>       </span><span class="hs-comment">-- because we can't use 'sym' to flip around these HsWrappers</span><span>
</span><span id="line-154"></span><span>       </span><span class="hs-comment">-- The TcType is the &quot;from&quot; type of the first wrapper;</span><span>
</span><span id="line-155"></span><span>       </span><span class="hs-comment">--     it always a Type, not a Constraint</span><span>
</span><span id="line-156"></span><span>       </span><span class="hs-comment">--</span><span>
</span><span id="line-157"></span><span>       </span><span class="hs-comment">-- NB: a WpFun is always for a (-&gt;) function arrow</span><span>
</span><span id="line-158"></span><span>       </span><span class="hs-comment">--</span><span>
</span><span id="line-159"></span><span>       </span><span class="hs-comment">-- Use 'mkWpFun' to construct such a wrapper.</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WpCast"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a></span><span>        </span><span class="hs-comment">-- A cast:  [] `cast` co</span><span>
</span><span id="line-162"></span><span>                              </span><span class="hs-comment">-- Guaranteed not the identity coercion</span><span>
</span><span id="line-163"></span><span>                              </span><span class="hs-comment">-- At role Representational</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span>        </span><span class="hs-comment">-- Evidence abstraction and application</span><span>
</span><span id="line-166"></span><span>        </span><span class="hs-comment">-- (both dictionaries and coercions)</span><span>
</span><span id="line-167"></span><span>        </span><span class="hs-comment">-- Both WpEvLam and WpEvApp abstract and apply values</span><span>
</span><span id="line-168"></span><span>        </span><span class="hs-comment">--      of kind CONSTRAINT rep</span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WpEvLam"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-var">WpEvLam</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>               </span><span class="hs-comment">-- \d. []       the 'd' is an evidence variable</span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WpEvApp"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-var">WpEvApp</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>              </span><span class="hs-comment">-- [] d         the 'd' is evidence for a constraint</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span>        </span><span class="hs-comment">-- Kind and Type abstraction and application</span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WpTyLam"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-var">WpTyLam</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span>       </span><span class="hs-comment">-- \a. []  the 'a' is a type/kind variable (not coercion var)</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WpTyApp"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyApp"><span class="hs-identifier hs-var">WpTyApp</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindOrType"><span class="hs-identifier hs-type">KindOrType</span></a></span><span>  </span><span class="hs-comment">-- [] t    the 't' is a type (not coercion)</span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WpLet"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpLet"><span class="hs-identifier hs-var">WpLet</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span>             </span><span class="hs-comment">-- Non-empty (or possibly non-empty) evidence bindings,</span><span>
</span><span id="line-178"></span><span>                                </span><span class="hs-comment">-- so that the identity coercion is always exactly WpHole</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WpMultCoercion"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpMultCoercion"><span class="hs-identifier hs-var">WpMultCoercion</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>     </span><span class="hs-comment">-- Require that a Coercion be reflexive; otherwise,</span><span>
</span><span id="line-181"></span><span>                                </span><span class="hs-comment">-- error in the desugarer. See GHC.Tc.Utils.Unify</span><span>
</span><span id="line-182"></span><span>                                </span><span class="hs-comment">-- Note [Coercions returned from tcSubMult]</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682611405"><span id="local-6989586621682611426"><span id="local-6989586621682611441"><span id="local-6989586621682611443"><span id="local-6989586621682611445"><span id="local-6989586621682611450"><span id="local-6989586621682611455"><span id="local-6989586621682611458"><span id="local-6989586621682611461"><span id="local-6989586621682611464"><span id="local-6989586621682611467"><span id="local-6989586621682611470"><span id="local-6989586621682611475"><span id="local-6989586621682611480"><span class="annot"><span class="annottext">Typeable HsWrapper
Typeable HsWrapper =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; HsWrapper -&gt; c HsWrapper)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsWrapper)
-&gt; (HsWrapper -&gt; Constr)
-&gt; (HsWrapper -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsWrapper))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsWrapper))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; HsWrapper -&gt; HsWrapper)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsWrapper -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsWrapper -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsWrapper -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsWrapper -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper)
-&gt; Data HsWrapper
HsWrapper -&gt; Constr
HsWrapper -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; HsWrapper -&gt; HsWrapper
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsWrapper -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsWrapper -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsWrapper -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsWrapper -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsWrapper
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; HsWrapper -&gt; c HsWrapper
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsWrapper)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsWrapper)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; HsWrapper -&gt; c HsWrapper
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; HsWrapper -&gt; c HsWrapper
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsWrapper
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsWrapper
$ctoConstr :: HsWrapper -&gt; Constr
toConstr :: HsWrapper -&gt; Constr
$cdataTypeOf :: HsWrapper -&gt; DataType
dataTypeOf :: HsWrapper -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsWrapper)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsWrapper)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsWrapper)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsWrapper)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; HsWrapper -&gt; HsWrapper
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; HsWrapper -&gt; HsWrapper
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsWrapper -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsWrapper -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsWrapper -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsWrapper -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsWrapper -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsWrapper -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsWrapper -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsWrapper -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsWrapper -&gt; m HsWrapper
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- | The Semigroup instance is a bit fishy, since @WpCompose@, as a data</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- constructor, is &quot;syntactic&quot; and not associative. Concretely, if @a@, @b@,</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- and @c@ aren't @WpHole@:</span><span>
</span><span id="line-188"></span><span class="hs-comment">--</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- &gt; (a &lt;&gt; b) &lt;&gt; c ?= a &lt;&gt; (b &lt;&gt; c)</span><span>
</span><span id="line-190"></span><span class="hs-comment">--</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- ==&gt;</span><span>
</span><span id="line-192"></span><span class="hs-comment">--</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- &gt; (a `WpCompose` b) `WpCompose` c /= @ a `WpCompose` (b `WpCompose` c)</span><span>
</span><span id="line-194"></span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- However these two associations are are &quot;semantically equal&quot; in the sense</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- that they produce equal functions when passed to</span><span>
</span><span id="line-197"></span><span class="hs-comment">-- @GHC.HsToCore.Binds.dsHsWrapper@.</span><span>
</span><span id="line-198"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682611492"><span id="local-6989586621682611496"><span class="annot"><span class="hs-identifier hs-type">S.Semigroup</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-199"></span><span>  </span><span id="local-6989586621682611501"><span class="annot"><span class="annottext">&lt;&gt; :: HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><span class="hs-operator hs-var hs-var hs-var">(&lt;&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator hs-var">(&lt;.&gt;)</span></a></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682611506"><span id="local-6989586621682611510"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-202"></span><span>  </span><span id="local-6989586621682611513"><span class="annot"><span class="annottext">mempty :: HsWrapper
</span><span class="hs-identifier hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator hs-type">(&lt;.&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-205"></span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span> </span><span id="%3C.%3E"><span class="annot"><span class="annottext">&lt;.&gt; :: HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator hs-var hs-var">&lt;.&gt;</span></a></span></span><span> </span><span id="local-6989586621682611514"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611514"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611514"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-206"></span><span id="local-6989586621682611515"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611515"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611515"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-207"></span><span id="local-6989586621682611516"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611516"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span id="local-6989586621682611517"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611517"><span class="hs-identifier hs-var">c2</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611516"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-operator hs-var">`WpCompose`</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611517"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-comment">-- | Smart constructor to create a 'WpFun' 'HsWrapper'.</span><span>
</span><span id="line-210"></span><span class="hs-comment">--</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- PRECONDITION: the &quot;from&quot; type of the first wrapper must have a syntactically</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- fixed RuntimeRep (see Note [Fixed RuntimeRep] in GHC.Tc.Utils.Concrete).</span><span>
</span><span id="line-213"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpFun"><span class="hs-identifier hs-type">mkWpFun</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-214"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTypeFRR"><span class="hs-identifier hs-type">TcTypeFRR</span></a></span><span> </span><span class="hs-comment">-- ^ the &quot;from&quot; type of the first wrapper</span><span>
</span><span id="line-215"></span><span>                            </span><span class="hs-comment">-- MUST have a fixed RuntimeRep</span><span>
</span><span id="line-216"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>           </span><span class="hs-comment">-- ^ Either &quot;from&quot; type or &quot;to&quot; type of the second wrapper</span><span>
</span><span id="line-217"></span><span>                            </span><span class="hs-comment">--   (used only when the second wrapper is the identity)</span><span>
</span><span id="line-218"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-comment">-- NB: we can't check that the argument type has a fixed RuntimeRep with an assertion,</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-comment">-- because of [Wrinkle: Typed Template Haskell] in Note [hasFixedRuntimeRep]</span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-comment">-- in GHC.Tc.Utils.Concrete.</span><span>
</span><span id="line-222"></span><span id="mkWpFun"><span class="annot"><span class="annottext">mkWpFun :: HsWrapper -&gt; HsWrapper -&gt; Scaled Mult -&gt; Mult -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpFun"><span class="hs-identifier hs-var hs-var">mkWpFun</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>       </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>       </span><span class="annot"><span class="annottext">Scaled Mult
</span><span class="hs-identifier">_</span></span><span>             </span><span class="annot"><span class="annottext">Mult
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>
</span><span id="line-223"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpFun"><span class="hs-identifier hs-var">mkWpFun</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-type">WpCast</span></a></span><span> </span><span id="local-6989586621682611519"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611519"><span class="hs-identifier hs-var">co2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621682611521"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611521"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682611522"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611522"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Mult
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mult -&gt; TcCoercion -&gt; TcCoercion -&gt; TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#mk_wp_fun_co"><span class="hs-identifier hs-var">mk_wp_fun_co</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611521"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mult -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkRepReflCo"><span class="hs-identifier hs-var">mkRepReflCo</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611522"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611519"><span class="hs-identifier hs-var">co2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpFun"><span class="hs-identifier hs-var">mkWpFun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-type">WpCast</span></a></span><span> </span><span id="local-6989586621682611525"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611525"><span class="hs-identifier hs-var">co1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621682611526"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611526"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="annot"><span class="annottext">Mult
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span id="local-6989586621682611527"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611527"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mult -&gt; TcCoercion -&gt; TcCoercion -&gt; TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#mk_wp_fun_co"><span class="hs-identifier hs-var">mk_wp_fun_co</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611526"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcCoercion -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkSymCo"><span class="hs-identifier hs-var">mkSymCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611525"><span class="hs-identifier hs-var">co1</span></a></span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mult -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkRepReflCo"><span class="hs-identifier hs-var">mkRepReflCo</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611527"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpFun"><span class="hs-identifier hs-var">mkWpFun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-type">WpCast</span></a></span><span> </span><span id="local-6989586621682611528"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611528"><span class="hs-identifier hs-var">co1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-type">WpCast</span></a></span><span> </span><span id="local-6989586621682611529"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611529"><span class="hs-identifier hs-var">co2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621682611530"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611530"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="annot"><span class="annottext">Mult
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">Mult
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mult -&gt; TcCoercion -&gt; TcCoercion -&gt; TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#mk_wp_fun_co"><span class="hs-identifier hs-var">mk_wp_fun_co</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611530"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcCoercion -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkSymCo"><span class="hs-identifier hs-var">mkSymCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611528"><span class="hs-identifier hs-var">co1</span></a></span><span class="hs-special">)</span><span>    </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611529"><span class="hs-identifier hs-var">co2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpFun"><span class="hs-identifier hs-var">mkWpFun</span></a></span><span> </span><span id="local-6989586621682611531"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611531"><span class="hs-identifier hs-var">co1</span></a></span></span><span>          </span><span id="local-6989586621682611532"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611532"><span class="hs-identifier hs-var">co2</span></a></span></span><span>          </span><span id="local-6989586621682611533"><span class="annot"><span class="annottext">Scaled Mult
</span><a href="#local-6989586621682611533"><span class="hs-identifier hs-var">t1</span></a></span></span><span>            </span><span class="annot"><span class="annottext">Mult
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; Scaled Mult -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-var">WpFun</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611531"><span class="hs-identifier hs-var">co1</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611532"><span class="hs-identifier hs-var">co2</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Mult
</span><a href="#local-6989586621682611533"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpEta"><span class="hs-identifier hs-type">mkWpEta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-229"></span><span class="hs-comment">-- (mkWpEta [x1, x2] wrap) [e]</span><span>
</span><span id="line-230"></span><span class="hs-comment">--   = \x1. \x2.  wrap[e x1 x2]</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- Just generates a bunch of WpFuns</span><span>
</span><span id="line-232"></span><span id="mkWpEta"><span class="annot"><span class="annottext">mkWpEta :: [Id] -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpEta"><span class="hs-identifier hs-var hs-var">mkWpEta</span></a></span></span><span> </span><span id="local-6989586621682611534"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682611534"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621682611535"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611535"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; HsWrapper -&gt; HsWrapper) -&gt; HsWrapper -&gt; [Id] -&gt; HsWrapper
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; HsWrapper -&gt; HsWrapper
</span><a href="#local-6989586621682611537"><span class="hs-identifier hs-var">eta_one</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611535"><span class="hs-identifier hs-var">wrap</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682611534"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-234"></span><span>    </span><span id="local-6989586621682611537"><span class="annot"><span class="annottext">eta_one :: Id -&gt; HsWrapper -&gt; HsWrapper
</span><a href="#local-6989586621682611537"><span class="hs-identifier hs-var hs-var">eta_one</span></a></span></span><span> </span><span id="local-6989586621682611538"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611538"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682611539"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611539"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; Scaled Mult -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-var">WpFun</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#idHsWrapper"><span class="hs-identifier hs-var">idHsWrapper</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611539"><span class="hs-identifier hs-var">wrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Scaled Mult
</span><a href="GHC.Types.Id.html#idScaledType"><span class="hs-identifier hs-var">idScaledType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611538"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mk_wp_fun_co"><span class="hs-identifier hs-type">mk_wp_fun_co</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a></span><span>
</span><span id="line-237"></span><span id="mk_wp_fun_co"><span class="annot"><span class="annottext">mk_wp_fun_co :: Mult -&gt; TcCoercion -&gt; TcCoercion -&gt; TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#mk_wp_fun_co"><span class="hs-identifier hs-var hs-var">mk_wp_fun_co</span></a></span></span><span> </span><span id="local-6989586621682611540"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611540"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621682611541"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611541"><span class="hs-identifier hs-var">arg_co</span></a></span></span><span> </span><span id="local-6989586621682611542"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611542"><span class="hs-identifier hs-var">res_co</span></a></span></span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Role
-&gt; FunTyFlag
-&gt; TcCoercion
-&gt; TcCoercion
-&gt; TcCoercion
-&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkNakedFunCo"><span class="hs-identifier hs-var">mkNakedFunCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="GHC.Types.Var.html#FTF_T_T"><span class="hs-identifier hs-var">FTF_T_T</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mult -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#multToCo"><span class="hs-identifier hs-var">multToCo</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611540"><span class="hs-identifier hs-var">mult</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611541"><span class="hs-identifier hs-var">arg_co</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611542"><span class="hs-identifier hs-var">res_co</span></a></span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-comment">-- FTF_T_T: WpFun is always (-&gt;)</span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpCastR"><span class="hs-identifier hs-type">mkWpCastR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionR"><span class="hs-identifier hs-type">TcCoercionR</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-242"></span><span id="mkWpCastR"><span class="annot"><span class="annottext">mkWpCastR :: TcCoercion -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpCastR"><span class="hs-identifier hs-var hs-var">mkWpCastR</span></a></span></span><span> </span><span id="local-6989586621682611547"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611547"><span class="hs-identifier hs-var">co</span></a></span></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; Bool
</span><a href="GHC.Core.Coercion.html#isReflCo"><span class="hs-identifier hs-var">isReflCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611547"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; HsWrapper -&gt; HsWrapper
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcCoercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611547"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Role -&gt; Role -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcCoercion -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611547"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsWrapper -&gt; HsWrapper) -&gt; HsWrapper -&gt; HsWrapper
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-245"></span><span>                  </span><span class="annot"><span class="annottext">TcCoercion -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611547"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpCastN"><span class="hs-identifier hs-type">mkWpCastN</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-248"></span><span id="mkWpCastN"><span class="annot"><span class="annottext">mkWpCastN :: TcCoercion -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpCastN"><span class="hs-identifier hs-var hs-var">mkWpCastN</span></a></span></span><span> </span><span id="local-6989586621682611552"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611552"><span class="hs-identifier hs-var">co</span></a></span></span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; Bool
</span><a href="GHC.Core.Coercion.html#isReflCo"><span class="hs-identifier hs-var">isReflCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611552"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; HsWrapper -&gt; HsWrapper
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcCoercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611552"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Role -&gt; Role -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcCoercion -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611552"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsWrapper -&gt; HsWrapper) -&gt; HsWrapper -&gt; HsWrapper
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-251"></span><span>                  </span><span class="annot"><span class="annottext">TcCoercion -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; TcCoercion -&gt; TcCoercion
TcCoercion -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkSubCo"><span class="hs-identifier hs-var">mkSubCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611552"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-comment">-- The mkTcSubCo converts Nominal to Representational</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpTyApps"><span class="hs-identifier hs-type">mkWpTyApps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-255"></span><span id="mkWpTyApps"><span class="annot"><span class="annottext">mkWpTyApps :: [Mult] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpTyApps"><span class="hs-identifier hs-var hs-var">mkWpTyApps</span></a></span></span><span> </span><span id="local-6989586621682611556"><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682611556"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Mult -&gt; HsWrapper) -&gt; [Mult] -&gt; HsWrapper
forall a. (a -&gt; HsWrapper) -&gt; [a] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mk_co_app_fn"><span class="hs-identifier hs-var">mk_co_app_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Mult -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpTyApp"><span class="hs-identifier hs-var">WpTyApp</span></a></span><span> </span><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682611556"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpEvApps"><span class="hs-identifier hs-type">mkWpEvApps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-258"></span><span id="mkWpEvApps"><span class="annot"><span class="annottext">mkWpEvApps :: [EvTerm] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpEvApps"><span class="hs-identifier hs-var hs-var">mkWpEvApps</span></a></span></span><span> </span><span id="local-6989586621682611558"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682611558"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvTerm -&gt; HsWrapper) -&gt; [EvTerm] -&gt; HsWrapper
forall a. (a -&gt; HsWrapper) -&gt; [a] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mk_co_app_fn"><span class="hs-identifier hs-var">mk_co_app_fn</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-var">WpEvApp</span></a></span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682611558"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpEvVarApps"><span class="hs-identifier hs-type">mkWpEvVarApps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-261"></span><span id="mkWpEvVarApps"><span class="annot"><span class="annottext">mkWpEvVarApps :: [Id] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpEvVarApps"><span class="hs-identifier hs-var hs-var">mkWpEvVarApps</span></a></span></span><span> </span><span id="local-6989586621682611559"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682611559"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvTerm -&gt; HsWrapper) -&gt; [EvTerm] -&gt; HsWrapper
forall a. (a -&gt; HsWrapper) -&gt; [a] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mk_co_app_fn"><span class="hs-identifier hs-var">mk_co_app_fn</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-var">WpEvApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Id -&gt; EvTerm) -&gt; [Id] -&gt; [EvTerm]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvTerm) -&gt; (Id -&gt; EvExpr) -&gt; Id -&gt; EvTerm
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; EvExpr
</span><a href="GHC.Tc.Types.Evidence.html#evId"><span class="hs-identifier hs-var">evId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682611559"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpTyLams"><span class="hs-identifier hs-type">mkWpTyLams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-264"></span><span id="mkWpTyLams"><span class="annot"><span class="annottext">mkWpTyLams :: [Id] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpTyLams"><span class="hs-identifier hs-var hs-var">mkWpTyLams</span></a></span></span><span> </span><span id="local-6989586621682611562"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682611562"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; HsWrapper) -&gt; [Id] -&gt; HsWrapper
forall a. (a -&gt; HsWrapper) -&gt; [a] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mk_co_lam_fn"><span class="hs-identifier hs-var">mk_co_lam_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-var">WpTyLam</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682611562"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- mkWpForAllCast [tv{vis}] constructs a cast</span><span>
</span><span id="line-267"></span><span class="hs-comment">--   forall tv. res  ~R#   forall tv{vis} res`.</span><span>
</span><span id="line-268"></span><span class="hs-comment">-- See Note [Required foralls in Core] in GHC.Core.TyCo.Rep</span><span>
</span><span id="line-269"></span><span class="hs-comment">--</span><span>
</span><span id="line-270"></span><span class="hs-comment">-- It's a no-op if all binders are invisible;</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- but in that case we refrain from calling it.</span><span>
</span><span id="line-272"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpForAllCast"><span class="hs-identifier hs-type">mkWpForAllCast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyBinder"><span class="hs-identifier hs-type">ForAllTyBinder</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-273"></span><span id="mkWpForAllCast"><span class="annot"><span class="annottext">mkWpForAllCast :: [ForAllTyBinder] -&gt; Mult -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpForAllCast"><span class="hs-identifier hs-var hs-var">mkWpForAllCast</span></a></span></span><span> </span><span id="local-6989586621682611564"><span class="annot"><span class="annottext">[ForAllTyBinder]
</span><a href="#local-6989586621682611564"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621682611565"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611565"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpCastR"><span class="hs-identifier hs-var">mkWpCastR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ForAllTyBinder] -&gt; TcCoercion
</span><a href="#local-6989586621682611566"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[ForAllTyBinder]
</span><a href="#local-6989586621682611564"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-276"></span><span>    </span><span id="local-6989586621682611566"><span class="annot"><span class="annottext">go :: [ForAllTyBinder] -&gt; TcCoercion
</span><a href="#local-6989586621682611566"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Mult -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkRepReflCo"><span class="hs-identifier hs-var">mkRepReflCo</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682611565"><span class="hs-identifier hs-var">res_ty</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><a href="#local-6989586621682611566"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621682611568"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611568"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621682611569"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682611569"><span class="hs-identifier hs-var">vis</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682611570"><span class="annot"><span class="annottext">[ForAllTyBinder]
</span><a href="#local-6989586621682611570"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt;
Id
-&gt; ForAllTyFlag
-&gt; ForAllTyFlag
-&gt; TcCoercion
-&gt; TcCoercion
-&gt; TcCoercion
Id
-&gt; ForAllTyFlag
-&gt; ForAllTyFlag
-&gt; TcCoercion
-&gt; TcCoercion
-&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkForAllCo"><span class="hs-identifier hs-var">mkForAllCo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611568"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="Language.Haskell.Syntax.Specificity.html#coreTyLamForAllTyFlag"><span class="hs-identifier hs-var">coreTyLamForAllTyFlag</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682611569"><span class="hs-identifier hs-var">vis</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611573"><span class="hs-identifier hs-var">kind_co</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ForAllTyBinder] -&gt; TcCoercion
</span><a href="#local-6989586621682611566"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[ForAllTyBinder]
</span><a href="#local-6989586621682611570"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-279"></span><span>        </span><span id="local-6989586621682611573"><span class="annot"><span class="annottext">kind_co :: TcCoercion
</span><a href="#local-6989586621682611573"><span class="hs-identifier hs-var hs-var">kind_co</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Mult -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkNomReflCo"><span class="hs-identifier hs-var">mkNomReflCo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Mult
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611568"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpEvLams"><span class="hs-identifier hs-type">mkWpEvLams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-282"></span><span id="mkWpEvLams"><span class="annot"><span class="annottext">mkWpEvLams :: [Id] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpEvLams"><span class="hs-identifier hs-var hs-var">mkWpEvLams</span></a></span></span><span> </span><span id="local-6989586621682611577"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682611577"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; HsWrapper) -&gt; [Id] -&gt; HsWrapper
forall a. (a -&gt; HsWrapper) -&gt; [a] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mk_co_lam_fn"><span class="hs-identifier hs-var">mk_co_lam_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-var">WpEvLam</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682611577"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpLet"><span class="hs-identifier hs-type">mkWpLet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-285"></span><span class="hs-comment">-- This no-op is a quite a common case</span><span>
</span><span id="line-286"></span><span id="mkWpLet"><span class="annot"><span class="annottext">mkWpLet :: TcEvBinds -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpLet"><span class="hs-identifier hs-var hs-var">mkWpLet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-type">EvBinds</span></a></span><span> </span><span id="local-6989586621682611579"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621682611579"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bag EvBind -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621682611579"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>
</span><span id="line-287"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWpLet"><span class="hs-identifier hs-var">mkWpLet</span></a></span><span> </span><span id="local-6989586621682611581"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682611581"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcEvBinds -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpLet"><span class="hs-identifier hs-var">WpLet</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682611581"><span class="hs-identifier hs-var">ev_binds</span></a></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span id="local-6989586621682611582"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mk_co_lam_fn"><span class="hs-identifier hs-type">mk_co_lam_fn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682611582"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682611582"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span></span><span>
</span><span id="line-290"></span><span id="mk_co_lam_fn"><span class="annot"><span class="annottext">mk_co_lam_fn :: forall a. (a -&gt; HsWrapper) -&gt; [a] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mk_co_lam_fn"><span class="hs-identifier hs-var hs-var">mk_co_lam_fn</span></a></span></span><span> </span><span id="local-6989586621682611584"><span class="annot"><span class="annottext">a -&gt; HsWrapper
</span><a href="#local-6989586621682611584"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682611585"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682611585"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; HsWrapper -&gt; HsWrapper) -&gt; HsWrapper -&gt; [a] -&gt; HsWrapper
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682611586"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682611586"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682611587"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611587"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; HsWrapper
</span><a href="#local-6989586621682611584"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682611586"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611587"><span class="hs-identifier hs-var">wrap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682611585"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span id="local-6989586621682611061"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mk_co_app_fn"><span class="hs-identifier hs-type">mk_co_app_fn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682611061"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682611061"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span></span><span>
</span><span id="line-293"></span><span class="hs-comment">-- For applications, the *first* argument must</span><span>
</span><span id="line-294"></span><span class="hs-comment">-- come *last* in the composition sequence</span><span>
</span><span id="line-295"></span><span id="mk_co_app_fn"><span class="annot"><span class="annottext">mk_co_app_fn :: forall a. (a -&gt; HsWrapper) -&gt; [a] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mk_co_app_fn"><span class="hs-identifier hs-var hs-var">mk_co_app_fn</span></a></span></span><span> </span><span id="local-6989586621682611589"><span class="annot"><span class="annottext">a -&gt; HsWrapper
</span><a href="#local-6989586621682611589"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682611590"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682611590"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; HsWrapper -&gt; HsWrapper) -&gt; HsWrapper -&gt; [a] -&gt; HsWrapper
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682611591"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682611591"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682611592"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611592"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611592"><span class="hs-identifier hs-var">wrap</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; HsWrapper
</span><a href="#local-6989586621682611589"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682611591"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682611590"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#idHsWrapper"><span class="hs-identifier hs-type">idHsWrapper</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-298"></span><span id="idHsWrapper"><span class="annot"><span class="annottext">idHsWrapper :: HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#idHsWrapper"><span class="hs-identifier hs-var hs-var">idHsWrapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isIdHsWrapper"><span class="hs-identifier hs-type">isIdHsWrapper</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-301"></span><span id="isIdHsWrapper"><span class="annot"><span class="annottext">isIdHsWrapper :: HsWrapper -&gt; Bool
</span><a href="GHC.Tc.Types.Evidence.html#isIdHsWrapper"><span class="hs-identifier hs-var hs-var">isIdHsWrapper</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-302"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isIdHsWrapper"><span class="hs-identifier hs-var">isIdHsWrapper</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#hsWrapDictBinders"><span class="hs-identifier hs-type">hsWrapDictBinders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#DictId"><span class="hs-identifier hs-type">DictId</span></a></span><span>
</span><span id="line-305"></span><span class="hs-comment">-- ^ Identifies the /lambda-bound/ dictionaries of an 'HsWrapper'. This is used</span><span>
</span><span id="line-306"></span><span class="hs-comment">-- (only) to allow the pattern-match overlap checker to know what Given</span><span>
</span><span id="line-307"></span><span class="hs-comment">-- dictionaries are in scope.</span><span>
</span><span id="line-308"></span><span class="hs-comment">--</span><span>
</span><span id="line-309"></span><span class="hs-comment">-- We specifically do not collect dictionaries bound in a 'WpLet'. These are</span><span>
</span><span id="line-310"></span><span class="hs-comment">-- either superclasses of lambda-bound ones, or (extremely numerous) results of</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- binding Wanted dictionaries.  We definitely don't want all those cluttering</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- up the Given dictionaries for pattern-match overlap checking!</span><span>
</span><span id="line-313"></span><span id="hsWrapDictBinders"><span class="annot"><span class="annottext">hsWrapDictBinders :: HsWrapper -&gt; Bag Id
</span><a href="GHC.Tc.Types.Evidence.html#hsWrapDictBinders"><span class="hs-identifier hs-var hs-var">hsWrapDictBinders</span></a></span></span><span> </span><span id="local-6989586621682611594"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611594"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; Bag Id
</span><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611594"><span class="hs-identifier hs-var">wrap</span></a></span><span>
</span><span id="line-314"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>   </span><span id="local-6989586621682611595"><span class="annot"><span class="annottext">go :: HsWrapper -&gt; Bag Id
</span><a href="#local-6989586621682611595"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-type">WpEvLam</span></a></span><span> </span><span id="local-6989586621682611596"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611596"><span class="hs-identifier hs-var">dict_id</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bag Id
forall a. a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611596"><span class="hs-identifier hs-var">dict_id</span></a></span><span>
</span><span id="line-316"></span><span>   </span><span class="annot"><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682611598"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611598"><span class="hs-identifier hs-var">w1</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-operator hs-type">`WpCompose`</span></a></span><span> </span><span id="local-6989586621682611599"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611599"><span class="hs-identifier hs-var">w2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; Bag Id
</span><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611598"><span class="hs-identifier hs-var">w1</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Id -&gt; Bag Id -&gt; Bag Id
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; Bag Id
</span><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611599"><span class="hs-identifier hs-var">w2</span></a></span><span>
</span><span id="line-317"></span><span>   </span><span class="annot"><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-type">WpFun</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682611601"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611601"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="annot"><span class="annottext">Scaled Mult
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; Bag Id
</span><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611601"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-318"></span><span>   </span><span class="annot"><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Id
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-319"></span><span>   </span><span class="annot"><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-type">WpCast</span></a></span><span>  </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Id
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-320"></span><span>   </span><span class="annot"><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-type">WpEvApp</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Id
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-321"></span><span>   </span><span class="annot"><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-type">WpTyLam</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Id
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-322"></span><span>   </span><span class="annot"><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyApp"><span class="hs-identifier hs-type">WpTyApp</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Id
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-323"></span><span>   </span><span class="annot"><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpLet"><span class="hs-identifier hs-type">WpLet</span></a></span><span>   </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Id
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-324"></span><span>   </span><span class="annot"><a href="#local-6989586621682611595"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpMultCoercion"><span class="hs-identifier hs-type">WpMultCoercion</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Id
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#collectHsWrapBinders"><span class="hs-identifier hs-type">collectHsWrapBinders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span class="hs-comment">-- Collect the outer lambda binders of a HsWrapper,</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- stopping as soon as you get to a non-lambda binder</span><span>
</span><span id="line-329"></span><span id="collectHsWrapBinders"><span class="annot"><span class="annottext">collectHsWrapBinders :: HsWrapper -&gt; ([Id], HsWrapper)
</span><a href="GHC.Tc.Types.Evidence.html#collectHsWrapBinders"><span class="hs-identifier hs-var hs-var">collectHsWrapBinders</span></a></span></span><span> </span><span id="local-6989586621682611603"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611603"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; [HsWrapper] -&gt; ([Id], HsWrapper)
</span><a href="#local-6989586621682611604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611603"><span class="hs-identifier hs-var">wrap</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-330"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-comment">-- go w ws = collectHsWrapBinders (w &lt;.&gt; w1 &lt;.&gt; ... &lt;.&gt; wn)</span><span>
</span><span id="line-332"></span><span>    </span><span class="annot"><a href="#local-6989586621682611604"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>    </span><span id="local-6989586621682611604"><span class="annot"><span class="annottext">go :: HsWrapper -&gt; [HsWrapper] -&gt; ([Id], HsWrapper)
</span><a href="#local-6989586621682611604"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-type">WpEvLam</span></a></span><span> </span><span id="local-6989586621682611605"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611605"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>       </span><span id="local-6989586621682611606"><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621682611606"><span class="hs-identifier hs-var">wraps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ([Id], HsWrapper) -&gt; ([Id], HsWrapper)
forall {a} {b}. a -&gt; ([a], b) -&gt; ([a], b)
</span><a href="#local-6989586621682611607"><span class="hs-identifier hs-var">add_lam</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611605"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[HsWrapper] -&gt; ([Id], HsWrapper)
</span><a href="#local-6989586621682611608"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621682611606"><span class="hs-identifier hs-var">wraps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>    </span><span class="annot"><a href="#local-6989586621682611604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-type">WpTyLam</span></a></span><span> </span><span id="local-6989586621682611609"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611609"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>       </span><span id="local-6989586621682611610"><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621682611610"><span class="hs-identifier hs-var">wraps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ([Id], HsWrapper) -&gt; ([Id], HsWrapper)
forall {a} {b}. a -&gt; ([a], b) -&gt; ([a], b)
</span><a href="#local-6989586621682611607"><span class="hs-identifier hs-var">add_lam</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611609"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[HsWrapper] -&gt; ([Id], HsWrapper)
</span><a href="#local-6989586621682611608"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621682611610"><span class="hs-identifier hs-var">wraps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><a href="#local-6989586621682611604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-identifier hs-type">WpCompose</span></a></span><span> </span><span id="local-6989586621682611611"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611611"><span class="hs-identifier hs-var">w1</span></a></span></span><span> </span><span id="local-6989586621682611612"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611612"><span class="hs-identifier hs-var">w2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682611613"><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621682611613"><span class="hs-identifier hs-var">wraps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; [HsWrapper] -&gt; ([Id], HsWrapper)
</span><a href="#local-6989586621682611604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611611"><span class="hs-identifier hs-var">w1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611612"><span class="hs-identifier hs-var">w2</span></a></span><span class="annot"><span class="annottext">HsWrapper -&gt; [HsWrapper] -&gt; [HsWrapper]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621682611613"><span class="hs-identifier hs-var">wraps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>    </span><span class="annot"><a href="#local-6989586621682611604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682611614"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611614"><span class="hs-identifier hs-var">wrap</span></a></span></span><span>              </span><span id="local-6989586621682611615"><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621682611615"><span class="hs-identifier hs-var">wraps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(HsWrapper -&gt; HsWrapper -&gt; HsWrapper)
-&gt; HsWrapper -&gt; [HsWrapper] -&gt; HsWrapper
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator hs-var">(&lt;.&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611614"><span class="hs-identifier hs-var">wrap</span></a></span><span> </span><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621682611615"><span class="hs-identifier hs-var">wraps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span>    </span><span id="local-6989586621682611608"><span class="annot"><span class="annottext">gos :: [HsWrapper] -&gt; ([Id], HsWrapper)
</span><a href="#local-6989586621682611608"><span class="hs-identifier hs-var hs-var">gos</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-339"></span><span>    </span><span class="annot"><a href="#local-6989586621682611608"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682611617"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611617"><span class="hs-identifier hs-var">w</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682611618"><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621682611618"><span class="hs-identifier hs-var">ws</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; [HsWrapper] -&gt; ([Id], HsWrapper)
</span><a href="#local-6989586621682611604"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682611617"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621682611618"><span class="hs-identifier hs-var">ws</span></a></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span>    </span><span id="local-6989586621682611607"><span class="annot"><span class="annottext">add_lam :: a -&gt; ([a], b) -&gt; ([a], b)
</span><a href="#local-6989586621682611607"><span class="hs-identifier hs-var hs-var">add_lam</span></a></span></span><span> </span><span id="local-6989586621682611619"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682611619"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682611620"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682611620"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682611621"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682611621"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682611619"><span class="hs-identifier hs-var">v</span></a></span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682611620"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682611621"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                  Evidence bindings
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="hs-keyword">data</span><span> </span><span id="TcEvBinds"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-var">TcEvBinds</span></a></span></span><span>
</span><span id="line-352"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TcEvBinds"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-var">TcEvBinds</span></a></span></span><span>           </span><span class="hs-comment">-- Mutable evidence bindings</span><span>
</span><span id="line-353"></span><span>       </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span>       </span><span class="hs-comment">-- Mutable because they are updated &quot;later&quot;</span><span>
</span><span id="line-354"></span><span>                        </span><span class="hs-comment">--    when an implication constraint is solved</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EvBinds"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-var">EvBinds</span></a></span></span><span>             </span><span class="hs-comment">-- Immutable after zonking</span><span>
</span><span id="line-357"></span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="hs-keyword">data</span><span> </span><span id="EvBindsVar"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-var">EvBindsVar</span></a></span></span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EvBindsVar"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-var">EvBindsVar</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-361"></span><span>      </span><span id="ebv_uniq"><span class="annot"><span class="annottext">EvBindsVar -&gt; Unique
</span><a href="GHC.Tc.Types.Evidence.html#ebv_uniq"><span class="hs-identifier hs-var hs-var">ebv_uniq</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-362"></span><span>         </span><span class="hs-comment">-- The Unique is for debug printing only</span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span>      </span><span id="ebv_binds"><span class="annot"><span class="annottext">EvBindsVar -&gt; IORef EvBindMap
</span><a href="GHC.Tc.Types.Evidence.html#ebv_binds"><span class="hs-identifier hs-var hs-var">ebv_binds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IORef</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-365"></span><span>      </span><span class="hs-comment">-- The main payload: the value-level evidence bindings</span><span>
</span><span id="line-366"></span><span>      </span><span class="hs-comment">--     (dictionaries etc)</span><span>
</span><span id="line-367"></span><span>      </span><span class="hs-comment">-- Some Given, some Wanted</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span>      </span><span id="ebv_tcvs"><span class="annot"><span class="annottext">EvBindsVar -&gt; IORef CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#ebv_tcvs"><span class="hs-identifier hs-var hs-var">ebv_tcvs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IORef</span></span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#CoVarSet"><span class="hs-identifier hs-type">CoVarSet</span></a></span><span>
</span><span id="line-370"></span><span>      </span><span class="hs-comment">-- The free Given coercion vars needed by Wanted coercions that</span><span>
</span><span id="line-371"></span><span>      </span><span class="hs-comment">-- are solved by filling in their HoleDest in-place. Since they</span><span>
</span><span id="line-372"></span><span>      </span><span class="hs-comment">-- don't appear in ebv_binds, we keep track of their free</span><span>
</span><span id="line-373"></span><span>      </span><span class="hs-comment">-- variables so that we can report unused given constraints</span><span>
</span><span id="line-374"></span><span>      </span><span class="hs-comment">-- See Note [Tracking redundant constraints] in GHC.Tc.Solver</span><span>
</span><span id="line-375"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CoEvBindsVar"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#CoEvBindsVar"><span class="hs-identifier hs-var">CoEvBindsVar</span></a></span></span><span> </span><span class="hs-special">{</span><span>  </span><span class="hs-comment">-- See Note [Coercion evidence only]</span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span>      </span><span class="hs-comment">-- See above for comments on ebv_uniq, ebv_tcvs</span><span>
</span><span id="line-380"></span><span>      </span><span id="ebv_uniq"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#ebv_uniq"><span class="hs-identifier hs-var">ebv_uniq</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-381"></span><span>      </span><span id="ebv_tcvs"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#ebv_tcvs"><span class="hs-identifier hs-var">ebv_tcvs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IORef</span></span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#CoVarSet"><span class="hs-identifier hs-type">CoVarSet</span></a></span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682611631"><span id="local-6989586621682611637"><span id="local-6989586621682611642"><span id="local-6989586621682611647"><span id="local-6989586621682611650"><span id="local-6989586621682611653"><span id="local-6989586621682611656"><span id="local-6989586621682611659"><span id="local-6989586621682611662"><span id="local-6989586621682611667"><span id="local-6989586621682611672"><span class="annot"><span class="hs-identifier hs-type">Data.Data</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-comment">-- Placeholder; we can't travers into TcEvBinds</span><span>
</span><span id="line-386"></span><span>  </span><span id="local-6989586621682611676"><span class="annot"><span class="annottext">toConstr :: TcEvBinds -&gt; Constr
</span><span class="hs-identifier hs-var hs-var hs-var">toConstr</span></span></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr
</span><a href="GHC.Utils.Misc.html#abstractConstr"><span class="hs-identifier hs-var">abstractConstr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TcEvBinds&quot;</span></span><span>
</span><span id="line-387"></span><span>  </span><span id="local-6989586621682611680"><span class="annot"><span class="annottext">gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c TcEvBinds
</span><span class="hs-identifier hs-var hs-var hs-var">gunfold</span></span></span><span> </span><span class="annot"><span class="annottext">forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">forall r. r -&gt; c r
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr -&gt; c TcEvBinds
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gunfold&quot;</span></span><span>
</span><span id="line-388"></span><span>  </span><span id="local-6989586621682611682"><span class="annot"><span class="annottext">dataTypeOf :: TcEvBinds -&gt; DataType
</span><span class="hs-identifier hs-var hs-var hs-var">dataTypeOf</span></span></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; DataType
</span><span class="hs-identifier hs-var">Data.mkNoRepType</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TcEvBinds&quot;</span></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="hs-comment">{- Note [Coercion evidence only]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Class constraints etc give rise to /term/ bindings for evidence, and
we have nowhere to put term bindings in /types/.  So in some places we
use CoEvBindsVar (see newCoTcEvBinds) to signal that no term-level
evidence bindings are allowed.  Notably ():

  - Places in types where we are solving kind constraints (all of which
    are equalities); see solveEqualities

  - When unifying forall-types
-}</span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isCoEvBindsVar"><span class="hs-identifier hs-type">isCoEvBindsVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-404"></span><span id="isCoEvBindsVar"><span class="annot"><span class="annottext">isCoEvBindsVar :: EvBindsVar -&gt; Bool
</span><a href="GHC.Tc.Types.Evidence.html#isCoEvBindsVar"><span class="hs-identifier hs-var hs-var">isCoEvBindsVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#CoEvBindsVar"><span class="hs-identifier hs-type">CoEvBindsVar</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-405"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isCoEvBindsVar"><span class="hs-identifier hs-var">isCoEvBindsVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-408"></span><span class="hs-keyword">newtype</span><span> </span><span id="EvBindMap"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-var">EvBindMap</span></a></span></span><span>
</span><span id="line-409"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EvBindMap"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-var">EvBindMap</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-410"></span><span>       </span><span id="ev_bind_varenv"><span class="annot"><span class="annottext">EvBindMap -&gt; DVarEnv EvBind
</span><a href="GHC.Tc.Types.Evidence.html#ev_bind_varenv"><span class="hs-identifier hs-var hs-var">ev_bind_varenv</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#DVarEnv"><span class="hs-identifier hs-type">DVarEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-411"></span><span>    </span><span class="hs-special">}</span><span>       </span><span class="hs-comment">-- Map from evidence variables to evidence terms</span><span>
</span><span id="line-412"></span><span>            </span><span class="hs-comment">-- We use @DVarEnv@ here to get deterministic ordering when we</span><span>
</span><span id="line-413"></span><span>            </span><span class="hs-comment">-- turn it into a Bag.</span><span>
</span><span id="line-414"></span><span>            </span><span class="hs-comment">-- If we don't do that, when we generate let bindings for</span><span>
</span><span id="line-415"></span><span>            </span><span class="hs-comment">-- dictionaries in dsTcEvBinds they will be generated in random</span><span>
</span><span id="line-416"></span><span>            </span><span class="hs-comment">-- order.</span><span>
</span><span id="line-417"></span><span>            </span><span class="hs-comment">--</span><span>
</span><span id="line-418"></span><span>            </span><span class="hs-comment">-- For example:</span><span>
</span><span id="line-419"></span><span>            </span><span class="hs-comment">--</span><span>
</span><span id="line-420"></span><span>            </span><span class="hs-comment">-- let $dEq = GHC.Classes.$fEqInt in</span><span>
</span><span id="line-421"></span><span>            </span><span class="hs-comment">-- let $$dNum = GHC.Num.$fNumInt in ...</span><span>
</span><span id="line-422"></span><span>            </span><span class="hs-comment">--</span><span>
</span><span id="line-423"></span><span>            </span><span class="hs-comment">-- vs</span><span>
</span><span id="line-424"></span><span>            </span><span class="hs-comment">--</span><span>
</span><span id="line-425"></span><span>            </span><span class="hs-comment">-- let $dNum = GHC.Num.$fNumInt in</span><span>
</span><span id="line-426"></span><span>            </span><span class="hs-comment">-- let $dEq = GHC.Classes.$fEqInt in ...</span><span>
</span><span id="line-427"></span><span>            </span><span class="hs-comment">--</span><span>
</span><span id="line-428"></span><span>            </span><span class="hs-comment">-- See Note [Deterministic UniqFM] in GHC.Types.Unique.DFM for explanation why</span><span>
</span><span id="line-429"></span><span>            </span><span class="hs-comment">-- @UniqFM@ can lead to nondeterministic order.</span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#emptyEvBindMap"><span class="hs-identifier hs-type">emptyEvBindMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span>
</span><span id="line-432"></span><span id="emptyEvBindMap"><span class="annot"><span class="annottext">emptyEvBindMap :: EvBindMap
</span><a href="GHC.Tc.Types.Evidence.html#emptyEvBindMap"><span class="hs-identifier hs-var hs-var">emptyEvBindMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ev_bind_varenv :: DVarEnv EvBind
</span><a href="GHC.Tc.Types.Evidence.html#ev_bind_varenv"><span class="hs-identifier hs-var">ev_bind_varenv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DVarEnv EvBind
forall a. DVarEnv a
</span><a href="GHC.Types.Var.Env.html#emptyDVarEnv"><span class="hs-identifier hs-var">emptyDVarEnv</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#extendEvBinds"><span class="hs-identifier hs-type">extendEvBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span>
</span><span id="line-435"></span><span id="extendEvBinds"><span class="annot"><span class="annottext">extendEvBinds :: EvBindMap -&gt; EvBind -&gt; EvBindMap
</span><a href="GHC.Tc.Types.Evidence.html#extendEvBinds"><span class="hs-identifier hs-var hs-var">extendEvBinds</span></a></span></span><span> </span><span id="local-6989586621682611687"><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621682611687"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621682611688"><span class="annot"><span class="annottext">EvBind
</span><a href="#local-6989586621682611688"><span class="hs-identifier hs-var">ev_bind</span></a></span></span><span>
</span><span id="line-436"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ev_bind_varenv :: DVarEnv EvBind
</span><a href="GHC.Tc.Types.Evidence.html#ev_bind_varenv"><span class="hs-identifier hs-var">ev_bind_varenv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DVarEnv EvBind -&gt; Id -&gt; EvBind -&gt; DVarEnv EvBind
forall a. DVarEnv a -&gt; Id -&gt; a -&gt; DVarEnv a
</span><a href="GHC.Types.Var.Env.html#extendDVarEnv"><span class="hs-identifier hs-var">extendDVarEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvBindMap -&gt; DVarEnv EvBind
</span><a href="GHC.Tc.Types.Evidence.html#ev_bind_varenv"><span class="hs-identifier hs-var">ev_bind_varenv</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621682611687"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>                                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvBind -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="annot"><span class="annottext">EvBind
</span><a href="#local-6989586621682611688"><span class="hs-identifier hs-var">ev_bind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-438"></span><span>                                               </span><span class="annot"><span class="annottext">EvBind
</span><a href="#local-6989586621682611688"><span class="hs-identifier hs-var">ev_bind</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isEmptyEvBindMap"><span class="hs-identifier hs-type">isEmptyEvBindMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-441"></span><span id="isEmptyEvBindMap"><span class="annot"><span class="annottext">isEmptyEvBindMap :: EvBindMap -&gt; Bool
</span><a href="GHC.Tc.Types.Evidence.html#isEmptyEvBindMap"><span class="hs-identifier hs-var hs-var">isEmptyEvBindMap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span id="local-6989586621682611691"><span class="annot"><span class="annottext">DVarEnv EvBind
</span><a href="#local-6989586621682611691"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DVarEnv EvBind -&gt; Bool
forall a. DVarEnv a -&gt; Bool
</span><a href="GHC.Types.Var.Env.html#isEmptyDVarEnv"><span class="hs-identifier hs-var">isEmptyDVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">DVarEnv EvBind
</span><a href="#local-6989586621682611691"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#lookupEvBind"><span class="hs-identifier hs-type">lookupEvBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-444"></span><span id="lookupEvBind"><span class="annot"><span class="annottext">lookupEvBind :: EvBindMap -&gt; Id -&gt; Maybe EvBind
</span><a href="GHC.Tc.Types.Evidence.html#lookupEvBind"><span class="hs-identifier hs-var hs-var">lookupEvBind</span></a></span></span><span> </span><span id="local-6989586621682611693"><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621682611693"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DVarEnv EvBind -&gt; Id -&gt; Maybe EvBind
forall a. DVarEnv a -&gt; Id -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupDVarEnv"><span class="hs-identifier hs-var">lookupDVarEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvBindMap -&gt; DVarEnv EvBind
</span><a href="GHC.Tc.Types.Evidence.html#ev_bind_varenv"><span class="hs-identifier hs-var">ev_bind_varenv</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621682611693"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evBindMapBinds"><span class="hs-identifier hs-type">evBindMapBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-447"></span><span id="evBindMapBinds"><span class="annot"><span class="annottext">evBindMapBinds :: EvBindMap -&gt; Bag EvBind
</span><a href="GHC.Tc.Types.Evidence.html#evBindMapBinds"><span class="hs-identifier hs-var hs-var">evBindMapBinds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvBind -&gt; Bag EvBind -&gt; Bag EvBind)
-&gt; Bag EvBind -&gt; EvBindMap -&gt; Bag EvBind
forall a. (EvBind -&gt; a -&gt; a) -&gt; a -&gt; EvBindMap -&gt; a
</span><a href="GHC.Tc.Types.Evidence.html#foldEvBindMap"><span class="hs-identifier hs-var">foldEvBindMap</span></a></span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; Bag EvBind -&gt; Bag EvBind
forall a. a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#consBag"><span class="hs-identifier hs-var">consBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span id="local-6989586621682611100"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#foldEvBindMap"><span class="hs-identifier hs-type">foldEvBindMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682611100"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682611100"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682611100"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682611100"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-450"></span><span id="foldEvBindMap"><span class="annot"><span class="annottext">foldEvBindMap :: forall a. (EvBind -&gt; a -&gt; a) -&gt; a -&gt; EvBindMap -&gt; a
</span><a href="GHC.Tc.Types.Evidence.html#foldEvBindMap"><span class="hs-identifier hs-var hs-var">foldEvBindMap</span></a></span></span><span> </span><span id="local-6989586621682611696"><span class="annot"><span class="annottext">EvBind -&gt; a -&gt; a
</span><a href="#local-6989586621682611696"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621682611697"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682611697"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621682611698"><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621682611698"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvBind -&gt; a -&gt; a) -&gt; a -&gt; DVarEnv EvBind -&gt; a
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; DVarEnv a -&gt; b
</span><a href="GHC.Types.Var.Env.html#foldDVarEnv"><span class="hs-identifier hs-var">foldDVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; a -&gt; a
</span><a href="#local-6989586621682611696"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682611697"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvBindMap -&gt; DVarEnv EvBind
</span><a href="GHC.Tc.Types.Evidence.html#ev_bind_varenv"><span class="hs-identifier hs-var">ev_bind_varenv</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621682611698"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span class="hs-comment">-- See Note [Deterministic UniqFM] to learn about nondeterminism.</span><span>
</span><span id="line-453"></span><span class="hs-comment">-- If you use this please provide a justification why it doesn't introduce</span><span>
</span><span id="line-454"></span><span class="hs-comment">-- nondeterminism.</span><span>
</span><span id="line-455"></span><span id="local-6989586621682611700"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#nonDetStrictFoldEvBindMap"><span class="hs-identifier hs-type">nonDetStrictFoldEvBindMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682611700"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682611700"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682611700"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682611700"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-456"></span><span id="nonDetStrictFoldEvBindMap"><span class="annot"><span class="annottext">nonDetStrictFoldEvBindMap :: forall a. (EvBind -&gt; a -&gt; a) -&gt; a -&gt; EvBindMap -&gt; a
</span><a href="GHC.Tc.Types.Evidence.html#nonDetStrictFoldEvBindMap"><span class="hs-identifier hs-var hs-var">nonDetStrictFoldEvBindMap</span></a></span></span><span> </span><span id="local-6989586621682611701"><span class="annot"><span class="annottext">EvBind -&gt; a -&gt; a
</span><a href="#local-6989586621682611701"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621682611702"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682611702"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621682611703"><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621682611703"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvBind -&gt; a -&gt; a) -&gt; a -&gt; DVarEnv EvBind -&gt; a
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; DVarEnv a -&gt; b
</span><a href="GHC.Types.Var.Env.html#nonDetStrictFoldDVarEnv"><span class="hs-identifier hs-var">nonDetStrictFoldDVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; a -&gt; a
</span><a href="#local-6989586621682611701"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682611702"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvBindMap -&gt; DVarEnv EvBind
</span><a href="GHC.Tc.Types.Evidence.html#ev_bind_varenv"><span class="hs-identifier hs-var">ev_bind_varenv</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621682611703"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#filterEvBindMap"><span class="hs-identifier hs-type">filterEvBindMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span>
</span><span id="line-459"></span><span id="filterEvBindMap"><span class="annot"><span class="annottext">filterEvBindMap :: (EvBind -&gt; Bool) -&gt; EvBindMap -&gt; EvBindMap
</span><a href="GHC.Tc.Types.Evidence.html#filterEvBindMap"><span class="hs-identifier hs-var hs-var">filterEvBindMap</span></a></span></span><span> </span><span id="local-6989586621682611705"><span class="annot"><span class="annottext">EvBind -&gt; Bool
</span><a href="#local-6989586621682611705"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ev_bind_varenv :: EvBindMap -&gt; DVarEnv EvBind
</span><a href="GHC.Tc.Types.Evidence.html#ev_bind_varenv"><span class="hs-identifier hs-var">ev_bind_varenv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682611706"><span class="annot"><span class="annottext">DVarEnv EvBind
</span><a href="#local-6989586621682611706"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ev_bind_varenv :: DVarEnv EvBind
</span><a href="GHC.Tc.Types.Evidence.html#ev_bind_varenv"><span class="hs-identifier hs-var">ev_bind_varenv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvBind -&gt; Bool) -&gt; DVarEnv EvBind -&gt; DVarEnv EvBind
forall a. (a -&gt; Bool) -&gt; DVarEnv a -&gt; DVarEnv a
</span><a href="GHC.Types.Var.Env.html#filterDVarEnv"><span class="hs-identifier hs-var">filterDVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; Bool
</span><a href="#local-6989586621682611705"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">DVarEnv EvBind
</span><a href="#local-6989586621682611706"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evBindMapToVarSet"><span class="hs-identifier hs-type">evBindMapToVarSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span>
</span><span id="line-463"></span><span id="evBindMapToVarSet"><span class="annot"><span class="annottext">evBindMapToVarSet :: EvBindMap -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evBindMapToVarSet"><span class="hs-identifier hs-var hs-var">evBindMapToVarSet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span id="local-6989586621682611709"><span class="annot"><span class="annottext">DVarEnv EvBind
</span><a href="#local-6989586621682611709"><span class="hs-identifier hs-var">dve</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqFM Id Id -&gt; CoVarSet
forall a. UniqFM a a -&gt; UniqSet a
</span><a href="GHC.Types.Unique.Set.html#unsafeUFMToUniqSet"><span class="hs-identifier hs-var">unsafeUFMToUniqSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EvBind -&gt; Id) -&gt; UniqFM Id EvBind -&gt; UniqFM Id Id
forall {k} elt1 elt2 (key :: k).
(elt1 -&gt; elt2) -&gt; UniqFM key elt1 -&gt; UniqFM key elt2
</span><a href="GHC.Types.Unique.FM.html#mapUFM"><span class="hs-identifier hs-var">mapUFM</span></a></span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#evBindVar"><span class="hs-identifier hs-var">evBindVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DVarEnv EvBind -&gt; UniqFM Id EvBind
forall {k} (key :: k) elt. UniqDFM key elt -&gt; UniqFM key elt
</span><a href="GHC.Types.Unique.DFM.html#udfmToUfm"><span class="hs-identifier hs-var">udfmToUfm</span></a></span><span> </span><span class="annot"><span class="annottext">DVarEnv EvBind
</span><a href="#local-6989586621682611709"><span class="hs-identifier hs-var">dve</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#varSetMinusEvBindMap"><span class="hs-identifier hs-type">varSetMinusEvBindMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span>
</span><span id="line-466"></span><span id="varSetMinusEvBindMap"><span class="annot"><span class="annottext">varSetMinusEvBindMap :: CoVarSet -&gt; EvBindMap -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#varSetMinusEvBindMap"><span class="hs-identifier hs-var hs-var">varSetMinusEvBindMap</span></a></span></span><span> </span><span id="local-6989586621682611713"><span class="annot"><span class="annottext">CoVarSet
</span><a href="#local-6989586621682611713"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span id="local-6989586621682611714"><span class="annot"><span class="annottext">DVarEnv EvBind
</span><a href="#local-6989586621682611714"><span class="hs-identifier hs-var">dve</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoVarSet
</span><a href="#local-6989586621682611713"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">CoVarSet -&gt; DVarEnv EvBind -&gt; CoVarSet
forall key b. UniqSet key -&gt; UniqDFM key b -&gt; UniqSet key
</span><a href="GHC.Types.Unique.Set.html#uniqSetMinusUDFM"><span class="hs-operator hs-var">`uniqSetMinusUDFM`</span></a></span><span> </span><span class="annot"><span class="annottext">DVarEnv EvBind
</span><a href="#local-6989586621682611714"><span class="hs-identifier hs-var">dve</span></a></span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-469"></span><span>  </span><span id="local-6989586621682611723"><span class="annot"><span class="annottext">ppr :: EvBindMap -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span id="local-6989586621682611724"><span class="annot"><span class="annottext">DVarEnv EvBind
</span><a href="#local-6989586621682611724"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DVarEnv EvBind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DVarEnv EvBind
</span><a href="#local-6989586621682611724"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="hs-keyword">data</span><span> </span><span id="EvBindInfo"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindInfo"><span class="hs-identifier hs-var">EvBindInfo</span></a></span></span><span>
</span><span id="line-472"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EvBindGiven"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindGiven"><span class="hs-identifier hs-var">EvBindGiven</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- See Note [Tracking redundant constraints] in GHC.Tc.Solver</span><span>
</span><span id="line-473"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-474"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EvBindWanted"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindWanted"><span class="hs-identifier hs-var">EvBindWanted</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="ebi_canonical"><span class="annot"><span class="annottext">EvBindInfo -&gt; CanonicalEvidence
</span><a href="GHC.Tc.Types.Evidence.html#ebi_canonical"><span class="hs-identifier hs-var hs-var">ebi_canonical</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#CanonicalEvidence"><span class="hs-identifier hs-type">CanonicalEvidence</span></a></span><span> </span><span class="hs-comment">-- See Note [Desugaring non-canonical evidence]</span><span>
</span><span id="line-475"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-478"></span><span class="hs-comment">-- All evidence is bound by EvBinds; no side effects</span><span>
</span><span id="line-479"></span><span class="hs-keyword">data</span><span> </span><span id="EvBind"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-var">EvBind</span></a></span></span><span>
</span><span id="line-480"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EvBind"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-var">EvBind</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="eb_lhs"><span class="annot"><span class="annottext">EvBind -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var hs-var">eb_lhs</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>
</span><span id="line-481"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="eb_rhs"><span class="annot"><span class="annottext">EvBind -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var hs-var">eb_rhs</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-482"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="eb_info"><span class="annot"><span class="annottext">EvBind -&gt; EvBindInfo
</span><a href="GHC.Tc.Types.Evidence.html#eb_info"><span class="hs-identifier hs-var hs-var">eb_info</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindInfo"><span class="hs-identifier hs-type">EvBindInfo</span></a></span><span>
</span><span id="line-483"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evBindVar"><span class="hs-identifier hs-type">evBindVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>
</span><span id="line-486"></span><span id="evBindVar"><span class="annot"><span class="annottext">evBindVar :: EvBind -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#evBindVar"><span class="hs-identifier hs-var hs-var">evBindVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkWantedEvBind"><span class="hs-identifier hs-type">mkWantedEvBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#CanonicalEvidence"><span class="hs-identifier hs-type">CanonicalEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-489"></span><span id="mkWantedEvBind"><span class="annot"><span class="annottext">mkWantedEvBind :: Id -&gt; CanonicalEvidence -&gt; EvTerm -&gt; EvBind
</span><a href="GHC.Tc.Types.Evidence.html#mkWantedEvBind"><span class="hs-identifier hs-var hs-var">mkWantedEvBind</span></a></span></span><span> </span><span id="local-6989586621682611731"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611731"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span id="local-6989586621682611732"><span class="annot"><span class="annottext">CanonicalEvidence
</span><a href="#local-6989586621682611732"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621682611733"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682611733"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_info :: EvBindInfo
</span><a href="GHC.Tc.Types.Evidence.html#eb_info"><span class="hs-identifier hs-var">eb_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CanonicalEvidence -&gt; EvBindInfo
</span><a href="GHC.Tc.Types.Evidence.html#EvBindWanted"><span class="hs-identifier hs-var">EvBindWanted</span></a></span><span> </span><span class="annot"><span class="annottext">CanonicalEvidence
</span><a href="#local-6989586621682611732"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611731"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_rhs :: EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var">eb_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682611733"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span class="hs-comment">-- EvTypeable are never given, so we can work with EvExpr here instead of EvTerm</span><span>
</span><span id="line-492"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkGivenEvBind"><span class="hs-identifier hs-type">mkGivenEvBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-493"></span><span id="mkGivenEvBind"><span class="annot"><span class="annottext">mkGivenEvBind :: Id -&gt; EvTerm -&gt; EvBind
</span><a href="GHC.Tc.Types.Evidence.html#mkGivenEvBind"><span class="hs-identifier hs-var hs-var">mkGivenEvBind</span></a></span></span><span> </span><span id="local-6989586621682611734"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611734"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span id="local-6989586621682611735"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682611735"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_info :: EvBindInfo
</span><a href="GHC.Tc.Types.Evidence.html#eb_info"><span class="hs-identifier hs-var">eb_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvBindInfo
</span><a href="GHC.Tc.Types.Evidence.html#EvBindGiven"><span class="hs-identifier hs-var">EvBindGiven</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611734"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_rhs :: EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var">eb_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682611735"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-comment">-- An EvTerm is, conceptually, a CoreExpr that implements the constraint.</span><span>
</span><span id="line-497"></span><span class="hs-comment">-- Unfortunately, we cannot just do</span><span>
</span><span id="line-498"></span><span class="hs-comment">--   type EvTerm  = CoreExpr</span><span>
</span><span id="line-499"></span><span class="hs-comment">-- Because of staging problems issues around EvTypeable</span><span>
</span><span id="line-500"></span><span class="hs-keyword">data</span><span> </span><span id="EvTerm"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-var">EvTerm</span></a></span></span><span>
</span><span id="line-501"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EvExpr"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EvTypeable"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-var">EvTypeable</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span>   </span><span class="hs-comment">-- Dictionary for (Typeable ty)</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EvFun"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvFun"><span class="hs-identifier hs-var">EvFun</span></a></span></span><span>     </span><span class="hs-comment">-- /\as \ds. let binds in v</span><span>
</span><span id="line-506"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="et_tvs"><span class="annot"><span class="annottext">EvTerm -&gt; [Id]
</span><a href="GHC.Tc.Types.Evidence.html#et_tvs"><span class="hs-identifier hs-var hs-var">et_tvs</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-507"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="et_given"><span class="annot"><span class="annottext">EvTerm -&gt; [Id]
</span><a href="GHC.Tc.Types.Evidence.html#et_given"><span class="hs-identifier hs-var hs-var">et_given</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-508"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="et_binds"><span class="annot"><span class="annottext">EvTerm -&gt; TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#et_binds"><span class="hs-identifier hs-var hs-var">et_binds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-comment">-- This field is why we need an EvFun</span><span>
</span><span id="line-509"></span><span>                              </span><span class="hs-comment">-- constructor, and can't just use EvExpr</span><span>
</span><span id="line-510"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="et_body"><span class="annot"><span class="annottext">EvTerm -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#et_body"><span class="hs-identifier hs-var hs-var">et_body</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-511"></span><span>
</span><span id="line-512"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682611745"><span id="local-6989586621682611758"><span id="local-6989586621682611768"><span id="local-6989586621682611770"><span id="local-6989586621682611772"><span id="local-6989586621682611777"><span id="local-6989586621682611782"><span id="local-6989586621682611785"><span id="local-6989586621682611788"><span id="local-6989586621682611791"><span id="local-6989586621682611794"><span id="local-6989586621682611797"><span id="local-6989586621682611802"><span id="local-6989586621682611807"><span class="annot"><span class="annottext">Typeable EvTerm
Typeable EvTerm =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; EvTerm -&gt; c EvTerm)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvTerm)
-&gt; (EvTerm -&gt; Constr)
-&gt; (EvTerm -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvTerm))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EvTerm))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; EvTerm -&gt; EvTerm)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTerm -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTerm -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvTerm -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvTerm -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm)
-&gt; Data EvTerm
EvTerm -&gt; Constr
EvTerm -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; EvTerm -&gt; EvTerm
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvTerm -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvTerm -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTerm -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTerm -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvTerm
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EvTerm -&gt; c EvTerm
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvTerm)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EvTerm)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EvTerm -&gt; c EvTerm
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EvTerm -&gt; c EvTerm
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvTerm
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvTerm
$ctoConstr :: EvTerm -&gt; Constr
toConstr :: EvTerm -&gt; Constr
$cdataTypeOf :: EvTerm -&gt; DataType
dataTypeOf :: EvTerm -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvTerm)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvTerm)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EvTerm)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EvTerm)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; EvTerm -&gt; EvTerm
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; EvTerm -&gt; EvTerm
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTerm -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTerm -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTerm -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTerm -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvTerm -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvTerm -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvTerm -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvTerm -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTerm -&gt; m EvTerm
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="hs-keyword">type</span><span> </span><span id="EvExpr"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-515"></span><span>
</span><span id="line-516"></span><span class="hs-comment">-- An EvTerm is (usually) constructed by any of the constructors here</span><span>
</span><span id="line-517"></span><span class="hs-comment">-- and those more complicated ones who were moved to module GHC.Tc.Types.EvTerm</span><span>
</span><span id="line-518"></span><span>
</span><span id="line-519"></span><span class="annot"><span class="hs-comment">-- | Any sort of evidence Id, including coercions</span></span><span>
</span><span id="line-520"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evId"><span class="hs-identifier hs-type">evId</span></a></span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="annot"><a href="GHC.Types.Var.html#EvId"><span class="hs-identifier hs-type">EvId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span>
</span><span id="line-521"></span><span id="evId"><span class="annot"><span class="annottext">evId :: Id -&gt; EvExpr
</span><a href="GHC.Tc.Types.Evidence.html#evId"><span class="hs-identifier hs-var hs-var">evId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; EvExpr
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span class="hs-comment">-- coercion bindings</span><span>
</span><span id="line-524"></span><span class="hs-comment">-- See Note [Coercion evidence terms]</span><span>
</span><span id="line-525"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evCoercion"><span class="hs-identifier hs-type">evCoercion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-526"></span><span id="evCoercion"><span class="annot"><span class="annottext">evCoercion :: TcCoercion -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evCoercion"><span class="hs-identifier hs-var hs-var">evCoercion</span></a></span></span><span> </span><span id="local-6989586621682611814"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611814"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcCoercion -&gt; EvExpr
forall b. TcCoercion -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611814"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span class="annot"><span class="hs-comment">-- | d |&gt; co</span></span><span>
</span><span id="line-529"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evCast"><span class="hs-identifier hs-type">evCast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-530"></span><span id="evCast"><span class="annot"><span class="annottext">evCast :: EvExpr -&gt; TcCoercion -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evCast"><span class="hs-identifier hs-var hs-var">evCast</span></a></span></span><span> </span><span id="local-6989586621682611816"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682611816"><span class="hs-identifier hs-var">et</span></a></span></span><span> </span><span id="local-6989586621682611817"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611817"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; Bool
</span><a href="GHC.Core.Coercion.html#isReflCo"><span class="hs-identifier hs-var">isReflCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611817"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682611816"><span class="hs-identifier hs-var">et</span></a></span><span>
</span><span id="line-531"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvExpr -&gt; TcCoercion -&gt; EvExpr
forall b. Expr b -&gt; TcCoercion -&gt; Expr b
</span><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682611816"><span class="hs-identifier hs-var">et</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682611817"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-532"></span><span>
</span><span id="line-533"></span><span class="hs-comment">-- Dictionary instance application</span><span>
</span><span id="line-534"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evDFunApp"><span class="hs-identifier hs-type">evDFunApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#DFunId"><span class="hs-identifier hs-type">DFunId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-535"></span><span id="evDFunApp"><span class="annot"><span class="annottext">evDFunApp :: Id -&gt; [Mult] -&gt; [EvExpr] -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evDFunApp"><span class="hs-identifier hs-var hs-var">evDFunApp</span></a></span></span><span> </span><span id="local-6989586621682611820"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611820"><span class="hs-identifier hs-var">df</span></a></span></span><span> </span><span id="local-6989586621682611821"><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682611821"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621682611822"><span class="annot"><span class="annottext">[EvExpr]
</span><a href="#local-6989586621682611822"><span class="hs-identifier hs-var">ets</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvTerm) -&gt; EvExpr -&gt; EvTerm
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; EvExpr
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611820"><span class="hs-identifier hs-var">df</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; [Mult] -&gt; EvExpr
forall b. Expr b -&gt; [Mult] -&gt; Expr b
</span><a href="GHC.Core.html#mkTyApps"><span class="hs-operator hs-var">`mkTyApps`</span></a></span><span> </span><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682611821"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; [EvExpr] -&gt; EvExpr
forall b. Expr b -&gt; [Expr b] -&gt; Expr b
</span><a href="GHC.Core.html#mkApps"><span class="hs-operator hs-var">`mkApps`</span></a></span><span> </span><span class="annot"><span class="annottext">[EvExpr]
</span><a href="#local-6989586621682611822"><span class="hs-identifier hs-var">ets</span></a></span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evDataConApp"><span class="hs-identifier hs-type">evDataConApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-538"></span><span id="evDataConApp"><span class="annot"><span class="annottext">evDataConApp :: DataCon -&gt; [Mult] -&gt; [EvExpr] -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evDataConApp"><span class="hs-identifier hs-var hs-var">evDataConApp</span></a></span></span><span> </span><span id="local-6989586621682611825"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682611825"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span id="local-6989586621682611826"><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682611826"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621682611827"><span class="annot"><span class="annottext">[EvExpr]
</span><a href="#local-6989586621682611827"><span class="hs-identifier hs-var">ets</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; [Mult] -&gt; [EvExpr] -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evDFunApp"><span class="hs-identifier hs-var">evDFunApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Id
</span><a href="GHC.Core.DataCon.html#dataConWrapId"><span class="hs-identifier hs-var">dataConWrapId</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682611825"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682611826"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">[EvExpr]
</span><a href="#local-6989586621682611827"><span class="hs-identifier hs-var">ets</span></a></span><span>
</span><span id="line-539"></span><span>
</span><span id="line-540"></span><span class="hs-comment">-- Selector id plus the types at which it</span><span>
</span><span id="line-541"></span><span class="hs-comment">-- should be instantiated, used for HasField</span><span>
</span><span id="line-542"></span><span class="hs-comment">-- dictionaries; see Note [HasField instances]</span><span>
</span><span id="line-543"></span><span class="hs-comment">-- in TcInterface</span><span>
</span><span id="line-544"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evSelector"><span class="hs-identifier hs-type">evSelector</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span>
</span><span id="line-545"></span><span id="evSelector"><span class="annot"><span class="annottext">evSelector :: Id -&gt; [Mult] -&gt; [EvExpr] -&gt; EvExpr
</span><a href="GHC.Tc.Types.Evidence.html#evSelector"><span class="hs-identifier hs-var hs-var">evSelector</span></a></span></span><span> </span><span id="local-6989586621682611828"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611828"><span class="hs-identifier hs-var">sel_id</span></a></span></span><span> </span><span id="local-6989586621682611829"><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682611829"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621682611830"><span class="annot"><span class="annottext">[EvExpr]
</span><a href="#local-6989586621682611830"><span class="hs-identifier hs-var">tms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; EvExpr
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682611828"><span class="hs-identifier hs-var">sel_id</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; [Mult] -&gt; EvExpr
forall b. Expr b -&gt; [Mult] -&gt; Expr b
</span><a href="GHC.Core.html#mkTyApps"><span class="hs-operator hs-var">`mkTyApps`</span></a></span><span> </span><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682611829"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; [EvExpr] -&gt; EvExpr
forall b. Expr b -&gt; [Expr b] -&gt; Expr b
</span><a href="GHC.Core.html#mkApps"><span class="hs-operator hs-var">`mkApps`</span></a></span><span> </span><span class="annot"><span class="annottext">[EvExpr]
</span><a href="#local-6989586621682611830"><span class="hs-identifier hs-var">tms</span></a></span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span class="hs-comment">-- Dictionary for (Typeable ty)</span><span>
</span><span id="line-548"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evTypeable"><span class="hs-identifier hs-type">evTypeable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-549"></span><span id="evTypeable"><span class="annot"><span class="annottext">evTypeable :: Mult -&gt; EvTypeable -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evTypeable"><span class="hs-identifier hs-var hs-var">evTypeable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Mult -&gt; EvTypeable -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-var">EvTypeable</span></a></span><span>
</span><span id="line-550"></span><span>
</span><span id="line-551"></span><span class="hs-comment">-- | Instructions on how to make a 'Typeable' dictionary.</span><span>
</span><span id="line-552"></span><span class="hs-comment">-- See Note [Typeable evidence terms]</span><span>
</span><span id="line-553"></span><span class="hs-keyword">data</span><span> </span><span id="EvTypeable"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-var">EvTypeable</span></a></span></span><span>
</span><span id="line-554"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EvTypeableTyCon"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyCon"><span class="hs-identifier hs-var">EvTypeableTyCon</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-555"></span><span>    </span><span class="hs-comment">-- ^ Dictionary for @Typeable T@ where @T@ is a type constructor with all of</span><span>
</span><span id="line-556"></span><span>    </span><span class="hs-comment">-- its kind variables saturated. The @[EvTerm]@ is @Typeable@ evidence for</span><span>
</span><span id="line-557"></span><span>    </span><span class="hs-comment">-- the applied kinds..</span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EvTypeableTyApp"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyApp"><span class="hs-identifier hs-var">EvTypeableTyApp</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-560"></span><span>    </span><span class="hs-comment">-- ^ Dictionary for @Typeable (s t)@,</span><span>
</span><span id="line-561"></span><span>    </span><span class="hs-comment">-- given a dictionaries for @s@ and @t@.</span><span>
</span><span id="line-562"></span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EvTypeableTrFun"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTrFun"><span class="hs-identifier hs-var">EvTypeableTrFun</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-564"></span><span>    </span><span class="hs-comment">-- ^ Dictionary for @Typeable (s % w -&gt; t)@,</span><span>
</span><span id="line-565"></span><span>    </span><span class="hs-comment">-- given a dictionaries for @w@, @s@, and @t@.</span><span>
</span><span id="line-566"></span><span>
</span><span id="line-567"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EvTypeableTyLit"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyLit"><span class="hs-identifier hs-var">EvTypeableTyLit</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-568"></span><span>    </span><span class="hs-comment">-- ^ Dictionary for a type literal,</span><span>
</span><span id="line-569"></span><span>    </span><span class="hs-comment">-- e.g. @Typeable &quot;foo&quot;@ or @Typeable 3@</span><span>
</span><span id="line-570"></span><span>    </span><span class="hs-comment">-- The 'EvTerm' is evidence of, e.g., @KnownNat 3@</span><span>
</span><span id="line-571"></span><span>    </span><span class="hs-comment">-- (see #10348)</span><span>
</span><span id="line-572"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682611838"><span id="local-6989586621682611850"><span id="local-6989586621682611861"><span id="local-6989586621682611863"><span id="local-6989586621682611865"><span id="local-6989586621682611870"><span id="local-6989586621682611875"><span id="local-6989586621682611878"><span id="local-6989586621682611881"><span id="local-6989586621682611884"><span id="local-6989586621682611887"><span id="local-6989586621682611890"><span id="local-6989586621682611895"><span id="local-6989586621682611900"><span class="annot"><span class="annottext">Typeable EvTypeable
Typeable EvTypeable =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; EvTypeable -&gt; c EvTypeable)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvTypeable)
-&gt; (EvTypeable -&gt; Constr)
-&gt; (EvTypeable -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvTypeable))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c EvTypeable))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; EvTypeable -&gt; EvTypeable)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTypeable -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTypeable -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvTypeable -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvTypeable -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable)
-&gt; Data EvTypeable
EvTypeable -&gt; Constr
EvTypeable -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; EvTypeable -&gt; EvTypeable
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvTypeable -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvTypeable -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTypeable -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTypeable -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvTypeable
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EvTypeable -&gt; c EvTypeable
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvTypeable)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EvTypeable)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EvTypeable -&gt; c EvTypeable
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EvTypeable -&gt; c EvTypeable
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvTypeable
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvTypeable
$ctoConstr :: EvTypeable -&gt; Constr
toConstr :: EvTypeable -&gt; Constr
$cdataTypeOf :: EvTypeable -&gt; DataType
dataTypeOf :: EvTypeable -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvTypeable)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvTypeable)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EvTypeable)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EvTypeable)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; EvTypeable -&gt; EvTypeable
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; EvTypeable -&gt; EvTypeable
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTypeable -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTypeable -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTypeable -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvTypeable -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvTypeable -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvTypeable -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvTypeable -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvTypeable -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvTypeable -&gt; m EvTypeable
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span class="annot"><span class="hs-comment">-- | Evidence for @CallStack@ implicit parameters.</span></span><span>
</span><span id="line-575"></span><span class="hs-keyword">data</span><span> </span><span id="EvCallStack"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvCallStack"><span class="hs-identifier hs-var">EvCallStack</span></a></span></span><span>
</span><span id="line-576"></span><span>  </span><span class="hs-comment">-- See Note [Overview of implicit CallStacks]</span><span>
</span><span id="line-577"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EvCsEmpty"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvCsEmpty"><span class="hs-identifier hs-var">EvCsEmpty</span></a></span></span><span>
</span><span id="line-578"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EvCsPushCall"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvCsPushCall"><span class="hs-identifier hs-var">EvCsPushCall</span></a></span></span><span>
</span><span id="line-579"></span><span>        </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>   </span><span class="hs-comment">-- Usually the name of the function being called</span><span>
</span><span id="line-580"></span><span>                     </span><span class="hs-comment">--   but can also be &quot;the literal 42&quot;</span><span>
</span><span id="line-581"></span><span>                     </span><span class="hs-comment">--   or &quot;an if-then-else expression&quot;, etc</span><span>
</span><span id="line-582"></span><span>        </span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span>  </span><span class="hs-comment">-- Location of the call</span><span>
</span><span id="line-583"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span>       </span><span class="hs-comment">-- Rest of the stack</span><span>
</span><span id="line-584"></span><span>    </span><span class="hs-comment">-- ^ @EvCsPushCall origin loc stk@ represents a call from @origin@,</span><span>
</span><span id="line-585"></span><span>    </span><span class="hs-comment">--  occurring at @loc@, in a calling context @stk@.</span><span>
</span><span id="line-586"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682611909"><span id="local-6989586621682611917"><span id="local-6989586621682611923"><span id="local-6989586621682611925"><span id="local-6989586621682611927"><span id="local-6989586621682611933"><span id="local-6989586621682611938"><span id="local-6989586621682611941"><span id="local-6989586621682611944"><span id="local-6989586621682611947"><span id="local-6989586621682611950"><span id="local-6989586621682611953"><span id="local-6989586621682611958"><span id="local-6989586621682611963"><span class="annot"><span class="annottext">Typeable EvCallStack
Typeable EvCallStack =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; EvCallStack -&gt; c EvCallStack)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvCallStack)
-&gt; (EvCallStack -&gt; Constr)
-&gt; (EvCallStack -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvCallStack))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c EvCallStack))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; EvCallStack -&gt; EvCallStack)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvCallStack -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvCallStack -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvCallStack -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvCallStack -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack)
-&gt; Data EvCallStack
EvCallStack -&gt; Constr
EvCallStack -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; EvCallStack -&gt; EvCallStack
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvCallStack -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvCallStack -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvCallStack -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvCallStack -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvCallStack
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EvCallStack -&gt; c EvCallStack
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvCallStack)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c EvCallStack)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EvCallStack -&gt; c EvCallStack
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EvCallStack -&gt; c EvCallStack
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvCallStack
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EvCallStack
$ctoConstr :: EvCallStack -&gt; Constr
toConstr :: EvCallStack -&gt; Constr
$cdataTypeOf :: EvCallStack -&gt; DataType
dataTypeOf :: EvCallStack -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvCallStack)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EvCallStack)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c EvCallStack)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c EvCallStack)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; EvCallStack -&gt; EvCallStack
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; EvCallStack -&gt; EvCallStack
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvCallStack -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvCallStack -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvCallStack -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EvCallStack -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvCallStack -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EvCallStack -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvCallStack -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EvCallStack -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EvCallStack -&gt; m EvCallStack
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
         Evidence for holes
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-595"></span><span>
</span><span id="line-596"></span><span class="hs-comment">-- | Where to store evidence for expression holes</span><span>
</span><span id="line-597"></span><span class="hs-comment">-- See Note [Holes] in GHC.Tc.Types.Constraint</span><span>
</span><span id="line-598"></span><span class="hs-keyword">data</span><span> </span><span id="HoleExprRef"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HoleExprRef"><span class="hs-identifier hs-var">HoleExprRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HER"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HER"><span class="hs-identifier hs-var">HER</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IORef</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="hs-comment">-- ^ where to write the erroring expression</span></span><span>
</span><span id="line-599"></span><span>                       </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>           </span><span class="annot"><span class="hs-comment">-- ^ expected type of that expression</span></span><span>
</span><span id="line-600"></span><span>                       </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span>           </span><span class="annot"><span class="hs-comment">-- ^ for debug output only</span></span><span>
</span><span id="line-601"></span><span>
</span><span id="line-602"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HoleExprRef"><span class="hs-identifier hs-type">HoleExprRef</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-603"></span><span>  </span><span id="local-6989586621682611972"><span class="annot"><span class="annottext">ppr :: HoleExprRef -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HER"><span class="hs-identifier hs-type">HER</span></a></span><span> </span><span class="annot"><span class="annottext">IORef EvTerm
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Mult
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682611973"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682611973"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682611973"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-604"></span><span>
</span><span id="line-605"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682611977"><span id="local-6989586621682611984"><span id="local-6989586621682611989"><span id="local-6989586621682611994"><span id="local-6989586621682611997"><span id="local-6989586621682612000"><span id="local-6989586621682612003"><span id="local-6989586621682612006"><span id="local-6989586621682612009"><span id="local-6989586621682612014"><span id="local-6989586621682612019"><span class="annot"><span class="hs-identifier hs-type">Data.Data</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HoleExprRef"><span class="hs-identifier hs-type">HoleExprRef</span></a></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-606"></span><span>  </span><span class="hs-comment">-- Placeholder; we can't traverse into HoleExprRef</span><span>
</span><span id="line-607"></span><span>  </span><span id="local-6989586621682612023"><span class="annot"><span class="annottext">toConstr :: HoleExprRef -&gt; Constr
</span><span class="hs-identifier hs-var hs-var hs-var">toConstr</span></span></span><span> </span><span class="annot"><span class="annottext">HoleExprRef
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr
</span><a href="GHC.Utils.Misc.html#abstractConstr"><span class="hs-identifier hs-var">abstractConstr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HoleExprRef&quot;</span></span><span>
</span><span id="line-608"></span><span>  </span><span id="local-6989586621682612026"><span class="annot"><span class="annottext">gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HoleExprRef
</span><span class="hs-identifier hs-var hs-var hs-var">gunfold</span></span></span><span> </span><span class="annot"><span class="annottext">forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">forall r. r -&gt; c r
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr -&gt; c HoleExprRef
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gunfold&quot;</span></span><span>
</span><span id="line-609"></span><span>  </span><span id="local-6989586621682612027"><span class="annot"><span class="annottext">dataTypeOf :: HoleExprRef -&gt; DataType
</span><span class="hs-identifier hs-var hs-var hs-var">dataTypeOf</span></span></span><span> </span><span class="annot"><span class="annottext">HoleExprRef
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; DataType
</span><span class="hs-identifier hs-var">Data.mkNoRepType</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HoleExprRef&quot;</span></span><span>
</span><span id="line-610"></span><span>
</span><span id="line-611"></span><span class="hs-comment">{-
Note [Typeable evidence terms]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The EvTypeable data type looks isomorphic to Type, but the EvTerms
inside can be EvIds.  Eg
    f :: forall a. Typeable a =&gt; a -&gt; TypeRep
    f x = typeRep (undefined :: Proxy [a])
Here for the (Typeable [a]) dictionary passed to typeRep we make
evidence
    dl :: Typeable [a] = EvTypeable [a]
                            (EvTypeableTyApp (EvTypeableTyCon []) (EvId d))
where
    d :: Typeable a
is the lambda-bound dictionary passed into f.

Note [Coercion evidence terms]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A &quot;coercion evidence term&quot; takes one of these forms
   co_tm ::= EvId v           where v :: t1 ~# t2
           | EvCoercion co
           | EvCast co_tm co

We do quite often need to get a TcCoercion from an EvTerm; see
'evTermCoercion'.

INVARIANT: The evidence for any constraint with type (t1 ~# t2) is
a coercion evidence term.  Consider for example
    [G] d :: F Int a
If we have
    ax7 a :: F Int a ~ (a ~ Bool)
then we do NOT generate the constraint
    [G] (d |&gt; ax7 a) :: a ~ Bool
because that does not satisfy the invariant (d is not a coercion variable).
Instead we make a binding
    g1 :: a~Bool = g |&gt; ax7 a
and the constraint
    [G] g1 :: a~Bool
See #7238 and Note [Bind new Givens immediately] in GHC.Tc.Types.Constraint

Note [EvBinds/EvTerm]
~~~~~~~~~~~~~~~~~~~~~
How evidence is created and updated. Bindings for dictionaries,
and coercions and implicit parameters are carried around in TcEvBinds
which during constraint generation and simplification is always of the
form (TcEvBinds ref). After constraint simplification is finished it
will be transformed to t an (EvBinds ev_bag).

Evidence for coercions *SHOULD* be filled in using the TcEvBinds
However, all EvVars that correspond to *wanted* coercion terms in
an EvBind must be mutable variables so that they can be readily
inlined (by zonking) after constraint simplification is finished.

Conclusion: a new wanted coercion variable should be made mutable.
[Notice though that evidence variables that bind coercion terms
 from super classes will be &quot;given&quot; and hence rigid]


Note [Overview of implicit CallStacks]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
(See https://gitlab.haskell.org/ghc/ghc/wikis/explicit-call-stack/implicit-locations)

The goal of CallStack evidence terms is to reify locations
in the program source as runtime values, without any support
from the RTS. We accomplish this by assigning a special meaning
to constraints of type GHC.Stack.Types.HasCallStack, an alias

  type HasCallStack = (?callStack :: CallStack)

Implicit parameters of type GHC.Stack.Types.CallStack (the name is not
important) are solved in three steps:

1. Explicit, user-written occurrences of `?stk :: CallStack`
   which have IPOccOrigin, are solved directly from the given IP,
   just like a regular IP; see GHC.Tc.Solver.Dict.tryInertDicts.

   For example, the occurrence of `?stk` in

     error :: (?stk :: CallStack) =&gt; String -&gt; a
     error s = raise (ErrorCall (s ++ prettyCallStack ?stk))

   will be solved for the `?stk` in `error`s context as before.

2. In a function call, instead of simply passing the given IP, we first
   append the current call-site to it. For example, consider a
   call to the callstack-aware `error` above.

     foo :: (?stk :: CallStack) =&gt; a
     foo = error &quot;undefined!&quot;

   Here we want to take the given `?stk` and append the current
   call-site, before passing it to `error`. In essence, we want to
   rewrite `foo &quot;undefined!&quot;` to

     let ?stk = pushCallStack &lt;foo's location&gt; ?stk
     in foo &quot;undefined!&quot;

   We achieve this as follows:

   * At a call of foo :: (?stk :: CallStack) =&gt; blah
     we emit a Wanted
        [W] d1 : IP &quot;stk&quot; CallStack
     with CtOrigin = OccurrenceOf &quot;foo&quot;

   * We /solve/ this constraint, in GHC.Tc.Solver.Dict.canDictNC
     by emitting a NEW Wanted
        [W] d2 :: IP &quot;stk&quot; CallStack
     with CtOrigin = IPOccOrigin

     and solve d1 = EvCsPushCall &quot;foo&quot; &lt;foo's location&gt; (EvId d1)

   * The new Wanted, for `d2` will be solved per rule (1), ie as a regular IP.

3. We use the predicate isPushCallStackOrigin to identify whether we
   want to do (1) solve directly, or (2) push and then solve directly.
   Key point (see #19918): the CtOrigin where we want to push an item on the
   call stack can include IfThenElseOrigin etc, when RebindableSyntax is
   involved.  See the defn of fun_orig in GHC.Tc.Gen.App.tcInstFun; it is
   this CtOrigin that is pinned on the constraints generated by functions
   in the &quot;expansion&quot; for rebindable syntax. c.f. GHC.Rename.Expr
   Note [Handling overloaded and rebindable constructs]

4. We default any insoluble CallStacks to the empty CallStack. Suppose
   `undefined` did not request a CallStack, ie

     undefinedNoStk :: a
     undefinedNoStk = error &quot;undefined!&quot;

   Under the usual IP rules, the new wanted from rule (2) would be
   insoluble as there's no given IP from which to solve it, so we
   would get an &quot;unbound implicit parameter&quot; error.

   We don't ever want to emit an insoluble CallStack IP, so we add a
   defaulting pass to default any remaining wanted CallStacks to the
   empty CallStack with the evidence term

     EvCsEmpty

   (see GHC.Tc.Solver.simplifyTopWanteds and GHC.Tc.Solver.defaultCallStacks)

This provides a lightweight mechanism for building up call-stacks
explicitly, but is notably limited by the fact that the stack will
stop at the first function whose type does not include a CallStack IP.
For example, using the above definition of `undefined`:

  head :: [a] -&gt; a
  head []    = undefined
  head (x:_) = x

  g = head []

the resulting CallStack will include the call to `undefined` in `head`
and the call to `error` in `undefined`, but *not* the call to `head`
in `g`, because `head` did not explicitly request a CallStack.


Important Details:
- GHC should NEVER report an insoluble CallStack constraint.

- GHC should NEVER infer a CallStack constraint unless one was requested
  with a partial type signature (See GHC.Tc.Solver..pickQuantifiablePreds).

- A CallStack (defined in GHC.Stack.Types) is a [(String, SrcLoc)],
  where the String is the name of the binder that is used at the
  SrcLoc. SrcLoc is also defined in GHC.Stack.Types and contains the
  package/module/file name, as well as the full source-span. Both
  CallStack and SrcLoc are kept abstract so only GHC can construct new
  values.

- We will automatically solve any wanted CallStack regardless of the
  name of the IP, i.e.

    f = show (?stk :: CallStack)
    g = show (?loc :: CallStack)

  are both valid. However, we will only push new SrcLocs onto existing
  CallStacks when the IP names match, e.g. in

    head :: (?loc :: CallStack) =&gt; [a] -&gt; a
    head [] = error (show (?stk :: CallStack))

  the printed CallStack will NOT include head's call-site. This reflects the
  standard scoping rules of implicit-parameters.

- An EvCallStack term desugars to a CoreExpr of type `IP &quot;some str&quot; CallStack`.
  The desugarer will need to unwrap the IP newtype before pushing a new
  call-site onto a given stack (See GHC.HsToCore.Binds.dsEvCallStack)

- When we emit a new wanted CallStack from rule (2) we set its origin to
  `IPOccOrigin ip_name` instead of the original `OccurrenceOf func`
  (see GHC.Tc.Solver.Dict.tryInertDicts).

  This is a bit shady, but is how we ensure that the new wanted is
  solved like a regular IP.

-}</span><span>
</span><span id="line-806"></span><span>
</span><span id="line-807"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkEvCast"><span class="hs-identifier hs-type">mkEvCast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-808"></span><span id="mkEvCast"><span class="annot"><span class="annottext">mkEvCast :: EvExpr -&gt; TcCoercion -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#mkEvCast"><span class="hs-identifier hs-var hs-var">mkEvCast</span></a></span></span><span> </span><span id="local-6989586621682612028"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612028"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span id="local-6989586621682612029"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612029"><span class="hs-identifier hs-var">lco</span></a></span></span><span>
</span><span id="line-809"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; Bool -&gt; Bool
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcCoercion -&gt; Role
</span><a href="GHC.Core.Coercion.html#coercionRole"><span class="hs-identifier hs-var">coercionRole</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612029"><span class="hs-identifier hs-var">lco</span></a></span><span> </span><span class="annot"><span class="annottext">Role -&gt; Role -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Coercion of wrong role passed to mkEvCast:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612028"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612029"><span class="hs-identifier hs-var">lco</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-811"></span><span>    </span><span class="annot"><span class="annottext">TcCoercion -&gt; Bool
</span><a href="GHC.Core.Coercion.html#isReflCo"><span class="hs-identifier hs-var">isReflCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612029"><span class="hs-identifier hs-var">lco</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612028"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-812"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; TcCoercion -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evCast"><span class="hs-identifier hs-var">evCast</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612028"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612029"><span class="hs-identifier hs-var">lco</span></a></span><span>
</span><span id="line-813"></span><span>
</span><span id="line-814"></span><span>
</span><span id="line-815"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#mkEvScSelectors"><span class="hs-identifier hs-type">mkEvScSelectors</span></a></span><span>         </span><span class="hs-comment">-- Assume   class (..., D ty, ...) =&gt; C a b</span><span>
</span><span id="line-816"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Class.html#Class"><span class="hs-identifier hs-type">Class</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- C ty1 ty2</span><span>
</span><span id="line-817"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcPredType"><span class="hs-identifier hs-type">TcPredType</span></a></span><span class="hs-special">,</span><span>      </span><span class="hs-comment">-- D ty[ty1/a,ty2/b]</span><span>
</span><span id="line-818"></span><span>       </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span class="hs-special">)</span><span>          </span><span class="hs-comment">-- :: C ty1 ty2 -&gt; D ty[ty1/a,ty2/b]</span><span>
</span><span id="line-819"></span><span>     </span><span class="hs-special">]</span><span>
</span><span id="line-820"></span><span id="mkEvScSelectors"><span class="annot"><span class="annottext">mkEvScSelectors :: Class -&gt; [Mult] -&gt; [(Mult, EvExpr)]
</span><a href="GHC.Tc.Types.Evidence.html#mkEvScSelectors"><span class="hs-identifier hs-var hs-var">mkEvScSelectors</span></a></span></span><span> </span><span id="local-6989586621682612033"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621682612033"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span id="local-6989586621682612034"><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682612034"><span class="hs-identifier hs-var">tys</span></a></span></span><span>
</span><span id="line-821"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Mult -&gt; Int -&gt; (Mult, EvExpr))
-&gt; [Mult] -&gt; [Int] -&gt; [(Mult, EvExpr)]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">Mult -&gt; Int -&gt; (Mult, EvExpr)
</span><a href="#local-6989586621682612036"><span class="hs-identifier hs-var">mk_pr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; [Mult] -&gt; [Mult]
</span><a href="GHC.Tc.Utils.TcType.html#immSuperClasses"><span class="hs-identifier hs-var">immSuperClasses</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621682612033"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682612034"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span>
</span><span id="line-822"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-823"></span><span>    </span><span id="local-6989586621682612036"><span class="annot"><span class="annottext">mk_pr :: Mult -&gt; Int -&gt; (Mult, EvExpr)
</span><a href="#local-6989586621682612036"><span class="hs-identifier hs-var hs-var">mk_pr</span></a></span></span><span> </span><span id="local-6989586621682612038"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612038"><span class="hs-identifier hs-var">pred</span></a></span></span><span> </span><span id="local-6989586621682612039"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682612039"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612038"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; EvExpr
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612040"><span class="hs-identifier hs-var">sc_sel_id</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; [Mult] -&gt; EvExpr
forall b. Expr b -&gt; [Mult] -&gt; Expr b
</span><a href="GHC.Core.html#mkTyApps"><span class="hs-operator hs-var">`mkTyApps`</span></a></span><span> </span><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682612034"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-824"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-825"></span><span>        </span><span id="local-6989586621682612040"><span class="annot"><span class="annottext">sc_sel_id :: Id
</span><a href="#local-6989586621682612040"><span class="hs-identifier hs-var hs-var">sc_sel_id</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Class -&gt; Int -&gt; Id
</span><a href="GHC.Core.Class.html#classSCSelId"><span class="hs-identifier hs-var">classSCSelId</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621682612033"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682612039"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-comment">-- Zero-indexed</span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#emptyTcEvBinds"><span class="hs-identifier hs-type">emptyTcEvBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span>
</span><span id="line-828"></span><span id="emptyTcEvBinds"><span class="annot"><span class="annottext">emptyTcEvBinds :: TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#emptyTcEvBinds"><span class="hs-identifier hs-var hs-var">emptyTcEvBinds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag EvBind -&gt; TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-var">EvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-829"></span><span>
</span><span id="line-830"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isEmptyTcEvBinds"><span class="hs-identifier hs-type">isEmptyTcEvBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-831"></span><span id="isEmptyTcEvBinds"><span class="annot"><span class="annottext">isEmptyTcEvBinds :: TcEvBinds -&gt; Bool
</span><a href="GHC.Tc.Types.Evidence.html#isEmptyTcEvBinds"><span class="hs-identifier hs-var hs-var">isEmptyTcEvBinds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-type">EvBinds</span></a></span><span> </span><span id="local-6989586621682612041"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621682612041"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag EvBind -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621682612041"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-832"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#isEmptyTcEvBinds"><span class="hs-identifier hs-var">isEmptyTcEvBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;isEmptyTcEvBinds&quot;</span></span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evTermCoercion_maybe"><span class="hs-identifier hs-type">evTermCoercion_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span>
</span><span id="line-835"></span><span class="hs-comment">-- Applied only to EvTerms of type (s~t)</span><span>
</span><span id="line-836"></span><span class="hs-comment">-- See Note [Coercion evidence terms]</span><span>
</span><span id="line-837"></span><span id="evTermCoercion_maybe"><span class="annot"><span class="annottext">evTermCoercion_maybe :: EvTerm -&gt; Maybe TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#evTermCoercion_maybe"><span class="hs-identifier hs-var hs-var">evTermCoercion_maybe</span></a></span></span><span> </span><span id="local-6989586621682612043"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612043"><span class="hs-identifier hs-var">ev_term</span></a></span></span><span>
</span><span id="line-838"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span> </span><span id="local-6989586621682612044"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612044"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612043"><span class="hs-identifier hs-var">ev_term</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; Maybe TcCoercion
</span><a href="#local-6989586621682612045"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612044"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-839"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe TcCoercion
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-840"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-841"></span><span>    </span><span class="annot"><a href="#local-6989586621682612045"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span>
</span><span id="line-842"></span><span>    </span><span id="local-6989586621682612045"><span class="annot"><span class="annottext">go :: EvExpr -&gt; Maybe TcCoercion
</span><a href="#local-6989586621682612045"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621682612046"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612046"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; Maybe TcCoercion
forall a. a -&gt; Maybe a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612046"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-843"></span><span>    </span><span class="annot"><a href="#local-6989586621682612045"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span id="local-6989586621682612048"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612048"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; Maybe TcCoercion
forall a. a -&gt; Maybe a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612048"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-844"></span><span>    </span><span class="annot"><a href="#local-6989586621682612045"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-type">Cast</span></a></span><span> </span><span id="local-6989586621682612049"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612049"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span id="local-6989586621682612050"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612050"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682612051"><span class="annot"><a href="#local-6989586621682612051"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; Maybe TcCoercion
</span><a href="#local-6989586621682612045"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612049"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-845"></span><span>                          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.html#mkCoCast"><span class="hs-identifier hs-type">mkCoCast</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682612051"><span class="hs-identifier hs-type">co'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682612050"><span class="hs-identifier hs-type">co</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-846"></span><span>    </span><span class="annot"><a href="#local-6989586621682612045"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe TcCoercion
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-847"></span><span>
</span><span id="line-848"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evTermCoercion"><span class="hs-identifier hs-type">evTermCoercion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span>
</span><span id="line-849"></span><span id="evTermCoercion"><span class="annot"><span class="annottext">evTermCoercion :: EvTerm -&gt; TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#evTermCoercion"><span class="hs-identifier hs-var hs-var">evTermCoercion</span></a></span></span><span> </span><span id="local-6989586621682612053"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612053"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; Maybe TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#evTermCoercion_maybe"><span class="hs-identifier hs-var">evTermCoercion_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612053"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-850"></span><span>                      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682612054"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612054"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612054"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-851"></span><span>                      </span><span class="annot"><span class="annottext">Maybe TcCoercion
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcCoercion
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;evTermCoercion&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612053"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-852"></span><span>
</span><span id="line-853"></span><span>
</span><span id="line-854"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
                  Free variables
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-859"></span><span>
</span><span id="line-860"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#findNeededEvVars"><span class="hs-identifier hs-type">findNeededEvVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindMap"><span class="hs-identifier hs-type">EvBindMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span>
</span><span id="line-861"></span><span class="hs-comment">-- Find all the Given evidence needed by seeds,</span><span>
</span><span id="line-862"></span><span class="hs-comment">-- looking transitively through binds</span><span>
</span><span id="line-863"></span><span id="findNeededEvVars"><span class="annot"><span class="annottext">findNeededEvVars :: EvBindMap -&gt; CoVarSet -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#findNeededEvVars"><span class="hs-identifier hs-var hs-var">findNeededEvVars</span></a></span></span><span> </span><span id="local-6989586621682612056"><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621682612056"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span> </span><span id="local-6989586621682612057"><span class="annot"><span class="annottext">CoVarSet
</span><a href="#local-6989586621682612057"><span class="hs-identifier hs-var">seeds</span></a></span></span><span>
</span><span id="line-864"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoVarSet -&gt; CoVarSet) -&gt; CoVarSet -&gt; CoVarSet
</span><a href="GHC.Types.Var.Set.html#transCloVarSet"><span class="hs-identifier hs-var">transCloVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">CoVarSet -&gt; CoVarSet
</span><a href="#local-6989586621682612059"><span class="hs-identifier hs-var">also_needs</span></a></span><span> </span><span class="annot"><span class="annottext">CoVarSet
</span><a href="#local-6989586621682612057"><span class="hs-identifier hs-var">seeds</span></a></span><span>
</span><span id="line-865"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-866"></span><span>   </span><span class="annot"><a href="#local-6989586621682612059"><span class="hs-identifier hs-type">also_needs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span>
</span><span id="line-867"></span><span>   </span><span id="local-6989586621682612059"><span class="annot"><span class="annottext">also_needs :: CoVarSet -&gt; CoVarSet
</span><a href="#local-6989586621682612059"><span class="hs-identifier hs-var hs-var">also_needs</span></a></span></span><span> </span><span id="local-6989586621682612060"><span class="annot"><span class="annottext">CoVarSet
</span><a href="#local-6989586621682612060"><span class="hs-identifier hs-var">needs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; CoVarSet -&gt; CoVarSet) -&gt; CoVarSet -&gt; CoVarSet -&gt; CoVarSet
forall elt a. (elt -&gt; a -&gt; a) -&gt; a -&gt; UniqSet elt -&gt; a
</span><a href="GHC.Types.Unique.Set.html#nonDetStrictFoldUniqSet"><span class="hs-identifier hs-var">nonDetStrictFoldUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; CoVarSet -&gt; CoVarSet
</span><a href="#local-6989586621682612062"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="annot"><span class="annottext">CoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">CoVarSet
</span><a href="#local-6989586621682612060"><span class="hs-identifier hs-var">needs</span></a></span><span>
</span><span id="line-868"></span><span>     </span><span class="hs-comment">-- It's OK to use a non-deterministic fold here because we immediately</span><span>
</span><span id="line-869"></span><span>     </span><span class="hs-comment">-- forget about the ordering by creating a set</span><span>
</span><span id="line-870"></span><span>
</span><span id="line-871"></span><span>   </span><span class="annot"><a href="#local-6989586621682612062"><span class="hs-identifier hs-type">add</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span>
</span><span id="line-872"></span><span>   </span><span id="local-6989586621682612062"><span class="annot"><span class="annottext">add :: Id -&gt; CoVarSet -&gt; CoVarSet
</span><a href="#local-6989586621682612062"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621682612064"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612064"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621682612065"><span class="annot"><span class="annottext">CoVarSet
</span><a href="#local-6989586621682612065"><span class="hs-identifier hs-var">needs</span></a></span></span><span>
</span><span id="line-873"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682612066"><span class="annot"><span class="annottext">EvBind
</span><a href="#local-6989586621682612066"><span class="hs-identifier hs-var">ev_bind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvBindMap -&gt; Id -&gt; Maybe EvBind
</span><a href="GHC.Tc.Types.Evidence.html#lookupEvBind"><span class="hs-identifier hs-var">lookupEvBind</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621682612056"><span class="hs-identifier hs-var">ev_binds</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612064"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-874"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_info :: EvBind -&gt; EvBindInfo
</span><a href="GHC.Tc.Types.Evidence.html#eb_info"><span class="hs-identifier hs-var">eb_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvBindInfo
</span><a href="GHC.Tc.Types.Evidence.html#EvBindGiven"><span class="hs-identifier hs-var">EvBindGiven</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_rhs :: EvBind -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var">eb_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682612067"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612067"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvBind
</span><a href="#local-6989586621682612066"><span class="hs-identifier hs-var">ev_bind</span></a></span><span>
</span><span id="line-875"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612067"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">CoVarSet -&gt; CoVarSet -&gt; CoVarSet
</span><a href="GHC.Types.Var.Set.html#unionVarSet"><span class="hs-operator hs-var">`unionVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">CoVarSet
</span><a href="#local-6989586621682612065"><span class="hs-identifier hs-var">needs</span></a></span><span>
</span><span id="line-876"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-877"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoVarSet
</span><a href="#local-6989586621682612065"><span class="hs-identifier hs-var">needs</span></a></span><span>
</span><span id="line-878"></span><span>
</span><span id="line-879"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerm"><span class="hs-identifier hs-type">evVarsOfTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span>
</span><span id="line-880"></span><span id="evVarsOfTerm"><span class="annot"><span class="annottext">evVarsOfTerm :: EvTerm -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerm"><span class="hs-identifier hs-var hs-var">evVarsOfTerm</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span> </span><span id="local-6989586621682612069"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612069"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InterestingVarFun -&gt; EvExpr -&gt; CoVarSet
</span><a href="GHC.Core.FVs.html#exprSomeFreeVars"><span class="hs-identifier hs-var">exprSomeFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">InterestingVarFun
</span><a href="GHC.Core.Predicate.html#isEvVar"><span class="hs-identifier hs-var">isEvVar</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612069"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-881"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682612071"><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621682612071"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvTypeable -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evVarsOfTypeable"><span class="hs-identifier hs-var">evVarsOfTypeable</span></a></span><span> </span><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621682612071"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-882"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvFun"><span class="hs-identifier hs-type">EvFun</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span> </span><span class="hs-comment">-- See Note [Free vars of EvFun]</span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerms"><span class="hs-identifier hs-type">evVarsOfTerms</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span>
</span><span id="line-885"></span><span id="evVarsOfTerms"><span class="annot"><span class="annottext">evVarsOfTerms :: [EvTerm] -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerms"><span class="hs-identifier hs-var hs-var">evVarsOfTerms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvTerm -&gt; CoVarSet) -&gt; [EvTerm] -&gt; CoVarSet
forall a. (a -&gt; CoVarSet) -&gt; [a] -&gt; CoVarSet
</span><a href="GHC.Types.Var.Set.html#mapUnionVarSet"><span class="hs-identifier hs-var">mapUnionVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a></span><span>
</span><span id="line-886"></span><span>
</span><span id="line-887"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evVarsOfTypeable"><span class="hs-identifier hs-type">evVarsOfTypeable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span>
</span><span id="line-888"></span><span id="evVarsOfTypeable"><span class="annot"><span class="annottext">evVarsOfTypeable :: EvTypeable -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evVarsOfTypeable"><span class="hs-identifier hs-var hs-var">evVarsOfTypeable</span></a></span></span><span> </span><span id="local-6989586621682612075"><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621682612075"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-889"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621682612075"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-890"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyCon"><span class="hs-identifier hs-type">EvTypeableTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682612076"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682612076"><span class="hs-identifier hs-var">e</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(EvTerm -&gt; CoVarSet) -&gt; [EvTerm] -&gt; CoVarSet
forall a. (a -&gt; CoVarSet) -&gt; [a] -&gt; CoVarSet
</span><a href="GHC.Types.Var.Set.html#mapUnionVarSet"><span class="hs-identifier hs-var">mapUnionVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a></span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682612076"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-891"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyApp"><span class="hs-identifier hs-type">EvTypeableTyApp</span></a></span><span> </span><span id="local-6989586621682612077"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612077"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621682612078"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612078"><span class="hs-identifier hs-var">e2</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[EvTerm] -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerms"><span class="hs-identifier hs-var">evVarsOfTerms</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612077"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612078"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-892"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTrFun"><span class="hs-identifier hs-type">EvTypeableTrFun</span></a></span><span> </span><span id="local-6989586621682612079"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612079"><span class="hs-identifier hs-var">em</span></a></span></span><span> </span><span id="local-6989586621682612080"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612080"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621682612081"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612081"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[EvTerm] -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerms"><span class="hs-identifier hs-var">evVarsOfTerms</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612079"><span class="hs-identifier hs-var">em</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612080"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612081"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-893"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyLit"><span class="hs-identifier hs-type">EvTypeableTyLit</span></a></span><span> </span><span id="local-6989586621682612082"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612082"><span class="hs-identifier hs-var">e</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; CoVarSet
</span><a href="GHC.Tc.Types.Evidence.html#evVarsOfTerm"><span class="hs-identifier hs-var">evVarsOfTerm</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612082"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-894"></span><span>
</span><span id="line-895"></span><span>
</span><span id="line-896"></span><span class="hs-comment">{- Note [Free vars of EvFun]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Finding the free vars of an EvFun is made tricky by the fact the
bindings et_binds may be a mutable variable.  Fortunately, we
can just squeeze by.  Here's how.

* evVarsOfTerm is used only by GHC.Tc.Solver.neededEvVars.
* Each EvBindsVar in an et_binds field of an EvFun is /also/ in the
  ic_binds field of an Implication
* So we can track usage via the processing for that implication,
  (see Note [Tracking redundant constraints] in GHC.Tc.Solver).
  We can ignore usage from the EvFun altogether.

************************************************************************
*                                                                      *
                  Pretty printing
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-915"></span><span>
</span><span id="line-916"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-917"></span><span>  </span><span id="local-6989586621682612086"><span class="annot"><span class="annottext">ppr :: HsWrapper -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682612087"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612087"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; (Bool -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#pprHsWrapper"><span class="hs-identifier hs-var">pprHsWrapper</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612087"><span class="hs-identifier hs-var">co_fn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#no_parens"><span class="hs-identifier hs-var">no_parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;&gt;&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-918"></span><span>
</span><span id="line-919"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#pprHsWrapper"><span class="hs-identifier hs-type">pprHsWrapper</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-920"></span><span class="hs-comment">-- With -fprint-typechecker-elaboration, print the wrapper</span><span>
</span><span id="line-921"></span><span class="hs-comment">--   otherwise just print what's inside</span><span>
</span><span id="line-922"></span><span class="hs-comment">-- The pp_thing_inside function takes Bool to say whether</span><span>
</span><span id="line-923"></span><span class="hs-comment">--    it's in a position that needs parens for a non-atomic thing</span><span>
</span><span id="line-924"></span><span id="pprHsWrapper"><span class="annot"><span class="annottext">pprHsWrapper :: HsWrapper -&gt; (Bool -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#pprHsWrapper"><span class="hs-identifier hs-var hs-var">pprHsWrapper</span></a></span></span><span> </span><span id="local-6989586621682612089"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612089"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span id="local-6989586621682612090"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612090"><span class="hs-identifier hs-var">pp_thing_inside</span></a></span></span><span>
</span><span id="line-925"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SDocContext -&gt; Bool) -&gt; (Bool -&gt; SDoc) -&gt; SDoc
forall a. (SDocContext -&gt; a) -&gt; (a -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocOption"><span class="hs-identifier hs-var">sdocOption</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#sdocPrintTypecheckerElaboration"><span class="hs-identifier hs-var">sdocPrintTypecheckerElaboration</span></a></span><span> </span><span class="annot"><span class="annottext">((Bool -&gt; SDoc) -&gt; SDoc) -&gt; (Bool -&gt; SDoc) -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-926"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; SDoc) -&gt; HsWrapper -&gt; Bool -&gt; SDoc
</span><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612090"><span class="hs-identifier hs-var">pp_thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612089"><span class="hs-identifier hs-var">wrap</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-927"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612090"><span class="hs-identifier hs-var">pp_thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-928"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-929"></span><span>    </span><span class="annot"><a href="#local-6989586621682612093"><span class="hs-identifier hs-type">help</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-930"></span><span>    </span><span class="hs-comment">-- True  &lt;=&gt; appears in function application position</span><span>
</span><span id="line-931"></span><span>    </span><span class="hs-comment">-- False &lt;=&gt; appears as body of let or lambda</span><span>
</span><span id="line-932"></span><span>    </span><span id="local-6989586621682612093"><span class="annot"><span class="annottext">help :: (Bool -&gt; SDoc) -&gt; HsWrapper -&gt; Bool -&gt; SDoc
</span><a href="#local-6989586621682612093"><span class="hs-identifier hs-var hs-var">help</span></a></span></span><span> </span><span id="local-6989586621682612094"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612094"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612094"><span class="hs-identifier hs-var">it</span></a></span><span>
</span><span id="line-933"></span><span>    </span><span class="annot"><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span id="local-6989586621682612095"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612095"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-identifier hs-type">WpCompose</span></a></span><span> </span><span id="local-6989586621682612096"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612096"><span class="hs-identifier hs-var">f1</span></a></span></span><span> </span><span id="local-6989586621682612097"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612097"><span class="hs-identifier hs-var">f2</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; SDoc) -&gt; HsWrapper -&gt; Bool -&gt; SDoc
</span><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Bool -&gt; SDoc) -&gt; HsWrapper -&gt; Bool -&gt; SDoc
</span><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612095"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612097"><span class="hs-identifier hs-var">f2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612096"><span class="hs-identifier hs-var">f1</span></a></span><span>
</span><span id="line-934"></span><span>    </span><span class="annot"><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span id="local-6989586621682612098"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612098"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-type">WpFun</span></a></span><span> </span><span id="local-6989586621682612099"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612099"><span class="hs-identifier hs-var">f1</span></a></span></span><span> </span><span id="local-6989586621682612100"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612100"><span class="hs-identifier hs-var">f2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621682612101"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612101"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682612102"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612102"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Bool -&gt; SDoc) -&gt; SDoc -&gt; Bool -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\(x&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mult -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612101"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Mult -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612102"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;).&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-935"></span><span>                                            </span><span class="annot"><span class="annottext">(Bool -&gt; SDoc) -&gt; HsWrapper -&gt; Bool -&gt; SDoc
</span><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612098"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; SDoc) -&gt; HsWrapper -&gt; Bool -&gt; SDoc
</span><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;x&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612099"><span class="hs-identifier hs-var">f1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682612100"><span class="hs-identifier hs-var">f2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-936"></span><span>    </span><span class="annot"><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span id="local-6989586621682612108"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612108"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-type">WpCast</span></a></span><span> </span><span id="local-6989586621682612109"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612109"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Bool -&gt; SDoc) -&gt; SDoc -&gt; Bool -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612108"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;|&gt;&quot;</span></span><span>
</span><span id="line-937"></span><span>                                              </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprParendCo"><span class="hs-identifier hs-var">pprParendCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612109"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-938"></span><span>    </span><span class="annot"><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span id="local-6989586621682612113"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612113"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-type">WpEvApp</span></a></span><span> </span><span id="local-6989586621682612114"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612114"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#no_parens"><span class="hs-identifier hs-var">no_parens</span></a></span><span>  </span><span class="annot"><span class="annottext">(SDoc -&gt; Bool -&gt; SDoc) -&gt; SDoc -&gt; Bool -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612113"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612114"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-939"></span><span>    </span><span class="annot"><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span id="local-6989586621682612115"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612115"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyApp"><span class="hs-identifier hs-type">WpTyApp</span></a></span><span> </span><span id="local-6989586621682612116"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612116"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#no_parens"><span class="hs-identifier hs-var">no_parens</span></a></span><span>  </span><span class="annot"><span class="annottext">(SDoc -&gt; Bool -&gt; SDoc) -&gt; SDoc -&gt; Bool -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612115"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Mult -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprParendType"><span class="hs-identifier hs-var">pprParendType</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612116"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-940"></span><span>    </span><span class="annot"><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span id="local-6989586621682612118"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612118"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-type">WpEvLam</span></a></span><span> </span><span id="local-6989586621682612119"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612119"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Bool -&gt; SDoc) -&gt; SDoc -&gt; Bool -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#pprLamBndr"><span class="hs-identifier hs-var">pprLamBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612119"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#dot"><span class="hs-identifier hs-var">dot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612118"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">]</span><span>
</span><span id="line-941"></span><span>    </span><span class="annot"><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span id="local-6989586621682612122"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612122"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-type">WpTyLam</span></a></span><span> </span><span id="local-6989586621682612123"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612123"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Bool -&gt; SDoc) -&gt; SDoc -&gt; Bool -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;/\\&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#pprLamBndr"><span class="hs-identifier hs-var">pprLamBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612123"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#dot"><span class="hs-identifier hs-var">dot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612122"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">]</span><span>
</span><span id="line-942"></span><span>    </span><span class="annot"><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span id="local-6989586621682612124"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612124"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpLet"><span class="hs-identifier hs-type">WpLet</span></a></span><span> </span><span id="local-6989586621682612125"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682612125"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Bool -&gt; SDoc) -&gt; SDoc -&gt; Bool -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;let&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcEvBinds -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682612125"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612124"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">]</span><span>
</span><span id="line-943"></span><span>    </span><span class="annot"><a href="#local-6989586621682612093"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span id="local-6989586621682612127"><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612127"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpMultCoercion"><span class="hs-identifier hs-type">WpMultCoercion</span></a></span><span> </span><span id="local-6989586621682612128"><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612128"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Bool -&gt; SDoc) -&gt; SDoc -&gt; Bool -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; SDoc
</span><a href="#local-6989586621682612127"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;multiplicity coercion&gt;&quot;</span></span><span>
</span><span id="line-944"></span><span>                                              </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprParendCo"><span class="hs-identifier hs-var">pprParendCo</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercion
</span><a href="#local-6989586621682612128"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-945"></span><span>
</span><span id="line-946"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#pprLamBndr"><span class="hs-identifier hs-type">pprLamBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-947"></span><span id="pprLamBndr"><span class="annot"><span class="annottext">pprLamBndr :: Id -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#pprLamBndr"><span class="hs-identifier hs-var hs-var">pprLamBndr</span></a></span></span><span> </span><span id="local-6989586621682612129"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612129"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BindingSite -&gt; Id -&gt; SDoc
forall a. OutputableBndr a =&gt; BindingSite -&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprBndr"><span class="hs-identifier hs-var">pprBndr</span></a></span><span> </span><span class="annot"><span class="annottext">BindingSite
</span><a href="GHC.Utils.Outputable.html#LambdaBind"><span class="hs-identifier hs-var">LambdaBind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612129"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-948"></span><span>
</span><span id="line-949"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#add_parens"><span class="hs-identifier hs-type">add_parens</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#no_parens"><span class="hs-identifier hs-type">no_parens</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-950"></span><span id="add_parens"><span class="annot"><span class="annottext">add_parens :: SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#add_parens"><span class="hs-identifier hs-var hs-var">add_parens</span></a></span></span><span> </span><span id="local-6989586621682612132"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682612132"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682612132"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-951"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#add_parens"><span class="hs-identifier hs-var">add_parens</span></a></span><span> </span><span id="local-6989586621682612134"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682612134"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682612134"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-952"></span><span id="no_parens"><span class="annot"><span class="annottext">no_parens :: SDoc -&gt; Bool -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#no_parens"><span class="hs-identifier hs-var hs-var">no_parens</span></a></span></span><span> </span><span id="local-6989586621682612135"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682612135"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682612135"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-953"></span><span>
</span><span id="line-954"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-955"></span><span>  </span><span id="local-6989586621682612144"><span class="annot"><span class="annottext">ppr :: TcEvBinds -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span id="local-6989586621682612145"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621682612145"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvBindsVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621682612145"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-956"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-type">EvBinds</span></a></span><span> </span><span id="local-6989586621682612146"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621682612146"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EvBinds&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EvBind -&gt; SDoc) -&gt; [EvBind] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag EvBind -&gt; [EvBind]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621682612146"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-959"></span><span>  </span><span id="local-6989586621682612157"><span class="annot"><span class="annottext">ppr :: EvBindsVar -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ebv_uniq :: EvBindsVar -&gt; Unique
</span><a href="GHC.Tc.Types.Evidence.html#ebv_uniq"><span class="hs-identifier hs-var">ebv_uniq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682612158"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682612158"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-960"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EvBindsVar&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#angleBrackets"><span class="hs-identifier hs-var">angleBrackets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682612158"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-961"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#CoEvBindsVar"><span class="hs-identifier hs-type">CoEvBindsVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ebv_uniq :: EvBindsVar -&gt; Unique
</span><a href="GHC.Tc.Types.Evidence.html#ebv_uniq"><span class="hs-identifier hs-var">ebv_uniq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682612160"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682612160"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-962"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CoEvBindsVar&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#angleBrackets"><span class="hs-identifier hs-var">angleBrackets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682612160"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-963"></span><span>
</span><span id="line-964"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Uniquable"><span class="hs-identifier hs-type">Uniquable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-965"></span><span>  </span><span id="local-6989586621682612164"><span class="annot"><span class="annottext">getUnique :: EvBindsVar -&gt; Unique
</span><a href="#local-6989586621682612164"><span class="hs-identifier hs-var hs-var hs-var">getUnique</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvBindsVar -&gt; Unique
</span><a href="GHC.Tc.Types.Evidence.html#ebv_uniq"><span class="hs-identifier hs-var">ebv_uniq</span></a></span><span>
</span><span id="line-966"></span><span>
</span><span id="line-967"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-968"></span><span>  </span><span id="local-6989586621682612177"><span class="annot"><span class="annottext">ppr :: EvBind -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: EvBind -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682612178"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612178"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_rhs :: EvBind -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var">eb_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682612179"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612179"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_info :: EvBind -&gt; EvBindInfo
</span><a href="GHC.Tc.Types.Evidence.html#eb_info"><span class="hs-identifier hs-var">eb_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682612180"><span class="annot"><span class="annottext">EvBindInfo
</span><a href="#local-6989586621682612180"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-969"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682612181"><span class="hs-identifier hs-var">pp_gw</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612178"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-970"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612179"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-971"></span><span>      </span><span class="hs-comment">-- We cheat a bit and pretend EqVars are CoVars for the purposes of pretty printing</span><span>
</span><span id="line-972"></span><span>     </span><span class="hs-keyword">where</span><span>
</span><span id="line-973"></span><span>       </span><span id="local-6989586621682612181"><span class="annot"><span class="annottext">pp_gw :: SDoc
</span><a href="#local-6989586621682612181"><span class="hs-identifier hs-var hs-var">pp_gw</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EvBindInfo
</span><a href="#local-6989586621682612180"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-974"></span><span>           </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindGiven"><span class="hs-identifier hs-type">EvBindGiven</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
forall doc. IsLine doc =&gt; Char -&gt; doc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'G'</span></span><span>
</span><span id="line-975"></span><span>           </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindWanted"><span class="hs-identifier hs-type">EvBindWanted</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
forall doc. IsLine doc =&gt; Char -&gt; doc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'W'</span></span><span>
</span><span id="line-976"></span><span>
</span><span id="line-977"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-978"></span><span>  </span><span id="local-6989586621682612200"><span class="annot"><span class="annottext">ppr :: EvTerm -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span> </span><span id="local-6989586621682612201"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612201"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612201"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-979"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span id="local-6989586621682612202"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612202"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621682612203"><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621682612203"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvTypeable -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621682612203"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Typeable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Mult -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612202"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-980"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvFun"><span class="hs-identifier hs-type">EvFun</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">et_tvs :: EvTerm -&gt; [Id]
</span><a href="GHC.Tc.Types.Evidence.html#et_tvs"><span class="hs-identifier hs-var">et_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682612204"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682612204"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_given :: EvTerm -&gt; [Id]
</span><a href="GHC.Tc.Types.Evidence.html#et_given"><span class="hs-identifier hs-var">et_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682612205"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682612205"><span class="hs-identifier hs-var">gs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_binds :: EvTerm -&gt; TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#et_binds"><span class="hs-identifier hs-var">et_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682612206"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682612206"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_body :: EvTerm -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#et_body"><span class="hs-identifier hs-var">et_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682612207"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612207"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-981"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Id -&gt; SDoc) -&gt; [Id] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Tc.Types.Evidence.html#pprLamBndr"><span class="hs-identifier hs-var">pprLamBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682612204"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; [Id] -&gt; [Id]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682612205"><span class="hs-identifier hs-var">gs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#arrow"><span class="hs-identifier hs-var">arrow</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span>           </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcEvBinds -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682612206"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612207"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Not very pretty</span><span>
</span><span id="line-983"></span><span>
</span><span id="line-984"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvCallStack"><span class="hs-identifier hs-type">EvCallStack</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-985"></span><span>  </span><span id="local-6989586621682612224"><span class="annot"><span class="annottext">ppr :: EvCallStack -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">EvCallStack
</span><a href="GHC.Tc.Types.Evidence.html#EvCsEmpty"><span class="hs-identifier hs-var">EvCsEmpty</span></a></span><span>
</span><span id="line-986"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[]&quot;</span></span><span>
</span><span id="line-987"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvCsPushCall"><span class="hs-identifier hs-type">EvCsPushCall</span></a></span><span> </span><span id="local-6989586621682612225"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682612225"><span class="hs-identifier hs-var">orig</span></a></span></span><span> </span><span id="local-6989586621682612226"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682612226"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682612227"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612227"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-988"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FastString, RealSrcSpan) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682612225"><span class="hs-identifier hs-var">orig</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682612226"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621682612227"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-989"></span><span>
</span><span id="line-990"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-991"></span><span>  </span><span id="local-6989586621682612245"><span class="annot"><span class="annottext">ppr :: EvTypeable -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyCon"><span class="hs-identifier hs-type">EvTypeableTyCon</span></a></span><span> </span><span id="local-6989586621682612246"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682612246"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TyCon&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682612246"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-992"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyApp"><span class="hs-identifier hs-type">EvTypeableTyApp</span></a></span><span> </span><span id="local-6989586621682612247"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612247"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682612248"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612248"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612247"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612248"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-993"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyLit"><span class="hs-identifier hs-type">EvTypeableTyLit</span></a></span><span> </span><span id="local-6989586621682612249"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612249"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TyLit&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612249"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-994"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTrFun"><span class="hs-identifier hs-type">EvTypeableTrFun</span></a></span><span> </span><span id="local-6989586621682612250"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612250"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span id="local-6989586621682612251"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612251"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682612252"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612252"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612251"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682612253"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612252"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-995"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-996"></span><span>      </span><span id="local-6989586621682612253"><span class="annot"><span class="annottext">arr :: SDoc
</span><a href="#local-6989586621682612253"><span class="hs-identifier hs-var hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunTyFlag -&gt; Either Bool SDoc -&gt; SDoc
</span><a href="GHC.Core.Multiplicity.html#pprArrowWithMultiplicity"><span class="hs-identifier hs-var">pprArrowWithMultiplicity</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="GHC.Types.Var.html#visArgTypeLike"><span class="hs-identifier hs-var">visArgTypeLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Either Bool SDoc
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621682612250"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-997"></span><span>
</span><span id="line-998"></span><span>
</span><span id="line-999"></span><span class="hs-comment">----------------------------------------------------------------------</span><span>
</span><span id="line-1000"></span><span class="hs-comment">-- Helper functions for dealing with IP newtype-dictionaries</span><span>
</span><span id="line-1001"></span><span class="hs-comment">----------------------------------------------------------------------</span><span>
</span><span id="line-1002"></span><span>
</span><span id="line-1003"></span><span class="hs-comment">-- | Create a 'Coercion' that unwraps an implicit-parameter</span><span>
</span><span id="line-1004"></span><span class="hs-comment">-- dictionary to expose the underlying value.</span><span>
</span><span id="line-1005"></span><span class="hs-comment">-- We expect the 'Type' to have the form `IP sym ty`,</span><span>
</span><span id="line-1006"></span><span class="hs-comment">-- and return a 'Coercion' `co :: IP sym ty ~ ty`</span><span>
</span><span id="line-1007"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#unwrapIP"><span class="hs-identifier hs-type">unwrapIP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionR"><span class="hs-identifier hs-type">CoercionR</span></a></span><span>
</span><span id="line-1008"></span><span id="unwrapIP"><span class="annot"><span class="annottext">unwrapIP :: Mult -&gt; TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#unwrapIP"><span class="hs-identifier hs-var hs-var">unwrapIP</span></a></span></span><span> </span><span id="local-6989586621682612257"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612257"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1009"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe ([Id], Mult, CoAxiom Unbranched)
</span><a href="GHC.Core.TyCon.html#unwrapNewTyCon_maybe"><span class="hs-identifier hs-var">unwrapNewTyCon_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682612259"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1010"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Mult
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621682612260"><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682612260"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role -&gt; CoAxiom Unbranched -&gt; [Mult] -&gt; [TcCoercion] -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkUnbranchedAxInstCo"><span class="hs-identifier hs-var">mkUnbranchedAxInstCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682612260"><span class="hs-identifier hs-var">ax</span></a></span><span> </span><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682612262"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1011"></span><span>    </span><span class="annot"><span class="annottext">Maybe ([Id], Mult, CoAxiom Unbranched)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcCoercion
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unwrapIP&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; TcCoercion) -&gt; SDoc -&gt; TcCoercion
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1012"></span><span>                       </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The dictionary for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682612259"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>                         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is not a newtype!&quot;</span></span><span>
</span><span id="line-1014"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1015"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682612259"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682612259"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682612262"><span class="annot"><span class="annottext">[Mult]
</span><a href="#local-6989586621682612262"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Mult -&gt; (TyCon, [Mult])
</span><a href="GHC.Core.Type.html#splitTyConApp"><span class="hs-identifier hs-var">splitTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612257"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1016"></span><span>
</span><span id="line-1017"></span><span class="hs-comment">-- | Create a 'Coercion' that wraps a value in an implicit-parameter</span><span>
</span><span id="line-1018"></span><span class="hs-comment">-- dictionary. See 'unwrapIP'.</span><span>
</span><span id="line-1019"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#wrapIP"><span class="hs-identifier hs-type">wrapIP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionR"><span class="hs-identifier hs-type">CoercionR</span></a></span><span>
</span><span id="line-1020"></span><span id="wrapIP"><span class="annot"><span class="annottext">wrapIP :: Mult -&gt; TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#wrapIP"><span class="hs-identifier hs-var hs-var">wrapIP</span></a></span></span><span> </span><span id="local-6989586621682612265"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612265"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercion -&gt; TcCoercion
</span><a href="GHC.Core.Coercion.html#mkSymCo"><span class="hs-identifier hs-var">mkSymCo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Mult -&gt; TcCoercion
</span><a href="GHC.Tc.Types.Evidence.html#unwrapIP"><span class="hs-identifier hs-var">unwrapIP</span></a></span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612265"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1021"></span><span>
</span><span id="line-1022"></span><span class="hs-comment">----------------------------------------------------------------------</span><span>
</span><span id="line-1023"></span><span class="hs-comment">-- A datatype used to pass information when desugaring quotations</span><span>
</span><span id="line-1024"></span><span class="hs-comment">----------------------------------------------------------------------</span><span>
</span><span id="line-1025"></span><span>
</span><span id="line-1026"></span><span class="hs-comment">-- We have to pass a `EvVar` and `Type` into `dsBracket` so that the</span><span>
</span><span id="line-1027"></span><span class="hs-comment">-- correct evidence and types are applied to all the TH combinators.</span><span>
</span><span id="line-1028"></span><span class="hs-comment">-- This data type bundles them up together with some convenience methods.</span><span>
</span><span id="line-1029"></span><span class="hs-comment">--</span><span>
</span><span id="line-1030"></span><span class="hs-comment">-- The EvVar is evidence for `Quote m`</span><span>
</span><span id="line-1031"></span><span class="hs-comment">-- The Type is a metavariable for `m`</span><span>
</span><span id="line-1032"></span><span class="hs-comment">--</span><span>
</span><span id="line-1033"></span><span class="hs-keyword">data</span><span> </span><span id="QuoteWrapper"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-var">QuoteWrapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="QuoteWrapper"><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-var">QuoteWrapper</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682612270"><span id="local-6989586621682612274"><span id="local-6989586621682612278"><span id="local-6989586621682612280"><span id="local-6989586621682612282"><span id="local-6989586621682612288"><span id="local-6989586621682612293"><span id="local-6989586621682612296"><span id="local-6989586621682612299"><span id="local-6989586621682612302"><span id="local-6989586621682612305"><span id="local-6989586621682612308"><span id="local-6989586621682612313"><span id="local-6989586621682612318"><span class="annot"><span class="annottext">Typeable QuoteWrapper
Typeable QuoteWrapper =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; QuoteWrapper -&gt; c QuoteWrapper)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c QuoteWrapper)
-&gt; (QuoteWrapper -&gt; Constr)
-&gt; (QuoteWrapper -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c QuoteWrapper))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c QuoteWrapper))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; QuoteWrapper -&gt; QuoteWrapper)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; QuoteWrapper -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; QuoteWrapper -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; QuoteWrapper -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; QuoteWrapper -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper)
-&gt; Data QuoteWrapper
QuoteWrapper -&gt; Constr
QuoteWrapper -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; QuoteWrapper -&gt; QuoteWrapper
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; QuoteWrapper -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; QuoteWrapper -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; QuoteWrapper -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; QuoteWrapper -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c QuoteWrapper
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; QuoteWrapper -&gt; c QuoteWrapper
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c QuoteWrapper)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c QuoteWrapper)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; QuoteWrapper -&gt; c QuoteWrapper
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; QuoteWrapper -&gt; c QuoteWrapper
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c QuoteWrapper
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c QuoteWrapper
$ctoConstr :: QuoteWrapper -&gt; Constr
toConstr :: QuoteWrapper -&gt; Constr
$cdataTypeOf :: QuoteWrapper -&gt; DataType
dataTypeOf :: QuoteWrapper -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c QuoteWrapper)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c QuoteWrapper)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c QuoteWrapper)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c QuoteWrapper)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; QuoteWrapper -&gt; QuoteWrapper
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; QuoteWrapper -&gt; QuoteWrapper
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; QuoteWrapper -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; QuoteWrapper -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; QuoteWrapper -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; QuoteWrapper -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; QuoteWrapper -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; QuoteWrapper -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; QuoteWrapper -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; QuoteWrapper -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; QuoteWrapper -&gt; m QuoteWrapper
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-1034"></span><span>
</span><span id="line-1035"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#quoteWrapperTyVarTy"><span class="hs-identifier hs-type">quoteWrapperTyVarTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-type">QuoteWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1036"></span><span id="quoteWrapperTyVarTy"><span class="annot"><span class="annottext">quoteWrapperTyVarTy :: QuoteWrapper -&gt; Mult
</span><a href="GHC.Tc.Types.Evidence.html#quoteWrapperTyVarTy"><span class="hs-identifier hs-var hs-var">quoteWrapperTyVarTy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-type">QuoteWrapper</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682612322"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612322"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612322"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1037"></span><span>
</span><span id="line-1038"></span><span class="hs-comment">-- | Convert the QuoteWrapper into a normal HsWrapper which can be used to</span><span>
</span><span id="line-1039"></span><span class="hs-comment">-- apply its contents.</span><span>
</span><span id="line-1040"></span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#applyQuoteWrapper"><span class="hs-identifier hs-type">applyQuoteWrapper</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-type">QuoteWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-1041"></span><span id="applyQuoteWrapper"><span class="annot"><span class="annottext">applyQuoteWrapper :: QuoteWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#applyQuoteWrapper"><span class="hs-identifier hs-var hs-var">applyQuoteWrapper</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-type">QuoteWrapper</span></a></span><span> </span><span id="local-6989586621682612323"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612323"><span class="hs-identifier hs-var">ev_var</span></a></span></span><span> </span><span id="local-6989586621682612324"><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612324"><span class="hs-identifier hs-var">m_var</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1042"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpEvVarApps"><span class="hs-identifier hs-var">mkWpEvVarApps</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682612323"><span class="hs-identifier hs-var">ev_var</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Mult] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpTyApps"><span class="hs-identifier hs-var">mkWpTyApps</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Mult
</span><a href="#local-6989586621682612324"><span class="hs-identifier hs-var">m_var</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1043"></span></pre></body></html>