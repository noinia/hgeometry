<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveTraversable #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html"><span class="hs-identifier">GHC.Unit.Env</span></a></span><span>
</span><span id="line-4"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier">UnitEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#initUnitEnv"><span class="hs-identifier">initUnitEnv</span></a></span><span>
</span><span id="line-6"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ueEPS"><span class="hs-identifier">ueEPS</span></a></span><span>
</span><span id="line-7"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unsafeGetHomeUnit"><span class="hs-identifier">unsafeGetHomeUnit</span></a></span><span>
</span><span id="line-8"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#updateHug"><span class="hs-identifier">updateHug</span></a></span><span>
</span><span id="line-9"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#updateHpt_lazy"><span class="hs-identifier">updateHpt_lazy</span></a></span><span>
</span><span id="line-10"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#updateHpt"><span class="hs-identifier">updateHpt</span></a></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Unit Env helper functions</span></span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_units"><span class="hs-identifier">ue_units</span></a></span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_currentHomeUnitEnv"><span class="hs-identifier">ue_currentHomeUnitEnv</span></a></span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_setUnits"><span class="hs-identifier">ue_setUnits</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_setUnitFlags"><span class="hs-identifier">ue_setUnitFlags</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_unit_dbs"><span class="hs-identifier">ue_unit_dbs</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_all_home_unit_ids"><span class="hs-identifier">ue_all_home_unit_ids</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_setUnitDbs"><span class="hs-identifier">ue_setUnitDbs</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_hpt"><span class="hs-identifier">ue_hpt</span></a></span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_homeUnit"><span class="hs-identifier">ue_homeUnit</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_unsafeHomeUnit"><span class="hs-identifier">ue_unsafeHomeUnit</span></a></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_setFlags"><span class="hs-identifier">ue_setFlags</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_setActiveUnit"><span class="hs-identifier">ue_setActiveUnit</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier">ue_currentUnit</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv"><span class="hs-identifier">ue_findHomeUnitEnv</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_updateHomeUnitEnv"><span class="hs-identifier">ue_updateHomeUnitEnv</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_unitHomeUnit"><span class="hs-identifier">ue_unitHomeUnit</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_unitFlags"><span class="hs-identifier">ue_unitFlags</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_renameUnitId"><span class="hs-identifier">ue_renameUnitId</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_transitiveHomeDeps"><span class="hs-identifier">ue_transitiveHomeDeps</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><span class="hs-comment">-- * HomeUnitEnv</span></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier">HomeUnitGraph</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier">HomeUnitEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#mkHomeUnitEnv"><span class="hs-identifier">mkHomeUnitEnv</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#lookupHugByModule"><span class="hs-identifier">lookupHugByModule</span></a></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#hugElts"><span class="hs-identifier">hugElts</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#lookupHug"><span class="hs-identifier">lookupHug</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#addHomeModInfoToHug"><span class="hs-identifier">addHomeModInfoToHug</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><span class="hs-comment">-- * UnitEnvGraph</span></span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier">UnitEnvGraph</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier">UnitEnvGraphKey</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_insert"><span class="hs-identifier">unitEnv_insert</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_delete"><span class="hs-identifier">unitEnv_delete</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_adjust"><span class="hs-identifier">unitEnv_adjust</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_new"><span class="hs-identifier">unitEnv_new</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_singleton"><span class="hs-identifier">unitEnv_singleton</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_map"><span class="hs-identifier">unitEnv_map</span></a></span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_member"><span class="hs-identifier">unitEnv_member</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_lookup_maybe"><span class="hs-identifier">unitEnv_lookup_maybe</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_lookup"><span class="hs-identifier">unitEnv_lookup</span></a></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_keys"><span class="hs-identifier">unitEnv_keys</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_elts"><span class="hs-identifier">unitEnv_elts</span></a></span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_hpts"><span class="hs-identifier">unitEnv_hpts</span></a></span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_foldWithKey"><span class="hs-identifier">unitEnv_foldWithKey</span></a></span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_union"><span class="hs-identifier">unitEnv_union</span></a></span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_mapWithKey"><span class="hs-identifier">unitEnv_mapWithKey</span></a></span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Invariants</span></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#assertUnitEnvInvariant"><span class="hs-identifier">assertUnitEnvInvariant</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Preload units info</span></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#preloadUnitsInfo"><span class="hs-identifier">preloadUnitsInfo</span></a></span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#preloadUnitsInfo%27"><span class="hs-identifier">preloadUnitsInfo'</span></a></span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Home Module functions</span></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#isUnitEnvInstalledModule"><span class="hs-identifier">isUnitEnvInstalledModule</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">where</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.External.html"><span class="hs-identifier">GHC.Unit.External</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.State.html"><span class="hs-identifier">GHC.Unit.State</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Home.html"><span class="hs-identifier">GHC.Unit.Home</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html"><span class="hs-identifier">GHC.Unit.Types</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html"><span class="hs-identifier">GHC.Unit.Home.ModInfo</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.html"><span class="hs-identifier">GHC.Platform</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Settings.html"><span class="hs-identifier">GHC.Settings</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#Map"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier">HasDebugCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html"><span class="hs-identifier">GHC.Driver.DynFlags</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html"><span class="hs-identifier">GHC.Unit.Module.ModIface</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">data</span><span> </span><span id="UnitEnv"><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-var">UnitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UnitEnv"><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-var">UnitEnv</span></a></span></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="ue_eps"><span class="annot"><span class="annottext">UnitEnv -&gt; ExternalUnitCache
</span><a href="GHC.Unit.Env.html#ue_eps"><span class="hs-identifier hs-var hs-var">ue_eps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.External.html#ExternalUnitCache"><span class="hs-identifier hs-type">ExternalUnitCache</span></a></span><span>
</span><span id="line-89"></span><span>        </span><span class="hs-comment">-- ^ Information about the currently loaded external packages.</span><span>
</span><span id="line-90"></span><span>        </span><span class="hs-comment">-- This is mutable because packages will be demand-loaded during</span><span>
</span><span id="line-91"></span><span>        </span><span class="hs-comment">-- a compilation run as required.</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="ue_current_unit"><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_current_unit"><span class="hs-identifier hs-var hs-var">ue_current_unit</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="ue_home_unit_graph"><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnitGraph
</span><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var hs-var">ue_home_unit_graph</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span>
</span><span id="line-96"></span><span>        </span><span class="hs-comment">-- See Note [Multiple Home Units]</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="ue_platform"><span class="annot"><span class="annottext">UnitEnv -&gt; Platform
</span><a href="GHC.Unit.Env.html#ue_platform"><span class="hs-identifier hs-var hs-var">ue_platform</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ Platform</span></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="ue_namever"><span class="annot"><span class="annottext">UnitEnv -&gt; GhcNameVersion
</span><a href="GHC.Unit.Env.html#ue_namever"><span class="hs-identifier hs-var hs-var">ue_namever</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Settings.html#GhcNameVersion"><span class="hs-identifier hs-type">GhcNameVersion</span></a></span><span>
</span><span id="line-102"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ GHC name/version (used for dynamic library suffix)</span></span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="annot"><a href="GHC.Unit.Env.html#ueEPS"><span class="hs-identifier hs-type">ueEPS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="GHC.Unit.External.html#ExternalPackageState"><span class="hs-identifier hs-type">ExternalPackageState</span></a></span><span>
</span><span id="line-106"></span><span id="ueEPS"><span class="annot"><span class="annottext">ueEPS :: UnitEnv -&gt; IO ExternalPackageState
</span><a href="GHC.Unit.Env.html#ueEPS"><span class="hs-identifier hs-var hs-var">ueEPS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExternalUnitCache -&gt; IO ExternalPackageState
</span><a href="GHC.Unit.External.html#eucEPS"><span class="hs-identifier hs-var">eucEPS</span></a></span><span> </span><span class="annot"><span class="annottext">(ExternalUnitCache -&gt; IO ExternalPackageState)
-&gt; (UnitEnv -&gt; ExternalUnitCache)
-&gt; UnitEnv
-&gt; IO ExternalPackageState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; ExternalUnitCache
</span><a href="GHC.Unit.Env.html#ue_eps"><span class="hs-identifier hs-var">ue_eps</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="annot"><a href="GHC.Unit.Env.html#initUnitEnv"><span class="hs-identifier hs-type">initUnitEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Settings.html#GhcNameVersion"><span class="hs-identifier hs-type">GhcNameVersion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-109"></span><span id="initUnitEnv"><span class="annot"><span class="annottext">initUnitEnv :: UnitId -&gt; HomeUnitGraph -&gt; GhcNameVersion -&gt; Platform -&gt; IO UnitEnv
</span><a href="GHC.Unit.Env.html#initUnitEnv"><span class="hs-identifier hs-var hs-var">initUnitEnv</span></a></span></span><span> </span><span id="local-6989586621682933661"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933661"><span class="hs-identifier hs-var">cur_unit</span></a></span></span><span> </span><span id="local-6989586621682933662"><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933662"><span class="hs-identifier hs-var">hug</span></a></span></span><span> </span><span id="local-6989586621682933663"><span class="annot"><span class="annottext">GhcNameVersion
</span><a href="#local-6989586621682933663"><span class="hs-identifier hs-var">namever</span></a></span></span><span> </span><span id="local-6989586621682933664"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682933664"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-110"></span><span>  </span><span id="local-6989586621682933665"><span class="annot"><a href="#local-6989586621682933665"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO ExternalUnitCache
</span><a href="GHC.Unit.External.html#initExternalUnitCache"><span class="hs-identifier hs-var">initExternalUnitCache</span></a></span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_eps"><span class="hs-identifier hs-var">ue_eps</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682933665"><span class="hs-identifier hs-type">eps</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682933662"><span class="hs-identifier hs-type">hug</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_current_unit"><span class="hs-identifier hs-var">ue_current_unit</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682933661"><span class="hs-identifier hs-type">cur_unit</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_platform"><span class="hs-identifier hs-var">ue_platform</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682933664"><span class="hs-identifier hs-type">platform</span></a></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_namever"><span class="hs-identifier hs-var">ue_namever</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682933663"><span class="hs-identifier hs-type">namever</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-comment">-- | Get home-unit</span><span>
</span><span id="line-120"></span><span class="hs-comment">--</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- Unsafe because the home-unit may not be set</span><span>
</span><span id="line-122"></span><span class="annot"><a href="GHC.Unit.Env.html#unsafeGetHomeUnit"><span class="hs-identifier hs-type">unsafeGetHomeUnit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span>
</span><span id="line-123"></span><span id="unsafeGetHomeUnit"><span class="annot"><span class="annottext">unsafeGetHomeUnit :: UnitEnv -&gt; HomeUnit
</span><a href="GHC.Unit.Env.html#unsafeGetHomeUnit"><span class="hs-identifier hs-var hs-var">unsafeGetHomeUnit</span></a></span></span><span> </span><span id="local-6989586621682933667"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933667"><span class="hs-identifier hs-var">ue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnit
</span><a href="GHC.Unit.Env.html#ue_unsafeHomeUnit"><span class="hs-identifier hs-var">ue_unsafeHomeUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933667"><span class="hs-identifier hs-var">ue</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="annot"><a href="GHC.Unit.Env.html#updateHpt_lazy"><span class="hs-identifier hs-type">updateHpt_lazy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-126"></span><span id="updateHpt_lazy"><span class="annot"><span class="annottext">updateHpt_lazy :: (HomePackageTable -&gt; HomePackageTable) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#updateHpt_lazy"><span class="hs-identifier hs-var hs-var">updateHpt_lazy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt;
(HomePackageTable -&gt; HomePackageTable) -&gt; UnitEnv -&gt; UnitEnv
(HomePackageTable -&gt; HomePackageTable) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHPT_lazy"><span class="hs-identifier hs-var">ue_updateHPT_lazy</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="annot"><a href="GHC.Unit.Env.html#updateHpt"><span class="hs-identifier hs-type">updateHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-129"></span><span id="updateHpt"><span class="annot"><span class="annottext">updateHpt :: (HomePackageTable -&gt; HomePackageTable) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#updateHpt"><span class="hs-identifier hs-var hs-var">updateHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt;
(HomePackageTable -&gt; HomePackageTable) -&gt; UnitEnv -&gt; UnitEnv
(HomePackageTable -&gt; HomePackageTable) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHPT"><span class="hs-identifier hs-var">ue_updateHPT</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="annot"><a href="GHC.Unit.Env.html#updateHug"><span class="hs-identifier hs-type">updateHug</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-132"></span><span id="updateHug"><span class="annot"><span class="annottext">updateHug :: (HomeUnitGraph -&gt; HomeUnitGraph) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#updateHug"><span class="hs-identifier hs-var hs-var">updateHug</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt;
(HomeUnitGraph -&gt; HomeUnitGraph) -&gt; UnitEnv -&gt; UnitEnv
(HomeUnitGraph -&gt; HomeUnitGraph) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHUG"><span class="hs-identifier hs-var">ue_updateHUG</span></a></span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_transitiveHomeDeps"><span class="hs-identifier hs-type">ue_transitiveHomeDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-135"></span><span id="ue_transitiveHomeDeps"><span class="annot"><span class="annottext">ue_transitiveHomeDeps :: UnitId -&gt; UnitEnv -&gt; [UnitId]
</span><a href="GHC.Unit.Env.html#ue_transitiveHomeDeps"><span class="hs-identifier hs-var hs-var">ue_transitiveHomeDeps</span></a></span></span><span> </span><span id="local-6989586621682933671"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933671"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682933672"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933672"><span class="hs-identifier hs-var">unit_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId -&gt; [UnitId]
forall a. Set a -&gt; [a]
</span><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set UnitId -&gt; [UnitId] -&gt; Set UnitId
</span><a href="#local-6989586621682933674"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">Set UnitId
forall a. Set a
</span><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933671"><span class="hs-identifier hs-var">uid</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-137"></span><span>    </span><span id="local-6989586621682933674"><span class="annot"><span class="annottext">loop :: Set UnitId -&gt; [UnitId] -&gt; Set UnitId
</span><a href="#local-6989586621682933674"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span id="local-6989586621682933676"><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621682933676"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621682933676"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><a href="#local-6989586621682933674"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span id="local-6989586621682933677"><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621682933677"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682933678"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933678"><span class="hs-identifier hs-var">uid</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682933679"><span class="annot"><span class="annottext">[UnitId]
</span><a href="#local-6989586621682933679"><span class="hs-identifier hs-var">uids</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933678"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; Set UnitId -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#member"><span class="hs-operator hs-var">`Set.member`</span></a></span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621682933677"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId -&gt; [UnitId] -&gt; Set UnitId
</span><a href="#local-6989586621682933674"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621682933677"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[UnitId]
</span><a href="#local-6989586621682933679"><span class="hs-identifier hs-var">uids</span></a></span><span>
</span><span id="line-140"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-141"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682933681"><span class="annot"><span class="annottext">hue :: [UnitId]
</span><a href="#local-6989586621682933681"><span class="hs-identifier hs-var hs-var">hue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; [UnitId]
</span><a href="GHC.Unit.State.html#homeUnitDepends"><span class="hs-identifier hs-var">homeUnitDepends</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#homeUnitEnv_units"><span class="hs-identifier hs-var">homeUnitEnv_units</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitId -&gt; UnitEnv -&gt; HomeUnitEnv
UnitId -&gt; UnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv"><span class="hs-identifier hs-var">ue_findHomeUnitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933678"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933672"><span class="hs-identifier hs-var">unit_env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Set UnitId -&gt; [UnitId] -&gt; Set UnitId
</span><a href="#local-6989586621682933674"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitId -&gt; Set UnitId -&gt; Set UnitId
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#insert"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933678"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621682933677"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[UnitId]
</span><a href="#local-6989586621682933681"><span class="hs-identifier hs-var">hue</span></a></span><span> </span><span class="annot"><span class="annottext">[UnitId] -&gt; [UnitId] -&gt; [UnitId]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[UnitId]
</span><a href="#local-6989586621682933679"><span class="hs-identifier hs-var">uids</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- Extracting information from the packages in scope</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-comment">-- Many of these functions take a list of packages: in those cases,</span><span>
</span><span id="line-149"></span><span class="hs-comment">-- the list is expected to contain the &quot;dependent packages&quot;,</span><span>
</span><span id="line-150"></span><span class="hs-comment">-- i.e. those packages that were found to be depended on by the</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- current module/program.  These can be auto or non-auto packages, it</span><span>
</span><span id="line-152"></span><span class="hs-comment">-- doesn't really matter.  The list is always combined with the list</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- of preload (command-line) packages to determine which packages to</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- use.</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">-- | Lookup 'UnitInfo' for every preload unit from the UnitState, for every unit</span><span>
</span><span id="line-157"></span><span class="hs-comment">-- used to instantiate the home unit, and for every unit explicitly passed in</span><span>
</span><span id="line-158"></span><span class="hs-comment">-- the given list of UnitId.</span><span>
</span><span id="line-159"></span><span class="annot"><a href="GHC.Unit.Env.html#preloadUnitsInfo%27"><span class="hs-identifier hs-type">preloadUnitsInfo'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnitErr"><span class="hs-identifier hs-type">UnitErr</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Info.html#UnitInfo"><span class="hs-identifier hs-type">UnitInfo</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-160"></span><span id="preloadUnitsInfo%27"><span class="annot"><span class="annottext">preloadUnitsInfo' :: UnitEnv -&gt; [UnitId] -&gt; MaybeErr UnitErr [UnitInfo]
</span><a href="GHC.Unit.Env.html#preloadUnitsInfo%27"><span class="hs-identifier hs-var hs-var">preloadUnitsInfo'</span></a></span></span><span> </span><span id="local-6989586621682933685"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933685"><span class="hs-identifier hs-var">unit_env</span></a></span></span><span> </span><span id="local-6989586621682933686"><span class="annot"><span class="annottext">[UnitId]
</span><a href="#local-6989586621682933686"><span class="hs-identifier hs-var">ids0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeErr UnitErr [UnitInfo]
</span><a href="#local-6989586621682933687"><span class="hs-identifier hs-var">all_infos</span></a></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-162"></span><span>    </span><span id="local-6989586621682933688"><span class="annot"><span class="annottext">unit_state :: UnitState
</span><a href="#local-6989586621682933688"><span class="hs-identifier hs-var hs-var">unit_state</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitEnv -&gt; UnitState
UnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#ue_units"><span class="hs-identifier hs-var">ue_units</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933685"><span class="hs-identifier hs-var">unit_env</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span id="local-6989586621682933689"><span class="annot"><span class="annottext">ids :: [UnitId]
</span><a href="#local-6989586621682933689"><span class="hs-identifier hs-var hs-var">ids</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[UnitId]
</span><a href="#local-6989586621682933686"><span class="hs-identifier hs-var">ids0</span></a></span><span> </span><span class="annot"><span class="annottext">[UnitId] -&gt; [UnitId] -&gt; [UnitId]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[UnitId]
</span><a href="#local-6989586621682933690"><span class="hs-identifier hs-var">inst_ids</span></a></span><span>
</span><span id="line-164"></span><span>    </span><span id="local-6989586621682933690"><span class="annot"><span class="annottext">inst_ids :: [UnitId]
</span><a href="#local-6989586621682933690"><span class="hs-identifier hs-var hs-var">inst_ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; Maybe HomeUnit
</span><a href="GHC.Unit.Env.html#ue_homeUnit"><span class="hs-identifier hs-var">ue_homeUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933685"><span class="hs-identifier hs-var">unit_env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-165"></span><span>      </span><span class="annot"><span class="annottext">Maybe HomeUnit
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-166"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682933691"><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621682933691"><span class="hs-identifier hs-var">home_unit</span></a></span></span><span>
</span><span id="line-167"></span><span>       </span><span class="hs-comment">-- An indefinite package will have insts to HOLE,</span><span>
</span><span id="line-168"></span><span>       </span><span class="hs-comment">-- which is not a real package. Don't look it up.</span><span>
</span><span id="line-169"></span><span>       </span><span class="hs-comment">-- Fixes #14525</span><span>
</span><span id="line-170"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HomeUnit -&gt; Bool
forall u. GenHomeUnit u -&gt; Bool
</span><a href="GHC.Unit.Home.html#isHomeUnitIndefinite"><span class="hs-identifier hs-var">isHomeUnitIndefinite</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621682933691"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-171"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((ModuleName, Module) -&gt; UnitId)
-&gt; [(ModuleName, Module)] -&gt; [UnitId]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unit -&gt; UnitId
</span><a href="GHC.Unit.Types.html#toUnitId"><span class="hs-identifier hs-var">toUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">(Unit -&gt; UnitId)
-&gt; ((ModuleName, Module) -&gt; Unit) -&gt; (ModuleName, Module) -&gt; UnitId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Module -&gt; Unit
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">(Module -&gt; Unit)
-&gt; ((ModuleName, Module) -&gt; Module) -&gt; (ModuleName, Module) -&gt; Unit
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ModuleName, Module) -&gt; Module
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnit -&gt; [(ModuleName, Module)]
forall u. GenHomeUnit u -&gt; GenInstantiations u
</span><a href="GHC.Unit.Home.html#homeUnitInstantiations"><span class="hs-identifier hs-var">homeUnitInstantiations</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621682933691"><span class="hs-identifier hs-var">home_unit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621682933697"><span class="annot"><span class="annottext">pkg_map :: UnitInfoMap
</span><a href="#local-6989586621682933697"><span class="hs-identifier hs-var hs-var">pkg_map</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; UnitInfoMap
</span><a href="GHC.Unit.State.html#unitInfoMap"><span class="hs-identifier hs-var">unitInfoMap</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621682933688"><span class="hs-identifier hs-var">unit_state</span></a></span><span>
</span><span id="line-173"></span><span>    </span><span id="local-6989586621682933699"><span class="annot"><span class="annottext">preload :: [UnitId]
</span><a href="#local-6989586621682933699"><span class="hs-identifier hs-var hs-var">preload</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; [UnitId]
</span><a href="GHC.Unit.State.html#preloadUnits"><span class="hs-identifier hs-var">preloadUnits</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621682933688"><span class="hs-identifier hs-var">unit_state</span></a></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span>    </span><span id="local-6989586621682933701"><span class="annot"><span class="annottext">all_pkgs :: MaybeErr UnitErr [UnitId]
</span><a href="#local-6989586621682933701"><span class="hs-identifier hs-var hs-var">all_pkgs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitInfoMap
-&gt; [UnitId]
-&gt; [(UnitId, Maybe UnitId)]
-&gt; MaybeErr UnitErr [UnitId]
</span><a href="GHC.Unit.State.html#closeUnitDeps%27"><span class="hs-identifier hs-var">closeUnitDeps'</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInfoMap
</span><a href="#local-6989586621682933697"><span class="hs-identifier hs-var">pkg_map</span></a></span><span> </span><span class="annot"><span class="annottext">[UnitId]
</span><a href="#local-6989586621682933699"><span class="hs-identifier hs-var">preload</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[UnitId]
</span><a href="#local-6989586621682933689"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">[UnitId] -&gt; [Maybe UnitId] -&gt; [(UnitId, Maybe UnitId)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-operator hs-var">`zip`</span></span><span> </span><span class="annot"><span class="annottext">Maybe UnitId -&gt; [Maybe UnitId]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">Maybe UnitId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>    </span><span id="local-6989586621682933687"><span class="annot"><span class="annottext">all_infos :: MaybeErr UnitErr [UnitInfo]
</span><a href="#local-6989586621682933687"><span class="hs-identifier hs-var hs-var">all_infos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UnitId -&gt; UnitInfo) -&gt; [UnitId] -&gt; [UnitInfo]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitState -&gt; UnitId -&gt; UnitInfo
UnitState -&gt; UnitId -&gt; UnitInfo
</span><a href="GHC.Unit.State.html#unsafeLookupUnitId"><span class="hs-identifier hs-var">unsafeLookupUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621682933688"><span class="hs-identifier hs-var">unit_state</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([UnitId] -&gt; [UnitInfo])
-&gt; MaybeErr UnitErr [UnitId] -&gt; MaybeErr UnitErr [UnitInfo]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MaybeErr UnitErr [UnitId]
</span><a href="#local-6989586621682933701"><span class="hs-identifier hs-var">all_pkgs</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-comment">-- | Lookup 'UnitInfo' for every preload unit from the UnitState and for every</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- unit used to instantiate the home unit.</span><span>
</span><span id="line-181"></span><span class="annot"><a href="GHC.Unit.Env.html#preloadUnitsInfo"><span class="hs-identifier hs-type">preloadUnitsInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html#MaybeErr"><span class="hs-identifier hs-type">MaybeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnitErr"><span class="hs-identifier hs-type">UnitErr</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Info.html#UnitInfo"><span class="hs-identifier hs-type">UnitInfo</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-182"></span><span id="preloadUnitsInfo"><span class="annot"><span class="annottext">preloadUnitsInfo :: UnitEnv -&gt; MaybeErr UnitErr [UnitInfo]
</span><a href="GHC.Unit.Env.html#preloadUnitsInfo"><span class="hs-identifier hs-var hs-var">preloadUnitsInfo</span></a></span></span><span> </span><span id="local-6989586621682933706"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933706"><span class="hs-identifier hs-var">unit_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; [UnitId] -&gt; MaybeErr UnitErr [UnitInfo]
</span><a href="GHC.Unit.Env.html#preloadUnitsInfo%27"><span class="hs-identifier hs-var">preloadUnitsInfo'</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933706"><span class="hs-identifier hs-var">unit_env</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-keyword">data</span><span> </span><span id="HomeUnitEnv"><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-var">HomeUnitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HomeUnitEnv"><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-var">HomeUnitEnv</span></a></span></span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="homeUnitEnv_units"><span class="annot"><span class="annottext">HomeUnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#homeUnitEnv_units"><span class="hs-identifier hs-var hs-var">homeUnitEnv_units</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.State.html#UnitState"><span class="hs-identifier hs-type">UnitState</span></a></span><span>
</span><span id="line-188"></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ External units</span></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="homeUnitEnv_unit_dbs"><span class="annot"><span class="annottext">HomeUnitEnv -&gt; Maybe [UnitDatabase UnitId]
</span><a href="GHC.Unit.Env.html#homeUnitEnv_unit_dbs"><span class="hs-identifier hs-var hs-var">homeUnitEnv_unit_dbs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.State.html#UnitDatabase"><span class="hs-identifier hs-type">UnitDatabase</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>      </span><span class="hs-comment">-- ^ Stack of unit databases for the target platform.</span><span>
</span><span id="line-192"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-193"></span><span>      </span><span class="hs-comment">-- This field is populated with the result of `initUnits`.</span><span>
</span><span id="line-194"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span>      </span><span class="hs-comment">-- 'Nothing' means the databases have never been read from disk.</span><span>
</span><span id="line-196"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-197"></span><span>      </span><span class="hs-comment">-- Usually we don't reload the databases from disk if they are</span><span>
</span><span id="line-198"></span><span>      </span><span class="hs-comment">-- cached, even if the database flags changed!</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="homeUnitEnv_dflags"><span class="annot"><span class="annottext">HomeUnitEnv -&gt; DynFlags
</span><a href="GHC.Unit.Env.html#homeUnitEnv_dflags"><span class="hs-identifier hs-var hs-var">homeUnitEnv_dflags</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ The dynamic flag settings</span></span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="homeUnitEnv_hpt"><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomePackageTable
</span><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var hs-var">homeUnitEnv_hpt</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-comment">-- ^ The home package table describes already-compiled</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-comment">-- home-package modules, /excluding/ the module we</span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-comment">-- are compiling right now.</span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-comment">-- (In one-shot mode the current module is the only</span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-comment">-- home-package module, so homeUnitEnv_hpt is empty.  All other</span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-comment">-- modules count as \&quot;external-package\&quot; modules.</span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-comment">-- However, even in GHCi mode, hi-boot interfaces are</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-comment">-- demand-loaded into the external-package table.)</span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-comment">-- 'homeUnitEnv_hpt' is not mutable because we only demand-load</span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-comment">-- external packages; the home package is eagerly</span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-comment">-- loaded, module by module, by the compilation manager.</span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-comment">-- The HPT may contain modules compiled earlier by @--make@</span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-comment">-- but not actually below the current module in the dependency</span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-comment">-- graph.</span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-comment">-- (This changes a previous invariant: changed Jan 05.)</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="homeUnitEnv_home_unit"><span class="annot"><span class="annottext">HomeUnitEnv -&gt; Maybe HomeUnit
</span><a href="GHC.Unit.Env.html#homeUnitEnv_home_unit"><span class="hs-identifier hs-var hs-var">homeUnitEnv_home_unit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Home-unit</span></span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-227"></span><span>  </span><span id="local-6989586621682933716"><span class="annot"><span class="annottext">ppr :: HomeUnitEnv -&gt; SDoc
</span><a href="#local-6989586621682933716"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682933718"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933718"><span class="hs-identifier hs-var">hug</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; SDoc
</span><a href="GHC.Unit.Home.ModInfo.html#pprHPT"><span class="hs-identifier hs-var">pprHPT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomePackageTable
</span><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933718"><span class="hs-identifier hs-var">hug</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_unsafeHomeUnit"><span class="hs-identifier hs-type">homeUnitEnv_unsafeHomeUnit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span>
</span><span id="line-230"></span><span id="homeUnitEnv_unsafeHomeUnit"><span class="annot"><span class="annottext">homeUnitEnv_unsafeHomeUnit :: HomeUnitEnv -&gt; HomeUnit
</span><a href="GHC.Unit.Env.html#homeUnitEnv_unsafeHomeUnit"><span class="hs-identifier hs-var hs-var">homeUnitEnv_unsafeHomeUnit</span></a></span></span><span> </span><span id="local-6989586621682933721"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933721"><span class="hs-identifier hs-var">hue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; Maybe HomeUnit
</span><a href="GHC.Unit.Env.html#homeUnitEnv_home_unit"><span class="hs-identifier hs-var">homeUnitEnv_home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933721"><span class="hs-identifier hs-var">hue</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-231"></span><span>  </span><span class="annot"><span class="annottext">Maybe HomeUnit
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; HomeUnit
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;homeUnitEnv_unsafeHomeUnit: No home unit&quot;</span></span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682933723"><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621682933723"><span class="hs-identifier hs-var">h</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621682933723"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="annot"><a href="GHC.Unit.Env.html#mkHomeUnitEnv"><span class="hs-identifier hs-type">mkHomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span>
</span><span id="line-235"></span><span id="mkHomeUnitEnv"><span class="annot"><span class="annottext">mkHomeUnitEnv :: DynFlags -&gt; HomePackageTable -&gt; Maybe HomeUnit -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#mkHomeUnitEnv"><span class="hs-identifier hs-var hs-var">mkHomeUnitEnv</span></a></span></span><span> </span><span id="local-6989586621682933724"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682933724"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621682933725"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621682933725"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span id="local-6989586621682933726"><span class="annot"><span class="annottext">Maybe HomeUnit
</span><a href="#local-6989586621682933726"><span class="hs-identifier hs-var">home_unit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">homeUnitEnv_units :: UnitState
</span><a href="GHC.Unit.Env.html#homeUnitEnv_units"><span class="hs-identifier hs-var">homeUnitEnv_units</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="GHC.Unit.State.html#emptyUnitState"><span class="hs-identifier hs-var">emptyUnitState</span></a></span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">homeUnitEnv_unit_dbs :: Maybe [UnitDatabase UnitId]
</span><a href="GHC.Unit.Env.html#homeUnitEnv_unit_dbs"><span class="hs-identifier hs-var">homeUnitEnv_unit_dbs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [UnitDatabase UnitId]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">homeUnitEnv_dflags :: DynFlags
</span><a href="GHC.Unit.Env.html#homeUnitEnv_dflags"><span class="hs-identifier hs-var">homeUnitEnv_dflags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682933724"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">homeUnitEnv_hpt :: HomePackageTable
</span><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621682933725"><span class="hs-identifier hs-var">hpt</span></a></span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">homeUnitEnv_home_unit :: Maybe HomeUnit
</span><a href="GHC.Unit.Env.html#homeUnitEnv_home_unit"><span class="hs-identifier hs-var">homeUnitEnv_home_unit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe HomeUnit
</span><a href="#local-6989586621682933726"><span class="hs-identifier hs-var">home_unit</span></a></span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="annot"><span class="hs-comment">-- | Test if the module comes from the home unit</span></span><span>
</span><span id="line-244"></span><span class="annot"><a href="GHC.Unit.Env.html#isUnitEnvInstalledModule"><span class="hs-identifier hs-type">isUnitEnvInstalledModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#InstalledModule"><span class="hs-identifier hs-type">InstalledModule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-245"></span><span id="isUnitEnvInstalledModule"><span class="annot"><span class="annottext">isUnitEnvInstalledModule :: UnitEnv -&gt; InstalledModule -&gt; Bool
</span><a href="GHC.Unit.Env.html#isUnitEnvInstalledModule"><span class="hs-identifier hs-var hs-var">isUnitEnvInstalledModule</span></a></span></span><span> </span><span id="local-6989586621682933728"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933728"><span class="hs-identifier hs-var">ue</span></a></span></span><span> </span><span id="local-6989586621682933729"><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621682933729"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (HomeUnit -&gt; Bool) -&gt; Maybe HomeUnit -&gt; Bool
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnit -&gt; InstalledModule -&gt; Bool
forall u. GenHomeUnit u -&gt; InstalledModule -&gt; Bool
</span><a href="GHC.Unit.Home.html#isHomeInstalledModule"><span class="hs-operator hs-var">`isHomeInstalledModule`</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621682933729"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe HomeUnit
</span><a href="#local-6989586621682933732"><span class="hs-identifier hs-var">hu</span></a></span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621682933732"><span class="annot"><span class="annottext">hu :: Maybe HomeUnit
</span><a href="#local-6989586621682933732"><span class="hs-identifier hs-var hs-var">hu</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; UnitEnv -&gt; Maybe HomeUnit
</span><a href="GHC.Unit.Env.html#ue_unitHomeUnit_maybe"><span class="hs-identifier hs-var">ue_unitHomeUnit_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledModule -&gt; UnitId
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621682933729"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933728"><span class="hs-identifier hs-var">ue</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="hs-keyword">type</span><span> </span><span id="HomeUnitGraph"><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-var">HomeUnitGraph</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="annot"><a href="GHC.Unit.Env.html#lookupHugByModule"><span class="hs-identifier hs-type">lookupHugByModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span>
</span><span id="line-253"></span><span id="lookupHugByModule"><span class="annot"><span class="annottext">lookupHugByModule :: Module -&gt; HomeUnitGraph -&gt; Maybe HomeModInfo
</span><a href="GHC.Unit.Env.html#lookupHugByModule"><span class="hs-identifier hs-var hs-var">lookupHugByModule</span></a></span></span><span> </span><span id="local-6989586621682933734"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682933734"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682933735"><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933735"><span class="hs-identifier hs-var">hug</span></a></span></span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-255"></span><span>      </span><span id="local-6989586621682933736"><span class="annot"><a href="#local-6989586621682933736"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitId -&gt; HomeUnitGraph -&gt; Maybe HomeUnitEnv
forall v. UnitId -&gt; UnitEnvGraph v -&gt; Maybe v
</span><a href="GHC.Unit.Env.html#unitEnv_lookup_maybe"><span class="hs-identifier hs-var">unitEnv_lookup_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unit -&gt; UnitId
</span><a href="GHC.Unit.Types.html#toUnitId"><span class="hs-identifier hs-var">toUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">(Unit -&gt; UnitId) -&gt; Unit -&gt; UnitId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Module -&gt; Unit
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682933734"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933735"><span class="hs-identifier hs-var">hug</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>      </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#lookupHptByModule"><span class="hs-identifier hs-type">lookupHptByModule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933736"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682933734"><span class="hs-identifier hs-type">mod</span></a></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="annot"><a href="GHC.Unit.Env.html#hugElts"><span class="hs-identifier hs-type">hugElts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-259"></span><span id="hugElts"><span class="annot"><span class="annottext">hugElts :: HomeUnitGraph -&gt; [(UnitId, HomeUnitEnv)]
</span><a href="GHC.Unit.Env.html#hugElts"><span class="hs-identifier hs-var hs-var">hugElts</span></a></span></span><span> </span><span id="local-6989586621682933738"><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933738"><span class="hs-identifier hs-var">hug</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph -&gt; [(UnitId, HomeUnitEnv)]
forall v. UnitEnvGraph v -&gt; [(UnitId, v)]
</span><a href="GHC.Unit.Env.html#unitEnv_elts"><span class="hs-identifier hs-var">unitEnv_elts</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933738"><span class="hs-identifier hs-var">hug</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="annot"><a href="GHC.Unit.Env.html#addHomeModInfoToHug"><span class="hs-identifier hs-type">addHomeModInfoToHug</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span>
</span><span id="line-262"></span><span id="addHomeModInfoToHug"><span class="annot"><span class="annottext">addHomeModInfoToHug :: HomeModInfo -&gt; HomeUnitGraph -&gt; HomeUnitGraph
</span><a href="GHC.Unit.Env.html#addHomeModInfoToHug"><span class="hs-identifier hs-var hs-var">addHomeModInfoToHug</span></a></span></span><span> </span><span id="local-6989586621682933739"><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621682933739"><span class="hs-identifier hs-var">hmi</span></a></span></span><span> </span><span id="local-6989586621682933740"><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933740"><span class="hs-identifier hs-var">hug</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe HomeUnitEnv -&gt; Maybe HomeUnitEnv)
-&gt; UnitId -&gt; HomeUnitGraph -&gt; HomeUnitGraph
forall v.
(Maybe v -&gt; Maybe v) -&gt; UnitId -&gt; UnitEnvGraph v -&gt; UnitEnvGraph v
</span><a href="GHC.Unit.Env.html#unitEnv_alter"><span class="hs-identifier hs-var">unitEnv_alter</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe HomeUnitEnv -&gt; Maybe HomeUnitEnv
</span><a href="#local-6989586621682933742"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933743"><span class="hs-identifier hs-var">hmi_unit</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933740"><span class="hs-identifier hs-var">hug</span></a></span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><a href="#local-6989586621682933744"><span class="hs-identifier hs-type">hmi_mod</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span id="local-6989586621682933744"><span class="annot"><span class="annottext">hmi_mod :: Module
</span><a href="#local-6989586621682933744"><span class="hs-identifier hs-var hs-var">hmi_mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIface_ 'ModIfaceFinal -&gt; Module
forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Module
</span><a href="GHC.Unit.Module.ModIface.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModIface_ 'ModIfaceFinal
</span><a href="GHC.Unit.Home.ModInfo.html#hm_iface"><span class="hs-identifier hs-var">hm_iface</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621682933739"><span class="hs-identifier hs-var">hmi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621682933743"><span class="annot"><span class="annottext">hmi_unit :: UnitId
</span><a href="#local-6989586621682933743"><span class="hs-identifier hs-var hs-var">hmi_unit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unit -&gt; UnitId
</span><a href="GHC.Unit.Types.html#toUnitId"><span class="hs-identifier hs-var">toUnitId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; Unit
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682933744"><span class="hs-identifier hs-var">hmi_mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>    </span><span id="local-6989586621682933747"><span class="annot"><span class="annottext">_hmi_mn :: ModuleName
</span><a href="#local-6989586621682933747"><span class="hs-identifier hs-var hs-var">_hmi_mn</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682933744"><span class="hs-identifier hs-var">hmi_mod</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><a href="#local-6989586621682933742"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span id="local-6989586621682933742"><span class="annot"><span class="annottext">go :: Maybe HomeUnitEnv -&gt; Maybe HomeUnitEnv
</span><a href="#local-6989586621682933742"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe HomeUnitEnv
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Maybe HomeUnitEnv
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;addHomeInfoToHug&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682933744"><span class="hs-identifier hs-var">hmi_mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>    </span><span class="annot"><a href="#local-6989586621682933742"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682933750"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933750"><span class="hs-identifier hs-var">hue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; Maybe HomeUnitEnv
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HomePackageTable -&gt; HomePackageTable)
-&gt; HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#updateHueHpt"><span class="hs-identifier hs-var">updateHueHpt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; HomePackageTable -&gt; HomePackageTable
</span><a href="GHC.Unit.Home.ModInfo.html#addHomeModInfoToHpt"><span class="hs-identifier hs-var">addHomeModInfoToHpt</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621682933739"><span class="hs-identifier hs-var">hmi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933750"><span class="hs-identifier hs-var">hue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="annot"><a href="GHC.Unit.Env.html#updateHueHpt"><span class="hs-identifier hs-type">updateHueHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span>
</span><span id="line-275"></span><span id="updateHueHpt"><span class="annot"><span class="annottext">updateHueHpt :: (HomePackageTable -&gt; HomePackageTable)
-&gt; HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#updateHueHpt"><span class="hs-identifier hs-var hs-var">updateHueHpt</span></a></span></span><span> </span><span id="local-6989586621682933753"><span class="annot"><span class="annottext">HomePackageTable -&gt; HomePackageTable
</span><a href="#local-6989586621682933753"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682933754"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933754"><span class="hs-identifier hs-var">hue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682933755"><span class="annot"><span class="annottext">hpt :: HomePackageTable
</span><a href="#local-6989586621682933755"><span class="hs-identifier hs-var hs-var">hpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">HomePackageTable -&gt; HomePackageTable
</span><a href="#local-6989586621682933753"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomePackageTable
</span><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933754"><span class="hs-identifier hs-var">hue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933754"><span class="hs-identifier hs-var">hue</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682933755"><span class="hs-identifier hs-type">hpt</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="annot"><a href="GHC.Unit.Env.html#lookupHug"><span class="hs-identifier hs-type">lookupHug</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span>
</span><span id="line-281"></span><span id="lookupHug"><span class="annot"><span class="annottext">lookupHug :: HomeUnitGraph -&gt; UnitId -&gt; ModuleName -&gt; Maybe HomeModInfo
</span><a href="GHC.Unit.Env.html#lookupHug"><span class="hs-identifier hs-var hs-var">lookupHug</span></a></span></span><span> </span><span id="local-6989586621682933756"><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933756"><span class="hs-identifier hs-var">hug</span></a></span></span><span> </span><span id="local-6989586621682933757"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933757"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682933758"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682933758"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; HomeUnitGraph -&gt; Maybe HomeUnitEnv
forall v. UnitId -&gt; UnitEnvGraph v -&gt; Maybe v
</span><a href="GHC.Unit.Env.html#unitEnv_lookup_maybe"><span class="hs-identifier hs-var">unitEnv_lookup_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933757"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933756"><span class="hs-identifier hs-var">hug</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe HomeUnitEnv
-&gt; (HomeUnitEnv -&gt; Maybe HomeModInfo) -&gt; Maybe HomeModInfo
forall a b. Maybe a -&gt; (a -&gt; Maybe b) -&gt; Maybe b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(HomePackageTable -&gt; ModuleName -&gt; Maybe HomeModInfo)
-&gt; ModuleName -&gt; HomePackageTable -&gt; Maybe HomeModInfo
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; ModuleName -&gt; Maybe HomeModInfo
</span><a href="GHC.Unit.Home.ModInfo.html#lookupHpt"><span class="hs-identifier hs-var">lookupHpt</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682933758"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">(HomePackageTable -&gt; Maybe HomeModInfo)
-&gt; (HomeUnitEnv -&gt; HomePackageTable)
-&gt; HomeUnitEnv
-&gt; Maybe HomeModInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomePackageTable
</span><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-285"></span><span>  </span><span id="local-6989586621682933771"><span class="annot"><span class="annottext">ppr :: HomeUnitGraph -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682933772"><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933772"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(UnitId, Int)] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933773"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; Int
forall a. UniqDFM ModuleName a -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomePackageTable
</span><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span>  </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933775"><span class="hs-identifier hs-var">hue</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682933773"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933773"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682933775"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933775"><span class="hs-identifier hs-var">hue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnitGraph -&gt; [(UnitId, HomeUnitEnv)]
forall v. UnitEnvGraph v -&gt; [(UnitId, v)]
</span><a href="GHC.Unit.Env.html#unitEnv_elts"><span class="hs-identifier hs-var">unitEnv_elts</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933772"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="hs-keyword">type</span><span> </span><span id="UnitEnvGraphKey"><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-var">UnitEnvGraphKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="hs-keyword">newtype</span><span> </span><span id="UnitEnvGraph"><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-var">UnitEnvGraph</span></a></span></span><span> </span><span id="local-6989586621682933413"><span class="annot"><a href="#local-6989586621682933413"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UnitEnvGraph"><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-var">UnitEnvGraph</span></a></span></span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unitEnv_graph"><span class="annot"><span class="annottext">forall v. UnitEnvGraph v -&gt; Map UnitId v
</span><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var hs-var">unitEnv_graph</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933413"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682933779"><span id="local-6989586621682933784"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; UnitEnvGraph a -&gt; UnitEnvGraph b)
-&gt; (forall a b. a -&gt; UnitEnvGraph b -&gt; UnitEnvGraph a)
-&gt; Functor UnitEnvGraph
forall a b. a -&gt; UnitEnvGraph b -&gt; UnitEnvGraph a
forall a b. (a -&gt; b) -&gt; UnitEnvGraph a -&gt; UnitEnvGraph b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; UnitEnvGraph a -&gt; UnitEnvGraph b
fmap :: forall a b. (a -&gt; b) -&gt; UnitEnvGraph a -&gt; UnitEnvGraph b
$c&lt;$ :: forall a b. a -&gt; UnitEnvGraph b -&gt; UnitEnvGraph a
&lt;$ :: forall a b. a -&gt; UnitEnvGraph b -&gt; UnitEnvGraph a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682933791"><span id="local-6989586621682933798"><span id="local-6989586621682933804"><span id="local-6989586621682933810"><span id="local-6989586621682933814"><span id="local-6989586621682933818"><span id="local-6989586621682933822"><span id="local-6989586621682933826"><span id="local-6989586621682933830"><span id="local-6989586621682933834"><span id="local-6989586621682933838"><span id="local-6989586621682933842"><span id="local-6989586621682933846"><span id="local-6989586621682933852"><span id="local-6989586621682933858"><span id="local-6989586621682933864"><span id="local-6989586621682933870"><span class="annot"><span class="annottext">(forall m. Monoid m =&gt; UnitEnvGraph m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; UnitEnvGraph a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; UnitEnvGraph a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; UnitEnvGraph a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; UnitEnvGraph a -&gt; a)
-&gt; (forall a. UnitEnvGraph a -&gt; [a])
-&gt; (forall a. UnitEnvGraph a -&gt; Bool)
-&gt; (forall a. UnitEnvGraph a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; UnitEnvGraph a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; UnitEnvGraph a -&gt; a)
-&gt; (forall a. Ord a =&gt; UnitEnvGraph a -&gt; a)
-&gt; (forall a. Num a =&gt; UnitEnvGraph a -&gt; a)
-&gt; (forall a. Num a =&gt; UnitEnvGraph a -&gt; a)
-&gt; Foldable UnitEnvGraph
forall a. Eq a =&gt; a -&gt; UnitEnvGraph a -&gt; Bool
forall a. Num a =&gt; UnitEnvGraph a -&gt; a
forall a. Ord a =&gt; UnitEnvGraph a -&gt; a
forall m. Monoid m =&gt; UnitEnvGraph m -&gt; m
forall a. UnitEnvGraph a -&gt; Bool
forall a. UnitEnvGraph a -&gt; Int
forall a. UnitEnvGraph a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; UnitEnvGraph a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; UnitEnvGraph a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
$cfold :: forall m. Monoid m =&gt; UnitEnvGraph m -&gt; m
fold :: forall m. Monoid m =&gt; UnitEnvGraph m -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; UnitEnvGraph a -&gt; m
foldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; UnitEnvGraph a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; UnitEnvGraph a -&gt; m
foldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; UnitEnvGraph a -&gt; m
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
foldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
foldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
foldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
foldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; UnitEnvGraph a -&gt; a
foldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; UnitEnvGraph a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; UnitEnvGraph a -&gt; a
foldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; UnitEnvGraph a -&gt; a
$ctoList :: forall a. UnitEnvGraph a -&gt; [a]
toList :: forall a. UnitEnvGraph a -&gt; [a]
$cnull :: forall a. UnitEnvGraph a -&gt; Bool
null :: forall a. UnitEnvGraph a -&gt; Bool
$clength :: forall a. UnitEnvGraph a -&gt; Int
length :: forall a. UnitEnvGraph a -&gt; Int
$celem :: forall a. Eq a =&gt; a -&gt; UnitEnvGraph a -&gt; Bool
elem :: forall a. Eq a =&gt; a -&gt; UnitEnvGraph a -&gt; Bool
$cmaximum :: forall a. Ord a =&gt; UnitEnvGraph a -&gt; a
maximum :: forall a. Ord a =&gt; UnitEnvGraph a -&gt; a
$cminimum :: forall a. Ord a =&gt; UnitEnvGraph a -&gt; a
minimum :: forall a. Ord a =&gt; UnitEnvGraph a -&gt; a
$csum :: forall a. Num a =&gt; UnitEnvGraph a -&gt; a
sum :: forall a. Num a =&gt; UnitEnvGraph a -&gt; a
$cproduct :: forall a. Num a =&gt; UnitEnvGraph a -&gt; a
product :: forall a. Num a =&gt; UnitEnvGraph a -&gt; a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682933898"><span id="local-6989586621682933906"><span id="local-6989586621682933912"><span id="local-6989586621682933917"><span class="annot"><span class="annottext">Functor UnitEnvGraph
Foldable UnitEnvGraph
(Functor UnitEnvGraph, Foldable UnitEnvGraph) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; UnitEnvGraph a -&gt; f (UnitEnvGraph b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    UnitEnvGraph (f a) -&gt; f (UnitEnvGraph a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; UnitEnvGraph a -&gt; m (UnitEnvGraph b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    UnitEnvGraph (m a) -&gt; m (UnitEnvGraph a))
-&gt; Traversable UnitEnvGraph
forall (t :: * -&gt; *).
(Functor t, Foldable t) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a.
Monad m =&gt;
UnitEnvGraph (m a) -&gt; m (UnitEnvGraph a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
UnitEnvGraph (f a) -&gt; f (UnitEnvGraph a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; UnitEnvGraph a -&gt; m (UnitEnvGraph b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; UnitEnvGraph a -&gt; f (UnitEnvGraph b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; UnitEnvGraph a -&gt; f (UnitEnvGraph b)
traverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; UnitEnvGraph a -&gt; f (UnitEnvGraph b)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
UnitEnvGraph (f a) -&gt; f (UnitEnvGraph a)
sequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
UnitEnvGraph (f a) -&gt; f (UnitEnvGraph a)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; UnitEnvGraph a -&gt; m (UnitEnvGraph b)
mapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; UnitEnvGraph a -&gt; m (UnitEnvGraph b)
$csequence :: forall (m :: * -&gt; *) a.
Monad m =&gt;
UnitEnvGraph (m a) -&gt; m (UnitEnvGraph a)
sequence :: forall (m :: * -&gt; *) a.
Monad m =&gt;
UnitEnvGraph (m a) -&gt; m (UnitEnvGraph a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span id="local-6989586621682933482"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_insert"><span class="hs-identifier hs-type">unitEnv_insert</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933482"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933482"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933482"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-295"></span><span id="unitEnv_insert"><span class="annot"><span class="annottext">unitEnv_insert :: forall v. UnitId -&gt; v -&gt; UnitEnvGraph v -&gt; UnitEnvGraph v
</span><a href="GHC.Unit.Env.html#unitEnv_insert"><span class="hs-identifier hs-var hs-var">unitEnv_insert</span></a></span></span><span> </span><span id="local-6989586621682933925"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933925"><span class="hs-identifier hs-var">unitId</span></a></span></span><span> </span><span id="local-6989586621682933926"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621682933926"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682933927"><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933927"><span class="hs-identifier hs-var">unitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933927"><span class="hs-identifier hs-var">unitEnv</span></a></span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.Internal.html#insert"><span class="hs-identifier hs-type">Map.insert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933925"><span class="hs-identifier hs-type">unitId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933926"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933927"><span class="hs-identifier hs-type">unitEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span id="local-6989586621682933486"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_delete"><span class="hs-identifier hs-type">unitEnv_delete</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933486"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933486"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-300"></span><span id="unitEnv_delete"><span class="annot"><span class="annottext">unitEnv_delete :: forall v. UnitId -&gt; UnitEnvGraph v -&gt; UnitEnvGraph v
</span><a href="GHC.Unit.Env.html#unitEnv_delete"><span class="hs-identifier hs-var hs-var">unitEnv_delete</span></a></span></span><span> </span><span id="local-6989586621682933930"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933930"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682933931"><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933931"><span class="hs-identifier hs-var">unitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-301"></span><span>    </span><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933931"><span class="hs-identifier hs-var">unitEnv</span></a></span><span>
</span><span id="line-302"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#delete"><span class="hs-identifier hs-type">Map.delete</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933930"><span class="hs-identifier hs-type">uid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933931"><span class="hs-identifier hs-type">unitEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span id="local-6989586621682933490"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_adjust"><span class="hs-identifier hs-type">unitEnv_adjust</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682933490"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933490"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933490"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933490"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-306"></span><span id="unitEnv_adjust"><span class="annot"><span class="annottext">unitEnv_adjust :: forall v. (v -&gt; v) -&gt; UnitId -&gt; UnitEnvGraph v -&gt; UnitEnvGraph v
</span><a href="GHC.Unit.Env.html#unitEnv_adjust"><span class="hs-identifier hs-var hs-var">unitEnv_adjust</span></a></span></span><span> </span><span id="local-6989586621682933934"><span class="annot"><span class="annottext">v -&gt; v
</span><a href="#local-6989586621682933934"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682933935"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933935"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682933936"><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933936"><span class="hs-identifier hs-var">unitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933936"><span class="hs-identifier hs-var">unitEnv</span></a></span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.Internal.html#adjust"><span class="hs-identifier hs-type">Map.adjust</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933934"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933935"><span class="hs-identifier hs-type">uid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933936"><span class="hs-identifier hs-type">unitEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span id="local-6989586621682933392"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_alter"><span class="hs-identifier hs-type">unitEnv_alter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621682933392"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621682933392"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933392"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933392"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-311"></span><span id="unitEnv_alter"><span class="annot"><span class="annottext">unitEnv_alter :: forall v.
(Maybe v -&gt; Maybe v) -&gt; UnitId -&gt; UnitEnvGraph v -&gt; UnitEnvGraph v
</span><a href="GHC.Unit.Env.html#unitEnv_alter"><span class="hs-identifier hs-var hs-var">unitEnv_alter</span></a></span></span><span> </span><span id="local-6989586621682933939"><span class="annot"><span class="annottext">Maybe v -&gt; Maybe v
</span><a href="#local-6989586621682933939"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682933940"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933940"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682933941"><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933941"><span class="hs-identifier hs-var">unitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933941"><span class="hs-identifier hs-var">unitEnv</span></a></span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.Internal.html#alter"><span class="hs-identifier hs-type">Map.alter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933939"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933940"><span class="hs-identifier hs-type">uid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933941"><span class="hs-identifier hs-type">unitEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span id="local-6989586621682933497"><span id="local-6989586621682933498"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_mapWithKey"><span class="hs-identifier hs-type">unitEnv_mapWithKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933497"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933498"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933497"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933498"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-316"></span><span id="unitEnv_mapWithKey"><span class="annot"><span class="annottext">unitEnv_mapWithKey :: forall v b. (UnitId -&gt; v -&gt; b) -&gt; UnitEnvGraph v -&gt; UnitEnvGraph b
</span><a href="GHC.Unit.Env.html#unitEnv_mapWithKey"><span class="hs-identifier hs-var hs-var">unitEnv_mapWithKey</span></a></span></span><span> </span><span id="local-6989586621682933943"><span class="annot"><span class="annottext">UnitId -&gt; v -&gt; b
</span><a href="#local-6989586621682933943"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span id="local-6989586621682933944"><span class="annot"><span class="annottext">Map UnitId v
</span><a href="#local-6989586621682933944"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map UnitId b -&gt; UnitEnvGraph b
forall v. Map UnitId v -&gt; UnitEnvGraph v
</span><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-var">UnitEnvGraph</span></a></span><span> </span><span class="annot"><span class="annottext">(Map UnitId b -&gt; UnitEnvGraph b) -&gt; Map UnitId b -&gt; UnitEnvGraph b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(UnitId -&gt; v -&gt; b) -&gt; Map UnitId v -&gt; Map UnitId b
forall k a b. (k -&gt; a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.Internal.html#mapWithKey"><span class="hs-identifier hs-var">Map.mapWithKey</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; v -&gt; b
</span><a href="#local-6989586621682933943"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Map UnitId v
</span><a href="#local-6989586621682933944"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span id="local-6989586621682933946"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_new"><span class="hs-identifier hs-type">unitEnv_new</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933946"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933946"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-319"></span><span id="unitEnv_new"><span class="annot"><span class="annottext">unitEnv_new :: forall v. Map UnitId v -&gt; UnitEnvGraph v
</span><a href="GHC.Unit.Env.html#unitEnv_new"><span class="hs-identifier hs-var hs-var">unitEnv_new</span></a></span></span><span> </span><span id="local-6989586621682933947"><span class="annot"><span class="annottext">Map UnitId v
</span><a href="#local-6989586621682933947"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-320"></span><span>  </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unitEnv_graph :: Map UnitId v
</span><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map UnitId v
</span><a href="#local-6989586621682933947"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-322"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span id="local-6989586621682933505"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_singleton"><span class="hs-identifier hs-type">unitEnv_singleton</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933505"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933505"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-325"></span><span id="unitEnv_singleton"><span class="annot"><span class="annottext">unitEnv_singleton :: forall v. UnitId -&gt; v -&gt; UnitEnvGraph v
</span><a href="GHC.Unit.Env.html#unitEnv_singleton"><span class="hs-identifier hs-var hs-var">unitEnv_singleton</span></a></span></span><span> </span><span id="local-6989586621682933948"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933948"><span class="hs-identifier hs-var">active</span></a></span></span><span> </span><span id="local-6989586621682933949"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621682933949"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unitEnv_graph :: Map UnitId v
</span><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; v -&gt; Map UnitId v
forall k a. k -&gt; a -&gt; Map k a
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.Internal.html#singleton"><span class="hs-identifier hs-var">Map.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933948"><span class="hs-identifier hs-var">active</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621682933949"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-327"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span id="local-6989586621682933509"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_map"><span class="hs-identifier hs-type">unitEnv_map</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682933509"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933509"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933509"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933509"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-330"></span><span id="unitEnv_map"><span class="annot"><span class="annottext">unitEnv_map :: forall v. (v -&gt; v) -&gt; UnitEnvGraph v -&gt; UnitEnvGraph v
</span><a href="GHC.Unit.Env.html#unitEnv_map"><span class="hs-identifier hs-var hs-var">unitEnv_map</span></a></span></span><span> </span><span id="local-6989586621682933951"><span class="annot"><span class="annottext">v -&gt; v
</span><a href="#local-6989586621682933951"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682933952"><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933952"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933952"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.Internal.html#map"><span class="hs-identifier hs-type">Map.map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933951"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933952"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span id="local-6989586621682933514"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_member"><span class="hs-identifier hs-type">unitEnv_member</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933514"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-333"></span><span id="unitEnv_member"><span class="annot"><span class="annottext">unitEnv_member :: forall v. UnitId -&gt; UnitEnvGraph v -&gt; Bool
</span><a href="GHC.Unit.Env.html#unitEnv_member"><span class="hs-identifier hs-var hs-var">unitEnv_member</span></a></span></span><span> </span><span id="local-6989586621682933955"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933955"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682933956"><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933956"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; Map UnitId v -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#member"><span class="hs-identifier hs-var">Map.member</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933955"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnvGraph v -&gt; Map UnitId v
forall v. UnitEnvGraph v -&gt; Map UnitId v
</span><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933956"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span id="local-6989586621682933389"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_lookup_maybe"><span class="hs-identifier hs-type">unitEnv_lookup_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933389"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621682933389"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-336"></span><span id="unitEnv_lookup_maybe"><span class="annot"><span class="annottext">unitEnv_lookup_maybe :: forall v. UnitId -&gt; UnitEnvGraph v -&gt; Maybe v
</span><a href="GHC.Unit.Env.html#unitEnv_lookup_maybe"><span class="hs-identifier hs-var hs-var">unitEnv_lookup_maybe</span></a></span></span><span> </span><span id="local-6989586621682933959"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933959"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682933960"><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933960"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; Map UnitId v -&gt; Maybe v
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933959"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnvGraph v -&gt; Map UnitId v
forall v. UnitEnvGraph v -&gt; Map UnitId v
</span><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933960"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span id="local-6989586621682933521"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_lookup"><span class="hs-identifier hs-type">unitEnv_lookup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933521"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933521"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-339"></span><span id="unitEnv_lookup"><span class="annot"><span class="annottext">unitEnv_lookup :: forall v. UnitId -&gt; UnitEnvGraph v -&gt; v
</span><a href="GHC.Unit.Env.html#unitEnv_lookup"><span class="hs-identifier hs-var hs-var">unitEnv_lookup</span></a></span></span><span> </span><span id="local-6989586621682933964"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933964"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682933965"><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933965"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe v -&gt; v
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe v -&gt; v) -&gt; Maybe v -&gt; v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; UnitEnvGraph v -&gt; Maybe v
forall v. UnitId -&gt; UnitEnvGraph v -&gt; Maybe v
</span><a href="GHC.Unit.Env.html#unitEnv_lookup_maybe"><span class="hs-identifier hs-var">unitEnv_lookup_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682933964"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933965"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span id="local-6989586621682933524"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_keys"><span class="hs-identifier hs-type">unitEnv_keys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933524"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set.Set</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span></span><span>
</span><span id="line-342"></span><span id="unitEnv_keys"><span class="annot"><span class="annottext">unitEnv_keys :: forall v. UnitEnvGraph v -&gt; Set UnitId
</span><a href="GHC.Unit.Env.html#unitEnv_keys"><span class="hs-identifier hs-var hs-var">unitEnv_keys</span></a></span></span><span> </span><span id="local-6989586621682933967"><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933967"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map UnitId v -&gt; Set UnitId
forall k a. Map k a -&gt; Set k
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#keysSet"><span class="hs-identifier hs-var">Map.keysSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnvGraph v -&gt; Map UnitId v
forall v. UnitEnvGraph v -&gt; Map UnitId v
</span><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933967"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span id="local-6989586621682933391"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_elts"><span class="hs-identifier hs-type">unitEnv_elts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933391"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682933391"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-345"></span><span id="unitEnv_elts"><span class="annot"><span class="annottext">unitEnv_elts :: forall v. UnitEnvGraph v -&gt; [(UnitId, v)]
</span><a href="GHC.Unit.Env.html#unitEnv_elts"><span class="hs-identifier hs-var hs-var">unitEnv_elts</span></a></span></span><span> </span><span id="local-6989586621682933969"><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933969"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map UnitId v -&gt; [(UnitId, v)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#toList"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnvGraph v -&gt; Map UnitId v
forall v. UnitEnvGraph v -&gt; Map UnitId v
</span><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnvGraph v
</span><a href="#local-6989586621682933969"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_hpts"><span class="hs-identifier hs-type">unitEnv_hpts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-348"></span><span id="unitEnv_hpts"><span class="annot"><span class="annottext">unitEnv_hpts :: HomeUnitGraph -&gt; [HomePackageTable]
</span><a href="GHC.Unit.Env.html#unitEnv_hpts"><span class="hs-identifier hs-var hs-var">unitEnv_hpts</span></a></span></span><span> </span><span id="local-6989586621682933971"><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933971"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; HomePackageTable)
-&gt; [HomeUnitEnv] -&gt; [HomePackageTable]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomePackageTable
</span><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map UnitId HomeUnitEnv -&gt; [HomeUnitEnv]
forall k a. Map k a -&gt; [a]
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#elems"><span class="hs-identifier hs-var">Map.elems</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnitGraph -&gt; Map UnitId HomeUnitEnv
forall v. UnitEnvGraph v -&gt; Map UnitId v
</span><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682933971"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span id="local-6989586621682933533"><span id="local-6989586621682933534"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_foldWithKey"><span class="hs-identifier hs-type">unitEnv_foldWithKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682933533"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraphKey"><span class="hs-identifier hs-type">UnitEnvGraphKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933534"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933533"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933533"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933534"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933533"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-351"></span><span id="unitEnv_foldWithKey"><span class="annot"><span class="annottext">unitEnv_foldWithKey :: forall b a. (b -&gt; UnitId -&gt; a -&gt; b) -&gt; b -&gt; UnitEnvGraph a -&gt; b
</span><a href="GHC.Unit.Env.html#unitEnv_foldWithKey"><span class="hs-identifier hs-var hs-var">unitEnv_foldWithKey</span></a></span></span><span> </span><span id="local-6989586621682933973"><span class="annot"><span class="annottext">b -&gt; UnitId -&gt; a -&gt; b
</span><a href="#local-6989586621682933973"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682933974"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682933974"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span id="local-6989586621682933975"><span class="annot"><span class="annottext">Map UnitId a
</span><a href="#local-6989586621682933975"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(b -&gt; UnitId -&gt; a -&gt; b) -&gt; b -&gt; Map UnitId a -&gt; b
forall a k b. (a -&gt; k -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#foldlWithKey%27"><span class="hs-identifier hs-var">Map.foldlWithKey'</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; UnitId -&gt; a -&gt; b
</span><a href="#local-6989586621682933973"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682933974"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">Map UnitId a
</span><a href="#local-6989586621682933975"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span id="local-6989586621682933540"><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_union"><span class="hs-identifier hs-type">unitEnv_union</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682933540"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933540"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682933540"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933540"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933540"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682933540"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-354"></span><span id="unitEnv_union"><span class="annot"><span class="annottext">unitEnv_union :: forall a.
(a -&gt; a -&gt; a) -&gt; UnitEnvGraph a -&gt; UnitEnvGraph a -&gt; UnitEnvGraph a
</span><a href="GHC.Unit.Env.html#unitEnv_union"><span class="hs-identifier hs-var hs-var">unitEnv_union</span></a></span></span><span> </span><span id="local-6989586621682933978"><span class="annot"><span class="annottext">a -&gt; a -&gt; a
</span><a href="#local-6989586621682933978"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span id="local-6989586621682933979"><span class="annot"><span class="annottext">Map UnitId a
</span><a href="#local-6989586621682933979"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-type">UnitEnvGraph</span></a></span><span> </span><span id="local-6989586621682933980"><span class="annot"><span class="annottext">Map UnitId a
</span><a href="#local-6989586621682933980"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map UnitId a -&gt; UnitEnvGraph a
forall v. Map UnitId v -&gt; UnitEnvGraph v
</span><a href="GHC.Unit.Env.html#UnitEnvGraph"><span class="hs-identifier hs-var">UnitEnvGraph</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; a -&gt; a) -&gt; Map UnitId a -&gt; Map UnitId a -&gt; Map UnitId a
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.Internal.html#unionWith"><span class="hs-identifier hs-var">Map.unionWith</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
</span><a href="#local-6989586621682933978"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Map UnitId a
</span><a href="#local-6989586621682933979"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map UnitId a
</span><a href="#local-6989586621682933980"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- Query and modify UnitState in HomeUnitEnv</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_units"><span class="hs-identifier hs-type">ue_units</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnitState"><span class="hs-identifier hs-type">UnitState</span></a></span><span>
</span><span id="line-361"></span><span id="ue_units"><span class="annot"><span class="annottext">ue_units :: HasDebugCallStack =&gt; UnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#ue_units"><span class="hs-identifier hs-var hs-var">ue_units</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#homeUnitEnv_units"><span class="hs-identifier hs-var">homeUnitEnv_units</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; UnitState)
-&gt; (UnitEnv -&gt; HomeUnitEnv) -&gt; UnitEnv -&gt; UnitState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitEnv -&gt; HomeUnitEnv
UnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_currentHomeUnitEnv"><span class="hs-identifier hs-var">ue_currentHomeUnitEnv</span></a></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_setUnits"><span class="hs-identifier hs-type">ue_setUnits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnitState"><span class="hs-identifier hs-type">UnitState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-364"></span><span id="ue_setUnits"><span class="annot"><span class="annottext">ue_setUnits :: UnitState -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_setUnits"><span class="hs-identifier hs-var hs-var">ue_setUnits</span></a></span></span><span> </span><span id="local-6989586621682933984"><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621682933984"><span class="hs-identifier hs-var">units</span></a></span></span><span> </span><span id="local-6989586621682933985"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933985"><span class="hs-identifier hs-var">ue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; HomeUnitEnv) -&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHomeUnitEnv"><span class="hs-identifier hs-var">ue_updateHomeUnitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682933986"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var">ue_currentUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933985"><span class="hs-identifier hs-var">ue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933985"><span class="hs-identifier hs-var">ue</span></a></span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-366"></span><span>    </span><span id="local-6989586621682933986"><span class="annot"><span class="annottext">f :: HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682933986"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682933987"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933987"><span class="hs-identifier hs-var">hue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933987"><span class="hs-identifier hs-var">hue</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_units"><span class="hs-identifier hs-var">homeUnitEnv_units</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682933984"><span class="hs-identifier hs-type">units</span></a></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_unit_dbs"><span class="hs-identifier hs-type">ue_unit_dbs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.State.html#UnitDatabase"><span class="hs-identifier hs-type">UnitDatabase</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-369"></span><span id="ue_unit_dbs"><span class="annot"><span class="annottext">ue_unit_dbs :: UnitEnv -&gt; Maybe [UnitDatabase UnitId]
</span><a href="GHC.Unit.Env.html#ue_unit_dbs"><span class="hs-identifier hs-var hs-var">ue_unit_dbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; Maybe [UnitDatabase UnitId]
</span><a href="GHC.Unit.Env.html#homeUnitEnv_unit_dbs"><span class="hs-identifier hs-var">homeUnitEnv_unit_dbs</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; Maybe [UnitDatabase UnitId])
-&gt; (UnitEnv -&gt; HomeUnitEnv)
-&gt; UnitEnv
-&gt; Maybe [UnitDatabase UnitId]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitEnv -&gt; HomeUnitEnv
UnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_currentHomeUnitEnv"><span class="hs-identifier hs-var">ue_currentHomeUnitEnv</span></a></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_setUnitDbs"><span class="hs-identifier hs-type">ue_setUnitDbs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.State.html#UnitDatabase"><span class="hs-identifier hs-type">UnitDatabase</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-372"></span><span id="ue_setUnitDbs"><span class="annot"><span class="annottext">ue_setUnitDbs :: Maybe [UnitDatabase UnitId] -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_setUnitDbs"><span class="hs-identifier hs-var hs-var">ue_setUnitDbs</span></a></span></span><span> </span><span id="local-6989586621682933988"><span class="annot"><span class="annottext">Maybe [UnitDatabase UnitId]
</span><a href="#local-6989586621682933988"><span class="hs-identifier hs-var">unit_dbs</span></a></span></span><span> </span><span id="local-6989586621682933989"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933989"><span class="hs-identifier hs-var">ue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; HomeUnitEnv) -&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHomeUnitEnv"><span class="hs-identifier hs-var">ue_updateHomeUnitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682933990"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var">ue_currentUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933989"><span class="hs-identifier hs-var">ue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933989"><span class="hs-identifier hs-var">ue</span></a></span><span>
</span><span id="line-373"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-374"></span><span>    </span><span id="local-6989586621682933990"><span class="annot"><span class="annottext">f :: HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682933990"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682933991"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933991"><span class="hs-identifier hs-var">hue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682933991"><span class="hs-identifier hs-var">hue</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_unit_dbs"><span class="hs-identifier hs-var">homeUnitEnv_unit_dbs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682933988"><span class="hs-identifier hs-type">unit_dbs</span></a></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- Query and modify Home Package Table in HomeUnitEnv</span><span>
</span><span id="line-378"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_hpt"><span class="hs-identifier hs-type">ue_hpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-381"></span><span id="ue_hpt"><span class="annot"><span class="annottext">ue_hpt :: HasDebugCallStack =&gt; UnitEnv -&gt; HomePackageTable
</span><a href="GHC.Unit.Env.html#ue_hpt"><span class="hs-identifier hs-var hs-var">ue_hpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomePackageTable
</span><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; HomePackageTable)
-&gt; (UnitEnv -&gt; HomeUnitEnv) -&gt; UnitEnv -&gt; HomePackageTable
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitEnv -&gt; HomeUnitEnv
UnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_currentHomeUnitEnv"><span class="hs-identifier hs-var">ue_currentHomeUnitEnv</span></a></span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_updateHPT_lazy"><span class="hs-identifier hs-type">ue_updateHPT_lazy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-384"></span><span id="ue_updateHPT_lazy"><span class="annot"><span class="annottext">ue_updateHPT_lazy :: HasDebugCallStack =&gt;
(HomePackageTable -&gt; HomePackageTable) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHPT_lazy"><span class="hs-identifier hs-var hs-var">ue_updateHPT_lazy</span></a></span></span><span> </span><span id="local-6989586621682933996"><span class="annot"><span class="annottext">HomePackageTable -&gt; HomePackageTable
</span><a href="#local-6989586621682933996"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682933997"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933997"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt;
(HomePackageTable -&gt; HomePackageTable)
-&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
(HomePackageTable -&gt; HomePackageTable)
-&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateUnitHPT_lazy"><span class="hs-identifier hs-var">ue_updateUnitHPT_lazy</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; HomePackageTable
</span><a href="#local-6989586621682933996"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var">ue_currentUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933997"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682933997"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_updateHPT"><span class="hs-identifier hs-type">ue_updateHPT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-387"></span><span id="ue_updateHPT"><span class="annot"><span class="annottext">ue_updateHPT :: HasDebugCallStack =&gt;
(HomePackageTable -&gt; HomePackageTable) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHPT"><span class="hs-identifier hs-var hs-var">ue_updateHPT</span></a></span></span><span> </span><span id="local-6989586621682934001"><span class="annot"><span class="annottext">HomePackageTable -&gt; HomePackageTable
</span><a href="#local-6989586621682934001"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682934002"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934002"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt;
(HomePackageTable -&gt; HomePackageTable)
-&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
(HomePackageTable -&gt; HomePackageTable)
-&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateUnitHPT"><span class="hs-identifier hs-var">ue_updateUnitHPT</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; HomePackageTable
</span><a href="#local-6989586621682934001"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var">ue_currentUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934002"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934002"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_updateHUG"><span class="hs-identifier hs-type">ue_updateHUG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-390"></span><span id="ue_updateHUG"><span class="annot"><span class="annottext">ue_updateHUG :: HasDebugCallStack =&gt;
(HomeUnitGraph -&gt; HomeUnitGraph) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHUG"><span class="hs-identifier hs-var hs-var">ue_updateHUG</span></a></span></span><span> </span><span id="local-6989586621682934006"><span class="annot"><span class="annottext">HomeUnitGraph -&gt; HomeUnitGraph
</span><a href="#local-6989586621682934006"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682934007"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934007"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt;
(HomeUnitGraph -&gt; HomeUnitGraph) -&gt; UnitEnv -&gt; UnitEnv
(HomeUnitGraph -&gt; HomeUnitGraph) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateUnitHUG"><span class="hs-identifier hs-var">ue_updateUnitHUG</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph -&gt; HomeUnitGraph
</span><a href="#local-6989586621682934006"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934007"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_updateUnitHPT_lazy"><span class="hs-identifier hs-type">ue_updateUnitHPT_lazy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-393"></span><span id="ue_updateUnitHPT_lazy"><span class="annot"><span class="annottext">ue_updateUnitHPT_lazy :: HasDebugCallStack =&gt;
(HomePackageTable -&gt; HomePackageTable)
-&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateUnitHPT_lazy"><span class="hs-identifier hs-var hs-var">ue_updateUnitHPT_lazy</span></a></span></span><span> </span><span id="local-6989586621682934010"><span class="annot"><span class="annottext">HomePackageTable -&gt; HomePackageTable
</span><a href="#local-6989586621682934010"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682934011"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934011"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934012"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934012"><span class="hs-identifier hs-var">ue_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; HomeUnitEnv) -&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHomeUnitEnv"><span class="hs-identifier hs-var">ue_updateHomeUnitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682934013"><span class="hs-identifier hs-var">update</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934011"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934012"><span class="hs-identifier hs-var">ue_env</span></a></span><span>
</span><span id="line-394"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-395"></span><span>    </span><span id="local-6989586621682934013"><span class="annot"><span class="annottext">update :: HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682934013"><span class="hs-identifier hs-var hs-var">update</span></a></span></span><span> </span><span id="local-6989586621682934014"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934014"><span class="hs-identifier hs-var">unitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934014"><span class="hs-identifier hs-var">unitEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682934010"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934014"><span class="hs-identifier hs-type">unitEnv</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-396"></span><span>
</span><span id="line-397"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_updateUnitHPT"><span class="hs-identifier hs-type">ue_updateUnitHPT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-398"></span><span id="ue_updateUnitHPT"><span class="annot"><span class="annottext">ue_updateUnitHPT :: HasDebugCallStack =&gt;
(HomePackageTable -&gt; HomePackageTable)
-&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateUnitHPT"><span class="hs-identifier hs-var hs-var">ue_updateUnitHPT</span></a></span></span><span> </span><span id="local-6989586621682934016"><span class="annot"><span class="annottext">HomePackageTable -&gt; HomePackageTable
</span><a href="#local-6989586621682934016"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682934017"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934017"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934018"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934018"><span class="hs-identifier hs-var">ue_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; HomeUnitEnv) -&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHomeUnitEnv"><span class="hs-identifier hs-var">ue_updateHomeUnitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682934019"><span class="hs-identifier hs-var">update</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934017"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934018"><span class="hs-identifier hs-var">ue_env</span></a></span><span>
</span><span id="line-399"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-400"></span><span>    </span><span id="local-6989586621682934019"><span class="annot"><span class="annottext">update :: HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682934019"><span class="hs-identifier hs-var hs-var">update</span></a></span></span><span> </span><span id="local-6989586621682934020"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934020"><span class="hs-identifier hs-var">unitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-401"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682934021"><span class="annot"><span class="annottext">res :: HomePackageTable
</span><a href="#local-6989586621682934021"><span class="hs-identifier hs-var hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; HomePackageTable
</span><a href="#local-6989586621682934016"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(HomePackageTable -&gt; HomePackageTable)
-&gt; HomePackageTable -&gt; HomePackageTable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomePackageTable
</span><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934020"><span class="hs-identifier hs-var">unitEnv</span></a></span><span>
</span><span id="line-402"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934020"><span class="hs-identifier hs-var">unitEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682934021"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_updateUnitHUG"><span class="hs-identifier hs-type">ue_updateUnitHUG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-405"></span><span id="ue_updateUnitHUG"><span class="annot"><span class="annottext">ue_updateUnitHUG :: HasDebugCallStack =&gt;
(HomeUnitGraph -&gt; HomeUnitGraph) -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateUnitHUG"><span class="hs-identifier hs-var hs-var">ue_updateUnitHUG</span></a></span></span><span> </span><span id="local-6989586621682934023"><span class="annot"><span class="annottext">HomeUnitGraph -&gt; HomeUnitGraph
</span><a href="#local-6989586621682934023"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682934024"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934024"><span class="hs-identifier hs-var">ue_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934024"><span class="hs-identifier hs-var">ue_env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682934023"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934024"><span class="hs-identifier hs-type">ue_env</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-408"></span><span class="hs-comment">-- Query and modify DynFlags in HomeUnitEnv</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_setFlags"><span class="hs-identifier hs-type">ue_setFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-412"></span><span id="ue_setFlags"><span class="annot"><span class="annottext">ue_setFlags :: HasDebugCallStack =&gt; DynFlags -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_setFlags"><span class="hs-identifier hs-var hs-var">ue_setFlags</span></a></span></span><span> </span><span id="local-6989586621682934027"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682934027"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621682934028"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934028"><span class="hs-identifier hs-var">ue_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitId -&gt; DynFlags -&gt; UnitEnv -&gt; UnitEnv
UnitId -&gt; DynFlags -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_setUnitFlags"><span class="hs-identifier hs-var">ue_setUnitFlags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var">ue_currentUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934028"><span class="hs-identifier hs-var">ue_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682934027"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934028"><span class="hs-identifier hs-var">ue_env</span></a></span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_setUnitFlags"><span class="hs-identifier hs-type">ue_setUnitFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-415"></span><span id="ue_setUnitFlags"><span class="annot"><span class="annottext">ue_setUnitFlags :: HasDebugCallStack =&gt; UnitId -&gt; DynFlags -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_setUnitFlags"><span class="hs-identifier hs-var hs-var">ue_setUnitFlags</span></a></span></span><span> </span><span id="local-6989586621682934031"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934031"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934032"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682934032"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621682934033"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934033"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-416"></span><span>  </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt;
(DynFlags -&gt; DynFlags) -&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
(DynFlags -&gt; DynFlags) -&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateUnitFlags"><span class="hs-identifier hs-var">ue_updateUnitFlags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; DynFlags -&gt; DynFlags
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682934032"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934031"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934033"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_unitFlags"><span class="hs-identifier hs-type">ue_unitFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-419"></span><span id="ue_unitFlags"><span class="annot"><span class="annottext">ue_unitFlags :: HasDebugCallStack =&gt; UnitId -&gt; UnitEnv -&gt; DynFlags
</span><a href="GHC.Unit.Env.html#ue_unitFlags"><span class="hs-identifier hs-var hs-var">ue_unitFlags</span></a></span></span><span> </span><span id="local-6989586621682934038"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934038"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934039"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934039"><span class="hs-identifier hs-var">ue_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; DynFlags
</span><a href="GHC.Unit.Env.html#homeUnitEnv_dflags"><span class="hs-identifier hs-var">homeUnitEnv_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; DynFlags) -&gt; HomeUnitEnv -&gt; DynFlags
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitId -&gt; UnitEnv -&gt; HomeUnitEnv
UnitId -&gt; UnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv"><span class="hs-identifier hs-var">ue_findHomeUnitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934038"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934039"><span class="hs-identifier hs-var">ue_env</span></a></span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_updateUnitFlags"><span class="hs-identifier hs-type">ue_updateUnitFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-422"></span><span id="ue_updateUnitFlags"><span class="annot"><span class="annottext">ue_updateUnitFlags :: HasDebugCallStack =&gt;
(DynFlags -&gt; DynFlags) -&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateUnitFlags"><span class="hs-identifier hs-var hs-var">ue_updateUnitFlags</span></a></span></span><span> </span><span id="local-6989586621682934041"><span class="annot"><span class="annottext">DynFlags -&gt; DynFlags
</span><a href="#local-6989586621682934041"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682934042"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934042"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934043"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934043"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; HomeUnitEnv) -&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHomeUnitEnv"><span class="hs-identifier hs-var">ue_updateHomeUnitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682934044"><span class="hs-identifier hs-var">update</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934042"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934043"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-424"></span><span>    </span><span id="local-6989586621682934044"><span class="annot"><span class="annottext">update :: HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682934044"><span class="hs-identifier hs-var hs-var">update</span></a></span></span><span> </span><span id="local-6989586621682934045"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934045"><span class="hs-identifier hs-var">hue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934045"><span class="hs-identifier hs-var">hue</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_dflags"><span class="hs-identifier hs-var">homeUnitEnv_dflags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682934041"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_dflags"><span class="hs-identifier hs-var">homeUnitEnv_dflags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934045"><span class="hs-identifier hs-type">hue</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- Query and modify home units in HomeUnitEnv</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_homeUnit"><span class="hs-identifier hs-type">ue_homeUnit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span>
</span><span id="line-431"></span><span id="ue_homeUnit"><span class="annot"><span class="annottext">ue_homeUnit :: UnitEnv -&gt; Maybe HomeUnit
</span><a href="GHC.Unit.Env.html#ue_homeUnit"><span class="hs-identifier hs-var hs-var">ue_homeUnit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; Maybe HomeUnit
</span><a href="GHC.Unit.Env.html#homeUnitEnv_home_unit"><span class="hs-identifier hs-var">homeUnitEnv_home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; Maybe HomeUnit)
-&gt; (UnitEnv -&gt; HomeUnitEnv) -&gt; UnitEnv -&gt; Maybe HomeUnit
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitEnv -&gt; HomeUnitEnv
UnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_currentHomeUnitEnv"><span class="hs-identifier hs-var">ue_currentHomeUnitEnv</span></a></span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_unsafeHomeUnit"><span class="hs-identifier hs-type">ue_unsafeHomeUnit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span>
</span><span id="line-434"></span><span id="ue_unsafeHomeUnit"><span class="annot"><span class="annottext">ue_unsafeHomeUnit :: UnitEnv -&gt; HomeUnit
</span><a href="GHC.Unit.Env.html#ue_unsafeHomeUnit"><span class="hs-identifier hs-var hs-var">ue_unsafeHomeUnit</span></a></span></span><span> </span><span id="local-6989586621682934046"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934046"><span class="hs-identifier hs-var">ue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; Maybe HomeUnit
</span><a href="GHC.Unit.Env.html#ue_homeUnit"><span class="hs-identifier hs-var">ue_homeUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934046"><span class="hs-identifier hs-var">ue</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><span class="annottext">Maybe HomeUnit
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; HomeUnit
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unsafeGetHomeUnit: No home unit&quot;</span></span><span>
</span><span id="line-436"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682934047"><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621682934047"><span class="hs-identifier hs-var">h</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621682934047"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_unitHomeUnit_maybe"><span class="hs-identifier hs-type">ue_unitHomeUnit_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span>
</span><span id="line-439"></span><span id="ue_unitHomeUnit_maybe"><span class="annot"><span class="annottext">ue_unitHomeUnit_maybe :: UnitId -&gt; UnitEnv -&gt; Maybe HomeUnit
</span><a href="GHC.Unit.Env.html#ue_unitHomeUnit_maybe"><span class="hs-identifier hs-var hs-var">ue_unitHomeUnit_maybe</span></a></span></span><span> </span><span id="local-6989586621682934048"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934048"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934049"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934049"><span class="hs-identifier hs-var">ue_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-440"></span><span>  </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomeUnit
</span><a href="GHC.Unit.Env.html#homeUnitEnv_unsafeHomeUnit"><span class="hs-identifier hs-var">homeUnitEnv_unsafeHomeUnit</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; HomeUnit) -&gt; Maybe HomeUnitEnv -&gt; Maybe HomeUnit
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitId -&gt; UnitEnv -&gt; Maybe HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv_maybe"><span class="hs-identifier hs-var">ue_findHomeUnitEnv_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934048"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934049"><span class="hs-identifier hs-var">ue_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_unitHomeUnit"><span class="hs-identifier hs-type">ue_unitHomeUnit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span>
</span><span id="line-443"></span><span id="ue_unitHomeUnit"><span class="annot"><span class="annottext">ue_unitHomeUnit :: UnitId -&gt; UnitEnv -&gt; HomeUnit
</span><a href="GHC.Unit.Env.html#ue_unitHomeUnit"><span class="hs-identifier hs-var hs-var">ue_unitHomeUnit</span></a></span></span><span> </span><span id="local-6989586621682934051"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934051"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934052"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934052"><span class="hs-identifier hs-var">ue_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomeUnit
</span><a href="GHC.Unit.Env.html#homeUnitEnv_unsafeHomeUnit"><span class="hs-identifier hs-var">homeUnitEnv_unsafeHomeUnit</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; HomeUnit) -&gt; HomeUnitEnv -&gt; HomeUnit
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitId -&gt; UnitEnv -&gt; HomeUnitEnv
UnitId -&gt; UnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv"><span class="hs-identifier hs-var">ue_findHomeUnitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934051"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934052"><span class="hs-identifier hs-var">ue_env</span></a></span><span>
</span><span id="line-444"></span><span>
</span><span id="line-445"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_all_home_unit_ids"><span class="hs-identifier hs-type">ue_all_home_unit_ids</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set.Set</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-446"></span><span id="ue_all_home_unit_ids"><span class="annot"><span class="annottext">ue_all_home_unit_ids :: UnitEnv -&gt; Set UnitId
</span><a href="GHC.Unit.Env.html#ue_all_home_unit_ids"><span class="hs-identifier hs-var hs-var">ue_all_home_unit_ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph -&gt; Set UnitId
forall v. UnitEnvGraph v -&gt; Set UnitId
</span><a href="GHC.Unit.Env.html#unitEnv_keys"><span class="hs-identifier hs-var">unitEnv_keys</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeUnitGraph -&gt; Set UnitId)
-&gt; (UnitEnv -&gt; HomeUnitGraph) -&gt; UnitEnv -&gt; Set UnitId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnitGraph
</span><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span>
</span><span id="line-447"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-448"></span><span class="hs-comment">-- Query and modify the currently active unit</span><span>
</span><span id="line-449"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_currentHomeUnitEnv"><span class="hs-identifier hs-type">ue_currentHomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span>
</span><span id="line-452"></span><span id="ue_currentHomeUnitEnv"><span class="annot"><span class="annottext">ue_currentHomeUnitEnv :: HasDebugCallStack =&gt; UnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_currentHomeUnitEnv"><span class="hs-identifier hs-var hs-var">ue_currentHomeUnitEnv</span></a></span></span><span> </span><span id="local-6989586621682934059"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934059"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; UnitEnv -&gt; Maybe HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv_maybe"><span class="hs-identifier hs-var">ue_findHomeUnitEnv_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var">ue_currentUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934059"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934059"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-454"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682934060"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934060"><span class="hs-identifier hs-var">unitEnv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934060"><span class="hs-identifier hs-var">unitEnv</span></a></span><span>
</span><span id="line-455"></span><span>    </span><span class="annot"><span class="annottext">Maybe HomeUnitEnv
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; HomeUnitEnv
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;packageNotFound&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; HomeUnitEnv) -&gt; SDoc -&gt; HomeUnitEnv
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-456"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(UnitId -&gt; SDoc) -&gt; UnitId -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var">ue_currentUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934059"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnitGraph
</span><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934059"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_setActiveUnit"><span class="hs-identifier hs-type">ue_setActiveUnit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-459"></span><span id="ue_setActiveUnit"><span class="annot"><span class="annottext">ue_setActiveUnit :: UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_setActiveUnit"><span class="hs-identifier hs-var hs-var">ue_setActiveUnit</span></a></span></span><span> </span><span id="local-6989586621682934062"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934062"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682934063"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934063"><span class="hs-identifier hs-var">ue_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitEnv -&gt; UnitEnv
UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#assertUnitEnvInvariant"><span class="hs-identifier hs-var">assertUnitEnvInvariant</span></a></span><span> </span><span class="annot"><span class="annottext">(UnitEnv -&gt; UnitEnv) -&gt; UnitEnv -&gt; UnitEnv
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934063"><span class="hs-identifier hs-var">ue_env</span></a></span><span>
</span><span id="line-460"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_current_unit"><span class="hs-identifier hs-var">ue_current_unit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682934062"><span class="hs-identifier hs-type">u</span></a></span><span>
</span><span id="line-461"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-type">ue_currentUnit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-464"></span><span id="ue_currentUnit"><span class="annot"><span class="annottext">ue_currentUnit :: UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var hs-var">ue_currentUnit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_current_unit"><span class="hs-identifier hs-var">ue_current_unit</span></a></span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-468"></span><span class="hs-comment">-- Operations on arbitrary elements of the home unit graph</span><span>
</span><span id="line-469"></span><span class="hs-comment">-- -------------------------------------------------------</span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv_maybe"><span class="hs-identifier hs-type">ue_findHomeUnitEnv_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span>
</span><span id="line-472"></span><span id="ue_findHomeUnitEnv_maybe"><span class="annot"><span class="annottext">ue_findHomeUnitEnv_maybe :: UnitId -&gt; UnitEnv -&gt; Maybe HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv_maybe"><span class="hs-identifier hs-var hs-var">ue_findHomeUnitEnv_maybe</span></a></span></span><span> </span><span id="local-6989586621682934064"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934064"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934065"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934065"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-473"></span><span>  </span><span class="annot"><span class="annottext">UnitId -&gt; HomeUnitGraph -&gt; Maybe HomeUnitEnv
forall v. UnitId -&gt; UnitEnvGraph v -&gt; Maybe v
</span><a href="GHC.Unit.Env.html#unitEnv_lookup_maybe"><span class="hs-identifier hs-var">unitEnv_lookup_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934064"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnitGraph
</span><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934065"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv"><span class="hs-identifier hs-type">ue_findHomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span>
</span><span id="line-476"></span><span id="ue_findHomeUnitEnv"><span class="annot"><span class="annottext">ue_findHomeUnitEnv :: HasDebugCallStack =&gt; UnitId -&gt; UnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv"><span class="hs-identifier hs-var hs-var">ue_findHomeUnitEnv</span></a></span></span><span> </span><span id="local-6989586621682934075"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934075"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934076"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934076"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; HomeUnitGraph -&gt; Maybe HomeUnitEnv
forall v. UnitId -&gt; UnitEnvGraph v -&gt; Maybe v
</span><a href="GHC.Unit.Env.html#unitEnv_lookup_maybe"><span class="hs-identifier hs-var">unitEnv_lookup_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934075"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnitGraph
</span><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934076"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-477"></span><span>  </span><span class="annot"><span class="annottext">Maybe HomeUnitEnv
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; HomeUnitEnv
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unit unknown to the internal unit environment&quot;</span></span><span>
</span><span id="line-478"></span><span>              </span><span class="annot"><span class="annottext">(SDoc -&gt; HomeUnitEnv) -&gt; SDoc -&gt; HomeUnitEnv
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>  </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unit (&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934075"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-479"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; SDoc
</span><a href="GHC.Unit.Env.html#pprUnitEnvGraph"><span class="hs-identifier hs-var">pprUnitEnvGraph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934076"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-480"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682934080"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934080"><span class="hs-identifier hs-var">hue</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934080"><span class="hs-identifier hs-var">hue</span></a></span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_updateHomeUnitEnv"><span class="hs-identifier hs-type">ue_updateHomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-483"></span><span id="ue_updateHomeUnitEnv"><span class="annot"><span class="annottext">ue_updateHomeUnitEnv :: (HomeUnitEnv -&gt; HomeUnitEnv) -&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_updateHomeUnitEnv"><span class="hs-identifier hs-var hs-var">ue_updateHomeUnitEnv</span></a></span></span><span> </span><span id="local-6989586621682934081"><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomeUnitEnv
</span><a href="#local-6989586621682934081"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682934082"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934082"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934083"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934083"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934083"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-484"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_adjust"><span class="hs-identifier hs-type">unitEnv_adjust</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934081"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934082"><span class="hs-identifier hs-type">uid</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934083"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-485"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-comment">-- | Rename a unit id in the internal unit env.</span><span>
</span><span id="line-489"></span><span class="hs-comment">--</span><span>
</span><span id="line-490"></span><span class="hs-comment">-- @'ue_renameUnitId' oldUnit newUnit UnitEnv@, it is assumed that the 'oldUnit' exists in the map,</span><span>
</span><span id="line-491"></span><span class="hs-comment">-- otherwise we panic.</span><span>
</span><span id="line-492"></span><span class="hs-comment">-- The 'DynFlags' associated with the home unit will have its field 'homeUnitId' set to 'newUnit'.</span><span>
</span><span id="line-493"></span><span class="annot"><a href="GHC.Unit.Env.html#ue_renameUnitId"><span class="hs-identifier hs-type">ue_renameUnitId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-494"></span><span id="ue_renameUnitId"><span class="annot"><span class="annottext">ue_renameUnitId :: HasDebugCallStack =&gt; UnitId -&gt; UnitId -&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#ue_renameUnitId"><span class="hs-identifier hs-var hs-var">ue_renameUnitId</span></a></span></span><span> </span><span id="local-6989586621682934101"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934101"><span class="hs-identifier hs-var">oldUnit</span></a></span></span><span> </span><span id="local-6989586621682934102"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934102"><span class="hs-identifier hs-var">newUnit</span></a></span></span><span> </span><span id="local-6989586621682934103"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934103"><span class="hs-identifier hs-var">unitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; UnitEnv -&gt; Maybe HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv_maybe"><span class="hs-identifier hs-var">ue_findHomeUnitEnv_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934101"><span class="hs-identifier hs-var">oldUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934103"><span class="hs-identifier hs-var">unitEnv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-495"></span><span>  </span><span class="annot"><span class="annottext">Maybe HomeUnitEnv
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-496"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; UnitEnv
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Tried to rename unit, but it didn't exist&quot;</span></span><span>
</span><span id="line-497"></span><span>              </span><span class="annot"><span class="annottext">(SDoc -&gt; UnitEnv) -&gt; SDoc -&gt; UnitEnv
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rename old unit \&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934101"><span class="hs-identifier hs-var">oldUnit</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\&quot; to \&quot;&quot;</span></span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934102"><span class="hs-identifier hs-var">newUnit</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span>
</span><span id="line-498"></span><span>              </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; SDoc
</span><a href="GHC.Unit.Env.html#pprUnitEnvGraph"><span class="hs-identifier hs-var">pprUnitEnvGraph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934103"><span class="hs-identifier hs-var">unitEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-499"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682934105"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934105"><span class="hs-identifier hs-var">oldEnv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-500"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-501"></span><span>      </span><span class="annot"><a href="#local-6989586621682934106"><span class="hs-identifier hs-type">activeUnit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-502"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621682934106"><span class="annot"><span class="annottext">activeUnit :: UnitId
</span><a href="#local-6989586621682934106"><span class="hs-identifier hs-var hs-var">activeUnit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var">ue_currentUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934103"><span class="hs-identifier hs-var">unitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; UnitId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934101"><span class="hs-identifier hs-var">oldUnit</span></a></span><span>
</span><span id="line-503"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934102"><span class="hs-identifier hs-var">newUnit</span></a></span><span>
</span><span id="line-504"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var">ue_currentUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934103"><span class="hs-identifier hs-var">unitEnv</span></a></span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span>      </span><span id="local-6989586621682934107"><span class="annot"><span class="annottext">newInternalUnitEnv :: HomeUnitEnv
</span><a href="#local-6989586621682934107"><span class="hs-identifier hs-var hs-var">newInternalUnitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934105"><span class="hs-identifier hs-var">oldEnv</span></a></span><span>
</span><span id="line-507"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_dflags"><span class="hs-identifier hs-var">homeUnitEnv_dflags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Env.html#homeUnitEnv_dflags"><span class="hs-identifier hs-var">homeUnitEnv_dflags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934105"><span class="hs-identifier hs-type">oldEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#homeUnitId_"><span class="hs-identifier hs-var">homeUnitId_</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682934102"><span class="hs-identifier hs-type">newUnit</span></a></span><span>
</span><span id="line-509"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-510"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-keyword">in</span><span>
</span><span id="line-512"></span><span>    </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934103"><span class="hs-identifier hs-var">unitEnv</span></a></span><span>
</span><span id="line-513"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_current_unit"><span class="hs-identifier hs-var">ue_current_unit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682934106"><span class="hs-identifier hs-type">activeUnit</span></a></span><span>
</span><span id="line-514"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-515"></span><span>          </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_insert"><span class="hs-identifier hs-type">unitEnv_insert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934102"><span class="hs-identifier hs-type">newUnit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934107"><span class="hs-identifier hs-type">newInternalUnitEnv</span></a></span><span>
</span><span id="line-516"></span><span>          </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#unitEnv_delete"><span class="hs-identifier hs-type">unitEnv_delete</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934101"><span class="hs-identifier hs-type">oldUnit</span></a></span><span>
</span><span id="line-517"></span><span>          </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682934103"><span class="hs-identifier hs-type">unitEnv</span></a></span><span>
</span><span id="line-518"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-519"></span><span>
</span><span id="line-520"></span><span class="hs-comment">-- ---------------------------------------------</span><span>
</span><span id="line-521"></span><span class="hs-comment">-- Asserts to enforce invariants for the UnitEnv</span><span>
</span><span id="line-522"></span><span class="hs-comment">-- ---------------------------------------------</span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span class="annot"><a href="GHC.Unit.Env.html#assertUnitEnvInvariant"><span class="hs-identifier hs-type">assertUnitEnvInvariant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span>
</span><span id="line-525"></span><span id="assertUnitEnvInvariant"><span class="annot"><span class="annottext">assertUnitEnvInvariant :: HasDebugCallStack =&gt; UnitEnv -&gt; UnitEnv
</span><a href="GHC.Unit.Env.html#assertUnitEnvInvariant"><span class="hs-identifier hs-var hs-var">assertUnitEnvInvariant</span></a></span></span><span> </span><span id="local-6989586621682934115"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934115"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-526"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_current_unit"><span class="hs-identifier hs-var">ue_current_unit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934115"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; HomeUnitGraph -&gt; Bool
forall v. UnitId -&gt; UnitEnvGraph v -&gt; Bool
</span><a href="GHC.Unit.Env.html#unitEnv_member"><span class="hs-operator hs-var">`unitEnv_member`</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnitGraph
</span><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934115"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-527"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934115"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-528"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; UnitEnv
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;invariant&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_current_unit"><span class="hs-identifier hs-var">ue_current_unit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934115"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnitGraph
</span><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934115"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-531"></span><span class="hs-comment">-- Pretty output functions</span><span>
</span><span id="line-532"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-533"></span><span>
</span><span id="line-534"></span><span class="annot"><a href="GHC.Unit.Env.html#pprUnitEnvGraph"><span class="hs-identifier hs-type">pprUnitEnvGraph</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-535"></span><span id="pprUnitEnvGraph"><span class="annot"><span class="annottext">pprUnitEnvGraph :: UnitEnv -&gt; SDoc
</span><a href="GHC.Unit.Env.html#pprUnitEnvGraph"><span class="hs-identifier hs-var hs-var">pprUnitEnvGraph</span></a></span></span><span> </span><span id="local-6989586621682934116"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934116"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pprInternalUnitMap&quot;</span></span><span>
</span><span id="line-536"></span><span>  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnitGraph -&gt; SDoc
</span><a href="GHC.Unit.Env.html#pprHomeUnitGraph"><span class="hs-identifier hs-var">pprHomeUnitGraph</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeUnitGraph -&gt; SDoc) -&gt; HomeUnitGraph -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; HomeUnitGraph
</span><a href="GHC.Unit.Env.html#ue_home_unit_graph"><span class="hs-identifier hs-var">ue_home_unit_graph</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682934116"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span class="annot"><a href="GHC.Unit.Env.html#pprHomeUnitGraph"><span class="hs-identifier hs-type">pprHomeUnitGraph</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitGraph"><span class="hs-identifier hs-type">HomeUnitGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-539"></span><span id="pprHomeUnitGraph"><span class="annot"><span class="annottext">pprHomeUnitGraph :: HomeUnitGraph -&gt; SDoc
</span><a href="GHC.Unit.Env.html#pprHomeUnitGraph"><span class="hs-identifier hs-var hs-var">pprHomeUnitGraph</span></a></span></span><span> </span><span id="local-6989586621682934118"><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682934118"><span class="hs-identifier hs-var">unitEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((UnitId, HomeUnitEnv) -&gt; SDoc)
-&gt; [(UnitId, HomeUnitEnv)] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682934120"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934120"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682934121"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934121"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; HomeUnitEnv -&gt; SDoc
</span><a href="GHC.Unit.Env.html#pprHomeUnitEnv"><span class="hs-identifier hs-var">pprHomeUnitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934120"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934121"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(UnitId, HomeUnitEnv)] -&gt; [SDoc])
-&gt; [(UnitId, HomeUnitEnv)] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map UnitId HomeUnitEnv -&gt; [(UnitId, HomeUnitEnv)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#assocs"><span class="hs-identifier hs-var">Map.assocs</span></a></span><span> </span><span class="annot"><span class="annottext">(Map UnitId HomeUnitEnv -&gt; [(UnitId, HomeUnitEnv)])
-&gt; Map UnitId HomeUnitEnv -&gt; [(UnitId, HomeUnitEnv)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph -&gt; Map UnitId HomeUnitEnv
forall v. UnitEnvGraph v -&gt; Map UnitId v
</span><a href="GHC.Unit.Env.html#unitEnv_graph"><span class="hs-identifier hs-var">unitEnv_graph</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitGraph
</span><a href="#local-6989586621682934118"><span class="hs-identifier hs-var">unitEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-540"></span><span>
</span><span id="line-541"></span><span class="annot"><a href="GHC.Unit.Env.html#pprHomeUnitEnv"><span class="hs-identifier hs-type">pprHomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#HomeUnitEnv"><span class="hs-identifier hs-type">HomeUnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-542"></span><span id="pprHomeUnitEnv"><span class="annot"><span class="annottext">pprHomeUnitEnv :: UnitId -&gt; HomeUnitEnv -&gt; SDoc
</span><a href="GHC.Unit.Env.html#pprHomeUnitEnv"><span class="hs-identifier hs-var hs-var">pprHomeUnitEnv</span></a></span></span><span> </span><span id="local-6989586621682934124"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934124"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621682934125"><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934125"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-543"></span><span>  </span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682934124"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(flags:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; UnitId
</span><a href="GHC.Driver.DynFlags.html#homeUnitId_"><span class="hs-identifier hs-var">homeUnitId_</span></a></span><span> </span><span class="annot"><span class="annottext">(DynFlags -&gt; UnitId) -&gt; DynFlags -&gt; UnitId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; DynFlags
</span><a href="GHC.Unit.Env.html#homeUnitEnv_dflags"><span class="hs-identifier hs-var">homeUnitEnv_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934125"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HomeUnit -&gt; UnitId) -&gt; Maybe HomeUnit -&gt; Maybe UnitId
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">HomeUnit -&gt; UnitId
forall u. GenHomeUnit u -&gt; UnitId
</span><a href="GHC.Unit.Home.html#homeUnitId"><span class="hs-identifier hs-var">homeUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe HomeUnit -&gt; Maybe UnitId) -&gt; Maybe HomeUnit -&gt; Maybe UnitId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; Maybe HomeUnit
</span><a href="GHC.Unit.Env.html#homeUnitEnv_home_unit"><span class="hs-identifier hs-var">homeUnitEnv_home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934125"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span>
</span><span id="line-544"></span><span>  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomePackageTable -&gt; SDoc
</span><a href="GHC.Unit.Home.ModInfo.html#pprHPT"><span class="hs-identifier hs-var">pprHPT</span></a></span><span> </span><span class="annot"><span class="annottext">(HomePackageTable -&gt; SDoc) -&gt; HomePackageTable -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; HomePackageTable
</span><a href="GHC.Unit.Env.html#homeUnitEnv_hpt"><span class="hs-identifier hs-var">homeUnitEnv_hpt</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnitEnv
</span><a href="#local-6989586621682934125"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-545"></span><span>
</span><span id="line-546"></span><span class="hs-comment">{-
Note [Multiple Home Units]
~~~~~~~~~~~~~~~~~~~~~~~~~~
The basic idea of multiple home units is quite simple. Instead of allowing one
home unit, you can multiple home units

The flow:

1. Dependencies between units are specified between each other in the normal manner,
   a unit is identified by the -this-unit-id flag and dependencies specified by
   the normal -package-id flag.
2. Downsweep is augmented to know to know how to look for dependencies in any home unit.
3. The rest of the compiler is modified appropriately to offset paths to the right places.
4. --make mode can parallelise between home units and multiple units are allowed to produce linkables.

Closure Property
----------------

You must perform a clean cut of the dependency graph.

&gt; Any dependency which is not a home unit must not (transitively) depend on a home unit.

For example, if you have three packages p, q and r, then if p depends on q which
depends on r then it is illegal to load both p and r as home units but not q,
because q is a dependency of the home unit p which depends on another home unit r.

Offsetting Paths
----------------

The main complication to the implementation is to do with offsetting paths appropriately.
For a long time it has been assumed that GHC will execute in the top-directory for a unit,
normally where the .cabal file is and all paths are interpreted relative to there.
When you have multiple home units then it doesn't make sense to pick one of these
units to choose as the base-unit, and you can't robustly change directories when
using parallelism.

Therefore there is an option `-working-directory`, which tells GHC where the relative
paths for each unit should be interpreted relative to. For example, if you specify
`-working-dir a -ib`, then GHC will offset the relative path `b`, by `a`, and look for
source files in `a/b`. The same thing happens for any path passed on the command line.

A non-exhaustive list is

* -i
* -I
* -odir/-hidir/-outputdir/-stubdir/-hiedir
* Target files passed on the command line

There is also a template-haskell function, makeRelativeToProject, which uses the `-working-directory` option
in order to allow users to offset their own relative paths.

-}</span><span>
</span><span id="line-598"></span></pre></body></html>