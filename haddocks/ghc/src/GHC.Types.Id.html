<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998

\section[Id]{@Ids@: Value and constructor identifiers}
-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- #name_types#</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- GHC uses several kinds of name internally:</span><span>
</span><span id="line-13"></span><span class="hs-comment">--</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- * 'GHC.Types.Name.Occurrence.OccName': see &quot;GHC.Types.Name.Occurrence#name_types&quot;</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- * 'GHC.Types.Name.Reader.RdrName': see &quot;GHC.Types.Name.Reader#name_types&quot;</span><span>
</span><span id="line-17"></span><span class="hs-comment">--</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- * 'GHC.Types.Name.Name': see &quot;GHC.Types.Name#name_types&quot;</span><span>
</span><span id="line-19"></span><span class="hs-comment">--</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- * 'GHC.Types.Id.Id' represents names that not only have a 'GHC.Types.Name.Name' but also a</span><span>
</span><span id="line-21"></span><span class="hs-comment">--   'GHC.Core.TyCo.Rep.Type' and some additional details (a 'GHC.Types.Id.Info.IdInfo' and</span><span>
</span><span id="line-22"></span><span class="hs-comment">--   one of LocalIdDetails or GlobalIdDetails) that are added,</span><span>
</span><span id="line-23"></span><span class="hs-comment">--   modified and inspected by various compiler passes. These 'GHC.Types.Var.Var' names</span><span>
</span><span id="line-24"></span><span class="hs-comment">--   may either be global or local, see &quot;GHC.Types.Var#globalvslocal&quot;</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- * 'GHC.Types.Var.Var': see &quot;GHC.Types.Var#name_types&quot;</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><span class="hs-comment">-- * The main types</span></span><span>
</span><span id="line-30"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier">Var</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier">Id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#isId"><span class="hs-identifier">isId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><span class="hs-comment">-- * In and Out variants</span></span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#InVar"><span class="hs-identifier">InVar</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="GHC.Types.Var.html#InId"><span class="hs-identifier">InId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#OutVar"><span class="hs-identifier">OutVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#OutId"><span class="hs-identifier">OutId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Simple construction</span></span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#mkGlobalId"><span class="hs-identifier">mkGlobalId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkVanillaGlobal"><span class="hs-identifier">mkVanillaGlobal</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkVanillaGlobalWithInfo"><span class="hs-identifier">mkVanillaGlobalWithInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#mkLocalId"><span class="hs-identifier">mkLocalId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkLocalCoVar"><span class="hs-identifier">mkLocalCoVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkLocalIdOrCoVar"><span class="hs-identifier">mkLocalIdOrCoVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#mkLocalIdWithInfo"><span class="hs-identifier">mkLocalIdWithInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkExportedLocalId"><span class="hs-identifier">mkExportedLocalId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkExportedVanillaId"><span class="hs-identifier">mkExportedVanillaId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#mkSysLocal"><span class="hs-identifier">mkSysLocal</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkSysLocalM"><span class="hs-identifier">mkSysLocalM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkSysLocalOrCoVar"><span class="hs-identifier">mkSysLocalOrCoVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkSysLocalOrCoVarM"><span class="hs-identifier">mkSysLocalOrCoVarM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#mkUserLocal"><span class="hs-identifier">mkUserLocal</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkUserLocalOrCoVar"><span class="hs-identifier">mkUserLocalOrCoVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#mkTemplateLocals"><span class="hs-identifier">mkTemplateLocals</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkTemplateLocalsNum"><span class="hs-identifier">mkTemplateLocalsNum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#mkTemplateLocal"><span class="hs-identifier">mkTemplateLocal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#mkScaledTemplateLocal"><span class="hs-identifier">mkScaledTemplateLocal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#mkWorkerId"><span class="hs-identifier">mkWorkerId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Taking an Id apart</span></span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idName"><span class="hs-identifier">idName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idType"><span class="hs-identifier">idType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idMult"><span class="hs-identifier">idMult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idScaledType"><span class="hs-identifier">idScaledType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idUnique"><span class="hs-identifier">idUnique</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier">idInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier">idDetails</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#recordSelectorTyCon"><span class="hs-identifier">recordSelectorTyCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#recordSelectorTyCon_maybe"><span class="hs-identifier">recordSelectorTyCon_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Modifying an Id</span></span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdName"><span class="hs-identifier">setIdName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#setIdUnique"><span class="hs-identifier">setIdUnique</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#setIdType"><span class="hs-identifier">GHC.Types.Id.setIdType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#setIdMult"><span class="hs-identifier">setIdMult</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#updateIdTypeButNotMult"><span class="hs-identifier">updateIdTypeButNotMult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#updateIdTypeAndMult"><span class="hs-identifier">updateIdTypeAndMult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#updateIdTypeAndMultM"><span class="hs-identifier">updateIdTypeAndMultM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdExported"><span class="hs-identifier">setIdExported</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#setIdNotExported"><span class="hs-identifier">setIdNotExported</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#globaliseId"><span class="hs-identifier">globaliseId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#localiseId"><span class="hs-identifier">localiseId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdInfo"><span class="hs-identifier">setIdInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#lazySetIdInfo"><span class="hs-identifier">lazySetIdInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier">modifyIdInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#maybeModifyIdInfo"><span class="hs-identifier">maybeModifyIdInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#zapLamIdInfo"><span class="hs-identifier">zapLamIdInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#floatifyIdDemandInfo"><span class="hs-identifier">floatifyIdDemandInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#zapIdUsageInfo"><span class="hs-identifier">zapIdUsageInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#zapIdUsageEnvInfo"><span class="hs-identifier">zapIdUsageEnvInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#zapIdUsedOnceInfo"><span class="hs-identifier">zapIdUsedOnceInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#zapIdTailCallInfo"><span class="hs-identifier">zapIdTailCallInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#zapFragileIdInfo"><span class="hs-identifier">zapFragileIdInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#zapIdDmdSig"><span class="hs-identifier">zapIdDmdSig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#zapStableUnfolding"><span class="hs-identifier">zapStableUnfolding</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#transferPolyIdInfo"><span class="hs-identifier">transferPolyIdInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#scaleIdBy"><span class="hs-identifier">scaleIdBy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#scaleVarBy"><span class="hs-identifier">scaleVarBy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Predicates on Ids</span></span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isImplicitId"><span class="hs-identifier">isImplicitId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#isDeadBinder"><span class="hs-identifier">isDeadBinder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isStrictId"><span class="hs-identifier">isStrictId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#isExportedId"><span class="hs-identifier">isExportedId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#isLocalId"><span class="hs-identifier">isLocalId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#isGlobalId"><span class="hs-identifier">isGlobalId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isRecordSelector"><span class="hs-identifier">isRecordSelector</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#isNaughtyRecordSelector"><span class="hs-identifier">isNaughtyRecordSelector</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isPatSynRecordSelector"><span class="hs-identifier">isPatSynRecordSelector</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isDataConRecordSelector"><span class="hs-identifier">isDataConRecordSelector</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isClassOpId"><span class="hs-identifier">isClassOpId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isClassOpId_maybe"><span class="hs-identifier">isClassOpId_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#isDFunId"><span class="hs-identifier">isDFunId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isPrimOpId"><span class="hs-identifier">isPrimOpId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#isPrimOpId_maybe"><span class="hs-identifier">isPrimOpId_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isFCallId"><span class="hs-identifier">isFCallId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#isFCallId_maybe"><span class="hs-identifier">isFCallId_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isDataConWorkId"><span class="hs-identifier">isDataConWorkId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#isDataConWorkId_maybe"><span class="hs-identifier">isDataConWorkId_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isDataConWrapId"><span class="hs-identifier">isDataConWrapId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#isDataConWrapId_maybe"><span class="hs-identifier">isDataConWrapId_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isDataConId"><span class="hs-identifier">isDataConId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#isDataConId_maybe"><span class="hs-identifier">isDataConId_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idDataCon"><span class="hs-identifier">idDataCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isConLikeId"><span class="hs-identifier">isConLikeId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#isWorkerLikeId"><span class="hs-identifier">isWorkerLikeId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#isDeadEndId"><span class="hs-identifier">isDeadEndId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idIsFrom"><span class="hs-identifier">idIsFrom</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#hasNoBinding"><span class="hs-identifier">hasNoBinding</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Join variables</span></span><span>
</span><span id="line-81"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#JoinId"><span class="hs-identifier">JoinId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#JoinPointHood"><span class="hs-identifier">JoinPointHood</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier">isJoinId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idJoinPointHood"><span class="hs-identifier">idJoinPointHood</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idJoinArity"><span class="hs-identifier">idJoinArity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#asJoinId"><span class="hs-identifier">asJoinId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#asJoinId_maybe"><span class="hs-identifier">asJoinId_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#zapJoinId"><span class="hs-identifier">zapJoinId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Inline pragma stuff</span></span><span>
</span><span id="line-86"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idInlinePragma"><span class="hs-identifier">idInlinePragma</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#setInlinePragma"><span class="hs-identifier">setInlinePragma</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#modifyInlinePragma"><span class="hs-identifier">modifyInlinePragma</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idInlineActivation"><span class="hs-identifier">idInlineActivation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#setInlineActivation"><span class="hs-identifier">setInlineActivation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idRuleMatchInfo"><span class="hs-identifier">idRuleMatchInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** One-shot lambdas</span></span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setOneShotLambda"><span class="hs-identifier">setOneShotLambda</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#clearOneShotLambda"><span class="hs-identifier">clearOneShotLambda</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#updOneShotInfo"><span class="hs-identifier">updOneShotInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#setIdOneShotInfo"><span class="hs-identifier">setIdOneShotInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Reading 'IdInfo' fields</span></span><span>
</span><span id="line-94"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idArity"><span class="hs-identifier">idArity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idCallArity"><span class="hs-identifier">idCallArity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idFunRepArity"><span class="hs-identifier">idFunRepArity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idSpecialisation"><span class="hs-identifier">idSpecialisation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idCoreRules"><span class="hs-identifier">idCoreRules</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idHasRules"><span class="hs-identifier">idHasRules</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idCafInfo"><span class="hs-identifier">idCafInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idLFInfo_maybe"><span class="hs-identifier">idLFInfo_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idOneShotInfo"><span class="hs-identifier">idOneShotInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idOccInfo"><span class="hs-identifier">idOccInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span>        </span><span class="annot"><a href="GHC.Core.html#IdUnfoldingFun"><span class="hs-identifier">IdUnfoldingFun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#idUnfolding"><span class="hs-identifier">idUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#realIdUnfolding"><span class="hs-identifier">realIdUnfolding</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#alwaysActiveUnfoldingFun"><span class="hs-identifier">alwaysActiveUnfoldingFun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#whenActiveUnfoldingFun"><span class="hs-identifier">whenActiveUnfoldingFun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#noUnfoldingFun"><span class="hs-identifier">noUnfoldingFun</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Writing 'IdInfo' fields</span></span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdUnfolding"><span class="hs-identifier">setIdUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#zapIdUnfolding"><span class="hs-identifier">zapIdUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#setCaseBndrEvald"><span class="hs-identifier">setCaseBndrEvald</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdArity"><span class="hs-identifier">setIdArity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdCallArity"><span class="hs-identifier">setIdCallArity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdSpecialisation"><span class="hs-identifier">setIdSpecialisation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdCafInfo"><span class="hs-identifier">setIdCafInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdOccInfo"><span class="hs-identifier">setIdOccInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#zapIdOccInfo"><span class="hs-identifier">zapIdOccInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdLFInfo"><span class="hs-identifier">setIdLFInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdDemandInfo"><span class="hs-identifier">setIdDemandInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdDmdSig"><span class="hs-identifier">setIdDmdSig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdCprSig"><span class="hs-identifier">setIdCprSig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdCbvMarks"><span class="hs-identifier">setIdCbvMarks</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idCbvMarks_maybe"><span class="hs-identifier">idCbvMarks_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idCbvMarkArity"><span class="hs-identifier">idCbvMarkArity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#asWorkerLikeId"><span class="hs-identifier">asWorkerLikeId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#asNonWorkerLikeId"><span class="hs-identifier">asNonWorkerLikeId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idDemandInfo"><span class="hs-identifier">idDemandInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idDmdSig"><span class="hs-identifier">idDmdSig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idCprSig"><span class="hs-identifier">idCprSig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#idTagSig_maybe"><span class="hs-identifier">idTagSig_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.html#setIdTagSig"><span class="hs-identifier">setIdTagSig</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier">CoreRule</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isStableUnfolding"><span class="hs-identifier">isStableUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#evaldUnfolding"><span class="hs-identifier">evaldUnfolding</span></a></span><span>
</span><span id="line-133"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isCompulsoryUnfolding"><span class="hs-identifier">isCompulsoryUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier">Unfolding</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier">NoUnfolding</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#IdUnfoldingFun"><span class="hs-identifier">IdUnfoldingFun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isEvaldUnfolding"><span class="hs-identifier">isEvaldUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#hasSomeUnfolding"><span class="hs-identifier">hasSomeUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#noUnfolding"><span class="hs-identifier">noUnfolding</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html"><span class="hs-identifier">GHC.Types.Id.Info</span></a></span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-comment">-- Imported and re-exported</span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier">Id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier">CoVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#JoinId"><span class="hs-identifier">JoinId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>            </span><span class="annot"><a href="GHC.Types.Var.html#InId"><span class="hs-identifier">InId</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="GHC.Types.Var.html#InVar"><span class="hs-identifier">InVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>            </span><span class="annot"><a href="GHC.Types.Var.html#OutId"><span class="hs-identifier">OutId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#OutVar"><span class="hs-identifier">OutVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-143"></span><span>            </span><span class="annot"><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier">idInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier">idDetails</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#setIdDetails"><span class="hs-identifier">setIdDetails</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#globaliseId"><span class="hs-identifier">globaliseId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-144"></span><span>            </span><span class="annot"><a href="GHC.Types.Var.html#isId"><span class="hs-identifier">isId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#isLocalId"><span class="hs-identifier">isLocalId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#isGlobalId"><span class="hs-identifier">isGlobalId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#isExportedId"><span class="hs-identifier">isExportedId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>            </span><span class="annot"><a href="GHC.Types.Var.html#setIdMult"><span class="hs-identifier">setIdMult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#updateIdTypeAndMult"><span class="hs-identifier">updateIdTypeAndMult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#updateIdTypeButNotMult"><span class="hs-identifier">updateIdTypeButNotMult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#updateIdTypeAndMultM"><span class="hs-identifier">updateIdTypeAndMultM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Var</span></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-149"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html"><span class="hs-identifier">GHC.Core.Predicate</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#isCoVarType"><span class="hs-identifier">isCoVarType</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-151"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Class.html"><span class="hs-identifier">GHC.Core.Class</span></a></span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html"><span class="hs-identifier">GHC.Core.Multiplicity</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.RepType.html"><span class="hs-identifier">GHC.Types.RepType</span></a></span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Demand.html"><span class="hs-identifier">GHC.Types.Demand</span></a></span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Cpr.html"><span class="hs-identifier">GHC.Types.Cpr</span></a></span><span>
</span><span id="line-157"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-158"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html"><span class="hs-identifier">GHC.Types.ForeignCall</span></a></span><span>
</span><span id="line-159"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-160"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html"><span class="hs-identifier">GHC.Types.Unique</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Stg.InferTags.TagSig.html"><span class="hs-identifier">GHC.Stg.InferTags.TagSig</span></a></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-165"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Builtin.PrimOps.html"><span class="hs-identifier">GHC.Builtin.PrimOps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Builtin.PrimOps.html#PrimOp"><span class="hs-identifier">PrimOp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Uniques.html"><span class="hs-identifier">GHC.Builtin.Uniques</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Builtin.Uniques.html#mkBuiltinUnique"><span class="hs-identifier">mkBuiltinUnique</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Supply.html"><span class="hs-identifier">GHC.Types.Unique.Supply</span></a></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-170"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-173"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-174"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="hs-comment">-- infixl so you can say (id `set` a `set` b)</span><span>
</span><span id="line-177"></span><span class="hs-keyword">infixl</span><span>  </span><span class="hs-number">1</span><span> </span><span class="annot"><a href="GHC.Types.Id.html#setIdUnfolding"><span class="hs-operator hs-type">`setIdUnfolding`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-178"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setIdArity"><span class="hs-operator hs-type">`setIdArity`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-179"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setIdCallArity"><span class="hs-operator hs-type">`setIdCallArity`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-180"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setIdOccInfo"><span class="hs-operator hs-type">`setIdOccInfo`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-181"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setIdOneShotInfo"><span class="hs-operator hs-type">`setIdOneShotInfo`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setIdSpecialisation"><span class="hs-operator hs-type">`setIdSpecialisation`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-184"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setInlinePragma"><span class="hs-operator hs-type">`setInlinePragma`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-185"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setInlineActivation"><span class="hs-operator hs-type">`setInlineActivation`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-186"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#idCafInfo"><span class="hs-operator hs-type">`idCafInfo`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setIdDemandInfo"><span class="hs-operator hs-type">`setIdDemandInfo`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-189"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setIdDmdSig"><span class="hs-operator hs-type">`setIdDmdSig`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-190"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setIdCprSig"><span class="hs-operator hs-type">`setIdCprSig`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#asJoinId"><span class="hs-operator hs-type">`asJoinId`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-193"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#asJoinId_maybe"><span class="hs-operator hs-type">`asJoinId_maybe`</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-194"></span><span>          </span><span class="annot"><a href="GHC.Types.Id.html#setIdCbvMarks"><span class="hs-operator hs-type">`setIdCbvMarks`</span></a></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Basic Id manipulation}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="annot"><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-type">idName</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-205"></span><span id="idName"><span class="annot"><span class="annottext">idName :: Id -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var hs-var">idName</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Var.html#varName"><span class="hs-identifier hs-var">Var.varName</span></a></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="annot"><a href="GHC.Types.Id.html#idUnique"><span class="hs-identifier hs-type">idUnique</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span>
</span><span id="line-208"></span><span id="idUnique"><span class="annot"><span class="annottext">idUnique :: Id -&gt; Unique
</span><a href="GHC.Types.Id.html#idUnique"><span class="hs-identifier hs-var hs-var">idUnique</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Unique
</span><a href="GHC.Types.Var.html#varUnique"><span class="hs-identifier hs-var">Var.varUnique</span></a></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="annot"><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-type">idType</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span>
</span><span id="line-211"></span><span id="idType"><span class="annot"><span class="annottext">idType :: Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var hs-var">idType</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">Var.varType</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="annot"><a href="GHC.Types.Id.html#idMult"><span class="hs-identifier hs-type">idMult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span>
</span><span id="line-214"></span><span id="idMult"><span class="annot"><span class="annottext">idMult :: Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idMult"><span class="hs-identifier hs-var hs-var">idMult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#varMult"><span class="hs-identifier hs-var">Var.varMult</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="annot"><a href="GHC.Types.Id.html#idScaledType"><span class="hs-identifier hs-type">idScaledType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-217"></span><span id="idScaledType"><span class="annot"><span class="annottext">idScaledType :: Id -&gt; Scaled Kind
</span><a href="GHC.Types.Id.html#idScaledType"><span class="hs-identifier hs-var hs-var">idScaledType</span></a></span></span><span> </span><span id="local-6989586621682591018"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591018"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Scaled Kind
forall a. Kind -&gt; a -&gt; Scaled a
</span><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-var">Scaled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idMult"><span class="hs-identifier hs-var">idMult</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591018"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591018"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="annot"><a href="GHC.Types.Id.html#scaleIdBy"><span class="hs-identifier hs-type">scaleIdBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-220"></span><span id="scaleIdBy"><span class="annot"><span class="annottext">scaleIdBy :: Kind -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#scaleIdBy"><span class="hs-identifier hs-var hs-var">scaleIdBy</span></a></span></span><span> </span><span id="local-6989586621682591020"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591020"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682591021"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591021"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Var.html#setIdMult"><span class="hs-identifier hs-var">setIdMult</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591021"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591020"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.Multiplicity.html#mkMultMul"><span class="hs-operator hs-var">`mkMultMul`</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idMult"><span class="hs-identifier hs-var">idMult</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591021"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-comment">-- | Like 'scaleIdBy', but skips non-Ids. Useful for scaling</span><span>
</span><span id="line-223"></span><span class="hs-comment">-- a mixed list of ids and tyvars.</span><span>
</span><span id="line-224"></span><span class="annot"><a href="GHC.Types.Id.html#scaleVarBy"><span class="hs-identifier hs-type">scaleVarBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>
</span><span id="line-225"></span><span id="scaleVarBy"><span class="annot"><span class="annottext">scaleVarBy :: Kind -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#scaleVarBy"><span class="hs-identifier hs-var hs-var">scaleVarBy</span></a></span></span><span> </span><span id="local-6989586621682591023"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591023"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682591024"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591024"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591024"><span class="hs-identifier hs-var">id</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#scaleIdBy"><span class="hs-identifier hs-var">scaleIdBy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591023"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591024"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591024"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="annot"><a href="GHC.Types.Id.html#setIdName"><span class="hs-identifier hs-type">setIdName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-230"></span><span id="setIdName"><span class="annot"><span class="annottext">setIdName :: Id -&gt; Name -&gt; Id
</span><a href="GHC.Types.Id.html#setIdName"><span class="hs-identifier hs-var hs-var">setIdName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name -&gt; Id
</span><a href="GHC.Types.Var.html#setVarName"><span class="hs-identifier hs-var">Var.setVarName</span></a></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="annot"><a href="GHC.Types.Id.html#setIdUnique"><span class="hs-identifier hs-type">setIdUnique</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-233"></span><span id="setIdUnique"><span class="annot"><span class="annottext">setIdUnique :: Id -&gt; Unique -&gt; Id
</span><a href="GHC.Types.Id.html#setIdUnique"><span class="hs-identifier hs-var hs-var">setIdUnique</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Unique -&gt; Id
</span><a href="GHC.Types.Var.html#setVarUnique"><span class="hs-identifier hs-var">Var.setVarUnique</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-comment">-- | Not only does this set the 'Id' 'Type', it also evaluates the type to try and</span><span>
</span><span id="line-236"></span><span class="hs-comment">-- reduce space usage</span><span>
</span><span id="line-237"></span><span class="annot"><a href="GHC.Types.Id.html#setIdType"><span class="hs-identifier hs-type">setIdType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-238"></span><span id="setIdType"><span class="annot"><span class="annottext">setIdType :: Id -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#setIdType"><span class="hs-identifier hs-var hs-var">setIdType</span></a></span></span><span> </span><span id="local-6989586621682591027"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591027"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591028"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591028"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ()
</span><a href="GHC.Core.Type.html#seqType"><span class="hs-identifier hs-var">seqType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591028"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Id -&gt; Id
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Var.html#setVarType"><span class="hs-identifier hs-var">Var.setVarType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591027"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591028"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="annot"><a href="GHC.Types.Id.html#setIdExported"><span class="hs-identifier hs-type">setIdExported</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-241"></span><span id="setIdExported"><span class="annot"><span class="annottext">setIdExported :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#setIdExported"><span class="hs-identifier hs-var hs-var">setIdExported</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Id
</span><a href="GHC.Types.Var.html#setIdExported"><span class="hs-identifier hs-var">Var.setIdExported</span></a></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="annot"><a href="GHC.Types.Id.html#setIdNotExported"><span class="hs-identifier hs-type">setIdNotExported</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-244"></span><span id="setIdNotExported"><span class="annot"><span class="annottext">setIdNotExported :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#setIdNotExported"><span class="hs-identifier hs-var hs-var">setIdNotExported</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Id
</span><a href="GHC.Types.Var.html#setIdNotExported"><span class="hs-identifier hs-var">Var.setIdNotExported</span></a></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="annot"><a href="GHC.Types.Id.html#localiseId"><span class="hs-identifier hs-type">localiseId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-247"></span><span class="hs-comment">-- Make an Id with the same unique and type as the</span><span>
</span><span id="line-248"></span><span class="hs-comment">-- incoming Id, but with an *Internal* Name and *LocalId* flavour</span><span>
</span><span id="line-249"></span><span id="localiseId"><span class="annot"><span class="annottext">localiseId :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#localiseId"><span class="hs-identifier hs-var hs-var">localiseId</span></a></span></span><span> </span><span id="local-6989586621682591033"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591033"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591033"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isLocalId"><span class="hs-identifier hs-var">isLocalId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591033"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isInternalName"><span class="hs-identifier hs-var">isInternalName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591037"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591033"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdDetails -&gt; Name -&gt; Kind -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Var.html#mkLocalVar"><span class="hs-identifier hs-var">Var.mkLocalVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591033"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="GHC.Types.Name.html#localiseName"><span class="hs-identifier hs-var">localiseName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591037"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#varMult"><span class="hs-identifier hs-var">Var.varMult</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591033"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591033"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591033"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-255"></span><span>    </span><span id="local-6989586621682591037"><span class="annot"><span class="annottext">name :: Name
</span><a href="#local-6989586621682591037"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591033"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="annot"><a href="GHC.Types.Id.html#lazySetIdInfo"><span class="hs-identifier hs-type">lazySetIdInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-258"></span><span id="lazySetIdInfo"><span class="annot"><span class="annottext">lazySetIdInfo :: Id -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#lazySetIdInfo"><span class="hs-identifier hs-var hs-var">lazySetIdInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Var.html#lazySetIdInfo"><span class="hs-identifier hs-var">Var.lazySetIdInfo</span></a></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="annot"><a href="GHC.Types.Id.html#setIdInfo"><span class="hs-identifier hs-type">setIdInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-261"></span><span id="setIdInfo"><span class="annot"><span class="annottext">setIdInfo :: Id -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#setIdInfo"><span class="hs-identifier hs-var hs-var">setIdInfo</span></a></span></span><span> </span><span id="local-6989586621682591041"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591041"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591042"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591042"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591042"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Id -&gt; Id
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#lazySetIdInfo"><span class="hs-identifier hs-var">lazySetIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591041"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591042"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>        </span><span class="hs-comment">-- Try to avoid space leaks by seq'ing</span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="annot"><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-type">modifyIdInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-265"></span><span id="modifyIdInfo"><span class="annot"><span class="annottext">modifyIdInfo :: HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var hs-var">modifyIdInfo</span></a></span></span><span> </span><span id="local-6989586621682591045"><span class="annot"><span class="annottext">IdInfo -&gt; IdInfo
</span><a href="#local-6989586621682591045"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span id="local-6989586621682591046"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591046"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#setIdInfo"><span class="hs-identifier hs-var">setIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591046"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; IdInfo
</span><a href="#local-6989586621682591045"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591046"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-comment">-- maybeModifyIdInfo tries to avoid unnecessary thrashing</span><span>
</span><span id="line-268"></span><span class="annot"><a href="GHC.Types.Id.html#maybeModifyIdInfo"><span class="hs-identifier hs-type">maybeModifyIdInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-269"></span><span id="maybeModifyIdInfo"><span class="annot"><span class="annottext">maybeModifyIdInfo :: Maybe IdInfo -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#maybeModifyIdInfo"><span class="hs-identifier hs-var hs-var">maybeModifyIdInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682591047"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591047"><span class="hs-identifier hs-var">new_info</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682591048"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591048"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#lazySetIdInfo"><span class="hs-identifier hs-var">lazySetIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591048"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591047"><span class="hs-identifier hs-var">new_info</span></a></span><span>
</span><span id="line-270"></span><span class="annot"><a href="GHC.Types.Id.html#maybeModifyIdInfo"><span class="hs-identifier hs-var">maybeModifyIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IdInfo
</span><span class="hs-identifier hs-var">Nothing</span></span><span>         </span><span id="local-6989586621682591049"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591049"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591049"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="hs-comment">-- maybeModifyIdInfo tries to avoid unnecessary thrashing</span><span>
</span><span id="line-273"></span><span class="annot"><a href="GHC.Types.Id.html#maybeModifyIdDetails"><span class="hs-identifier hs-type">maybeModifyIdDetails</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-274"></span><span id="maybeModifyIdDetails"><span class="annot"><span class="annottext">maybeModifyIdDetails :: Maybe IdDetails -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#maybeModifyIdDetails"><span class="hs-identifier hs-var hs-var">maybeModifyIdDetails</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682591051"><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621682591051"><span class="hs-identifier hs-var">new_details</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682591052"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591052"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails -&gt; Id
</span><a href="GHC.Types.Var.html#setIdDetails"><span class="hs-identifier hs-var">setIdDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591052"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621682591051"><span class="hs-identifier hs-var">new_details</span></a></span><span>
</span><span id="line-275"></span><span class="annot"><a href="GHC.Types.Id.html#maybeModifyIdDetails"><span class="hs-identifier hs-var">maybeModifyIdDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IdDetails
</span><span class="hs-identifier hs-var">Nothing</span></span><span>         </span><span id="local-6989586621682591053"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591053"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591053"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Simple Id construction}
*                                                                      *
************************************************************************

Absolutely all Ids are made by mkId.  It is just like Var.mkId,
but in addition it pins free-tyvar-info onto the Id's type,
where it can easily be found.

Note [Free type variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~
At one time we cached the free type variables of the type of an Id
at the root of the type in a TyNote.  The idea was to avoid repeating
the free-type-variable calculation.  But it turned out to slow down
the compiler overall. I don't quite know why; perhaps finding free
type variables of an Id isn't all that common whereas applying a
substitution (which changes the free type variables) is more common.
Anyway, we removed it in March 2008.
-}</span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="annot"><span class="hs-comment">-- | For an explanation of global vs. local 'Id's, see &quot;GHC.Types.Var.Var#globalvslocal&quot;</span></span><span>
</span><span id="line-300"></span><span class="annot"><a href="GHC.Types.Id.html#mkGlobalId"><span class="hs-identifier hs-type">mkGlobalId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-301"></span><span id="mkGlobalId"><span class="annot"><span class="annottext">mkGlobalId :: IdDetails -&gt; Name -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#mkGlobalId"><span class="hs-identifier hs-var hs-var">mkGlobalId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdDetails -&gt; Name -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Var.html#mkGlobalVar"><span class="hs-identifier hs-var">Var.mkGlobalVar</span></a></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="annot"><span class="hs-comment">-- | Make a global 'Id' without any extra information at all</span></span><span>
</span><span id="line-304"></span><span class="annot"><a href="GHC.Types.Id.html#mkVanillaGlobal"><span class="hs-identifier hs-type">mkVanillaGlobal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-305"></span><span id="mkVanillaGlobal"><span class="annot"><span class="annottext">mkVanillaGlobal :: HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkVanillaGlobal"><span class="hs-identifier hs-var hs-var">mkVanillaGlobal</span></a></span></span><span> </span><span id="local-6989586621682591057"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591057"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682591058"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591058"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Kind -&gt; IdInfo -&gt; Id
Name -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#mkVanillaGlobalWithInfo"><span class="hs-identifier hs-var">mkVanillaGlobalWithInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591057"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591058"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="GHC.Types.Id.Info.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="annot"><span class="hs-comment">-- | Make a global 'Id' with no global information but some generic 'IdInfo'</span></span><span>
</span><span id="line-308"></span><span class="annot"><a href="GHC.Types.Id.html#mkVanillaGlobalWithInfo"><span class="hs-identifier hs-type">mkVanillaGlobalWithInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-309"></span><span id="mkVanillaGlobalWithInfo"><span class="annot"><span class="annottext">mkVanillaGlobalWithInfo :: HasDebugCallStack =&gt; Name -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#mkVanillaGlobalWithInfo"><span class="hs-identifier hs-var hs-var">mkVanillaGlobalWithInfo</span></a></span></span><span> </span><span id="local-6989586621682591066"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591066"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-310"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; (Kind -&gt; IdInfo -&gt; Id) -&gt; Kind -&gt; IdInfo -&gt; Id
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isFieldNameSpace"><span class="hs-identifier hs-var">isFieldNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">(NameSpace -&gt; Bool) -&gt; NameSpace -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; NameSpace
</span><a href="GHC.Types.Name.html#nameNameSpace"><span class="hs-identifier hs-var">nameNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591066"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkVanillaGlobalWithInfo called on record field:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591066"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Kind -&gt; IdInfo -&gt; Id) -&gt; Kind -&gt; IdInfo -&gt; Id)
-&gt; (Kind -&gt; IdInfo -&gt; Id) -&gt; Kind -&gt; IdInfo -&gt; Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><span class="annottext">IdDetails -&gt; Name -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#mkGlobalId"><span class="hs-identifier hs-var">mkGlobalId</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails
</span><a href="GHC.Types.Id.Info.html#VanillaId"><span class="hs-identifier hs-var">VanillaId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591066"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="annot"><span class="hs-comment">-- | For an explanation of global vs. local 'Id's, see &quot;GHC.Types.Var#globalvslocal&quot;</span></span><span>
</span><span id="line-315"></span><span class="annot"><a href="GHC.Types.Id.html#mkLocalId"><span class="hs-identifier hs-type">mkLocalId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-316"></span><span id="mkLocalId"><span class="annot"><span class="annottext">mkLocalId :: HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalId"><span class="hs-identifier hs-var hs-var">mkLocalId</span></a></span></span><span> </span><span id="local-6989586621682591079"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591079"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682591080"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591080"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682591081"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591081"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Kind -&gt; IdInfo -&gt; Id
Name -&gt; Kind -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalIdWithInfo"><span class="hs-identifier hs-var">mkLocalIdWithInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591079"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591080"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Kind -&gt; Kind
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Predicate.html#isCoVarType"><span class="hs-identifier hs-var">isCoVarType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591081"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591081"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="GHC.Types.Id.Info.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="annot"><span class="hs-comment">-- | Make a local CoVar</span></span><span>
</span><span id="line-319"></span><span class="annot"><a href="GHC.Types.Id.html#mkLocalCoVar"><span class="hs-identifier hs-type">mkLocalCoVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span>
</span><span id="line-320"></span><span id="mkLocalCoVar"><span class="annot"><span class="annottext">mkLocalCoVar :: HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalCoVar"><span class="hs-identifier hs-var hs-var">mkLocalCoVar</span></a></span></span><span> </span><span id="local-6989586621682591085"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591085"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682591086"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591086"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Id -&gt; Id
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Predicate.html#isCoVarType"><span class="hs-identifier hs-var">isCoVarType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591086"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Id) -&gt; Id -&gt; Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-322"></span><span>    </span><span class="annot"><span class="annottext">IdDetails -&gt; Name -&gt; Kind -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Var.html#mkLocalVar"><span class="hs-identifier hs-var">Var.mkLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails
</span><a href="GHC.Types.Id.Info.html#CoVarId"><span class="hs-identifier hs-var">CoVarId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591085"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Core.Type.html#ManyTy"><span class="hs-identifier hs-var">ManyTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591086"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="GHC.Types.Id.Info.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a></span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="annot"><span class="hs-comment">-- | Like 'mkLocalId', but checks the type to see if it should make a covar</span></span><span>
</span><span id="line-325"></span><span class="annot"><a href="GHC.Types.Id.html#mkLocalIdOrCoVar"><span class="hs-identifier hs-type">mkLocalIdOrCoVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-326"></span><span id="mkLocalIdOrCoVar"><span class="annot"><span class="annottext">mkLocalIdOrCoVar :: HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalIdOrCoVar"><span class="hs-identifier hs-var hs-var">mkLocalIdOrCoVar</span></a></span></span><span> </span><span id="local-6989586621682591092"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591092"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682591093"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591093"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682591094"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591094"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-327"></span><span>  </span><span class="hs-comment">-- We should assert (eqType w Many) in the isCoVarType case.</span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-comment">-- However, currently this assertion does not hold.</span><span>
</span><span id="line-329"></span><span>  </span><span class="hs-comment">-- In tests with -fdefer-type-errors, such as T14584a,</span><span>
</span><span id="line-330"></span><span>  </span><span class="hs-comment">-- we create a linear 'case' where the scrutinee is a coercion</span><span>
</span><span id="line-331"></span><span>  </span><span class="hs-comment">-- (see castBottomExpr). This problem is covered by #17291.</span><span>
</span><span id="line-332"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Predicate.html#isCoVarType"><span class="hs-identifier hs-var">isCoVarType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591094"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Id
Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalCoVar"><span class="hs-identifier hs-var">mkLocalCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591092"><span class="hs-identifier hs-var">name</span></a></span><span>   </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591094"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Kind -&gt; Id
Name -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalId"><span class="hs-identifier hs-var">mkLocalId</span></a></span><span>    </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591092"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591093"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591094"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-comment">-- proper ids only; no covars!</span><span>
</span><span id="line-336"></span><span class="annot"><a href="GHC.Types.Id.html#mkLocalIdWithInfo"><span class="hs-identifier hs-type">mkLocalIdWithInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-337"></span><span id="mkLocalIdWithInfo"><span class="annot"><span class="annottext">mkLocalIdWithInfo :: HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalIdWithInfo"><span class="hs-identifier hs-var hs-var">mkLocalIdWithInfo</span></a></span></span><span> </span><span id="local-6989586621682591098"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591098"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682591099"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591099"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682591100"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591100"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621682591101"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591101"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-338"></span><span>  </span><span class="annot"><span class="annottext">IdDetails -&gt; Name -&gt; Kind -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Var.html#mkLocalVar"><span class="hs-identifier hs-var">Var.mkLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails
</span><a href="GHC.Types.Id.Info.html#VanillaId"><span class="hs-identifier hs-var">VanillaId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591098"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591099"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Kind -&gt; Kind
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Predicate.html#isCoVarType"><span class="hs-identifier hs-var">isCoVarType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591100"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591100"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591101"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-339"></span><span>        </span><span class="hs-comment">-- Note [Free type variables]</span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="hs-comment">-- | Create a local 'Id' that is marked as exported.</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- This prevents things attached to it from being removed as dead code.</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- See Note [Exported LocalIds]</span><span>
</span><span id="line-344"></span><span class="annot"><a href="GHC.Types.Id.html#mkExportedLocalId"><span class="hs-identifier hs-type">mkExportedLocalId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdDetails"><span class="hs-identifier hs-type">IdDetails</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-345"></span><span id="mkExportedLocalId"><span class="annot"><span class="annottext">mkExportedLocalId :: IdDetails -&gt; Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkExportedLocalId"><span class="hs-identifier hs-var hs-var">mkExportedLocalId</span></a></span></span><span> </span><span id="local-6989586621682591102"><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621682591102"><span class="hs-identifier hs-var">details</span></a></span></span><span> </span><span id="local-6989586621682591103"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591103"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682591104"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591104"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdDetails -&gt; Name -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Var.html#mkExportedLocalVar"><span class="hs-identifier hs-var">Var.mkExportedLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621682591102"><span class="hs-identifier hs-var">details</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591103"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591104"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="GHC.Types.Id.Info.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a></span><span>
</span><span id="line-346"></span><span>        </span><span class="hs-comment">-- Note [Free type variables]</span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="annot"><a href="GHC.Types.Id.html#mkExportedVanillaId"><span class="hs-identifier hs-type">mkExportedVanillaId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-349"></span><span id="mkExportedVanillaId"><span class="annot"><span class="annottext">mkExportedVanillaId :: Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkExportedVanillaId"><span class="hs-identifier hs-var hs-var">mkExportedVanillaId</span></a></span></span><span> </span><span id="local-6989586621682591106"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591106"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682591107"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591107"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-350"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; Id -&gt; Id
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isFieldNameSpace"><span class="hs-identifier hs-var">isFieldNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">(NameSpace -&gt; Bool) -&gt; NameSpace -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; NameSpace
</span><a href="GHC.Types.Name.html#nameNameSpace"><span class="hs-identifier hs-var">nameNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591106"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-351"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkExportedVanillaId called on record field:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591106"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Id) -&gt; Id -&gt; Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-352"></span><span>    </span><span class="annot"><span class="annottext">IdDetails -&gt; Name -&gt; Kind -&gt; IdInfo -&gt; Id
</span><a href="GHC.Types.Var.html#mkExportedLocalVar"><span class="hs-identifier hs-var">Var.mkExportedLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails
</span><a href="GHC.Types.Id.Info.html#VanillaId"><span class="hs-identifier hs-var">VanillaId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682591106"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591107"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="GHC.Types.Id.Info.html#vanillaIdInfo"><span class="hs-identifier hs-var">vanillaIdInfo</span></a></span><span>
</span><span id="line-353"></span><span>        </span><span class="hs-comment">-- Note [Free type variables]</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-comment">-- | Create a system local 'Id'. These are local 'Id's (see &quot;Var#globalvslocal&quot;)</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- that are created by the compiler out of thin air</span><span>
</span><span id="line-358"></span><span class="annot"><a href="GHC.Types.Id.html#mkSysLocal"><span class="hs-identifier hs-type">mkSysLocal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-359"></span><span id="mkSysLocal"><span class="annot"><span class="annottext">mkSysLocal :: FastString -&gt; Unique -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkSysLocal"><span class="hs-identifier hs-var hs-var">mkSysLocal</span></a></span></span><span> </span><span id="local-6989586621682591108"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682591108"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621682591109"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591109"><span class="hs-identifier hs-var">uniq</span></a></span></span><span> </span><span id="local-6989586621682591110"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591110"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682591111"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591111"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Id -&gt; Id
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Predicate.html#isCoVarType"><span class="hs-identifier hs-var">isCoVarType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591111"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Id) -&gt; Id -&gt; Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-360"></span><span>                        </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Kind -&gt; Id
Name -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalId"><span class="hs-identifier hs-var">mkLocalId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique -&gt; FastString -&gt; Name
</span><a href="GHC.Types.Name.html#mkSystemVarName"><span class="hs-identifier hs-var">mkSystemVarName</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591109"><span class="hs-identifier hs-var">uniq</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682591108"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591110"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591111"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="annot"><span class="hs-comment">-- | Like 'mkSysLocal', but checks to see if we have a covar type</span></span><span>
</span><span id="line-363"></span><span class="annot"><a href="GHC.Types.Id.html#mkSysLocalOrCoVar"><span class="hs-identifier hs-type">mkSysLocalOrCoVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-364"></span><span id="mkSysLocalOrCoVar"><span class="annot"><span class="annottext">mkSysLocalOrCoVar :: FastString -&gt; Unique -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkSysLocalOrCoVar"><span class="hs-identifier hs-var hs-var">mkSysLocalOrCoVar</span></a></span></span><span> </span><span id="local-6989586621682591113"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682591113"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621682591114"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591114"><span class="hs-identifier hs-var">uniq</span></a></span></span><span> </span><span id="local-6989586621682591115"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591115"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682591116"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591116"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Kind -&gt; Id
Name -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalIdOrCoVar"><span class="hs-identifier hs-var">mkLocalIdOrCoVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique -&gt; FastString -&gt; Name
</span><a href="GHC.Types.Name.html#mkSystemVarName"><span class="hs-identifier hs-var">mkSystemVarName</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591114"><span class="hs-identifier hs-var">uniq</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682591113"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591115"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591116"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span id="local-6989586621682590687"><span class="annot"><a href="GHC.Types.Id.html#mkSysLocalM"><span class="hs-identifier hs-type">mkSysLocalM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Supply.html#MonadUnique"><span class="hs-identifier hs-type">MonadUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682590687"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682590687"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span></span><span>
</span><span id="line-368"></span><span id="mkSysLocalM"><span class="annot"><span class="annottext">mkSysLocalM :: forall (m :: * -&gt; *).
MonadUnique m =&gt;
FastString -&gt; Kind -&gt; Kind -&gt; m Id
</span><a href="GHC.Types.Id.html#mkSysLocalM"><span class="hs-identifier hs-var hs-var">mkSysLocalM</span></a></span></span><span> </span><span id="local-6989586621682591123"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682591123"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621682591124"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591124"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682591125"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591125"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Unique
forall (m :: * -&gt; *). MonadUnique m =&gt; m Unique
</span><a href="GHC.Types.Unique.Supply.html#getUniqueM"><span class="hs-identifier hs-var">getUniqueM</span></a></span><span> </span><span class="annot"><span class="annottext">m Unique -&gt; (Unique -&gt; m Id) -&gt; m Id
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682591127"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591127"><span class="hs-identifier hs-var">uniq</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; m Id
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; Unique -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkSysLocal"><span class="hs-identifier hs-var">mkSysLocal</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682591123"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591127"><span class="hs-identifier hs-var">uniq</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591124"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591125"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span id="local-6989586621682591128"><span class="annot"><a href="GHC.Types.Id.html#mkSysLocalOrCoVarM"><span class="hs-identifier hs-type">mkSysLocalOrCoVarM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Supply.html#MonadUnique"><span class="hs-identifier hs-type">MonadUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682591128"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682591128"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span></span><span>
</span><span id="line-371"></span><span id="mkSysLocalOrCoVarM"><span class="annot"><span class="annottext">mkSysLocalOrCoVarM :: forall (m :: * -&gt; *).
MonadUnique m =&gt;
FastString -&gt; Kind -&gt; Kind -&gt; m Id
</span><a href="GHC.Types.Id.html#mkSysLocalOrCoVarM"><span class="hs-identifier hs-var hs-var">mkSysLocalOrCoVarM</span></a></span></span><span> </span><span id="local-6989586621682591134"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682591134"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621682591135"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591135"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682591136"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591136"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-372"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Unique
forall (m :: * -&gt; *). MonadUnique m =&gt; m Unique
</span><a href="GHC.Types.Unique.Supply.html#getUniqueM"><span class="hs-identifier hs-var">getUniqueM</span></a></span><span> </span><span class="annot"><span class="annottext">m Unique -&gt; (Unique -&gt; m Id) -&gt; m Id
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682591137"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591137"><span class="hs-identifier hs-var">uniq</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; m Id
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; Unique -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkSysLocalOrCoVar"><span class="hs-identifier hs-var">mkSysLocalOrCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682591134"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591137"><span class="hs-identifier hs-var">uniq</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591135"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591136"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span class="annot"><span class="hs-comment">-- | Create a user local 'Id'. These are local 'Id's (see &quot;GHC.Types.Var#globalvslocal&quot;) with a name and location that the user might recognize</span></span><span>
</span><span id="line-375"></span><span class="annot"><a href="GHC.Types.Id.html#mkUserLocal"><span class="hs-identifier hs-type">mkUserLocal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-376"></span><span id="mkUserLocal"><span class="annot"><span class="annottext">mkUserLocal :: OccName -&gt; Unique -&gt; Kind -&gt; Kind -&gt; SrcSpan -&gt; Id
</span><a href="GHC.Types.Id.html#mkUserLocal"><span class="hs-identifier hs-var hs-var">mkUserLocal</span></a></span></span><span> </span><span id="local-6989586621682591138"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682591138"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span id="local-6989586621682591139"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591139"><span class="hs-identifier hs-var">uniq</span></a></span></span><span> </span><span id="local-6989586621682591140"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591140"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682591141"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591141"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621682591142"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682591142"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Id -&gt; Id
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Predicate.html#isCoVarType"><span class="hs-identifier hs-var">isCoVarType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591141"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Id) -&gt; Id -&gt; Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-377"></span><span>                                </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Kind -&gt; Id
Name -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalId"><span class="hs-identifier hs-var">mkLocalId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique -&gt; OccName -&gt; SrcSpan -&gt; Name
</span><a href="GHC.Types.Name.html#mkInternalName"><span class="hs-identifier hs-var">mkInternalName</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591139"><span class="hs-identifier hs-var">uniq</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682591138"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682591142"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591140"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591141"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="annot"><span class="hs-comment">-- | Like 'mkUserLocal', but checks if we have a coercion type</span></span><span>
</span><span id="line-380"></span><span class="annot"><a href="GHC.Types.Id.html#mkUserLocalOrCoVar"><span class="hs-identifier hs-type">mkUserLocalOrCoVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-381"></span><span id="mkUserLocalOrCoVar"><span class="annot"><span class="annottext">mkUserLocalOrCoVar :: OccName -&gt; Unique -&gt; Kind -&gt; Kind -&gt; SrcSpan -&gt; Id
</span><a href="GHC.Types.Id.html#mkUserLocalOrCoVar"><span class="hs-identifier hs-var hs-var">mkUserLocalOrCoVar</span></a></span></span><span> </span><span id="local-6989586621682591144"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682591144"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span id="local-6989586621682591145"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591145"><span class="hs-identifier hs-var">uniq</span></a></span></span><span> </span><span id="local-6989586621682591146"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591146"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682591147"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591147"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621682591148"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682591148"><span class="hs-identifier hs-var">loc</span></a></span></span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Kind -&gt; Id
Name -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalIdOrCoVar"><span class="hs-identifier hs-var">mkLocalIdOrCoVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique -&gt; OccName -&gt; SrcSpan -&gt; Name
</span><a href="GHC.Types.Name.html#mkInternalName"><span class="hs-identifier hs-var">mkInternalName</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591145"><span class="hs-identifier hs-var">uniq</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682591144"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682591148"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591146"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591147"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-comment">{-
Make some local @Ids@ for a template @CoreExpr@.  These have bogus
@Uniques@, but that's OK because the templates are supposed to be
instantiated before use.
-}</span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="annot"><span class="hs-comment">-- | Workers get local names. &quot;CoreTidy&quot; will externalise these if necessary</span></span><span>
</span><span id="line-391"></span><span class="annot"><a href="GHC.Types.Id.html#mkWorkerId"><span class="hs-identifier hs-type">mkWorkerId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-392"></span><span id="mkWorkerId"><span class="annot"><span class="annottext">mkWorkerId :: Unique -&gt; Id -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkWorkerId"><span class="hs-identifier hs-var hs-var">mkWorkerId</span></a></span></span><span> </span><span id="local-6989586621682591149"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591149"><span class="hs-identifier hs-var">uniq</span></a></span></span><span> </span><span id="local-6989586621682591150"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591150"><span class="hs-identifier hs-var">unwrkr</span></a></span></span><span> </span><span id="local-6989586621682591151"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591151"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-393"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Kind -&gt; Kind -&gt; Id
Name -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkLocalId"><span class="hs-identifier hs-var">mkLocalId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(OccName -&gt; OccName) -&gt; Unique -&gt; Name -&gt; Name
</span><a href="GHC.Types.Name.html#mkDerivedInternalName"><span class="hs-identifier hs-var">mkDerivedInternalName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkWorkerOcc"><span class="hs-identifier hs-var">mkWorkerOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682591149"><span class="hs-identifier hs-var">uniq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591150"><span class="hs-identifier hs-var">unwrkr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Core.Type.html#ManyTy"><span class="hs-identifier hs-var">ManyTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591151"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="annot"><span class="hs-comment">-- | Create a /template local/: a family of system local 'Id's in bijection with @Int@s, typically used in unfoldings</span></span><span>
</span><span id="line-396"></span><span class="annot"><a href="GHC.Types.Id.html#mkTemplateLocal"><span class="hs-identifier hs-type">mkTemplateLocal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-397"></span><span id="mkTemplateLocal"><span class="annot"><span class="annottext">mkTemplateLocal :: Arity -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkTemplateLocal"><span class="hs-identifier hs-var hs-var">mkTemplateLocal</span></a></span></span><span> </span><span id="local-6989586621682591155"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591155"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682591156"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591156"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Scaled Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkScaledTemplateLocal"><span class="hs-identifier hs-var">mkScaledTemplateLocal</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591155"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Scaled Kind
forall a. a -&gt; Scaled a
</span><a href="GHC.Core.Type.html#unrestricted"><span class="hs-identifier hs-var">unrestricted</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591156"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span class="annot"><a href="GHC.Types.Id.html#mkScaledTemplateLocal"><span class="hs-identifier hs-type">mkScaledTemplateLocal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-400"></span><span id="mkScaledTemplateLocal"><span class="annot"><span class="annottext">mkScaledTemplateLocal :: Arity -&gt; Scaled Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkScaledTemplateLocal"><span class="hs-identifier hs-var hs-var">mkScaledTemplateLocal</span></a></span></span><span> </span><span id="local-6989586621682591158"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591158"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621682591159"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591159"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682591160"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591160"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; Unique -&gt; Kind -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkSysLocalOrCoVar"><span class="hs-identifier hs-var">mkSysLocalOrCoVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;v&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; Unique
</span><a href="GHC.Builtin.Uniques.html#mkBuiltinUnique"><span class="hs-identifier hs-var">mkBuiltinUnique</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591158"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591159"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682591160"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-401"></span><span>   </span><span class="hs-comment">-- &quot;OrCoVar&quot; since this is used in a superclass selector,</span><span>
</span><span id="line-402"></span><span>   </span><span class="hs-comment">-- and &quot;~&quot; and &quot;~~&quot; have coercion &quot;superclasses&quot;.</span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span class="annot"><span class="hs-comment">-- | Create a template local for a series of types</span></span><span>
</span><span id="line-405"></span><span class="annot"><a href="GHC.Types.Id.html#mkTemplateLocals"><span class="hs-identifier hs-type">mkTemplateLocals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-406"></span><span id="mkTemplateLocals"><span class="annot"><span class="annottext">mkTemplateLocals :: [Kind] -&gt; [Id]
</span><a href="GHC.Types.Id.html#mkTemplateLocals"><span class="hs-identifier hs-var hs-var">mkTemplateLocals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; [Kind] -&gt; [Id]
</span><a href="GHC.Types.Id.html#mkTemplateLocalsNum"><span class="hs-identifier hs-var">mkTemplateLocalsNum</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">1</span></span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span class="annot"><span class="hs-comment">-- | Create a template local for a series of type, but start from a specified template local</span></span><span>
</span><span id="line-409"></span><span class="annot"><a href="GHC.Types.Id.html#mkTemplateLocalsNum"><span class="hs-identifier hs-type">mkTemplateLocalsNum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-410"></span><span id="mkTemplateLocalsNum"><span class="annot"><span class="annottext">mkTemplateLocalsNum :: Arity -&gt; [Kind] -&gt; [Id]
</span><a href="GHC.Types.Id.html#mkTemplateLocalsNum"><span class="hs-identifier hs-var hs-var">mkTemplateLocalsNum</span></a></span></span><span> </span><span id="local-6989586621682591162"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591162"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682591163"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682591163"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Arity -&gt; Kind -&gt; Id) -&gt; [Arity] -&gt; [Kind] -&gt; [Id]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkTemplateLocal"><span class="hs-identifier hs-var">mkTemplateLocal</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591162"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682591163"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="hs-comment">{- Note [Exported LocalIds]
~~~~~~~~~~~~~~~~~~~~~~~~~~~
We use mkExportedLocalId for things like
 - Dictionary functions (DFunId)
 - Wrapper and matcher Ids for pattern synonyms
 - Default methods for classes
 - Pattern-synonym matcher and builder Ids
 - etc

They marked as &quot;exported&quot; in the sense that they should be kept alive
even if apparently unused in other bindings, and not dropped as dead
code by the occurrence analyser.  (But &quot;exported&quot; here does not mean
&quot;brought into lexical scope by an import declaration&quot;. Indeed these
things are always internal Ids that the user never sees.)

It's very important that they are *LocalIds*, not GlobalIds, for lots
of reasons:

 * We want to treat them as free variables for the purpose of
   dependency analysis (e.g. GHC.Core.FVs.exprFreeVars).

 * Look them up in the current substitution when we come across
   occurrences of them (in Subst.lookupIdSubst). Lacking this we
   can get an out-of-date unfolding, which can in turn make the
   simplifier go into an infinite loop (#9857)

 * Ensure that for dfuns that the specialiser does not float dict uses
   above their defns, which would prevent good simplifications happening.

 * The strictness analyser treats a occurrence of a GlobalId as
   imported and assumes it contains strictness in its IdInfo, which
   isn't true if the thing is bound in the same module as the
   occurrence.

In CoreTidy we must make all these LocalIds into GlobalIds, so that in
importing modules (in --make mode) we treat them as properly global.
That is what is happening in, say tidy_insts in GHC.Iface.Tidy.

************************************************************************
*                                                                      *
\subsection{Special Ids}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span class="annot"><span class="hs-comment">-- | If the 'Id' is that for a record selector, extract the 'sel_tycon'. Panic otherwise.</span></span><span>
</span><span id="line-458"></span><span class="annot"><a href="GHC.Types.Id.html#recordSelectorTyCon"><span class="hs-identifier hs-type">recordSelectorTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelParent"><span class="hs-identifier hs-type">RecSelParent</span></a></span><span>
</span><span id="line-459"></span><span id="recordSelectorTyCon"><span class="annot"><span class="annottext">recordSelectorTyCon :: Id -&gt; RecSelParent
</span><a href="GHC.Types.Id.html#recordSelectorTyCon"><span class="hs-identifier hs-var hs-var">recordSelectorTyCon</span></a></span></span><span> </span><span id="local-6989586621682591166"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591166"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-460"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Maybe RecSelParent
</span><a href="GHC.Types.Id.html#recordSelectorTyCon_maybe"><span class="hs-identifier hs-var">recordSelectorTyCon_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591166"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-461"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682591167"><span class="annot"><span class="annottext">RecSelParent
</span><a href="#local-6989586621682591167"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RecSelParent
</span><a href="#local-6989586621682591167"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-462"></span><span>        </span><span class="annot"><span class="annottext">Maybe RecSelParent
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; RecSelParent
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;recordSelectorTyCon&quot;</span></span><span>
</span><span id="line-463"></span><span>
</span><span id="line-464"></span><span class="annot"><a href="GHC.Types.Id.html#recordSelectorTyCon_maybe"><span class="hs-identifier hs-type">recordSelectorTyCon_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelParent"><span class="hs-identifier hs-type">RecSelParent</span></a></span><span>
</span><span id="line-465"></span><span id="recordSelectorTyCon_maybe"><span class="annot"><span class="annottext">recordSelectorTyCon_maybe :: Id -&gt; Maybe RecSelParent
</span><a href="GHC.Types.Id.html#recordSelectorTyCon_maybe"><span class="hs-identifier hs-var hs-var">recordSelectorTyCon_maybe</span></a></span></span><span> </span><span id="local-6989586621682591169"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591169"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591169"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-467"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelId"><span class="hs-identifier hs-type">RecSelId</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sel_tycon :: IdDetails -&gt; RecSelParent
</span><a href="GHC.Types.Id.Info.html#sel_tycon"><span class="hs-identifier hs-var">sel_tycon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682591171"><span class="annot"><span class="annottext">RecSelParent
</span><a href="#local-6989586621682591171"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RecSelParent -&gt; Maybe RecSelParent
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">RecSelParent
</span><a href="#local-6989586621682591171"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-468"></span><span>        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe RecSelParent
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span class="annot"><a href="GHC.Types.Id.html#isRecordSelector"><span class="hs-identifier hs-type">isRecordSelector</span></a></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-471"></span><span class="annot"><a href="GHC.Types.Id.html#isNaughtyRecordSelector"><span class="hs-identifier hs-type">isNaughtyRecordSelector</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-472"></span><span class="annot"><a href="GHC.Types.Id.html#isPatSynRecordSelector"><span class="hs-identifier hs-type">isPatSynRecordSelector</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-473"></span><span class="annot"><a href="GHC.Types.Id.html#isDataConRecordSelector"><span class="hs-identifier hs-type">isDataConRecordSelector</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-474"></span><span class="annot"><a href="GHC.Types.Id.html#isPrimOpId"><span class="hs-identifier hs-type">isPrimOpId</span></a></span><span>              </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-475"></span><span class="annot"><a href="GHC.Types.Id.html#isFCallId"><span class="hs-identifier hs-type">isFCallId</span></a></span><span>               </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-476"></span><span class="annot"><a href="GHC.Types.Id.html#isDataConWorkId"><span class="hs-identifier hs-type">isDataConWorkId</span></a></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-477"></span><span class="annot"><a href="GHC.Types.Id.html#isDataConWrapId"><span class="hs-identifier hs-type">isDataConWrapId</span></a></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-478"></span><span class="annot"><a href="GHC.Types.Id.html#isDFunId"><span class="hs-identifier hs-type">isDFunId</span></a></span><span>                </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-479"></span><span class="annot"><a href="GHC.Types.Id.html#isClassOpId"><span class="hs-identifier hs-type">isClassOpId</span></a></span><span>             </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span class="annot"><a href="GHC.Types.Id.html#isClassOpId_maybe"><span class="hs-identifier hs-type">isClassOpId_maybe</span></a></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.Class.html#Class"><span class="hs-identifier hs-type">Class</span></a></span><span>
</span><span id="line-482"></span><span class="annot"><a href="GHC.Types.Id.html#isPrimOpId_maybe"><span class="hs-identifier hs-type">isPrimOpId_maybe</span></a></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Builtin.PrimOps.html#PrimOp"><span class="hs-identifier hs-type">PrimOp</span></a></span><span>
</span><span id="line-483"></span><span class="annot"><a href="GHC.Types.Id.html#isFCallId_maybe"><span class="hs-identifier hs-type">isFCallId_maybe</span></a></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#ForeignCall"><span class="hs-identifier hs-type">ForeignCall</span></a></span><span>
</span><span id="line-484"></span><span class="annot"><a href="GHC.Types.Id.html#isDataConWorkId_maybe"><span class="hs-identifier hs-type">isDataConWorkId_maybe</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-485"></span><span class="annot"><a href="GHC.Types.Id.html#isDataConWrapId_maybe"><span class="hs-identifier hs-type">isDataConWrapId_maybe</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span id="isRecordSelector"><span class="annot"><span class="annottext">isRecordSelector :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isRecordSelector"><span class="hs-identifier hs-var hs-var">isRecordSelector</span></a></span></span><span> </span><span id="local-6989586621682591172"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591172"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591172"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-488"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelId"><span class="hs-identifier hs-type">RecSelId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-489"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span id="isDataConRecordSelector"><span class="annot"><span class="annottext">isDataConRecordSelector :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isDataConRecordSelector"><span class="hs-identifier hs-var hs-var">isDataConRecordSelector</span></a></span></span><span> </span><span id="local-6989586621682591173"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591173"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591173"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-492"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelId"><span class="hs-identifier hs-type">RecSelId</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sel_tycon :: IdDetails -&gt; RecSelParent
</span><a href="GHC.Types.Id.Info.html#sel_tycon"><span class="hs-identifier hs-var">sel_tycon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelData"><span class="hs-identifier hs-type">RecSelData</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier">_</span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-493"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span id="isPatSynRecordSelector"><span class="annot"><span class="annottext">isPatSynRecordSelector :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isPatSynRecordSelector"><span class="hs-identifier hs-var hs-var">isPatSynRecordSelector</span></a></span></span><span> </span><span id="local-6989586621682591175"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591175"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591175"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-496"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelId"><span class="hs-identifier hs-type">RecSelId</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sel_tycon :: IdDetails -&gt; RecSelParent
</span><a href="GHC.Types.Id.Info.html#sel_tycon"><span class="hs-identifier hs-var">sel_tycon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelPatSyn"><span class="hs-identifier hs-type">RecSelPatSyn</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><span class="hs-identifier">_</span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-497"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span id="isNaughtyRecordSelector"><span class="annot"><span class="annottext">isNaughtyRecordSelector :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isNaughtyRecordSelector"><span class="hs-identifier hs-var hs-var">isNaughtyRecordSelector</span></a></span></span><span> </span><span id="local-6989586621682591177"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591177"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591177"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-500"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelId"><span class="hs-identifier hs-type">RecSelId</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sel_naughty :: IdDetails -&gt; Bool
</span><a href="GHC.Types.Id.Info.html#sel_naughty"><span class="hs-identifier hs-var">sel_naughty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682591179"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682591179"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682591179"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-501"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span id="isClassOpId"><span class="annot"><span class="annottext">isClassOpId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isClassOpId"><span class="hs-identifier hs-var hs-var">isClassOpId</span></a></span></span><span> </span><span id="local-6989586621682591180"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591180"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591180"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-504"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#ClassOpId"><span class="hs-identifier hs-type">ClassOpId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-505"></span><span>                        </span><span id="local-6989586621682591182"><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621682591182"><span class="hs-identifier hs-var">_other</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span id="isClassOpId_maybe"><span class="annot"><span class="annottext">isClassOpId_maybe :: Id -&gt; Maybe Class
</span><a href="GHC.Types.Id.html#isClassOpId_maybe"><span class="hs-identifier hs-var hs-var">isClassOpId_maybe</span></a></span></span><span> </span><span id="local-6989586621682591183"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591183"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591183"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-508"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#ClassOpId"><span class="hs-identifier hs-type">ClassOpId</span></a></span><span> </span><span id="local-6989586621682591184"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621682591184"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Class -&gt; Maybe Class
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621682591184"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-509"></span><span>                        </span><span id="local-6989586621682591185"><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621682591185"><span class="hs-identifier hs-var">_other</span></a></span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Class
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span id="isPrimOpId"><span class="annot"><span class="annottext">isPrimOpId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isPrimOpId"><span class="hs-identifier hs-var hs-var">isPrimOpId</span></a></span></span><span> </span><span id="local-6989586621682591186"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591186"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591186"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-512"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#PrimOpId"><span class="hs-identifier hs-type">PrimOpId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-513"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span id="isDFunId"><span class="annot"><span class="annottext">isDFunId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isDFunId"><span class="hs-identifier hs-var hs-var">isDFunId</span></a></span></span><span> </span><span id="local-6989586621682591188"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591188"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591188"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-516"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#DFunId"><span class="hs-identifier hs-type">DFunId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-517"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-518"></span><span>
</span><span id="line-519"></span><span id="isPrimOpId_maybe"><span class="annot"><span class="annottext">isPrimOpId_maybe :: Id -&gt; Maybe PrimOp
</span><a href="GHC.Types.Id.html#isPrimOpId_maybe"><span class="hs-identifier hs-var hs-var">isPrimOpId_maybe</span></a></span></span><span> </span><span id="local-6989586621682591190"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591190"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591190"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-520"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#PrimOpId"><span class="hs-identifier hs-type">PrimOpId</span></a></span><span> </span><span id="local-6989586621682591191"><span class="annot"><span class="annottext">PrimOp
</span><a href="#local-6989586621682591191"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConcreteTyVars
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrimOp -&gt; Maybe PrimOp
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">PrimOp
</span><a href="#local-6989586621682591191"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-521"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe PrimOp
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span id="isFCallId"><span class="annot"><span class="annottext">isFCallId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isFCallId"><span class="hs-identifier hs-var hs-var">isFCallId</span></a></span></span><span> </span><span id="local-6989586621682591192"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591192"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591192"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-524"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#FCallId"><span class="hs-identifier hs-type">FCallId</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignCall
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-525"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span id="isFCallId_maybe"><span class="annot"><span class="annottext">isFCallId_maybe :: Id -&gt; Maybe ForeignCall
</span><a href="GHC.Types.Id.html#isFCallId_maybe"><span class="hs-identifier hs-var hs-var">isFCallId_maybe</span></a></span></span><span> </span><span id="local-6989586621682591194"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591194"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591194"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-528"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#FCallId"><span class="hs-identifier hs-type">FCallId</span></a></span><span> </span><span id="local-6989586621682591195"><span class="annot"><span class="annottext">ForeignCall
</span><a href="#local-6989586621682591195"><span class="hs-identifier hs-var">call</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignCall -&gt; Maybe ForeignCall
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">ForeignCall
</span><a href="#local-6989586621682591195"><span class="hs-identifier hs-var">call</span></a></span><span>
</span><span id="line-529"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ForeignCall
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span id="isDataConWorkId"><span class="annot"><span class="annottext">isDataConWorkId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isDataConWorkId"><span class="hs-identifier hs-var hs-var">isDataConWorkId</span></a></span></span><span> </span><span id="local-6989586621682591196"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591196"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591196"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-532"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWorkId"><span class="hs-identifier hs-type">DataConWorkId</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-533"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span id="isDataConWorkId_maybe"><span class="annot"><span class="annottext">isDataConWorkId_maybe :: Id -&gt; Maybe DataCon
</span><a href="GHC.Types.Id.html#isDataConWorkId_maybe"><span class="hs-identifier hs-var hs-var">isDataConWorkId_maybe</span></a></span></span><span> </span><span id="local-6989586621682591198"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591198"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591198"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-536"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWorkId"><span class="hs-identifier hs-type">DataConWorkId</span></a></span><span> </span><span id="local-6989586621682591199"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591199"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Maybe DataCon
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591199"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-537"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe DataCon
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span id="isDataConWrapId"><span class="annot"><span class="annottext">isDataConWrapId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isDataConWrapId"><span class="hs-identifier hs-var hs-var">isDataConWrapId</span></a></span></span><span> </span><span id="local-6989586621682591200"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591200"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591200"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-540"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWrapId"><span class="hs-identifier hs-type">DataConWrapId</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-541"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span id="isDataConWrapId_maybe"><span class="annot"><span class="annottext">isDataConWrapId_maybe :: Id -&gt; Maybe DataCon
</span><a href="GHC.Types.Id.html#isDataConWrapId_maybe"><span class="hs-identifier hs-var hs-var">isDataConWrapId_maybe</span></a></span></span><span> </span><span id="local-6989586621682591202"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591202"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591202"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-544"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWrapId"><span class="hs-identifier hs-type">DataConWrapId</span></a></span><span> </span><span id="local-6989586621682591203"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591203"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Maybe DataCon
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591203"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-545"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe DataCon
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span class="annot"><a href="GHC.Types.Id.html#isDataConId_maybe"><span class="hs-identifier hs-type">isDataConId_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-548"></span><span id="isDataConId_maybe"><span class="annot"><span class="annottext">isDataConId_maybe :: Id -&gt; Maybe DataCon
</span><a href="GHC.Types.Id.html#isDataConId_maybe"><span class="hs-identifier hs-var hs-var">isDataConId_maybe</span></a></span></span><span> </span><span id="local-6989586621682591204"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591204"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591204"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-549"></span><span>                         </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWorkId"><span class="hs-identifier hs-type">DataConWorkId</span></a></span><span> </span><span id="local-6989586621682591205"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591205"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Maybe DataCon
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591205"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-550"></span><span>                         </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWrapId"><span class="hs-identifier hs-type">DataConWrapId</span></a></span><span> </span><span id="local-6989586621682591206"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591206"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Maybe DataCon
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591206"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-551"></span><span>                         </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe DataCon
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-552"></span><span>
</span><span id="line-553"></span><span class="annot"><a href="GHC.Types.Id.html#isDataConId"><span class="hs-identifier hs-type">isDataConId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-554"></span><span id="isDataConId"><span class="annot"><span class="annottext">isDataConId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isDataConId"><span class="hs-identifier hs-var hs-var">isDataConId</span></a></span></span><span> </span><span id="local-6989586621682591207"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591207"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591207"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-555"></span><span>                         </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWorkId"><span class="hs-identifier hs-type">DataConWorkId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-556"></span><span>                         </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWrapId"><span class="hs-identifier hs-type">DataConWrapId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-557"></span><span>                         </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span class="hs-comment">-- | An Id for which we might require all callers to pass strict arguments properly tagged + evaluated.</span><span>
</span><span id="line-560"></span><span class="hs-comment">--</span><span>
</span><span id="line-561"></span><span class="hs-comment">-- See Note [CBV Function Ids]</span><span>
</span><span id="line-562"></span><span class="annot"><a href="GHC.Types.Id.html#isWorkerLikeId"><span class="hs-identifier hs-type">isWorkerLikeId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-563"></span><span id="isWorkerLikeId"><span class="annot"><span class="annottext">isWorkerLikeId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isWorkerLikeId"><span class="hs-identifier hs-var hs-var">isWorkerLikeId</span></a></span></span><span> </span><span id="local-6989586621682591208"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591208"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591208"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-564"></span><span>  </span><span class="annot"><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-type">WorkerLikeId</span></a></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-565"></span><span>  </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-566"></span><span>  </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-567"></span><span>
</span><span id="line-568"></span><span class="annot"><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-type">isJoinId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-569"></span><span class="hs-comment">-- It is convenient in GHC.Core.Opt.SetLevels.lvlMFE to apply isJoinId</span><span>
</span><span id="line-570"></span><span class="hs-comment">-- to the free vars of an expression, so it's convenient</span><span>
</span><span id="line-571"></span><span class="hs-comment">-- if it returns False for type variables</span><span>
</span><span id="line-572"></span><span id="isJoinId"><span class="annot"><span class="annottext">isJoinId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-var hs-var">isJoinId</span></a></span></span><span> </span><span id="local-6989586621682591211"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591211"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-573"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591211"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591211"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-574"></span><span>                </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-575"></span><span>                </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-576"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span class="annot"><span class="hs-comment">-- | Doesn't return strictness marks</span></span><span>
</span><span id="line-579"></span><span class="annot"><a href="GHC.Types.Id.html#idJoinPointHood"><span class="hs-identifier hs-type">idJoinPointHood</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#JoinPointHood"><span class="hs-identifier hs-type">JoinPointHood</span></a></span><span>
</span><span id="line-580"></span><span id="idJoinPointHood"><span class="annot"><span class="annottext">idJoinPointHood :: Id -&gt; JoinPointHood
</span><a href="GHC.Types.Id.html#idJoinPointHood"><span class="hs-identifier hs-var hs-var">idJoinPointHood</span></a></span></span><span> </span><span id="local-6989586621682591212"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591212"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-581"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591212"><span class="hs-identifier hs-var">id</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591212"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-582"></span><span>                </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span id="local-6989586621682591213"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591213"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span id="local-6989586621682591214"><span class="annot"><span class="annottext">Maybe [CbvMark]
</span><a href="#local-6989586621682591214"><span class="hs-identifier hs-var">_marks</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; JoinPointHood
</span><a href="GHC.Utils.Outputable.html#JoinPoint"><span class="hs-identifier hs-var">JoinPoint</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591213"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-583"></span><span>                </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">JoinPointHood
</span><a href="GHC.Utils.Outputable.html#NotJoinPoint"><span class="hs-identifier hs-var">NotJoinPoint</span></a></span><span>
</span><span id="line-584"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JoinPointHood
</span><a href="GHC.Utils.Outputable.html#NotJoinPoint"><span class="hs-identifier hs-var">NotJoinPoint</span></a></span><span>
</span><span id="line-585"></span><span>
</span><span id="line-586"></span><span class="annot"><a href="GHC.Types.Id.html#idDataCon"><span class="hs-identifier hs-type">idDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-587"></span><span class="hs-comment">-- ^ Get from either the worker or the wrapper 'Id' to the 'DataCon'. Currently used only in the desugarer.</span><span>
</span><span id="line-588"></span><span class="hs-comment">--</span><span>
</span><span id="line-589"></span><span class="hs-comment">-- INVARIANT: @idDataCon (dataConWrapId d) = d@: remember, 'dataConWrapId' can return either the wrapper or the worker</span><span>
</span><span id="line-590"></span><span id="idDataCon"><span class="annot"><span class="annottext">idDataCon :: Id -&gt; DataCon
</span><a href="GHC.Types.Id.html#idDataCon"><span class="hs-identifier hs-var hs-var">idDataCon</span></a></span></span><span> </span><span id="local-6989586621682591218"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591218"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Maybe DataCon
</span><a href="GHC.Types.Id.html#isDataConId_maybe"><span class="hs-identifier hs-var">isDataConId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591218"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DataCon -&gt; DataCon -&gt; DataCon
forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; DataCon
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;idDataCon&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591218"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-591"></span><span>
</span><span id="line-592"></span><span class="annot"><a href="GHC.Types.Id.html#hasNoBinding"><span class="hs-identifier hs-type">hasNoBinding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-593"></span><span class="hs-comment">-- ^ Returns @True@ of an 'Id' which may not have a</span><span>
</span><span id="line-594"></span><span class="hs-comment">-- binding, even though it is defined in this module.</span><span>
</span><span id="line-595"></span><span>
</span><span id="line-596"></span><span class="hs-comment">-- Data constructor workers used to be things of this kind, but they aren't any</span><span>
</span><span id="line-597"></span><span class="hs-comment">-- more.  Instead, we inject a binding for them at the CorePrep stage. The</span><span>
</span><span id="line-598"></span><span class="hs-comment">-- exception to this is unboxed tuples and sums datacons, which definitely have</span><span>
</span><span id="line-599"></span><span class="hs-comment">-- no binding</span><span>
</span><span id="line-600"></span><span id="hasNoBinding"><span class="annot"><span class="annottext">hasNoBinding :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#hasNoBinding"><span class="hs-identifier hs-var hs-var">hasNoBinding</span></a></span></span><span> </span><span id="local-6989586621682591221"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591221"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591221"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-601"></span><span>
</span><span id="line-602"></span><span class="hs-comment">-- TEMPORARILY make all primops hasNoBinding, to avoid #20155</span><span>
</span><span id="line-603"></span><span class="hs-comment">-- The goal is to understand #20155 and revert to the commented out version</span><span>
</span><span id="line-604"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#PrimOpId"><span class="hs-identifier hs-type">PrimOpId</span></a></span><span> </span><span class="annot"><span class="annottext">PrimOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConcreteTyVars
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>    </span><span class="hs-comment">-- See Note [Eta expanding primops] in GHC.Builtin.PrimOps</span><span>
</span><span id="line-605"></span><span class="hs-comment">--                        PrimOpId _ lev_poly -&gt; lev_poly    -- TEMPORARILY commented out</span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#FCallId"><span class="hs-identifier hs-type">FCallId</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignCall
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-608"></span><span>                        </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWorkId"><span class="hs-identifier hs-type">DataConWorkId</span></a></span><span> </span><span id="local-6989586621682591222"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591222"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isUnboxedTupleDataCon"><span class="hs-identifier hs-var">isUnboxedTupleDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591222"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isUnboxedSumDataCon"><span class="hs-identifier hs-var">isUnboxedSumDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682591222"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-609"></span><span>                        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isCompulsoryUnfolding"><span class="hs-identifier hs-var">isCompulsoryUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#realIdUnfolding"><span class="hs-identifier hs-var">realIdUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591221"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-610"></span><span>  </span><span class="hs-comment">-- Note: this function must be very careful not to force</span><span>
</span><span id="line-611"></span><span>  </span><span class="hs-comment">-- any of the fields that aren't the 'uf_src' field of</span><span>
</span><span id="line-612"></span><span>  </span><span class="hs-comment">-- the 'Unfolding' of the 'Id'. This is because these fields are computed</span><span>
</span><span id="line-613"></span><span>  </span><span class="hs-comment">-- in terms of the 'uf_tmpl' field, which is not available</span><span>
</span><span id="line-614"></span><span>  </span><span class="hs-comment">-- until we have finished Core Lint for the unfolding, which calls 'hasNoBinding'</span><span>
</span><span id="line-615"></span><span>  </span><span class="hs-comment">-- in 'checkCanEtaExpand'.</span><span>
</span><span id="line-616"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-617"></span><span>  </span><span class="hs-comment">-- In particular, calling 'idUnfolding' rather than 'realIdUnfolding' here can</span><span>
</span><span id="line-618"></span><span>  </span><span class="hs-comment">-- force the 'uf_tmpl' field, because 'trimUnfolding' forces the 'uf_is_value' field,</span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-comment">-- and this field is usually computed in terms of the 'uf_tmpl' field,</span><span>
</span><span id="line-620"></span><span>  </span><span class="hs-comment">-- so we will force that as well.</span><span>
</span><span id="line-621"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-622"></span><span>  </span><span class="hs-comment">-- See Note [Lazily checking Unfoldings] in GHC.IfaceToCore.</span><span>
</span><span id="line-623"></span><span>
</span><span id="line-624"></span><span class="annot"><a href="GHC.Types.Id.html#isImplicitId"><span class="hs-identifier hs-type">isImplicitId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-625"></span><span class="hs-comment">-- ^ 'isImplicitId' tells whether an 'Id's info is implied by other</span><span>
</span><span id="line-626"></span><span class="hs-comment">-- declarations, so we don't need to put its signature in an interface</span><span>
</span><span id="line-627"></span><span class="hs-comment">-- file, even if it's mentioned in some other interface unfolding.</span><span>
</span><span id="line-628"></span><span id="isImplicitId"><span class="annot"><span class="annottext">isImplicitId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isImplicitId"><span class="hs-identifier hs-var hs-var">isImplicitId</span></a></span></span><span> </span><span id="local-6989586621682591226"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591226"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-629"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591226"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-630"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#FCallId"><span class="hs-identifier hs-type">FCallId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-631"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#ClassOpId"><span class="hs-identifier hs-type">ClassOpId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-632"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#PrimOpId"><span class="hs-identifier hs-type">PrimOpId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-633"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWorkId"><span class="hs-identifier hs-type">DataConWorkId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-634"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWrapId"><span class="hs-identifier hs-type">DataConWrapId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-635"></span><span>                </span><span class="hs-comment">-- These are implied by their type or class decl;</span><span>
</span><span id="line-636"></span><span>                </span><span class="hs-comment">-- remember that all type and class decls appear in the interface file.</span><span>
</span><span id="line-637"></span><span>                </span><span class="hs-comment">-- The dfun id is not an implicit Id; it must *not* be omitted, because</span><span>
</span><span id="line-638"></span><span>                </span><span class="hs-comment">-- it carries version info for the instance decl</span><span>
</span><span id="line-639"></span><span>        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span class="annot"><a href="GHC.Types.Id.html#idIsFrom"><span class="hs-identifier hs-type">idIsFrom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-642"></span><span id="idIsFrom"><span class="annot"><span class="annottext">idIsFrom :: Module -&gt; Id -&gt; Bool
</span><a href="GHC.Types.Id.html#idIsFrom"><span class="hs-identifier hs-var hs-var">idIsFrom</span></a></span></span><span> </span><span id="local-6989586621682591227"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682591227"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682591228"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591228"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; Name -&gt; Bool
</span><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-var">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682591227"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591228"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span class="annot"><a href="GHC.Types.Id.html#isDeadBinder"><span class="hs-identifier hs-type">isDeadBinder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-645"></span><span id="isDeadBinder"><span class="annot"><span class="annottext">isDeadBinder :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isDeadBinder"><span class="hs-identifier hs-var hs-var">isDeadBinder</span></a></span></span><span> </span><span id="local-6989586621682591230"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591230"><span class="hs-identifier hs-var">bndr</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591230"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccInfo -&gt; Bool
</span><a href="GHC.Types.Basic.html#isDeadOcc"><span class="hs-identifier hs-var">isDeadOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; OccInfo
</span><a href="GHC.Types.Id.html#idOccInfo"><span class="hs-identifier hs-var">idOccInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591230"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-646"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>   </span><span class="hs-comment">-- TyVars count as not dead</span><span>
</span><span id="line-647"></span><span>
</span><span id="line-648"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
              Join variables
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-655"></span><span>
</span><span id="line-656"></span><span class="annot"><a href="GHC.Types.Id.html#idJoinArity"><span class="hs-identifier hs-type">idJoinArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a></span><span>
</span><span id="line-657"></span><span id="idJoinArity"><span class="annot"><span class="annottext">idJoinArity :: Id -&gt; Arity
</span><a href="GHC.Types.Id.html#idJoinArity"><span class="hs-identifier hs-var hs-var">idJoinArity</span></a></span></span><span> </span><span id="local-6989586621682591233"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591233"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; JoinPointHood
</span><a href="GHC.Types.Id.html#idJoinPointHood"><span class="hs-identifier hs-var">idJoinPointHood</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591233"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-658"></span><span>                   </span><span class="annot"><a href="GHC.Utils.Outputable.html#JoinPoint"><span class="hs-identifier hs-type">JoinPoint</span></a></span><span> </span><span id="local-6989586621682591234"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591234"><span class="hs-identifier hs-var">ar</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591234"><span class="hs-identifier hs-var">ar</span></a></span><span>
</span><span id="line-659"></span><span>                   </span><span class="annot"><span class="annottext">JoinPointHood
</span><a href="GHC.Utils.Outputable.html#NotJoinPoint"><span class="hs-identifier hs-var">NotJoinPoint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Arity
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;idJoinArity&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591233"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-660"></span><span>
</span><span id="line-661"></span><span class="annot"><a href="GHC.Types.Id.html#asJoinId"><span class="hs-identifier hs-type">asJoinId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span>
</span><span id="line-662"></span><span id="asJoinId"><span class="annot"><span class="annottext">asJoinId :: Id -&gt; Arity -&gt; Id
</span><a href="GHC.Types.Id.html#asJoinId"><span class="hs-identifier hs-var hs-var">asJoinId</span></a></span></span><span> </span><span id="local-6989586621682591235"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591235"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591236"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591236"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; SDoc -&gt; Id -&gt; Id
forall a. HasCallStack =&gt; Bool -&gt; String -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Trace.html#warnPprTrace"><span class="hs-identifier hs-var">warnPprTrace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isLocalId"><span class="hs-identifier hs-var">isLocalId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591235"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-663"></span><span>                         </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;global id being marked as join var&quot;</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591235"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Id) -&gt; Id -&gt; Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-664"></span><span>                    </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; SDoc -&gt; Id -&gt; Id
forall a. HasCallStack =&gt; Bool -&gt; String -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Trace.html#warnPprTrace"><span class="hs-identifier hs-var">warnPprTrace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="#local-6989586621682591238"><span class="hs-identifier hs-var">is_vanilla_or_join</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591235"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span>                         </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asJoinId&quot;</span></span><span>
</span><span id="line-666"></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591235"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails -&gt; SDoc
</span><a href="GHC.Types.Id.Info.html#pprIdDetails"><span class="hs-identifier hs-var">pprIdDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591235"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Id) -&gt; Id -&gt; Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-667"></span><span>                    </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591235"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails -&gt; Id
</span><a href="GHC.Types.Var.html#setIdDetails"><span class="hs-operator hs-var">`setIdDetails`</span></a></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Maybe [CbvMark] -&gt; IdDetails
</span><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-var">JoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591236"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Maybe [CbvMark]
</span><a href="GHC.Types.Id.html#idCbvMarks_maybe"><span class="hs-identifier hs-var">idCbvMarks_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591235"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-668"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-669"></span><span>    </span><span id="local-6989586621682591238"><span class="annot"><span class="annottext">is_vanilla_or_join :: Id -&gt; Bool
</span><a href="#local-6989586621682591238"><span class="hs-identifier hs-var hs-var">is_vanilla_or_join</span></a></span></span><span> </span><span id="local-6989586621682591241"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591241"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">Var.idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591241"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-670"></span><span>                              </span><span class="annot"><span class="annottext">IdDetails
</span><a href="GHC.Types.Id.Info.html#VanillaId"><span class="hs-identifier hs-var">VanillaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-671"></span><span>                              </span><span class="hs-comment">-- Can workers become join ids? Yes!</span><span>
</span><span id="line-672"></span><span>                              </span><span class="annot"><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-type">WorkerLikeId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Bool -&gt; Bool
forall a. String -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Trace.html#pprTraceDebug"><span class="hs-identifier hs-var">pprTraceDebug</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asJoinId (call by value function)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591241"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-673"></span><span>                              </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-674"></span><span>                              </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span class="annot"><a href="GHC.Types.Id.html#zapJoinId"><span class="hs-identifier hs-type">zapJoinId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-677"></span><span class="hs-comment">-- May be a regular id already</span><span>
</span><span id="line-678"></span><span id="zapJoinId"><span class="annot"><span class="annottext">zapJoinId :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapJoinId"><span class="hs-identifier hs-var hs-var">zapJoinId</span></a></span></span><span> </span><span id="local-6989586621682591243"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591243"><span class="hs-identifier hs-var">jid</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-var">isJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591243"><span class="hs-identifier hs-var">jid</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapIdTailCallInfo"><span class="hs-identifier hs-var">zapIdTailCallInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621682591244"><span class="hs-identifier hs-var">newIdDetails</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails -&gt; Id -&gt; Id
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591243"><span class="hs-identifier hs-var">jid</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails -&gt; Id
</span><a href="GHC.Types.Var.html#setIdDetails"><span class="hs-operator hs-var">`setIdDetails`</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621682591244"><span class="hs-identifier hs-var">newIdDetails</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>                                 </span><span class="hs-comment">-- Core Lint may complain if still marked</span><span>
</span><span id="line-680"></span><span>                                 </span><span class="hs-comment">-- as AlwaysTailCalled</span><span>
</span><span id="line-681"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591243"><span class="hs-identifier hs-var">jid</span></a></span><span>
</span><span id="line-682"></span><span>              </span><span class="hs-keyword">where</span><span>
</span><span id="line-683"></span><span>                </span><span id="local-6989586621682591244"><span class="annot"><span class="annottext">newIdDetails :: IdDetails
</span><a href="#local-6989586621682591244"><span class="hs-identifier hs-var hs-var">newIdDetails</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591243"><span class="hs-identifier hs-var">jid</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-684"></span><span>                  </span><span class="hs-comment">-- We treat join points as CBV functions. Even after they are floated out.</span><span>
</span><span id="line-685"></span><span>                  </span><span class="hs-comment">-- See Note [Use CBV semantics only for join points and workers]</span><span>
</span><span id="line-686"></span><span>                  </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682591245"><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591245"><span class="hs-identifier hs-var">marks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[CbvMark] -&gt; IdDetails
</span><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-var">WorkerLikeId</span></a></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591245"><span class="hs-identifier hs-var">marks</span></a></span><span>
</span><span id="line-687"></span><span>                  </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe [CbvMark]
</span><span class="hs-identifier hs-var">Nothing</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[CbvMark] -&gt; IdDetails
</span><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-var">WorkerLikeId</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-688"></span><span>                  </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IdDetails
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zapJoinId: newIdDetails can only be used if Id was a join Id.&quot;</span></span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span class="annot"><a href="GHC.Types.Id.html#asJoinId_maybe"><span class="hs-identifier hs-type">asJoinId_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#JoinPointHood"><span class="hs-identifier hs-type">JoinPointHood</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-692"></span><span id="asJoinId_maybe"><span class="annot"><span class="annottext">asJoinId_maybe :: Id -&gt; JoinPointHood -&gt; Id
</span><a href="GHC.Types.Id.html#asJoinId_maybe"><span class="hs-identifier hs-var hs-var">asJoinId_maybe</span></a></span></span><span> </span><span id="local-6989586621682591246"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591246"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#JoinPoint"><span class="hs-identifier hs-type">JoinPoint</span></a></span><span> </span><span id="local-6989586621682591247"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591247"><span class="hs-identifier hs-var">arity</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Arity -&gt; Id
</span><a href="GHC.Types.Id.html#asJoinId"><span class="hs-identifier hs-var">asJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591246"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591247"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-693"></span><span class="annot"><a href="GHC.Types.Id.html#asJoinId_maybe"><span class="hs-identifier hs-var">asJoinId_maybe</span></a></span><span> </span><span id="local-6989586621682591248"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591248"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="annot"><span class="annottext">JoinPointHood
</span><a href="GHC.Utils.Outputable.html#NotJoinPoint"><span class="hs-identifier hs-var">NotJoinPoint</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapJoinId"><span class="hs-identifier hs-var">zapJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591248"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-694"></span><span>
</span><span id="line-695"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{IdInfo stuff}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-702"></span><span>
</span><span id="line-703"></span><span>        </span><span class="hs-comment">---------------------------------</span><span>
</span><span id="line-704"></span><span>        </span><span class="hs-comment">-- ARITY</span><span>
</span><span id="line-705"></span><span class="annot"><a href="GHC.Types.Id.html#idArity"><span class="hs-identifier hs-type">idArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span>
</span><span id="line-706"></span><span id="idArity"><span class="annot"><span class="annottext">idArity :: Id -&gt; Arity
</span><a href="GHC.Types.Id.html#idArity"><span class="hs-identifier hs-var hs-var">idArity</span></a></span></span><span> </span><span id="local-6989586621682591249"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591249"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Arity
</span><a href="GHC.Types.Id.Info.html#arityInfo"><span class="hs-identifier hs-var">arityInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591249"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>
</span><span id="line-708"></span><span class="annot"><a href="GHC.Types.Id.html#setIdArity"><span class="hs-identifier hs-type">setIdArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-709"></span><span id="setIdArity"><span class="annot"><span class="annottext">setIdArity :: Id -&gt; Arity -&gt; Id
</span><a href="GHC.Types.Id.html#setIdArity"><span class="hs-identifier hs-var hs-var">setIdArity</span></a></span></span><span> </span><span id="local-6989586621682591251"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591251"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591252"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591252"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; Arity -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setArityInfo"><span class="hs-operator hs-var">`setArityInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591252"><span class="hs-identifier hs-var">arity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591251"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-710"></span><span>
</span><span id="line-711"></span><span class="annot"><a href="GHC.Types.Id.html#idCallArity"><span class="hs-identifier hs-type">idCallArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span>
</span><span id="line-712"></span><span id="idCallArity"><span class="annot"><span class="annottext">idCallArity :: Id -&gt; Arity
</span><a href="GHC.Types.Id.html#idCallArity"><span class="hs-identifier hs-var hs-var">idCallArity</span></a></span></span><span> </span><span id="local-6989586621682591254"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591254"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Arity
</span><a href="GHC.Types.Id.Info.html#callArityInfo"><span class="hs-identifier hs-var">callArityInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591254"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span class="annot"><a href="GHC.Types.Id.html#setIdCallArity"><span class="hs-identifier hs-type">setIdCallArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-715"></span><span id="setIdCallArity"><span class="annot"><span class="annottext">setIdCallArity :: Id -&gt; Arity -&gt; Id
</span><a href="GHC.Types.Id.html#setIdCallArity"><span class="hs-identifier hs-var hs-var">setIdCallArity</span></a></span></span><span> </span><span id="local-6989586621682591256"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591256"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591257"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591257"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; Arity -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setCallArityInfo"><span class="hs-operator hs-var">`setCallArityInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591257"><span class="hs-identifier hs-var">arity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591256"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-716"></span><span>
</span><span id="line-717"></span><span class="hs-comment">-- | This function counts all arguments post-unarisation, which includes</span><span>
</span><span id="line-718"></span><span class="hs-comment">-- arguments with no runtime representation -- see Note [Unarisation and arity]</span><span>
</span><span id="line-719"></span><span class="annot"><a href="GHC.Types.Id.html#idFunRepArity"><span class="hs-identifier hs-type">idFunRepArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#RepArity"><span class="hs-identifier hs-type">RepArity</span></a></span><span>
</span><span id="line-720"></span><span id="idFunRepArity"><span class="annot"><span class="annottext">idFunRepArity :: Id -&gt; Arity
</span><a href="GHC.Types.Id.html#idFunRepArity"><span class="hs-identifier hs-var hs-var">idFunRepArity</span></a></span></span><span> </span><span id="local-6989586621682591260"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591260"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Kind -&gt; Arity
</span><a href="GHC.Types.RepType.html#countFunRepArgs"><span class="hs-identifier hs-var">countFunRepArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Arity
</span><a href="GHC.Types.Id.html#idArity"><span class="hs-identifier hs-var">idArity</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591260"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591260"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-721"></span><span>
</span><span id="line-722"></span><span class="hs-comment">-- | Returns true if an application to n args diverges or throws an exception</span><span>
</span><span id="line-723"></span><span class="hs-comment">-- See Note [Dead ends] in &quot;GHC.Types.Demand&quot;.</span><span>
</span><span id="line-724"></span><span class="annot"><a href="GHC.Types.Id.html#isDeadEndId"><span class="hs-identifier hs-type">isDeadEndId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-725"></span><span id="isDeadEndId"><span class="annot"><span class="annottext">isDeadEndId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isDeadEndId"><span class="hs-identifier hs-var hs-var">isDeadEndId</span></a></span></span><span> </span><span id="local-6989586621682591262"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591262"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-726"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591262"><span class="hs-identifier hs-var">v</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DmdSig -&gt; Bool
</span><a href="GHC.Types.Demand.html#isDeadEndSig"><span class="hs-identifier hs-var">isDeadEndSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; DmdSig
</span><a href="GHC.Types.Id.html#idDmdSig"><span class="hs-identifier hs-var">idDmdSig</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591262"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-728"></span><span>
</span><span id="line-729"></span><span class="annot"><span class="hs-comment">-- | Accesses the 'Id''s 'dmdSigInfo'.</span></span><span>
</span><span id="line-730"></span><span class="annot"><a href="GHC.Types.Id.html#idDmdSig"><span class="hs-identifier hs-type">idDmdSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Demand.html#DmdSig"><span class="hs-identifier hs-type">DmdSig</span></a></span><span>
</span><span id="line-731"></span><span id="idDmdSig"><span class="annot"><span class="annottext">idDmdSig :: Id -&gt; DmdSig
</span><a href="GHC.Types.Id.html#idDmdSig"><span class="hs-identifier hs-var hs-var">idDmdSig</span></a></span></span><span> </span><span id="local-6989586621682591265"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591265"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; DmdSig
</span><a href="GHC.Types.Id.Info.html#dmdSigInfo"><span class="hs-identifier hs-var">dmdSigInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591265"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-732"></span><span>
</span><span id="line-733"></span><span class="annot"><a href="GHC.Types.Id.html#setIdDmdSig"><span class="hs-identifier hs-type">setIdDmdSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Demand.html#DmdSig"><span class="hs-identifier hs-type">DmdSig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-734"></span><span id="setIdDmdSig"><span class="annot"><span class="annottext">setIdDmdSig :: Id -&gt; DmdSig -&gt; Id
</span><a href="GHC.Types.Id.html#setIdDmdSig"><span class="hs-identifier hs-var hs-var">setIdDmdSig</span></a></span></span><span> </span><span id="local-6989586621682591266"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591266"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591267"><span class="annot"><span class="annottext">DmdSig
</span><a href="#local-6989586621682591267"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; DmdSig -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setDmdSigInfo"><span class="hs-operator hs-var">`setDmdSigInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">DmdSig
</span><a href="#local-6989586621682591267"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591266"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-735"></span><span>
</span><span id="line-736"></span><span class="annot"><a href="GHC.Types.Id.html#idCprSig"><span class="hs-identifier hs-type">idCprSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Cpr.html#CprSig"><span class="hs-identifier hs-type">CprSig</span></a></span><span>
</span><span id="line-737"></span><span id="idCprSig"><span class="annot"><span class="annottext">idCprSig :: Id -&gt; CprSig
</span><a href="GHC.Types.Id.html#idCprSig"><span class="hs-identifier hs-var hs-var">idCprSig</span></a></span></span><span> </span><span id="local-6989586621682591269"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591269"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; CprSig
</span><a href="GHC.Types.Id.Info.html#cprSigInfo"><span class="hs-identifier hs-var">cprSigInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591269"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span>
</span><span id="line-739"></span><span class="annot"><a href="GHC.Types.Id.html#setIdCprSig"><span class="hs-identifier hs-type">setIdCprSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Cpr.html#CprSig"><span class="hs-identifier hs-type">CprSig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-740"></span><span id="setIdCprSig"><span class="annot"><span class="annottext">setIdCprSig :: Id -&gt; CprSig -&gt; Id
</span><a href="GHC.Types.Id.html#setIdCprSig"><span class="hs-identifier hs-var hs-var">setIdCprSig</span></a></span></span><span> </span><span id="local-6989586621682591271"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591271"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591272"><span class="annot"><span class="annottext">CprSig
</span><a href="#local-6989586621682591272"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682591273"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591273"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; CprSig -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setCprSigInfo"><span class="hs-identifier hs-var">setCprSigInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591273"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">CprSig
</span><a href="#local-6989586621682591272"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591271"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span class="annot"><a href="GHC.Types.Id.html#zapIdDmdSig"><span class="hs-identifier hs-type">zapIdDmdSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-743"></span><span id="zapIdDmdSig"><span class="annot"><span class="annottext">zapIdDmdSig :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapIdDmdSig"><span class="hs-identifier hs-var hs-var">zapIdDmdSig</span></a></span></span><span> </span><span id="local-6989586621682591275"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591275"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; DmdSig -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setDmdSigInfo"><span class="hs-operator hs-var">`setDmdSigInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">DmdSig
</span><a href="GHC.Types.Demand.html#nopSig"><span class="hs-identifier hs-var">nopSig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591275"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span class="hs-comment">-- | `isStrictId` says whether either</span><span>
</span><span id="line-746"></span><span class="hs-comment">--   (a) the 'Id' has a strict demand placed on it or</span><span>
</span><span id="line-747"></span><span class="hs-comment">--   (b) definitely has a \&quot;strict type\&quot;, such that it can always be</span><span>
</span><span id="line-748"></span><span class="hs-comment">--       evaluated strictly (i.e an unlifted type)</span><span>
</span><span id="line-749"></span><span class="hs-comment">-- We need to check (b) as well as (a), because when the demand for the</span><span>
</span><span id="line-750"></span><span class="hs-comment">-- given `id` hasn't been computed yet but `id` has a strict</span><span>
</span><span id="line-751"></span><span class="hs-comment">-- type, we still want `isStrictId id` to be `True`.</span><span>
</span><span id="line-752"></span><span class="hs-comment">-- Returns False if the type is levity polymorphic; False is always safe.</span><span>
</span><span id="line-753"></span><span class="annot"><a href="GHC.Types.Id.html#isStrictId"><span class="hs-identifier hs-type">isStrictId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-754"></span><span id="isStrictId"><span class="annot"><span class="annottext">isStrictId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isStrictId"><span class="hs-identifier hs-var hs-var">isStrictId</span></a></span></span><span> </span><span id="local-6989586621682591278"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591278"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-755"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; Bool -&gt; Bool
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591278"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;isStrictId: not an id: &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591278"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-756"></span><span>    </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-var">isJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591278"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-757"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Kind -&gt; Bool
Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#isStrictType"><span class="hs-identifier hs-var">isStrictType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591278"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-758"></span><span>                  </span><span class="annot"><span class="annottext">Demand -&gt; Bool
</span><a href="GHC.Types.Demand.html#isStrUsedDmd"><span class="hs-identifier hs-var">isStrUsedDmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Demand
</span><a href="GHC.Types.Id.html#idDemandInfo"><span class="hs-identifier hs-var">idDemandInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591278"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-759"></span><span>                  </span><span class="hs-comment">-- Take the best of both strictnesses - old and new</span><span>
</span><span id="line-760"></span><span>
</span><span id="line-761"></span><span class="annot"><a href="GHC.Types.Id.html#idTagSig_maybe"><span class="hs-identifier hs-type">idTagSig_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Stg.InferTags.TagSig.html#TagSig"><span class="hs-identifier hs-type">TagSig</span></a></span><span>
</span><span id="line-762"></span><span id="idTagSig_maybe"><span class="annot"><span class="annottext">idTagSig_maybe :: Id -&gt; Maybe TagSig
</span><a href="GHC.Types.Id.html#idTagSig_maybe"><span class="hs-identifier hs-var hs-var">idTagSig_maybe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Maybe TagSig
</span><a href="GHC.Types.Id.Info.html#tagSig"><span class="hs-identifier hs-var">tagSig</span></a></span><span> </span><span class="annot"><span class="annottext">(IdInfo -&gt; Maybe TagSig) -&gt; (Id -&gt; IdInfo) -&gt; Id -&gt; Maybe TagSig
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span>
</span><span id="line-763"></span><span>
</span><span id="line-764"></span><span class="hs-comment">---------------------------------</span><span>
</span><span id="line-765"></span><span class="hs-comment">-- UNFOLDING</span><span>
</span><span id="line-766"></span><span>
</span><span id="line-767"></span><span class="hs-comment">-- | Returns the 'Id's unfolding, but does not expose the unfolding of a strong</span><span>
</span><span id="line-768"></span><span class="hs-comment">-- loop breaker. See 'unfoldingInfo'.</span><span>
</span><span id="line-769"></span><span class="hs-comment">--</span><span>
</span><span id="line-770"></span><span class="hs-comment">-- If you really want the unfolding of a strong loopbreaker, call 'realIdUnfolding'.</span><span>
</span><span id="line-771"></span><span class="annot"><a href="GHC.Types.Id.html#idUnfolding"><span class="hs-identifier hs-type">idUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#IdUnfoldingFun"><span class="hs-identifier hs-type">IdUnfoldingFun</span></a></span><span>
</span><span id="line-772"></span><span id="idUnfolding"><span class="annot"><span class="annottext">idUnfolding :: Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#idUnfolding"><span class="hs-identifier hs-var hs-var">idUnfolding</span></a></span></span><span> </span><span id="local-6989586621682591284"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591284"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Unfolding
</span><a href="GHC.Types.Id.Info.html#unfoldingInfo"><span class="hs-identifier hs-var">unfoldingInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591284"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-773"></span><span>
</span><span id="line-774"></span><span class="annot"><a href="GHC.Types.Id.html#noUnfoldingFun"><span class="hs-identifier hs-type">noUnfoldingFun</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#IdUnfoldingFun"><span class="hs-identifier hs-type">IdUnfoldingFun</span></a></span><span>
</span><span id="line-775"></span><span id="noUnfoldingFun"><span class="annot"><span class="annottext">noUnfoldingFun :: Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#noUnfoldingFun"><span class="hs-identifier hs-var hs-var">noUnfoldingFun</span></a></span></span><span> </span><span id="local-6989586621682591285"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591285"><span class="hs-identifier hs-var">_id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#noUnfolding"><span class="hs-identifier hs-var">noUnfolding</span></a></span><span>
</span><span id="line-776"></span><span>
</span><span id="line-777"></span><span class="hs-comment">-- | Returns an unfolding only if</span><span>
</span><span id="line-778"></span><span class="hs-comment">--   (a) not a strong loop breaker and</span><span>
</span><span id="line-779"></span><span class="hs-comment">--   (b) always active</span><span>
</span><span id="line-780"></span><span class="annot"><a href="GHC.Types.Id.html#alwaysActiveUnfoldingFun"><span class="hs-identifier hs-type">alwaysActiveUnfoldingFun</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#IdUnfoldingFun"><span class="hs-identifier hs-type">IdUnfoldingFun</span></a></span><span>
</span><span id="line-781"></span><span id="alwaysActiveUnfoldingFun"><span class="annot"><span class="annottext">alwaysActiveUnfoldingFun :: Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#alwaysActiveUnfoldingFun"><span class="hs-identifier hs-var hs-var">alwaysActiveUnfoldingFun</span></a></span></span><span> </span><span id="local-6989586621682591286"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591286"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-782"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Activation -&gt; Bool
</span><a href="GHC.Types.Basic.html#isAlwaysActive"><span class="hs-identifier hs-var">isAlwaysActive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Activation
</span><a href="GHC.Types.Id.html#idInlineActivation"><span class="hs-identifier hs-var">idInlineActivation</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591286"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#idUnfolding"><span class="hs-identifier hs-var">idUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591286"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-783"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#noUnfolding"><span class="hs-identifier hs-var">noUnfolding</span></a></span><span>
</span><span id="line-784"></span><span>
</span><span id="line-785"></span><span class="hs-comment">-- | Returns an unfolding only if</span><span>
</span><span id="line-786"></span><span class="hs-comment">--   (a) not a strong loop breaker and</span><span>
</span><span id="line-787"></span><span class="hs-comment">--   (b) active in according to is_active</span><span>
</span><span id="line-788"></span><span class="annot"><a href="GHC.Types.Id.html#whenActiveUnfoldingFun"><span class="hs-identifier hs-type">whenActiveUnfoldingFun</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#Activation"><span class="hs-identifier hs-type">Activation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#IdUnfoldingFun"><span class="hs-identifier hs-type">IdUnfoldingFun</span></a></span><span>
</span><span id="line-789"></span><span id="whenActiveUnfoldingFun"><span class="annot"><span class="annottext">whenActiveUnfoldingFun :: (Activation -&gt; Bool) -&gt; Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#whenActiveUnfoldingFun"><span class="hs-identifier hs-var hs-var">whenActiveUnfoldingFun</span></a></span></span><span> </span><span id="local-6989586621682591288"><span class="annot"><span class="annottext">Activation -&gt; Bool
</span><a href="#local-6989586621682591288"><span class="hs-identifier hs-var">is_active</span></a></span></span><span> </span><span id="local-6989586621682591289"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591289"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-790"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Activation -&gt; Bool
</span><a href="#local-6989586621682591288"><span class="hs-identifier hs-var">is_active</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Activation
</span><a href="GHC.Types.Id.html#idInlineActivation"><span class="hs-identifier hs-var">idInlineActivation</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591289"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#idUnfolding"><span class="hs-identifier hs-var">idUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591289"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-791"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a></span><span>
</span><span id="line-792"></span><span>
</span><span id="line-793"></span><span class="annot"><a href="GHC.Types.Id.html#realIdUnfolding"><span class="hs-identifier hs-type">realIdUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span>
</span><span id="line-794"></span><span class="annot"><span class="hs-comment">-- ^ Expose the unfolding if there is one, including for loop breakers</span></span><span>
</span><span id="line-795"></span><span id="realIdUnfolding"><span class="annot"><span class="annottext">realIdUnfolding :: Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#realIdUnfolding"><span class="hs-identifier hs-var hs-var">realIdUnfolding</span></a></span></span><span> </span><span id="local-6989586621682591290"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591290"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Unfolding
</span><a href="GHC.Types.Id.Info.html#realUnfoldingInfo"><span class="hs-identifier hs-var">realUnfoldingInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591290"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>
</span><span id="line-797"></span><span class="annot"><a href="GHC.Types.Id.html#setIdUnfolding"><span class="hs-identifier hs-type">setIdUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-798"></span><span id="setIdUnfolding"><span class="annot"><span class="annottext">setIdUnfolding :: Id -&gt; Unfolding -&gt; Id
</span><a href="GHC.Types.Id.html#setIdUnfolding"><span class="hs-identifier hs-var hs-var">setIdUnfolding</span></a></span></span><span> </span><span id="local-6989586621682591292"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591292"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591293"><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621682591293"><span class="hs-identifier hs-var">unfolding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; Unfolding -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setUnfoldingInfo"><span class="hs-operator hs-var">`setUnfoldingInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621682591293"><span class="hs-identifier hs-var">unfolding</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591292"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-799"></span><span>
</span><span id="line-800"></span><span class="annot"><a href="GHC.Types.Id.html#idDemandInfo"><span class="hs-identifier hs-type">idDemandInfo</span></a></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Demand.html#Demand"><span class="hs-identifier hs-type">Demand</span></a></span><span>
</span><span id="line-801"></span><span id="idDemandInfo"><span class="annot"><span class="annottext">idDemandInfo :: Id -&gt; Demand
</span><a href="GHC.Types.Id.html#idDemandInfo"><span class="hs-identifier hs-var hs-var">idDemandInfo</span></a></span></span><span>       </span><span id="local-6989586621682591295"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591295"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Demand
</span><a href="GHC.Types.Id.Info.html#demandInfo"><span class="hs-identifier hs-var">demandInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591295"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>
</span><span id="line-803"></span><span class="annot"><a href="GHC.Types.Id.html#setIdDemandInfo"><span class="hs-identifier hs-type">setIdDemandInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Demand.html#Demand"><span class="hs-identifier hs-type">Demand</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-804"></span><span id="setIdDemandInfo"><span class="annot"><span class="annottext">setIdDemandInfo :: Id -&gt; Demand -&gt; Id
</span><a href="GHC.Types.Id.html#setIdDemandInfo"><span class="hs-identifier hs-var hs-var">setIdDemandInfo</span></a></span></span><span> </span><span id="local-6989586621682591297"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591297"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591298"><span class="annot"><span class="annottext">Demand
</span><a href="#local-6989586621682591298"><span class="hs-identifier hs-var">dmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; Demand -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setDemandInfo"><span class="hs-operator hs-var">`setDemandInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">Demand
</span><a href="#local-6989586621682591298"><span class="hs-identifier hs-var">dmd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591297"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-805"></span><span>
</span><span id="line-806"></span><span class="annot"><a href="GHC.Types.Id.html#setIdTagSig"><span class="hs-identifier hs-type">setIdTagSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Stg.InferTags.TagSig.html#TagSig"><span class="hs-identifier hs-type">TagSig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-807"></span><span id="setIdTagSig"><span class="annot"><span class="annottext">setIdTagSig :: Id -&gt; TagSig -&gt; Id
</span><a href="GHC.Types.Id.html#setIdTagSig"><span class="hs-identifier hs-var hs-var">setIdTagSig</span></a></span></span><span> </span><span id="local-6989586621682591300"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591300"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591301"><span class="annot"><span class="annottext">TagSig
</span><a href="#local-6989586621682591301"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; TagSig -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setTagSig"><span class="hs-operator hs-var">`setTagSig`</span></a></span><span> </span><span class="annot"><span class="annottext">TagSig
</span><a href="#local-6989586621682591301"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591300"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-808"></span><span>
</span><span id="line-809"></span><span class="annot"><span class="hs-comment">-- | If all marks are NotMarkedStrict we just set nothing.</span></span><span>
</span><span id="line-810"></span><span class="annot"><a href="GHC.Types.Id.html#setIdCbvMarks"><span class="hs-identifier hs-type">setIdCbvMarks</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Basic.html#CbvMark"><span class="hs-identifier hs-type">CbvMark</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-811"></span><span id="setIdCbvMarks"><span class="annot"><span class="annottext">setIdCbvMarks :: Id -&gt; [CbvMark] -&gt; Id
</span><a href="GHC.Types.Id.html#setIdCbvMarks"><span class="hs-identifier hs-var hs-var">setIdCbvMarks</span></a></span></span><span> </span><span id="local-6989586621682591303"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591304"><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591304"><span class="hs-identifier hs-var">marks</span></a></span></span><span>
</span><span id="line-812"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CbvMark -&gt; Bool) -&gt; [CbvMark] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">CbvMark -&gt; Bool
</span><a href="GHC.Types.Basic.html#isMarkedCbv"><span class="hs-identifier hs-var">isMarkedCbv</span></a></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591304"><span class="hs-identifier hs-var">marks</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-813"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-814"></span><span>      </span><span class="hs-comment">-- pprTrace &quot;setMarks:&quot; (ppr id &lt;&gt; text &quot;:&quot; &lt;&gt; ppr marks) $</span><span>
</span><span id="line-815"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-816"></span><span>        </span><span class="hs-comment">-- good ol (likely worker) function</span><span>
</span><span id="line-817"></span><span>        </span><span class="annot"><span class="annottext">IdDetails
</span><a href="GHC.Types.Id.Info.html#VanillaId"><span class="hs-identifier hs-var">VanillaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>      </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails -&gt; Id
</span><a href="GHC.Types.Var.html#setIdDetails"><span class="hs-operator hs-var">`setIdDetails`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CbvMark] -&gt; IdDetails
</span><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-var">WorkerLikeId</span></a></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591307"><span class="hs-identifier hs-var">trimmedMarks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-818"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span id="local-6989586621682591308"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591308"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe [CbvMark]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails -&gt; Id
</span><a href="GHC.Types.Var.html#setIdDetails"><span class="hs-operator hs-var">`setIdDetails`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; Maybe [CbvMark] -&gt; IdDetails
</span><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-var">JoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591308"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CbvMark] -&gt; Maybe [CbvMark]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591307"><span class="hs-identifier hs-var">trimmedMarks</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-819"></span><span>        </span><span class="hs-comment">-- Updating an existing call by value function.</span><span>
</span><span id="line-820"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-type">WorkerLikeId</span></a></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails -&gt; Id
</span><a href="GHC.Types.Var.html#setIdDetails"><span class="hs-operator hs-var">`setIdDetails`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CbvMark] -&gt; IdDetails
</span><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-var">WorkerLikeId</span></a></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591307"><span class="hs-identifier hs-var">trimmedMarks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-821"></span><span>        </span><span class="hs-comment">-- Do nothing for these</span><span>
</span><span id="line-822"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelId"><span class="hs-identifier hs-type">RecSelId</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-823"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#DFunId"><span class="hs-identifier hs-type">DFunId</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-824"></span><span>        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Id -&gt; Id
forall a. String -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Trace.html#pprTrace"><span class="hs-identifier hs-var">pprTrace</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;setIdCbvMarks: Unable to set cbv marks for&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-825"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;marks:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[CbvMark] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591304"><span class="hs-identifier hs-var">marks</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-826"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;idDetails:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IdDetails -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-827"></span><span>
</span><span id="line-828"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-829"></span><span>      </span><span class="hs-comment">-- (Currently) no point in passing args beyond the arity unlifted.</span><span>
</span><span id="line-830"></span><span>      </span><span class="hs-comment">-- We would have to eta expand all call sites to (length marks).</span><span>
</span><span id="line-831"></span><span>      </span><span class="hs-comment">-- Perhaps that's sensible but for now be conservative.</span><span>
</span><span id="line-832"></span><span>      </span><span class="hs-comment">-- Similarly we don't need any lazy marks at the end of the list.</span><span>
</span><span id="line-833"></span><span>      </span><span class="hs-comment">-- This way the length of the list is always exactly number of arguments</span><span>
</span><span id="line-834"></span><span>      </span><span class="hs-comment">-- that must be visible to CodeGen. See See Note [CBV Function Ids]</span><span>
</span><span id="line-835"></span><span>      </span><span class="hs-comment">-- for more details.</span><span>
</span><span id="line-836"></span><span>      </span><span id="local-6989586621682591307"><span class="annot"><span class="annottext">trimmedMarks :: [CbvMark]
</span><a href="#local-6989586621682591307"><span class="hs-identifier hs-var hs-var">trimmedMarks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CbvMark -&gt; Bool) -&gt; [CbvMark] -&gt; [CbvMark]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#dropWhileEndLE"><span class="hs-identifier hs-var">dropWhileEndLE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (CbvMark -&gt; Bool) -&gt; CbvMark -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CbvMark -&gt; Bool
</span><a href="GHC.Types.Basic.html#isMarkedCbv"><span class="hs-identifier hs-var">isMarkedCbv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([CbvMark] -&gt; [CbvMark]) -&gt; [CbvMark] -&gt; [CbvMark]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; [CbvMark] -&gt; [CbvMark]
forall a. Arity -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Arity
</span><a href="GHC.Types.Id.html#idArity"><span class="hs-identifier hs-var">idArity</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591303"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591304"><span class="hs-identifier hs-var">marks</span></a></span><span>
</span><span id="line-837"></span><span>
</span><span id="line-838"></span><span class="annot"><a href="GHC.Types.Id.html#idCbvMarks_maybe"><span class="hs-identifier hs-type">idCbvMarks_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Basic.html#CbvMark"><span class="hs-identifier hs-type">CbvMark</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-839"></span><span id="idCbvMarks_maybe"><span class="annot"><span class="annottext">idCbvMarks_maybe :: Id -&gt; Maybe [CbvMark]
</span><a href="GHC.Types.Id.html#idCbvMarks_maybe"><span class="hs-identifier hs-var hs-var">idCbvMarks_maybe</span></a></span></span><span> </span><span id="local-6989586621682591314"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591314"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591314"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-840"></span><span>  </span><span class="annot"><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-type">WorkerLikeId</span></a></span><span> </span><span id="local-6989586621682591315"><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591315"><span class="hs-identifier hs-var">marks</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[CbvMark] -&gt; Maybe [CbvMark]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591315"><span class="hs-identifier hs-var">marks</span></a></span><span>
</span><span id="line-841"></span><span>  </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span id="local-6989586621682591316"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591316"><span class="hs-identifier hs-var">_arity</span></a></span></span><span> </span><span id="local-6989586621682591317"><span class="annot"><span class="annottext">Maybe [CbvMark]
</span><a href="#local-6989586621682591317"><span class="hs-identifier hs-var">marks</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe [CbvMark]
</span><a href="#local-6989586621682591317"><span class="hs-identifier hs-var">marks</span></a></span><span>
</span><span id="line-842"></span><span>  </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe [CbvMark]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-843"></span><span>
</span><span id="line-844"></span><span class="hs-comment">-- Id must be called with at least this arity in order to allow arguments to</span><span>
</span><span id="line-845"></span><span class="hs-comment">-- be passed unlifted.</span><span>
</span><span id="line-846"></span><span class="annot"><a href="GHC.Types.Id.html#idCbvMarkArity"><span class="hs-identifier hs-type">idCbvMarkArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span>
</span><span id="line-847"></span><span id="idCbvMarkArity"><span class="annot"><span class="annottext">idCbvMarkArity :: Id -&gt; Arity
</span><a href="GHC.Types.Id.html#idCbvMarkArity"><span class="hs-identifier hs-var hs-var">idCbvMarkArity</span></a></span></span><span> </span><span id="local-6989586621682591318"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591318"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; ([CbvMark] -&gt; Arity) -&gt; Maybe [CbvMark] -&gt; Arity
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[CbvMark] -&gt; Arity
forall a. [a] -&gt; Arity
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Arity
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Maybe [CbvMark]
</span><a href="GHC.Types.Id.html#idCbvMarks_maybe"><span class="hs-identifier hs-var">idCbvMarks_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591318"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-848"></span><span>
</span><span id="line-849"></span><span class="annot"><span class="hs-comment">-- | Remove any cbv marks on arguments from a given Id.</span></span><span>
</span><span id="line-850"></span><span class="annot"><a href="GHC.Types.Id.html#asNonWorkerLikeId"><span class="hs-identifier hs-type">asNonWorkerLikeId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-851"></span><span id="asNonWorkerLikeId"><span class="annot"><span class="annottext">asNonWorkerLikeId :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#asNonWorkerLikeId"><span class="hs-identifier hs-var hs-var">asNonWorkerLikeId</span></a></span></span><span> </span><span id="local-6989586621682591321"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591321"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-852"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682591322"><span class="annot"><span class="annottext">details :: Maybe IdDetails
</span><a href="#local-6989586621682591322"><span class="hs-identifier hs-var hs-var">details</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591321"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-853"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-type">WorkerLikeId</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IdDetails -&gt; Maybe IdDetails
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(IdDetails -&gt; Maybe IdDetails) -&gt; IdDetails -&gt; Maybe IdDetails
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IdDetails
</span><a href="GHC.Types.Id.Info.html#VanillaId"><span class="hs-identifier hs-var">VanillaId</span></a></span><span>
</span><span id="line-854"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span id="local-6989586621682591323"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591323"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IdDetails -&gt; Maybe IdDetails
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(IdDetails -&gt; Maybe IdDetails) -&gt; IdDetails -&gt; Maybe IdDetails
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Maybe [CbvMark] -&gt; IdDetails
</span><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-var">JoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591323"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [CbvMark]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-855"></span><span>        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe IdDetails
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-856"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Maybe IdDetails -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#maybeModifyIdDetails"><span class="hs-identifier hs-var">maybeModifyIdDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IdDetails
</span><a href="#local-6989586621682591322"><span class="hs-identifier hs-var">details</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591321"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-857"></span><span>
</span><span id="line-858"></span><span class="annot"><span class="hs-comment">-- | Turn this id into a WorkerLikeId if possible.</span></span><span>
</span><span id="line-859"></span><span class="annot"><a href="GHC.Types.Id.html#asWorkerLikeId"><span class="hs-identifier hs-type">asWorkerLikeId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-860"></span><span id="asWorkerLikeId"><span class="annot"><span class="annottext">asWorkerLikeId :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#asWorkerLikeId"><span class="hs-identifier hs-var hs-var">asWorkerLikeId</span></a></span></span><span> </span><span id="local-6989586621682591324"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591324"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-861"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682591325"><span class="annot"><span class="annottext">details :: Maybe IdDetails
</span><a href="#local-6989586621682591325"><span class="hs-identifier hs-var hs-var">details</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591324"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-862"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-type">WorkerLikeId</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe IdDetails
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-863"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span id="local-6989586621682591326"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591326"><span class="hs-identifier hs-var">_arity</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe IdDetails
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-864"></span><span>        </span><span class="annot"><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-type">JoinId</span></a></span><span> </span><span id="local-6989586621682591327"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591327"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe [CbvMark]
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IdDetails -&gt; Maybe IdDetails
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; Maybe [CbvMark] -&gt; IdDetails
</span><a href="GHC.Types.Id.Info.html#JoinId"><span class="hs-identifier hs-var">JoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591327"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CbvMark] -&gt; Maybe [CbvMark]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-865"></span><span>        </span><span class="annot"><span class="annottext">IdDetails
</span><a href="GHC.Types.Id.Info.html#VanillaId"><span class="hs-identifier hs-var">VanillaId</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IdDetails -&gt; Maybe IdDetails
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(IdDetails -&gt; Maybe IdDetails) -&gt; IdDetails -&gt; Maybe IdDetails
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[CbvMark] -&gt; IdDetails
</span><a href="GHC.Types.Id.Info.html#WorkerLikeId"><span class="hs-identifier hs-var">WorkerLikeId</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-866"></span><span>        </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe IdDetails
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-867"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Maybe IdDetails -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#maybeModifyIdDetails"><span class="hs-identifier hs-var">maybeModifyIdDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IdDetails
</span><a href="#local-6989586621682591325"><span class="hs-identifier hs-var">details</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591324"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-868"></span><span>
</span><span id="line-869"></span><span class="annot"><a href="GHC.Types.Id.html#setCaseBndrEvald"><span class="hs-identifier hs-type">setCaseBndrEvald</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#StrictnessMark"><span class="hs-identifier hs-type">StrictnessMark</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-870"></span><span class="hs-comment">-- Used for variables bound by a case expressions, both the case-binder</span><span>
</span><span id="line-871"></span><span class="hs-comment">-- itself, and any pattern-bound variables that are argument of a</span><span>
</span><span id="line-872"></span><span class="hs-comment">-- strict constructor.  It just marks the variable as already-evaluated,</span><span>
</span><span id="line-873"></span><span class="hs-comment">-- so that (for example) a subsequent 'seq' can be dropped</span><span>
</span><span id="line-874"></span><span id="setCaseBndrEvald"><span class="annot"><span class="annottext">setCaseBndrEvald :: StrictnessMark -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#setCaseBndrEvald"><span class="hs-identifier hs-var hs-var">setCaseBndrEvald</span></a></span></span><span> </span><span id="local-6989586621682591328"><span class="annot"><span class="annottext">StrictnessMark
</span><a href="#local-6989586621682591328"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621682591329"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591329"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-875"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">StrictnessMark -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isMarkedStrict"><span class="hs-identifier hs-var">isMarkedStrict</span></a></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="#local-6989586621682591328"><span class="hs-identifier hs-var">str</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591329"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Unfolding -&gt; Id
</span><a href="GHC.Types.Id.html#setIdUnfolding"><span class="hs-operator hs-var">`setIdUnfolding`</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#evaldUnfolding"><span class="hs-identifier hs-var">evaldUnfolding</span></a></span><span>
</span><span id="line-876"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591329"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-877"></span><span>
</span><span id="line-878"></span><span class="annot"><span class="hs-comment">-- | Similar to trimUnfolding, but also removes evaldness info.</span></span><span>
</span><span id="line-879"></span><span class="annot"><a href="GHC.Types.Id.html#zapIdUnfolding"><span class="hs-identifier hs-type">zapIdUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-880"></span><span id="zapIdUnfolding"><span class="annot"><span class="annottext">zapIdUnfolding :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapIdUnfolding"><span class="hs-identifier hs-var hs-var">zapIdUnfolding</span></a></span></span><span> </span><span id="local-6989586621682591331"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591331"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-881"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591331"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Unfolding -&gt; Bool
</span><a href="GHC.Core.html#hasSomeUnfolding"><span class="hs-identifier hs-var">hasSomeUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#idUnfolding"><span class="hs-identifier hs-var">idUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591331"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Unfolding -&gt; Id
</span><a href="GHC.Types.Id.html#setIdUnfolding"><span class="hs-identifier hs-var">setIdUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591331"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#noUnfolding"><span class="hs-identifier hs-var">noUnfolding</span></a></span><span>
</span><span id="line-882"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591331"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span>        </span><span class="hs-comment">---------------------------------</span><span>
</span><span id="line-885"></span><span>        </span><span class="hs-comment">-- SPECIALISATION</span><span>
</span><span id="line-886"></span><span>
</span><span id="line-887"></span><span class="hs-comment">-- See Note [Specialisations and RULES in IdInfo] in GHC.Types.Id.Info</span><span>
</span><span id="line-888"></span><span>
</span><span id="line-889"></span><span class="annot"><a href="GHC.Types.Id.html#idSpecialisation"><span class="hs-identifier hs-type">idSpecialisation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#RuleInfo"><span class="hs-identifier hs-type">RuleInfo</span></a></span><span>
</span><span id="line-890"></span><span id="idSpecialisation"><span class="annot"><span class="annottext">idSpecialisation :: Id -&gt; RuleInfo
</span><a href="GHC.Types.Id.html#idSpecialisation"><span class="hs-identifier hs-var hs-var">idSpecialisation</span></a></span></span><span> </span><span id="local-6989586621682591332"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591332"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; RuleInfo
</span><a href="GHC.Types.Id.Info.html#ruleInfo"><span class="hs-identifier hs-var">ruleInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591332"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-891"></span><span>
</span><span id="line-892"></span><span class="annot"><a href="GHC.Types.Id.html#idCoreRules"><span class="hs-identifier hs-type">idCoreRules</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-893"></span><span id="idCoreRules"><span class="annot"><span class="annottext">idCoreRules :: Id -&gt; [CoreRule]
</span><a href="GHC.Types.Id.html#idCoreRules"><span class="hs-identifier hs-var hs-var">idCoreRules</span></a></span></span><span> </span><span id="local-6989586621682591334"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591334"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RuleInfo -&gt; [CoreRule]
</span><a href="GHC.Types.Id.Info.html#ruleInfoRules"><span class="hs-identifier hs-var">ruleInfoRules</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; RuleInfo
</span><a href="GHC.Types.Id.html#idSpecialisation"><span class="hs-identifier hs-var">idSpecialisation</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591334"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-894"></span><span>
</span><span id="line-895"></span><span class="annot"><a href="GHC.Types.Id.html#idHasRules"><span class="hs-identifier hs-type">idHasRules</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-896"></span><span id="idHasRules"><span class="annot"><span class="annottext">idHasRules :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#idHasRules"><span class="hs-identifier hs-var hs-var">idHasRules</span></a></span></span><span> </span><span id="local-6989586621682591336"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591336"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RuleInfo -&gt; Bool
</span><a href="GHC.Types.Id.Info.html#isEmptyRuleInfo"><span class="hs-identifier hs-var">isEmptyRuleInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; RuleInfo
</span><a href="GHC.Types.Id.html#idSpecialisation"><span class="hs-identifier hs-var">idSpecialisation</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591336"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-897"></span><span>
</span><span id="line-898"></span><span class="annot"><a href="GHC.Types.Id.html#setIdSpecialisation"><span class="hs-identifier hs-type">setIdSpecialisation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#RuleInfo"><span class="hs-identifier hs-type">RuleInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-899"></span><span id="setIdSpecialisation"><span class="annot"><span class="annottext">setIdSpecialisation :: Id -&gt; RuleInfo -&gt; Id
</span><a href="GHC.Types.Id.html#setIdSpecialisation"><span class="hs-identifier hs-var hs-var">setIdSpecialisation</span></a></span></span><span> </span><span id="local-6989586621682591338"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591338"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591339"><span class="annot"><span class="annottext">RuleInfo
</span><a href="#local-6989586621682591339"><span class="hs-identifier hs-var">spec_info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; RuleInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setRuleInfo"><span class="hs-operator hs-var">`setRuleInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">RuleInfo
</span><a href="#local-6989586621682591339"><span class="hs-identifier hs-var">spec_info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591338"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-900"></span><span>
</span><span id="line-901"></span><span>        </span><span class="hs-comment">---------------------------------</span><span>
</span><span id="line-902"></span><span>        </span><span class="hs-comment">-- CAF INFO</span><span>
</span><span id="line-903"></span><span class="annot"><a href="GHC.Types.Id.html#idCafInfo"><span class="hs-identifier hs-type">idCafInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#CafInfo"><span class="hs-identifier hs-type">CafInfo</span></a></span><span>
</span><span id="line-904"></span><span id="idCafInfo"><span class="annot"><span class="annottext">idCafInfo :: Id -&gt; CafInfo
</span><a href="GHC.Types.Id.html#idCafInfo"><span class="hs-identifier hs-var hs-var">idCafInfo</span></a></span></span><span> </span><span id="local-6989586621682591341"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591341"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; CafInfo
</span><a href="GHC.Types.Id.Info.html#cafInfo"><span class="hs-identifier hs-var">cafInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591341"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-905"></span><span>
</span><span id="line-906"></span><span class="annot"><a href="GHC.Types.Id.html#setIdCafInfo"><span class="hs-identifier hs-type">setIdCafInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#CafInfo"><span class="hs-identifier hs-type">CafInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-907"></span><span id="setIdCafInfo"><span class="annot"><span class="annottext">setIdCafInfo :: Id -&gt; CafInfo -&gt; Id
</span><a href="GHC.Types.Id.html#setIdCafInfo"><span class="hs-identifier hs-var hs-var">setIdCafInfo</span></a></span></span><span> </span><span id="local-6989586621682591343"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591343"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591344"><span class="annot"><span class="annottext">CafInfo
</span><a href="#local-6989586621682591344"><span class="hs-identifier hs-var">caf_info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; CafInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setCafInfo"><span class="hs-operator hs-var">`setCafInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">CafInfo
</span><a href="#local-6989586621682591344"><span class="hs-identifier hs-var">caf_info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591343"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-908"></span><span>
</span><span id="line-909"></span><span>        </span><span class="hs-comment">---------------------------------</span><span>
</span><span id="line-910"></span><span>        </span><span class="hs-comment">-- Lambda form info</span><span>
</span><span id="line-911"></span><span>
</span><span id="line-912"></span><span class="annot"><a href="GHC.Types.Id.html#idLFInfo_maybe"><span class="hs-identifier hs-type">idLFInfo_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.StgToCmm.Types.html#LambdaFormInfo"><span class="hs-identifier hs-type">LambdaFormInfo</span></a></span><span>
</span><span id="line-913"></span><span id="idLFInfo_maybe"><span class="annot"><span class="annottext">idLFInfo_maybe :: Id -&gt; Maybe LambdaFormInfo
</span><a href="GHC.Types.Id.html#idLFInfo_maybe"><span class="hs-identifier hs-var hs-var">idLFInfo_maybe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Maybe LambdaFormInfo
</span><a href="GHC.Types.Id.Info.html#lfInfo"><span class="hs-identifier hs-var">lfInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(IdInfo -&gt; Maybe LambdaFormInfo)
-&gt; (Id -&gt; IdInfo) -&gt; Id -&gt; Maybe LambdaFormInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span>
</span><span id="line-914"></span><span>
</span><span id="line-915"></span><span class="annot"><a href="GHC.Types.Id.html#setIdLFInfo"><span class="hs-identifier hs-type">setIdLFInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToCmm.Types.html#LambdaFormInfo"><span class="hs-identifier hs-type">LambdaFormInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-916"></span><span id="setIdLFInfo"><span class="annot"><span class="annottext">setIdLFInfo :: Id -&gt; LambdaFormInfo -&gt; Id
</span><a href="GHC.Types.Id.html#setIdLFInfo"><span class="hs-identifier hs-var hs-var">setIdLFInfo</span></a></span></span><span> </span><span id="local-6989586621682591347"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591347"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591348"><span class="annot"><span class="annottext">LambdaFormInfo
</span><a href="#local-6989586621682591348"><span class="hs-identifier hs-var">lf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; LambdaFormInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setLFInfo"><span class="hs-operator hs-var">`setLFInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">LambdaFormInfo
</span><a href="#local-6989586621682591348"><span class="hs-identifier hs-var">lf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591347"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-917"></span><span>
</span><span id="line-918"></span><span>        </span><span class="hs-comment">---------------------------------</span><span>
</span><span id="line-919"></span><span>        </span><span class="hs-comment">-- Occurrence INFO</span><span>
</span><span id="line-920"></span><span class="annot"><a href="GHC.Types.Id.html#idOccInfo"><span class="hs-identifier hs-type">idOccInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a></span><span>
</span><span id="line-921"></span><span id="idOccInfo"><span class="annot"><span class="annottext">idOccInfo :: Id -&gt; OccInfo
</span><a href="GHC.Types.Id.html#idOccInfo"><span class="hs-identifier hs-var hs-var">idOccInfo</span></a></span></span><span> </span><span id="local-6989586621682591350"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591350"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; OccInfo
</span><a href="GHC.Types.Id.Info.html#occInfo"><span class="hs-identifier hs-var">occInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591350"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span>
</span><span id="line-923"></span><span class="annot"><a href="GHC.Types.Id.html#setIdOccInfo"><span class="hs-identifier hs-type">setIdOccInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#OccInfo"><span class="hs-identifier hs-type">OccInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-924"></span><span id="setIdOccInfo"><span class="annot"><span class="annottext">setIdOccInfo :: Id -&gt; OccInfo -&gt; Id
</span><a href="GHC.Types.Id.html#setIdOccInfo"><span class="hs-identifier hs-var hs-var">setIdOccInfo</span></a></span></span><span> </span><span id="local-6989586621682591352"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591352"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591353"><span class="annot"><span class="annottext">OccInfo
</span><a href="#local-6989586621682591353"><span class="hs-identifier hs-var">occ_info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; OccInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setOccInfo"><span class="hs-operator hs-var">`setOccInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">OccInfo
</span><a href="#local-6989586621682591353"><span class="hs-identifier hs-var">occ_info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591352"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-925"></span><span>
</span><span id="line-926"></span><span class="annot"><a href="GHC.Types.Id.html#zapIdOccInfo"><span class="hs-identifier hs-type">zapIdOccInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-927"></span><span id="zapIdOccInfo"><span class="annot"><span class="annottext">zapIdOccInfo :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapIdOccInfo"><span class="hs-identifier hs-var hs-var">zapIdOccInfo</span></a></span></span><span> </span><span id="local-6989586621682591355"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591355"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591355"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; OccInfo -&gt; Id
</span><a href="GHC.Types.Id.html#setIdOccInfo"><span class="hs-operator hs-var">`setIdOccInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">OccInfo
</span><a href="GHC.Types.Basic.html#noOccInfo"><span class="hs-identifier hs-var">noOccInfo</span></a></span><span>
</span><span id="line-928"></span><span>
</span><span id="line-929"></span><span class="hs-comment">{-
        ---------------------------------
        -- INLINING
The inline pragma tells us to be very keen to inline this Id, but it's still
OK not to if optimisation is switched off.
-}</span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="annot"><a href="GHC.Types.Id.html#idInlinePragma"><span class="hs-identifier hs-type">idInlinePragma</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a></span><span>
</span><span id="line-937"></span><span id="idInlinePragma"><span class="annot"><span class="annottext">idInlinePragma :: Id -&gt; InlinePragma
</span><a href="GHC.Types.Id.html#idInlinePragma"><span class="hs-identifier hs-var hs-var">idInlinePragma</span></a></span></span><span> </span><span id="local-6989586621682591357"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591357"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; InlinePragma
</span><a href="GHC.Types.Id.Info.html#inlinePragInfo"><span class="hs-identifier hs-var">inlinePragInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591357"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span class="annot"><a href="GHC.Types.Id.html#setInlinePragma"><span class="hs-identifier hs-type">setInlinePragma</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-940"></span><span id="setInlinePragma"><span class="annot"><span class="annottext">setInlinePragma :: Id -&gt; InlinePragma -&gt; Id
</span><a href="GHC.Types.Id.html#setInlinePragma"><span class="hs-identifier hs-var hs-var">setInlinePragma</span></a></span></span><span> </span><span id="local-6989586621682591359"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591359"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591360"><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621682591360"><span class="hs-identifier hs-var">prag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; InlinePragma -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setInlinePragInfo"><span class="hs-operator hs-var">`setInlinePragInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621682591360"><span class="hs-identifier hs-var">prag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591359"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-941"></span><span>
</span><span id="line-942"></span><span class="annot"><a href="GHC.Types.Id.html#modifyInlinePragma"><span class="hs-identifier hs-type">modifyInlinePragma</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-943"></span><span id="modifyInlinePragma"><span class="annot"><span class="annottext">modifyInlinePragma :: Id -&gt; (InlinePragma -&gt; InlinePragma) -&gt; Id
</span><a href="GHC.Types.Id.html#modifyInlinePragma"><span class="hs-identifier hs-var hs-var">modifyInlinePragma</span></a></span></span><span> </span><span id="local-6989586621682591362"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591362"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591363"><span class="annot"><span class="annottext">InlinePragma -&gt; InlinePragma
</span><a href="#local-6989586621682591363"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682591364"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591364"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591364"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; InlinePragma -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setInlinePragInfo"><span class="hs-operator hs-var">`setInlinePragInfo`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InlinePragma -&gt; InlinePragma
</span><a href="#local-6989586621682591363"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; InlinePragma
</span><a href="GHC.Types.Id.Info.html#inlinePragInfo"><span class="hs-identifier hs-var">inlinePragInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591364"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591362"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-944"></span><span>
</span><span id="line-945"></span><span class="annot"><a href="GHC.Types.Id.html#idInlineActivation"><span class="hs-identifier hs-type">idInlineActivation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Activation"><span class="hs-identifier hs-type">Activation</span></a></span><span>
</span><span id="line-946"></span><span id="idInlineActivation"><span class="annot"><span class="annottext">idInlineActivation :: Id -&gt; Activation
</span><a href="GHC.Types.Id.html#idInlineActivation"><span class="hs-identifier hs-var hs-var">idInlineActivation</span></a></span></span><span> </span><span id="local-6989586621682591365"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591365"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InlinePragma -&gt; Activation
</span><a href="GHC.Types.Basic.html#inlinePragmaActivation"><span class="hs-identifier hs-var">inlinePragmaActivation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; InlinePragma
</span><a href="GHC.Types.Id.html#idInlinePragma"><span class="hs-identifier hs-var">idInlinePragma</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591365"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-947"></span><span>
</span><span id="line-948"></span><span class="annot"><a href="GHC.Types.Id.html#setInlineActivation"><span class="hs-identifier hs-type">setInlineActivation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Activation"><span class="hs-identifier hs-type">Activation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-949"></span><span id="setInlineActivation"><span class="annot"><span class="annottext">setInlineActivation :: Id -&gt; Activation -&gt; Id
</span><a href="GHC.Types.Id.html#setInlineActivation"><span class="hs-identifier hs-var hs-var">setInlineActivation</span></a></span></span><span> </span><span id="local-6989586621682591367"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591367"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591368"><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621682591368"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; (InlinePragma -&gt; InlinePragma) -&gt; Id
</span><a href="GHC.Types.Id.html#modifyInlinePragma"><span class="hs-identifier hs-var">modifyInlinePragma</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591367"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682591369"><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621682591369"><span class="hs-identifier hs-var">prag</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InlinePragma -&gt; Activation -&gt; InlinePragma
</span><a href="GHC.Types.Basic.html#setInlinePragmaActivation"><span class="hs-identifier hs-var">setInlinePragmaActivation</span></a></span><span> </span><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621682591369"><span class="hs-identifier hs-var">prag</span></a></span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621682591368"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-950"></span><span>
</span><span id="line-951"></span><span class="annot"><a href="GHC.Types.Id.html#idRuleMatchInfo"><span class="hs-identifier hs-type">idRuleMatchInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#RuleMatchInfo"><span class="hs-identifier hs-type">RuleMatchInfo</span></a></span><span>
</span><span id="line-952"></span><span id="idRuleMatchInfo"><span class="annot"><span class="annottext">idRuleMatchInfo :: Id -&gt; RuleMatchInfo
</span><a href="GHC.Types.Id.html#idRuleMatchInfo"><span class="hs-identifier hs-var hs-var">idRuleMatchInfo</span></a></span></span><span> </span><span id="local-6989586621682591371"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591371"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InlinePragma -&gt; RuleMatchInfo
</span><a href="GHC.Types.Basic.html#inlinePragmaRuleMatchInfo"><span class="hs-identifier hs-var">inlinePragmaRuleMatchInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; InlinePragma
</span><a href="GHC.Types.Id.html#idInlinePragma"><span class="hs-identifier hs-var">idInlinePragma</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591371"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-953"></span><span>
</span><span id="line-954"></span><span class="annot"><a href="GHC.Types.Id.html#isConLikeId"><span class="hs-identifier hs-type">isConLikeId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-955"></span><span id="isConLikeId"><span class="annot"><span class="annottext">isConLikeId :: Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isConLikeId"><span class="hs-identifier hs-var hs-var">isConLikeId</span></a></span></span><span> </span><span id="local-6989586621682591373"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591373"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RuleMatchInfo -&gt; Bool
</span><a href="GHC.Types.Basic.html#isConLike"><span class="hs-identifier hs-var">isConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; RuleMatchInfo
</span><a href="GHC.Types.Id.html#idRuleMatchInfo"><span class="hs-identifier hs-var">idRuleMatchInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591373"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-956"></span><span>
</span><span id="line-957"></span><span class="hs-comment">{-
        ---------------------------------
        -- ONE-SHOT LAMBDAS
-}</span><span>
</span><span id="line-961"></span><span>
</span><span id="line-962"></span><span class="annot"><a href="GHC.Types.Id.html#idOneShotInfo"><span class="hs-identifier hs-type">idOneShotInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a></span><span>
</span><span id="line-963"></span><span id="idOneShotInfo"><span class="annot"><span class="annottext">idOneShotInfo :: Id -&gt; OneShotInfo
</span><a href="GHC.Types.Id.html#idOneShotInfo"><span class="hs-identifier hs-var hs-var">idOneShotInfo</span></a></span></span><span> </span><span id="local-6989586621682591375"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591375"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; OneShotInfo
</span><a href="GHC.Types.Id.Info.html#oneShotInfo"><span class="hs-identifier hs-var">oneShotInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591375"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-964"></span><span>
</span><span id="line-965"></span><span class="annot"><a href="GHC.Types.Id.html#setOneShotLambda"><span class="hs-identifier hs-type">setOneShotLambda</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-966"></span><span id="setOneShotLambda"><span class="annot"><span class="annottext">setOneShotLambda :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#setOneShotLambda"><span class="hs-identifier hs-var hs-var">setOneShotLambda</span></a></span></span><span> </span><span id="local-6989586621682591377"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591377"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; OneShotInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setOneShotInfo"><span class="hs-operator hs-var">`setOneShotInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">OneShotInfo
</span><a href="GHC.Types.Basic.html#OneShotLam"><span class="hs-identifier hs-var">OneShotLam</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591377"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-967"></span><span>
</span><span id="line-968"></span><span class="annot"><a href="GHC.Types.Id.html#clearOneShotLambda"><span class="hs-identifier hs-type">clearOneShotLambda</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-969"></span><span id="clearOneShotLambda"><span class="annot"><span class="annottext">clearOneShotLambda :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#clearOneShotLambda"><span class="hs-identifier hs-var hs-var">clearOneShotLambda</span></a></span></span><span> </span><span id="local-6989586621682591380"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591380"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; OneShotInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setOneShotInfo"><span class="hs-operator hs-var">`setOneShotInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">OneShotInfo
</span><a href="GHC.Types.Basic.html#NoOneShotInfo"><span class="hs-identifier hs-var">NoOneShotInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591380"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-970"></span><span>
</span><span id="line-971"></span><span class="annot"><a href="GHC.Types.Id.html#setIdOneShotInfo"><span class="hs-identifier hs-type">setIdOneShotInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-972"></span><span id="setIdOneShotInfo"><span class="annot"><span class="annottext">setIdOneShotInfo :: Id -&gt; OneShotInfo -&gt; Id
</span><a href="GHC.Types.Id.html#setIdOneShotInfo"><span class="hs-identifier hs-var hs-var">setIdOneShotInfo</span></a></span></span><span> </span><span id="local-6989586621682591382"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591382"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591383"><span class="annot"><span class="annottext">OneShotInfo
</span><a href="#local-6989586621682591383"><span class="hs-identifier hs-var">one_shot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; OneShotInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setOneShotInfo"><span class="hs-operator hs-var">`setOneShotInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">OneShotInfo
</span><a href="#local-6989586621682591383"><span class="hs-identifier hs-var">one_shot</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591382"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-973"></span><span>
</span><span id="line-974"></span><span class="annot"><a href="GHC.Types.Id.html#updOneShotInfo"><span class="hs-identifier hs-type">updOneShotInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#OneShotInfo"><span class="hs-identifier hs-type">OneShotInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-975"></span><span class="hs-comment">-- Combine the info in the Id with new info</span><span>
</span><span id="line-976"></span><span id="updOneShotInfo"><span class="annot"><span class="annottext">updOneShotInfo :: Id -&gt; OneShotInfo -&gt; Id
</span><a href="GHC.Types.Id.html#updOneShotInfo"><span class="hs-identifier hs-var hs-var">updOneShotInfo</span></a></span></span><span> </span><span id="local-6989586621682591384"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591384"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682591385"><span class="annot"><span class="annottext">OneShotInfo
</span><a href="#local-6989586621682591385"><span class="hs-identifier hs-var">one_shot</span></a></span></span><span>
</span><span id="line-977"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OneShotInfo
</span><a href="GHC.Types.Basic.html#OneShotLam"><span class="hs-identifier hs-var">OneShotLam</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OneShotInfo
</span><a href="#local-6989586621682591385"><span class="hs-identifier hs-var">one_shot</span></a></span><span>
</span><span id="line-978"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OneShotInfo
</span><a href="GHC.Types.Basic.html#NoOneShotInfo"><span class="hs-identifier hs-var">NoOneShotInfo</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; OneShotInfo
</span><a href="GHC.Types.Id.html#idOneShotInfo"><span class="hs-identifier hs-var">idOneShotInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591384"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-979"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; OneShotInfo -&gt; Id
</span><a href="GHC.Types.Id.html#setIdOneShotInfo"><span class="hs-identifier hs-var">setIdOneShotInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591384"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">OneShotInfo
</span><a href="GHC.Types.Basic.html#OneShotLam"><span class="hs-identifier hs-var">OneShotLam</span></a></span><span>
</span><span id="line-980"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-981"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591384"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-982"></span><span>
</span><span id="line-983"></span><span class="hs-comment">-- The OneShotLambda functions simply fiddle with the IdInfo flag</span><span>
</span><span id="line-984"></span><span class="hs-comment">-- But watch out: this may change the type of something else</span><span>
</span><span id="line-985"></span><span class="hs-comment">--      f = \x -&gt; e</span><span>
</span><span id="line-986"></span><span class="hs-comment">-- If we change the one-shot-ness of x, f's type changes</span><span>
</span><span id="line-987"></span><span>
</span><span id="line-988"></span><span class="hs-comment">-- Replaces the id info if the zapper returns @Just idinfo@</span><span>
</span><span id="line-989"></span><span class="annot"><a href="GHC.Types.Id.html#zapInfo"><span class="hs-identifier hs-type">zapInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdInfo"><span class="hs-identifier hs-type">IdInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-990"></span><span id="zapInfo"><span class="annot"><span class="annottext">zapInfo :: (IdInfo -&gt; Maybe IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapInfo"><span class="hs-identifier hs-var hs-var">zapInfo</span></a></span></span><span> </span><span id="local-6989586621682591387"><span class="annot"><span class="annottext">IdInfo -&gt; Maybe IdInfo
</span><a href="#local-6989586621682591387"><span class="hs-identifier hs-var">zapper</span></a></span></span><span> </span><span id="local-6989586621682591388"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591388"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe IdInfo -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#maybeModifyIdInfo"><span class="hs-identifier hs-var">maybeModifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; Maybe IdInfo
</span><a href="#local-6989586621682591387"><span class="hs-identifier hs-var">zapper</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591388"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591388"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-991"></span><span>
</span><span id="line-992"></span><span class="annot"><a href="GHC.Types.Id.html#zapLamIdInfo"><span class="hs-identifier hs-type">zapLamIdInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-993"></span><span id="zapLamIdInfo"><span class="annot"><span class="annottext">zapLamIdInfo :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapLamIdInfo"><span class="hs-identifier hs-var hs-var">zapLamIdInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IdInfo -&gt; Maybe IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapInfo"><span class="hs-identifier hs-var">zapInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Maybe IdInfo
</span><a href="GHC.Types.Id.Info.html#zapLamInfo"><span class="hs-identifier hs-var">zapLamInfo</span></a></span><span>
</span><span id="line-994"></span><span>
</span><span id="line-995"></span><span class="annot"><a href="GHC.Types.Id.html#zapFragileIdInfo"><span class="hs-identifier hs-type">zapFragileIdInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-996"></span><span id="zapFragileIdInfo"><span class="annot"><span class="annottext">zapFragileIdInfo :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapFragileIdInfo"><span class="hs-identifier hs-var hs-var">zapFragileIdInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IdInfo -&gt; Maybe IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapInfo"><span class="hs-identifier hs-var">zapInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Maybe IdInfo
</span><a href="GHC.Types.Id.Info.html#zapFragileInfo"><span class="hs-identifier hs-var">zapFragileInfo</span></a></span><span>
</span><span id="line-997"></span><span>
</span><span id="line-998"></span><span class="annot"><a href="GHC.Types.Id.html#floatifyIdDemandInfo"><span class="hs-identifier hs-type">floatifyIdDemandInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-999"></span><span class="hs-comment">-- See Note [Floatifying demand info when floating] in GHC.Core.Opt.SetLevels</span><span>
</span><span id="line-1000"></span><span id="floatifyIdDemandInfo"><span class="annot"><span class="annottext">floatifyIdDemandInfo :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#floatifyIdDemandInfo"><span class="hs-identifier hs-var hs-var">floatifyIdDemandInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IdInfo -&gt; Maybe IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapInfo"><span class="hs-identifier hs-var">zapInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Maybe IdInfo
</span><a href="GHC.Types.Id.Info.html#floatifyDemandInfo"><span class="hs-identifier hs-var">floatifyDemandInfo</span></a></span><span>
</span><span id="line-1001"></span><span>
</span><span id="line-1002"></span><span class="annot"><a href="GHC.Types.Id.html#zapIdUsageInfo"><span class="hs-identifier hs-type">zapIdUsageInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-1003"></span><span id="zapIdUsageInfo"><span class="annot"><span class="annottext">zapIdUsageInfo :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapIdUsageInfo"><span class="hs-identifier hs-var hs-var">zapIdUsageInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IdInfo -&gt; Maybe IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapInfo"><span class="hs-identifier hs-var">zapInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Maybe IdInfo
</span><a href="GHC.Types.Id.Info.html#zapUsageInfo"><span class="hs-identifier hs-var">zapUsageInfo</span></a></span><span>
</span><span id="line-1004"></span><span>
</span><span id="line-1005"></span><span class="annot"><a href="GHC.Types.Id.html#zapIdUsageEnvInfo"><span class="hs-identifier hs-type">zapIdUsageEnvInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-1006"></span><span id="zapIdUsageEnvInfo"><span class="annot"><span class="annottext">zapIdUsageEnvInfo :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapIdUsageEnvInfo"><span class="hs-identifier hs-var hs-var">zapIdUsageEnvInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IdInfo -&gt; Maybe IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapInfo"><span class="hs-identifier hs-var">zapInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Maybe IdInfo
</span><a href="GHC.Types.Id.Info.html#zapUsageEnvInfo"><span class="hs-identifier hs-var">zapUsageEnvInfo</span></a></span><span>
</span><span id="line-1007"></span><span>
</span><span id="line-1008"></span><span class="annot"><a href="GHC.Types.Id.html#zapIdUsedOnceInfo"><span class="hs-identifier hs-type">zapIdUsedOnceInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-1009"></span><span id="zapIdUsedOnceInfo"><span class="annot"><span class="annottext">zapIdUsedOnceInfo :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapIdUsedOnceInfo"><span class="hs-identifier hs-var hs-var">zapIdUsedOnceInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IdInfo -&gt; Maybe IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapInfo"><span class="hs-identifier hs-var">zapInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Maybe IdInfo
</span><a href="GHC.Types.Id.Info.html#zapUsedOnceInfo"><span class="hs-identifier hs-var">zapUsedOnceInfo</span></a></span><span>
</span><span id="line-1010"></span><span>
</span><span id="line-1011"></span><span class="annot"><a href="GHC.Types.Id.html#zapIdTailCallInfo"><span class="hs-identifier hs-type">zapIdTailCallInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-1012"></span><span id="zapIdTailCallInfo"><span class="annot"><span class="annottext">zapIdTailCallInfo :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapIdTailCallInfo"><span class="hs-identifier hs-var hs-var">zapIdTailCallInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IdInfo -&gt; Maybe IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapInfo"><span class="hs-identifier hs-var">zapInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Maybe IdInfo
</span><a href="GHC.Types.Id.Info.html#zapTailCallInfo"><span class="hs-identifier hs-var">zapTailCallInfo</span></a></span><span>
</span><span id="line-1013"></span><span>
</span><span id="line-1014"></span><span class="annot"><a href="GHC.Types.Id.html#zapStableUnfolding"><span class="hs-identifier hs-type">zapStableUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-1015"></span><span id="zapStableUnfolding"><span class="annot"><span class="annottext">zapStableUnfolding :: Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapStableUnfolding"><span class="hs-identifier hs-var hs-var">zapStableUnfolding</span></a></span></span><span> </span><span id="local-6989586621682591396"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591396"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-1016"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isStableUnfolding"><span class="hs-identifier hs-var">isStableUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#realIdUnfolding"><span class="hs-identifier hs-var">realIdUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591396"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Unfolding -&gt; Id
</span><a href="GHC.Types.Id.html#setIdUnfolding"><span class="hs-identifier hs-var">setIdUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591396"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a></span><span>
</span><span id="line-1017"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591396"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1018"></span><span>
</span><span id="line-1019"></span><span class="hs-comment">{-
Note [transferPolyIdInfo]
~~~~~~~~~~~~~~~~~~~~~~~~~
This transfer is used in three places:
        FloatOut (long-distance let-floating)
        GHC.Core.Opt.Simplify.Utils.abstractFloats (short-distance let-floating)
        StgLiftLams (selectively lambda-lift local functions to top-level)

Consider the short-distance let-floating:

   f = /\a. let g = rhs in ...

Then if we float thus

   g' = /\a. rhs
   f = /\a. ...[g' a/g]....

we *do not* want to lose g's
  * strictness information
  * arity
  * inline pragma (though that is bit more debatable)
  * occurrence info

Mostly this is just an optimisation, but it's *vital* to
transfer the occurrence info.  Consider

   NonRec { f = /\a. let Rec { g* = ..g.. } in ... }

where the '*' means 'LoopBreaker'.  Then if we float we must get

   Rec { g'* = /\a. ...(g' a)... }
   NonRec { f = /\a. ...[g' a/g]....}

where g' is also marked as LoopBreaker.  If not, terrible things
can happen if we re-simplify the binding (and the Simplifier does
sometimes simplify a term twice); see #4345.

It's not so simple to retain
  * worker info
  * rules
so we simply discard those.  Sooner or later this may bite us.

If we abstract wrt one or more *value* binders, we must modify the
arity and strictness info before transferring it.  E.g.
      f = \x. e
--&gt;
      g' = \y. \x. e
      + substitute (g' y) for g
Notice that g' has an arity one more than the original g
-}</span><span>
</span><span id="line-1069"></span><span>
</span><span id="line-1070"></span><span class="annot"><a href="GHC.Types.Id.html#transferPolyIdInfo"><span class="hs-identifier hs-type">transferPolyIdInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>        </span><span class="hs-comment">-- Original Id</span><span>
</span><span id="line-1071"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span>     </span><span class="hs-comment">-- Abstract wrt these variables</span><span>
</span><span id="line-1072"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>        </span><span class="hs-comment">-- New Id</span><span>
</span><span id="line-1073"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-1074"></span><span id="transferPolyIdInfo"><span class="annot"><span class="annottext">transferPolyIdInfo :: Id -&gt; [Id] -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#transferPolyIdInfo"><span class="hs-identifier hs-var hs-var">transferPolyIdInfo</span></a></span></span><span> </span><span id="local-6989586621682591397"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591397"><span class="hs-identifier hs-var">old_id</span></a></span></span><span> </span><span id="local-6989586621682591398"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682591398"><span class="hs-identifier hs-var">abstract_wrt</span></a></span></span><span> </span><span id="local-6989586621682591399"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591399"><span class="hs-identifier hs-var">new_id</span></a></span></span><span>
</span><span id="line-1075"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; IdInfo
</span><a href="#local-6989586621682591400"><span class="hs-identifier hs-var">transfer</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591399"><span class="hs-identifier hs-var">new_id</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; [CbvMark] -&gt; Id
</span><a href="GHC.Types.Id.html#setIdCbvMarks"><span class="hs-operator hs-var">`setIdCbvMarks`</span></a></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591401"><span class="hs-identifier hs-var">new_cbv_marks</span></a></span><span>
</span><span id="line-1076"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1077"></span><span>    </span><span id="local-6989586621682591402"><span class="annot"><span class="annottext">arity_increase :: Arity
</span><a href="#local-6989586621682591402"><span class="hs-identifier hs-var hs-var">arity_increase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; [Id] -&gt; Arity
forall a. (a -&gt; Bool) -&gt; [a] -&gt; Arity
</span><a href="GHC.Utils.Misc.html#count"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682591398"><span class="hs-identifier hs-var">abstract_wrt</span></a></span><span>    </span><span class="hs-comment">-- Arity increases by the</span><span>
</span><span id="line-1078"></span><span>                                                </span><span class="hs-comment">-- number of value binders</span><span>
</span><span id="line-1079"></span><span>
</span><span id="line-1080"></span><span>    </span><span id="local-6989586621682591404"><span class="annot"><span class="annottext">old_info :: IdInfo
</span><a href="#local-6989586621682591404"><span class="hs-identifier hs-var hs-var">old_info</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Id -&gt; IdInfo
Id -&gt; IdInfo
</span><a href="GHC.Types.Var.html#idInfo"><span class="hs-identifier hs-var">idInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591397"><span class="hs-identifier hs-var">old_id</span></a></span><span>
</span><span id="line-1081"></span><span>    </span><span id="local-6989586621682591405"><span class="annot"><span class="annottext">old_arity :: Arity
</span><a href="#local-6989586621682591405"><span class="hs-identifier hs-var hs-var">old_arity</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Arity
</span><a href="GHC.Types.Id.Info.html#arityInfo"><span class="hs-identifier hs-var">arityInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591404"><span class="hs-identifier hs-var">old_info</span></a></span><span>
</span><span id="line-1082"></span><span>    </span><span id="local-6989586621682591406"><span class="annot"><span class="annottext">old_inline_prag :: InlinePragma
</span><a href="#local-6989586621682591406"><span class="hs-identifier hs-var hs-var">old_inline_prag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; InlinePragma
</span><a href="GHC.Types.Id.Info.html#inlinePragInfo"><span class="hs-identifier hs-var">inlinePragInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591404"><span class="hs-identifier hs-var">old_info</span></a></span><span>
</span><span id="line-1083"></span><span>    </span><span id="local-6989586621682591407"><span class="annot"><span class="annottext">old_occ_info :: OccInfo
</span><a href="#local-6989586621682591407"><span class="hs-identifier hs-var hs-var">old_occ_info</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; OccInfo
</span><a href="GHC.Types.Id.Info.html#occInfo"><span class="hs-identifier hs-var">occInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591404"><span class="hs-identifier hs-var">old_info</span></a></span><span>
</span><span id="line-1084"></span><span>    </span><span id="local-6989586621682591408"><span class="annot"><span class="annottext">new_arity :: Arity
</span><a href="#local-6989586621682591408"><span class="hs-identifier hs-var hs-var">new_arity</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591405"><span class="hs-identifier hs-var">old_arity</span></a></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Arity -&gt; Arity
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591402"><span class="hs-identifier hs-var">arity_increase</span></a></span><span>
</span><span id="line-1085"></span><span>    </span><span id="local-6989586621682591410"><span class="annot"><span class="annottext">new_occ_info :: OccInfo
</span><a href="#local-6989586621682591410"><span class="hs-identifier hs-var hs-var">new_occ_info</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccInfo -&gt; OccInfo
</span><a href="GHC.Types.Basic.html#zapOccTailCallInfo"><span class="hs-identifier hs-var">zapOccTailCallInfo</span></a></span><span> </span><span class="annot"><span class="annottext">OccInfo
</span><a href="#local-6989586621682591407"><span class="hs-identifier hs-var">old_occ_info</span></a></span><span>
</span><span id="line-1086"></span><span>
</span><span id="line-1087"></span><span>    </span><span id="local-6989586621682591412"><span class="annot"><span class="annottext">old_strictness :: DmdSig
</span><a href="#local-6989586621682591412"><span class="hs-identifier hs-var hs-var">old_strictness</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; DmdSig
</span><a href="GHC.Types.Id.Info.html#dmdSigInfo"><span class="hs-identifier hs-var">dmdSigInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591404"><span class="hs-identifier hs-var">old_info</span></a></span><span>
</span><span id="line-1088"></span><span>    </span><span id="local-6989586621682591413"><span class="annot"><span class="annottext">new_strictness :: DmdSig
</span><a href="#local-6989586621682591413"><span class="hs-identifier hs-var hs-var">new_strictness</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; DmdSig -&gt; DmdSig
</span><a href="GHC.Types.Demand.html#prependArgsDmdSig"><span class="hs-identifier hs-var">prependArgsDmdSig</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591402"><span class="hs-identifier hs-var">arity_increase</span></a></span><span> </span><span class="annot"><span class="annottext">DmdSig
</span><a href="#local-6989586621682591412"><span class="hs-identifier hs-var">old_strictness</span></a></span><span>
</span><span id="line-1089"></span><span>    </span><span id="local-6989586621682591415"><span class="annot"><span class="annottext">old_cpr :: CprSig
</span><a href="#local-6989586621682591415"><span class="hs-identifier hs-var hs-var">old_cpr</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; CprSig
</span><a href="GHC.Types.Id.Info.html#cprSigInfo"><span class="hs-identifier hs-var">cprSigInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591404"><span class="hs-identifier hs-var">old_info</span></a></span><span>
</span><span id="line-1090"></span><span>    </span><span id="local-6989586621682591416"><span class="annot"><span class="annottext">new_cpr :: CprSig
</span><a href="#local-6989586621682591416"><span class="hs-identifier hs-var hs-var">new_cpr</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; CprSig -&gt; CprSig
</span><a href="GHC.Types.Cpr.html#prependArgsCprSig"><span class="hs-identifier hs-var">prependArgsCprSig</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591402"><span class="hs-identifier hs-var">arity_increase</span></a></span><span> </span><span class="annot"><span class="annottext">CprSig
</span><a href="#local-6989586621682591415"><span class="hs-identifier hs-var">old_cpr</span></a></span><span>
</span><span id="line-1091"></span><span>
</span><span id="line-1092"></span><span>    </span><span id="local-6989586621682591418"><span class="annot"><span class="annottext">old_cbv_marks :: [CbvMark]
</span><a href="#local-6989586621682591418"><span class="hs-identifier hs-var hs-var">old_cbv_marks</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CbvMark] -&gt; Maybe [CbvMark] -&gt; [CbvMark]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; CbvMark -&gt; [CbvMark]
forall a. Arity -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591405"><span class="hs-identifier hs-var">old_arity</span></a></span><span> </span><span class="annot"><span class="annottext">CbvMark
</span><a href="GHC.Types.Basic.html#NotMarkedCbv"><span class="hs-identifier hs-var">NotMarkedCbv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Maybe [CbvMark]
</span><a href="GHC.Types.Id.html#idCbvMarks_maybe"><span class="hs-identifier hs-var">idCbvMarks_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591397"><span class="hs-identifier hs-var">old_id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1093"></span><span>    </span><span id="local-6989586621682591422"><span class="annot"><span class="annottext">abstr_cbv_marks :: [CbvMark]
</span><a href="#local-6989586621682591422"><span class="hs-identifier hs-var hs-var">abstr_cbv_marks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Maybe CbvMark) -&gt; [Id] -&gt; [CbvMark]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Maybe CbvMark
</span><a href="#local-6989586621682591424"><span class="hs-identifier hs-var">getMark</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682591398"><span class="hs-identifier hs-var">abstract_wrt</span></a></span><span>
</span><span id="line-1094"></span><span>    </span><span id="local-6989586621682591401"><span class="annot"><span class="annottext">new_cbv_marks :: [CbvMark]
</span><a href="#local-6989586621682591401"><span class="hs-identifier hs-var hs-var">new_cbv_marks</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591422"><span class="hs-identifier hs-var">abstr_cbv_marks</span></a></span><span> </span><span class="annot"><span class="annottext">[CbvMark] -&gt; [CbvMark] -&gt; [CbvMark]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[CbvMark]
</span><a href="#local-6989586621682591418"><span class="hs-identifier hs-var">old_cbv_marks</span></a></span><span>
</span><span id="line-1095"></span><span>
</span><span id="line-1096"></span><span>    </span><span id="local-6989586621682591424"><span class="annot"><span class="annottext">getMark :: Id -&gt; Maybe CbvMark
</span><a href="#local-6989586621682591424"><span class="hs-identifier hs-var hs-var">getMark</span></a></span></span><span> </span><span id="local-6989586621682591425"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591425"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-1097"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591425"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1098"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CbvMark
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1099"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591425"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1100"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isEvaldUnfolding"><span class="hs-identifier hs-var">isEvaldUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Unfolding
</span><a href="GHC.Types.Id.html#idUnfolding"><span class="hs-identifier hs-var">idUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591425"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1101"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#mightBeLiftedType"><span class="hs-identifier hs-var">mightBeLiftedType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682591425"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1102"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CbvMark -&gt; Maybe CbvMark
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CbvMark
</span><a href="GHC.Types.Basic.html#MarkedCbv"><span class="hs-identifier hs-var">MarkedCbv</span></a></span><span>
</span><span id="line-1103"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CbvMark -&gt; Maybe CbvMark
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CbvMark
</span><a href="GHC.Types.Basic.html#NotMarkedCbv"><span class="hs-identifier hs-var">NotMarkedCbv</span></a></span><span>
</span><span id="line-1104"></span><span>    </span><span id="local-6989586621682591400"><span class="annot"><span class="annottext">transfer :: IdInfo -&gt; IdInfo
</span><a href="#local-6989586621682591400"><span class="hs-identifier hs-var hs-var">transfer</span></a></span></span><span> </span><span id="local-6989586621682591428"><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591428"><span class="hs-identifier hs-var">new_info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdInfo
</span><a href="#local-6989586621682591428"><span class="hs-identifier hs-var">new_info</span></a></span><span> </span><span class="annot"><span class="annottext">IdInfo -&gt; Arity -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setArityInfo"><span class="hs-operator hs-var">`setArityInfo`</span></a></span><span>      </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682591408"><span class="hs-identifier hs-var">new_arity</span></a></span><span>
</span><span id="line-1105"></span><span>                                 </span><span class="annot"><span class="annottext">IdInfo -&gt; InlinePragma -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setInlinePragInfo"><span class="hs-operator hs-var">`setInlinePragInfo`</span></a></span><span> </span><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621682591406"><span class="hs-identifier hs-var">old_inline_prag</span></a></span><span>
</span><span id="line-1106"></span><span>                                 </span><span class="annot"><span class="annottext">IdInfo -&gt; OccInfo -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setOccInfo"><span class="hs-operator hs-var">`setOccInfo`</span></a></span><span>        </span><span class="annot"><span class="annottext">OccInfo
</span><a href="#local-6989586621682591410"><span class="hs-identifier hs-var">new_occ_info</span></a></span><span>
</span><span id="line-1107"></span><span>                                 </span><span class="annot"><span class="annottext">IdInfo -&gt; DmdSig -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setDmdSigInfo"><span class="hs-operator hs-var">`setDmdSigInfo`</span></a></span><span>     </span><span class="annot"><span class="annottext">DmdSig
</span><a href="#local-6989586621682591413"><span class="hs-identifier hs-var">new_strictness</span></a></span><span>
</span><span id="line-1108"></span><span>                                 </span><span class="annot"><span class="annottext">IdInfo -&gt; CprSig -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setCprSigInfo"><span class="hs-operator hs-var">`setCprSigInfo`</span></a></span><span>     </span><span class="annot"><span class="annottext">CprSig
</span><a href="#local-6989586621682591416"><span class="hs-identifier hs-var">new_cpr</span></a></span><span>
</span><span id="line-1109"></span></pre></body></html>