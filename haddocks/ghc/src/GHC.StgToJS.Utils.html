<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase        #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html"><span class="hs-identifier">GHC.StgToJS.Utils</span></a></span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignCoerce1"><span class="hs-identifier">assignCoerce1</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignToExprCtx"><span class="hs-identifier">assignToExprCtx</span></a></span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#fixedLayout"><span class="hs-identifier">fixedLayout</span></a></span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#assocIdExprs"><span class="hs-identifier">assocIdExprs</span></a></span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Unboxable datacon</span></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#isUnboxableCon"><span class="hs-identifier">isUnboxableCon</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#isUnboxable"><span class="hs-identifier">isUnboxable</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#isBoolDataCon"><span class="hs-identifier">isBoolDataCon</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><span class="hs-comment">-- * JSRep</span></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#slotCount"><span class="hs-identifier">slotCount</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#varSize"><span class="hs-identifier">varSize</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#typeSize"><span class="hs-identifier">typeSize</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#isVoid"><span class="hs-identifier">isVoid</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#isMultiVar"><span class="hs-identifier">isMultiVar</span></a></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#idJSRep"><span class="hs-identifier">idJSRep</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#typeJSRep"><span class="hs-identifier">typeJSRep</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#unaryTypeJSRep"><span class="hs-identifier">unaryTypeJSRep</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier">primRepToJSRep</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#primOrVoidRepToJSRep"><span class="hs-identifier">primOrVoidRepToJSRep</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#stackSlotType"><span class="hs-identifier">stackSlotType</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepSize"><span class="hs-identifier">primRepSize</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#mkArityTag"><span class="hs-identifier">mkArityTag</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><span class="hs-comment">-- * References and Ids</span></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#exprRefs"><span class="hs-identifier">exprRefs</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#hasExport"><span class="hs-identifier">hasExport</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#collectTopIds"><span class="hs-identifier">collectTopIds</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#collectIds"><span class="hs-identifier">collectIds</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Live variables</span></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier">LiveVars</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#liveStatic"><span class="hs-identifier">liveStatic</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#liveVars"><span class="hs-identifier">liveVars</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgRhsLive"><span class="hs-identifier">stgRhsLive</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgExprLive"><span class="hs-identifier">stgExprLive</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#isUpdatableRhs"><span class="hs-identifier">isUpdatableRhs</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgLneLive%27"><span class="hs-identifier">stgLneLive'</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgLneLiveExpr"><span class="hs-identifier">stgLneLiveExpr</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#isInlineExpr"><span class="hs-identifier">isInlineExpr</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">where</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.StgToJS.ExprCtx.html"><span class="hs-identifier">GHC.StgToJS.ExprCtx</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.StgToJS.Symbols.html"><span class="hs-identifier">GHC.StgToJS.Symbols</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html"><span class="hs-identifier">GHC.StgToJS.Types</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.JS.JStg.Syntax.html"><span class="hs-identifier">GHC.JS.JStg.Syntax</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.JS.Make.html"><span class="hs-identifier">GHC.JS.Make</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.JS.Transform.html"><span class="hs-identifier">GHC.JS.Transform</span></a></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html"><span class="hs-identifier">GHC.Core.TyCo.Rep</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier">typeSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier">typeSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html"><span class="hs-identifier">GHC.Stg.Syntax</span></a></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.PrimOps.html"><span class="hs-identifier">GHC.Builtin.PrimOps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Builtin.PrimOps.html#primOpIsReallyInline"><span class="hs-identifier">primOpIsReallyInline</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.RepType.html"><span class="hs-identifier">GHC.Types.RepType</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html"><span class="hs-identifier">GHC.Types.Var.Set</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html"><span class="hs-identifier">GHC.Types.Id.Info</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html"><span class="hs-identifier">GHC.Types.Unique.FM</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html"><span class="hs-identifier">GHC.Types.ForeignCall</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html"><span class="hs-identifier">GHC.Types.TyThing</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator">(&lt;&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Bits.html"><span class="hs-identifier">Data.Bits</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Bits</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Foldable.html"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span>      </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span>     </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier">Set</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Monoid.html"><span class="hs-identifier">Data.Monoid</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignToTypedExprs"><span class="hs-identifier hs-type">assignToTypedExprs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgExpr"><span class="hs-identifier hs-type">JStgExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgStat"><span class="hs-identifier hs-type">JStgStat</span></a></span><span>
</span><span id="line-90"></span><span id="assignToTypedExprs"><span class="annot"><span class="annottext">assignToTypedExprs :: [TypedExpr] -&gt; [JStgExpr] -&gt; JStgStat
</span><a href="GHC.StgToJS.Utils.html#assignToTypedExprs"><span class="hs-identifier hs-var hs-var">assignToTypedExprs</span></a></span></span><span> </span><span id="local-6989586621682686783"><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686783"><span class="hs-identifier hs-var">tes</span></a></span></span><span> </span><span id="local-6989586621682686784"><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686784"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-91"></span><span>  </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; [JStgExpr] -&gt; JStgStat
HasDebugCallStack =&gt; [JStgExpr] -&gt; [JStgExpr] -&gt; JStgStat
</span><a href="GHC.JS.Make.html#assignAllEqual"><span class="hs-identifier hs-var">assignAllEqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypedExpr -&gt; [JStgExpr]) -&gt; [TypedExpr] -&gt; [JStgExpr]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">TypedExpr -&gt; [JStgExpr]
</span><a href="GHC.StgToJS.Types.html#typex_expr"><span class="hs-identifier hs-var">typex_expr</span></a></span><span> </span><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686783"><span class="hs-identifier hs-var">tes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686784"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignTypedExprs"><span class="hs-identifier hs-type">assignTypedExprs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgStat"><span class="hs-identifier hs-type">JStgStat</span></a></span><span>
</span><span id="line-94"></span><span id="assignTypedExprs"><span class="annot"><span class="annottext">assignTypedExprs :: [TypedExpr] -&gt; [TypedExpr] -&gt; JStgStat
</span><a href="GHC.StgToJS.Utils.html#assignTypedExprs"><span class="hs-identifier hs-var hs-var">assignTypedExprs</span></a></span></span><span> </span><span id="local-6989586621682686789"><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686789"><span class="hs-identifier hs-var">tes</span></a></span></span><span> </span><span id="local-6989586621682686790"><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686790"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682686791"><span class="annot"><span class="annottext">prim_tes :: [JStgExpr]
</span><a href="#local-6989586621682686791"><span class="hs-identifier hs-var hs-var">prim_tes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TypedExpr -&gt; [JStgExpr]) -&gt; [TypedExpr] -&gt; [JStgExpr]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">TypedExpr -&gt; [JStgExpr]
</span><a href="GHC.StgToJS.Types.html#typex_expr"><span class="hs-identifier hs-var">typex_expr</span></a></span><span> </span><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686789"><span class="hs-identifier hs-var">tes</span></a></span><span>
</span><span id="line-96"></span><span>      </span><span id="local-6989586621682686792"><span class="annot"><span class="annottext">prim_es :: [JStgExpr]
</span><a href="#local-6989586621682686792"><span class="hs-identifier hs-var hs-var">prim_es</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TypedExpr -&gt; [JStgExpr]) -&gt; [TypedExpr] -&gt; [JStgExpr]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">TypedExpr -&gt; [JStgExpr]
</span><a href="GHC.StgToJS.Types.html#typex_expr"><span class="hs-identifier hs-var">typex_expr</span></a></span><span> </span><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686790"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-97"></span><span>        </span><span class="hs-comment">-- extract the JExprs, effectively unarising a RuntimeRep thing to</span><span>
</span><span id="line-98"></span><span>        </span><span class="hs-comment">-- multiple VarType-repped things (e.g., AddrRep takes two VarType-regs)</span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; JStgStat -&gt; JStgStat
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[JStgExpr] -&gt; [JStgExpr] -&gt; Bool
forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-identifier hs-var">equalLength</span></a></span><span> </span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686791"><span class="hs-identifier hs-var">prim_tes</span></a></span><span> </span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686792"><span class="hs-identifier hs-var">prim_es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[PrimRep] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypedExpr -&gt; PrimRep) -&gt; [TypedExpr] -&gt; [PrimRep]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypedExpr -&gt; PrimRep
</span><a href="GHC.StgToJS.Types.html#typex_typ"><span class="hs-identifier hs-var">typex_typ</span></a></span><span> </span><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686789"><span class="hs-identifier hs-var">tes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimRep] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypedExpr -&gt; PrimRep) -&gt; [TypedExpr] -&gt; [PrimRep]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypedExpr -&gt; PrimRep
</span><a href="GHC.StgToJS.Types.html#typex_typ"><span class="hs-identifier hs-var">typex_typ</span></a></span><span> </span><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686790"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[JStgExpr] -&gt; [JStgExpr] -&gt; JStgStat
HasDebugCallStack =&gt; [JStgExpr] -&gt; [JStgExpr] -&gt; JStgStat
</span><a href="GHC.JS.Make.html#assignAllEqual"><span class="hs-identifier hs-var">assignAllEqual</span></a></span><span> </span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686791"><span class="hs-identifier hs-var">prim_tes</span></a></span><span> </span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686792"><span class="hs-identifier hs-var">prim_es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignToExprCtx"><span class="hs-identifier hs-type">assignToExprCtx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.StgToJS.ExprCtx.html#ExprCtx"><span class="hs-identifier hs-type">ExprCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgExpr"><span class="hs-identifier hs-type">JStgExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgStat"><span class="hs-identifier hs-type">JStgStat</span></a></span><span>
</span><span id="line-104"></span><span id="assignToExprCtx"><span class="annot"><span class="annottext">assignToExprCtx :: ExprCtx -&gt; [JStgExpr] -&gt; JStgStat
</span><a href="GHC.StgToJS.Utils.html#assignToExprCtx"><span class="hs-identifier hs-var hs-var">assignToExprCtx</span></a></span></span><span> </span><span id="local-6989586621682686798"><span class="annot"><span class="annottext">ExprCtx
</span><a href="#local-6989586621682686798"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621682686799"><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686799"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TypedExpr] -&gt; [JStgExpr] -&gt; JStgStat
</span><a href="GHC.StgToJS.Utils.html#assignToTypedExprs"><span class="hs-identifier hs-var">assignToTypedExprs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExprCtx -&gt; [TypedExpr]
</span><a href="GHC.StgToJS.ExprCtx.html#ctxTarget"><span class="hs-identifier hs-var">ctxTarget</span></a></span><span> </span><span class="annot"><span class="annottext">ExprCtx
</span><a href="#local-6989586621682686798"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686799"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-comment">-- | Assign first expr only (if it exists), performing coercions between some</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- PrimReps (e.g. StablePtr# and Addr#).</span><span>
</span><span id="line-108"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignCoerce1"><span class="hs-identifier hs-type">assignCoerce1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgStat"><span class="hs-identifier hs-type">JStgStat</span></a></span><span>
</span><span id="line-109"></span><span id="assignCoerce1"><span class="annot"><span class="annottext">assignCoerce1 :: [TypedExpr] -&gt; [TypedExpr] -&gt; JStgStat
</span><a href="GHC.StgToJS.Utils.html#assignCoerce1"><span class="hs-identifier hs-var hs-var">assignCoerce1</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682686801"><span class="annot"><span class="annottext">TypedExpr
</span><a href="#local-6989586621682686801"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682686802"><span class="annot"><span class="annottext">TypedExpr
</span><a href="#local-6989586621682686802"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypedExpr -&gt; TypedExpr -&gt; JStgStat
</span><a href="GHC.StgToJS.Utils.html#assignCoerce"><span class="hs-identifier hs-var">assignCoerce</span></a></span><span> </span><span class="annot"><span class="annottext">TypedExpr
</span><a href="#local-6989586621682686801"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">TypedExpr
</span><a href="#local-6989586621682686802"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-110"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignCoerce1"><span class="hs-identifier hs-var">assignCoerce1</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JStgStat
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-111"></span><span class="hs-comment">-- We silently ignore the case of an empty list on the first argument. It denotes</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- &quot;assign nothing to n empty slots on the right&quot;. Usually this case shouldn't come</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- up, but rare cases where the earlier code can't correctly guess the size of type</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- classes causes slots to be allocated when they aren't needed.</span><span>
</span><span id="line-115"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignCoerce1"><span class="hs-identifier hs-var">assignCoerce1</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="annot"><span class="annottext">[TypedExpr]
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JStgStat
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-116"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignCoerce1"><span class="hs-identifier hs-var">assignCoerce1</span></a></span><span> </span><span id="local-6989586621682686804"><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686804"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682686805"><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686805"><span class="hs-identifier hs-var">y</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; JStgStat
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;assignCoerce1&quot;</span></span><span>
</span><span id="line-117"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lengths do not match&quot;</span></span><span>
</span><span id="line-118"></span><span>                                </span><span class="hs-comment">-- FIXME: Outputable instance removed until JStg replaces JStat</span><span>
</span><span id="line-119"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TypedExpr] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686804"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-120"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TypedExpr] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TypedExpr]
</span><a href="#local-6989586621682686805"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-121"></span><span>                                </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="annot"><span class="hs-comment">-- | Assign p2 to p1 with optional coercion</span></span><span>
</span><span id="line-124"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignCoerce"><span class="hs-identifier hs-type">assignCoerce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgStat"><span class="hs-identifier hs-type">JStgStat</span></a></span><span>
</span><span id="line-125"></span><span class="hs-comment">-- Coercion between StablePtr# and Addr#</span><span>
</span><span id="line-126"></span><span id="assignCoerce"><span class="annot"><span class="annottext">assignCoerce :: TypedExpr -&gt; TypedExpr -&gt; JStgStat
</span><a href="GHC.StgToJS.Utils.html#assignCoerce"><span class="hs-identifier hs-var hs-var">assignCoerce</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#AddrRep"><span class="hs-identifier hs-var">AddrRep</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682686811"><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686811"><span class="hs-identifier hs-var">a_val</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682686812"><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686812"><span class="hs-identifier hs-var">a_off</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#BoxedRep"><span class="hs-identifier hs-type">BoxedRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Levity
</span><a href="GHC.Types.Basic.html#Unlifted"><span class="hs-identifier hs-var">Unlifted</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682686815"><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686815"><span class="hs-identifier hs-var">sptr</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[JStgStat] -&gt; JStgStat
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686811"><span class="hs-identifier hs-var">a_val</span></a></span><span> </span><span class="annot"><span class="annottext">JStgExpr -&gt; JStgExpr -&gt; JStgStat
</span><a href="GHC.JS.Make.html#%7C%3D"><span class="hs-operator hs-var">|=</span></a></span><span> </span><span class="annot"><span class="annottext">JStgExpr
</span><a href="GHC.StgToJS.Symbols.html#hdStablePtrBuf"><span class="hs-identifier hs-var">hdStablePtrBuf</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686812"><span class="hs-identifier hs-var">a_off</span></a></span><span> </span><span class="annot"><span class="annottext">JStgExpr -&gt; JStgExpr -&gt; JStgStat
</span><a href="GHC.JS.Make.html#%7C%3D"><span class="hs-operator hs-var">|=</span></a></span><span> </span><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686815"><span class="hs-identifier hs-var">sptr</span></a></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-130"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignCoerce"><span class="hs-identifier hs-var">assignCoerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#BoxedRep"><span class="hs-identifier hs-type">BoxedRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Levity
</span><a href="GHC.Types.Basic.html#Unlifted"><span class="hs-identifier hs-var">Unlifted</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682686818"><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686818"><span class="hs-identifier hs-var">sptr</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#AddrRep"><span class="hs-identifier hs-var">AddrRep</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682686819"><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686819"><span class="hs-identifier hs-var">_a_val</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682686820"><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686820"><span class="hs-identifier hs-var">a_off</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686818"><span class="hs-identifier hs-var">sptr</span></a></span><span> </span><span class="annot"><span class="annottext">JStgExpr -&gt; JStgExpr -&gt; JStgStat
</span><a href="GHC.JS.Make.html#%7C%3D"><span class="hs-operator hs-var">|=</span></a></span><span> </span><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686820"><span class="hs-identifier hs-var">a_off</span></a></span><span>
</span><span id="line-132"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assignCoerce"><span class="hs-identifier hs-var">assignCoerce</span></a></span><span> </span><span id="local-6989586621682686821"><span class="annot"><span class="annottext">TypedExpr
</span><a href="#local-6989586621682686821"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621682686822"><span class="annot"><span class="annottext">TypedExpr
</span><a href="#local-6989586621682686822"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TypedExpr] -&gt; [TypedExpr] -&gt; JStgStat
</span><a href="GHC.StgToJS.Utils.html#assignTypedExprs"><span class="hs-identifier hs-var">assignTypedExprs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypedExpr
</span><a href="#local-6989586621682686821"><span class="hs-identifier hs-var">p1</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypedExpr
</span><a href="#local-6989586621682686822"><span class="hs-identifier hs-var">p2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-136"></span><span class="hs-comment">--                        Core Utils</span><span>
</span><span id="line-137"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><span class="hs-comment">-- | can we unbox C x to x, only if x is represented as a Number</span></span><span>
</span><span id="line-140"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isUnboxableCon"><span class="hs-identifier hs-type">isUnboxableCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-141"></span><span id="isUnboxableCon"><span class="annot"><span class="annottext">isUnboxableCon :: DataCon -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isUnboxableCon"><span class="hs-identifier hs-var hs-var">isUnboxableCon</span></a></span></span><span> </span><span id="local-6989586621682686823"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682686823"><span class="hs-identifier hs-var">dc</span></a></span></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682686824"><span class="annot"><span class="annottext">Scaled Type
</span><a href="#local-6989586621682686824"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dataConRepArgTys"><span class="hs-identifier hs-var">dataConRepArgTys</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682686823"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682686826"><span class="annot"><span class="annottext">JSRep
</span><a href="#local-6989586621682686826"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; [JSRep]
Type -&gt; [JSRep]
</span><a href="GHC.StgToJS.Utils.html#typeJSRep"><span class="hs-identifier hs-var">typeJSRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Scaled Type -&gt; Type
forall a. Scaled a -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#scaledThing"><span class="hs-identifier hs-var">scaledThing</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Type
</span><a href="#local-6989586621682686824"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isUnboxable"><span class="hs-identifier hs-var">isUnboxable</span></a></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="#local-6989586621682686826"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><span class="annottext">DataCon -&gt; Int
</span><a href="GHC.Core.DataCon.html#dataConTag"><span class="hs-identifier hs-var">dataConTag</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682686823"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><span class="annottext">[DataCon] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [DataCon]
</span><a href="GHC.Core.TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a></span><span> </span><span class="annot"><span class="annottext">(TyCon -&gt; [DataCon]) -&gt; TyCon -&gt; [DataCon]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682686823"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-comment">-- | one-constructor types with one primitive field represented as a JS Number</span><span>
</span><span id="line-150"></span><span class="hs-comment">-- can be unboxed</span><span>
</span><span id="line-151"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isUnboxable"><span class="hs-identifier hs-type">isUnboxable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-152"></span><span id="isUnboxable"><span class="annot"><span class="annottext">isUnboxable :: JSRep -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isUnboxable"><span class="hs-identifier hs-var hs-var">isUnboxable</span></a></span></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#DoubleV"><span class="hs-identifier hs-var">DoubleV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-153"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isUnboxable"><span class="hs-identifier hs-var">isUnboxable</span></a></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#IntV"><span class="hs-identifier hs-var">IntV</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-comment">-- includes Char#</span><span>
</span><span id="line-154"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isUnboxable"><span class="hs-identifier hs-var">isUnboxable</span></a></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="annot"><span class="hs-comment">-- | Number of slots occupied by a PrimRep</span></span><span>
</span><span id="line-157"></span><span class="hs-keyword">data</span><span> </span><span id="SlotCount"><span class="annot"><a href="GHC.StgToJS.Utils.html#SlotCount"><span class="hs-identifier hs-var">SlotCount</span></a></span></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NoSlot"><span class="annot"><a href="GHC.StgToJS.Utils.html#NoSlot"><span class="hs-identifier hs-var">NoSlot</span></a></span></span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="OneSlot"><span class="annot"><a href="GHC.StgToJS.Utils.html#OneSlot"><span class="hs-identifier hs-var">OneSlot</span></a></span></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TwoSlots"><span class="annot"><a href="GHC.StgToJS.Utils.html#TwoSlots"><span class="hs-identifier hs-var">TwoSlots</span></a></span></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682686839"><span id="local-6989586621682686841"><span id="local-6989586621682686845"><span class="annot"><span class="annottext">Int -&gt; SlotCount -&gt; ShowS
[SlotCount] -&gt; ShowS
SlotCount -&gt; String
(Int -&gt; SlotCount -&gt; ShowS)
-&gt; (SlotCount -&gt; String)
-&gt; ([SlotCount] -&gt; ShowS)
-&gt; Show SlotCount
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; SlotCount -&gt; ShowS
showsPrec :: Int -&gt; SlotCount -&gt; ShowS
$cshow :: SlotCount -&gt; String
show :: SlotCount -&gt; String
$cshowList :: [SlotCount] -&gt; ShowS
showList :: [SlotCount] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621682686850"><span id="local-6989586621682686855"><span class="annot"><span class="annottext">SlotCount -&gt; SlotCount -&gt; Bool
(SlotCount -&gt; SlotCount -&gt; Bool)
-&gt; (SlotCount -&gt; SlotCount -&gt; Bool) -&gt; Eq SlotCount
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: SlotCount -&gt; SlotCount -&gt; Bool
== :: SlotCount -&gt; SlotCount -&gt; Bool
$c/= :: SlotCount -&gt; SlotCount -&gt; Bool
/= :: SlotCount -&gt; SlotCount -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621682686862"><span id="local-6989586621682686866"><span id="local-6989586621682686870"><span id="local-6989586621682686874"><span id="local-6989586621682686877"><span id="local-6989586621682686880"><span id="local-6989586621682686883"><span class="annot"><span class="annottext">Eq SlotCount
Eq SlotCount =&gt;
(SlotCount -&gt; SlotCount -&gt; Ordering)
-&gt; (SlotCount -&gt; SlotCount -&gt; Bool)
-&gt; (SlotCount -&gt; SlotCount -&gt; Bool)
-&gt; (SlotCount -&gt; SlotCount -&gt; Bool)
-&gt; (SlotCount -&gt; SlotCount -&gt; Bool)
-&gt; (SlotCount -&gt; SlotCount -&gt; SlotCount)
-&gt; (SlotCount -&gt; SlotCount -&gt; SlotCount)
-&gt; Ord SlotCount
SlotCount -&gt; SlotCount -&gt; Bool
SlotCount -&gt; SlotCount -&gt; Ordering
SlotCount -&gt; SlotCount -&gt; SlotCount
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: SlotCount -&gt; SlotCount -&gt; Ordering
compare :: SlotCount -&gt; SlotCount -&gt; Ordering
$c&lt; :: SlotCount -&gt; SlotCount -&gt; Bool
&lt; :: SlotCount -&gt; SlotCount -&gt; Bool
$c&lt;= :: SlotCount -&gt; SlotCount -&gt; Bool
&lt;= :: SlotCount -&gt; SlotCount -&gt; Bool
$c&gt; :: SlotCount -&gt; SlotCount -&gt; Bool
&gt; :: SlotCount -&gt; SlotCount -&gt; Bool
$c&gt;= :: SlotCount -&gt; SlotCount -&gt; Bool
&gt;= :: SlotCount -&gt; SlotCount -&gt; Bool
$cmax :: SlotCount -&gt; SlotCount -&gt; SlotCount
max :: SlotCount -&gt; SlotCount -&gt; SlotCount
$cmin :: SlotCount -&gt; SlotCount -&gt; SlotCount
min :: SlotCount -&gt; SlotCount -&gt; SlotCount
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#SlotCount"><span class="hs-identifier hs-type">SlotCount</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-164"></span><span>  </span><span id="local-6989586621682686894"><span class="annot"><span class="annottext">ppr :: SlotCount -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SDoc) -&gt; (SlotCount -&gt; String) -&gt; SlotCount -&gt; SDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SlotCount -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><span class="hs-comment">-- | Return SlotCount as an Int</span></span><span>
</span><span id="line-167"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#slotCount"><span class="hs-identifier hs-type">slotCount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#SlotCount"><span class="hs-identifier hs-type">SlotCount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-168"></span><span id="slotCount"><span class="annot"><span class="annottext">slotCount :: SlotCount -&gt; Int
</span><a href="GHC.StgToJS.Utils.html#slotCount"><span class="hs-identifier hs-var hs-var">slotCount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#NoSlot"><span class="hs-identifier hs-var">NoSlot</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#OneSlot"><span class="hs-identifier hs-var">OneSlot</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#TwoSlots"><span class="hs-identifier hs-var">TwoSlots</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><span class="hs-comment">-- | Number of slots occupied by a value with the given JSRep</span></span><span>
</span><span id="line-175"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#varSize"><span class="hs-identifier hs-type">varSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-176"></span><span id="varSize"><span class="annot"><span class="annottext">varSize :: JSRep -&gt; Int
</span><a href="GHC.StgToJS.Utils.html#varSize"><span class="hs-identifier hs-var hs-var">varSize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotCount -&gt; Int
</span><a href="GHC.StgToJS.Utils.html#slotCount"><span class="hs-identifier hs-var">slotCount</span></a></span><span> </span><span class="annot"><span class="annottext">(SlotCount -&gt; Int) -&gt; (JSRep -&gt; SlotCount) -&gt; JSRep -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">JSRep -&gt; SlotCount
</span><a href="GHC.StgToJS.Utils.html#jsRepSlots"><span class="hs-identifier hs-var">jsRepSlots</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#jsRepSlots"><span class="hs-identifier hs-type">jsRepSlots</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#SlotCount"><span class="hs-identifier hs-type">SlotCount</span></a></span><span>
</span><span id="line-179"></span><span id="jsRepSlots"><span class="annot"><span class="annottext">jsRepSlots :: JSRep -&gt; SlotCount
</span><a href="GHC.StgToJS.Utils.html#jsRepSlots"><span class="hs-identifier hs-var hs-var">jsRepSlots</span></a></span></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#VoidV"><span class="hs-identifier hs-var">VoidV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#NoSlot"><span class="hs-identifier hs-var">NoSlot</span></a></span><span>
</span><span id="line-180"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#jsRepSlots"><span class="hs-identifier hs-var">jsRepSlots</span></a></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#LongV"><span class="hs-identifier hs-var">LongV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#TwoSlots"><span class="hs-identifier hs-var">TwoSlots</span></a></span><span> </span><span class="hs-comment">-- hi, low</span><span>
</span><span id="line-181"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#jsRepSlots"><span class="hs-identifier hs-var">jsRepSlots</span></a></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#AddrV"><span class="hs-identifier hs-var">AddrV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#TwoSlots"><span class="hs-identifier hs-var">TwoSlots</span></a></span><span> </span><span class="hs-comment">-- obj/array, offset</span><span>
</span><span id="line-182"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#jsRepSlots"><span class="hs-identifier hs-var">jsRepSlots</span></a></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#OneSlot"><span class="hs-identifier hs-var">OneSlot</span></a></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#typeSize"><span class="hs-identifier hs-type">typeSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-185"></span><span id="typeSize"><span class="annot"><span class="annottext">typeSize :: Type -&gt; Int
</span><a href="GHC.StgToJS.Utils.html#typeSize"><span class="hs-identifier hs-var hs-var">typeSize</span></a></span></span><span> </span><span id="local-6989586621682686901"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682686901"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">sum</span></span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; Int) -&gt; (Type -&gt; [Int]) -&gt; Type -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(JSRep -&gt; Int) -&gt; [JSRep] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">JSRep -&gt; Int
</span><a href="GHC.StgToJS.Utils.html#varSize"><span class="hs-identifier hs-var">varSize</span></a></span><span> </span><span class="annot"><span class="annottext">([JSRep] -&gt; [Int]) -&gt; (Type -&gt; [JSRep]) -&gt; Type -&gt; [Int]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; [JSRep]
Type -&gt; [JSRep]
</span><a href="GHC.StgToJS.Utils.html#typeJSRep"><span class="hs-identifier hs-var">typeJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Int) -&gt; Type -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682686901"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isVoid"><span class="hs-identifier hs-type">isVoid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-188"></span><span id="isVoid"><span class="annot"><span class="annottext">isVoid :: JSRep -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isVoid"><span class="hs-identifier hs-var hs-var">isVoid</span></a></span></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#VoidV"><span class="hs-identifier hs-var">VoidV</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-189"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isVoid"><span class="hs-identifier hs-var">isVoid</span></a></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isMultiVar"><span class="hs-identifier hs-type">isMultiVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-192"></span><span id="isMultiVar"><span class="annot"><span class="annottext">isMultiVar :: JSRep -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isMultiVar"><span class="hs-identifier hs-var hs-var">isMultiVar</span></a></span></span><span> </span><span id="local-6989586621682686903"><span class="annot"><span class="annottext">JSRep
</span><a href="#local-6989586621682686903"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">JSRep -&gt; SlotCount
</span><a href="GHC.StgToJS.Utils.html#jsRepSlots"><span class="hs-identifier hs-var">jsRepSlots</span></a></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="#local-6989586621682686903"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#NoSlot"><span class="hs-identifier hs-var">NoSlot</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#OneSlot"><span class="hs-identifier hs-var">OneSlot</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#TwoSlots"><span class="hs-identifier hs-var">TwoSlots</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#idJSRep"><span class="hs-identifier hs-type">idJSRep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-198"></span><span id="idJSRep"><span class="annot"><span class="annottext">idJSRep :: HasDebugCallStack =&gt; Id -&gt; [JSRep]
</span><a href="GHC.StgToJS.Utils.html#idJSRep"><span class="hs-identifier hs-var hs-var">idJSRep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; [JSRep]
Type -&gt; [JSRep]
</span><a href="GHC.StgToJS.Utils.html#typeJSRep"><span class="hs-identifier hs-var">typeJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; [JSRep]) -&gt; (Id -&gt; Type) -&gt; Id -&gt; [JSRep]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#typeJSRep"><span class="hs-identifier hs-type">typeJSRep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-201"></span><span id="typeJSRep"><span class="annot"><span class="annottext">typeJSRep :: HasDebugCallStack =&gt; Type -&gt; [JSRep]
</span><a href="GHC.StgToJS.Utils.html#typeJSRep"><span class="hs-identifier hs-var hs-var">typeJSRep</span></a></span></span><span> </span><span id="local-6989586621682686910"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682686910"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PrimRep -&gt; JSRep) -&gt; [PrimRep] -&gt; [JSRep]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; PrimRep -&gt; JSRep
PrimRep -&gt; JSRep
</span><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; [PrimRep]
Type -&gt; [PrimRep]
</span><a href="GHC.Types.RepType.html#typePrimRep"><span class="hs-identifier hs-var">typePrimRep</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682686910"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="hs-comment">-- only use if you know it's not an unboxed tuple</span><span>
</span><span id="line-204"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#unaryTypeJSRep"><span class="hs-identifier hs-type">unaryTypeJSRep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.RepType.html#UnaryType"><span class="hs-identifier hs-type">UnaryType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span>
</span><span id="line-205"></span><span id="unaryTypeJSRep"><span class="annot"><span class="annottext">unaryTypeJSRep :: HasDebugCallStack =&gt; Type -&gt; JSRep
</span><a href="GHC.StgToJS.Utils.html#unaryTypeJSRep"><span class="hs-identifier hs-var hs-var">unaryTypeJSRep</span></a></span></span><span> </span><span id="local-6989586621682686916"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682686916"><span class="hs-identifier hs-var">ut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; PrimOrVoidRep -&gt; JSRep
PrimOrVoidRep -&gt; JSRep
</span><a href="GHC.StgToJS.Utils.html#primOrVoidRepToJSRep"><span class="hs-identifier hs-var">primOrVoidRepToJSRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; PrimOrVoidRep
Type -&gt; PrimOrVoidRep
</span><a href="GHC.Types.RepType.html#typePrimRep1"><span class="hs-identifier hs-var">typePrimRep1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682686916"><span class="hs-identifier hs-var">ut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-type">primRepToJSRep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#PrimRep"><span class="hs-identifier hs-type">PrimRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span>
</span><span id="line-208"></span><span id="primRepToJSRep"><span class="annot"><span class="annottext">primRepToJSRep :: HasDebugCallStack =&gt; PrimRep -&gt; JSRep
</span><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var hs-var">primRepToJSRep</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#BoxedRep"><span class="hs-identifier hs-type">BoxedRep</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Levity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#PtrV"><span class="hs-identifier hs-var">PtrV</span></a></span><span>
</span><span id="line-209"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#IntRep"><span class="hs-identifier hs-var">IntRep</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#IntV"><span class="hs-identifier hs-var">IntV</span></a></span><span>
</span><span id="line-210"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int8Rep"><span class="hs-identifier hs-var">Int8Rep</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#IntV"><span class="hs-identifier hs-var">IntV</span></a></span><span>
</span><span id="line-211"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int16Rep"><span class="hs-identifier hs-var">Int16Rep</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#IntV"><span class="hs-identifier hs-var">IntV</span></a></span><span>
</span><span id="line-212"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int32Rep"><span class="hs-identifier hs-var">Int32Rep</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#IntV"><span class="hs-identifier hs-var">IntV</span></a></span><span>
</span><span id="line-213"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#WordRep"><span class="hs-identifier hs-var">WordRep</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#IntV"><span class="hs-identifier hs-var">IntV</span></a></span><span>
</span><span id="line-214"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word8Rep"><span class="hs-identifier hs-var">Word8Rep</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#IntV"><span class="hs-identifier hs-var">IntV</span></a></span><span>
</span><span id="line-215"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word16Rep"><span class="hs-identifier hs-var">Word16Rep</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#IntV"><span class="hs-identifier hs-var">IntV</span></a></span><span>
</span><span id="line-216"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word32Rep"><span class="hs-identifier hs-var">Word32Rep</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#IntV"><span class="hs-identifier hs-var">IntV</span></a></span><span>
</span><span id="line-217"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int64Rep"><span class="hs-identifier hs-var">Int64Rep</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#LongV"><span class="hs-identifier hs-var">LongV</span></a></span><span>
</span><span id="line-218"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word64Rep"><span class="hs-identifier hs-var">Word64Rep</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#LongV"><span class="hs-identifier hs-var">LongV</span></a></span><span>
</span><span id="line-219"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#AddrRep"><span class="hs-identifier hs-var">AddrRep</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#AddrV"><span class="hs-identifier hs-var">AddrV</span></a></span><span>
</span><span id="line-220"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#FloatRep"><span class="hs-identifier hs-var">FloatRep</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#DoubleV"><span class="hs-identifier hs-var">DoubleV</span></a></span><span>
</span><span id="line-221"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#DoubleRep"><span class="hs-identifier hs-var">DoubleRep</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#DoubleV"><span class="hs-identifier hs-var">DoubleV</span></a></span><span>
</span><span id="line-222"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#VecRep"><span class="hs-identifier hs-type">VecRep</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; JSRep
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;primRepToJSRep: vector types are unsupported&quot;</span></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primOrVoidRepToJSRep"><span class="hs-identifier hs-type">primOrVoidRepToJSRep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#PrimOrVoidRep"><span class="hs-identifier hs-type">PrimOrVoidRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span>
</span><span id="line-225"></span><span id="primOrVoidRepToJSRep"><span class="annot"><span class="annottext">primOrVoidRepToJSRep :: HasDebugCallStack =&gt; PrimOrVoidRep -&gt; JSRep
</span><a href="GHC.StgToJS.Utils.html#primOrVoidRepToJSRep"><span class="hs-identifier hs-var hs-var">primOrVoidRepToJSRep</span></a></span></span><span> </span><span class="annot"><span class="annottext">PrimOrVoidRep
</span><a href="GHC.Core.TyCon.html#VoidRep"><span class="hs-identifier hs-var">VoidRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#VoidV"><span class="hs-identifier hs-var">VoidV</span></a></span><span>
</span><span id="line-226"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primOrVoidRepToJSRep"><span class="hs-identifier hs-var">primOrVoidRepToJSRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#NVRep"><span class="hs-identifier hs-type">NVRep</span></a></span><span> </span><span id="local-6989586621682686940"><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621682686940"><span class="hs-identifier hs-var">rep</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; PrimRep -&gt; JSRep
PrimRep -&gt; JSRep
</span><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621682686940"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#dataConType"><span class="hs-identifier hs-type">dataConType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-229"></span><span id="dataConType"><span class="annot"><span class="annottext">dataConType :: DataCon -&gt; Type
</span><a href="GHC.StgToJS.Utils.html#dataConType"><span class="hs-identifier hs-var hs-var">dataConType</span></a></span></span><span> </span><span id="local-6989586621682686942"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682686942"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Id
</span><a href="GHC.Core.DataCon.html#dataConWrapId"><span class="hs-identifier hs-var">dataConWrapId</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682686942"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isBoolDataCon"><span class="hs-identifier hs-type">isBoolDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-232"></span><span id="isBoolDataCon"><span class="annot"><span class="annottext">isBoolDataCon :: DataCon -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isBoolDataCon"><span class="hs-identifier hs-var hs-var">isBoolDataCon</span></a></span></span><span> </span><span id="local-6989586621682686944"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682686944"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isBoolTy"><span class="hs-identifier hs-var">isBoolTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Type
</span><a href="GHC.StgToJS.Utils.html#dataConType"><span class="hs-identifier hs-var">dataConType</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682686944"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-comment">-- standard fixed layout: payload types</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- payload starts at .d1 for heap objects, entry closest to Sp for stack frames</span><span>
</span><span id="line-236"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#fixedLayout"><span class="hs-identifier hs-type">fixedLayout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#CILayout"><span class="hs-identifier hs-type">CILayout</span></a></span><span>
</span><span id="line-237"></span><span id="fixedLayout"><span class="annot"><span class="annottext">fixedLayout :: [JSRep] -&gt; CILayout
</span><a href="GHC.StgToJS.Utils.html#fixedLayout"><span class="hs-identifier hs-var hs-var">fixedLayout</span></a></span></span><span> </span><span id="local-6989586621682686946"><span class="annot"><span class="annottext">[JSRep]
</span><a href="#local-6989586621682686946"><span class="hs-identifier hs-var">vts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [JSRep] -&gt; CILayout
</span><a href="GHC.StgToJS.Types.html#CILayoutFixed"><span class="hs-identifier hs-var">CILayoutFixed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">sum</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(JSRep -&gt; Int) -&gt; [JSRep] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">JSRep -&gt; Int
</span><a href="GHC.StgToJS.Utils.html#varSize"><span class="hs-identifier hs-var">varSize</span></a></span><span> </span><span class="annot"><span class="annottext">[JSRep]
</span><a href="#local-6989586621682686946"><span class="hs-identifier hs-var">vts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[JSRep]
</span><a href="#local-6989586621682686946"><span class="hs-identifier hs-var">vts</span></a></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- 2-var values might have been moved around separately, use DoubleV as substitute</span><span>
</span><span id="line-240"></span><span class="hs-comment">-- ObjV is 1 var, so this is no problem for implicit metadata</span><span>
</span><span id="line-241"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stackSlotType"><span class="hs-identifier hs-type">stackSlotType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#JSRep"><span class="hs-identifier hs-type">JSRep</span></a></span><span>
</span><span id="line-242"></span><span id="stackSlotType"><span class="annot"><span class="annottext">stackSlotType :: Id -&gt; JSRep
</span><a href="GHC.StgToJS.Utils.html#stackSlotType"><span class="hs-identifier hs-var hs-var">stackSlotType</span></a></span></span><span> </span><span id="local-6989586621682686948"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682686948"><span class="hs-identifier hs-var">i</span></a></span></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#OneSlot"><span class="hs-identifier hs-var">OneSlot</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">JSRep -&gt; SlotCount
</span><a href="GHC.StgToJS.Utils.html#jsRepSlots"><span class="hs-identifier hs-var">jsRepSlots</span></a></span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="#local-6989586621682686949"><span class="hs-identifier hs-var">otype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="#local-6989586621682686949"><span class="hs-identifier hs-var">otype</span></a></span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep
</span><a href="GHC.StgToJS.Types.html#DoubleV"><span class="hs-identifier hs-var">DoubleV</span></a></span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682686949"><span class="annot"><span class="annottext">otype :: JSRep
</span><a href="#local-6989586621682686949"><span class="hs-identifier hs-var hs-var">otype</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; JSRep
Type -&gt; JSRep
</span><a href="GHC.StgToJS.Utils.html#unaryTypeJSRep"><span class="hs-identifier hs-var">unaryTypeJSRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682686948"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#idPrimReps"><span class="hs-identifier hs-type">idPrimReps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#PrimRep"><span class="hs-identifier hs-type">PrimRep</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-248"></span><span id="idPrimReps"><span class="annot"><span class="annottext">idPrimReps :: Id -&gt; [PrimRep]
</span><a href="GHC.StgToJS.Utils.html#idPrimReps"><span class="hs-identifier hs-var hs-var">idPrimReps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; [PrimRep]
</span><a href="GHC.StgToJS.Utils.html#typePrimReps"><span class="hs-identifier hs-var">typePrimReps</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; [PrimRep]) -&gt; (Id -&gt; Type) -&gt; Id -&gt; [PrimRep]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#typePrimReps"><span class="hs-identifier hs-type">typePrimReps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#PrimRep"><span class="hs-identifier hs-type">PrimRep</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-251"></span><span id="typePrimReps"><span class="annot"><span class="annottext">typePrimReps :: Type -&gt; [PrimRep]
</span><a href="GHC.StgToJS.Utils.html#typePrimReps"><span class="hs-identifier hs-var hs-var">typePrimReps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; [PrimRep]
Type -&gt; [PrimRep]
</span><a href="GHC.Types.RepType.html#typePrimRep"><span class="hs-identifier hs-var">typePrimRep</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; [PrimRep]) -&gt; (Type -&gt; Type) -&gt; Type -&gt; [PrimRep]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type
</span><a href="GHC.Types.RepType.html#unwrapType"><span class="hs-identifier hs-var">unwrapType</span></a></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#primRepSize"><span class="hs-identifier hs-type">primRepSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#PrimRep"><span class="hs-identifier hs-type">PrimRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#SlotCount"><span class="hs-identifier hs-type">SlotCount</span></a></span><span>
</span><span id="line-254"></span><span id="primRepSize"><span class="annot"><span class="annottext">primRepSize :: PrimRep -&gt; SlotCount
</span><a href="GHC.StgToJS.Utils.html#primRepSize"><span class="hs-identifier hs-var hs-var">primRepSize</span></a></span></span><span> </span><span id="local-6989586621682686953"><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621682686953"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSRep -&gt; SlotCount
</span><a href="GHC.StgToJS.Utils.html#jsRepSlots"><span class="hs-identifier hs-var">jsRepSlots</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; PrimRep -&gt; JSRep
PrimRep -&gt; JSRep
</span><a href="GHC.StgToJS.Utils.html#primRepToJSRep"><span class="hs-identifier hs-var">primRepToJSRep</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621682686953"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span class="hs-comment">-- | Associate the given values to each RrimRep in the given order, taking into</span><span>
</span><span id="line-257"></span><span class="hs-comment">-- account the number of slots per PrimRep</span><span>
</span><span id="line-258"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assocPrimReps"><span class="hs-identifier hs-type">assocPrimReps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#PrimRep"><span class="hs-identifier hs-type">PrimRep</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgExpr"><span class="hs-identifier hs-type">JStgExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#PrimRep"><span class="hs-identifier hs-type">PrimRep</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgExpr"><span class="hs-identifier hs-type">JStgExpr</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-259"></span><span id="assocPrimReps"><span class="annot"><span class="annottext">assocPrimReps :: [PrimRep] -&gt; [JStgExpr] -&gt; [(PrimRep, [JStgExpr])]
</span><a href="GHC.StgToJS.Utils.html#assocPrimReps"><span class="hs-identifier hs-var hs-var">assocPrimReps</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="annot"><span class="annottext">[JStgExpr]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-260"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assocPrimReps"><span class="hs-identifier hs-var">assocPrimReps</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682686955"><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621682686955"><span class="hs-identifier hs-var">r</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682686956"><span class="annot"><span class="annottext">[PrimRep]
</span><a href="#local-6989586621682686956"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682686957"><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686957"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimRep -&gt; SlotCount
</span><a href="GHC.StgToJS.Utils.html#primRepSize"><span class="hs-identifier hs-var">primRepSize</span></a></span><span> </span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621682686955"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686957"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-261"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#NoSlot"><span class="hs-identifier hs-var">NoSlot</span></a></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621682686958"><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686958"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621682686955"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>    </span><span class="annot"><span class="annottext">(PrimRep, [JStgExpr])
-&gt; [(PrimRep, [JStgExpr])] -&gt; [(PrimRep, [JStgExpr])]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[PrimRep] -&gt; [JStgExpr] -&gt; [(PrimRep, [JStgExpr])]
</span><a href="GHC.StgToJS.Utils.html#assocPrimReps"><span class="hs-identifier hs-var">assocPrimReps</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimRep]
</span><a href="#local-6989586621682686956"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686958"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#OneSlot"><span class="hs-identifier hs-var">OneSlot</span></a></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621682686959"><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686959"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682686960"><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686960"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621682686955"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686959"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">(PrimRep, [JStgExpr])
-&gt; [(PrimRep, [JStgExpr])] -&gt; [(PrimRep, [JStgExpr])]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[PrimRep] -&gt; [JStgExpr] -&gt; [(PrimRep, [JStgExpr])]
</span><a href="GHC.StgToJS.Utils.html#assocPrimReps"><span class="hs-identifier hs-var">assocPrimReps</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimRep]
</span><a href="#local-6989586621682686956"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686960"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlotCount
</span><a href="GHC.StgToJS.Utils.html#TwoSlots"><span class="hs-identifier hs-var">TwoSlots</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682686961"><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686961"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682686962"><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686962"><span class="hs-identifier hs-var">y</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682686963"><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686963"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimRep
</span><a href="#local-6989586621682686955"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686961"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">JStgExpr
</span><a href="#local-6989586621682686962"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PrimRep, [JStgExpr])
-&gt; [(PrimRep, [JStgExpr])] -&gt; [(PrimRep, [JStgExpr])]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[PrimRep] -&gt; [JStgExpr] -&gt; [(PrimRep, [JStgExpr])]
</span><a href="GHC.StgToJS.Utils.html#assocPrimReps"><span class="hs-identifier hs-var">assocPrimReps</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimRep]
</span><a href="#local-6989586621682686956"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686963"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-264"></span><span>  </span><span id="local-6989586621682686964"><span class="annot"><span class="annottext">(SlotCount, [JStgExpr])
</span><a href="#local-6989586621682686964"><span class="hs-identifier hs-var">err</span></a></span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; [(PrimRep, [JStgExpr])]
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;assocPrimReps&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SlotCount, [JExpr]) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">((SlotCount, [JExpr]) -&gt; SDoc) -&gt; (SlotCount, [JExpr]) -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(JStgExpr -&gt; JExpr) -&gt; [JStgExpr] -&gt; [JExpr]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">JStgExpr -&gt; JExpr
</span><a href="GHC.JS.Transform.html#jStgExprToJS"><span class="hs-identifier hs-var">jStgExprToJS</span></a></span><span> </span><span class="annot"><span class="annottext">([JStgExpr] -&gt; [JExpr])
-&gt; (SlotCount, [JStgExpr]) -&gt; (SlotCount, [JExpr])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(SlotCount, [JStgExpr])
</span><a href="#local-6989586621682686964"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- | Associate the given values to the Id's PrimReps, taking into account the</span><span>
</span><span id="line-267"></span><span class="hs-comment">-- number of slots per PrimRep</span><span>
</span><span id="line-268"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assocIdPrimReps"><span class="hs-identifier hs-type">assocIdPrimReps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgExpr"><span class="hs-identifier hs-type">JStgExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#PrimRep"><span class="hs-identifier hs-type">PrimRep</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgExpr"><span class="hs-identifier hs-type">JStgExpr</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-269"></span><span id="assocIdPrimReps"><span class="annot"><span class="annottext">assocIdPrimReps :: Id -&gt; [JStgExpr] -&gt; [(PrimRep, [JStgExpr])]
</span><a href="GHC.StgToJS.Utils.html#assocIdPrimReps"><span class="hs-identifier hs-var hs-var">assocIdPrimReps</span></a></span></span><span> </span><span id="local-6989586621682686968"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682686968"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimRep] -&gt; [JStgExpr] -&gt; [(PrimRep, [JStgExpr])]
</span><a href="GHC.StgToJS.Utils.html#assocPrimReps"><span class="hs-identifier hs-var">assocPrimReps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; [PrimRep]
</span><a href="GHC.StgToJS.Utils.html#idPrimReps"><span class="hs-identifier hs-var">idPrimReps</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682686968"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="hs-comment">-- | Associate the given JExpr to the Id's PrimReps, taking into account the</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- number of slots per PrimRep</span><span>
</span><span id="line-273"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#assocIdExprs"><span class="hs-identifier hs-type">assocIdExprs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgExpr"><span class="hs-identifier hs-type">JStgExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-274"></span><span id="assocIdExprs"><span class="annot"><span class="annottext">assocIdExprs :: Id -&gt; [JStgExpr] -&gt; [TypedExpr]
</span><a href="GHC.StgToJS.Utils.html#assocIdExprs"><span class="hs-identifier hs-var hs-var">assocIdExprs</span></a></span></span><span> </span><span id="local-6989586621682686969"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682686969"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682686970"><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686970"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((PrimRep, [JStgExpr]) -&gt; TypedExpr)
-&gt; [(PrimRep, [JStgExpr])] -&gt; [TypedExpr]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PrimRep -&gt; [JStgExpr] -&gt; TypedExpr)
-&gt; (PrimRep, [JStgExpr]) -&gt; TypedExpr
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">PrimRep -&gt; [JStgExpr] -&gt; TypedExpr
</span><a href="GHC.StgToJS.Types.html#TypedExpr"><span class="hs-identifier hs-var">TypedExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; [JStgExpr] -&gt; [(PrimRep, [JStgExpr])]
</span><a href="GHC.StgToJS.Utils.html#assocIdPrimReps"><span class="hs-identifier hs-var">assocIdPrimReps</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682686969"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">[JStgExpr]
</span><a href="#local-6989586621682686970"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#mkArityTag"><span class="hs-identifier hs-type">mkArityTag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-277"></span><span id="mkArityTag"><span class="annot"><span class="annottext">mkArityTag :: Int -&gt; Int -&gt; Int
</span><a href="GHC.StgToJS.Utils.html#mkArityTag"><span class="hs-identifier hs-var hs-var">mkArityTag</span></a></span></span><span> </span><span id="local-6989586621682686972"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682686972"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span id="local-6989586621682686973"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682686973"><span class="hs-identifier hs-var">registers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682686972"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Bits..|.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682686973"><span class="hs-identifier hs-var">registers</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`Bits.shiftL`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-280"></span><span class="hs-comment">--                        Stg Utils</span><span>
</span><span id="line-281"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span id="local-6989586621682686585"><span class="annot"><a href="GHC.StgToJS.Utils.html#s"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682686585"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682686585"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-284"></span><span id="s"><span class="annot"><span class="annottext">s :: forall a. a -&gt; Set a
</span><a href="GHC.StgToJS.Utils.html#s"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Set a
forall a. a -&gt; Set a
</span><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#singleton"><span class="hs-identifier hs-var">S.singleton</span></a></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span id="local-6989586621682686587"><span class="annot"><a href="GHC.StgToJS.Utils.html#l"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682686587"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682686587"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span></span><span>
</span><span id="line-287"></span><span id="l"><span class="annot"><span class="annottext">l :: forall a. (a -&gt; Set Id) -&gt; [a] -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#l"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Set Id) -&gt; [a] -&gt; Set Id
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; [a] -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">F.foldMap</span></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="hs-comment">-- | collect Ids that this binding refers to</span><span>
</span><span id="line-290"></span><span class="hs-comment">--   (does not include the bindees themselves)</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- first argument is Id -&gt; StgExpr map for unfloated arguments</span><span>
</span><span id="line-292"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#bindingRefs"><span class="hs-identifier hs-type">bindingRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgExpr"><span class="hs-identifier hs-type">CgStgExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgBinding"><span class="hs-identifier hs-type">CgStgBinding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-293"></span><span id="bindingRefs"><span class="annot"><span class="annottext">bindingRefs :: UniqFM Id CgStgExpr -&gt; CgStgBinding -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#bindingRefs"><span class="hs-identifier hs-var hs-var">bindingRefs</span></a></span></span><span> </span><span id="local-6989586621682686983"><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682686983"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-294"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgNonRec"><span class="hs-identifier hs-type">StgNonRec</span></a></span><span> </span><span class="annot"><span class="annottext">BinderP 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682686985"><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682686985"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; GenStgRhs 'CodeGen -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#rhsRefs"><span class="hs-identifier hs-var">rhsRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682686983"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682686985"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-295"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRec"><span class="hs-identifier hs-type">StgRec</span></a></span><span> </span><span id="local-6989586621682686988"><span class="annot"><span class="annottext">[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682686988"><span class="hs-identifier hs-var">bs</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((Id, GenStgRhs 'CodeGen) -&gt; Set Id)
-&gt; [(Id, GenStgRhs 'CodeGen)] -&gt; Set Id
forall a. (a -&gt; Set Id) -&gt; [a] -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; GenStgRhs 'CodeGen -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#rhsRefs"><span class="hs-identifier hs-var">rhsRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682686983"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">(GenStgRhs 'CodeGen -&gt; Set Id)
-&gt; ((Id, GenStgRhs 'CodeGen) -&gt; GenStgRhs 'CodeGen)
-&gt; (Id, GenStgRhs 'CodeGen)
-&gt; Set Id
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Id, GenStgRhs 'CodeGen) -&gt; GenStgRhs 'CodeGen
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Id, GenStgRhs 'CodeGen)]
[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682686988"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#rhsRefs"><span class="hs-identifier hs-type">rhsRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgExpr"><span class="hs-identifier hs-type">CgStgExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgRhs"><span class="hs-identifier hs-type">CgStgRhs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-298"></span><span id="rhsRefs"><span class="annot"><span class="annottext">rhsRefs :: UniqFM Id CgStgExpr -&gt; GenStgRhs 'CodeGen -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#rhsRefs"><span class="hs-identifier hs-var hs-var">rhsRefs</span></a></span></span><span> </span><span id="local-6989586621682686991"><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682686991"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-299"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRhsClosure"><span class="hs-identifier hs-type">StgRhsClosure</span></a></span><span> </span><span class="annot"><span class="annottext">XRhsClosure 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CostCentreStack
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">UpdateFlag
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[BinderP 'CodeGen]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682686993"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682686993"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; CgStgExpr -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#exprRefs"><span class="hs-identifier hs-var">exprRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682686991"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682686993"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-300"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRhsCon"><span class="hs-identifier hs-type">StgRhsCon</span></a></span><span> </span><span id="local-6989586621682686995"><span class="annot"><span class="annottext">CostCentreStack
</span><a href="#local-6989586621682686995"><span class="hs-identifier hs-var">_ccs</span></a></span></span><span> </span><span id="local-6989586621682686996"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682686996"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621682686997"><span class="annot"><span class="annottext">ConstructorNumber
</span><a href="#local-6989586621682686997"><span class="hs-identifier hs-var">_mu</span></a></span></span><span> </span><span id="local-6989586621682686998"><span class="annot"><span class="annottext">[StgTickish]
</span><a href="#local-6989586621682686998"><span class="hs-identifier hs-var">_ticks</span></a></span></span><span> </span><span id="local-6989586621682686999"><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682686999"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Set Id) -&gt; [Id] -&gt; Set Id
forall a. (a -&gt; Set Id) -&gt; [a] -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Set Id
forall a. a -&gt; Set a
</span><a href="GHC.StgToJS.Utils.html#s"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687000"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621682687000"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687000"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [TyThing]
</span><a href="GHC.Core.DataCon.html#dataConImplicitTyThings"><span class="hs-identifier hs-var">dataConImplicitTyThings</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682686996"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Set Id -&gt; Set Id -&gt; Set Id
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(StgArg -&gt; Set Id) -&gt; [StgArg] -&gt; Set Id
forall a. (a -&gt; Set Id) -&gt; [a] -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; StgArg -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#argRefs"><span class="hs-identifier hs-var">argRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682686991"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682686999"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#exprRefs"><span class="hs-identifier hs-type">exprRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgExpr"><span class="hs-identifier hs-type">CgStgExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgExpr"><span class="hs-identifier hs-type">CgStgExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-303"></span><span id="exprRefs"><span class="annot"><span class="annottext">exprRefs :: UniqFM Id CgStgExpr -&gt; CgStgExpr -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#exprRefs"><span class="hs-identifier hs-var hs-var">exprRefs</span></a></span></span><span> </span><span id="local-6989586621682687004"><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-304"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgApp"><span class="hs-identifier hs-type">StgApp</span></a></span><span> </span><span id="local-6989586621682687006"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687006"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682687007"><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687007"><span class="hs-identifier hs-var">args</span></a></span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Set Id
forall a. a -&gt; Set a
</span><a href="GHC.StgToJS.Utils.html#s"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687006"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Set Id -&gt; Set Id -&gt; Set Id
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(StgArg -&gt; Set Id) -&gt; [StgArg] -&gt; Set Id
forall a. (a -&gt; Set Id) -&gt; [a] -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; StgArg -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#argRefs"><span class="hs-identifier hs-var">argRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687007"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-305"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgConApp"><span class="hs-identifier hs-type">StgConApp</span></a></span><span> </span><span id="local-6989586621682687009"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682687009"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621682687010"><span class="annot"><span class="annottext">ConstructorNumber
</span><a href="#local-6989586621682687010"><span class="hs-identifier hs-var">_n</span></a></span></span><span> </span><span id="local-6989586621682687011"><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687011"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="annot"><span class="annottext">[[PrimRep]]
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Set Id) -&gt; [Id] -&gt; Set Id
forall a. (a -&gt; Set Id) -&gt; [a] -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Set Id
forall a. a -&gt; Set a
</span><a href="GHC.StgToJS.Utils.html#s"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687012"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621682687012"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687012"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [TyThing]
</span><a href="GHC.Core.DataCon.html#dataConImplicitTyThings"><span class="hs-identifier hs-var">dataConImplicitTyThings</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682687009"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Set Id -&gt; Set Id -&gt; Set Id
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(StgArg -&gt; Set Id) -&gt; [StgArg] -&gt; Set Id
forall a. (a -&gt; Set Id) -&gt; [a] -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; StgArg -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#argRefs"><span class="hs-identifier hs-var">argRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687011"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-306"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgOpApp"><span class="hs-identifier hs-type">StgOpApp</span></a></span><span> </span><span class="annot"><span class="annottext">StgOp
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687014"><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687014"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(StgArg -&gt; Set Id) -&gt; [StgArg] -&gt; Set Id
forall a. (a -&gt; Set Id) -&gt; [a] -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; StgArg -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#argRefs"><span class="hs-identifier hs-var">argRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687014"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-307"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgLit"><span class="hs-identifier hs-type">StgLit</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set Id
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-308"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgCase"><span class="hs-identifier hs-type">StgCase</span></a></span><span> </span><span id="local-6989586621682687017"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687017"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="annot"><span class="annottext">BinderP 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AltType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687018"><span class="annot"><span class="annottext">[GenStgAlt 'CodeGen]
</span><a href="#local-6989586621682687018"><span class="hs-identifier hs-var">alts</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; CgStgExpr -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#exprRefs"><span class="hs-identifier hs-var">exprRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687017"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="annot"><span class="annottext">Set Id -&gt; Set Id -&gt; Set Id
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Set Id] -&gt; Set Id
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenStgAlt 'CodeGen -&gt; Set Id) -&gt; [GenStgAlt 'CodeGen] -&gt; [Set Id]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; GenStgAlt 'CodeGen -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#altRefs"><span class="hs-identifier hs-var">altRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenStgAlt 'CodeGen]
</span><a href="#local-6989586621682687018"><span class="hs-identifier hs-var">alts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgLet"><span class="hs-identifier hs-type">StgLet</span></a></span><span> </span><span class="annot"><span class="annottext">XLet 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687021"><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687021"><span class="hs-identifier hs-var">bnd</span></a></span></span><span> </span><span id="local-6989586621682687022"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687022"><span class="hs-identifier hs-var">expr</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; CgStgBinding -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#bindingRefs"><span class="hs-identifier hs-var">bindingRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687021"><span class="hs-identifier hs-var">bnd</span></a></span><span> </span><span class="annot"><span class="annottext">Set Id -&gt; Set Id -&gt; Set Id
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; CgStgExpr -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#exprRefs"><span class="hs-identifier hs-var">exprRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687022"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-310"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgLetNoEscape"><span class="hs-identifier hs-type">StgLetNoEscape</span></a></span><span> </span><span class="annot"><span class="annottext">XLetNoEscape 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687024"><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687024"><span class="hs-identifier hs-var">bnd</span></a></span></span><span> </span><span id="local-6989586621682687025"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687025"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; CgStgBinding -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#bindingRefs"><span class="hs-identifier hs-var">bindingRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687024"><span class="hs-identifier hs-var">bnd</span></a></span><span> </span><span class="annot"><span class="annottext">Set Id -&gt; Set Id -&gt; Set Id
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; CgStgExpr -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#exprRefs"><span class="hs-identifier hs-var">exprRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687025"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-311"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgTick"><span class="hs-identifier hs-type">StgTick</span></a></span><span> </span><span class="annot"><span class="annottext">StgTickish
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687027"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687027"><span class="hs-identifier hs-var">expr</span></a></span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; CgStgExpr -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#exprRefs"><span class="hs-identifier hs-var">exprRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687004"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687027"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#altRefs"><span class="hs-identifier hs-type">altRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgExpr"><span class="hs-identifier hs-type">CgStgExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgAlt"><span class="hs-identifier hs-type">CgStgAlt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-314"></span><span id="altRefs"><span class="annot"><span class="annottext">altRefs :: UniqFM Id CgStgExpr -&gt; GenStgAlt 'CodeGen -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#altRefs"><span class="hs-identifier hs-var hs-var">altRefs</span></a></span></span><span> </span><span id="local-6989586621682687029"><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687029"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682687030"><span class="annot"><span class="annottext">GenStgAlt 'CodeGen
</span><a href="#local-6989586621682687030"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; CgStgExpr -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#exprRefs"><span class="hs-identifier hs-var">exprRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687029"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenStgAlt 'CodeGen -&gt; CgStgExpr
forall (pass :: StgPass). GenStgAlt pass -&gt; GenStgExpr pass
</span><a href="GHC.Stg.Syntax.html#alt_rhs"><span class="hs-identifier hs-var">alt_rhs</span></a></span><span> </span><span class="annot"><span class="annottext">GenStgAlt 'CodeGen
</span><a href="#local-6989586621682687030"><span class="hs-identifier hs-var">alt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#argRefs"><span class="hs-identifier hs-type">argRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgExpr"><span class="hs-identifier hs-type">CgStgExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgArg"><span class="hs-identifier hs-type">StgArg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-317"></span><span id="argRefs"><span class="annot"><span class="annottext">argRefs :: UniqFM Id CgStgExpr -&gt; StgArg -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#argRefs"><span class="hs-identifier hs-var hs-var">argRefs</span></a></span></span><span> </span><span id="local-6989586621682687032"><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687032"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-318"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgVarArg"><span class="hs-identifier hs-type">StgVarArg</span></a></span><span> </span><span id="local-6989586621682687034"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687034"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-319"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682687035"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687035"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; Id -&gt; Maybe CgStgExpr
forall key elt. Uniquable key =&gt; UniqFM key elt -&gt; key -&gt; Maybe elt
</span><a href="GHC.Types.Unique.FM.html#lookupUFM"><span class="hs-identifier hs-var">lookupUFM</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687032"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687034"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; CgStgExpr -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#exprRefs"><span class="hs-identifier hs-var">exprRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687032"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687035"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-320"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Set Id
forall a. a -&gt; Set a
</span><a href="GHC.StgToJS.Utils.html#s"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687034"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-321"></span><span>  </span><span class="annot"><span class="annottext">StgArg
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set Id
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#hasExport"><span class="hs-identifier hs-type">hasExport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgBinding"><span class="hs-identifier hs-type">CgStgBinding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-324"></span><span id="hasExport"><span class="annot"><span class="annottext">hasExport :: CgStgBinding -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#hasExport"><span class="hs-identifier hs-var hs-var">hasExport</span></a></span></span><span> </span><span id="local-6989586621682687037"><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687037"><span class="hs-identifier hs-var">bnd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687037"><span class="hs-identifier hs-var">bnd</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-326"></span><span>    </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgNonRec"><span class="hs-identifier hs-type">StgNonRec</span></a></span><span> </span><span id="local-6989586621682687038"><span class="annot"><span class="annottext">BinderP 'CodeGen
</span><a href="#local-6989586621682687038"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682687039"><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687039"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; GenStgRhs 'CodeGen -&gt; Bool
forall {p} {pass :: StgPass}. p -&gt; GenStgRhs pass -&gt; Bool
</span><a href="#local-6989586621682687040"><span class="hs-identifier hs-var">isExportedBind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
BinderP 'CodeGen
</span><a href="#local-6989586621682687038"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687039"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRec"><span class="hs-identifier hs-type">StgRec</span></a></span><span> </span><span id="local-6989586621682687041"><span class="annot"><span class="annottext">[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682687041"><span class="hs-identifier hs-var">bs</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((Id, GenStgRhs 'CodeGen) -&gt; Bool)
-&gt; [(Id, GenStgRhs 'CodeGen)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Id -&gt; GenStgRhs 'CodeGen -&gt; Bool)
-&gt; (Id, GenStgRhs 'CodeGen) -&gt; Bool
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; GenStgRhs 'CodeGen -&gt; Bool
forall {p} {pass :: StgPass}. p -&gt; GenStgRhs pass -&gt; Bool
</span><a href="#local-6989586621682687040"><span class="hs-identifier hs-var">isExportedBind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Id, GenStgRhs 'CodeGen)]
[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682687041"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-329"></span><span>    </span><span id="local-6989586621682687040"><span class="annot"><span class="annottext">isExportedBind :: p -&gt; GenStgRhs pass -&gt; Bool
</span><a href="#local-6989586621682687040"><span class="hs-identifier hs-var hs-var">isExportedBind</span></a></span></span><span> </span><span id="local-6989586621682687047"><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621682687047"><span class="hs-identifier hs-var">_i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRhsCon"><span class="hs-identifier hs-type">StgRhsCon</span></a></span><span> </span><span id="local-6989586621682687048"><span class="annot"><span class="annottext">CostCentreStack
</span><a href="#local-6989586621682687048"><span class="hs-identifier hs-var">_cc</span></a></span></span><span> </span><span id="local-6989586621682687049"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682687049"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConstructorNumber
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[StgTickish]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-330"></span><span>      </span><span class="annot"><span class="annottext">DataCon -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682687049"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Unique -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.Builtin.Names.html#staticPtrDataConKey"><span class="hs-identifier hs-var">staticPtrDataConKey</span></a></span><span>
</span><span id="line-331"></span><span>    </span><span class="annot"><a href="#local-6989586621682687040"><span class="hs-identifier hs-var">isExportedBind</span></a></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">GenStgRhs pass
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#collectTopIds"><span class="hs-identifier hs-type">collectTopIds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgBinding"><span class="hs-identifier hs-type">CgStgBinding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-334"></span><span id="collectTopIds"><span class="annot"><span class="annottext">collectTopIds :: CgStgBinding -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#collectTopIds"><span class="hs-identifier hs-var hs-var">collectTopIds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgNonRec"><span class="hs-identifier hs-type">StgNonRec</span></a></span><span> </span><span id="local-6989586621682687052"><span class="annot"><span class="annottext">BinderP 'CodeGen
</span><a href="#local-6989586621682687052"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
BinderP 'CodeGen
</span><a href="#local-6989586621682687052"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-335"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#collectTopIds"><span class="hs-identifier hs-var">collectTopIds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRec"><span class="hs-identifier hs-type">StgRec</span></a></span><span> </span><span id="local-6989586621682687053"><span class="annot"><span class="annottext">[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682687053"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682687054"><span class="annot"><span class="annottext">xs :: [Id]
</span><a href="#local-6989586621682687054"><span class="hs-identifier hs-var hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Id, GenStgRhs 'CodeGen) -&gt; Id)
-&gt; [(Id, GenStgRhs 'CodeGen)] -&gt; [Id]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapFragileIdInfo"><span class="hs-identifier hs-var">zapFragileIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Id)
-&gt; ((Id, GenStgRhs 'CodeGen) -&gt; Id)
-&gt; (Id, GenStgRhs 'CodeGen)
-&gt; Id
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Id, GenStgRhs 'CodeGen) -&gt; Id
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Id, GenStgRhs 'CodeGen)]
[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682687053"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-336"></span><span>                            </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">[Id] -&gt; ZonkAny 0 -&gt; ZonkAny 0
forall a b. [a] -&gt; b -&gt; b
</span><a href="GHC.Utils.Misc.html#seqList"><span class="hs-identifier hs-var">seqList</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682687054"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkAny 0 -&gt; ZonkAny 0) -&gt; [Id] -&gt; [Id]
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682687054"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#collectIds"><span class="hs-identifier hs-type">collectIds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgExpr"><span class="hs-identifier hs-type">CgStgExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgBinding"><span class="hs-identifier hs-type">CgStgBinding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-339"></span><span id="collectIds"><span class="annot"><span class="annottext">collectIds :: UniqFM Id CgStgExpr -&gt; CgStgBinding -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#collectIds"><span class="hs-identifier hs-var hs-var">collectIds</span></a></span></span><span> </span><span id="local-6989586621682687058"><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687058"><span class="hs-identifier hs-var">unfloated</span></a></span></span><span> </span><span id="local-6989586621682687059"><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687059"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682687060"><span class="annot"><span class="annottext">xs :: [Id]
</span><a href="#local-6989586621682687060"><span class="hs-identifier hs-var hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Id) -&gt; [Id] -&gt; [Id]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Id
</span><a href="GHC.Types.Id.html#zapFragileIdInfo"><span class="hs-identifier hs-var">zapFragileIdInfo</span></a></span><span> </span><span class="annot"><span class="annottext">([Id] -&gt; [Id]) -&gt; ([Id] -&gt; [Id]) -&gt; [Id] -&gt; [Id]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span>
</span><span id="line-341"></span><span>           </span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; [Id] -&gt; [Id]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
forall {a}. NamedThing a =&gt; a -&gt; Bool
</span><a href="#local-6989586621682687061"><span class="hs-identifier hs-var">acceptId</span></a></span><span> </span><span class="annot"><span class="annottext">([Id] -&gt; [Id]) -&gt; [Id] -&gt; [Id]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set Id -&gt; [Id]
forall a. Set a -&gt; [a]
</span><a href="../../containers-0.7-5a8f/src/Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">S.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr -&gt; CgStgBinding -&gt; Set Id
</span><a href="GHC.StgToJS.Utils.html#bindingRefs"><span class="hs-identifier hs-var">bindingRefs</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM Id CgStgExpr
</span><a href="#local-6989586621682687058"><span class="hs-identifier hs-var">unfloated</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687059"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">[Id] -&gt; ZonkAny 1 -&gt; ZonkAny 1
forall a b. [a] -&gt; b -&gt; b
</span><a href="GHC.Utils.Misc.html#seqList"><span class="hs-identifier hs-var">seqList</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682687060"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkAny 1 -&gt; ZonkAny 1) -&gt; [Id] -&gt; [Id]
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682687060"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-344"></span><span>    </span><span id="local-6989586621682687061"><span class="annot"><span class="annottext">acceptId :: a -&gt; Bool
</span><a href="#local-6989586621682687061"><span class="hs-identifier hs-var hs-var">acceptId</span></a></span></span><span> </span><span id="local-6989586621682687066"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682687066"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a -&gt; Bool) -&gt; Bool) -&gt; [a -&gt; Bool] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Bool) -&gt; a -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682687066"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (a -&gt; Bool) -&gt; a -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Bool
forall {a}. NamedThing a =&gt; a -&gt; Bool
</span><a href="#local-6989586621682687069"><span class="hs-identifier hs-var">isForbidden</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- fixme test this: [isExported[isGlobalId, not.isForbidden]</span><span>
</span><span id="line-345"></span><span>    </span><span id="local-6989586621682687069"><span class="annot"><span class="annottext">isForbidden :: a -&gt; Bool
</span><a href="#local-6989586621682687069"><span class="hs-identifier hs-var hs-var">isForbidden</span></a></span></span><span> </span><span id="local-6989586621682687079"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682687079"><span class="hs-identifier hs-var">i</span></a></span></span><span>
</span><span id="line-346"></span><span>      </span><span class="hs-comment">-- the GHC.Prim module has no js source file</span><span>
</span><span id="line-347"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682687080"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682687080"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Module
</span><a href="GHC.Types.Name.html#nameModule_maybe"><span class="hs-identifier hs-var">nameModule_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682687079"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682687080"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; Module -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="GHC.Builtin.Names.html#gHC_PRIM"><span class="hs-identifier hs-var">gHC_PRIM</span></a></span><span>
</span><span id="line-349"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-350"></span><span>      </span><span class="hs-comment">-- unboxed tuples have no definition</span><span>
</span><span id="line-351"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isUnboxedTupleDataConLikeName"><span class="hs-identifier hs-var">isUnboxedTupleDataConLikeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682687079"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-353"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-354"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-comment">-----------------------------------------------------</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- Live vars</span><span>
</span><span id="line-358"></span><span class="hs-comment">--</span><span>
</span><span id="line-359"></span><span class="hs-comment">-- TODO: should probably be moved into GHC.Stg.LiveVars</span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span class="hs-keyword">type</span><span> </span><span id="LiveVars"><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-var">LiveVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#DVarSet"><span class="hs-identifier hs-type">DVarSet</span></a></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#liveStatic"><span class="hs-identifier hs-type">liveStatic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-type">LiveVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-type">LiveVars</span></a></span><span>
</span><span id="line-364"></span><span id="liveStatic"><span class="annot"><span class="annottext">liveStatic :: LiveVars -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#liveStatic"><span class="hs-identifier hs-var hs-var">liveStatic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; LiveVars -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#filterDVarSet"><span class="hs-identifier hs-var">filterDVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isGlobalId"><span class="hs-identifier hs-var">isGlobalId</span></a></span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#liveVars"><span class="hs-identifier hs-type">liveVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-type">LiveVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-type">LiveVars</span></a></span><span>
</span><span id="line-367"></span><span id="liveVars"><span class="annot"><span class="annottext">liveVars :: LiveVars -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#liveVars"><span class="hs-identifier hs-var hs-var">liveVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; LiveVars -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#filterDVarSet"><span class="hs-identifier hs-var">filterDVarSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (Id -&gt; Bool) -&gt; Id -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isGlobalId"><span class="hs-identifier hs-var">isGlobalId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgBindLive"><span class="hs-identifier hs-type">stgBindLive</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgBinding"><span class="hs-identifier hs-type">CgStgBinding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-type">LiveVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-370"></span><span id="stgBindLive"><span class="annot"><span class="annottext">stgBindLive :: CgStgBinding -&gt; [(Id, LiveVars)]
</span><a href="GHC.StgToJS.Utils.html#stgBindLive"><span class="hs-identifier hs-var hs-var">stgBindLive</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-371"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgNonRec"><span class="hs-identifier hs-type">StgNonRec</span></a></span><span> </span><span id="local-6989586621682687089"><span class="annot"><span class="annottext">BinderP 'CodeGen
</span><a href="#local-6989586621682687089"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682687090"><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687090"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
BinderP 'CodeGen
</span><a href="#local-6989586621682687089"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgRhsLive"><span class="hs-identifier hs-var">stgRhsLive</span></a></span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687090"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-372"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRec"><span class="hs-identifier hs-type">StgRec</span></a></span><span> </span><span id="local-6989586621682687091"><span class="annot"><span class="annottext">[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682687091"><span class="hs-identifier hs-var">bs</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((Id, GenStgRhs 'CodeGen) -&gt; (Id, LiveVars))
-&gt; [(Id, GenStgRhs 'CodeGen)] -&gt; [(Id, LiveVars)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682687092"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687092"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682687093"><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687093"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687092"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgRhsLive"><span class="hs-identifier hs-var">stgRhsLive</span></a></span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687093"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Id, GenStgRhs 'CodeGen)]
[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682687091"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgBindRhsLive"><span class="hs-identifier hs-type">stgBindRhsLive</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgBinding"><span class="hs-identifier hs-type">CgStgBinding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-type">LiveVars</span></a></span><span>
</span><span id="line-375"></span><span id="stgBindRhsLive"><span class="annot"><span class="annottext">stgBindRhsLive :: CgStgBinding -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgBindRhsLive"><span class="hs-identifier hs-var hs-var">stgBindRhsLive</span></a></span></span><span> </span><span id="local-6989586621682687095"><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687095"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682687096"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682687096"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682687097"><span class="annot"><span class="annottext">[LiveVars]
</span><a href="#local-6989586621682687097"><span class="hs-identifier hs-var">ls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Id, LiveVars)] -&gt; ([Id], [LiveVars])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgStgBinding -&gt; [(Id, LiveVars)]
</span><a href="GHC.StgToJS.Utils.html#stgBindLive"><span class="hs-identifier hs-var">stgBindLive</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687095"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">LiveVars -&gt; [Id] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#delDVarSetList"><span class="hs-identifier hs-var">delDVarSetList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LiveVars] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unionDVarSets"><span class="hs-identifier hs-var">unionDVarSets</span></a></span><span> </span><span class="annot"><span class="annottext">[LiveVars]
</span><a href="#local-6989586621682687097"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682687096"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgRhsLive"><span class="hs-identifier hs-type">stgRhsLive</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgRhs"><span class="hs-identifier hs-type">CgStgRhs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-type">LiveVars</span></a></span><span>
</span><span id="line-380"></span><span id="stgRhsLive"><span class="annot"><span class="annottext">stgRhsLive :: GenStgRhs 'CodeGen -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgRhsLive"><span class="hs-identifier hs-var hs-var">stgRhsLive</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-381"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRhsClosure"><span class="hs-identifier hs-type">StgRhsClosure</span></a></span><span> </span><span class="annot"><span class="annottext">XRhsClosure 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CostCentreStack
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">UpdateFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687101"><span class="annot"><span class="annottext">[BinderP 'CodeGen]
</span><a href="#local-6989586621682687101"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621682687102"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687102"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiveVars -&gt; [Id] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#delDVarSetList"><span class="hs-identifier hs-var">delDVarSetList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; CgStgExpr -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgExprLive"><span class="hs-identifier hs-var">stgExprLive</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687102"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Id]
[BinderP 'CodeGen]
</span><a href="#local-6989586621682687101"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-382"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRhsCon"><span class="hs-identifier hs-type">StgRhsCon</span></a></span><span> </span><span class="annot"><span class="annottext">CostCentreStack
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConstructorNumber
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[StgTickish]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687103"><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687103"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LiveVars] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unionDVarSets"><span class="hs-identifier hs-var">unionDVarSets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StgArg -&gt; LiveVars) -&gt; [StgArg] -&gt; [LiveVars]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">StgArg -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgArgLive"><span class="hs-identifier hs-var">stgArgLive</span></a></span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687103"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgArgLive"><span class="hs-identifier hs-type">stgArgLive</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgArg"><span class="hs-identifier hs-type">StgArg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-type">LiveVars</span></a></span><span>
</span><span id="line-385"></span><span id="stgArgLive"><span class="annot"><span class="annottext">stgArgLive :: StgArg -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgArgLive"><span class="hs-identifier hs-var hs-var">stgArgLive</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-386"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgVarArg"><span class="hs-identifier hs-type">StgVarArg</span></a></span><span> </span><span id="local-6989586621682687105"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687105"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unitDVarSet"><span class="hs-identifier hs-var">unitDVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687105"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-387"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgLitArg"><span class="hs-identifier hs-type">StgLitArg</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiveVars
</span><a href="GHC.Types.Var.Set.html#emptyDVarSet"><span class="hs-identifier hs-var">emptyDVarSet</span></a></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgExprLive"><span class="hs-identifier hs-type">stgExprLive</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgExpr"><span class="hs-identifier hs-type">CgStgExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-type">LiveVars</span></a></span><span>
</span><span id="line-390"></span><span id="stgExprLive"><span class="annot"><span class="annottext">stgExprLive :: Bool -&gt; CgStgExpr -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgExprLive"><span class="hs-identifier hs-var hs-var">stgExprLive</span></a></span></span><span> </span><span id="local-6989586621682687109"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682687109"><span class="hs-identifier hs-var">includeLHS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-391"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgApp"><span class="hs-identifier hs-type">StgApp</span></a></span><span> </span><span id="local-6989586621682687110"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687110"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span id="local-6989586621682687111"><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687111"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LiveVars] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unionDVarSets"><span class="hs-identifier hs-var">unionDVarSets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unitDVarSet"><span class="hs-identifier hs-var">unitDVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687110"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">LiveVars -&gt; [LiveVars] -&gt; [LiveVars]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(StgArg -&gt; LiveVars) -&gt; [StgArg] -&gt; [LiveVars]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">StgArg -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgArgLive"><span class="hs-identifier hs-var">stgArgLive</span></a></span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687111"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgLit"><span class="hs-identifier hs-type">StgLit</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiveVars
</span><a href="GHC.Types.Var.Set.html#emptyDVarSet"><span class="hs-identifier hs-var">emptyDVarSet</span></a></span><span>
</span><span id="line-393"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgConApp"><span class="hs-identifier hs-type">StgConApp</span></a></span><span> </span><span id="local-6989586621682687112"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682687112"><span class="hs-identifier hs-var">_dc</span></a></span></span><span> </span><span id="local-6989586621682687113"><span class="annot"><span class="annottext">ConstructorNumber
</span><a href="#local-6989586621682687113"><span class="hs-identifier hs-var">_n</span></a></span></span><span> </span><span id="local-6989586621682687114"><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687114"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621682687115"><span class="annot"><span class="annottext">[[PrimRep]]
</span><a href="#local-6989586621682687115"><span class="hs-identifier hs-var">_tys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LiveVars] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unionDVarSets"><span class="hs-identifier hs-var">unionDVarSets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StgArg -&gt; LiveVars) -&gt; [StgArg] -&gt; [LiveVars]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">StgArg -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgArgLive"><span class="hs-identifier hs-var">stgArgLive</span></a></span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687114"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgOpApp"><span class="hs-identifier hs-type">StgOpApp</span></a></span><span> </span><span id="local-6989586621682687116"><span class="annot"><span class="annottext">StgOp
</span><a href="#local-6989586621682687116"><span class="hs-identifier hs-var">_op</span></a></span></span><span> </span><span id="local-6989586621682687117"><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687117"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621682687118"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682687118"><span class="hs-identifier hs-var">_ty</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LiveVars] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unionDVarSets"><span class="hs-identifier hs-var">unionDVarSets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StgArg -&gt; LiveVars) -&gt; [StgArg] -&gt; [LiveVars]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">StgArg -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgArgLive"><span class="hs-identifier hs-var">stgArgLive</span></a></span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687117"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgCase"><span class="hs-identifier hs-type">StgCase</span></a></span><span> </span><span id="local-6989586621682687119"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687119"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682687120"><span class="annot"><span class="annottext">BinderP 'CodeGen
</span><a href="#local-6989586621682687120"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682687121"><span class="annot"><span class="annottext">AltType
</span><a href="#local-6989586621682687121"><span class="hs-identifier hs-var">_at</span></a></span></span><span> </span><span id="local-6989586621682687122"><span class="annot"><span class="annottext">[GenStgAlt 'CodeGen]
</span><a href="#local-6989586621682687122"><span class="hs-identifier hs-var">alts</span></a></span></span><span>
</span><span id="line-396"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682687109"><span class="hs-identifier hs-var">includeLHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiveVars
</span><a href="#local-6989586621682687123"><span class="hs-identifier hs-var">el</span></a></span><span> </span><span class="annot"><span class="annottext">LiveVars -&gt; LiveVars -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unionDVarSet"><span class="hs-operator hs-var">`unionDVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">LiveVars -&gt; Id -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#delDVarSet"><span class="hs-identifier hs-var">delDVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">LiveVars
</span><a href="#local-6989586621682687126"><span class="hs-identifier hs-var">al</span></a></span><span> </span><span class="annot"><span class="annottext">Id
BinderP 'CodeGen
</span><a href="#local-6989586621682687120"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiveVars -&gt; Id -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#delDVarSet"><span class="hs-identifier hs-var">delDVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">LiveVars
</span><a href="#local-6989586621682687126"><span class="hs-identifier hs-var">al</span></a></span><span> </span><span class="annot"><span class="annottext">Id
BinderP 'CodeGen
</span><a href="#local-6989586621682687120"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-398"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-399"></span><span>      </span><span id="local-6989586621682687126"><span class="annot"><span class="annottext">al :: LiveVars
</span><a href="#local-6989586621682687126"><span class="hs-identifier hs-var hs-var">al</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LiveVars] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unionDVarSets"><span class="hs-identifier hs-var">unionDVarSets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenStgAlt 'CodeGen -&gt; LiveVars)
-&gt; [GenStgAlt 'CodeGen] -&gt; [LiveVars]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">GenStgAlt 'CodeGen -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgAltLive"><span class="hs-identifier hs-var">stgAltLive</span></a></span><span> </span><span class="annot"><span class="annottext">[GenStgAlt 'CodeGen]
</span><a href="#local-6989586621682687122"><span class="hs-identifier hs-var">alts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>      </span><span id="local-6989586621682687123"><span class="annot"><span class="annottext">el :: LiveVars
</span><a href="#local-6989586621682687123"><span class="hs-identifier hs-var hs-var">el</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; CgStgExpr -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgExprLive"><span class="hs-identifier hs-var">stgExprLive</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687119"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-401"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgLet"><span class="hs-identifier hs-type">StgLet</span></a></span><span> </span><span class="annot"><span class="annottext">XLet 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687128"><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687128"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682687129"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687129"><span class="hs-identifier hs-var">e</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiveVars -&gt; [Id] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#delDVarSetList"><span class="hs-identifier hs-var">delDVarSetList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgStgBinding -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgBindRhsLive"><span class="hs-identifier hs-var">stgBindRhsLive</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687128"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">LiveVars -&gt; LiveVars -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unionDVarSet"><span class="hs-operator hs-var">`unionDVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; CgStgExpr -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgExprLive"><span class="hs-identifier hs-var">stgExprLive</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687129"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgStgBinding -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#bindees"><span class="hs-identifier hs-var">bindees</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687128"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgLetNoEscape"><span class="hs-identifier hs-type">StgLetNoEscape</span></a></span><span> </span><span class="annot"><span class="annottext">XLetNoEscape 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687131"><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687131"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682687132"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687132"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiveVars -&gt; [Id] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#delDVarSetList"><span class="hs-identifier hs-var">delDVarSetList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgStgBinding -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgBindRhsLive"><span class="hs-identifier hs-var">stgBindRhsLive</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687131"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">LiveVars -&gt; LiveVars -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#unionDVarSet"><span class="hs-operator hs-var">`unionDVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; CgStgExpr -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgExprLive"><span class="hs-identifier hs-var">stgExprLive</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687132"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgStgBinding -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#bindees"><span class="hs-identifier hs-var">bindees</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687131"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgTick"><span class="hs-identifier hs-type">StgTick</span></a></span><span> </span><span id="local-6989586621682687133"><span class="annot"><span class="annottext">StgTickish
</span><a href="#local-6989586621682687133"><span class="hs-identifier hs-var">_ti</span></a></span></span><span> </span><span id="local-6989586621682687134"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687134"><span class="hs-identifier hs-var">e</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; CgStgExpr -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgExprLive"><span class="hs-identifier hs-var">stgExprLive</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687134"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgAltLive"><span class="hs-identifier hs-type">stgAltLive</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgAlt"><span class="hs-identifier hs-type">CgStgAlt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Utils.html#LiveVars"><span class="hs-identifier hs-type">LiveVars</span></a></span><span>
</span><span id="line-406"></span><span id="stgAltLive"><span class="annot"><span class="annottext">stgAltLive :: GenStgAlt 'CodeGen -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgAltLive"><span class="hs-identifier hs-var hs-var">stgAltLive</span></a></span></span><span> </span><span id="local-6989586621682687135"><span class="annot"><span class="annottext">GenStgAlt 'CodeGen
</span><a href="#local-6989586621682687135"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-407"></span><span>  </span><span class="annot"><span class="annottext">LiveVars -&gt; [Id] -&gt; LiveVars
</span><a href="GHC.Types.Var.Set.html#delDVarSetList"><span class="hs-identifier hs-var">delDVarSetList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; CgStgExpr -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgExprLive"><span class="hs-identifier hs-var">stgExprLive</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenStgAlt 'CodeGen -&gt; CgStgExpr
forall (pass :: StgPass). GenStgAlt pass -&gt; GenStgExpr pass
</span><a href="GHC.Stg.Syntax.html#alt_rhs"><span class="hs-identifier hs-var">alt_rhs</span></a></span><span> </span><span class="annot"><span class="annottext">GenStgAlt 'CodeGen
</span><a href="#local-6989586621682687135"><span class="hs-identifier hs-var">alt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenStgAlt 'CodeGen -&gt; [BinderP 'CodeGen]
forall (pass :: StgPass). GenStgAlt pass -&gt; [BinderP pass]
</span><a href="GHC.Stg.Syntax.html#alt_bndrs"><span class="hs-identifier hs-var">alt_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">GenStgAlt 'CodeGen
</span><a href="#local-6989586621682687135"><span class="hs-identifier hs-var">alt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#bindees"><span class="hs-identifier hs-type">bindees</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgBinding"><span class="hs-identifier hs-type">CgStgBinding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-410"></span><span id="bindees"><span class="annot"><span class="annottext">bindees :: CgStgBinding -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#bindees"><span class="hs-identifier hs-var hs-var">bindees</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-411"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgNonRec"><span class="hs-identifier hs-type">StgNonRec</span></a></span><span> </span><span id="local-6989586621682687137"><span class="annot"><span class="annottext">BinderP 'CodeGen
</span><a href="#local-6989586621682687137"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682687138"><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687138"><span class="hs-identifier hs-var">_e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
BinderP 'CodeGen
</span><a href="#local-6989586621682687137"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-412"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRec"><span class="hs-identifier hs-type">StgRec</span></a></span><span> </span><span id="local-6989586621682687139"><span class="annot"><span class="annottext">[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682687139"><span class="hs-identifier hs-var">bs</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((Id, GenStgRhs 'CodeGen) -&gt; Id)
-&gt; [(Id, GenStgRhs 'CodeGen)] -&gt; [Id]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Id, GenStgRhs 'CodeGen) -&gt; Id
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">[(Id, GenStgRhs 'CodeGen)]
[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682687139"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isUpdatableRhs"><span class="hs-identifier hs-type">isUpdatableRhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgRhs"><span class="hs-identifier hs-type">CgStgRhs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-415"></span><span id="isUpdatableRhs"><span class="annot"><span class="annottext">isUpdatableRhs :: GenStgRhs 'CodeGen -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isUpdatableRhs"><span class="hs-identifier hs-var hs-var">isUpdatableRhs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRhsClosure"><span class="hs-identifier hs-type">StgRhsClosure</span></a></span><span> </span><span class="annot"><span class="annottext">XRhsClosure 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CostCentreStack
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687140"><span class="annot"><span class="annottext">UpdateFlag
</span><a href="#local-6989586621682687140"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><span class="annottext">[BinderP 'CodeGen]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpdateFlag -&gt; Bool
</span><a href="GHC.Stg.Syntax.html#isUpdatable"><span class="hs-identifier hs-var">isUpdatable</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateFlag
</span><a href="#local-6989586621682687140"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-416"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isUpdatableRhs"><span class="hs-identifier hs-var">isUpdatableRhs</span></a></span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><span class="hs-identifier">_</span></span><span>                           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgLneLive%27"><span class="hs-identifier hs-type">stgLneLive'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgBinding"><span class="hs-identifier hs-type">CgStgBinding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-419"></span><span id="stgLneLive%27"><span class="annot"><span class="annottext">stgLneLive' :: CgStgBinding -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#stgLneLive%27"><span class="hs-identifier hs-var hs-var">stgLneLive'</span></a></span></span><span> </span><span id="local-6989586621682687142"><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687142"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; [Id] -&gt; [Id]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="annot"><span class="annottext">CgStgBinding -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#bindees"><span class="hs-identifier hs-var">bindees</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687142"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgStgBinding -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#stgLneLive"><span class="hs-identifier hs-var">stgLneLive</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><a href="#local-6989586621682687142"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgLneLive"><span class="hs-identifier hs-type">stgLneLive</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgBinding"><span class="hs-identifier hs-type">CgStgBinding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-422"></span><span id="stgLneLive"><span class="annot"><span class="annottext">stgLneLive :: CgStgBinding -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#stgLneLive"><span class="hs-identifier hs-var hs-var">stgLneLive</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgNonRec"><span class="hs-identifier hs-type">StgNonRec</span></a></span><span> </span><span id="local-6989586621682687145"><span class="annot"><span class="annottext">BinderP 'CodeGen
</span><a href="#local-6989586621682687145"><span class="hs-identifier hs-var">_b</span></a></span></span><span> </span><span id="local-6989586621682687146"><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687146"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#stgLneLiveExpr"><span class="hs-identifier hs-var">stgLneLiveExpr</span></a></span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687146"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-423"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgLneLive"><span class="hs-identifier hs-var">stgLneLive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgRec"><span class="hs-identifier hs-type">StgRec</span></a></span><span> </span><span id="local-6989586621682687147"><span class="annot"><span class="annottext">[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682687147"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; [Id]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">L.nub</span></span><span> </span><span class="annot"><span class="annottext">([Id] -&gt; [Id]) -&gt; [Id] -&gt; [Id]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Id, GenStgRhs 'CodeGen) -&gt; [Id])
-&gt; [(Id, GenStgRhs 'CodeGen)] -&gt; [Id]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#stgLneLiveExpr"><span class="hs-identifier hs-var">stgLneLiveExpr</span></a></span><span> </span><span class="annot"><span class="annottext">(GenStgRhs 'CodeGen -&gt; [Id])
-&gt; ((Id, GenStgRhs 'CodeGen) -&gt; GenStgRhs 'CodeGen)
-&gt; (Id, GenStgRhs 'CodeGen)
-&gt; [Id]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Id, GenStgRhs 'CodeGen) -&gt; GenStgRhs 'CodeGen
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Id, GenStgRhs 'CodeGen)]
[(BinderP 'CodeGen, GenStgRhs 'CodeGen)]
</span><a href="#local-6989586621682687147"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#stgLneLiveExpr"><span class="hs-identifier hs-type">stgLneLiveExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgRhs"><span class="hs-identifier hs-type">CgStgRhs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-426"></span><span id="stgLneLiveExpr"><span class="annot"><span class="annottext">stgLneLiveExpr :: GenStgRhs 'CodeGen -&gt; [Id]
</span><a href="GHC.StgToJS.Utils.html#stgLneLiveExpr"><span class="hs-identifier hs-var hs-var">stgLneLiveExpr</span></a></span></span><span> </span><span id="local-6989586621682687149"><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687149"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LiveVars -&gt; [Id]
</span><a href="GHC.Types.Var.Set.html#dVarSetElems"><span class="hs-identifier hs-var">dVarSetElems</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LiveVars -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#liveVars"><span class="hs-identifier hs-var">liveVars</span></a></span><span> </span><span class="annot"><span class="annottext">(LiveVars -&gt; LiveVars) -&gt; LiveVars -&gt; LiveVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen -&gt; LiveVars
</span><a href="GHC.StgToJS.Utils.html#stgRhsLive"><span class="hs-identifier hs-var">stgRhsLive</span></a></span><span> </span><span class="annot"><span class="annottext">GenStgRhs 'CodeGen
</span><a href="#local-6989586621682687149"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- stgLneLiveExpr (StgRhsClosure _ _ _ _ e) = dVarSetElems (liveVars (stgExprLive e))</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- stgLneLiveExpr StgRhsCon {}              = []</span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span class="annot"><span class="hs-comment">-- | returns True if the expression is definitely inline</span></span><span>
</span><span id="line-431"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isInlineExpr"><span class="hs-identifier hs-type">isInlineExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Stg.Syntax.html#CgStgExpr"><span class="hs-identifier hs-type">CgStgExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-432"></span><span id="isInlineExpr"><span class="annot"><span class="annottext">isInlineExpr :: CgStgExpr -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isInlineExpr"><span class="hs-identifier hs-var hs-var">isInlineExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-433"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgApp"><span class="hs-identifier hs-type">StgApp</span></a></span><span> </span><span id="local-6989586621682687151"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687151"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682687152"><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687152"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-434"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; [StgArg] -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isInlineApp"><span class="hs-identifier hs-var">isInlineApp</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687151"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><a href="#local-6989586621682687152"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgLit"><span class="hs-identifier hs-type">StgLit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-436"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-437"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgConApp"><span class="hs-identifier hs-type">StgConApp</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-438"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-439"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgOpApp"><span class="hs-identifier hs-type">StgOpApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgFCallOp"><span class="hs-identifier hs-type">StgFCallOp</span></a></span><span> </span><span id="local-6989586621682687155"><span class="annot"><span class="annottext">ForeignCall
</span><a href="#local-6989586621682687155"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-440"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignCall -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isInlineForeignCall"><span class="hs-identifier hs-var">isInlineForeignCall</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignCall
</span><a href="#local-6989586621682687155"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-441"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgOpApp"><span class="hs-identifier hs-type">StgOpApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgPrimOp"><span class="hs-identifier hs-type">StgPrimOp</span></a></span><span> </span><span id="local-6989586621682687158"><span class="annot"><span class="annottext">PrimOp
</span><a href="#local-6989586621682687158"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-442"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrimOp -&gt; Bool
</span><a href="GHC.Builtin.PrimOps.html#primOpIsReallyInline"><span class="hs-identifier hs-var">primOpIsReallyInline</span></a></span><span> </span><span class="annot"><span class="annottext">PrimOp
</span><a href="#local-6989586621682687158"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-443"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgOpApp"><span class="hs-identifier hs-type">StgOpApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgPrimCallOp"><span class="hs-identifier hs-type">StgPrimCallOp</span></a></span><span> </span><span id="local-6989586621682687160"><span class="annot"><span class="annottext">PrimCall
</span><a href="#local-6989586621682687160"><span class="hs-identifier hs-var">_c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[StgArg]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-444"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-445"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgCase"><span class="hs-identifier hs-type">StgCase</span></a></span><span> </span><span id="local-6989586621682687161"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687161"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">BinderP 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AltType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687162"><span class="annot"><span class="annottext">[GenStgAlt 'CodeGen]
</span><a href="#local-6989586621682687162"><span class="hs-identifier hs-var">alts</span></a></span></span><span>
</span><span id="line-446"></span><span>    </span><span class="hs-glyph">-&gt;</span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682687163"><span class="annot"><span class="annottext">ie :: Bool
</span><a href="#local-6989586621682687163"><span class="hs-identifier hs-var hs-var">ie</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgStgExpr -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isInlineExpr"><span class="hs-identifier hs-var">isInlineExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687161"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-447"></span><span>          </span><span id="local-6989586621682687164"><span class="annot"><span class="annottext">ias :: [Bool]
</span><a href="#local-6989586621682687164"><span class="hs-identifier hs-var hs-var">ias</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgStgExpr -&gt; Bool) -&gt; [CgStgExpr] -&gt; [Bool]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CgStgExpr -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isInlineExpr"><span class="hs-identifier hs-var">isInlineExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenStgAlt 'CodeGen -&gt; CgStgExpr)
-&gt; [GenStgAlt 'CodeGen] -&gt; [CgStgExpr]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">GenStgAlt 'CodeGen -&gt; CgStgExpr
forall (pass :: StgPass). GenStgAlt pass -&gt; GenStgExpr pass
</span><a href="GHC.Stg.Syntax.html#alt_rhs"><span class="hs-identifier hs-var">alt_rhs</span></a></span><span> </span><span class="annot"><span class="annottext">[GenStgAlt 'CodeGen]
</span><a href="#local-6989586621682687162"><span class="hs-identifier hs-var">alts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682687163"><span class="hs-identifier hs-var">ie</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Bool -&gt; Bool
</span><span class="hs-identifier hs-var">and</span></span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621682687164"><span class="hs-identifier hs-var">ias</span></a></span><span>
</span><span id="line-449"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgLet"><span class="hs-identifier hs-type">StgLet</span></a></span><span> </span><span class="annot"><span class="annottext">XLet 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687166"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687166"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-450"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgStgExpr -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isInlineExpr"><span class="hs-identifier hs-var">isInlineExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687166"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-451"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgLetNoEscape"><span class="hs-identifier hs-type">StgLetNoEscape</span></a></span><span> </span><span class="annot"><span class="annottext">XLetNoEscape 'CodeGen
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CgStgBinding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687167"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687167"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgStgExpr -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isInlineExpr"><span class="hs-identifier hs-var">isInlineExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687167"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-453"></span><span>  </span><span class="annot"><a href="GHC.Stg.Syntax.html#StgTick"><span class="hs-identifier hs-type">StgTick</span></a></span><span> </span><span class="annot"><span class="annottext">StgTickish
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687168"><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687168"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgStgExpr -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isInlineExpr"><span class="hs-identifier hs-var">isInlineExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CgStgExpr
</span><a href="#local-6989586621682687168"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-455"></span><span>
</span><span id="line-456"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isInlineForeignCall"><span class="hs-identifier hs-type">isInlineForeignCall</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#ForeignCall"><span class="hs-identifier hs-type">ForeignCall</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-457"></span><span id="isInlineForeignCall"><span class="annot"><span class="annottext">isInlineForeignCall :: ForeignCall -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isInlineForeignCall"><span class="hs-identifier hs-var hs-var">isInlineForeignCall</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.ForeignCall.html#CCall"><span class="hs-identifier hs-type">CCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.ForeignCall.html#CCallSpec"><span class="hs-identifier hs-type">CCallSpec</span></a></span><span> </span><span class="annot"><span class="annottext">CCallTarget
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682687171"><span class="annot"><span class="annottext">CCallConv
</span><a href="#local-6989586621682687171"><span class="hs-identifier hs-var">cconv</span></a></span></span><span> </span><span id="local-6989586621682687172"><span class="annot"><span class="annottext">Safety
</span><a href="#local-6989586621682687172"><span class="hs-identifier hs-var">safety</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-458"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Safety -&gt; Bool
</span><a href="GHC.Types.ForeignCall.html#playInterruptible"><span class="hs-identifier hs-var">playInterruptible</span></a></span><span> </span><span class="annot"><span class="annottext">Safety
</span><a href="#local-6989586621682687172"><span class="hs-identifier hs-var">safety</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-459"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CCallConv
</span><a href="#local-6989586621682687171"><span class="hs-identifier hs-var">cconv</span></a></span><span> </span><span class="annot"><span class="annottext">CCallConv -&gt; CCallConv -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#JavaScriptCallConv"><span class="hs-identifier hs-var">JavaScriptCallConv</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Safety -&gt; Bool
</span><a href="GHC.Types.ForeignCall.html#playSafe"><span class="hs-identifier hs-var">playSafe</span></a></span><span> </span><span class="annot"><span class="annottext">Safety
</span><a href="#local-6989586621682687172"><span class="hs-identifier hs-var">safety</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="annot"><a href="GHC.StgToJS.Utils.html#isInlineApp"><span class="hs-identifier hs-type">isInlineApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgArg"><span class="hs-identifier hs-type">StgArg</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-462"></span><span id="isInlineApp"><span class="annot"><span class="annottext">isInlineApp :: Id -&gt; [StgArg] -&gt; Bool
</span><a href="GHC.StgToJS.Utils.html#isInlineApp"><span class="hs-identifier hs-var hs-var">isInlineApp</span></a></span></span><span> </span><span id="local-6989586621682687177"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687177"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-463"></span><span>  </span><span class="annot"><span class="annottext">[StgArg]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isJoinId"><span class="hs-identifier hs-var">isJoinId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687177"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isUnboxedTupleType"><span class="hs-identifier hs-var">isUnboxedTupleType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687177"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-465"></span><span>                     </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Bool
Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isStrictType"><span class="hs-identifier hs-var">isStrictType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687177"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-466"></span><span>                     </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.StgToJS.ExprCtx.html#ctxIsEvaluated"><span class="hs-identifier hs-var">ctxIsEvaluated</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687177"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Stg.Syntax.html#StgVarArg"><span class="hs-identifier hs-type">StgVarArg</span></a></span><span> </span><span id="local-6989586621682687183"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687183"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-469"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#DataConWrapId"><span class="hs-identifier hs-type">DataConWrapId</span></a></span><span> </span><span id="local-6989586621682687185"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682687185"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687177"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-470"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isNewTyCon"><span class="hs-identifier hs-var">isNewTyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682687185"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Bool
Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isStrictType"><span class="hs-identifier hs-var">isStrictType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687183"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.StgToJS.ExprCtx.html#ctxIsEvaluated"><span class="hs-identifier hs-var">ctxIsEvaluated</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687183"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isStrictId"><span class="hs-identifier hs-var">isStrictId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682687183"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-472"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-473"></span><span>  </span><span class="annot"><span class="annottext">[StgArg]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-474"></span></pre></body></html>