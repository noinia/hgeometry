<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies     #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GADTs            #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards  #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE TupleSections    #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-comment">{-

This module contains miscellaneous functions related to renaming.

-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html"><span class="hs-identifier">GHC.Rename.Utils</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-14"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupRdrNames"><span class="hs-identifier">checkDupRdrNames</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkShadowedRdrNames"><span class="hs-identifier">checkShadowedRdrNames</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupNames"><span class="hs-identifier">checkDupNames</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupAndShadowedNames"><span class="hs-identifier">checkDupAndShadowedNames</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#dupNamesErr"><span class="hs-identifier">dupNamesErr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#checkTupSize"><span class="hs-identifier">checkTupSize</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkCTupSize"><span class="hs-identifier">checkCTupSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#addFvRn"><span class="hs-identifier">addFvRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier">mapFvRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#mapMaybeFvRn"><span class="hs-identifier">mapMaybeFvRn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedMatches"><span class="hs-identifier">warnUnusedMatches</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedTypePatterns"><span class="hs-identifier">warnUnusedTypePatterns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedTopBinds"><span class="hs-identifier">warnUnusedTopBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedLocalBinds"><span class="hs-identifier">warnUnusedLocalBinds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#DeprecationWarnings"><span class="hs-identifier">DeprecationWarnings</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnIfDeprecated"><span class="hs-identifier">warnIfDeprecated</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#checkUnusedRecordWildcard"><span class="hs-identifier">checkUnusedRecordWildcard</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#badQualBndrErr"><span class="hs-identifier">badQualBndrErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#typeAppErr"><span class="hs-identifier">typeAppErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#badFieldConErr"><span class="hs-identifier">badFieldConErr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier">wrapGenSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsVar"><span class="hs-identifier">genHsVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genLHsVar"><span class="hs-identifier">genLHsVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsApp"><span class="hs-identifier">genHsApp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsApps"><span class="hs-identifier">genHsApps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsApps%27"><span class="hs-identifier">genHsApps'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsExpApps"><span class="hs-identifier">genHsExpApps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#genLHsApp"><span class="hs-identifier">genLHsApp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genAppType"><span class="hs-identifier">genAppType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#genLHsLit"><span class="hs-identifier">genLHsLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsIntegralLit"><span class="hs-identifier">genHsIntegralLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsTyLit"><span class="hs-identifier">genHsTyLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genSimpleConPat"><span class="hs-identifier">genSimpleConPat</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#genVarPat"><span class="hs-identifier">genVarPat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genWildPat"><span class="hs-identifier">genWildPat</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#genSimpleFunBind"><span class="hs-identifier">genSimpleFunBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genFunBind"><span class="hs-identifier">genFunBind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsLamDoExp"><span class="hs-identifier">genHsLamDoExp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsCaseAltDoExp"><span class="hs-identifier">genHsCaseAltDoExp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#genSimpleMatch"><span class="hs-identifier">genSimpleMatch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#genHsLet"><span class="hs-identifier">genHsLet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier">newLocalBndrRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#newLocalBndrsRn"><span class="hs-identifier">newLocalBndrsRn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier">bindLocalNames</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier">bindLocalNamesFV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#delLocalNames"><span class="hs-identifier">delLocalNames</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#addNameClashErrRn"><span class="hs-identifier">addNameClashErrRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#mkNameClashErr"><span class="hs-identifier">mkNameClashErr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#checkInferredVars"><span class="hs-identifier">checkInferredVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Rename.Utils.html#noNestedForallsContextsErr"><span class="hs-identifier">noNestedForallsContextsErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#addNoNestedForallsContextsErr"><span class="hs-identifier">addNoNestedForallsContextsErr</span></a></span><span>
</span><span id="line-41"></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">where</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unzip</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html"><span class="hs-identifier">GHC.Tc.Errors.Types</span></a></span><span>
</span><span id="line-52"></span><span class="hs-comment">-- import GHC.Tc.Utils.Env</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SrcLoc</span></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceFile.html"><span class="hs-identifier">GHC.Types.SourceFile</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html"><span class="hs-identifier">GHC.Types.SourceText</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier">SourceText</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#IntegralLit"><span class="hs-identifier">IntegralLit</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html"><span class="hs-identifier">GHC.Unit.Module.ModIface</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html"><span class="hs-identifier">GHC.Data.List.SetOps</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html#removeDupsOn"><span class="hs-identifier">removeDupsOn</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html#whenIsJust"><span class="hs-identifier">whenIsJust</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html"><span class="hs-identifier">GHC.Driver.DynFlags</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#mapBagM"><span class="hs-identifier">mapBagM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#headMaybe"><span class="hs-identifier">headMaybe</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Settings.Constants.html"><span class="hs-identifier">GHC.Settings.Constants</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Settings.Constants.html#mAX_TUPLE_SIZE"><span class="hs-identifier">mAX_TUPLE_SIZE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Settings.Constants.html#mAX_CTUPLE_SIZE"><span class="hs-identifier">mAX_CTUPLE_SIZE</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Warnings.html"><span class="hs-identifier">GHC.Unit.Module.Warnings</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#WarningTxt"><span class="hs-identifier">WarningTxt</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html"><span class="hs-identifier">GHC.Iface.Load</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../ghc-boot-9.12.2-1a37/src/GHC.LanguageExtensions.html"><span class="hs-identifier">GHC.LanguageExtensions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LangExt</span></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Foldable.html"><span class="hs-identifier">Data.Foldable</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
\subsection{Binding}
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="annot"><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier hs-type">newLocalBndrRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-93"></span><span class="hs-comment">-- Used for non-top-level binders.  These should</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- never be qualified.</span><span>
</span><span id="line-95"></span><span id="newLocalBndrRn"><span class="annot"><span class="annottext">newLocalBndrRn :: LocatedN RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier hs-var hs-var">newLocalBndrRn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683033604"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683033604"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683033605"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683033605"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683033606"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033606"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Maybe Name
</span><a href="GHC.Types.Name.Reader.html#isExact_maybe"><span class="hs-identifier hs-var">isExact_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683033605"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM Name
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033606"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-comment">-- This happens in code generated by Template Haskell</span><span>
</span><span id="line-98"></span><span>                </span><span class="hs-comment">-- See Note [Binders in Template Haskell] in &quot;GHC.ThToHs&quot;</span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isUnqual"><span class="hs-identifier hs-var">isUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683033605"><span class="hs-identifier hs-var">rdr_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683033604"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; TcRnMessage
</span><a href="GHC.Rename.Utils.html#badQualBndrErr"><span class="hs-identifier hs-var">badQualBndrErr</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683033605"><span class="hs-identifier hs-var">rdr_name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683033612"><span class="annot"><a href="#local-6989586621683033612"><span class="hs-identifier hs-var">uniq</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRnIf TcGblEnv TcLclEnv Unique
forall gbl lcl. TcRnIf gbl lcl Unique
</span><a href="GHC.Tc.Utils.Monad.html#newUnique"><span class="hs-identifier hs-var">newUnique</span></a></span><span>
</span><span id="line-103"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#mkInternalName"><span class="hs-identifier hs-type">mkInternalName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033612"><span class="hs-identifier hs-type">uniq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-type">rdrNameOcc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033605"><span class="hs-identifier hs-type">rdr_name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033604"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="annot"><a href="GHC.Rename.Utils.html#newLocalBndrsRn"><span class="hs-identifier hs-type">newLocalBndrsRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-106"></span><span id="newLocalBndrsRn"><span class="annot"><span class="annottext">newLocalBndrsRn :: [LocatedN RdrName] -&gt; RnM [Name]
</span><a href="GHC.Rename.Utils.html#newLocalBndrsRn"><span class="hs-identifier hs-var hs-var">newLocalBndrsRn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; RnM Name) -&gt; [LocatedN RdrName] -&gt; RnM [Name]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier hs-var">newLocalBndrRn</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span id="local-6989586621683033054"><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier hs-type">bindLocalNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033054"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033054"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-109"></span><span id="bindLocalNames"><span class="annot"><span class="annottext">bindLocalNames :: forall a. [Name] -&gt; RnM a -&gt; RnM a
</span><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier hs-var hs-var">bindLocalNames</span></a></span></span><span> </span><span id="local-6989586621683033617"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033617"><span class="hs-identifier hs-var">names</span></a></span></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TcLclCtxt -&gt; TcLclCtxt)
-&gt; TcRnIf TcGblEnv TcLclEnv a -&gt; TcRnIf TcGblEnv TcLclEnv a
forall gbl a.
(TcLclCtxt -&gt; TcLclCtxt)
-&gt; TcRnIf gbl TcLclEnv a -&gt; TcRnIf gbl TcLclEnv a
</span><a href="GHC.Tc.Utils.Monad.html#updLclCtxt"><span class="hs-identifier hs-var">updLclCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">((TcLclCtxt -&gt; TcLclCtxt)
 -&gt; TcRnIf TcGblEnv TcLclEnv a -&gt; TcRnIf TcGblEnv TcLclEnv a)
-&gt; (TcLclCtxt -&gt; TcLclCtxt)
-&gt; TcRnIf TcGblEnv TcLclEnv a
-&gt; TcRnIf TcGblEnv TcLclEnv a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683033619"><span class="annot"><span class="annottext">TcLclCtxt
</span><a href="#local-6989586621683033619"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683033620"><span class="annot"><span class="annottext">th_level :: Int
</span><a href="#local-6989586621683033620"><span class="hs-identifier hs-var hs-var">th_level</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ThStage -&gt; Int
</span><a href="GHC.Tc.Types.TH.html#thLevel"><span class="hs-identifier hs-var">thLevel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclCtxt -&gt; ThStage
</span><a href="GHC.Tc.Types.LclEnv.html#tcl_th_ctxt"><span class="hs-identifier hs-var">tcl_th_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclCtxt
</span><a href="#local-6989586621683033619"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>        </span><span id="local-6989586621683033623"><span class="annot"><span class="annottext">th_bndrs' :: NameEnv (TopLevelFlag, Int)
</span><a href="#local-6989586621683033623"><span class="hs-identifier hs-var hs-var">th_bndrs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameEnv (TopLevelFlag, Int)
-&gt; [(Name, (TopLevelFlag, Int))] -&gt; NameEnv (TopLevelFlag, Int)
forall a. NameEnv a -&gt; [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#extendNameEnvList"><span class="hs-identifier hs-var">extendNameEnvList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclCtxt -&gt; NameEnv (TopLevelFlag, Int)
</span><a href="GHC.Tc.Types.LclEnv.html#tcl_th_bndrs"><span class="hs-identifier hs-var">tcl_th_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclCtxt
</span><a href="#local-6989586621683033619"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033626"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="GHC.Types.Basic.html#NotTopLevel"><span class="hs-identifier hs-var">NotTopLevel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683033620"><span class="hs-identifier hs-var">th_level</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621683033626"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033626"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033617"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-114"></span><span>        </span><span id="local-6989586621683033628"><span class="annot"><span class="annottext">rdr_env' :: LocalRdrEnv
</span><a href="#local-6989586621683033628"><span class="hs-identifier hs-var hs-var">rdr_env'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv -&gt; [Name] -&gt; LocalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#extendLocalRdrEnvList"><span class="hs-identifier hs-var">extendLocalRdrEnvList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclCtxt -&gt; LocalRdrEnv
</span><a href="GHC.Tc.Types.LclEnv.html#tcl_rdr"><span class="hs-identifier hs-var">tcl_rdr</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclCtxt
</span><a href="#local-6989586621683033619"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033617"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">TcLclCtxt
</span><a href="#local-6989586621683033619"><span class="hs-identifier hs-var">lcl_env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.LclEnv.html#tcl_th_bndrs"><span class="hs-identifier hs-var">tcl_th_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683033623"><span class="hs-identifier hs-type">th_bndrs'</span></a></span><span>
</span><span id="line-116"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.LclEnv.html#tcl_rdr"><span class="hs-identifier hs-var">tcl_rdr</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683033628"><span class="hs-identifier hs-type">rdr_env'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span id="local-6989586621683033068"><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-type">bindLocalNamesFV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033068"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033068"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-119"></span><span id="bindLocalNamesFV"><span class="annot"><span class="annottext">bindLocalNamesFV :: forall a. [Name] -&gt; RnM (a, FreeVars) -&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-var hs-var">bindLocalNamesFV</span></a></span></span><span> </span><span id="local-6989586621683033633"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033633"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621683033634"><span class="annot"><span class="annottext">RnM (a, FreeVars)
</span><a href="#local-6989586621683033634"><span class="hs-identifier hs-var">enclosed_scope</span></a></span></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683033635"><span class="annot"><a href="#local-6989586621683033635"><span class="hs-identifier hs-var">result</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683033636"><span class="annot"><a href="#local-6989586621683033636"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; RnM (a, FreeVars) -&gt; RnM (a, FreeVars)
forall a. [Name] -&gt; RnM a -&gt; RnM a
</span><a href="GHC.Rename.Utils.html#bindLocalNames"><span class="hs-identifier hs-var">bindLocalNames</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033633"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">RnM (a, FreeVars)
</span><a href="#local-6989586621683033634"><span class="hs-identifier hs-var">enclosed_scope</span></a></span><span>
</span><span id="line-121"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033635"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#delFVs"><span class="hs-identifier hs-type">delFVs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033633"><span class="hs-identifier hs-type">names</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033636"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span id="local-6989586621683033638"><span class="annot"><a href="GHC.Rename.Utils.html#delLocalNames"><span class="hs-identifier hs-type">delLocalNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033638"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033638"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-124"></span><span id="delLocalNames"><span class="annot"><span class="annottext">delLocalNames :: forall a. [Name] -&gt; RnM a -&gt; RnM a
</span><a href="GHC.Rename.Utils.html#delLocalNames"><span class="hs-identifier hs-var hs-var">delLocalNames</span></a></span></span><span> </span><span id="local-6989586621683033641"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033641"><span class="hs-identifier hs-var">names</span></a></span></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TcLclCtxt -&gt; TcLclCtxt)
-&gt; TcRnIf TcGblEnv TcLclEnv a -&gt; TcRnIf TcGblEnv TcLclEnv a
forall gbl a.
(TcLclCtxt -&gt; TcLclCtxt)
-&gt; TcRnIf gbl TcLclEnv a -&gt; TcRnIf gbl TcLclEnv a
</span><a href="GHC.Tc.Utils.Monad.html#updLclCtxt"><span class="hs-identifier hs-var">updLclCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">((TcLclCtxt -&gt; TcLclCtxt)
 -&gt; TcRnIf TcGblEnv TcLclEnv a -&gt; TcRnIf TcGblEnv TcLclEnv a)
-&gt; (TcLclCtxt -&gt; TcLclCtxt)
-&gt; TcRnIf TcGblEnv TcLclEnv a
-&gt; TcRnIf TcGblEnv TcLclEnv a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683033642"><span class="annot"><span class="annottext">TcLclCtxt
</span><a href="#local-6989586621683033642"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683033643"><span class="annot"><span class="annottext">th_bndrs' :: NameEnv (TopLevelFlag, Int)
</span><a href="#local-6989586621683033643"><span class="hs-identifier hs-var hs-var">th_bndrs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameEnv (TopLevelFlag, Int)
-&gt; [Name] -&gt; NameEnv (TopLevelFlag, Int)
forall a. NameEnv a -&gt; [Name] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#delListFromNameEnv"><span class="hs-identifier hs-var">delListFromNameEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclCtxt -&gt; NameEnv (TopLevelFlag, Int)
</span><a href="GHC.Tc.Types.LclEnv.html#tcl_th_bndrs"><span class="hs-identifier hs-var">tcl_th_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclCtxt
</span><a href="#local-6989586621683033642"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033641"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-127"></span><span>        </span><span id="local-6989586621683033645"><span class="annot"><span class="annottext">rdr_env' :: LocalRdrEnv
</span><a href="#local-6989586621683033645"><span class="hs-identifier hs-var hs-var">rdr_env'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv -&gt; [OccName] -&gt; LocalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#minusLocalRdrEnvList"><span class="hs-identifier hs-var">minusLocalRdrEnvList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLclCtxt -&gt; LocalRdrEnv
</span><a href="GHC.Tc.Types.LclEnv.html#tcl_rdr"><span class="hs-identifier hs-var">tcl_rdr</span></a></span><span> </span><span class="annot"><span class="annottext">TcLclCtxt
</span><a href="#local-6989586621683033642"><span class="hs-identifier hs-var">lcl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; OccName) -&gt; [Name] -&gt; [OccName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
forall name. HasOccName name =&gt; name -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#occName"><span class="hs-identifier hs-var">occName</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033641"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">TcLclCtxt
</span><a href="#local-6989586621683033642"><span class="hs-identifier hs-var">lcl_env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.LclEnv.html#tcl_th_bndrs"><span class="hs-identifier hs-var">tcl_th_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683033643"><span class="hs-identifier hs-type">th_bndrs'</span></a></span><span>
</span><span id="line-129"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.LclEnv.html#tcl_rdr"><span class="hs-identifier hs-var">tcl_rdr</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683033645"><span class="hs-identifier hs-type">rdr_env'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">-------------------------------------</span><span>
</span><span id="line-132"></span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupRdrNames"><span class="hs-identifier hs-type">checkDupRdrNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- Check for duplicated names in a binding group</span><span>
</span><span id="line-134"></span><span id="checkDupRdrNames"><span class="annot"><span class="annottext">checkDupRdrNames :: [LocatedN RdrName] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkDupRdrNames"><span class="hs-identifier hs-var hs-var">checkDupRdrNames</span></a></span></span><span> </span><span id="local-6989586621683033648"><span class="annot"><span class="annottext">[LocatedN RdrName]
</span><a href="#local-6989586621683033648"><span class="hs-identifier hs-var">rdr_names_w_loc</span></a></span></span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmpty (LocatedN RdrName) -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; [NonEmpty (LocatedN RdrName)]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683033650"><span class="annot"><span class="annottext">NonEmpty (LocatedN RdrName)
</span><a href="#local-6989586621683033650"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NonEmpty SrcSpan
-&gt; NonEmpty RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#dupNamesErr"><span class="hs-identifier hs-var">dupNamesErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; SrcSpan)
-&gt; NonEmpty (LocatedN RdrName) -&gt; NonEmpty SrcSpan
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LocatedN RdrName)
</span><a href="#local-6989586621683033650"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; RdrName)
-&gt; NonEmpty (LocatedN RdrName) -&gt; NonEmpty RdrName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LocatedN RdrName)
</span><a href="#local-6989586621683033650"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NonEmpty (LocatedN RdrName)]
</span><a href="#local-6989586621683033654"><span class="hs-identifier hs-var">dups</span></a></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedN RdrName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683033654"><span class="annot"><span class="annottext">[NonEmpty (LocatedN RdrName)]
</span><a href="#local-6989586621683033654"><span class="hs-identifier hs-var">dups</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; RdrName)
-&gt; [LocatedN RdrName]
-&gt; ([LocatedN RdrName], [NonEmpty (LocatedN RdrName)])
forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; ([a], [NonEmpty a])
</span><a href="GHC.Data.List.SetOps.html#removeDupsOn"><span class="hs-identifier hs-var">removeDupsOn</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedN RdrName]
</span><a href="#local-6989586621683033648"><span class="hs-identifier hs-var">rdr_names_w_loc</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupNames"><span class="hs-identifier hs-type">checkDupNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- Check for duplicated names in a binding group</span><span>
</span><span id="line-141"></span><span id="checkDupNames"><span class="annot"><span class="annottext">checkDupNames :: [Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkDupNames"><span class="hs-identifier hs-var hs-var">checkDupNames</span></a></span></span><span> </span><span id="local-6989586621683033655"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033655"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#check_dup_names"><span class="hs-identifier hs-var">check_dup_names</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; [Name] -&gt; [Name]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isSystemName"><span class="hs-identifier hs-var">isSystemName</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033655"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>                </span><span class="hs-comment">-- See Note [Binders in Template Haskell] in &quot;GHC.ThToHs&quot;</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span class="annot"><a href="GHC.Rename.Utils.html#check_dup_names"><span class="hs-identifier hs-type">check_dup_names</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span id="check_dup_names"><span class="annot"><span class="annottext">check_dup_names :: [Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#check_dup_names"><span class="hs-identifier hs-var hs-var">check_dup_names</span></a></span></span><span> </span><span id="local-6989586621683033659"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033659"><span class="hs-identifier hs-var">names</span></a></span></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmpty Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; [NonEmpty Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683033660"><span class="annot"><span class="annottext">NonEmpty Name
</span><a href="#local-6989586621683033660"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NonEmpty SrcSpan
-&gt; NonEmpty RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#dupNamesErr"><span class="hs-identifier hs-var">dupNamesErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SrcSpan
</span><a href="GHC.Types.Name.html#nameSrcSpan"><span class="hs-identifier hs-var">nameSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; SrcSpan) -&gt; NonEmpty Name -&gt; NonEmpty SrcSpan
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Name
</span><a href="#local-6989586621683033660"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; RdrName
forall thing. NamedThing thing =&gt; thing -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#getRdrName"><span class="hs-identifier hs-var">getRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; RdrName) -&gt; NonEmpty Name -&gt; NonEmpty RdrName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Name
</span><a href="#local-6989586621683033660"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NonEmpty Name]
</span><a href="#local-6989586621683033663"><span class="hs-identifier hs-var">dups</span></a></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683033663"><span class="annot"><span class="annottext">[NonEmpty Name]
</span><a href="#local-6989586621683033663"><span class="hs-identifier hs-var">dups</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; OccName) -&gt; [Name] -&gt; ([Name], [NonEmpty Name])
forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; ([a], [NonEmpty a])
</span><a href="GHC.Data.List.SetOps.html#removeDupsOn"><span class="hs-identifier hs-var">removeDupsOn</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033659"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-comment">---------------------</span><span>
</span><span id="line-151"></span><span class="annot"><a href="GHC.Rename.Utils.html#checkShadowedRdrNames"><span class="hs-identifier hs-type">checkShadowedRdrNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span id="checkShadowedRdrNames"><span class="annot"><span class="annottext">checkShadowedRdrNames :: [LocatedN RdrName] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkShadowedRdrNames"><span class="hs-identifier hs-var hs-var">checkShadowedRdrNames</span></a></span></span><span> </span><span id="local-6989586621683033665"><span class="annot"><span class="annottext">[LocatedN RdrName]
</span><a href="#local-6989586621683033665"><span class="hs-identifier hs-var">loc_rdr_names</span></a></span></span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683033666"><span class="annot"><a href="#local-6989586621683033666"><span class="hs-identifier hs-var">envs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn (GlobalRdrEnv, LocalRdrEnv)
</span><a href="GHC.Tc.Utils.Monad.html#getRdrEnvs"><span class="hs-identifier hs-var">getRdrEnvs</span></a></span><span>
</span><span id="line-154"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkShadowedOccs"><span class="hs-identifier hs-type">checkShadowedOccs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033666"><span class="hs-identifier hs-type">envs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033669"><span class="hs-identifier hs-type">get_loc_occ</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033670"><span class="hs-identifier hs-type">filtered_rdrs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-156"></span><span>    </span><span id="local-6989586621683033670"><span class="annot"><span class="annottext">filtered_rdrs :: [LocatedN RdrName]
</span><a href="#local-6989586621683033670"><span class="hs-identifier hs-var hs-var">filtered_rdrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; Bool)
-&gt; [LocatedN RdrName] -&gt; [LocatedN RdrName]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isExact"><span class="hs-identifier hs-var">isExact</span></a></span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; Bool)
-&gt; (LocatedN RdrName -&gt; RdrName) -&gt; LocatedN RdrName -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LocatedN RdrName]
</span><a href="#local-6989586621683033665"><span class="hs-identifier hs-var">loc_rdr_names</span></a></span><span>
</span><span id="line-157"></span><span>                </span><span class="hs-comment">-- See Note [Binders in Template Haskell] in &quot;GHC.ThToHs&quot;</span><span>
</span><span id="line-158"></span><span>    </span><span id="local-6989586621683033669"><span class="annot"><span class="annottext">get_loc_occ :: GenLocated a RdrName -&gt; (SrcSpan, OccName)
</span><a href="#local-6989586621683033669"><span class="hs-identifier hs-var hs-var">get_loc_occ</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683033675"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683033675"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683033676"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683033676"><span class="hs-identifier hs-var">rdr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683033675"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683033676"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupAndShadowedNames"><span class="hs-identifier hs-type">checkDupAndShadowedNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span id="checkDupAndShadowedNames"><span class="annot"><span class="annottext">checkDupAndShadowedNames :: (GlobalRdrEnv, LocalRdrEnv)
-&gt; [Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkDupAndShadowedNames"><span class="hs-identifier hs-var hs-var">checkDupAndShadowedNames</span></a></span></span><span> </span><span id="local-6989586621683033677"><span class="annot"><span class="annottext">(GlobalRdrEnv, LocalRdrEnv)
</span><a href="#local-6989586621683033677"><span class="hs-identifier hs-var">envs</span></a></span></span><span> </span><span id="local-6989586621683033678"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033678"><span class="hs-identifier hs-var">names</span></a></span></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#check_dup_names"><span class="hs-identifier hs-var">check_dup_names</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033679"><span class="hs-identifier hs-var">filtered_names</span></a></span><span>
</span><span id="line-163"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEnv, LocalRdrEnv)
-&gt; (Name -&gt; (SrcSpan, OccName))
-&gt; [Name]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a.
(GlobalRdrEnv, LocalRdrEnv)
-&gt; (a -&gt; (SrcSpan, OccName))
-&gt; [a]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkShadowedOccs"><span class="hs-identifier hs-var">checkShadowedOccs</span></a></span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEnv, LocalRdrEnv)
</span><a href="#local-6989586621683033677"><span class="hs-identifier hs-var">envs</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; (SrcSpan, OccName)
</span><a href="#local-6989586621683033680"><span class="hs-identifier hs-var">get_loc_occ</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033679"><span class="hs-identifier hs-var">filtered_names</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621683033679"><span class="annot"><span class="annottext">filtered_names :: [Name]
</span><a href="#local-6989586621683033679"><span class="hs-identifier hs-var hs-var">filtered_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; [Name] -&gt; [Name]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isSystemName"><span class="hs-identifier hs-var">isSystemName</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033678"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-166"></span><span>                </span><span class="hs-comment">-- See Note [Binders in Template Haskell] in &quot;GHC.ThToHs&quot;</span><span>
</span><span id="line-167"></span><span>    </span><span id="local-6989586621683033680"><span class="annot"><span class="annottext">get_loc_occ :: Name -&gt; (SrcSpan, OccName)
</span><a href="#local-6989586621683033680"><span class="hs-identifier hs-var hs-var">get_loc_occ</span></a></span></span><span> </span><span id="local-6989586621683033681"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033681"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SrcSpan
</span><a href="GHC.Types.Name.html#nameSrcSpan"><span class="hs-identifier hs-var">nameSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033681"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033681"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="hs-comment">-------------------------------------</span><span>
</span><span id="line-170"></span><span id="local-6989586621683033094"><span class="annot"><a href="GHC.Rename.Utils.html#checkShadowedOccs"><span class="hs-identifier hs-type">checkShadowedOccs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033094"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621683033094"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-173"></span><span id="checkShadowedOccs"><span class="annot"><span class="annottext">checkShadowedOccs :: forall a.
(GlobalRdrEnv, LocalRdrEnv)
-&gt; (a -&gt; (SrcSpan, OccName))
-&gt; [a]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkShadowedOccs"><span class="hs-identifier hs-var hs-var">checkShadowedOccs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683033699"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621683033699"><span class="hs-identifier hs-var">global_env</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683033700"><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621683033700"><span class="hs-identifier hs-var">local_env</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683033701"><span class="annot"><span class="annottext">a -&gt; (SrcSpan, OccName)
</span><a href="#local-6989586621683033701"><span class="hs-identifier hs-var">get_loc_occ</span></a></span></span><span> </span><span id="local-6989586621683033702"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621683033702"><span class="hs-identifier hs-var">ns</span></a></span></span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningFlag
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall gbl lcl.
WarningFlag -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#whenWOptM"><span class="hs-identifier hs-var">whenWOptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnNameShadowing"><span class="hs-identifier hs-var">Opt_WarnNameShadowing</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) ()
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;checkShadowedOccs:shadow&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(SrcSpan, OccName)] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; (SrcSpan, OccName)) -&gt; [a] -&gt; [(SrcSpan, OccName)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; (SrcSpan, OccName)
</span><a href="#local-6989586621683033701"><span class="hs-identifier hs-var">get_loc_occ</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621683033702"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(a -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; [a] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621683033707"><span class="hs-identifier hs-var">check_shadow</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621683033702"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-178"></span><span>    </span><span id="local-6989586621683033707"><span class="annot"><span class="annottext">check_shadow :: a -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621683033707"><span class="hs-identifier hs-var hs-var">check_shadow</span></a></span></span><span> </span><span id="local-6989586621683033708"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683033708"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-179"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#startsWithUnderscore"><span class="hs-identifier hs-var">startsWithUnderscore</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033710"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Do not report shadowing for &quot;_x&quot;</span><span>
</span><span id="line-180"></span><span>                                                </span><span class="hs-comment">-- See #3262</span><span>
</span><span id="line-181"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683033711"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033711"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621683033712"><span class="hs-identifier hs-var">mb_local</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShadowedNameProvenance -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621683033713"><span class="hs-identifier hs-var">complain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc -&gt; ShadowedNameProvenance
</span><a href="GHC.Tc.Errors.Types.html#ShadowedNameProvenanceLocal"><span class="hs-identifier hs-var">ShadowedNameProvenanceLocal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SrcLoc
</span><a href="GHC.Types.Name.html#nameSrcLoc"><span class="hs-identifier hs-var">nameSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033711"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683033716"><span class="annot"><a href="#local-6989586621683033716"><span class="hs-identifier hs-var">gres'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) Bool)
-&gt; [GlobalRdrElt] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [GlobalRdrElt]
forall (m :: * -&gt; *) a.
Applicative m =&gt;
(a -&gt; m Bool) -&gt; [a] -&gt; m [a]
</span><span class="hs-identifier hs-var">filterM</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) Bool
</span><a href="#local-6989586621683033718"><span class="hs-identifier hs-var">is_shadowed_gre</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033719"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-183"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">null</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621683033716"><span class="hs-identifier hs-type">gres'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621683033713"><span class="hs-identifier hs-type">complain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#ShadowedNameProvenanceGlobal"><span class="hs-identifier hs-type">ShadowedNameProvenanceGlobal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033716"><span class="hs-identifier hs-type">gres'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-184"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-185"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621683033724"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683033724"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683033710"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033710"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; (SrcSpan, OccName)
</span><a href="#local-6989586621683033701"><span class="hs-identifier hs-var">get_loc_occ</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683033708"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-186"></span><span>          </span><span id="local-6989586621683033712"><span class="annot"><span class="annottext">mb_local :: Maybe Name
</span><a href="#local-6989586621683033712"><span class="hs-identifier hs-var hs-var">mb_local</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv -&gt; OccName -&gt; Maybe Name
</span><a href="GHC.Types.Name.Reader.html#lookupLocalRdrOcc"><span class="hs-identifier hs-var">lookupLocalRdrOcc</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621683033700"><span class="hs-identifier hs-var">local_env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033710"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-187"></span><span>          </span><span id="local-6989586621683033719"><span class="annot"><span class="annottext">gres :: [GlobalRdrElt]
</span><a href="#local-6989586621683033719"><span class="hs-identifier hs-var hs-var">gres</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; LookupGRE GREInfo -&gt; [GlobalRdrElt]
forall info.
GlobalRdrEnvX info -&gt; LookupGRE info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#lookupGRE"><span class="hs-identifier hs-var">lookupGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621683033699"><span class="hs-identifier hs-var">global_env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; WhichGREs GREInfo -&gt; LookupGRE GREInfo
forall info. RdrName -&gt; WhichGREs info -&gt; LookupGRE info
</span><a href="GHC.Types.Name.Reader.html#LookupRdrName"><span class="hs-identifier hs-var">LookupRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033710"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldsOrSelectors -&gt; WhichGREs GREInfo
</span><a href="GHC.Types.Name.Reader.html#RelevantGREsFOS"><span class="hs-identifier hs-var">RelevantGREsFOS</span></a></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#WantNormal"><span class="hs-identifier hs-var">WantNormal</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>                </span><span class="hs-comment">-- Make an Unqualified RdrName and look that up, so that</span><span>
</span><span id="line-189"></span><span>                </span><span class="hs-comment">-- we don't find any GREs that are in scope qualified-only</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span>          </span><span id="local-6989586621683033713"><span class="annot"><span class="annottext">complain :: ShadowedNameProvenance -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621683033713"><span class="hs-identifier hs-var hs-var">complain</span></a></span></span><span> </span><span id="local-6989586621683033731"><span class="annot"><span class="annottext">ShadowedNameProvenance
</span><a href="#local-6989586621683033731"><span class="hs-identifier hs-var">provenance</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addDiagnosticAt"><span class="hs-identifier hs-var">addDiagnosticAt</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683033724"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; ShadowedNameProvenance -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnShadowedName"><span class="hs-identifier hs-var">TcRnShadowedName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033710"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">ShadowedNameProvenance
</span><a href="#local-6989586621683033731"><span class="hs-identifier hs-var">provenance</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><a href="#local-6989586621683033718"><span class="hs-identifier hs-type">is_shadowed_gre</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-194"></span><span>        </span><span class="hs-comment">-- Returns False for record selectors that are shadowed, when</span><span>
</span><span id="line-195"></span><span>        </span><span class="hs-comment">-- punning or wild-cards are on (cf #2723)</span><span>
</span><span id="line-196"></span><span>    </span><span id="local-6989586621683033718"><span class="annot"><span class="annottext">is_shadowed_gre :: GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) Bool
</span><a href="#local-6989586621683033718"><span class="hs-identifier hs-var hs-var">is_shadowed_gre</span></a></span></span><span> </span><span id="local-6989586621683033734"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033734"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-var">isRecFldGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033734"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683033736"><span class="annot"><a href="#local-6989586621683033736"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) DynFlags
forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.DynFlags.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-198"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.DynFlags.html#xopt"><span class="hs-identifier hs-type">xopt</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LangExt.NamedFieldPuns</span></span><span> </span><span class="annot"><a href="#local-6989586621683033736"><span class="hs-identifier hs-type">dflags</span></a></span><span>
</span><span id="line-199"></span><span>                             </span><span class="annot"><span class="hs-operator hs-type">||</span></span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#xopt"><span class="hs-identifier hs-type">xopt</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LangExt.RecordWildCards</span></span><span> </span><span class="annot"><a href="#local-6989586621683033736"><span class="hs-identifier hs-type">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><a href="#local-6989586621683033718"><span class="hs-identifier hs-var">is_shadowed_gre</span></a></span><span> </span><span id="local-6989586621683033742"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033742"><span class="hs-identifier hs-var">_other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IOEnv (Env TcGblEnv TcLclEnv) Bool
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-comment">-------------------------------------</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- | Throw an error message if a user attempts to quantify an inferred type</span><span>
</span><span id="line-204"></span><span class="hs-comment">-- variable in a place where specificity cannot be observed. For example,</span><span>
</span><span id="line-205"></span><span class="hs-comment">-- @forall {a}. [a] -&gt; [a]@ would be rejected to the inferred type variable</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- @{a}@, but @forall a. [a] -&gt; [a]@ would be accepted.</span><span>
</span><span id="line-207"></span><span class="hs-comment">-- See @Note [Unobservably inferred type variables]@.</span><span>
</span><span id="line-208"></span><span class="annot"><a href="GHC.Rename.Utils.html#checkInferredVars"><span class="hs-identifier hs-type">checkInferredVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-209"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-210"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span id="checkInferredVars"><span class="annot"><span class="annottext">checkInferredVars :: HsDocContext
-&gt; LHsSigType GhcPs -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkInferredVars"><span class="hs-identifier hs-var hs-var">checkInferredVars</span></a></span></span><span> </span><span id="local-6989586621683033743"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683033743"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683033744"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621683033744"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683033745"><span class="annot"><span class="annottext">bndrs :: [HsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683033745"><span class="hs-identifier hs-var hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs -&gt; [HsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683033746"><span class="hs-identifier hs-var">sig_ty_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621683033744"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(HsTyVarBndr Specificity GhcPs -&gt; Bool)
-&gt; [HsTyVarBndr Specificity GhcPs]
-&gt; [HsTyVarBndr Specificity GhcPs]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Specificity -&gt; Specificity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(==)</span></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><a href="Language.Haskell.Syntax.Specificity.html#InferredSpec"><span class="hs-identifier hs-var">InferredSpec</span></a></span><span> </span><span class="annot"><span class="annottext">(Specificity -&gt; Bool)
-&gt; (HsTyVarBndr Specificity GhcPs -&gt; Specificity)
-&gt; HsTyVarBndr Specificity GhcPs
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr Specificity GhcPs -&gt; Specificity
forall flag (pass :: Pass). HsTyVarBndr flag (GhcPass pass) -&gt; flag
</span><a href="GHC.Hs.Type.html#hsTyVarBndrFlag"><span class="hs-identifier hs-var">hsTyVarBndrFlag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[HsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683033745"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>    </span><span id="local-6989586621683033749"><span class="annot"><span class="annottext">HsTyVarBndr Specificity GhcPs
</span><a href="#local-6989586621683033749"><span class="hs-identifier hs-var">iv</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621683033750"><span class="annot"><span class="annottext">[HsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683033750"><span class="hs-identifier hs-var">ivs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><span class="annottext">HsDocContext -&gt; TcRnMessage -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnWithHsDocContext"><span class="hs-identifier hs-var">TcRnWithHsDocContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683033743"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRnMessage) -&gt; TcRnMessage -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-217"></span><span>      </span><span class="annot"><span class="annottext">NonEmpty (HsTyVarBndr Specificity GhcPs) -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalInferredTyVars"><span class="hs-identifier hs-var">TcRnIllegalInferredTyVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsTyVarBndr Specificity GhcPs
</span><a href="#local-6989586621683033749"><span class="hs-identifier hs-var">iv</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr Specificity GhcPs
-&gt; [HsTyVarBndr Specificity GhcPs]
-&gt; NonEmpty (HsTyVarBndr Specificity GhcPs)
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">NE.:|</span></span><span> </span><span class="annot"><span class="annottext">[HsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683033750"><span class="hs-identifier hs-var">ivs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><a href="#local-6989586621683033746"><span class="hs-identifier hs-type">sig_ty_bndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyVarBndr"><span class="hs-identifier hs-type">HsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Specificity"><span class="hs-identifier hs-type">Specificity</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-220"></span><span>    </span><span id="local-6989586621683033746"><span class="annot"><span class="annottext">sig_ty_bndrs :: LHsSigType GhcPs -&gt; [HsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683033746"><span class="hs-identifier hs-var hs-var">sig_ty_bndrs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSig"><span class="hs-identifier hs-type">HsSig</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">sig_bndrs :: forall pass. HsSigType pass -&gt; HsOuterSigTyVarBndrs pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_bndrs"><span class="hs-identifier hs-var">sig_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683033757"><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621683033757"><span class="hs-identifier hs-var">outer_bndrs</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)
 -&gt; HsTyVarBndr Specificity GhcPs)
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)]
-&gt; [HsTyVarBndr Specificity GhcPs]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)
-&gt; HsTyVarBndr Specificity GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
-&gt; [LHsTyVarBndr Specificity (NoGhcTc GhcPs)]
forall flag (p :: Pass).
HsOuterTyVarBndrs flag (GhcPass p)
-&gt; [LHsTyVarBndr flag (NoGhcTc (GhcPass p))]
</span><a href="GHC.Hs.Type.html#hsOuterExplicitBndrs"><span class="hs-identifier hs-var">hsOuterExplicitBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621683033757"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-comment">{-
Note [Unobservably inferred type variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
While GHC's parser allows the use of inferred type variables
(e.g., `forall {a}. &lt;...&gt;`) just about anywhere that type variable binders can
appear, there are some situations where the distinction between inferred and
specified type variables cannot be observed. For example, consider this
instance declaration:

  instance forall {a}. Eq (T a) where ...

Making {a} inferred is pointless, as there is no way for user code to
&quot;apply&quot; an instance declaration in a way where the inferred/specified
distinction would make a difference. (Notably, there is no opportunity
for visible type application of an instance declaration.) Anyone who
writes such code is likely confused, so in an attempt to be helpful,
we emit an error message if a user writes code like this. The
checkInferredVars function is responsible for implementing this
restriction.

It turns out to be somewhat cumbersome to enforce this restriction in
certain cases.  Specifically:

* Quantified constraints. In the type `f :: (forall {a}. C a) =&gt; Proxy Int`,
  there is no way to observe that {a} is inferred. Nevertheless, actually
  rejecting this code would be tricky, as we would need to reject
  `forall {a}. &lt;...&gt;` as a constraint but *accept* other uses of
  `forall {a}. &lt;...&gt;` as a type (e.g., `g :: (forall {a}. a -&gt; a) -&gt; b -&gt; b`).
  This is quite tedious to do in practice, so we don't bother.

* Default method type signatures (#18432). These are tricky because inferred
  type variables can appear nested, e.g.,

    class C a where
      m         :: forall b. a -&gt; b -&gt; forall c.   c -&gt; c
      default m :: forall b. a -&gt; b -&gt; forall {c}. c -&gt; c
      m _ _ = id

  Robustly checking for nested, inferred type variables ends up being a pain,
  so we don't try to do this.

For now, we simply allow inferred quantifiers to be specified here,
even though doing so is pointless. All we lose is a warning.

Aside from the places where we already use checkInferredVars, most of
the other places where inferred vars don't make sense are in any case
already prohibited from having foralls /at all/.  For example:

  instance forall a. forall {b}. Eq (Either a b) where ...

Here the nested `forall {b}` is already prohibited. (See
Note [No nested foralls or contexts in instance types] in GHC.Hs.Type).
-}</span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-comment">-- | Examines a non-outermost type for @forall@s or contexts, which are assumed</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- to be nested. For example, in the following declaration:</span><span>
</span><span id="line-279"></span><span class="hs-comment">--</span><span>
</span><span id="line-280"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-281"></span><span class="hs-comment">-- instance forall a. forall b. C (Either a b)</span><span>
</span><span id="line-282"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-283"></span><span class="hs-comment">--</span><span>
</span><span id="line-284"></span><span class="hs-comment">-- The outermost @forall a@ is fine, but the nested @forall b@ is not. We</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- invoke 'noNestedForallsContextsErr' on the type @forall b. C (Either a b)@</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- to catch the nested @forall@ and create a suitable error message.</span><span>
</span><span id="line-287"></span><span class="hs-comment">-- 'noNestedForallsContextsErr' returns @'Just' err_msg@ if such a @forall@ or</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- context is found, and returns @Nothing@ otherwise.</span><span>
</span><span id="line-289"></span><span class="hs-comment">--</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- This is currently used in the following places:</span><span>
</span><span id="line-291"></span><span class="hs-comment">--</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- * In GADT constructor types (in 'rnConDecl').</span><span>
</span><span id="line-293"></span><span class="hs-comment">--   See @Note [GADT abstract syntax] (Wrinkle: No nested foralls or contexts)@</span><span>
</span><span id="line-294"></span><span class="hs-comment">--   in &quot;GHC.Hs.Type&quot;.</span><span>
</span><span id="line-295"></span><span class="hs-comment">--</span><span>
</span><span id="line-296"></span><span class="hs-comment">-- * In instance declaration types (in 'rnClsIntDecl' and 'rnSrcDerivDecl' in</span><span>
</span><span id="line-297"></span><span class="hs-comment">--   &quot;GHC.Rename.Module&quot; and 'renameSig' in &quot;GHC.Rename.Bind&quot;).</span><span>
</span><span id="line-298"></span><span class="hs-comment">--   See @Note [No nested foralls or contexts in instance types]@ in</span><span>
</span><span id="line-299"></span><span class="hs-comment">--   &quot;GHC.Hs.Type&quot;.</span><span>
</span><span id="line-300"></span><span class="annot"><a href="GHC.Rename.Utils.html#noNestedForallsContextsErr"><span class="hs-identifier hs-type">noNestedForallsContextsErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#NestedForallsContextsIn"><span class="hs-identifier hs-type">NestedForallsContextsIn</span></a></span><span>
</span><span id="line-301"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-302"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnMessage"><span class="hs-identifier hs-type">TcRnMessage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span id="noNestedForallsContextsErr"><span class="annot"><span class="annottext">noNestedForallsContextsErr :: NestedForallsContextsIn
-&gt; LHsType GhcRn -&gt; Maybe (SrcSpan, TcRnMessage)
</span><a href="GHC.Rename.Utils.html#noNestedForallsContextsErr"><span class="hs-identifier hs-var hs-var">noNestedForallsContextsErr</span></a></span></span><span> </span><span id="local-6989586621683033759"><span class="annot"><span class="annottext">NestedForallsContextsIn
</span><a href="#local-6989586621683033759"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621683033760"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683033760"><span class="hs-identifier hs-var">lty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn -&gt; LHsType GhcRn
forall (p :: Pass). LHsType (GhcPass p) -&gt; LHsType (GhcPass p)
</span><a href="GHC.Hs.Type.html#ignoreParens"><span class="hs-identifier hs-var">ignoreParens</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683033760"><span class="hs-identifier hs-var">lty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-305"></span><span>    </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683033762"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683033762"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-type">HsForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hst_tele :: forall pass. HsType pass -&gt; HsForAllTelescope pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_tele"><span class="hs-identifier hs-var">hst_tele</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683033765"><span class="annot"><span class="annottext">HsForAllTelescope GhcRn
</span><a href="#local-6989586621683033765"><span class="hs-identifier hs-var">tele</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>      </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllVis"><span class="hs-identifier hs-type">HsForAllVis</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcRn
</span><a href="#local-6989586621683033765"><span class="hs-identifier hs-var">tele</span></a></span><span>
</span><span id="line-307"></span><span>         </span><span class="hs-comment">-- The only two places where this function is called correspond to</span><span>
</span><span id="line-308"></span><span>         </span><span class="hs-comment">-- types of terms, so we give a slightly more descriptive error</span><span>
</span><span id="line-309"></span><span>         </span><span class="hs-comment">-- message in the event that they contain visible dependent</span><span>
</span><span id="line-310"></span><span>         </span><span class="hs-comment">-- quantification (currently only allowed in kinds).</span><span>
</span><span id="line-311"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SrcSpan, TcRnMessage) -&gt; Maybe (SrcSpan, TcRnMessage)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683033762"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Type -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnVDQInTermType"><span class="hs-identifier hs-var">TcRnVDQInTermType</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Type
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>      </span><span class="hs-glyph">|</span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllInvis"><span class="hs-identifier hs-type">HsForAllInvis</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcRn
</span><a href="#local-6989586621683033765"><span class="hs-identifier hs-var">tele</span></a></span><span>
</span><span id="line-313"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SrcSpan, TcRnMessage) -&gt; Maybe (SrcSpan, TcRnMessage)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683033762"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcRnMessage
</span><a href="#local-6989586621683033769"><span class="hs-identifier hs-var">nested_foralls_contexts_err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>    </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683033770"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683033770"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-type">HsQualTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-315"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SrcSpan, TcRnMessage) -&gt; Maybe (SrcSpan, TcRnMessage)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683033770"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcRnMessage
</span><a href="#local-6989586621683033769"><span class="hs-identifier hs-var">nested_foralls_contexts_err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (SrcSpan, TcRnMessage)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-318"></span><span>    </span><span id="local-6989586621683033769"><span class="annot"><span class="annottext">nested_foralls_contexts_err :: TcRnMessage
</span><a href="#local-6989586621683033769"><span class="hs-identifier hs-var hs-var">nested_foralls_contexts_err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-319"></span><span>      </span><span class="annot"><span class="annottext">NestedForallsContextsIn -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnNestedForallsContexts"><span class="hs-identifier hs-var">TcRnNestedForallsContexts</span></a></span><span> </span><span class="annot"><span class="annottext">NestedForallsContextsIn
</span><a href="#local-6989586621683033759"><span class="hs-identifier hs-var">what</span></a></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="annot"><span class="hs-comment">-- | A common way to invoke 'noNestedForallsContextsErr'.</span></span><span>
</span><span id="line-322"></span><span class="annot"><a href="GHC.Rename.Utils.html#addNoNestedForallsContextsErr"><span class="hs-identifier hs-type">addNoNestedForallsContextsErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-323"></span><span>                              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#NestedForallsContextsIn"><span class="hs-identifier hs-type">NestedForallsContextsIn</span></a></span><span>
</span><span id="line-324"></span><span>                              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-325"></span><span>                              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span id="addNoNestedForallsContextsErr"><span class="annot"><span class="annottext">addNoNestedForallsContextsErr :: HsDocContext
-&gt; NestedForallsContextsIn
-&gt; LHsType GhcRn
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#addNoNestedForallsContextsErr"><span class="hs-identifier hs-var hs-var">addNoNestedForallsContextsErr</span></a></span></span><span> </span><span id="local-6989586621683033773"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683033773"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683033774"><span class="annot"><span class="annottext">NestedForallsContextsIn
</span><a href="#local-6989586621683033774"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621683033775"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683033775"><span class="hs-identifier hs-var">lty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-327"></span><span>  </span><span class="annot"><span class="annottext">Maybe (SrcSpan, TcRnMessage)
-&gt; ((SrcSpan, TcRnMessage) -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (m :: * -&gt; *) a. Monad m =&gt; Maybe a -&gt; (a -&gt; m ()) -&gt; m ()
</span><a href="GHC.Data.Maybe.html#whenIsJust"><span class="hs-identifier hs-var">whenIsJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NestedForallsContextsIn
-&gt; LHsType GhcRn -&gt; Maybe (SrcSpan, TcRnMessage)
</span><a href="GHC.Rename.Utils.html#noNestedForallsContextsErr"><span class="hs-identifier hs-var">noNestedForallsContextsErr</span></a></span><span> </span><span class="annot"><span class="annottext">NestedForallsContextsIn
</span><a href="#local-6989586621683033774"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683033775"><span class="hs-identifier hs-var">lty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((SrcSpan, TcRnMessage) -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; ((SrcSpan, TcRnMessage) -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621683033776"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683033776"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683033777"><span class="annot"><span class="annottext">TcRnMessage
</span><a href="#local-6989586621683033777"><span class="hs-identifier hs-var">err_msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683033776"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; TcRnMessage -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnWithHsDocContext"><span class="hs-identifier hs-var">TcRnWithHsDocContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683033773"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TcRnMessage
</span><a href="#local-6989586621683033777"><span class="hs-identifier hs-var">err_msg</span></a></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Free variable manipulation}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span class="hs-comment">-- A useful utility</span><span>
</span><span id="line-339"></span><span id="local-6989586621683033152"><span class="annot"><a href="GHC.Rename.Utils.html#addFvRn"><span class="hs-identifier hs-type">addFvRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033152"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033152"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-340"></span><span id="addFvRn"><span class="annot"><span class="annottext">addFvRn :: forall thing.
FreeVars -&gt; RnM (thing, FreeVars) -&gt; RnM (thing, FreeVars)
</span><a href="GHC.Rename.Utils.html#addFvRn"><span class="hs-identifier hs-var hs-var">addFvRn</span></a></span></span><span> </span><span id="local-6989586621683033780"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033780"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span> </span><span id="local-6989586621683033781"><span class="annot"><span class="annottext">RnM (thing, FreeVars)
</span><a href="#local-6989586621683033781"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683033782"><span class="annot"><a href="#local-6989586621683033782"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683033783"><span class="annot"><a href="#local-6989586621683033783"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM (thing, FreeVars)
</span><a href="#local-6989586621683033781"><span class="hs-identifier hs-var">thing_inside</span></a></span><span>
</span><span id="line-341"></span><span>                               </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033782"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683033780"><span class="hs-identifier hs-type">fvs1</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033783"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span id="local-6989586621683033154"><span id="local-6989586621683033155"><span id="local-6989586621683033156"><span class="annot"><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-type">mapFvRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621683033154"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033155"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033156"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621683033154"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033155"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033154"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033156"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-344"></span><span id="mapFvRn"><span class="annot"><span class="annottext">mapFvRn :: forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var hs-var">mapFvRn</span></a></span></span><span> </span><span id="local-6989586621683033796"><span class="annot"><span class="annottext">a -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683033796"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621683033797"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621683033797"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-345"></span><span>    </span><span id="local-6989586621683033798"><span class="annot"><a href="#local-6989586621683033798"><span class="hs-identifier hs-var">stuff</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(a -&gt; RnM (b, FreeVars))
-&gt; f a -&gt; IOEnv (Env TcGblEnv TcLclEnv) (f (b, FreeVars))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; f a -&gt; m (f b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683033796"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621683033797"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-346"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#unzip"><span class="hs-identifier hs-type">unzip</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033798"><span class="hs-identifier hs-type">stuff</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-347"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621683033800"><span class="annot"><span class="annottext">f b
</span><a href="#local-6989586621683033800"><span class="hs-identifier hs-var">ys</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683033801"><span class="annot"><span class="annottext">f FreeVars
</span><a href="#local-6989586621683033801"><span class="hs-identifier hs-var">fvs_s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(f b, FreeVars) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (f b, FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f b
</span><a href="#local-6989586621683033800"><span class="hs-identifier hs-var">ys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(FreeVars -&gt; FreeVars -&gt; FreeVars)
-&gt; FreeVars -&gt; f FreeVars -&gt; FreeVars
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; f a -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(FreeVars -&gt; FreeVars -&gt; FreeVars)
-&gt; FreeVars -&gt; FreeVars -&gt; FreeVars
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-identifier hs-var">plusFV</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span> </span><span class="annot"><span class="annottext">f FreeVars
</span><a href="#local-6989586621683033801"><span class="hs-identifier hs-var">fvs_s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-pragma hs-type">mapFvRn</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span id="local-6989586621683033805"><span id="local-6989586621683033806"><span class="hs-pragma">(</span><span class="annot"><a href="#local-6989586621683033805"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-pragma hs-type">RnM</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="#local-6989586621683033806"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-pragma hs-type">FreeVars</span></a></span><span class="hs-pragma">)</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621683033805"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">]</span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-pragma hs-type">RnM</span></a></span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">[</span><span class="annot"><a href="#local-6989586621683033806"><span class="hs-pragma hs-type">b</span></a></span><span class="hs-pragma">]</span><span class="hs-pragma">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-pragma hs-type">FreeVars</span></a></span><span class="hs-pragma">)</span></span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span id="local-6989586621683033160"><span id="local-6989586621683033161"><span id="local-6989586621683033162"><span class="annot"><a href="GHC.Rename.Utils.html#unzip"><span class="hs-identifier hs-type">unzip</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621683033160"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621683033160"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033161"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683033162"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033160"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033161"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683033160"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033162"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-351"></span><span id="unzip"><span class="annot"><span class="annottext">unzip :: forall (f :: * -&gt; *) a b. Functor f =&gt; f (a, b) -&gt; (f a, f b)
</span><a href="GHC.Rename.Utils.html#unzip"><span class="hs-identifier hs-var hs-var">unzip</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683033810"><span class="annot"><span class="annottext">f (a, b)
</span><a href="#local-6989586621683033810"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((a, b) -&gt; a) -&gt; f (a, b) -&gt; f a
forall a b. (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(a, b) -&gt; a
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">f (a, b)
</span><a href="#local-6989586621683033810"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">((a, b) -&gt; b) -&gt; f (a, b) -&gt; f b
forall a b. (a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(a, b) -&gt; b
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">f (a, b)
</span><a href="#local-6989586621683033810"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="hs-pragma">[</span><span class="hs-pragma">1</span><span class="hs-pragma">]</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#unzip"><span class="hs-pragma hs-type">unzip</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-353"></span><span class="hs-pragma">{-# RULES</span><span> </span><span class="annot"><span class="hs-pragma">&quot;unzip/List&quot;</span></span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#unzip"><span class="hs-pragma hs-type">unzip</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><span class="hs-pragma hs-type">List.unzip</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span id="local-6989586621683033179"><span id="local-6989586621683033180"><span class="annot"><a href="GHC.Rename.Utils.html#mapMaybeFvRn"><span class="hs-identifier hs-type">mapMaybeFvRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033179"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033180"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621683033179"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621683033180"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-356"></span><span id="mapMaybeFvRn"><span class="annot"><span class="annottext">mapMaybeFvRn :: forall a b.
(a -&gt; RnM (b, FreeVars)) -&gt; Maybe a -&gt; RnM (Maybe b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapMaybeFvRn"><span class="hs-identifier hs-var hs-var">mapMaybeFvRn</span></a></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; RnM (b, FreeVars)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe b, FreeVars)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe b, FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe b
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-357"></span><span class="annot"><a href="GHC.Rename.Utils.html#mapMaybeFvRn"><span class="hs-identifier hs-var">mapMaybeFvRn</span></a></span><span> </span><span id="local-6989586621683033816"><span class="annot"><span class="annottext">a -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683033816"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683033817"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683033817"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683033818"><span class="annot"><a href="#local-6989586621683033818"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683033819"><span class="annot"><a href="#local-6989586621683033819"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">a -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683033816"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683033817"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621683033818"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683033819"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Envt utility functions}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedTopBinds"><span class="hs-identifier hs-type">warnUnusedTopBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span id="warnUnusedTopBinds"><span class="annot"><span class="annottext">warnUnusedTopBinds :: [GlobalRdrElt] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnusedTopBinds"><span class="hs-identifier hs-var hs-var">warnUnusedTopBinds</span></a></span></span><span> </span><span id="local-6989586621683033820"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033820"><span class="hs-identifier hs-var">gres</span></a></span></span><span>
</span><span id="line-369"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningFlag
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall gbl lcl.
WarningFlag -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#whenWOptM"><span class="hs-identifier hs-var">whenWOptM</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnUnusedTopBinds"><span class="hs-identifier hs-var">Opt_WarnUnusedTopBinds</span></a></span><span>
</span><span id="line-370"></span><span>    </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) ()
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683033822"><span class="annot"><a href="#local-6989586621683033822"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRnIf TcGblEnv TcLclEnv TcGblEnv
forall gbl lcl. TcRnIf gbl lcl gbl
</span><a href="GHC.Tc.Utils.Monad.html#getGblEnv"><span class="hs-identifier hs-var">getGblEnv</span></a></span><span>
</span><span id="line-371"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683033824"><span class="annot"><a href="#local-6989586621683033824"><span class="hs-identifier hs-var hs-var">isBoot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscSource -&gt; Bool
</span><a href="GHC.Types.SourceFile.html#isHsBootFile"><span class="hs-identifier hs-var">isHsBootFile</span></a></span><span> </span><span class="annot"><span class="annottext">(HscSource -&gt; Bool) -&gt; HscSource -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TcGblEnv -&gt; HscSource
</span><a href="GHC.Tc.Types.html#tcg_src"><span class="hs-identifier hs-var">tcg_src</span></a></span><span> </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621683033822"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-372"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683033827"><span class="annot"><a href="#local-6989586621683033827"><span class="hs-identifier hs-var hs-var">noParent</span></a></span></span><span> </span><span id="local-6989586621683033828"><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621683033828"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info -&gt; Parent
forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#greParent"><span class="hs-identifier hs-var">greParent</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEltX info
</span><a href="#local-6989586621683033828"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-373"></span><span>                            </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-374"></span><span>                            </span><span class="annot"><span class="annottext">Parent
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-375"></span><span>             </span><span class="hs-comment">-- Don't warn about unused bindings with parents in</span><span>
</span><span id="line-376"></span><span>             </span><span class="hs-comment">-- .hs-boot files, as you are sometimes required to give</span><span>
</span><span id="line-377"></span><span>             </span><span class="hs-comment">-- unused bindings (#3449).</span><span>
</span><span id="line-378"></span><span>             </span><span class="hs-comment">-- HOWEVER, in a signature file, you are never obligated to put a</span><span>
</span><span id="line-379"></span><span>             </span><span class="hs-comment">-- definition in the main text.  Thus, if you define something</span><span>
</span><span id="line-380"></span><span>             </span><span class="hs-comment">-- and forget to export it, we really DO want to warn.</span><span>
</span><span id="line-381"></span><span>             </span><span id="local-6989586621683033831"><span class="annot"><a href="#local-6989586621683033831"><span class="hs-identifier hs-var hs-var">gres'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683033824"><span class="hs-identifier hs-var">isBoot</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Bool) -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="#local-6989586621683033827"><span class="hs-identifier hs-var">noParent</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033820"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-382"></span><span>                               </span><span class="hs-keyword">else</span><span>                 </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033820"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-383"></span><span>         </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedGREs"><span class="hs-identifier hs-type">warnUnusedGREs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033831"><span class="hs-identifier hs-type">gres'</span></a></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="hs-comment">-- | Checks to see if we need to warn for -Wunused-record-wildcards or</span><span>
</span><span id="line-387"></span><span class="hs-comment">-- -Wredundant-record-wildcards</span><span>
</span><span id="line-388"></span><span class="annot"><a href="GHC.Rename.Utils.html#checkUnusedRecordWildcard"><span class="hs-identifier hs-type">checkUnusedRecordWildcard</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-389"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span>
</span><span id="line-390"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Utils.html#ImplicitFieldBinders"><span class="hs-identifier hs-type">ImplicitFieldBinders</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-391"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span id="checkUnusedRecordWildcard"><span class="annot"><span class="annottext">checkUnusedRecordWildcard :: SrcSpan
-&gt; FreeVars
-&gt; Maybe [ImplicitFieldBinders]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkUnusedRecordWildcard"><span class="hs-identifier hs-var hs-var">checkUnusedRecordWildcard</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe [ImplicitFieldBinders]
</span><span class="hs-identifier hs-var">Nothing</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span class="annot"><a href="GHC.Rename.Utils.html#checkUnusedRecordWildcard"><span class="hs-identifier hs-var">checkUnusedRecordWildcard</span></a></span><span> </span><span id="local-6989586621683033833"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683033833"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683033834"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033834"><span class="hs-identifier hs-var">fvs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683033835"><span class="annot"><span class="annottext">[ImplicitFieldBinders]
</span><a href="#local-6989586621683033835"><span class="hs-identifier hs-var">dotdot_fields_binders</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. SrcSpan -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683033833"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) ()
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(ImplicitFieldBinders -&gt; [Name])
-&gt; [ImplicitFieldBinders] -&gt; [Name]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">ImplicitFieldBinders -&gt; [Name]
</span><a href="GHC.Hs.Utils.html#implFlBndr_binders"><span class="hs-identifier hs-var">implFlBndr_binders</span></a></span><span> </span><span class="annot"><span class="annottext">[ImplicitFieldBinders]
</span><a href="#local-6989586621683033835"><span class="hs-identifier hs-var">dotdot_fields_binders</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-395"></span><span>            </span><span class="hs-comment">-- Add a new warning if the .. pattern binds no variables</span><span>
</span><span id="line-396"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnRedundantRecordWildcard"><span class="hs-identifier hs-var">warnRedundantRecordWildcard</span></a></span><span>
</span><span id="line-397"></span><span>      </span><span id="local-6989586621683033840"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033840"><span class="hs-identifier hs-var">dotdot_names</span></a></span></span><span>
</span><span id="line-398"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-399"></span><span>          </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnusedRecordWildcard"><span class="hs-identifier hs-var">warnUnusedRecordWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033840"><span class="hs-identifier hs-var">dotdot_names</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033834"><span class="hs-identifier hs-var">fvs</span></a></span><span>
</span><span id="line-400"></span><span>          </span><span class="annot"><span class="annottext">[ImplicitFieldBinders]
-&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#deprecateUsedRecordWildcard"><span class="hs-identifier hs-var">deprecateUsedRecordWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">[ImplicitFieldBinders]
</span><a href="#local-6989586621683033835"><span class="hs-identifier hs-var">dotdot_fields_binders</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033834"><span class="hs-identifier hs-var">fvs</span></a></span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="hs-comment">-- | Produce a warning when the `..` pattern binds no new</span><span>
</span><span id="line-404"></span><span class="hs-comment">-- variables.</span><span>
</span><span id="line-405"></span><span class="hs-comment">--</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-407"></span><span class="hs-comment">--   data P = P { x :: Int }</span><span>
</span><span id="line-408"></span><span class="hs-comment">--</span><span>
</span><span id="line-409"></span><span class="hs-comment">--   foo (P{x, ..}) = x</span><span>
</span><span id="line-410"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-411"></span><span class="hs-comment">--</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- The `..` here doesn't bind any variables as `x` is already bound.</span><span>
</span><span id="line-413"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnRedundantRecordWildcard"><span class="hs-identifier hs-type">warnRedundantRecordWildcard</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span id="warnRedundantRecordWildcard"><span class="annot"><span class="annottext">warnRedundantRecordWildcard :: IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnRedundantRecordWildcard"><span class="hs-identifier hs-var hs-var">warnRedundantRecordWildcard</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-var">addDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnRedundantRecordWildcard"><span class="hs-identifier hs-var">TcRnRedundantRecordWildcard</span></a></span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-comment">-- | Produce a warning when no variables bound by a `..` pattern are used.</span><span>
</span><span id="line-418"></span><span class="hs-comment">--</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-420"></span><span class="hs-comment">--   data P = P { x :: Int }</span><span>
</span><span id="line-421"></span><span class="hs-comment">--</span><span>
</span><span id="line-422"></span><span class="hs-comment">--   foo (P{..}) = ()</span><span>
</span><span id="line-423"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-424"></span><span class="hs-comment">--</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- The `..` pattern binds `x` but it is not used in the RHS so we issue</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- a warning.</span><span>
</span><span id="line-427"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedRecordWildcard"><span class="hs-identifier hs-type">warnUnusedRecordWildcard</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span id="warnUnusedRecordWildcard"><span class="annot"><span class="annottext">warnUnusedRecordWildcard :: [Name] -&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnusedRecordWildcard"><span class="hs-identifier hs-var hs-var">warnUnusedRecordWildcard</span></a></span></span><span> </span><span id="local-6989586621683033845"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033845"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span id="local-6989586621683033846"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033846"><span class="hs-identifier hs-var">used_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683033847"><span class="annot"><span class="annottext">used :: [Name]
</span><a href="#local-6989586621683033847"><span class="hs-identifier hs-var hs-var hs-var">used</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; [Name] -&gt; [Name]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033846"><span class="hs-identifier hs-var">used_names</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033845"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-430"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;warnUnused&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033845"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033846"><span class="hs-identifier hs-var">used_names</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033847"><span class="hs-identifier hs-var">used</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#warnIf"><span class="hs-identifier hs-var">warnIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033847"><span class="hs-identifier hs-var">used</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnUnusedRecordWildcard"><span class="hs-identifier hs-var">TcRnUnusedRecordWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033845"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="hs-comment">-- | Emit a deprecation message whenever one of the implicit record wild</span><span>
</span><span id="line-434"></span><span class="hs-comment">--   card field binders was used in FreeVars.</span><span>
</span><span id="line-435"></span><span class="hs-comment">--</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-437"></span><span class="hs-comment">--   module A where</span><span>
</span><span id="line-438"></span><span class="hs-comment">--   data P = P { x :: Int, y :: Int }</span><span>
</span><span id="line-439"></span><span class="hs-comment">--   {-# DEPRECATED x, y &quot;depr msg&quot; #-}</span><span>
</span><span id="line-440"></span><span class="hs-comment">--</span><span>
</span><span id="line-441"></span><span class="hs-comment">--   module B where</span><span>
</span><span id="line-442"></span><span class="hs-comment">--   import A</span><span>
</span><span id="line-443"></span><span class="hs-comment">--   foo (P{..}) = x</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-445"></span><span class="hs-comment">--</span><span>
</span><span id="line-446"></span><span class="hs-comment">-- Even though both `x` and `y` have deprecations, only `x`</span><span>
</span><span id="line-447"></span><span class="hs-comment">-- will be deprecated since only its implicit variable is used in the RHS.</span><span>
</span><span id="line-448"></span><span class="annot"><a href="GHC.Rename.Utils.html#deprecateUsedRecordWildcard"><span class="hs-identifier hs-type">deprecateUsedRecordWildcard</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Utils.html#ImplicitFieldBinders"><span class="hs-identifier hs-type">ImplicitFieldBinders</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-449"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span id="deprecateUsedRecordWildcard"><span class="annot"><span class="annottext">deprecateUsedRecordWildcard :: [ImplicitFieldBinders]
-&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#deprecateUsedRecordWildcard"><span class="hs-identifier hs-var hs-var">deprecateUsedRecordWildcard</span></a></span></span><span> </span><span id="local-6989586621683033852"><span class="annot"><span class="annottext">[ImplicitFieldBinders]
</span><a href="#local-6989586621683033852"><span class="hs-identifier hs-var">dotdot_fields_binders</span></a></span></span><span> </span><span id="local-6989586621683033853"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033853"><span class="hs-identifier hs-var">fvs</span></a></span></span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ImplicitFieldBinders -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; [ImplicitFieldBinders] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">ImplicitFieldBinders -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621683033854"><span class="hs-identifier hs-var">depr_field_binders</span></a></span><span> </span><span class="annot"><span class="annottext">[ImplicitFieldBinders]
</span><a href="#local-6989586621683033852"><span class="hs-identifier hs-var">dotdot_fields_binders</span></a></span><span>
</span><span id="line-452"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-453"></span><span>    </span><span id="local-6989586621683033854"><span class="annot"><span class="annottext">depr_field_binders :: ImplicitFieldBinders -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621683033854"><span class="hs-identifier hs-var hs-var">depr_field_binders</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Utils.html#ImplicitFieldBinders"><span class="hs-identifier hs-type">ImplicitFieldBinders</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621683033856"><span id="local-6989586621683033857"><span class="annot"><span class="annottext">[Name]
Name
implFlBndr_binders :: ImplicitFieldBinders -&gt; [Name]
implFlBndr_field :: Name
implFlBndr_binders :: [Name]
implFlBndr_field :: ImplicitFieldBinders -&gt; Name
</span><a href="GHC.Hs.Utils.html#implFlBndr_binders"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkFVs"><span class="hs-identifier hs-var">mkFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033857"><span class="hs-identifier hs-var">implFlBndr_binders</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#intersectsFVs"><span class="hs-operator hs-var">`intersectsFVs`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033853"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) ()
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-455"></span><span>          </span><span id="local-6989586621683033861"><span class="annot"><a href="#local-6989586621683033861"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn GlobalRdrEnv
</span><a href="GHC.Tc.Utils.Monad.html#getGlobalRdrEnv"><span class="hs-identifier hs-var">getGlobalRdrEnv</span></a></span><span>
</span><span id="line-456"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683033863"><span class="annot"><a href="#local-6989586621683033863"><span class="hs-identifier hs-var hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe GlobalRdrElt -&gt; GlobalRdrElt
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe GlobalRdrElt -&gt; GlobalRdrElt)
-&gt; Maybe GlobalRdrElt -&gt; GlobalRdrElt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; Name -&gt; Maybe GlobalRdrElt
forall info.
Outputable info =&gt;
GlobalRdrEnvX info -&gt; Name -&gt; Maybe (GlobalRdrEltX info)
</span><a href="GHC.Types.Name.Reader.html#lookupGRE_Name"><span class="hs-identifier hs-var">lookupGRE_Name</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621683033861"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033856"><span class="hs-identifier hs-var">implFlBndr_field</span></a></span><span>
</span><span id="line-457"></span><span>                </span><span class="hs-comment">-- Must be in the env since it was instantiated</span><span>
</span><span id="line-458"></span><span>                </span><span class="hs-comment">-- in the implicit binders</span><span>
</span><span id="line-459"></span><span>          </span><span class="annot"><a href="GHC.Rename.Utils.html#warnIfDeprecated"><span class="hs-identifier hs-type">warnIfDeprecated</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#AllDeprecationWarnings"><span class="hs-identifier hs-type">AllDeprecationWarnings</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621683033863"><span class="hs-identifier hs-type">gre</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedLocalBinds"><span class="hs-identifier hs-type">warnUnusedLocalBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedMatches"><span class="hs-identifier hs-type">warnUnusedMatches</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedTypePatterns"><span class="hs-identifier hs-type">warnUnusedTypePatterns</span></a></span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span id="warnUnusedLocalBinds"><span class="annot"><span class="annottext">warnUnusedLocalBinds :: [Name] -&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnusedLocalBinds"><span class="hs-identifier hs-var hs-var">warnUnusedLocalBinds</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
-&gt; [Name] -&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#check_unused"><span class="hs-identifier hs-var">check_unused</span></a></span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="GHC.Tc.Errors.Types.html#UnusedNameLocalBind"><span class="hs-identifier hs-var">UnusedNameLocalBind</span></a></span><span>
</span><span id="line-465"></span><span id="warnUnusedMatches"><span class="annot"><span class="annottext">warnUnusedMatches :: [Name] -&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnusedMatches"><span class="hs-identifier hs-var hs-var">warnUnusedMatches</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
-&gt; [Name] -&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#check_unused"><span class="hs-identifier hs-var">check_unused</span></a></span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="GHC.Tc.Errors.Types.html#UnusedNameMatch"><span class="hs-identifier hs-var">UnusedNameMatch</span></a></span><span>
</span><span id="line-466"></span><span id="warnUnusedTypePatterns"><span class="annot"><span class="annottext">warnUnusedTypePatterns :: [Name] -&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnusedTypePatterns"><span class="hs-identifier hs-var hs-var">warnUnusedTypePatterns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
-&gt; [Name] -&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#check_unused"><span class="hs-identifier hs-var">check_unused</span></a></span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="GHC.Tc.Errors.Types.html#UnusedNameTypePattern"><span class="hs-identifier hs-var">UnusedNameTypePattern</span></a></span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span class="annot"><a href="GHC.Rename.Utils.html#check_unused"><span class="hs-identifier hs-type">check_unused</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#UnusedNameProv"><span class="hs-identifier hs-type">UnusedNameProv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span id="check_unused"><span class="annot"><span class="annottext">check_unused :: UnusedNameProv
-&gt; [Name] -&gt; FreeVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#check_unused"><span class="hs-identifier hs-var hs-var">check_unused</span></a></span></span><span> </span><span id="local-6989586621683033871"><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="#local-6989586621683033871"><span class="hs-identifier hs-var">prov</span></a></span></span><span> </span><span id="local-6989586621683033872"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033872"><span class="hs-identifier hs-var">bound_names</span></a></span></span><span> </span><span id="local-6989586621683033873"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033873"><span class="hs-identifier hs-var">used_names</span></a></span></span><span>
</span><span id="line-470"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnusedNameProv -&gt; [Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnused"><span class="hs-identifier hs-var">warnUnused</span></a></span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="#local-6989586621683033871"><span class="hs-identifier hs-var">prov</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; [Name] -&gt; [Name]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683033873"><span class="hs-identifier hs-var">used_names</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033872"><span class="hs-identifier hs-var">bound_names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Custom deprecations utility functions}
*                                                                      *
************************************************************************

Note [Handling of deprecations]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* We report deprecations at each *occurrence* of the deprecated thing
  (see #5867 and #4879)

* We do not report deprecations for locally-defined names. For a
  start, we may be exporting a deprecated thing. Also we may use a
  deprecated thing in the defn of another deprecated things.  We may
  even use a deprecated thing in the defn of a non-deprecated thing,
  when changing a module's interface.

* We also report deprecations at export sites, but only for names
  deprecated with export deprecations (since those are not transitive as opposed
  to regular name deprecations and are only reported at the importing module)

* addUsedGREs: we do not report deprecations for sub-binders:
     - the &quot;..&quot; completion for records
     - the &quot;..&quot; in an export item 'T(..)'
     - the things exported by a module export 'module M'
-}</span><span>
</span><span id="line-499"></span><span>
</span><span id="line-500"></span><span class="hs-comment">-- | Whether to report deprecation warnings when registering a used GRE</span><span>
</span><span id="line-501"></span><span class="hs-comment">--</span><span>
</span><span id="line-502"></span><span class="hs-comment">-- There is no option to only emit declaration warnings since everywhere</span><span>
</span><span id="line-503"></span><span class="hs-comment">-- we emit the declaration warnings we also emit export warnings</span><span>
</span><span id="line-504"></span><span class="hs-comment">-- (See Note [Handling of deprecations] for details)</span><span>
</span><span id="line-505"></span><span class="hs-keyword">data</span><span> </span><span id="DeprecationWarnings"><span class="annot"><a href="GHC.Rename.Utils.html#DeprecationWarnings"><span class="hs-identifier hs-var">DeprecationWarnings</span></a></span></span><span>
</span><span id="line-506"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NoDeprecationWarnings"><span class="annot"><a href="GHC.Rename.Utils.html#NoDeprecationWarnings"><span class="hs-identifier hs-var">NoDeprecationWarnings</span></a></span></span><span>
</span><span id="line-507"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ExportDeprecationWarnings"><span class="annot"><a href="GHC.Rename.Utils.html#ExportDeprecationWarnings"><span class="hs-identifier hs-var">ExportDeprecationWarnings</span></a></span></span><span>
</span><span id="line-508"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AllDeprecationWarnings"><span class="annot"><a href="GHC.Rename.Utils.html#AllDeprecationWarnings"><span class="hs-identifier hs-var">AllDeprecationWarnings</span></a></span></span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnIfDeprecated"><span class="hs-identifier hs-type">warnIfDeprecated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#DeprecationWarnings"><span class="hs-identifier hs-type">DeprecationWarnings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-511"></span><span id="warnIfDeprecated"><span class="annot"><span class="annottext">warnIfDeprecated :: DeprecationWarnings
-&gt; [GlobalRdrElt] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnIfDeprecated"><span class="hs-identifier hs-var hs-var">warnIfDeprecated</span></a></span></span><span> </span><span class="annot"><span class="annottext">DeprecationWarnings
</span><a href="GHC.Rename.Utils.html#NoDeprecationWarnings"><span class="hs-identifier hs-var">NoDeprecationWarnings</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnIfDeprecated"><span class="hs-identifier hs-var">warnIfDeprecated</span></a></span><span> </span><span id="local-6989586621683033877"><span class="annot"><span class="annottext">DeprecationWarnings
</span><a href="#local-6989586621683033877"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621683033878"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033878"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-513"></span><span>  </span><span id="local-6989586621683033879"><span class="annot"><a href="#local-6989586621683033879"><span class="hs-identifier hs-var">this_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) Module
forall (m :: * -&gt; *). HasModule m =&gt; m Module
</span><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-var">getModule</span></a></span><span>
</span><span id="line-514"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683033881"><span class="annot"><a href="#local-6989586621683033881"><span class="hs-identifier hs-var hs-var">external_gres</span></a></span></span><span>
</span><span id="line-515"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Bool) -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; Name -&gt; Bool
</span><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-var">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621683033879"><span class="hs-identifier hs-var">this_mod</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; (GlobalRdrElt -&gt; Name) -&gt; GlobalRdrElt -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033878"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-516"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621683033884"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033884"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnIfExportDeprecated"><span class="hs-identifier hs-var">warnIfExportDeprecated</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033884"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b.
IOEnv (Env TcGblEnv TcLclEnv) a
-&gt; IOEnv (Env TcGblEnv TcLclEnv) b
-&gt; IOEnv (Env TcGblEnv TcLclEnv) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621683033886"><span class="hs-identifier hs-var">maybeWarnDeclDepr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033884"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683033881"><span class="hs-identifier hs-type">external_gres</span></a></span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-518"></span><span>    </span><span id="local-6989586621683033886"><span class="annot"><span class="annottext">maybeWarnDeclDepr :: GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621683033886"><span class="hs-identifier hs-var hs-var">maybeWarnDeclDepr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DeprecationWarnings
</span><a href="#local-6989586621683033877"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-519"></span><span>      </span><span class="annot"><span class="annottext">DeprecationWarnings
</span><a href="GHC.Rename.Utils.html#ExportDeprecationWarnings"><span class="hs-identifier hs-var">ExportDeprecationWarnings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) ()
 -&gt; GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; GlobalRdrElt
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span>      </span><span class="annot"><span class="annottext">DeprecationWarnings
</span><a href="GHC.Rename.Utils.html#AllDeprecationWarnings"><span class="hs-identifier hs-var">AllDeprecationWarnings</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnIfDeclDeprecated"><span class="hs-identifier hs-var">warnIfDeclDeprecated</span></a></span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnIfDeclDeprecated"><span class="hs-identifier hs-type">warnIfDeclDeprecated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span id="warnIfDeclDeprecated"><span class="annot"><span class="annottext">warnIfDeclDeprecated :: GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnIfDeclDeprecated"><span class="hs-identifier hs-var hs-var">warnIfDeclDeprecated</span></a></span></span><span> </span><span id="local-6989586621683033889"><span class="annot"><span class="annottext">gre :: GlobalRdrElt
</span><a href="#local-6989586621683033889"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683033892"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621683033892"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-524"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683033893"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621683033893"><span class="hs-identifier hs-var">imp_spec</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; Maybe ImportSpec
forall a. Bag a -&gt; Maybe a
</span><a href="GHC.Data.Bag.html#headMaybe"><span class="hs-identifier hs-var">headMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621683033892"><span class="hs-identifier hs-var">iss</span></a></span><span>
</span><span id="line-525"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683033894"><span class="annot"><a href="#local-6989586621683033894"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) DynFlags
forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.DynFlags.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-526"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.DynFlags.html#wopt_any_custom"><span class="hs-identifier hs-type">wopt_any_custom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033894"><span class="hs-identifier hs-type">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-527"></span><span>                   </span><span class="hs-comment">-- See Note [Handling of deprecations]</span><span>
</span><span id="line-528"></span><span>         </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683033896"><span class="annot"><a href="#local-6989586621683033896"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Iface.Load.html#loadInterfaceForName"><span class="hs-identifier hs-type">loadInterfaceForName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033898"><span class="hs-identifier hs-type">doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033899"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-529"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#lookupImpDeclDeprec"><span class="hs-identifier hs-type">lookupImpDeclDeprec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033896"><span class="hs-identifier hs-type">iface</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033889"><span class="hs-identifier hs-type">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-530"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683033901"><span class="annot"><span class="annottext">WarningTxt GhcRn
</span><a href="#local-6989586621683033901"><span class="hs-identifier hs-var">deprText</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-var">addDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-531"></span><span>                  </span><span class="annot"><span class="annottext">PragmaWarningInfo -&gt; WarningTxt GhcRn -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnPragmaWarning"><span class="hs-identifier hs-var">TcRnPragmaWarning</span></a></span><span>
</span><span id="line-532"></span><span>                      </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#PragmaWarningName"><span class="hs-identifier hs-type">PragmaWarningName</span></a></span><span>
</span><span id="line-533"></span><span>                        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pwarn_occname :: OccName
</span><a href="GHC.Tc.Errors.Types.html#pwarn_occname"><span class="hs-identifier hs-var">pwarn_occname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033905"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-534"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pwarn_impmod :: ModuleName
</span><a href="GHC.Tc.Errors.Types.html#pwarn_impmod"><span class="hs-identifier hs-var">pwarn_impmod</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#importSpecModule"><span class="hs-identifier hs-var">importSpecModule</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621683033893"><span class="hs-identifier hs-var">imp_spec</span></a></span><span>
</span><span id="line-535"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pwarn_declmod :: ModuleName
</span><a href="GHC.Tc.Errors.Types.html#pwarn_declmod"><span class="hs-identifier hs-var">pwarn_declmod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621683033909"><span class="hs-identifier hs-var">definedMod</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-536"></span><span>                      </span><span class="annot"><span class="annottext">WarningTxt GhcRn
</span><a href="#local-6989586621683033901"><span class="hs-identifier hs-var">deprText</span></a></span><span>
</span><span id="line-537"></span><span>                </span><span class="annot"><span class="annottext">Maybe (WarningTxt GhcRn)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-538"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-539"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-540"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-541"></span><span>    </span><span id="local-6989586621683033905"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621683033905"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033889"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-542"></span><span>    </span><span id="local-6989586621683033899"><span class="annot"><span class="annottext">name :: Name
</span><a href="#local-6989586621683033899"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033889"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-543"></span><span>    </span><span id="local-6989586621683033909"><span class="annot"><span class="annottext">definedMod :: ModuleName
</span><a href="#local-6989586621683033909"><span class="hs-identifier hs-var hs-var">definedMod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">(Module -&gt; ModuleName) -&gt; Module -&gt; ModuleName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; Module -&gt; Module
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isExternalName"><span class="hs-identifier hs-var">isExternalName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033899"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033899"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Module
Name -&gt; Module
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033899"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>    </span><span id="local-6989586621683033898"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621683033898"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The name&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033905"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is mentioned explicitly&quot;</span></span><span>
</span><span id="line-545"></span><span>
</span><span id="line-546"></span><span class="annot"><a href="GHC.Rename.Utils.html#lookupImpDeclDeprec"><span class="hs-identifier hs-type">lookupImpDeclDeprec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.ModIface.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#WarningTxt"><span class="hs-identifier hs-type">WarningTxt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span id="lookupImpDeclDeprec"><span class="annot"><span class="annottext">lookupImpDeclDeprec :: ModIface -&gt; GlobalRdrElt -&gt; Maybe (WarningTxt GhcRn)
</span><a href="GHC.Rename.Utils.html#lookupImpDeclDeprec"><span class="hs-identifier hs-var hs-var">lookupImpDeclDeprec</span></a></span></span><span> </span><span id="local-6989586621683033918"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621683033918"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span id="local-6989586621683033919"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033919"><span class="hs-identifier hs-var">gre</span></a></span></span><span>
</span><span id="line-548"></span><span>  </span><span class="hs-comment">-- Bleat if the thing, or its parent, is warn'd</span><span>
</span><span id="line-549"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; OccName -&gt; Maybe (WarningTxt GhcRn)
</span><a href="GHC.Unit.Module.ModIface.html#mi_decl_warn_fn"><span class="hs-identifier hs-var">mi_decl_warn_fn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; IfaceBackendExts 'ModIfaceFinal
forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; IfaceBackendExts phase
</span><a href="GHC.Unit.Module.ModIface.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621683033918"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033919"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (WarningTxt GhcRn)
-&gt; Maybe (WarningTxt GhcRn) -&gt; Maybe (WarningTxt GhcRn)
forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a -&gt; m a -&gt; m a
</span><span class="hs-operator hs-var">`mplus`</span></span><span>
</span><span id="line-550"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Parent
forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#greParent"><span class="hs-identifier hs-var">greParent</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033919"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-551"></span><span>       </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span> </span><span id="local-6989586621683033924"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033924"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; OccName -&gt; Maybe (WarningTxt GhcRn)
</span><a href="GHC.Unit.Module.ModIface.html#mi_decl_warn_fn"><span class="hs-identifier hs-var">mi_decl_warn_fn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; IfaceBackendExts 'ModIfaceFinal
forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; IfaceBackendExts phase
</span><a href="GHC.Unit.Module.ModIface.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621683033918"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033924"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-552"></span><span>       </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (WarningTxt GhcRn)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-553"></span><span>
</span><span id="line-554"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnIfExportDeprecated"><span class="hs-identifier hs-type">warnIfExportDeprecated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span id="warnIfExportDeprecated"><span class="annot"><span class="annottext">warnIfExportDeprecated :: GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnIfExportDeprecated"><span class="hs-identifier hs-var hs-var">warnIfExportDeprecated</span></a></span></span><span> </span><span id="local-6989586621683033925"><span class="annot"><span class="annottext">gre :: GlobalRdrElt
</span><a href="#local-6989586621683033925"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683033926"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621683033926"><span class="hs-identifier hs-var">iss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683033927"><span class="annot"><a href="#local-6989586621683033927"><span class="hs-identifier hs-var">mod_warn_mbs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ImportSpec
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv) (Maybe (ModuleName, WarningTxt GhcRn)))
-&gt; Bag ImportSpec
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (Bag (Maybe (ModuleName, WarningTxt GhcRn)))
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Bag a -&gt; m (Bag b)
</span><a href="GHC.Data.Bag.html#mapBagM"><span class="hs-identifier hs-var">mapBagM</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (Maybe (ModuleName, WarningTxt GhcRn))
</span><a href="#local-6989586621683033928"><span class="hs-identifier hs-var">process_import_spec</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621683033926"><span class="hs-identifier hs-var">iss</span></a></span><span>
</span><span id="line-557"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">for_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">sequence</span></span><span> </span><span class="annot"><a href="#local-6989586621683033927"><span class="hs-identifier hs-type">mod_warn_mbs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span>
</span><span id="line-558"></span><span>           </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621683033931"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621683033931"><span class="hs-identifier hs-var">importing_mod</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683033932"><span class="annot"><span class="annottext">WarningTxt GhcRn
</span><a href="#local-6989586621683033932"><span class="hs-identifier hs-var">warn_txt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-var">addDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-559"></span><span>             </span><span class="annot"><span class="annottext">PragmaWarningInfo -&gt; WarningTxt GhcRn -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnPragmaWarning"><span class="hs-identifier hs-var">TcRnPragmaWarning</span></a></span><span>
</span><span id="line-560"></span><span>                </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#PragmaWarningExport"><span class="hs-identifier hs-type">PragmaWarningExport</span></a></span><span>
</span><span id="line-561"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pwarn_occname :: OccName
</span><a href="GHC.Tc.Errors.Types.html#pwarn_occname"><span class="hs-identifier hs-var">pwarn_occname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033934"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-562"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pwarn_impmod :: ModuleName
</span><a href="GHC.Tc.Errors.Types.html#pwarn_impmod"><span class="hs-identifier hs-var">pwarn_impmod</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621683033931"><span class="hs-identifier hs-var">importing_mod</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-563"></span><span>                </span><span class="annot"><span class="annottext">WarningTxt GhcRn
</span><a href="#local-6989586621683033932"><span class="hs-identifier hs-var">warn_txt</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-564"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-565"></span><span>    </span><span id="local-6989586621683033934"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621683033934"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033925"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-566"></span><span>    </span><span id="local-6989586621683033935"><span class="annot"><span class="annottext">name :: Name
</span><a href="#local-6989586621683033935"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033925"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-567"></span><span>    </span><span id="local-6989586621683033936"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621683033936"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The name&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033934"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is mentioned explicitly&quot;</span></span><span>
</span><span id="line-568"></span><span>    </span><span class="annot"><a href="#local-6989586621683033928"><span class="hs-identifier hs-type">process_import_spec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ImportSpec"><span class="hs-identifier hs-type">ImportSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#WarningTxt"><span class="hs-identifier hs-type">WarningTxt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span>    </span><span id="local-6989586621683033928"><span class="annot"><span class="annottext">process_import_spec :: ImportSpec
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (Maybe (ModuleName, WarningTxt GhcRn))
</span><a href="#local-6989586621683033928"><span class="hs-identifier hs-var hs-var">process_import_spec</span></a></span></span><span> </span><span id="local-6989586621683033937"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621683033937"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-570"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683033938"><span class="annot"><span class="annottext">mod :: Module
</span><a href="#local-6989586621683033938"><span class="hs-identifier hs-var hs-var hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Module
</span><a href="GHC.Types.Name.Reader.html#is_mod"><span class="hs-identifier hs-var">is_mod</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpDeclSpec -&gt; Module) -&gt; ImpDeclSpec -&gt; Module
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621683033937"><span class="hs-identifier hs-var">is</span></a></span><span>
</span><span id="line-571"></span><span>      </span><span id="local-6989586621683033941"><span class="annot"><a href="#local-6989586621683033941"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Module -&gt; TcRn ModIface
</span><a href="GHC.Iface.Load.html#loadInterfaceForModule"><span class="hs-identifier hs-var">loadInterfaceForModule</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621683033936"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621683033938"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-572"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683033943"><span class="annot"><a href="#local-6989586621683033943"><span class="hs-identifier hs-var hs-var">mb_warn_txt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Name -&gt; Maybe (WarningTxt GhcRn)
</span><a href="GHC.Unit.Module.ModIface.html#mi_export_warn_fn"><span class="hs-identifier hs-var">mi_export_warn_fn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; IfaceBackendExts 'ModIfaceFinal
forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; IfaceBackendExts phase
</span><a href="GHC.Unit.Module.ModIface.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621683033941"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033935"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-573"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033938"><span class="hs-identifier hs-type">mod</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621683033943"><span class="hs-identifier hs-type">mb_warn_txt</span></a></span><span>
</span><span id="line-574"></span><span>
</span><span id="line-575"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-576"></span><span class="hs-comment">--      Helpers</span><span>
</span><span id="line-577"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedGREs"><span class="hs-identifier hs-type">warnUnusedGREs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-578"></span><span id="warnUnusedGREs"><span class="annot"><span class="annottext">warnUnusedGREs :: [GlobalRdrElt] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnusedGREs"><span class="hs-identifier hs-var hs-var">warnUnusedGREs</span></a></span></span><span> </span><span id="local-6989586621683033945"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033945"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; [GlobalRdrElt] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnusedGRE"><span class="hs-identifier hs-var">warnUnusedGRE</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033945"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-579"></span><span>
</span><span id="line-580"></span><span class="hs-comment">-- NB the Names must not be the names of record fields!</span><span>
</span><span id="line-581"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnused"><span class="hs-identifier hs-type">warnUnused</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#UnusedNameProv"><span class="hs-identifier hs-type">UnusedNameProv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-582"></span><span id="warnUnused"><span class="annot"><span class="annottext">warnUnused :: UnusedNameProv -&gt; [Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnused"><span class="hs-identifier hs-var hs-var">warnUnused</span></a></span></span><span> </span><span id="local-6989586621683033947"><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="#local-6989586621683033947"><span class="hs-identifier hs-var">prov</span></a></span></span><span> </span><span id="local-6989586621683033948"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033948"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-583"></span><span>  </span><span class="annot"><span class="annottext">(Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; [Name] -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683033949"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033949"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
-&gt; Name -&gt; OccName -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnused1"><span class="hs-identifier hs-var">warnUnused1</span></a></span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="#local-6989586621683033947"><span class="hs-identifier hs-var">prov</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033949"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033949"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683033948"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-584"></span><span>
</span><span id="line-585"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnused1"><span class="hs-identifier hs-type">warnUnused1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#UnusedNameProv"><span class="hs-identifier hs-type">UnusedNameProv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span id="warnUnused1"><span class="annot"><span class="annottext">warnUnused1 :: UnusedNameProv
-&gt; Name -&gt; OccName -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnused1"><span class="hs-identifier hs-var hs-var">warnUnused1</span></a></span></span><span> </span><span id="local-6989586621683033951"><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="#local-6989586621683033951"><span class="hs-identifier hs-var">prov</span></a></span></span><span> </span><span id="local-6989586621683033952"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033952"><span class="hs-identifier hs-var">child</span></a></span></span><span> </span><span id="local-6989586621683033953"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033953"><span class="hs-identifier hs-var">child_occ</span></a></span></span><span>
</span><span id="line-587"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OccName -&gt; Bool
</span><a href="GHC.Rename.Utils.html#reportable"><span class="hs-identifier hs-var">reportable</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033952"><span class="hs-identifier hs-var">child</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033953"><span class="hs-identifier hs-var">child_occ</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) ()
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-588"></span><span>    </span><span class="annot"><span class="annottext">UnusedNameProv
-&gt; SrcSpan -&gt; OccName -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warn_unused_name"><span class="hs-identifier hs-var">warn_unused_name</span></a></span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="#local-6989586621683033951"><span class="hs-identifier hs-var">prov</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SrcSpan
</span><a href="GHC.Types.Name.html#nameSrcSpan"><span class="hs-identifier hs-var">nameSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033952"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033953"><span class="hs-identifier hs-var">child_occ</span></a></span><span>
</span><span id="line-589"></span><span>
</span><span id="line-590"></span><span class="annot"><a href="GHC.Rename.Utils.html#warn_unused_name"><span class="hs-identifier hs-type">warn_unused_name</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#UnusedNameProv"><span class="hs-identifier hs-type">UnusedNameProv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-591"></span><span id="warn_unused_name"><span class="annot"><span class="annottext">warn_unused_name :: UnusedNameProv
-&gt; SrcSpan -&gt; OccName -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warn_unused_name"><span class="hs-identifier hs-var hs-var">warn_unused_name</span></a></span></span><span> </span><span id="local-6989586621683033956"><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="#local-6989586621683033956"><span class="hs-identifier hs-var">prov</span></a></span></span><span> </span><span id="local-6989586621683033957"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683033957"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span id="local-6989586621683033958"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033958"><span class="hs-identifier hs-var">child_occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-592"></span><span>  </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addDiagnosticAt"><span class="hs-identifier hs-var">addDiagnosticAt</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683033957"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; UnusedNameProv -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnUnusedName"><span class="hs-identifier hs-var">TcRnUnusedName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033958"><span class="hs-identifier hs-var">child_occ</span></a></span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="#local-6989586621683033956"><span class="hs-identifier hs-var">prov</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>
</span><span id="line-594"></span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedGRE"><span class="hs-identifier hs-type">warnUnusedGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span id="warnUnusedGRE"><span class="annot"><span class="annottext">warnUnusedGRE :: GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnusedGRE"><span class="hs-identifier hs-var hs-var">warnUnusedGRE</span></a></span></span><span> </span><span id="local-6989586621683033960"><span class="annot"><span class="annottext">gre :: GlobalRdrElt
</span><a href="#local-6989586621683033960"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683033962"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683033962"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683033963"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621683033963"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683033962"><span class="hs-identifier hs-var">lcl</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
-&gt; Name -&gt; OccName -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warnUnused1"><span class="hs-identifier hs-var">warnUnused1</span></a></span><span> </span><span class="annot"><span class="annottext">UnusedNameProv
</span><a href="GHC.Tc.Errors.Types.html#UnusedNameTopDecl"><span class="hs-identifier hs-var">UnusedNameTopDecl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033965"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033966"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-597"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OccName -&gt; Bool
</span><a href="GHC.Rename.Utils.html#reportable"><span class="hs-identifier hs-var">reportable</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033965"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033966"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ImportSpec -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; Bag ImportSpec -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621683033967"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621683033963"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-599"></span><span>    </span><span id="local-6989586621683033966"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621683033966"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033960"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-600"></span><span>    </span><span id="local-6989586621683033965"><span class="annot"><span class="annottext">nm :: Name
</span><a href="#local-6989586621683033965"><span class="hs-identifier hs-var hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Name
forall info. GlobalRdrEltX info -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#greName"><span class="hs-identifier hs-var">greName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621683033960"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-601"></span><span>    </span><span id="local-6989586621683033967"><span class="annot"><span class="annottext">warn :: ImportSpec -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="#local-6989586621683033967"><span class="hs-identifier hs-var hs-var">warn</span></a></span></span><span> </span><span id="local-6989586621683033968"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621683033968"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-602"></span><span>      </span><span class="annot"><span class="annottext">UnusedNameProv
-&gt; SrcSpan -&gt; OccName -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#warn_unused_name"><span class="hs-identifier hs-var">warn_unused_name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; UnusedNameProv
</span><a href="GHC.Tc.Errors.Types.html#UnusedNameImported"><span class="hs-identifier hs-var">UnusedNameImported</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#importSpecModule"><span class="hs-identifier hs-var">importSpecModule</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621683033968"><span class="hs-identifier hs-var">spec</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683033970"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033966"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-603"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-604"></span><span>        </span><span id="local-6989586621683033970"><span class="annot"><span class="annottext">span :: SrcSpan
</span><a href="#local-6989586621683033970"><span class="hs-identifier hs-var hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#importSpecLoc"><span class="hs-identifier hs-var">importSpecLoc</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621683033968"><span class="hs-identifier hs-var">spec</span></a></span><span>
</span><span id="line-605"></span><span>
</span><span id="line-606"></span><span class="hs-comment">-- | Should we report the fact that this 'Name' is unused? The</span><span>
</span><span id="line-607"></span><span class="hs-comment">-- 'OccName' may differ from 'nameOccName' due to</span><span>
</span><span id="line-608"></span><span class="hs-comment">-- DuplicateRecordFields.</span><span>
</span><span id="line-609"></span><span class="annot"><a href="GHC.Rename.Utils.html#reportable"><span class="hs-identifier hs-type">reportable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-610"></span><span id="reportable"><span class="annot"><span class="annottext">reportable :: Name -&gt; OccName -&gt; Bool
</span><a href="GHC.Rename.Utils.html#reportable"><span class="hs-identifier hs-var hs-var">reportable</span></a></span></span><span> </span><span id="local-6989586621683033972"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033972"><span class="hs-identifier hs-var">child</span></a></span></span><span> </span><span id="local-6989586621683033973"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033973"><span class="hs-identifier hs-var">child_occ</span></a></span></span><span>
</span><span id="line-611"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isWiredInName"><span class="hs-identifier hs-var">isWiredInName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683033972"><span class="hs-identifier hs-var">child</span></a></span><span>
</span><span id="line-612"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>    </span><span class="hs-comment">-- Don't report unused wired-in names</span><span>
</span><span id="line-613"></span><span>             </span><span class="hs-comment">-- Otherwise we get a zillion warnings</span><span>
</span><span id="line-614"></span><span>             </span><span class="hs-comment">-- from Data.Tuple</span><span>
</span><span id="line-615"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-616"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#startsWithUnderscore"><span class="hs-identifier hs-var">startsWithUnderscore</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621683033973"><span class="hs-identifier hs-var">child_occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-617"></span><span>
</span><span id="line-618"></span><span class="hs-comment">{-
Note [Skipping ambiguity errors at use sites of local declarations]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In general, we do not report ambiguous occurrences at use sites where all the
clashing names are defined locally, because the error will have been reported at
the definition site, and we want to avoid an error cascade.

However, when DuplicateRecordFields is enabled, it is possible to define the
same field name multiple times, so we *do* need to report an error at the use
site when there is ambiguity between multiple fields. Moreover, when
NoFieldSelectors is enabled, it is possible to define a field with the same name
as a non-field, so again we need to report ambiguity at the use site.

We can skip reporting an ambiguity error whenever defining the GREs must have
yielded a duplicate declarations error.  More precisely, we can skip if:

 * there are at least two non-fields amongst the GREs; or

 * there are at least two fields amongst the GREs, and DuplicateRecordFields is
   *disabled*; or

 * there is at least one non-field, at least one field, and NoFieldSelectors is
   *disabled*.

These conditions ensure that a duplicate local declaration will have been
reported.  See also Note [Reporting duplicate local declarations] in
GHC.Rename.Names).

-}</span><span>
</span><span id="line-647"></span><span>
</span><span id="line-648"></span><span class="annot"><a href="GHC.Rename.Utils.html#addNameClashErrRn"><span class="hs-identifier hs-type">addNameClashErrRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-649"></span><span id="addNameClashErrRn"><span class="annot"><span class="annottext">addNameClashErrRn :: RdrName
-&gt; NonEmpty GlobalRdrElt -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#addNameClashErrRn"><span class="hs-identifier hs-var hs-var">addNameClashErrRn</span></a></span></span><span> </span><span id="local-6989586621683033975"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683033975"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span id="local-6989586621683033976"><span class="annot"><span class="annottext">NonEmpty GlobalRdrElt
</span><a href="#local-6989586621683033976"><span class="hs-identifier hs-var">gres</span></a></span></span><span>
</span><span id="line-650"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Bool) -&gt; NonEmpty GlobalRdrElt -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isLocalGRE"><span class="hs-identifier hs-var">isLocalGRE</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty GlobalRdrElt
</span><a href="#local-6989586621683033976"><span class="hs-identifier hs-var">gres</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683033980"><span class="hs-identifier hs-var">can_skip</span></a></span><span>
</span><span id="line-651"></span><span>  </span><span class="hs-comment">-- If there are two or more *local* defns, we'll usually have reported that</span><span>
</span><span id="line-652"></span><span>  </span><span class="hs-comment">-- already, and we don't want an error cascade.</span><span>
</span><span id="line-653"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-655"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683033981"><span class="annot"><a href="#local-6989586621683033981"><span class="hs-identifier hs-var">gre_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn GlobalRdrEnv
</span><a href="GHC.Tc.Utils.Monad.html#getGlobalRdrEnv"><span class="hs-identifier hs-var">getGlobalRdrEnv</span></a></span><span>
</span><span id="line-656"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#mkNameClashErr"><span class="hs-identifier hs-type">mkNameClashErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033981"><span class="hs-identifier hs-type">gre_env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033975"><span class="hs-identifier hs-type">rdr_name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033976"><span class="hs-identifier hs-type">gres</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-657"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-658"></span><span>    </span><span class="hs-comment">-- If all the GREs are defined locally, can we skip reporting an ambiguity</span><span>
</span><span id="line-659"></span><span>    </span><span class="hs-comment">-- error at use sites, because it will have been reported already? See</span><span>
</span><span id="line-660"></span><span>    </span><span class="hs-comment">-- Note [Skipping ambiguity errors at use sites of local declarations]</span><span>
</span><span id="line-661"></span><span>    </span><span id="local-6989586621683033980"><span class="annot"><span class="annottext">can_skip :: Bool
</span><a href="#local-6989586621683033980"><span class="hs-identifier hs-var hs-var">can_skip</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683033982"><span class="hs-identifier hs-var">num_non_flds</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-662"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683033983"><span class="hs-identifier hs-var">num_flds</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isDuplicateRecFldGRE"><span class="hs-identifier hs-var">isDuplicateRecFldGRE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; GlobalRdrElt
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="GHC.Prelude.Basic.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033986"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-663"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683033982"><span class="hs-identifier hs-var">num_non_flds</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683033983"><span class="hs-identifier hs-var">num_flds</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-664"></span><span>                                  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isNoFieldSelectorGRE"><span class="hs-identifier hs-var">isNoFieldSelectorGRE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; GlobalRdrElt
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="GHC.Prelude.Basic.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033986"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683033986"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033986"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683033988"><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033988"><span class="hs-identifier hs-var">non_flds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Bool)
-&gt; NonEmpty GlobalRdrElt -&gt; ([GlobalRdrElt], [GlobalRdrElt])
forall a. (a -&gt; Bool) -&gt; NonEmpty a -&gt; ([a], [a])
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#partition"><span class="hs-identifier hs-var">NE.partition</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-var">isRecFldGRE</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty GlobalRdrElt
</span><a href="#local-6989586621683033976"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-666"></span><span>    </span><span id="local-6989586621683033983"><span class="annot"><span class="annottext">num_flds :: Int
</span><a href="#local-6989586621683033983"><span class="hs-identifier hs-var hs-var">num_flds</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033986"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-667"></span><span>    </span><span id="local-6989586621683033982"><span class="annot"><span class="annottext">num_non_flds :: Int
</span><a href="#local-6989586621683033982"><span class="hs-identifier hs-var hs-var">num_non_flds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621683033988"><span class="hs-identifier hs-var">non_flds</span></a></span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span class="annot"><a href="GHC.Rename.Utils.html#mkNameClashErr"><span class="hs-identifier hs-type">mkNameClashErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnMessage"><span class="hs-identifier hs-type">TcRnMessage</span></a></span><span>
</span><span id="line-670"></span><span id="mkNameClashErr"><span class="annot"><span class="annottext">mkNameClashErr :: GlobalRdrEnv -&gt; RdrName -&gt; NonEmpty GlobalRdrElt -&gt; TcRnMessage
</span><a href="GHC.Rename.Utils.html#mkNameClashErr"><span class="hs-identifier hs-var hs-var">mkNameClashErr</span></a></span></span><span> </span><span id="local-6989586621683033991"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621683033991"><span class="hs-identifier hs-var">gre_env</span></a></span></span><span> </span><span id="local-6989586621683033992"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683033992"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span id="local-6989586621683033993"><span class="annot"><span class="annottext">NonEmpty GlobalRdrElt
</span><a href="#local-6989586621683033993"><span class="hs-identifier hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; RdrName -&gt; NonEmpty GlobalRdrElt -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnAmbiguousName"><span class="hs-identifier hs-var">TcRnAmbiguousName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621683033991"><span class="hs-identifier hs-var">gre_env</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683033992"><span class="hs-identifier hs-var">rdr_name</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty GlobalRdrElt
</span><a href="#local-6989586621683033993"><span class="hs-identifier hs-var">gres</span></a></span><span>
</span><span id="line-671"></span><span>
</span><span id="line-672"></span><span class="annot"><a href="GHC.Rename.Utils.html#dupNamesErr"><span class="hs-identifier hs-type">dupNamesErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-673"></span><span id="dupNamesErr"><span class="annot"><span class="annottext">dupNamesErr :: NonEmpty SrcSpan
-&gt; NonEmpty RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#dupNamesErr"><span class="hs-identifier hs-var hs-var">dupNamesErr</span></a></span></span><span> </span><span id="local-6989586621683033995"><span class="annot"><span class="annottext">NonEmpty SrcSpan
</span><a href="#local-6989586621683033995"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621683033996"><span class="annot"><span class="annottext">NonEmpty RdrName
</span><a href="#local-6989586621683033996"><span class="hs-identifier hs-var">names</span></a></span></span><span>
</span><span id="line-674"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683033997"><span class="hs-identifier hs-var">big_loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; NonEmpty SrcSpan -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnBindingNameConflict"><span class="hs-identifier hs-var">TcRnBindingNameConflict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty RdrName -&gt; RdrName
forall a. NonEmpty a -&gt; a
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#head"><span class="hs-identifier hs-var">NE.head</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty RdrName
</span><a href="#local-6989586621683033996"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmpty SrcSpan
</span><a href="#local-6989586621683033995"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-676"></span><span>    </span><span id="local-6989586621683033997"><span class="annot"><span class="annottext">big_loc :: SrcSpan
</span><a href="#local-6989586621683033997"><span class="hs-identifier hs-var hs-var">big_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; SrcSpan -&gt; SrcSpan) -&gt; NonEmpty SrcSpan -&gt; SrcSpan
forall a. (a -&gt; a -&gt; a) -&gt; NonEmpty a -&gt; a
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">foldr1</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty SrcSpan
</span><a href="#local-6989586621683033995"><span class="hs-identifier hs-var">locs</span></a></span><span>
</span><span id="line-677"></span><span>
</span><span id="line-678"></span><span class="annot"><a href="GHC.Rename.Utils.html#badQualBndrErr"><span class="hs-identifier hs-type">badQualBndrErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnMessage"><span class="hs-identifier hs-type">TcRnMessage</span></a></span><span>
</span><span id="line-679"></span><span id="badQualBndrErr"><span class="annot"><span class="annottext">badQualBndrErr :: RdrName -&gt; TcRnMessage
</span><a href="GHC.Rename.Utils.html#badQualBndrErr"><span class="hs-identifier hs-var hs-var">badQualBndrErr</span></a></span></span><span> </span><span id="local-6989586621683034002"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683034002"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnQualifiedBinder"><span class="hs-identifier hs-var">TcRnQualifiedBinder</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683034002"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span class="annot"><a href="GHC.Rename.Utils.html#typeAppErr"><span class="hs-identifier hs-type">typeAppErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier hs-type">TypeOrKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnMessage"><span class="hs-identifier hs-type">TcRnMessage</span></a></span><span>
</span><span id="line-682"></span><span id="typeAppErr"><span class="annot"><span class="annottext">typeAppErr :: TypeOrKind -&gt; LHsType GhcPs -&gt; TcRnMessage
</span><a href="GHC.Rename.Utils.html#typeAppErr"><span class="hs-identifier hs-var hs-var">typeAppErr</span></a></span></span><span> </span><span id="local-6989586621683034004"><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683034004"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683034005"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683034005"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeApplication -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnTypeApplicationsDisabled"><span class="hs-identifier hs-var">TcRnTypeApplicationsDisabled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsType GhcPs -&gt; TypeOrKind -&gt; TypeApplication
</span><a href="GHC.Tc.Errors.Types.html#TypeApplication"><span class="hs-identifier hs-var">TypeApplication</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683034005"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683034004"><span class="hs-identifier hs-var">what</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>
</span><span id="line-684"></span><span class="annot"><a href="GHC.Rename.Utils.html#badFieldConErr"><span class="hs-identifier hs-type">badFieldConErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#FieldLabelString"><span class="hs-identifier hs-type">FieldLabelString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnMessage"><span class="hs-identifier hs-type">TcRnMessage</span></a></span><span>
</span><span id="line-685"></span><span id="badFieldConErr"><span class="annot"><span class="annottext">badFieldConErr :: Name -&gt; FieldLabelString -&gt; TcRnMessage
</span><a href="GHC.Rename.Utils.html#badFieldConErr"><span class="hs-identifier hs-var hs-var">badFieldConErr</span></a></span></span><span> </span><span id="local-6989586621683034008"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034008"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621683034009"><span class="annot"><span class="annottext">FieldLabelString
</span><a href="#local-6989586621683034009"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; FieldLabelString -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnInvalidRecordField"><span class="hs-identifier hs-var">TcRnInvalidRecordField</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034008"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabelString
</span><a href="#local-6989586621683034009"><span class="hs-identifier hs-var">field</span></a></span><span>
</span><span id="line-686"></span><span>
</span><span id="line-687"></span><span class="hs-comment">-- | Ensure that a boxed or unboxed tuple has arity no larger than</span><span>
</span><span id="line-688"></span><span class="hs-comment">-- 'mAX_TUPLE_SIZE'.</span><span>
</span><span id="line-689"></span><span class="annot"><a href="GHC.Rename.Utils.html#checkTupSize"><span class="hs-identifier hs-type">checkTupSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span id="checkTupSize"><span class="annot"><span class="annottext">checkTupSize :: Int -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkTupSize"><span class="hs-identifier hs-var hs-var">checkTupSize</span></a></span></span><span> </span><span id="local-6989586621683034012"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683034012"><span class="hs-identifier hs-var">tup_size</span></a></span></span><span>
</span><span id="line-691"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683034012"><span class="hs-identifier hs-var">tup_size</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="GHC.Settings.Constants.html#mAX_TUPLE_SIZE"><span class="hs-identifier hs-var">mAX_TUPLE_SIZE</span></a></span><span>
</span><span id="line-692"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-694"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnTupleTooLarge"><span class="hs-identifier hs-var">TcRnTupleTooLarge</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683034012"><span class="hs-identifier hs-var">tup_size</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span class="annot"><span class="hs-comment">-- | Ensure that a constraint tuple has arity no larger than 'mAX_CTUPLE_SIZE'.</span></span><span>
</span><span id="line-697"></span><span class="annot"><a href="GHC.Rename.Utils.html#checkCTupSize"><span class="hs-identifier hs-type">checkCTupSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span id="checkCTupSize"><span class="annot"><span class="annottext">checkCTupSize :: Int -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Rename.Utils.html#checkCTupSize"><span class="hs-identifier hs-var hs-var">checkCTupSize</span></a></span></span><span> </span><span id="local-6989586621683034015"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683034015"><span class="hs-identifier hs-var">tup_size</span></a></span></span><span>
</span><span id="line-699"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683034015"><span class="hs-identifier hs-var">tup_size</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="GHC.Settings.Constants.html#mAX_CTUPLE_SIZE"><span class="hs-identifier hs-var">mAX_CTUPLE_SIZE</span></a></span><span>
</span><span id="line-700"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-702"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnCTupleTooLarge"><span class="hs-identifier hs-var">TcRnCTupleTooLarge</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683034015"><span class="hs-identifier hs-var">tup_size</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
              Generating code for ExpandedThingRn
      See Note [Handling overloaded and rebindable constructs]
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-710"></span><span>
</span><span id="line-711"></span><span id="local-6989586621683033248"><span id="local-6989586621683033249"><span class="annot"><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-type">wrapGenSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#HasAnnotation"><span class="hs-identifier hs-type">HasAnnotation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033248"><span class="hs-identifier hs-type">an</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621683033249"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033248"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033249"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-712"></span><span class="hs-comment">-- Wrap something in a &quot;generatedSrcSpan&quot;</span><span>
</span><span id="line-713"></span><span class="hs-comment">-- See Note [Rebindable syntax and XXExprGhcRn]</span><span>
</span><span id="line-714"></span><span id="wrapGenSpan"><span class="annot"><span class="annottext">wrapGenSpan :: forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var hs-var">wrapGenSpan</span></a></span></span><span> </span><span id="local-6989586621683034019"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683034019"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">an -&gt; a -&gt; GenLocated an a
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; an
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#generatedSrcSpan"><span class="hs-identifier hs-var">generatedSrcSpan</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683034019"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-715"></span><span>
</span><span id="line-716"></span><span class="annot"><a href="GHC.Rename.Utils.html#genHsApps"><span class="hs-identifier hs-type">genHsApps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-717"></span><span id="genHsApps"><span class="annot"><span class="annottext">genHsApps :: Name -&gt; [LHsExpr GhcRn] -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsApps"><span class="hs-identifier hs-var hs-var">genHsApps</span></a></span></span><span> </span><span id="local-6989586621683034022"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034022"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621683034023"><span class="annot"><span class="annottext">[LHsExpr GhcRn]
</span><a href="#local-6989586621683034023"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn
 -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn)
-&gt; HsExpr GhcRn
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcRn)]
-&gt; HsExpr GhcRn
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
HsExpr GhcRn
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsApp"><span class="hs-identifier hs-var">genHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsVar"><span class="hs-identifier hs-var">genHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034022"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcRn]
[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621683034023"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span class="annot"><span class="hs-comment">-- | Keeps the span given to the 'Name' for the application head only</span></span><span>
</span><span id="line-720"></span><span class="annot"><a href="GHC.Rename.Utils.html#genHsApps%27"><span class="hs-identifier hs-type">genHsApps'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-721"></span><span id="genHsApps%27"><span class="annot"><span class="annottext">genHsApps' :: LocatedN Name -&gt; [LHsExpr GhcRn] -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsApps%27"><span class="hs-identifier hs-var hs-var">genHsApps'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683034025"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034025"><span class="hs-identifier hs-var">fun</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsVar"><span class="hs-identifier hs-var">genHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034025"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-722"></span><span class="annot"><a href="GHC.Rename.Utils.html#genHsApps%27"><span class="hs-identifier hs-var">genHsApps'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683034026"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683034026"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683034027"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034027"><span class="hs-identifier hs-var">fun</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683034028"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683034028"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621683034029"><span class="annot"><span class="annottext">[LHsExpr GhcRn]
</span><a href="#local-6989586621683034029"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn
 -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn)
-&gt; HsExpr GhcRn
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcRn)]
-&gt; HsExpr GhcRn
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
HsExpr GhcRn
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsApp"><span class="hs-identifier hs-var">genHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn
forall (id :: Pass).
LHsExpr (GhcPass id)
-&gt; LHsExpr (GhcPass id) -&gt; LHsExpr (GhcPass id)
</span><a href="GHC.Hs.Utils.html#mkHsApp"><span class="hs-identifier hs-var">mkHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpanAnnA
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683034026"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn))
-&gt; HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsVar"><span class="hs-identifier hs-var">genHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034027"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683034028"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcRn]
[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621683034029"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span class="annot"><a href="GHC.Rename.Utils.html#genHsExpApps"><span class="hs-identifier hs-type">genHsExpApps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-725"></span><span id="genHsExpApps"><span class="annot"><span class="annottext">genHsExpApps :: HsExpr GhcRn -&gt; [LHsExpr GhcRn] -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsExpApps"><span class="hs-identifier hs-var hs-var">genHsExpApps</span></a></span></span><span> </span><span id="local-6989586621683034032"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621683034032"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621683034033"><span class="annot"><span class="annottext">[LHsExpr GhcRn]
</span><a href="#local-6989586621683034033"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn
 -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn)
-&gt; HsExpr GhcRn
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcRn)]
-&gt; HsExpr GhcRn
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
HsExpr GhcRn
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsApp"><span class="hs-identifier hs-var">genHsApp</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621683034032"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcRn]
[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621683034033"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="annot"><a href="GHC.Rename.Utils.html#genHsApp"><span class="hs-identifier hs-type">genHsApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-728"></span><span id="genHsApp"><span class="annot"><span class="annottext">genHsApp :: HsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsApp"><span class="hs-identifier hs-var hs-var">genHsApp</span></a></span></span><span> </span><span id="local-6989586621683034034"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621683034034"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621683034035"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683034035"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XApp GhcRn -&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">XApp GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621683034034"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683034035"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-729"></span><span>
</span><span id="line-730"></span><span class="annot"><a href="GHC.Rename.Utils.html#genLHsApp"><span class="hs-identifier hs-type">genLHsApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-731"></span><span id="genLHsApp"><span class="annot"><span class="annottext">genLHsApp :: HsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genLHsApp"><span class="hs-identifier hs-var hs-var">genLHsApp</span></a></span></span><span> </span><span id="local-6989586621683034038"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621683034038"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621683034039"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683034039"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsApp"><span class="hs-identifier hs-var">genHsApp</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621683034038"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683034039"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-732"></span><span>
</span><span id="line-733"></span><span class="annot"><a href="GHC.Rename.Utils.html#genLHsVar"><span class="hs-identifier hs-type">genLHsVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-734"></span><span id="genLHsVar"><span class="annot"><span class="annottext">genLHsVar :: Name -&gt; LHsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genLHsVar"><span class="hs-identifier hs-var hs-var">genLHsVar</span></a></span></span><span> </span><span id="local-6989586621683034040"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034040"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn))
-&gt; HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsVar"><span class="hs-identifier hs-var">genHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034040"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-735"></span><span>
</span><span id="line-736"></span><span class="annot"><a href="GHC.Rename.Utils.html#genHsVar"><span class="hs-identifier hs-type">genHsVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-737"></span><span id="genHsVar"><span class="annot"><span class="annottext">genHsVar :: Name -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsVar"><span class="hs-identifier hs-var hs-var">genHsVar</span></a></span></span><span> </span><span id="local-6989586621683034041"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034041"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XVar GhcRn -&gt; LIdP GhcRn -&gt; HsExpr GhcRn
forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">(LIdP GhcRn -&gt; HsExpr GhcRn) -&gt; LIdP GhcRn -&gt; HsExpr GhcRn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; LocatedN Name
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034041"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-738"></span><span>
</span><span id="line-739"></span><span class="annot"><a href="GHC.Rename.Utils.html#genAppType"><span class="hs-identifier hs-type">genAppType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#NoGhcTc"><span class="hs-identifier hs-type">NoGhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-740"></span><span id="genAppType"><span class="annot"><span class="annottext">genAppType :: HsExpr GhcRn -&gt; HsType (NoGhcTc GhcRn) -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genAppType"><span class="hs-identifier hs-var hs-var">genAppType</span></a></span></span><span> </span><span id="local-6989586621683034043"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621683034043"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621683034044"><span class="annot"><span class="annottext">HsType (NoGhcTc GhcRn)
</span><a href="#local-6989586621683034044"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XAppTypeE GhcRn
-&gt; LHsExpr GhcRn -&gt; LHsWcType (NoGhcTc GhcRn) -&gt; HsExpr GhcRn
forall p.
XAppTypeE p -&gt; LHsExpr p -&gt; LHsWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-var">HsAppType</span></a></span><span> </span><span class="annot"><span class="annottext">XAppTypeE GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621683034043"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
-&gt; HsWildCardBndrs GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))
forall thing. thing -&gt; HsWildCardBndrs GhcRn thing
</span><a href="GHC.Hs.Type.html#mkEmptyWildCardBndrs"><span class="hs-identifier hs-var">mkEmptyWildCardBndrs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsType GhcRn -&gt; GenLocated SrcSpanAnnA (HsType GhcRn)
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">HsType (NoGhcTc GhcRn)
HsType GhcRn
</span><a href="#local-6989586621683034044"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span id="local-6989586621683033270"><span class="annot"><a href="GHC.Rename.Utils.html#genLHsLit"><span class="hs-identifier hs-type">genLHsLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#NoAnn"><span class="hs-identifier hs-type">NoAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033270"><span class="hs-identifier hs-type">an</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033270"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-743"></span><span id="genLHsLit"><span class="annot"><span class="annottext">genLHsLit :: forall an. NoAnn an =&gt; HsLit GhcRn -&gt; LocatedAn an (HsExpr GhcRn)
</span><a href="GHC.Rename.Utils.html#genLHsLit"><span class="hs-identifier hs-var hs-var">genLHsLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; GenLocated (EpAnn an) (HsExpr GhcRn)
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; GenLocated (EpAnn an) (HsExpr GhcRn))
-&gt; (HsLit GhcRn -&gt; HsExpr GhcRn)
-&gt; HsLit GhcRn
-&gt; GenLocated (EpAnn an) (HsExpr GhcRn)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">XLitE GhcRn -&gt; HsLit GhcRn -&gt; HsExpr GhcRn
forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span id="local-6989586621683033275"><span class="annot"><a href="GHC.Rename.Utils.html#genHsIntegralLit"><span class="hs-identifier hs-type">genHsIntegralLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#NoAnn"><span class="hs-identifier hs-type">NoAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033275"><span class="hs-identifier hs-type">an</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#IntegralLit"><span class="hs-identifier hs-type">IntegralLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033275"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-746"></span><span id="genHsIntegralLit"><span class="annot"><span class="annottext">genHsIntegralLit :: forall an. NoAnn an =&gt; IntegralLit -&gt; LocatedAn an (HsExpr GhcRn)
</span><a href="GHC.Rename.Utils.html#genHsIntegralLit"><span class="hs-identifier hs-var hs-var">genHsIntegralLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsLit GhcRn -&gt; LocatedAn an (HsExpr GhcRn)
forall an. NoAnn an =&gt; HsLit GhcRn -&gt; LocatedAn an (HsExpr GhcRn)
</span><a href="GHC.Rename.Utils.html#genLHsLit"><span class="hs-identifier hs-var">genLHsLit</span></a></span><span> </span><span class="annot"><span class="annottext">(HsLit GhcRn -&gt; LocatedAn an (HsExpr GhcRn))
-&gt; (IntegralLit -&gt; HsLit GhcRn)
-&gt; IntegralLit
-&gt; LocatedAn an (HsExpr GhcRn)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">XHsInt GhcRn -&gt; IntegralLit -&gt; HsLit GhcRn
forall x. XHsInt x -&gt; IntegralLit -&gt; HsLit x
</span><a href="Language.Haskell.Syntax.Lit.html#HsInt"><span class="hs-identifier hs-var">HsInt</span></a></span><span> </span><span class="annot"><span class="annottext">XHsInt GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-747"></span><span>
</span><span id="line-748"></span><span class="annot"><a href="GHC.Rename.Utils.html#genHsTyLit"><span class="hs-identifier hs-type">genHsTyLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-749"></span><span id="genHsTyLit"><span class="annot"><span class="annottext">genHsTyLit :: FastString -&gt; HsType GhcRn
</span><a href="GHC.Rename.Utils.html#genHsTyLit"><span class="hs-identifier hs-var hs-var">genHsTyLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XTyLit GhcRn -&gt; HsTyLit GhcRn -&gt; HsType GhcRn
forall pass. XTyLit pass -&gt; HsTyLit pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-var">HsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">XTyLit GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">(HsTyLit GhcRn -&gt; HsType GhcRn)
-&gt; (FastString -&gt; HsTyLit GhcRn) -&gt; FastString -&gt; HsType GhcRn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">XStrTy GhcRn -&gt; FastString -&gt; HsTyLit GhcRn
forall pass. XStrTy pass -&gt; FastString -&gt; HsTyLit pass
</span><a href="Language.Haskell.Syntax.Type.html#HsStrTy"><span class="hs-identifier hs-var">HsStrTy</span></a></span><span> </span><span class="annot"><span class="annottext">XStrTy GhcRn
SourceText
</span><a href="GHC.Types.SourceText.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a></span><span>
</span><span id="line-750"></span><span>
</span><span id="line-751"></span><span class="annot"><a href="GHC.Rename.Utils.html#genSimpleConPat"><span class="hs-identifier hs-type">genSimpleConPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-752"></span><span class="hs-comment">-- The pattern (C p1 .. pn)</span><span>
</span><span id="line-753"></span><span id="genSimpleConPat"><span class="annot"><span class="annottext">genSimpleConPat :: Name -&gt; [LPat GhcRn] -&gt; LPat GhcRn
</span><a href="GHC.Rename.Utils.html#genSimpleConPat"><span class="hs-identifier hs-var hs-var">genSimpleConPat</span></a></span></span><span> </span><span id="local-6989586621683034056"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034056"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621683034057"><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621683034057"><span class="hs-identifier hs-var">pats</span></a></span></span><span>
</span><span id="line-754"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; GenLocated SrcSpanAnnA (Pat GhcRn)
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(Pat GhcRn -&gt; GenLocated SrcSpanAnnA (Pat GhcRn))
-&gt; Pat GhcRn -&gt; GenLocated SrcSpanAnnA (Pat GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: XConPat GhcRn
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XConPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-755"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_con :: XRec GhcRn (ConLikeP GhcRn)
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; LocatedN Name
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034056"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-756"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_args :: HsConPatDetails GhcRn
</span><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsConPatTyArg (NoGhcTc GhcRn)]
-&gt; [LPat GhcRn] -&gt; HsConPatDetails GhcRn
forall tyarg arg rec.
[tyarg] -&gt; [arg] -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621683034057"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-757"></span><span>
</span><span id="line-758"></span><span class="annot"><a href="GHC.Rename.Utils.html#genVarPat"><span class="hs-identifier hs-type">genVarPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-759"></span><span id="genVarPat"><span class="annot"><span class="annottext">genVarPat :: Name -&gt; LPat GhcRn
</span><a href="GHC.Rename.Utils.html#genVarPat"><span class="hs-identifier hs-var hs-var">genVarPat</span></a></span></span><span> </span><span id="local-6989586621683034063"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034063"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; GenLocated SrcSpanAnnA (Pat GhcRn)
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(Pat GhcRn -&gt; GenLocated SrcSpanAnnA (Pat GhcRn))
-&gt; Pat GhcRn -&gt; GenLocated SrcSpanAnnA (Pat GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XVarPat GhcRn -&gt; LIdP GhcRn -&gt; Pat GhcRn
forall p. XVarPat p -&gt; LIdP p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-var">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">XVarPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; LocatedN Name
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034063"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-760"></span><span>
</span><span id="line-761"></span><span class="annot"><a href="GHC.Rename.Utils.html#genWildPat"><span class="hs-identifier hs-type">genWildPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-762"></span><span id="genWildPat"><span class="annot"><span class="annottext">genWildPat :: LPat GhcRn
</span><a href="GHC.Rename.Utils.html#genWildPat"><span class="hs-identifier hs-var hs-var">genWildPat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; GenLocated SrcSpanAnnA (Pat GhcRn)
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(Pat GhcRn -&gt; GenLocated SrcSpanAnnA (Pat GhcRn))
-&gt; Pat GhcRn -&gt; GenLocated SrcSpanAnnA (Pat GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XWildPat GhcRn -&gt; Pat GhcRn
forall p. XWildPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-var">WildPat</span></a></span><span> </span><span class="annot"><span class="annottext">XWildPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-763"></span><span>
</span><span id="line-764"></span><span class="annot"><a href="GHC.Rename.Utils.html#genSimpleFunBind"><span class="hs-identifier hs-type">genSimpleFunBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-765"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-766"></span><span id="genSimpleFunBind"><span class="annot"><span class="annottext">genSimpleFunBind :: Name -&gt; [LPat GhcRn] -&gt; LHsExpr GhcRn -&gt; LHsBind GhcRn
</span><a href="GHC.Rename.Utils.html#genSimpleFunBind"><span class="hs-identifier hs-var hs-var">genSimpleFunBind</span></a></span></span><span> </span><span id="local-6989586621683034066"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034066"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621683034067"><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621683034067"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621683034068"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683034068"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-767"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsBind GhcRn -&gt; GenLocated SrcSpanAnnA (HsBind GhcRn)
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">(HsBind GhcRn -&gt; GenLocated SrcSpanAnnA (HsBind GhcRn))
-&gt; HsBind GhcRn -&gt; GenLocated SrcSpanAnnA (HsBind GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LocatedN Name -&gt; [LMatch GhcRn (LHsExpr GhcRn)] -&gt; HsBind GhcRn
</span><a href="GHC.Rename.Utils.html#genFunBind"><span class="hs-identifier hs-var">genFunBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; LocatedN Name
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034066"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-768"></span><span>        </span><span class="hs-special">[</span><span class="annot"><span class="annottext">HsMatchContext (LIdP (NoGhcTc GhcRn))
-&gt; LocatedE [LPat GhcRn]
-&gt; LHsExpr GhcRn
-&gt; HsLocalBinds GhcRn
-&gt; LMatch GhcRn (LHsExpr GhcRn)
forall (p :: Pass).
IsPass p =&gt;
HsMatchContext (LIdP (NoGhcTc (GhcPass p)))
-&gt; LocatedE [LPat (GhcPass p)]
-&gt; LHsExpr (GhcPass p)
-&gt; HsLocalBinds (GhcPass p)
-&gt; LMatch (GhcPass p) (LHsExpr (GhcPass p))
</span><a href="GHC.Hs.Utils.html#mkMatch"><span class="hs-identifier hs-var">mkMatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN Name -&gt; AnnFunRhs -&gt; HsMatchContext (LocatedN Name)
forall fn. fn -&gt; AnnFunRhs -&gt; HsMatchContext fn
</span><a href="GHC.Hs.Utils.html#mkPrefixFunRhs"><span class="hs-identifier hs-var">mkPrefixFunRhs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; LocatedN Name
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683034066"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnFunRhs
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcRn)]
-&gt; GenLocated EpaLocation [GenLocated SrcSpanAnnA (Pat GhcRn)]
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcRn]
[GenLocated SrcSpanAnnA (Pat GhcRn)]
</span><a href="#local-6989586621683034067"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683034068"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-769"></span><span>                 </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn
forall (a :: Pass) (b :: Pass).
HsLocalBindsLR (GhcPass a) (GhcPass b)
</span><a href="GHC.Hs.Binds.html#emptyLocalBinds"><span class="hs-identifier hs-var">emptyLocalBinds</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-770"></span><span>
</span><span id="line-771"></span><span class="annot"><a href="GHC.Rename.Utils.html#genFunBind"><span class="hs-identifier hs-type">genFunBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-772"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-773"></span><span id="genFunBind"><span class="annot"><span class="annottext">genFunBind :: LocatedN Name -&gt; [LMatch GhcRn (LHsExpr GhcRn)] -&gt; HsBind GhcRn
</span><a href="GHC.Rename.Utils.html#genFunBind"><span class="hs-identifier hs-var hs-var">genFunBind</span></a></span></span><span> </span><span id="local-6989586621683034074"><span class="annot"><span class="annottext">LocatedN Name
</span><a href="#local-6989586621683034074"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span id="local-6989586621683034075"><span class="annot"><span class="annottext">[LMatch GhcRn (LHsExpr GhcRn)]
</span><a href="#local-6989586621683034075"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-774"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: LIdP GhcRn
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
LocatedN Name
</span><a href="#local-6989586621683034074"><span class="hs-identifier hs-var">fn</span></a></span><span>
</span><span id="line-775"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin
-&gt; LocatedLW
     [LocatedA (Match GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
-&gt; MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
forall (p :: Pass) (body :: * -&gt; *).
AnnoBody p body =&gt;
Origin
-&gt; LocatedLW
     [LocatedA (Match (GhcPass p) (LocatedA (body (GhcPass p))))]
-&gt; MatchGroup (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkMatchGroup"><span class="hs-identifier hs-var">mkMatchGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenReason -&gt; DoPmc -&gt; Origin
</span><a href="GHC.Types.Basic.html#Generated"><span class="hs-identifier hs-var">Generated</span></a></span><span> </span><span class="annot"><span class="annottext">GenReason
</span><a href="GHC.Types.Basic.html#OtherExpansion"><span class="hs-identifier hs-var">OtherExpansion</span></a></span><span> </span><span class="annot"><span class="annottext">DoPmc
</span><a href="GHC.Types.Basic.html#SkipPmc"><span class="hs-identifier hs-var">SkipPmc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA (Match GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
-&gt; LocatedLW
     [LocatedA (Match GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcRn (LHsExpr GhcRn)]
[LocatedA (Match GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621683034075"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-776"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: XFunBind GhcRn GhcRn
</span><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XFunBind GhcRn GhcRn
FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span>
</span><span id="line-777"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-778"></span><span>
</span><span id="line-779"></span><span class="annot"><a href="GHC.Rename.Utils.html#genHsLet"><span class="hs-identifier hs-type">genHsLet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsLocalBindsLR"><span class="hs-identifier hs-type">HsLocalBindsLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-780"></span><span id="genHsLet"><span class="annot"><span class="annottext">genHsLet :: HsLocalBinds GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
</span><a href="GHC.Rename.Utils.html#genHsLet"><span class="hs-identifier hs-var hs-var">genHsLet</span></a></span></span><span> </span><span id="local-6989586621683034085"><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621683034085"><span class="hs-identifier hs-var">bindings</span></a></span></span><span> </span><span id="local-6989586621683034086"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683034086"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XLet GhcRn -&gt; HsLocalBinds GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
forall p. XLet p -&gt; HsLocalBinds p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLet"><span class="hs-identifier hs-var">HsLet</span></a></span><span> </span><span class="annot"><span class="annottext">XLet GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621683034085"><span class="hs-identifier hs-var">bindings</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683034086"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-781"></span><span>
</span><span id="line-782"></span><span id="local-6989586621683033323"><span class="annot"><a href="GHC.Rename.Utils.html#genHsLamDoExp"><span class="hs-identifier hs-type">genHsLamDoExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#IsPass"><span class="hs-identifier hs-type">IsPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033323"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#XMG"><span class="hs-identifier hs-type">XMG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033323"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033323"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Origin"><span class="hs-identifier hs-type">Origin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-783"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDoFlavour"><span class="hs-identifier hs-type">HsDoFlavour</span></a></span><span>
</span><span id="line-784"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033323"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-785"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033323"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-786"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033323"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-787"></span><span id="genHsLamDoExp"><span class="annot"><span class="annottext">genHsLamDoExp :: forall (p :: Pass).
(IsPass p, XMG (GhcPass p) (LHsExpr (GhcPass p)) ~ Origin) =&gt;
HsDoFlavour
-&gt; [LPat (GhcPass p)] -&gt; LHsExpr (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Rename.Utils.html#genHsLamDoExp"><span class="hs-identifier hs-var hs-var">genHsLamDoExp</span></a></span></span><span> </span><span id="local-6989586621683034101"><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621683034101"><span class="hs-identifier hs-var">doFlav</span></a></span></span><span> </span><span id="local-6989586621683034102"><span class="annot"><span class="annottext">[LPat (GhcPass p)]
</span><a href="#local-6989586621683034102"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621683034103"><span class="annot"><span class="annottext">LHsExpr (GhcPass p)
</span><a href="#local-6989586621683034103"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr (GhcPass p) -&gt; LHsExpr (GhcPass p)
forall (p :: Pass).
IsPass p =&gt;
LHsExpr (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#mkHsPar"><span class="hs-identifier hs-var">mkHsPar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr (GhcPass p) -&gt; LocatedA (HsExpr (GhcPass p))
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr (GhcPass p) -&gt; LocatedA (HsExpr (GhcPass p)))
-&gt; HsExpr (GhcPass p) -&gt; LocatedA (HsExpr (GhcPass p))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XLam (GhcPass p)
-&gt; HsLamVariant
-&gt; MatchGroup (GhcPass p) (LHsExpr (GhcPass p))
-&gt; HsExpr (GhcPass p)
forall p.
XLam p -&gt; HsLamVariant -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLam"><span class="hs-identifier hs-var">HsLam</span></a></span><span> </span><span class="annot"><span class="annottext">XLam (GhcPass p)
EpAnnLam
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="Language.Haskell.Syntax.Expr.html#LamSingle"><span class="hs-identifier hs-var">LamSingle</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup (GhcPass p) (LHsExpr (GhcPass p))
MatchGroup (GhcPass p) (LocatedA (HsExpr (GhcPass p)))
</span><a href="#local-6989586621683034107"><span class="hs-identifier hs-var">matches</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-789"></span><span>    </span><span id="local-6989586621683034107"><span class="annot"><span class="annottext">matches :: MatchGroup (GhcPass p) (LocatedA (HsExpr (GhcPass p)))
</span><a href="#local-6989586621683034107"><span class="hs-identifier hs-var hs-var">matches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin
-&gt; LocatedLW
     [LocatedA (Match (GhcPass p) (LocatedA (HsExpr (GhcPass p))))]
-&gt; MatchGroup (GhcPass p) (LocatedA (HsExpr (GhcPass p)))
forall (p :: Pass) (body :: * -&gt; *).
AnnoBody p body =&gt;
Origin
-&gt; LocatedLW
     [LocatedA (Match (GhcPass p) (LocatedA (body (GhcPass p))))]
-&gt; MatchGroup (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkMatchGroup"><span class="hs-identifier hs-var">mkMatchGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDoFlavour -&gt; Origin
</span><a href="GHC.Types.Basic.html#doExpansionOrigin"><span class="hs-identifier hs-var">doExpansionOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621683034101"><span class="hs-identifier hs-var">doFlav</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-790"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA (Match (GhcPass p) (LocatedA (HsExpr (GhcPass p))))]
-&gt; LocatedLW
     [LocatedA (Match (GhcPass p) (LocatedA (HsExpr (GhcPass p))))]
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">HsMatchContext (LIdP (NoGhcTc (GhcPass p)))
-&gt; [LPat (GhcPass p)]
-&gt; LocatedA (HsExpr (GhcPass p))
-&gt; LMatch (GhcPass p) (LocatedA (HsExpr (GhcPass p)))
forall (p :: Pass) (body :: * -&gt; *).
(Anno (Match (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcSpanAnnA,
 Anno (GRHS (GhcPass p) (LocatedA (body (GhcPass p)))) ~ EpAnnCO) =&gt;
HsMatchContext (LIdP (NoGhcTc (GhcPass p)))
-&gt; [LPat (GhcPass p)]
-&gt; LocatedA (body (GhcPass p))
-&gt; LMatch (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Rename.Utils.html#genSimpleMatch"><span class="hs-identifier hs-var">genSimpleMatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsStmtContext
  (GenLocated
     (Anno (IdGhcP (NoGhcTcPass p))) (IdGhcP (NoGhcTcPass p)))
-&gt; HsMatchContext
     (GenLocated
        (Anno (IdGhcP (NoGhcTcPass p))) (IdGhcP (NoGhcTcPass p)))
forall fn. HsStmtContext fn -&gt; HsMatchContext fn
</span><a href="Language.Haskell.Syntax.Expr.html#StmtCtxt"><span class="hs-identifier hs-var">StmtCtxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDoFlavour
-&gt; HsStmtContext
     (GenLocated
        (Anno (IdGhcP (NoGhcTcPass p))) (IdGhcP (NoGhcTcPass p)))
forall fn. HsDoFlavour -&gt; HsStmtContext fn
</span><a href="Language.Haskell.Syntax.Expr.html#HsDoStmt"><span class="hs-identifier hs-var">HsDoStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621683034101"><span class="hs-identifier hs-var">doFlav</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LPat (GhcPass p)]
[GenLocated SrcSpanAnnA (Pat (GhcPass p))]
</span><a href="#local-6989586621683034111"><span class="hs-identifier hs-var">pats'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr (GhcPass p)
LocatedA (HsExpr (GhcPass p))
</span><a href="#local-6989586621683034103"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-791"></span><span>    </span><span id="local-6989586621683034111"><span class="annot"><span class="annottext">pats' :: [GenLocated SrcSpanAnnA (Pat (GhcPass p))]
</span><a href="#local-6989586621683034111"><span class="hs-identifier hs-var hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat (GhcPass p))
 -&gt; GenLocated SrcSpanAnnA (Pat (GhcPass p)))
-&gt; [GenLocated SrcSpanAnnA (Pat (GhcPass p))]
-&gt; [GenLocated SrcSpanAnnA (Pat (GhcPass p))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PprPrec -&gt; LPat (GhcPass p) -&gt; LPat (GhcPass p)
forall (p :: Pass).
IsPass p =&gt;
PprPrec -&gt; LPat (GhcPass p) -&gt; LPat (GhcPass p)
</span><a href="GHC.Hs.Pat.html#parenthesizePat"><span class="hs-identifier hs-var">parenthesizePat</span></a></span><span> </span><span class="annot"><span class="annottext">PprPrec
</span><a href="GHC.Types.Basic.html#appPrec"><span class="hs-identifier hs-var">appPrec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LPat (GhcPass p)]
[GenLocated SrcSpanAnnA (Pat (GhcPass p))]
</span><a href="#local-6989586621683034102"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-792"></span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span id="local-6989586621683033343"><span id="local-6989586621683033344"><span class="annot"><a href="GHC.Rename.Utils.html#genHsCaseAltDoExp"><span class="hs-identifier hs-type">genHsCaseAltDoExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033343"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033344"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033343"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-795"></span><span>                     </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnCO"><span class="hs-identifier hs-type">EpAnnCO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-796"></span><span>                 </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033343"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033344"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033343"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>                        </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-798"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDoFlavour"><span class="hs-identifier hs-type">HsDoFlavour</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033343"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033344"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033343"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-799"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033343"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033344"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033343"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-800"></span><span id="genHsCaseAltDoExp"><span class="annot"><span class="annottext">genHsCaseAltDoExp :: forall (p :: Pass) (body :: * -&gt; *).
(Anno (GRHS (GhcPass p) (LocatedA (body (GhcPass p)))) ~ EpAnnCO,
 Anno (Match (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcSpanAnnA) =&gt;
HsDoFlavour
-&gt; LPat (GhcPass p)
-&gt; LocatedA (body (GhcPass p))
-&gt; LMatch (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Rename.Utils.html#genHsCaseAltDoExp"><span class="hs-identifier hs-var hs-var">genHsCaseAltDoExp</span></a></span></span><span> </span><span id="local-6989586621683034122"><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621683034122"><span class="hs-identifier hs-var">doFlav</span></a></span></span><span> </span><span id="local-6989586621683034123"><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621683034123"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621683034124"><span class="annot"><span class="annottext">LocatedA (body (GhcPass p))
</span><a href="#local-6989586621683034124"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-801"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsMatchContext (LIdP (NoGhcTc (GhcPass p)))
-&gt; [LPat (GhcPass p)]
-&gt; LocatedA (body (GhcPass p))
-&gt; LMatch (GhcPass p) (LocatedA (body (GhcPass p)))
forall (p :: Pass) (body :: * -&gt; *).
(Anno (Match (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcSpanAnnA,
 Anno (GRHS (GhcPass p) (LocatedA (body (GhcPass p)))) ~ EpAnnCO) =&gt;
HsMatchContext (LIdP (NoGhcTc (GhcPass p)))
-&gt; [LPat (GhcPass p)]
-&gt; LocatedA (body (GhcPass p))
-&gt; LMatch (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Rename.Utils.html#genSimpleMatch"><span class="hs-identifier hs-var">genSimpleMatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsStmtContext
  (GenLocated
     (Anno (IdGhcP (NoGhcTcPass p))) (IdGhcP (NoGhcTcPass p)))
-&gt; HsMatchContext
     (GenLocated
        (Anno (IdGhcP (NoGhcTcPass p))) (IdGhcP (NoGhcTcPass p)))
forall fn. HsStmtContext fn -&gt; HsMatchContext fn
</span><a href="Language.Haskell.Syntax.Expr.html#StmtCtxt"><span class="hs-identifier hs-var">StmtCtxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDoFlavour
-&gt; HsStmtContext
     (GenLocated
        (Anno (IdGhcP (NoGhcTcPass p))) (IdGhcP (NoGhcTcPass p)))
forall fn. HsDoFlavour -&gt; HsStmtContext fn
</span><a href="Language.Haskell.Syntax.Expr.html#HsDoStmt"><span class="hs-identifier hs-var">HsDoStmt</span></a></span><span> </span><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621683034122"><span class="hs-identifier hs-var">doFlav</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LPat (GhcPass p)
</span><a href="#local-6989586621683034123"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">LocatedA (body (GhcPass p))
</span><a href="#local-6989586621683034124"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-802"></span><span>
</span><span id="line-803"></span><span>
</span><span id="line-804"></span><span id="local-6989586621683033334"><span id="local-6989586621683033335"><span class="annot"><a href="GHC.Rename.Utils.html#genSimpleMatch"><span class="hs-identifier hs-type">genSimpleMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033334"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033335"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033334"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>                        </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-806"></span><span>                  </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033334"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033335"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033334"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>                        </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnCO"><span class="hs-identifier hs-type">EpAnnCO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-808"></span><span>              </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMatchContext"><span class="hs-identifier hs-type">HsMatchContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#LIdP"><span class="hs-identifier hs-type">LIdP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#NoGhcTc"><span class="hs-identifier hs-type">NoGhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033334"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033334"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033335"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033334"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033334"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683033335"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683033334"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-811"></span><span id="genSimpleMatch"><span class="annot"><span class="annottext">genSimpleMatch :: forall (p :: Pass) (body :: * -&gt; *).
(Anno (Match (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcSpanAnnA,
 Anno (GRHS (GhcPass p) (LocatedA (body (GhcPass p)))) ~ EpAnnCO) =&gt;
HsMatchContext (LIdP (NoGhcTc (GhcPass p)))
-&gt; [LPat (GhcPass p)]
-&gt; LocatedA (body (GhcPass p))
-&gt; LMatch (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Rename.Utils.html#genSimpleMatch"><span class="hs-identifier hs-var hs-var">genSimpleMatch</span></a></span></span><span> </span><span id="local-6989586621683034137"><span class="annot"><span class="annottext">HsMatchContext (LIdP (NoGhcTc (GhcPass p)))
</span><a href="#local-6989586621683034137"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683034138"><span class="annot"><span class="annottext">[LPat (GhcPass p)]
</span><a href="#local-6989586621683034138"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621683034139"><span class="annot"><span class="annottext">LocatedA (body (GhcPass p))
</span><a href="#local-6989586621683034139"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>
</span><span id="line-812"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Match (GhcPass p) (LocatedA (body (GhcPass p)))
-&gt; GenLocated
     SrcSpanAnnA (Match (GhcPass p) (LocatedA (body (GhcPass p))))
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(Match (GhcPass p) (LocatedA (body (GhcPass p)))
 -&gt; GenLocated
      SrcSpanAnnA (Match (GhcPass p) (LocatedA (body (GhcPass p)))))
-&gt; Match (GhcPass p) (LocatedA (body (GhcPass p)))
-&gt; GenLocated
     SrcSpanAnnA (Match (GhcPass p) (LocatedA (body (GhcPass p))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-813"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_ext :: XCMatch (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="Language.Haskell.Syntax.Expr.html#m_ext"><span class="hs-identifier hs-var">m_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCMatch (GhcPass p) (LocatedA (body (GhcPass p)))
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_ctxt :: HsMatchContext (LIdP (NoGhcTc (GhcPass p)))
</span><a href="Language.Haskell.Syntax.Expr.html#m_ctxt"><span class="hs-identifier hs-var">m_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsMatchContext (LIdP (NoGhcTc (GhcPass p)))
</span><a href="#local-6989586621683034137"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_pats :: XRec (GhcPass p) [LPat (GhcPass p)]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat (GhcPass p))]
-&gt; GenLocated
     EpaLocation [GenLocated SrcSpanAnnA (Pat (GhcPass p))]
forall an a. HasAnnotation an =&gt; a -&gt; GenLocated an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat (GhcPass p)]
[GenLocated SrcSpanAnnA (Pat (GhcPass p))]
</span><a href="#local-6989586621683034138"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-814"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: GRHSs (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; LocatedA (body (GhcPass p))
-&gt; EpAnn GrhsAnn
-&gt; GRHSs (GhcPass p) (LocatedA (body (GhcPass p)))
forall (p :: Pass) (body :: * -&gt; *).
(Anno (GRHS (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ EpAnnCO) =&gt;
SrcSpan
-&gt; LocatedA (body (GhcPass p))
-&gt; EpAnn GrhsAnn
-&gt; GRHSs (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#unguardedGRHSs"><span class="hs-identifier hs-var">unguardedGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#generatedSrcSpan"><span class="hs-identifier hs-var">generatedSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body (GhcPass p))
</span><a href="#local-6989586621683034139"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn GrhsAnn
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-815"></span></pre></body></html>