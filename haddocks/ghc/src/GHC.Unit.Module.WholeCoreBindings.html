<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE NoFieldSelectors #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DuplicateRecordFields #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html"><span class="hs-identifier">GHC.Unit.Module.WholeCoreBindings</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.CLabel.html"><span class="hs-identifier">GHC.Cmm.CLabel</span></a></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html"><span class="hs-identifier">GHC.Driver.DynFlags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier">DynFlags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.DynFlags.html#targetPlatform"><span class="hs-identifier">targetPlatform</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#initSDocContext"><span class="hs-identifier">initSDocContext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../ghc-boot-9.12.2-1a37/src/GHC.ForeignSrcLang.html"><span class="hs-identifier">GHC.ForeignSrcLang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ForeignSrcLang</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html"><span class="hs-identifier">GHC.Iface.Syntax</span></a></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.ForeignStubs.html"><span class="hs-identifier">GHC.Types.ForeignStubs</span></a></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Location.html"><span class="hs-identifier">GHC.Unit.Module.Location</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html"><span class="hs-identifier">GHC.Unit.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier">Module</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html"><span class="hs-identifier">GHC.Utils.Binary</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html"><span class="hs-identifier">GHC.Utils.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier">debugTraceMsg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html"><span class="hs-identifier">GHC.Utils.Logger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier">Logger</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier">panic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier">pprPanic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.TmpFs.html"><span class="hs-identifier">GHC.Utils.TmpFs</span></a></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html"><span class="hs-identifier">Control.DeepSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#NFData"><span class="hs-identifier">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Traversable.html"><span class="hs-identifier">Data.Traversable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">for</span></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Word.html"><span class="hs-identifier">Data.Word</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Word8</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.html"><span class="hs-identifier">System.FilePath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#takeExtension"><span class="hs-identifier">takeExtension</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-comment">{-
Note [Interface Files with Core Definitions]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

A interface file can optionally contain the definitions of all core bindings, this
is enabled by the flag `-fwrite-if-simplified-core`.
This provides everything needed in addition to the normal ModIface and ModDetails
to restart compilation after typechecking to generate bytecode. The `wcb_bindings` field
is stored in the normal interface file and the other fields populated whilst loading
the interface file.

The lifecycle of a WholeCoreBindings typically proceeds as follows:

1. The ModIface which contains mi_extra_decls is loaded from disk. A linkable is
   created (which is headed by the `CoreBindings` constructor). This is an unhydrated set of bindings which
   is currently unsuitable for linking, but at the point it is loaded, the ModIface
   hasn't been hydrated yet (See Note [Hydrating Modules]) either so the CoreBindings constructor allows the delaying of converting
   the WholeCoreBindings into a proper Linkable (if we ever do that). The CoreBindings constructor also
   allows us to convert the WholeCoreBindings into multiple different linkables if we so desired.

2. `initWholeCoreBindings` turns a WholeCoreBindings into a proper BCOs linkable. This step combines together
   all the necessary information from a ModIface, ModDetails and WholeCoreBindings in order to
   create the linkable. The linkable created is a &quot;LazyBCOs&quot; linkable, which
   was introduced just for initWholeCoreBindings, so that the bytecode can be generated lazily.
   Using the `BCOs` constructor directly here leads to the bytecode being forced
   too eagerly.

3. Then when bytecode is needed, the LazyBCOs value is inspected and unpacked and
   the linkable is used as before.

The flag `-fwrite-if-simplified-core` determines whether the extra information is written
to an interface file. The program which is written is the core bindings of the module
after whatever simplification the user requested has been performed. So the simplified core bindings
of the interface file agree with the optimisation level as reported by the interface
file.

The lifecycle differs beyond laziness depending on the provenance of a module.
In all cases, the main consumer for interface bytecode is 'get_link_deps', which
traverses a splice's or GHCi expression's dependencies and collects the needed
build artifacts, which can be objects or bytecode, depending on the build
settings.

1. In make mode, all eligible modules are part of the dependency graph.
   Their interfaces are loaded unconditionally and in dependency order by the
   compilation manager, and each module's bytecode is prepared before its
   dependents are compiled, in one of two ways:

   - If the interface file for a module is missing or out of sync with its
     source, it is recompiled and bytecode is generated directly and
     immediately, not involving 'WholeCoreBindings' (in 'runHscBackendPhase').

   - If the interface file is up to date, no compilation is performed, and a
     lazy thunk generating bytecode from interface Core bindings is created in
     'compileOne'', which will only be compiled if a downstream module contains
     a splice that depends on it, as described above.

   In both cases, the bytecode 'Linkable' is stored in a 'HomeModLinkable' in
   the Home Unit Graph, lazy or not.

2. In oneshot mode, which compiles individual modules without a shared home unit
   graph, a previously compiled module is not reprocessed as described for make
   mode above.
   When 'get_link_deps' encounters a dependency on a local module, it requests
   its bytecode from the External Package State, who loads the interface
   on-demand.

   Since the EPS stores interfaces for all package dependencies in addition to
   local modules in oneshot mode, it has a substantial memory footprint.
   We try to curtail that by extracting important data into specialized fields
   in the EPS, and retaining only a few fields of 'ModIface' by overwriting the
   others with bottom values.

   In order to avoid keeping around all of the interface's components needed for
   compiling bytecode, we instead store an IO action in 'eps_iface_bytecode'.
   When 'get_link_deps' evaluates this action, the result is not retained in the
   EPS, but stored in 'LoaderState', where it may eventually get evicted to free
   up the memory.
   This IO action retains the dehydrated Core bindings from the interface in its
   closure.
   Like the bytecode 'Linkable' stored in 'LoaderState', this is preferable to
   storing the intermediate representation as rehydrated Core bindings, since
   the latter have a significantly greater memory footprint.

Note [Size of Interface Files with Core Definitions]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

How much overhead does `-fwrite-if-simplified-core` add to a typical interface file?
As an experiment I compiled the `Cabal` library and `ghc` library (Aug 22) with

| Project | .hi  | .hi (fat) | .o   |
| --------| ---- | --------- | --   |
| ghc     | 32M  | 68M       | 127M |
| Cabal   | 3.2M | 9.8M      | 14M  |

So the interface files gained in size but the end result was still smaller than
the object files.

-}</span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-keyword">data</span><span> </span><span id="WholeCoreBindings"><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#WholeCoreBindings"><span class="hs-identifier hs-var">WholeCoreBindings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="WholeCoreBindings"><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#WholeCoreBindings"><span class="hs-identifier hs-var">WholeCoreBindings</span></a></span></span><span>
</span><span id="line-129"></span><span>            </span><span class="hs-special">{</span><span> </span><span id="wcb_bindings"><span class="annot"><span class="annottext">WholeCoreBindings -&gt; [IfaceBindingX IfaceMaybeRhs IfaceTopBndrInfo]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#wcb_bindings"><span class="hs-identifier hs-var hs-var">wcb_bindings</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceBindingX"><span class="hs-identifier hs-type">IfaceBindingX</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceMaybeRhs"><span class="hs-identifier hs-type">IfaceMaybeRhs</span></a></span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceTopBndrInfo"><span class="hs-identifier hs-type">IfaceTopBndrInfo</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-comment">-- ^ serialised tidied core bindings.</span></span><span>
</span><span id="line-130"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="wcb_module"><span class="annot"><span class="annottext">WholeCoreBindings -&gt; Module
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#wcb_module"><span class="hs-identifier hs-var hs-var">wcb_module</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The module which the bindings are for</span></span><span>
</span><span id="line-131"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="wcb_mod_location"><span class="annot"><span class="annottext">WholeCoreBindings -&gt; ModLocation
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#wcb_mod_location"><span class="hs-identifier hs-var hs-var">wcb_mod_location</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Location.html#ModLocation"><span class="hs-identifier hs-type">ModLocation</span></a></span><span> </span><span class="hs-comment">-- ^ The location where the sources reside.</span><span>
</span><span id="line-132"></span><span>              </span><span class="hs-comment">-- | Stubs for foreign declarations and files added via</span><span>
</span><span id="line-133"></span><span>              </span><span class="hs-comment">-- 'GHC.Internal.TH.Syntax.addForeignFilePath'.</span><span>
</span><span id="line-134"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="wcb_foreign"><span class="annot"><span class="annottext">WholeCoreBindings -&gt; IfaceForeign
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#wcb_foreign"><span class="hs-identifier hs-var hs-var">wcb_foreign</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span>
</span><span id="line-135"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">{-
Note [Foreign stubs and TH bytecode linking]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Foreign declarations may introduce additional build products called &quot;stubs&quot; that
contain wrappers for the exposed functions.
For example, consider a foreign import of a C function named @main_loop@ from
the file @bindings.h@ in the module @CLibrary@:

@
foreign import capi &quot;bindings.h main_loop&quot; mainLoop :: IO Int
@

GHC will generate a snippet of C code containing a wrapper:

@
#include &quot;bindings.h&quot;
HsInt ghczuwrapperZC0ZCmainZCCLibraryZCmainzuloop(void) {return main_loop();}
@

Wrappers like these are generated as 'ForeignStubs' by the desugarer in
'dsForeign' and stored in the various @*Guts@ types; until they are compiled to
temporary object files in 'runHscBackendPhase' during code generation and
ultimately merged into the final object file for the module, @CLibrary.o@.

This creates some problems with @-fprefer-byte-code@, which allows splices to
execute bytecode instead of native code for dependencies that provide it.
Usually, when some TH code depends on @CLibrary@, the linker would look for
@CLibrary.o@ and load that before executing the splice, but with this flag, it
will first attempt to load bytecode from @CLibrary.hi@ and compile it in-memory.

Problem 1:

Code for splices is loaded from interfaces in the shape of Core bindings
(see 'WholeCoreBindings'), rather than from object files.
Those Core bindings are intermediate build products that do not contain the
module's stubs, since those are separated from the Haskell code before Core is
generated and only compiled and linked into the final object when native code is
generated.

Therefore, stubs have to be stored separately in interface files.
Unfortunately, the type 'ForeignStubs' contains 'CLabel', which is a huge type
with several 'Unique's used mainly by C--.
Luckily, the only constructor used for foreign stubs is 'ModuleLabel', which
contains the name of a foreign declaration's initializer, if it has one.
So we convert a 'CLabel' to 'CStubLabel' in 'encodeIfaceForeign' and store only
the simplified data.

Problem 2:

Given module B, which contains a splice that executes code from module A, both
in the home package, consider these different circumstances:

1. In make mode, both modules are recompiled
2. In make mode, only B is recompiled
3. In oneshot mode, B is compiled

In case 1, 'runHscBackendPhase' directly generates bytecode from the 'CgGuts'
that the main pipeline produced and stores it in the 'HomeModLinkable' that is
one of its build products.
The stubs are merged into a single object and added to the 'HomeModLinkable' in
'hscGenBackendPipeline'.

In case 2, 'hscRecompStatus' short-circuits the pipeline while checking A, since
the module is up to date.
Nevertheless, it calls 'checkByteCode', which extracts Core bindings from A's
interface and adds them to the 'HomeModLinkable'.
No stubs are generated in this case, since the desugarer wasn't run!

In both of these cases, 'compileOne'' proceeds to call 'initWholeCoreBindings',
applied to the 'HomeModLinkable', to compile Core bindings (lazily) to bytecode,
which is then written back to the 'HomeModLinkable'.
If the 'HomeModLinkable' already contains bytecode (case 1), this is a no-op.
Otherwise, the stub objects from the interface are compiled to objects in
'generateByteCode' and added to the 'HomeModLinkable' as well.

Case 3 is not implemented yet (!13042).

Problem 3:

In all three cases, the final step before splice execution is linking.

The function 'getLinkDeps' is responsible for assembling all of a splice's
dependencies, looking up imported modules in the HPT and EPS, collecting all
'HomeModLinkable's and object files that it can find.

However, since splices are executed in the interpreter, the 'Way' of the current
build may differ from the interpreter's.
For example, the current GHC invocation might be building a static binary, but
the internal interpreter requires dynamic linking; or profiling might be
enabled.
To adapt to the interpreter's 'Way', 'getLinkDeps' substitutes all object files'
extensions with that corresponding to that 'Way' &#8211; e.g. changing @.o@ to
@.dyn_o@, which requires dependencies to be built with @-dynamic[-too]@, which
in turn is enforced after downsweep in 'GHC.Driver.Make.enableCodeGenWhen'.

This doesn't work for stub objects, though &#8211; they are compiled to temporary
files with mismatching names, so simply switching out the suffix would refer to
a nonexisting file.
Even if that wasn't an issue, they are compiled for the session's 'Way', not its
associated module's, so the dynamic variant wouldn't be available when building
only static outputs.

To mitigate this, we instead build foreign objects specially for the
interpreter, updating the build flags in 'compile_for_interpreter' to use the
interpreter's way.

Problem 4:

Foreign code may have dependencies on Haskell code.

Both foreign exports and @StaticPointers@ produce stubs that contain @extern@
declarations of values referring to STG closures.
When those stub objects are loaded, the undefined symbols need to be provided to
the linker.

I have no insight into how this works, and whether we could provide the memory
address of a BCO as a ccall symbol while linking, so it's unclear at the moment
what to do about this.

In addition to that, those objects would also have to be loaded _after_
bytecode, and therefore 'DotO' would have to be marked additionally to separate
them from those that are loaded before.
If mutual dependencies between BCOs and foreign code are possible, this will be
much more diffcult though.

Problem 5:

TH allows splices to add arbitrary files as additional linker inputs.

Using the method `qAddForeignFilePath`, a foreign source file or a precompiled
object file can be added to the current modules dependencies.
These files will be processed by the pipeline and linked into the final object.

Since the files may be temporarily created from a string, we have to read their
contents in 'encodeIfaceForeign' and store them in the interface as well, and
write them to temporary files when loading bytecode in 'decodeIfaceForeign'.
-}</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="annot"><span class="hs-comment">-- | Wrapper for avoiding a dependency on 'Binary' and 'NFData' in 'CLabel'.</span></span><span>
</span><span id="line-277"></span><span class="hs-keyword">newtype</span><span> </span><span id="IfaceCLabel"><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-var">IfaceCLabel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IfaceCLabel"><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-var">IfaceCLabel</span></a></span></span><span> </span><span class="annot"><a href="GHC.Cmm.CLabel.html#CStubLabel"><span class="hs-identifier hs-type">CStubLabel</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682751852"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-type">IfaceCLabel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-280"></span><span>  </span><span id="local-6989586621682751869"><span class="annot"><span class="annottext">get :: ReadBinHandle -&gt; IO IfaceCLabel
</span><a href="#local-6989586621682751869"><span class="hs-identifier hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621682751871"><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682751871"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-281"></span><span>    </span><span id="local-6989586621682751872"><span class="annot"><a href="#local-6989586621682751872"><span class="hs-identifier hs-var">csl_is_initializer</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReadBinHandle -&gt; IO Bool
forall a. Binary a =&gt; ReadBinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682751871"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-282"></span><span>    </span><span id="local-6989586621682751873"><span class="annot"><a href="#local-6989586621682751873"><span class="hs-identifier hs-var">csl_module</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-type">get</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682751871"><span class="hs-identifier hs-type">bh</span></a></span><span>
</span><span id="line-283"></span><span>    </span><span id="local-6989586621682751874"><span class="annot"><a href="#local-6989586621682751874"><span class="hs-identifier hs-var">csl_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-type">get</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682751871"><span class="hs-identifier hs-type">bh</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-type">IfaceCLabel</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.CLabel.html#CStubLabel"><span class="hs-identifier hs-type">CStubLabel</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="#local-6989586621682751872"><span class="hs-identifier hs-type hs-var">csl_is_initializer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682751873"><span class="hs-identifier hs-type hs-var">csl_module</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682751874"><span class="hs-identifier hs-type hs-var">csl_name</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span>  </span><span id="local-6989586621682751885"><span class="annot"><span class="annottext">put_ :: WriteBinHandle -&gt; IfaceCLabel -&gt; IO ()
</span><a href="#local-6989586621682751885"><span class="hs-identifier hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621682751887"><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751887"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-type">IfaceCLabel</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.CLabel.html#CStubLabel"><span class="hs-identifier hs-type">CStubLabel</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682751888"><span class="annot"><span class="annottext">Bool
csl_is_initializer :: CStubLabel -&gt; Bool
csl_is_initializer :: Bool
</span><a href="GHC.Cmm.CLabel.html#csl_is_initializer"><span class="hs-identifier hs-var hs-var">csl_is_initializer</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682751889"><span class="annot"><span class="annottext">Module
csl_module :: CStubLabel -&gt; Module
csl_module :: Module
</span><a href="GHC.Cmm.CLabel.html#csl_module"><span class="hs-identifier hs-var hs-var">csl_module</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682751890"><span class="annot"><span class="annottext">FastString
csl_name :: CStubLabel -&gt; FastString
csl_name :: FastString
</span><a href="GHC.Cmm.CLabel.html#csl_name"><span class="hs-identifier hs-var hs-var">csl_name</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-287"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; Bool -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751887"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682751888"><span class="hs-identifier hs-var">csl_is_initializer</span></a></span><span>
</span><span id="line-288"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; Module -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751887"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682751889"><span class="hs-identifier hs-var">csl_module</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; FastString -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751887"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682751890"><span class="hs-identifier hs-var">csl_name</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-type">IfaceCLabel</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-292"></span><span>  </span><span id="local-6989586621682751900"><span class="annot"><span class="annottext">rnf :: IfaceCLabel -&gt; ()
</span><a href="#local-6989586621682751900"><span class="hs-identifier hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-type">IfaceCLabel</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.CLabel.html#CStubLabel"><span class="hs-identifier hs-type">CStubLabel</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682751902"><span class="annot"><span class="annottext">Bool
csl_is_initializer :: CStubLabel -&gt; Bool
csl_is_initializer :: Bool
</span><a href="GHC.Cmm.CLabel.html#csl_is_initializer"><span class="hs-identifier hs-var hs-var">csl_is_initializer</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682751903"><span class="annot"><span class="annottext">Module
csl_module :: CStubLabel -&gt; Module
csl_module :: Module
</span><a href="GHC.Cmm.CLabel.html#csl_module"><span class="hs-identifier hs-var hs-var">csl_module</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682751904"><span class="annot"><span class="annottext">FastString
csl_name :: CStubLabel -&gt; FastString
csl_name :: FastString
</span><a href="GHC.Cmm.CLabel.html#csl_name"><span class="hs-identifier hs-var hs-var">csl_name</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682751902"><span class="hs-identifier hs-var">csl_is_initializer</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Module -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682751903"><span class="hs-identifier hs-var">csl_module</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682751904"><span class="hs-identifier hs-var">csl_name</span></a></span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-type">IfaceCLabel</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-296"></span><span>  </span><span id="local-6989586621682751910"><span class="annot"><span class="annottext">ppr :: IfaceCLabel -&gt; SDoc
</span><a href="#local-6989586621682751910"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-type">IfaceCLabel</span></a></span><span> </span><span id="local-6989586621682751912"><span class="annot"><span class="annottext">CStubLabel
</span><a href="#local-6989586621682751912"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CStubLabel -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CStubLabel
</span><a href="#local-6989586621682751912"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span class="hs-comment">-- | Simplified encoding of 'GHC.Types.ForeignStubs.ForeignStubs' for interface</span><span>
</span><span id="line-299"></span><span class="hs-comment">-- serialization.</span><span>
</span><span id="line-300"></span><span class="hs-comment">--</span><span>
</span><span id="line-301"></span><span class="hs-comment">-- See Note [Foreign stubs and TH bytecode linking]</span><span>
</span><span id="line-302"></span><span class="hs-keyword">data</span><span> </span><span id="IfaceCStubs"><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-var">IfaceCStubs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-303"></span><span>  </span><span id="IfaceCStubs"><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-var">IfaceCStubs</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-304"></span><span>    </span><span id="header"><span class="annot"><span class="annottext">IfaceCStubs -&gt; String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#header"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span>
</span><span id="line-305"></span><span>    </span><span id="source"><span class="annot"><span class="annottext">IfaceCStubs -&gt; String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var hs-var">source</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span>
</span><span id="line-306"></span><span>    </span><span id="initializers"><span class="annot"><span class="annottext">IfaceCStubs -&gt; [IfaceCLabel]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#initializers"><span class="hs-identifier hs-var hs-var">initializers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-type">IfaceCLabel</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-307"></span><span>    </span><span id="finalizers"><span class="annot"><span class="annottext">IfaceCStubs -&gt; [IfaceCLabel]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#finalizers"><span class="hs-identifier hs-var hs-var">finalizers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-type">IfaceCLabel</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-type">IfaceCStubs</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-311"></span><span>  </span><span id="local-6989586621682751937"><span class="annot"><span class="annottext">ppr :: IfaceCStubs -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-type">IfaceCStubs</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682751938"><span class="annot"><span class="annottext">String
header :: IfaceCStubs -&gt; String
header :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#header"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682751939"><span class="annot"><span class="annottext">String
source :: IfaceCStubs -&gt; String
source :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var hs-var">source</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682751940"><span class="annot"><span class="annottext">[IfaceCLabel]
initializers :: IfaceCStubs -&gt; [IfaceCLabel]
initializers :: [IfaceCLabel]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#initializers"><span class="hs-identifier hs-var hs-var">initializers</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682751941"><span class="annot"><span class="annottext">[IfaceCLabel]
finalizers :: IfaceCStubs -&gt; [IfaceCLabel]
finalizers :: [IfaceCLabel]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#finalizers"><span class="hs-identifier hs-var hs-var">finalizers</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-313"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;header:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SDoc) -&gt; [String] -&gt; [SDoc]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
</span><span class="hs-identifier hs-var">lines</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682751938"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-314"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;source:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SDoc) -&gt; [String] -&gt; [SDoc]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
</span><span class="hs-identifier hs-var">lines</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682751939"><span class="hs-identifier hs-var">source</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-315"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;initializers:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IfaceCLabel] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCLabel]
</span><a href="#local-6989586621682751940"><span class="hs-identifier hs-var">initializers</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-316"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;finalizers:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IfaceCLabel] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCLabel]
</span><a href="#local-6989586621682751941"><span class="hs-identifier hs-var">finalizers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="annot"><span class="hs-comment">-- | 'Binary' 'put_' for 'ForeignSrcLang'.</span></span><span>
</span><span id="line-320"></span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#binary_put_ForeignSrcLang"><span class="hs-identifier hs-type">binary_put_ForeignSrcLang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#WriteBinHandle"><span class="hs-identifier hs-type">WriteBinHandle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignSrcLang</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span id="binary_put_ForeignSrcLang"><span class="annot"><span class="annottext">binary_put_ForeignSrcLang :: WriteBinHandle -&gt; ForeignSrcLang -&gt; IO ()
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#binary_put_ForeignSrcLang"><span class="hs-identifier hs-var hs-var">binary_put_ForeignSrcLang</span></a></span></span><span> </span><span id="local-6989586621682751948"><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751948"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621682751949"><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="#local-6989586621682751949"><span class="hs-identifier hs-var">lang</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-322"></span><span>  </span><span class="annot"><span class="annottext">forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751948"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; IO ()) -&gt; Word8 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="#local-6989586621682751949"><span class="hs-identifier hs-var">lang</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-323"></span><span>    </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangC</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-324"></span><span>    </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangCxx</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-325"></span><span>    </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangObjc</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span>
</span><span id="line-326"></span><span>    </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangObjcxx</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangAsm</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">4</span></span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangJs</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">5</span></span><span>
</span><span id="line-329"></span><span>    </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">RawObject</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">6</span></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="annot"><span class="hs-comment">-- | 'Binary' 'get' for 'ForeignSrcLang'.</span></span><span>
</span><span id="line-332"></span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#binary_get_ForeignSrcLang"><span class="hs-identifier hs-type">binary_get_ForeignSrcLang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#ReadBinHandle"><span class="hs-identifier hs-type">ReadBinHandle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignSrcLang</span></span><span>
</span><span id="line-333"></span><span id="binary_get_ForeignSrcLang"><span class="annot"><span class="annottext">binary_get_ForeignSrcLang :: ReadBinHandle -&gt; IO ForeignSrcLang
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#binary_get_ForeignSrcLang"><span class="hs-identifier hs-var hs-var">binary_get_ForeignSrcLang</span></a></span></span><span> </span><span id="local-6989586621682751958"><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682751958"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-334"></span><span>  </span><span id="local-6989586621682751959"><span class="annot"><a href="#local-6989586621682751959"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReadBinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682751958"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-335"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682751959"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-336"></span><span>    </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangC</span></span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangCxx</span></span><span>
</span><span id="line-338"></span><span>    </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangObjc</span></span><span>
</span><span id="line-339"></span><span>    </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangObjcxx</span></span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">4</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangAsm</span></span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">5</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">LangJs</span></span><span>
</span><span id="line-342"></span><span>    </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">6</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><span class="hs-identifier hs-var">RawObject</span></span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ForeignSrcLang
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;invalid Binary value for ForeignSrcLang&quot;</span></span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682751963"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-type">IfaceCStubs</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-346"></span><span>  </span><span id="local-6989586621682751980"><span class="annot"><span class="annottext">get :: ReadBinHandle -&gt; IO IfaceCStubs
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621682751981"><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682751981"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-347"></span><span>    </span><span id="local-6989586621682751982"><span class="annot"><a href="#local-6989586621682751982"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReadBinHandle -&gt; IO String
forall a. Binary a =&gt; ReadBinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682751981"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-348"></span><span>    </span><span id="local-6989586621682751983"><span class="annot"><a href="#local-6989586621682751983"><span class="hs-identifier hs-var">source</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-type">get</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682751981"><span class="hs-identifier hs-type">bh</span></a></span><span>
</span><span id="line-349"></span><span>    </span><span id="local-6989586621682751984"><span class="annot"><a href="#local-6989586621682751984"><span class="hs-identifier hs-var">initializers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-type">get</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682751981"><span class="hs-identifier hs-type">bh</span></a></span><span>
</span><span id="line-350"></span><span>    </span><span id="local-6989586621682751985"><span class="annot"><a href="#local-6989586621682751985"><span class="hs-identifier hs-var">finalizers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-type">get</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682751981"><span class="hs-identifier hs-type">bh</span></a></span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-type">IfaceCStubs</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#header"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-type hs-type hs-type hs-type">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span>  </span><span id="local-6989586621682751995"><span class="annot"><span class="annottext">put_ :: WriteBinHandle -&gt; IfaceCStubs -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621682751996"><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751996"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-type">IfaceCStubs</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682751997"><span id="local-6989586621682751998"><span id="local-6989586621682751999"><span id="local-6989586621682752000"><span class="annot"><span class="annottext">String
[IfaceCLabel]
header :: IfaceCStubs -&gt; String
source :: IfaceCStubs -&gt; String
initializers :: IfaceCStubs -&gt; [IfaceCLabel]
finalizers :: IfaceCStubs -&gt; [IfaceCLabel]
header :: String
source :: String
initializers :: [IfaceCLabel]
finalizers :: [IfaceCLabel]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#header"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-354"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; String -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751996"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682751997"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-355"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; String -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751996"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682751998"><span class="hs-identifier hs-var">source</span></a></span><span>
</span><span id="line-356"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; [IfaceCLabel] -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751996"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCLabel]
</span><a href="#local-6989586621682751999"><span class="hs-identifier hs-var">initializers</span></a></span><span>
</span><span id="line-357"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; [IfaceCLabel] -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682751996"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCLabel]
</span><a href="#local-6989586621682752000"><span class="hs-identifier hs-var">finalizers</span></a></span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-type">IfaceCStubs</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-360"></span><span>  </span><span id="local-6989586621682752011"><span class="annot"><span class="annottext">rnf :: IfaceCStubs -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-type">IfaceCStubs</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682752012"><span id="local-6989586621682752013"><span id="local-6989586621682752014"><span id="local-6989586621682752015"><span class="annot"><span class="annottext">String
[IfaceCLabel]
header :: IfaceCStubs -&gt; String
source :: IfaceCStubs -&gt; String
initializers :: IfaceCStubs -&gt; [IfaceCLabel]
finalizers :: IfaceCStubs -&gt; [IfaceCLabel]
header :: String
source :: String
initializers :: [IfaceCLabel]
finalizers :: [IfaceCLabel]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#header"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752012"><span class="hs-identifier hs-var">header</span></a></span><span>
</span><span id="line-362"></span><span>    </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span>
</span><span id="line-363"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752013"><span class="hs-identifier hs-var">source</span></a></span><span>
</span><span id="line-364"></span><span>    </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span>
</span><span id="line-365"></span><span>    </span><span class="annot"><span class="annottext">[IfaceCLabel] -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCLabel]
</span><a href="#local-6989586621682752014"><span class="hs-identifier hs-var">initializers</span></a></span><span>
</span><span id="line-366"></span><span>    </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span>
</span><span id="line-367"></span><span>    </span><span class="annot"><span class="annottext">[IfaceCLabel] -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCLabel]
</span><a href="#local-6989586621682752015"><span class="hs-identifier hs-var">finalizers</span></a></span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="hs-comment">-- | A source file added from Template Haskell using 'qAddForeignFilePath', for</span><span>
</span><span id="line-370"></span><span class="hs-comment">-- storage in interfaces.</span><span>
</span><span id="line-371"></span><span class="hs-comment">--</span><span>
</span><span id="line-372"></span><span class="hs-comment">-- See Note [Foreign stubs and TH bytecode linking]</span><span>
</span><span id="line-373"></span><span class="hs-keyword">data</span><span> </span><span id="IfaceForeignFile"><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-var">IfaceForeignFile</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-374"></span><span>  </span><span id="IfaceForeignFile"><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-var">IfaceForeignFile</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-375"></span><span>    </span><span class="annot"><span class="hs-comment">-- | The language is specified by the user.</span></span><span>
</span><span id="line-376"></span><span>    </span><span id="lang"><span class="annot"><span class="annottext">IfaceForeignFile -&gt; ForeignSrcLang
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#lang"><span class="hs-identifier hs-var hs-var">lang</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignSrcLang</span></span><span class="hs-special">,</span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span>    </span><span class="hs-comment">-- | The contents of the file, which will be written to a temporary file</span><span>
</span><span id="line-379"></span><span>    </span><span class="hs-comment">-- when loaded from an interface.</span><span>
</span><span id="line-380"></span><span>    </span><span id="source"><span class="annot"><span class="annottext">IfaceForeignFile -&gt; String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var hs-var">source</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-comment">-- | The extension used by the user is preserved, to avoid confusing</span><span>
</span><span id="line-383"></span><span>    </span><span class="hs-comment">-- external tools with an unexpected @.c@ file or similar.</span><span>
</span><span id="line-384"></span><span>    </span><span id="extension"><span class="annot"><span class="annottext">IfaceForeignFile -&gt; String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#extension"><span class="hs-identifier hs-var hs-var">extension</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-type">IfaceForeignFile</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-388"></span><span>  </span><span id="local-6989586621682752031"><span class="annot"><span class="annottext">ppr :: IfaceForeignFile -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-type">IfaceForeignFile</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682752032"><span class="annot"><span class="annottext">ForeignSrcLang
lang :: IfaceForeignFile -&gt; ForeignSrcLang
lang :: ForeignSrcLang
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#lang"><span class="hs-identifier hs-var hs-var">lang</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752033"><span class="annot"><span class="annottext">String
source :: IfaceForeignFile -&gt; String
source :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var hs-var">source</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-389"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignSrcLang -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="#local-6989586621682752032"><span class="hs-identifier hs-var">lang</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SDoc) -&gt; [String] -&gt; [SDoc]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
</span><span class="hs-identifier hs-var">lines</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752033"><span class="hs-identifier hs-var">source</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682752039"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-type">IfaceForeignFile</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-392"></span><span>  </span><span id="local-6989586621682752050"><span class="annot"><span class="annottext">get :: ReadBinHandle -&gt; IO IfaceForeignFile
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621682752051"><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682752051"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-393"></span><span>    </span><span id="local-6989586621682752052"><span class="annot"><a href="#local-6989586621682752052"><span class="hs-identifier hs-var">lang</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReadBinHandle -&gt; IO ForeignSrcLang
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#binary_get_ForeignSrcLang"><span class="hs-identifier hs-var">binary_get_ForeignSrcLang</span></a></span><span> </span><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682752051"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-394"></span><span>    </span><span id="local-6989586621682752053"><span class="annot"><a href="#local-6989586621682752053"><span class="hs-identifier hs-var">source</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-type">get</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682752051"><span class="hs-identifier hs-type">bh</span></a></span><span>
</span><span id="line-395"></span><span>    </span><span id="local-6989586621682752054"><span class="annot"><a href="#local-6989586621682752054"><span class="hs-identifier hs-var">extension</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-type">get</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682752051"><span class="hs-identifier hs-type">bh</span></a></span><span>
</span><span id="line-396"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-type">IfaceForeignFile</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#lang"><span class="hs-identifier hs-var hs-type">lang</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var hs-type">source</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#extension"><span class="hs-identifier hs-var hs-type">extension</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span>  </span><span id="local-6989586621682752060"><span class="annot"><span class="annottext">put_ :: WriteBinHandle -&gt; IfaceForeignFile -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621682752061"><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682752061"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-type">IfaceForeignFile</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682752062"><span class="annot"><span class="annottext">ForeignSrcLang
lang :: IfaceForeignFile -&gt; ForeignSrcLang
lang :: ForeignSrcLang
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#lang"><span class="hs-identifier hs-var hs-var">lang</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752063"><span class="annot"><span class="annottext">String
source :: IfaceForeignFile -&gt; String
source :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var hs-var">source</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752064"><span class="annot"><span class="annottext">String
extension :: IfaceForeignFile -&gt; String
extension :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#extension"><span class="hs-identifier hs-var hs-var">extension</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-399"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; ForeignSrcLang -&gt; IO ()
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#binary_put_ForeignSrcLang"><span class="hs-identifier hs-var">binary_put_ForeignSrcLang</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682752061"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="#local-6989586621682752062"><span class="hs-identifier hs-var">lang</span></a></span><span>
</span><span id="line-400"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; String -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682752061"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752063"><span class="hs-identifier hs-var">source</span></a></span><span>
</span><span id="line-401"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; String -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682752061"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752064"><span class="hs-identifier hs-var">extension</span></a></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-type">IfaceForeignFile</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-404"></span><span>  </span><span id="local-6989586621682752070"><span class="annot"><span class="annottext">rnf :: IfaceForeignFile -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-type">IfaceForeignFile</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682752071"><span class="annot"><span class="annottext">ForeignSrcLang
lang :: IfaceForeignFile -&gt; ForeignSrcLang
lang :: ForeignSrcLang
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#lang"><span class="hs-identifier hs-var hs-var">lang</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752072"><span class="annot"><span class="annottext">String
source :: IfaceForeignFile -&gt; String
source :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var hs-var">source</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752073"><span class="annot"><span class="annottext">String
extension :: IfaceForeignFile -&gt; String
extension :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#extension"><span class="hs-identifier hs-var hs-var">extension</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-405"></span><span>    </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="#local-6989586621682752071"><span class="hs-identifier hs-var">lang</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752072"><span class="hs-identifier hs-var">source</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752073"><span class="hs-identifier hs-var">extension</span></a></span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="hs-keyword">data</span><span> </span><span id="IfaceForeign"><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-var">IfaceForeign</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-408"></span><span>  </span><span id="IfaceForeign"><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-var">IfaceForeign</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-409"></span><span>    </span><span id="stubs"><span class="annot"><span class="annottext">IfaceForeign -&gt; Maybe IfaceCStubs
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#stubs"><span class="hs-identifier hs-var hs-var">stubs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-type">IfaceCStubs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-410"></span><span>    </span><span id="files"><span class="annot"><span class="annottext">IfaceForeign -&gt; [IfaceForeignFile]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#files"><span class="hs-identifier hs-var hs-var">files</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-type">IfaceForeignFile</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-414"></span><span>  </span><span id="local-6989586621682752085"><span class="annot"><span class="annottext">ppr :: IfaceForeign -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682752086"><span class="annot"><span class="annottext">Maybe IfaceCStubs
stubs :: IfaceForeign -&gt; Maybe IfaceCStubs
stubs :: Maybe IfaceCStubs
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#stubs"><span class="hs-identifier hs-var hs-var">stubs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752087"><span class="annot"><span class="annottext">[IfaceForeignFile]
files :: IfaceForeign -&gt; [IfaceForeignFile]
files :: [IfaceForeignFile]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#files"><span class="hs-identifier hs-var hs-var">files</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-415"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;stubs:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; (IfaceCStubs -&gt; SDoc) -&gt; Maybe IfaceCStubs -&gt; SDoc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;empty&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IfaceCStubs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IfaceCStubs
</span><a href="#local-6989586621682752086"><span class="hs-identifier hs-var">stubs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-416"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceForeignFile -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(IfaceForeignFile -&gt; SDoc) -&gt; [IfaceForeignFile] -&gt; [SDoc]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[IfaceForeignFile]
</span><a href="#local-6989586621682752087"><span class="hs-identifier hs-var">files</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#emptyIfaceForeign"><span class="hs-identifier hs-type">emptyIfaceForeign</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span>
</span><span id="line-419"></span><span id="emptyIfaceForeign"><span class="annot"><span class="annottext">emptyIfaceForeign :: IfaceForeign
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#emptyIfaceForeign"><span class="hs-identifier hs-var hs-var">emptyIfaceForeign</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">stubs :: Maybe IfaceCStubs
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#stubs"><span class="hs-identifier hs-var">stubs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe IfaceCStubs
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">files :: [IfaceForeignFile]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#files"><span class="hs-identifier hs-var">files</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">}</span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="hs-comment">-- | Convert foreign stubs and foreign files to a format suitable for writing to</span><span>
</span><span id="line-422"></span><span class="hs-comment">-- interfaces.</span><span>
</span><span id="line-423"></span><span class="hs-comment">--</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- See Note [Foreign stubs and TH bytecode linking]</span><span>
</span><span id="line-425"></span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#encodeIfaceForeign"><span class="hs-identifier hs-type">encodeIfaceForeign</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-426"></span><span>  </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-427"></span><span>  </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-428"></span><span>  </span><span class="annot"><a href="GHC.Types.ForeignStubs.html#ForeignStubs"><span class="hs-identifier hs-type">ForeignStubs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignSrcLang</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-430"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span>
</span><span id="line-431"></span><span id="encodeIfaceForeign"><span class="annot"><span class="annottext">encodeIfaceForeign :: Logger
-&gt; DynFlags
-&gt; ForeignStubs
-&gt; [(ForeignSrcLang, String)]
-&gt; IO IfaceForeign
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#encodeIfaceForeign"><span class="hs-identifier hs-var hs-var">encodeIfaceForeign</span></a></span></span><span> </span><span id="local-6989586621682752092"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621682752092"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621682752093"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682752093"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621682752094"><span class="annot"><span class="annottext">ForeignStubs
</span><a href="#local-6989586621682752094"><span class="hs-identifier hs-var">foreign_stubs</span></a></span></span><span> </span><span id="local-6989586621682752095"><span class="annot"><span class="annottext">[(ForeignSrcLang, String)]
</span><a href="#local-6989586621682752095"><span class="hs-identifier hs-var">lang_paths</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-432"></span><span>  </span><span id="local-6989586621682752096"><span class="annot"><a href="#local-6989586621682752096"><span class="hs-identifier hs-var">files</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO [IfaceForeignFile]
</span><a href="#local-6989586621682752097"><span class="hs-identifier hs-var">read_foreign_files</span></a></span><span>
</span><span id="line-433"></span><span>  </span><span id="local-6989586621682752098"><span class="annot"><a href="#local-6989586621682752098"><span class="hs-identifier hs-var">stubs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682752099"><span class="hs-identifier hs-type">encode_stubs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682752094"><span class="hs-identifier hs-type">foreign_stubs</span></a></span><span>
</span><span id="line-434"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682752100"><span class="annot"><a href="#local-6989586621682752100"><span class="hs-identifier hs-var hs-var">iff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Maybe IfaceCStubs
stubs :: Maybe IfaceCStubs
stubs :: Maybe IfaceCStubs
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#stubs"><span class="hs-identifier hs-var hs-var">stubs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[IfaceForeignFile]
files :: [IfaceForeignFile]
files :: [IfaceForeignFile]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#files"><span class="hs-identifier hs-var hs-var">files</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-type">debugTraceMsg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682752092"><span class="hs-identifier hs-type">logger</span></a></span><span> </span><span class="annot"><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-436"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-type">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Encoding foreign data for iface:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682752100"><span class="hs-identifier hs-type">iff</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="#local-6989586621682752100"><span class="hs-identifier hs-type">iff</span></a></span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-439"></span><span>    </span><span class="hs-comment">-- We can't just store the paths, since files may have been generated with</span><span>
</span><span id="line-440"></span><span>    </span><span class="hs-comment">-- GHC session lifetime in 'GHC.Internal.TH.Syntax.addForeignSource'.</span><span>
</span><span id="line-441"></span><span>    </span><span id="local-6989586621682752097"><span class="annot"><span class="annottext">read_foreign_files :: IO [IfaceForeignFile]
</span><a href="#local-6989586621682752097"><span class="hs-identifier hs-var hs-var">read_foreign_files</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-442"></span><span>      </span><span class="annot"><span class="annottext">[(ForeignSrcLang, String)]
-&gt; ((ForeignSrcLang, String) -&gt; IO IfaceForeignFile)
-&gt; IO [IfaceForeignFile]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">[(ForeignSrcLang, String)]
</span><a href="#local-6989586621682752095"><span class="hs-identifier hs-var">lang_paths</span></a></span><span> </span><span class="annot"><span class="annottext">(((ForeignSrcLang, String) -&gt; IO IfaceForeignFile)
 -&gt; IO [IfaceForeignFile])
-&gt; ((ForeignSrcLang, String) -&gt; IO IfaceForeignFile)
-&gt; IO [IfaceForeignFile]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682752101"><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="#local-6989586621682752101"><span class="hs-identifier hs-var">lang</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752102"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752102"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-443"></span><span>        </span><span id="local-6989586621682752103"><span class="annot"><a href="#local-6989586621682752103"><span class="hs-identifier hs-var">source</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><span class="hs-identifier hs-var">readFile</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752102"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-444"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-type">IfaceForeignFile</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#lang"><span class="hs-identifier hs-var hs-type">lang</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var hs-type">source</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#extension"><span class="hs-identifier hs-var">extension</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#takeExtension"><span class="hs-identifier hs-type">takeExtension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682752102"><span class="hs-identifier hs-type">path</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span>    </span><span id="local-6989586621682752099"><span class="annot"><span class="annottext">encode_stubs :: ForeignStubs -&gt; IO (Maybe IfaceCStubs)
</span><a href="#local-6989586621682752099"><span class="hs-identifier hs-var hs-var">encode_stubs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-447"></span><span>      </span><span class="annot"><span class="annottext">ForeignStubs
</span><a href="GHC.Types.ForeignStubs.html#NoStubs"><span class="hs-identifier hs-var">NoStubs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-448"></span><span>        </span><span class="annot"><span class="annottext">Maybe IfaceCStubs -&gt; IO (Maybe IfaceCStubs)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe IfaceCStubs
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-449"></span><span>      </span><span class="annot"><a href="GHC.Types.ForeignStubs.html#ForeignStubs"><span class="hs-identifier hs-type">ForeignStubs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.ForeignStubs.html#CHeader"><span class="hs-identifier hs-type">CHeader</span></a></span><span> </span><span id="local-6989586621682752107"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682752107"><span class="hs-identifier hs-var">header</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.ForeignStubs.html#CStub"><span class="hs-identifier hs-type">CStub</span></a></span><span> </span><span id="local-6989586621682752109"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682752109"><span class="hs-identifier hs-var">source</span></a></span></span><span> </span><span id="local-6989586621682752110"><span class="annot"><span class="annottext">[CLabel]
</span><a href="#local-6989586621682752110"><span class="hs-identifier hs-var">inits</span></a></span></span><span> </span><span id="local-6989586621682752111"><span class="annot"><span class="annottext">[CLabel]
</span><a href="#local-6989586621682752111"><span class="hs-identifier hs-var">finals</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-450"></span><span>        </span><span class="annot"><span class="annottext">Maybe IfaceCStubs -&gt; IO (Maybe IfaceCStubs)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe IfaceCStubs -&gt; IO (Maybe IfaceCStubs))
-&gt; Maybe IfaceCStubs -&gt; IO (Maybe IfaceCStubs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IfaceCStubs -&gt; Maybe IfaceCStubs
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-type">IfaceCStubs</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-451"></span><span>          </span><span class="annot"><span class="annottext">header :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#header"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; String
</span><a href="#local-6989586621682752112"><span class="hs-identifier hs-var">render</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682752107"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-452"></span><span>          </span><span class="annot"><span class="annottext">source :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var">source</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; String
</span><a href="#local-6989586621682752112"><span class="hs-identifier hs-var">render</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682752109"><span class="hs-identifier hs-var">source</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-453"></span><span>          </span><span class="annot"><span class="annottext">initializers :: [IfaceCLabel]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#initializers"><span class="hs-identifier hs-var">initializers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; IfaceCLabel
</span><a href="#local-6989586621682752113"><span class="hs-identifier hs-var">encode_label</span></a></span><span> </span><span class="annot"><span class="annottext">(CLabel -&gt; IfaceCLabel) -&gt; [CLabel] -&gt; [IfaceCLabel]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[CLabel]
</span><a href="#local-6989586621682752110"><span class="hs-identifier hs-var">inits</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-454"></span><span>          </span><span class="annot"><span class="annottext">finalizers :: [IfaceCLabel]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#finalizers"><span class="hs-identifier hs-var">finalizers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; IfaceCLabel
</span><a href="#local-6989586621682752113"><span class="hs-identifier hs-var">encode_label</span></a></span><span> </span><span class="annot"><span class="annottext">(CLabel -&gt; IfaceCLabel) -&gt; [CLabel] -&gt; [IfaceCLabel]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[CLabel]
</span><a href="#local-6989586621682752111"><span class="hs-identifier hs-var">finals</span></a></span><span>
</span><span id="line-455"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span>    </span><span id="local-6989586621682752113"><span class="annot"><span class="annottext">encode_label :: CLabel -&gt; IfaceCLabel
</span><a href="#local-6989586621682752113"><span class="hs-identifier hs-var hs-var">encode_label</span></a></span></span><span> </span><span id="local-6989586621682752114"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682752114"><span class="hs-identifier hs-var">clabel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-458"></span><span>      </span><span class="annot"><span class="annottext">IfaceCLabel -&gt; Maybe IfaceCLabel -&gt; IfaceCLabel
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; IfaceCLabel
</span><a href="#local-6989586621682752115"><span class="hs-identifier hs-var">invalid_label</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682752114"><span class="hs-identifier hs-var">clabel</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CStubLabel -&gt; IfaceCLabel
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-var">IfaceCLabel</span></a></span><span> </span><span class="annot"><span class="annottext">(CStubLabel -&gt; IfaceCLabel)
-&gt; Maybe CStubLabel -&gt; Maybe IfaceCLabel
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; Maybe CStubLabel
</span><a href="GHC.Cmm.CLabel.html#cStubLabel"><span class="hs-identifier hs-var">cStubLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682752114"><span class="hs-identifier hs-var">clabel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span>    </span><span id="local-6989586621682752115"><span class="annot"><span class="annottext">invalid_label :: CLabel -&gt; IfaceCLabel
</span><a href="#local-6989586621682752115"><span class="hs-identifier hs-var hs-var">invalid_label</span></a></span></span><span> </span><span id="local-6989586621682752117"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682752117"><span class="hs-identifier hs-var">clabel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-461"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IfaceCLabel
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span>
</span><span id="line-462"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-fwrite-if-simplified-core is incompatible with this foreign stub:&quot;</span></span><span>
</span><span id="line-463"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; CLabel -&gt; SDoc
forall doc. IsLine doc =&gt; Platform -&gt; CLabel -&gt; doc
</span><a href="GHC.Cmm.CLabel.html#pprCLabel"><span class="hs-identifier hs-var">pprCLabel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Platform
</span><a href="GHC.Driver.DynFlags.html#targetPlatform"><span class="hs-identifier hs-var">targetPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682752093"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682752117"><span class="hs-identifier hs-var">clabel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span>    </span><span id="local-6989586621682752112"><span class="annot"><span class="annottext">render :: SDoc -&gt; String
</span><a href="#local-6989586621682752112"><span class="hs-identifier hs-var hs-var">render</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#renderWithContext"><span class="hs-identifier hs-var">renderWithContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; PprStyle -&gt; SDocContext
</span><a href="GHC.Driver.DynFlags.html#initSDocContext"><span class="hs-identifier hs-var">initSDocContext</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682752093"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#PprCode"><span class="hs-identifier hs-var">PprCode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-comment">-- | Decode serialized foreign stubs and foreign files.</span><span>
</span><span id="line-468"></span><span class="hs-comment">--</span><span>
</span><span id="line-469"></span><span class="hs-comment">-- See Note [Foreign stubs and TH bytecode linking]</span><span>
</span><span id="line-470"></span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#decodeIfaceForeign"><span class="hs-identifier hs-type">decodeIfaceForeign</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-471"></span><span>  </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-472"></span><span>  </span><span class="annot"><a href="GHC.Utils.TmpFs.html#TmpFs"><span class="hs-identifier hs-type">TmpFs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-473"></span><span>  </span><span class="annot"><a href="GHC.Utils.TmpFs.html#TempDir"><span class="hs-identifier hs-type">TempDir</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-474"></span><span>  </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-475"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.ForeignStubs.html#ForeignStubs"><span class="hs-identifier hs-type">ForeignStubs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignSrcLang</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-476"></span><span id="decodeIfaceForeign"><span class="annot"><span class="annottext">decodeIfaceForeign :: Logger
-&gt; TmpFs
-&gt; TempDir
-&gt; IfaceForeign
-&gt; IO (ForeignStubs, [(ForeignSrcLang, String)])
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#decodeIfaceForeign"><span class="hs-identifier hs-var hs-var">decodeIfaceForeign</span></a></span></span><span> </span><span id="local-6989586621682752122"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621682752122"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621682752123"><span class="annot"><span class="annottext">TmpFs
</span><a href="#local-6989586621682752123"><span class="hs-identifier hs-var">tmpfs</span></a></span></span><span> </span><span id="local-6989586621682752124"><span class="annot"><span class="annottext">TempDir
</span><a href="#local-6989586621682752124"><span class="hs-identifier hs-var">tmp_dir</span></a></span></span><span> </span><span id="local-6989586621682752125"><span class="annot"><span class="annottext">iff :: IfaceForeign
</span><a href="#local-6989586621682752125"><span class="hs-identifier hs-var">iff</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682752126"><span class="annot"><span class="annottext">Maybe IfaceCStubs
stubs :: IfaceForeign -&gt; Maybe IfaceCStubs
stubs :: Maybe IfaceCStubs
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#stubs"><span class="hs-identifier hs-var hs-var">stubs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752127"><span class="annot"><span class="annottext">[IfaceForeignFile]
files :: IfaceForeign -&gt; [IfaceForeignFile]
files :: [IfaceForeignFile]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#files"><span class="hs-identifier hs-var hs-var">files</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-477"></span><span>  </span><span class="annot"><span class="annottext">Logger -&gt; Int -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var">debugTraceMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621682752122"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; IO ()) -&gt; SDoc -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-478"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Decoding foreign data from iface:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceForeign -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceForeign
</span><a href="#local-6989586621682752125"><span class="hs-identifier hs-var">iff</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>  </span><span id="local-6989586621682752128"><span class="annot"><a href="#local-6989586621682752128"><span class="hs-identifier hs-var">lang_paths</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceForeignFile]
-&gt; (IfaceForeignFile -&gt; IO (ForeignSrcLang, String))
-&gt; IO [(ForeignSrcLang, String)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">[IfaceForeignFile]
</span><a href="#local-6989586621682752127"><span class="hs-identifier hs-var">files</span></a></span><span> </span><span class="annot"><span class="annottext">((IfaceForeignFile -&gt; IO (ForeignSrcLang, String))
 -&gt; IO [(ForeignSrcLang, String)])
-&gt; (IfaceForeignFile -&gt; IO (ForeignSrcLang, String))
-&gt; IO [(ForeignSrcLang, String)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeignFile"><span class="hs-identifier hs-type">IfaceForeignFile</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682752129"><span class="annot"><span class="annottext">ForeignSrcLang
lang :: IfaceForeignFile -&gt; ForeignSrcLang
lang :: ForeignSrcLang
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#lang"><span class="hs-identifier hs-var hs-var">lang</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752130"><span class="annot"><span class="annottext">String
source :: IfaceForeignFile -&gt; String
source :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var hs-var">source</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752131"><span class="annot"><span class="annottext">String
extension :: IfaceForeignFile -&gt; String
extension :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#extension"><span class="hs-identifier hs-var hs-var">extension</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-480"></span><span>    </span><span id="local-6989586621682752132"><span class="annot"><a href="#local-6989586621682752132"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Logger
-&gt; TmpFs -&gt; TempDir -&gt; TempFileLifetime -&gt; String -&gt; IO String
</span><a href="GHC.Utils.TmpFs.html#newTempName"><span class="hs-identifier hs-var">newTempName</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621682752122"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">TmpFs
</span><a href="#local-6989586621682752123"><span class="hs-identifier hs-var">tmpfs</span></a></span><span> </span><span class="annot"><span class="annottext">TempDir
</span><a href="#local-6989586621682752124"><span class="hs-identifier hs-var">tmp_dir</span></a></span><span> </span><span class="annot"><span class="annottext">TempFileLifetime
</span><a href="GHC.Utils.TmpFs.html#TFL_GhcSession"><span class="hs-identifier hs-var">TFL_GhcSession</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752131"><span class="hs-identifier hs-var">extension</span></a></span><span>
</span><span id="line-481"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">writeFile</span></span><span> </span><span class="annot"><a href="#local-6989586621682752132"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682752130"><span class="hs-identifier hs-type">source</span></a></span><span>
</span><span id="line-482"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682752129"><span class="hs-identifier hs-type">lang</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682752132"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.ForeignStubs.html#NoStubs"><span class="hs-identifier hs-type">NoStubs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682752136"><span class="hs-identifier hs-type">decode_stubs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682752126"><span class="hs-identifier hs-type">stubs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682752128"><span class="hs-identifier hs-type">lang_paths</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-484"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-485"></span><span>    </span><span id="local-6989586621682752136"><span class="annot"><span class="annottext">decode_stubs :: IfaceCStubs -&gt; ForeignStubs
</span><a href="#local-6989586621682752136"><span class="hs-identifier hs-var hs-var">decode_stubs</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCStubs"><span class="hs-identifier hs-type">IfaceCStubs</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682752139"><span class="annot"><span class="annottext">String
header :: IfaceCStubs -&gt; String
header :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#header"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752140"><span class="annot"><span class="annottext">String
source :: IfaceCStubs -&gt; String
source :: String
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#source"><span class="hs-identifier hs-var hs-var">source</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752141"><span class="annot"><span class="annottext">[IfaceCLabel]
initializers :: IfaceCStubs -&gt; [IfaceCLabel]
initializers :: [IfaceCLabel]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#initializers"><span class="hs-identifier hs-var hs-var">initializers</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752142"><span class="annot"><span class="annottext">[IfaceCLabel]
finalizers :: IfaceCStubs -&gt; [IfaceCLabel]
finalizers :: [IfaceCLabel]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#finalizers"><span class="hs-identifier hs-var hs-var">finalizers</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-486"></span><span>      </span><span class="annot"><span class="annottext">CHeader -&gt; CStub -&gt; ForeignStubs
</span><a href="GHC.Types.ForeignStubs.html#ForeignStubs"><span class="hs-identifier hs-var">ForeignStubs</span></a></span><span>
</span><span id="line-487"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; CHeader
</span><a href="GHC.Types.ForeignStubs.html#CHeader"><span class="hs-identifier hs-var">CHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752139"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-488"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; [CLabel] -&gt; [CLabel] -&gt; CStub
</span><a href="GHC.Types.ForeignStubs.html#CStub"><span class="hs-identifier hs-var">CStub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682752140"><span class="hs-identifier hs-var">source</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IfaceCLabel] -&gt; [CLabel]
</span><a href="#local-6989586621682752143"><span class="hs-identifier hs-var">labels</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCLabel]
</span><a href="#local-6989586621682752141"><span class="hs-identifier hs-var">initializers</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IfaceCLabel] -&gt; [CLabel]
</span><a href="#local-6989586621682752143"><span class="hs-identifier hs-var">labels</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCLabel]
</span><a href="#local-6989586621682752142"><span class="hs-identifier hs-var">finalizers</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span>    </span><span id="local-6989586621682752143"><span class="annot"><span class="annottext">labels :: [IfaceCLabel] -&gt; [CLabel]
</span><a href="#local-6989586621682752143"><span class="hs-identifier hs-var hs-var">labels</span></a></span></span><span> </span><span id="local-6989586621682752144"><span class="annot"><span class="annottext">[IfaceCLabel]
</span><a href="#local-6989586621682752144"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CStubLabel -&gt; CLabel
</span><a href="GHC.Cmm.CLabel.html#fromCStubLabel"><span class="hs-identifier hs-var">fromCStubLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CStubLabel
</span><a href="#local-6989586621682752146"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceCLabel"><span class="hs-identifier hs-type">IfaceCLabel</span></a></span><span> </span><span id="local-6989586621682752146"><span class="annot"><span class="annottext">CStubLabel
</span><a href="#local-6989586621682752146"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IfaceCLabel]
</span><a href="#local-6989586621682752144"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682752149"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-493"></span><span>  </span><span id="local-6989586621682752161"><span class="annot"><span class="annottext">get :: ReadBinHandle -&gt; IO IfaceForeign
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621682752162"><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682752162"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-494"></span><span>    </span><span id="local-6989586621682752163"><span class="annot"><a href="#local-6989586621682752163"><span class="hs-identifier hs-var">stubs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReadBinHandle -&gt; IO (Maybe IfaceCStubs)
forall a. Binary a =&gt; ReadBinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682752162"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-495"></span><span>    </span><span id="local-6989586621682752164"><span class="annot"><a href="#local-6989586621682752164"><span class="hs-identifier hs-var">files</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-type">get</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682752162"><span class="hs-identifier hs-type">bh</span></a></span><span>
</span><span id="line-496"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#stubs"><span class="hs-identifier hs-var hs-type">stubs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#files"><span class="hs-identifier hs-var hs-type">files</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span>  </span><span id="local-6989586621682752170"><span class="annot"><span class="annottext">put_ :: WriteBinHandle -&gt; IfaceForeign -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621682752171"><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682752171"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682752172"><span class="annot"><span class="annottext">Maybe IfaceCStubs
stubs :: IfaceForeign -&gt; Maybe IfaceCStubs
stubs :: Maybe IfaceCStubs
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#stubs"><span class="hs-identifier hs-var hs-var">stubs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752173"><span class="annot"><span class="annottext">[IfaceForeignFile]
files :: IfaceForeign -&gt; [IfaceForeignFile]
files :: [IfaceForeignFile]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#files"><span class="hs-identifier hs-var hs-var">files</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-499"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; Maybe IfaceCStubs -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682752171"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IfaceCStubs
</span><a href="#local-6989586621682752172"><span class="hs-identifier hs-var">stubs</span></a></span><span>
</span><span id="line-500"></span><span>    </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; [IfaceForeignFile] -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682752171"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceForeignFile]
</span><a href="#local-6989586621682752173"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-503"></span><span>  </span><span id="local-6989586621682752181"><span class="annot"><span class="annottext">rnf :: IfaceForeign -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.WholeCoreBindings.html#IfaceForeign"><span class="hs-identifier hs-type">IfaceForeign</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621682752182"><span class="annot"><span class="annottext">Maybe IfaceCStubs
stubs :: IfaceForeign -&gt; Maybe IfaceCStubs
stubs :: Maybe IfaceCStubs
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#stubs"><span class="hs-identifier hs-var hs-var">stubs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682752183"><span class="annot"><span class="annottext">[IfaceForeignFile]
files :: IfaceForeign -&gt; [IfaceForeignFile]
files :: [IfaceForeignFile]
</span><a href="GHC.Unit.Module.WholeCoreBindings.html#files"><span class="hs-identifier hs-var hs-var">files</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe IfaceCStubs -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe IfaceCStubs
</span><a href="#local-6989586621682752182"><span class="hs-identifier hs-var">stubs</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[IfaceForeignFile] -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq-1.5.1.0-6837/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceForeignFile]
</span><a href="#local-6989586621682752183"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-504"></span></pre></body></html>