<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-4"></span><span class="hs-comment">--</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Generating machine code (instruction selection)</span><span>
</span><span id="line-6"></span><span class="hs-comment">--</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- (c) The University of Glasgow 1996-2004</span><span>
</span><span id="line-8"></span><span class="hs-comment">--</span><span>
</span><span id="line-9"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-comment">-- This is a big module, but, if you pay attention to</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- (a) the sectioning, and (b) the type signatures,</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- the structure should not be too overwhelming.</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html"><span class="hs-identifier">GHC.CmmToAsm.PPC.CodeGen</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#cmmTopCodeGen"><span class="hs-identifier">cmmTopCodeGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#generateJumpTableForInstr"><span class="hs-identifier">generateJumpTableForInstr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier">InstrBlock</span></a></span><span>
</span><span id="line-19"></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">where</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-comment">-- NCG stuff:</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.Regs.html"><span class="hs-identifier">GHC.Platform.Regs</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html"><span class="hs-identifier">GHC.CmmToAsm.PPC.Instr</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html"><span class="hs-identifier">GHC.CmmToAsm.PPC.Cond</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html"><span class="hs-identifier">GHC.CmmToAsm.PPC.Regs</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.CPrim.html"><span class="hs-identifier">GHC.CmmToAsm.CPrim</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Types.html"><span class="hs-identifier">GHC.CmmToAsm.Types</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.DebugBlock.html"><span class="hs-identifier">GHC.Cmm.DebugBlock</span></a></span><span>
</span><span id="line-33"></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Cmm.DebugBlock.html#DebugBlock"><span class="hs-identifier">DebugBlock</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html"><span class="hs-identifier">GHC.CmmToAsm.Monad</span></a></span><span>
</span><span id="line-35"></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier">NatM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier">getNewRegNat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewLabelNat"><span class="hs-identifier">getNewLabelNat</span></a></span><span>
</span><span id="line-36"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier">getBlockIdNat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getPicBaseNat"><span class="hs-identifier">getPicBaseNat</span></a></span><span>
</span><span id="line-37"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#Reg64"><span class="hs-identifier">Reg64</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier">RegCode64</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewReg64"><span class="hs-identifier">getNewReg64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#localReg64"><span class="hs-identifier">localReg64</span></a></span><span>
</span><span id="line-38"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getPicBaseMaybeNat"><span class="hs-identifier">getPicBaseMaybeNat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier">getPlatform</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getConfig"><span class="hs-identifier">getConfig</span></a></span><span>
</span><span id="line-39"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getDebugBlock"><span class="hs-identifier">getDebugBlock</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getFileId"><span class="hs-identifier">getFileId</span></a></span><span>
</span><span id="line-40"></span><span>   </span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html"><span class="hs-identifier">GHC.CmmToAsm.PIC</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html"><span class="hs-identifier">GHC.CmmToAsm.Format</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Config.html"><span class="hs-identifier">GHC.CmmToAsm.Config</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.Class.Unified.html"><span class="hs-identifier">GHC.Platform.Reg.Class.Unified</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html"><span class="hs-identifier">GHC.Platform.Reg</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Reg.Target.html"><span class="hs-identifier">GHC.CmmToAsm.Reg.Target</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.html"><span class="hs-identifier">GHC.Platform</span></a></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-comment">-- Our intermediate code:</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.BlockId.html"><span class="hs-identifier">GHC.Cmm.BlockId</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.html"><span class="hs-identifier">GHC.Cmm</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.Utils.html"><span class="hs-identifier">GHC.Cmm.Utils</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.Switch.html"><span class="hs-identifier">GHC.Cmm.Switch</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.CLabel.html"><span class="hs-identifier">GHC.Cmm.CLabel</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.Dataflow.Block.html"><span class="hs-identifier">GHC.Cmm.Dataflow.Block</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.Dataflow.Graph.html"><span class="hs-identifier">GHC.Cmm.Dataflow.Graph</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html"><span class="hs-identifier">GHC.Types.Tickish</span></a></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier">GenTickish</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#srcSpanFile"><span class="hs-identifier">srcSpanFile</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#srcSpanStartLine"><span class="hs-identifier">srcSpanStartLine</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#srcSpanStartCol"><span class="hs-identifier">srcSpanStartCol</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-comment">-- The rest:</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html"><span class="hs-identifier">GHC.Data.OrdList</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">mapAndUnzipM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">when</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Word.html"><span class="hs-identifier">Data.Word</span></a></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-72"></span><span class="hs-comment">-- Top-level of the instruction selector</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-comment">-- | 'InstrBlock's are the insn sequences generated by the insn selectors.</span><span>
</span><span id="line-75"></span><span class="hs-comment">-- They are really trees of insns to facilitate fast appending, where a</span><span>
</span><span id="line-76"></span><span class="hs-comment">-- left-to-right traversal (pre-order?) yields the insns in the correct</span><span>
</span><span id="line-77"></span><span class="hs-comment">-- order.</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#cmmTopCodeGen"><span class="hs-identifier hs-type">cmmTopCodeGen</span></a></span><span>
</span><span id="line-80"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.html#RawCmmDecl"><span class="hs-identifier hs-type">RawCmmDecl</span></a></span><span>
</span><span id="line-81"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToAsm.Types.html#NatCmmDecl"><span class="hs-identifier hs-type">NatCmmDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.html#RawCmmStatics"><span class="hs-identifier hs-type">RawCmmStatics</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span id="cmmTopCodeGen"><span class="annot"><span class="annottext">cmmTopCodeGen :: RawCmmDecl -&gt; NatM [NatCmmDecl RawCmmStatics Instr]
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#cmmTopCodeGen"><span class="hs-identifier hs-var hs-var">cmmTopCodeGen</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.html#CmmProc"><span class="hs-identifier hs-type">CmmProc</span></a></span><span> </span><span id="local-6989586621682863547"><span class="annot"><span class="annottext">LabelMap RawCmmStatics
</span><a href="#local-6989586621682863547"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621682863548"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682863548"><span class="hs-identifier hs-var">lab</span></a></span></span><span> </span><span id="local-6989586621682863549"><span class="annot"><span class="annottext">[GlobalRegUse]
</span><a href="#local-6989586621682863549"><span class="hs-identifier hs-var">live</span></a></span></span><span> </span><span id="local-6989586621682863550"><span class="annot"><span class="annottext">CmmGraph
</span><a href="#local-6989586621682863550"><span class="hs-identifier hs-var">graph</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863551"><span class="annot"><span class="annottext">blocks :: [CmmBlock]
</span><a href="#local-6989586621682863551"><span class="hs-identifier hs-var hs-var hs-var">blocks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmGraph -&gt; [CmmBlock]
</span><a href="GHC.Cmm.Utils.html#toBlockListEntryFirst"><span class="hs-identifier hs-var">toBlockListEntryFirst</span></a></span><span> </span><span class="annot"><span class="annottext">CmmGraph
</span><a href="#local-6989586621682863550"><span class="hs-identifier hs-var">graph</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682863553"><span class="annot"><a href="#local-6989586621682863553"><span class="hs-identifier hs-var">nat_blocks</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863554"><span class="annot"><a href="#local-6989586621682863554"><span class="hs-identifier hs-var">statics</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(CmmBlock
 -&gt; NatM ([NatBasicBlock Instr], [NatCmmDecl RawCmmStatics Instr]))
-&gt; [CmmBlock]
-&gt; NatM
     ([[NatBasicBlock Instr]], [[NatCmmDecl RawCmmStatics Instr]])
forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; m (b, c)) -&gt; [a] -&gt; m ([b], [c])
</span><span class="hs-identifier hs-var">mapAndUnzipM</span></span><span> </span><span class="annot"><span class="annottext">CmmBlock
-&gt; NatM ([NatBasicBlock Instr], [NatCmmDecl RawCmmStatics Instr])
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#basicBlockCodeGen"><span class="hs-identifier hs-var">basicBlockCodeGen</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmBlock]
</span><a href="#local-6989586621682863551"><span class="hs-identifier hs-var">blocks</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span id="local-6989586621682863556"><span class="annot"><a href="#local-6989586621682863556"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-type">getPlatform</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863557"><span class="annot"><a href="#local-6989586621682863557"><span class="hs-identifier hs-var hs-var">proc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LabelMap RawCmmStatics
-&gt; CLabel
-&gt; [GlobalRegUse]
-&gt; ListGraph Instr
-&gt; NatCmmDecl RawCmmStatics Instr
forall d h g.
h -&gt; CLabel -&gt; [GlobalRegUse] -&gt; g -&gt; GenCmmDecl d h g
</span><a href="GHC.Cmm.html#CmmProc"><span class="hs-identifier hs-var">CmmProc</span></a></span><span> </span><span class="annot"><span class="annottext">LabelMap RawCmmStatics
</span><a href="#local-6989586621682863547"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682863548"><span class="hs-identifier hs-var">lab</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRegUse]
</span><a href="#local-6989586621682863549"><span class="hs-identifier hs-var">live</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NatBasicBlock Instr] -&gt; ListGraph Instr
forall i. [GenBasicBlock i] -&gt; ListGraph i
</span><a href="GHC.Cmm.html#ListGraph"><span class="hs-identifier hs-var">ListGraph</span></a></span><span> </span><span class="annot"><span class="annottext">([NatBasicBlock Instr] -&gt; ListGraph Instr)
-&gt; [NatBasicBlock Instr] -&gt; ListGraph Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[[NatBasicBlock Instr]] -&gt; [NatBasicBlock Instr]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">[[NatBasicBlock Instr]]
</span><a href="#local-6989586621682863553"><span class="hs-identifier hs-var">nat_blocks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>      </span><span id="local-6989586621682863560"><span class="annot"><a href="#local-6989586621682863560"><span class="hs-identifier hs-var hs-var">tops</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NatCmmDecl RawCmmStatics Instr
</span><a href="#local-6989586621682863557"><span class="hs-identifier hs-var">proc</span></a></span><span> </span><span class="annot"><span class="annottext">NatCmmDecl RawCmmStatics Instr
-&gt; [NatCmmDecl RawCmmStatics Instr]
-&gt; [NatCmmDecl RawCmmStatics Instr]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[[NatCmmDecl RawCmmStatics Instr]]
-&gt; [NatCmmDecl RawCmmStatics Instr]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">[[NatCmmDecl RawCmmStatics Instr]]
</span><a href="#local-6989586621682863554"><span class="hs-identifier hs-var">statics</span></a></span><span>
</span><span id="line-89"></span><span>      </span><span id="local-6989586621682863561"><span class="annot"><a href="#local-6989586621682863561"><span class="hs-identifier hs-var hs-var">os</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OS
</span><a href="GHC.Platform.html#platformOS"><span class="hs-identifier hs-var">platformOS</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863556"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-90"></span><span>      </span><span id="local-6989586621682863563"><span class="annot"><a href="#local-6989586621682863563"><span class="hs-identifier hs-var hs-var">arch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Arch
</span><a href="GHC.Platform.html#platformArch"><span class="hs-identifier hs-var">platformArch</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863556"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682863563"><span class="hs-identifier hs-type">arch</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier hs-var">ArchPPC</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621682863561"><span class="hs-identifier hs-var">os</span></a></span><span> </span><span class="annot"><span class="annottext">OS -&gt; OS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier hs-var">OSAIX</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NatCmmDecl RawCmmStatics Instr]
-&gt; NatM [NatCmmDecl RawCmmStatics Instr]
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[NatCmmDecl RawCmmStatics Instr]
</span><a href="#local-6989586621682863560"><span class="hs-identifier hs-var">tops</span></a></span><span>
</span><span id="line-93"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-94"></span><span>      </span><span id="local-6989586621682863567"><span class="annot"><a href="#local-6989586621682863567"><span class="hs-identifier hs-var">picBaseMb</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM (Maybe Reg)
</span><a href="GHC.CmmToAsm.Monad.html#getPicBaseMaybeNat"><span class="hs-identifier hs-var">getPicBaseMaybeNat</span></a></span><span>
</span><span id="line-95"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682863567"><span class="hs-identifier hs-type">picBaseMb</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-96"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682863568"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863568"><span class="hs-identifier hs-var">picBase</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Arch
-&gt; OS
-&gt; Reg
-&gt; [NatCmmDecl RawCmmStatics Instr]
-&gt; NatM [NatCmmDecl RawCmmStatics Instr]
</span><a href="GHC.CmmToAsm.PIC.html#initializePicBase_ppc"><span class="hs-identifier hs-var">initializePicBase_ppc</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><a href="#local-6989586621682863563"><span class="hs-identifier hs-var">arch</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621682863561"><span class="hs-identifier hs-var">os</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863568"><span class="hs-identifier hs-var">picBase</span></a></span><span> </span><span class="annot"><span class="annottext">[NatCmmDecl RawCmmStatics Instr]
</span><a href="#local-6989586621682863560"><span class="hs-identifier hs-var">tops</span></a></span><span>
</span><span id="line-97"></span><span>           </span><span class="annot"><span class="annottext">Maybe Reg
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NatCmmDecl RawCmmStatics Instr]
-&gt; NatM [NatCmmDecl RawCmmStatics Instr]
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[NatCmmDecl RawCmmStatics Instr]
</span><a href="#local-6989586621682863560"><span class="hs-identifier hs-var">tops</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ArchPPC_64</span></span><span> </span><span class="annot"><span class="annottext">PPC_64ABI
</span><span class="hs-identifier hs-var">ELF_V1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NatCmmDecl RawCmmStatics Instr]
-&gt; NatM [NatCmmDecl RawCmmStatics Instr]
forall {m :: * -&gt; *} {d} {h} {i}.
MonadGetUnique m =&gt;
[GenCmmDecl d h (ListGraph i)] -&gt; m [GenCmmDecl d h (ListGraph i)]
</span><a href="#local-6989586621682863572"><span class="hs-identifier hs-var">fixup_entry</span></a></span><span> </span><span class="annot"><span class="annottext">[NatCmmDecl RawCmmStatics Instr]
</span><a href="#local-6989586621682863560"><span class="hs-identifier hs-var">tops</span></a></span><span>
</span><span id="line-99"></span><span>                      </span><span class="hs-comment">-- generating function descriptor is handled in</span><span>
</span><span id="line-100"></span><span>                      </span><span class="hs-comment">-- pretty printer</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ArchPPC_64</span></span><span> </span><span class="annot"><span class="annottext">PPC_64ABI
</span><span class="hs-identifier hs-var">ELF_V2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NatCmmDecl RawCmmStatics Instr]
-&gt; NatM [NatCmmDecl RawCmmStatics Instr]
forall {m :: * -&gt; *} {d} {h} {i}.
MonadGetUnique m =&gt;
[GenCmmDecl d h (ListGraph i)] -&gt; m [GenCmmDecl d h (ListGraph i)]
</span><a href="#local-6989586621682863572"><span class="hs-identifier hs-var">fixup_entry</span></a></span><span> </span><span class="annot"><span class="annottext">[NatCmmDecl RawCmmStatics Instr]
</span><a href="#local-6989586621682863560"><span class="hs-identifier hs-var">tops</span></a></span><span>
</span><span id="line-102"></span><span>                      </span><span class="hs-comment">-- generating function prologue is handled in</span><span>
</span><span id="line-103"></span><span>                      </span><span class="hs-comment">-- pretty printer</span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM [NatCmmDecl RawCmmStatics Instr]
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.cmmTopCodeGen: unknown arch&quot;</span></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>      </span><span id="local-6989586621682863572"><span class="annot"><span class="annottext">fixup_entry :: [GenCmmDecl d h (ListGraph i)] -&gt; m [GenCmmDecl d h (ListGraph i)]
</span><a href="#local-6989586621682863572"><span class="hs-identifier hs-var hs-var">fixup_entry</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.html#CmmProc"><span class="hs-identifier hs-type">CmmProc</span></a></span><span> </span><span id="local-6989586621682863595"><span class="annot"><span class="annottext">h
</span><a href="#local-6989586621682863595"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621682863596"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682863596"><span class="hs-identifier hs-var">lab</span></a></span></span><span> </span><span id="local-6989586621682863597"><span class="annot"><span class="annottext">[GlobalRegUse]
</span><a href="#local-6989586621682863597"><span class="hs-identifier hs-var">live</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.html#ListGraph"><span class="hs-identifier hs-type">ListGraph</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682863598"><span class="annot"><span class="annottext">GenBasicBlock i
</span><a href="#local-6989586621682863598"><span class="hs-identifier hs-var">entry</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682863599"><span class="annot"><span class="annottext">[GenBasicBlock i]
</span><a href="#local-6989586621682863599"><span class="hs-identifier hs-var">blocks</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682863600"><span class="annot"><span class="annottext">[GenCmmDecl d h (ListGraph i)]
</span><a href="#local-6989586621682863600"><span class="hs-identifier hs-var">statics</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-108"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.Cmm.html#BasicBlock"><span class="hs-identifier hs-type">BasicBlock</span></a></span><span> </span><span id="local-6989586621682863602"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863602"><span class="hs-identifier hs-var hs-var">bID</span></a></span></span><span> </span><span id="local-6989586621682863603"><span class="annot"><span class="annottext">[i]
</span><a href="#local-6989586621682863603"><span class="hs-identifier hs-var hs-var">insns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenBasicBlock i
</span><a href="#local-6989586621682863598"><span class="hs-identifier hs-var">entry</span></a></span><span>
</span><span id="line-109"></span><span>        </span><span id="local-6989586621682863604"><span class="annot"><a href="#local-6989586621682863604"><span class="hs-identifier hs-var">bID'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682863596"><span class="hs-identifier hs-var">lab</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; CLabel -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockId -&gt; CLabel
</span><a href="GHC.Cmm.BlockId.html#blockLbl"><span class="hs-identifier hs-var">blockLbl</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863602"><span class="hs-identifier hs-var">bID</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">m BlockId
forall (m :: * -&gt; *). MonadGetUnique m =&gt; m BlockId
</span><a href="GHC.Cmm.BlockId.html#newBlockId"><span class="hs-identifier hs-var">newBlockId</span></a></span><span>
</span><span id="line-111"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; m BlockId
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863602"><span class="hs-identifier hs-var">bID</span></a></span><span>
</span><span id="line-112"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863607"><span class="annot"><a href="#local-6989586621682863607"><span class="hs-identifier hs-var hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; [i] -&gt; GenBasicBlock i
forall i. BlockId -&gt; [i] -&gt; GenBasicBlock i
</span><a href="GHC.Cmm.html#BasicBlock"><span class="hs-identifier hs-var">BasicBlock</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863604"><span class="hs-identifier hs-var">bID'</span></a></span><span> </span><span class="annot"><span class="annottext">[i]
</span><a href="#local-6989586621682863603"><span class="hs-identifier hs-var">insns</span></a></span><span>
</span><span id="line-113"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.html#CmmProc"><span class="hs-identifier hs-type">CmmProc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863595"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863596"><span class="hs-identifier hs-type">lab</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863597"><span class="hs-identifier hs-type">live</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.html#ListGraph"><span class="hs-identifier hs-type">ListGraph</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682863607"><span class="hs-identifier hs-type">b'</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><a href="#local-6989586621682863599"><span class="hs-identifier hs-type">blocks</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621682863600"><span class="hs-identifier hs-type">statics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>      </span><span class="annot"><a href="#local-6989586621682863572"><span class="hs-identifier hs-var">fixup_entry</span></a></span><span> </span><span class="annot"><span class="annottext">[GenCmmDecl d h (ListGraph i)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m [GenCmmDecl d h (ListGraph i)]
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cmmTopCodegen: Broken CmmProc&quot;</span></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#cmmTopCodeGen"><span class="hs-identifier hs-var">cmmTopCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.html#CmmData"><span class="hs-identifier hs-type">CmmData</span></a></span><span> </span><span id="local-6989586621682863609"><span class="annot"><span class="annottext">Section
</span><a href="#local-6989586621682863609"><span class="hs-identifier hs-var">sec</span></a></span></span><span> </span><span id="local-6989586621682863610"><span class="annot"><span class="annottext">RawCmmStatics
</span><a href="#local-6989586621682863610"><span class="hs-identifier hs-var">dat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><span class="annottext">[NatCmmDecl RawCmmStatics Instr]
-&gt; NatM [NatCmmDecl RawCmmStatics Instr]
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Section -&gt; RawCmmStatics -&gt; NatCmmDecl RawCmmStatics Instr
forall d h g. Section -&gt; d -&gt; GenCmmDecl d h g
</span><a href="GHC.Cmm.html#CmmData"><span class="hs-identifier hs-var">CmmData</span></a></span><span> </span><span class="annot"><span class="annottext">Section
</span><a href="#local-6989586621682863609"><span class="hs-identifier hs-var">sec</span></a></span><span> </span><span class="annot"><span class="annottext">RawCmmStatics
</span><a href="#local-6989586621682863610"><span class="hs-identifier hs-var">dat</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- no translation, we just use CmmStatic</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#basicBlockCodeGen"><span class="hs-identifier hs-type">basicBlockCodeGen</span></a></span><span>
</span><span id="line-120"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Dataflow.Block.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmNode"><span class="hs-identifier hs-type">CmmNode</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.Dataflow.Block.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.Dataflow.Block.html#C"><span class="hs-identifier hs-type">C</span></a></span><span>
</span><span id="line-121"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToAsm.Types.html#NatBasicBlock"><span class="hs-identifier hs-type">NatBasicBlock</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-122"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToAsm.Types.html#NatCmmDecl"><span class="hs-identifier hs-type">NatCmmDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.html#RawCmmStatics"><span class="hs-identifier hs-type">RawCmmStatics</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span id="basicBlockCodeGen"><span class="annot"><span class="annottext">basicBlockCodeGen :: CmmBlock
-&gt; NatM ([NatBasicBlock Instr], [NatCmmDecl RawCmmStatics Instr])
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#basicBlockCodeGen"><span class="hs-identifier hs-var hs-var">basicBlockCodeGen</span></a></span></span><span> </span><span id="local-6989586621682863611"><span class="annot"><span class="annottext">CmmBlock
</span><a href="#local-6989586621682863611"><span class="hs-identifier hs-var">block</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmNode C O
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682863612"><span class="annot"><span class="annottext">Block CmmNode O O
</span><a href="#local-6989586621682863612"><span class="hs-identifier hs-var hs-var">nodes</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682863613"><span class="annot"><span class="annottext">CmmNode O C
</span><a href="#local-6989586621682863613"><span class="hs-identifier hs-var hs-var">tail</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmBlock -&gt; (CmmNode C O, Block CmmNode O O, CmmNode O C)
forall (n :: Extensibility -&gt; Extensibility -&gt; *).
Block n C C -&gt; (n C O, Block n O O, n O C)
</span><a href="GHC.Cmm.Dataflow.Block.html#blockSplit"><span class="hs-identifier hs-var">blockSplit</span></a></span><span> </span><span class="annot"><span class="annottext">CmmBlock
</span><a href="#local-6989586621682863611"><span class="hs-identifier hs-var">block</span></a></span><span>
</span><span id="line-126"></span><span>      </span><span id="local-6989586621682863615"><span class="annot"><span class="annottext">id :: BlockId
</span><a href="#local-6989586621682863615"><span class="hs-identifier hs-var hs-var hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmBlock -&gt; BlockId
forall (x :: Extensibility). Block CmmNode C x -&gt; BlockId
forall (thing :: Extensibility -&gt; Extensibility -&gt; *)
       (x :: Extensibility).
NonLocal thing =&gt;
thing C x -&gt; BlockId
</span><a href="GHC.Cmm.Dataflow.Graph.html#entryLabel"><span class="hs-identifier hs-var">entryLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CmmBlock
</span><a href="#local-6989586621682863611"><span class="hs-identifier hs-var">block</span></a></span><span>
</span><span id="line-127"></span><span>      </span><span id="local-6989586621682863617"><span class="annot"><span class="annottext">stmts :: [CmmNode O O]
</span><a href="#local-6989586621682863617"><span class="hs-identifier hs-var hs-var hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Block CmmNode O O -&gt; [CmmNode O O]
forall (n :: Extensibility -&gt; Extensibility -&gt; *).
Block n O O -&gt; [n O O]
</span><a href="GHC.Cmm.Dataflow.Block.html#blockToList"><span class="hs-identifier hs-var">blockToList</span></a></span><span> </span><span class="annot"><span class="annottext">Block CmmNode O O
</span><a href="#local-6989586621682863612"><span class="hs-identifier hs-var">nodes</span></a></span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-comment">-- Generate location directive</span><span>
</span><span id="line-129"></span><span>  </span><span id="local-6989586621682863619"><span class="annot"><a href="#local-6989586621682863619"><span class="hs-identifier hs-var">dbg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; NatM (Maybe DebugBlock)
</span><a href="GHC.CmmToAsm.Monad.html#getDebugBlock"><span class="hs-identifier hs-var">getDebugBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmBlock -&gt; BlockId
forall (x :: Extensibility). Block CmmNode C x -&gt; BlockId
forall (thing :: Extensibility -&gt; Extensibility -&gt; *)
       (x :: Extensibility).
NonLocal thing =&gt;
thing C x -&gt; BlockId
</span><a href="GHC.Cmm.Dataflow.Graph.html#entryLabel"><span class="hs-identifier hs-var">entryLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CmmBlock
</span><a href="#local-6989586621682863611"><span class="hs-identifier hs-var">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621682863620"><span class="annot"><a href="#local-6989586621682863620"><span class="hs-identifier hs-var">loc_instrs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Cmm.DebugBlock.html#dblSourceTick"><span class="hs-identifier hs-var">dblSourceTick</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">=&lt;&lt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682863619"><span class="hs-identifier hs-type">dbg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-131"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#SourceNote"><span class="hs-identifier hs-type">SourceNote</span></a></span><span> </span><span id="local-6989586621682863624"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682863624"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.FastString.html#LexicalFastString"><span class="hs-identifier hs-type">LexicalFastString</span></a></span><span> </span><span id="local-6989586621682863626"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682863626"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682863627"><span class="annot"><a href="#local-6989586621682863627"><span class="hs-identifier hs-var">fileid</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; NatM Int
</span><a href="GHC.CmmToAsm.Monad.html#getFileId"><span class="hs-identifier hs-var">getFileId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; FastString
</span><a href="GHC.Types.SrcLoc.html#srcSpanFile"><span class="hs-identifier hs-var">srcSpanFile</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682863624"><span class="hs-identifier hs-var">span</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863628"><span class="annot"><a href="#local-6989586621682863628"><span class="hs-identifier hs-var hs-var">line</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Int
</span><a href="GHC.Types.SrcLoc.html#srcSpanStartLine"><span class="hs-identifier hs-var">srcSpanStartLine</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682863624"><span class="hs-identifier hs-var">span</span></a></span><span class="hs-special">;</span><span> </span><span id="local-6989586621682863629"><span class="annot"><a href="#local-6989586621682863629"><span class="hs-identifier hs-var hs-var">col</span></a></span></span><span> </span><span class="hs-glyph">=</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Int
</span><a href="GHC.Types.SrcLoc.html#srcSpanStartCol"><span class="hs-identifier hs-var">srcSpanStartCol</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682863624"><span class="hs-identifier hs-var">span</span></a></span><span>
</span><span id="line-134"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#LOCATION"><span class="hs-identifier hs-type">LOCATION</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863627"><span class="hs-identifier hs-type">fileid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863628"><span class="hs-identifier hs-type">line</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863629"><span class="hs-identifier hs-type">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.FastString.html#unpackFS"><span class="hs-identifier hs-type">unpackFS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863626"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><span class="annottext">Maybe CmmTickish
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-136"></span><span>  </span><span id="local-6989586621682863634"><span class="annot"><a href="#local-6989586621682863634"><span class="hs-identifier hs-var">mid_instrs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#stmtsToInstrs"><span class="hs-identifier hs-type">stmtsToInstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863617"><span class="hs-identifier hs-type">stmts</span></a></span><span>
</span><span id="line-137"></span><span>  </span><span id="local-6989586621682863636"><span class="annot"><a href="#local-6989586621682863636"><span class="hs-identifier hs-var">tail_instrs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#stmtToInstrs"><span class="hs-identifier hs-type">stmtToInstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863613"><span class="hs-identifier hs-type">tail</span></a></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863638"><span class="annot"><a href="#local-6989586621682863638"><span class="hs-identifier hs-var hs-var">instrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863620"><span class="hs-identifier hs-var">loc_instrs</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863634"><span class="hs-identifier hs-var">mid_instrs</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863636"><span class="hs-identifier hs-var">tail_instrs</span></a></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-comment">-- code generation may introduce new basic block boundaries, which</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-comment">-- are indicated by the NEWBLOCK instruction.  We must split up the</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-comment">-- instruction stream into basic blocks again.  Also, we extract</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-comment">-- LDATAs here too.</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-144"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682863640"><span class="annot"><a href="#local-6989586621682863640"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863641"><span class="annot"><a href="#local-6989586621682863641"><span class="hs-identifier hs-var">other_blocks</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863642"><span class="annot"><a href="#local-6989586621682863642"><span class="hs-identifier hs-var">statics</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#foldrOL"><span class="hs-identifier hs-type">foldrOL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863644"><span class="hs-identifier hs-type">mkBlocks</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682863638"><span class="hs-identifier hs-type">instrs</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span>        </span><span id="local-6989586621682863644"><span class="annot"><a href="#local-6989586621682863644"><span class="hs-identifier hs-var hs-var">mkBlocks</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span id="local-6989586621682863646"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863646"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682863647"><span class="annot"><span class="annottext">[Instr]
</span><a href="#local-6989586621682863647"><span class="hs-identifier hs-var">instrs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863648"><span class="annot"><span class="annottext">[NatBasicBlock Instr]
</span><a href="#local-6989586621682863648"><span class="hs-identifier hs-var">blocks</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863649"><span class="annot"><span class="annottext">[GenCmmDecl RawCmmStatics h g]
</span><a href="#local-6989586621682863649"><span class="hs-identifier hs-var">statics</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; [Instr] -&gt; NatBasicBlock Instr
forall i. BlockId -&gt; [i] -&gt; GenBasicBlock i
</span><a href="GHC.Cmm.html#BasicBlock"><span class="hs-identifier hs-var">BasicBlock</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863646"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr]
</span><a href="#local-6989586621682863647"><span class="hs-identifier hs-var">instrs</span></a></span><span> </span><span class="annot"><span class="annottext">NatBasicBlock Instr
-&gt; [NatBasicBlock Instr] -&gt; [NatBasicBlock Instr]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[NatBasicBlock Instr]
</span><a href="#local-6989586621682863648"><span class="hs-identifier hs-var">blocks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[GenCmmDecl RawCmmStatics h g]
</span><a href="#local-6989586621682863649"><span class="hs-identifier hs-var">statics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>        </span><span class="annot"><a href="#local-6989586621682863644"><span class="hs-identifier hs-var">mkBlocks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#LDATA"><span class="hs-identifier hs-type">LDATA</span></a></span><span> </span><span id="local-6989586621682863651"><span class="annot"><span class="annottext">Section
</span><a href="#local-6989586621682863651"><span class="hs-identifier hs-var">sec</span></a></span></span><span> </span><span id="local-6989586621682863652"><span class="annot"><span class="annottext">RawCmmStatics
</span><a href="#local-6989586621682863652"><span class="hs-identifier hs-var">dat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682863653"><span class="annot"><span class="annottext">[Instr]
</span><a href="#local-6989586621682863653"><span class="hs-identifier hs-var">instrs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863654"><span class="annot"><span class="annottext">[NatBasicBlock Instr]
</span><a href="#local-6989586621682863654"><span class="hs-identifier hs-var">blocks</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863655"><span class="annot"><span class="annottext">[GenCmmDecl RawCmmStatics h g]
</span><a href="#local-6989586621682863655"><span class="hs-identifier hs-var">statics</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Instr]
</span><a href="#local-6989586621682863653"><span class="hs-identifier hs-var">instrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NatBasicBlock Instr]
</span><a href="#local-6989586621682863654"><span class="hs-identifier hs-var">blocks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Section -&gt; RawCmmStatics -&gt; GenCmmDecl RawCmmStatics h g
forall d h g. Section -&gt; d -&gt; GenCmmDecl d h g
</span><a href="GHC.Cmm.html#CmmData"><span class="hs-identifier hs-var">CmmData</span></a></span><span> </span><span class="annot"><span class="annottext">Section
</span><a href="#local-6989586621682863651"><span class="hs-identifier hs-var">sec</span></a></span><span> </span><span class="annot"><span class="annottext">RawCmmStatics
</span><a href="#local-6989586621682863652"><span class="hs-identifier hs-var">dat</span></a></span><span class="annot"><span class="annottext">GenCmmDecl RawCmmStatics h g
-&gt; [GenCmmDecl RawCmmStatics h g] -&gt; [GenCmmDecl RawCmmStatics h g]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[GenCmmDecl RawCmmStatics h g]
</span><a href="#local-6989586621682863655"><span class="hs-identifier hs-var">statics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>        </span><span class="annot"><a href="#local-6989586621682863644"><span class="hs-identifier hs-var">mkBlocks</span></a></span><span> </span><span id="local-6989586621682863656"><span class="annot"><span class="annottext">Instr
</span><a href="#local-6989586621682863656"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682863657"><span class="annot"><span class="annottext">[Instr]
</span><a href="#local-6989586621682863657"><span class="hs-identifier hs-var">instrs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863658"><span class="annot"><span class="annottext">[NatBasicBlock Instr]
</span><a href="#local-6989586621682863658"><span class="hs-identifier hs-var">blocks</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863659"><span class="annot"><span class="annottext">[GenCmmDecl RawCmmStatics h g]
</span><a href="#local-6989586621682863659"><span class="hs-identifier hs-var">statics</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Instr
</span><a href="#local-6989586621682863656"><span class="hs-identifier hs-var">instr</span></a></span><span class="annot"><span class="annottext">Instr -&gt; [Instr] -&gt; [Instr]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Instr]
</span><a href="#local-6989586621682863657"><span class="hs-identifier hs-var">instrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NatBasicBlock Instr]
</span><a href="#local-6989586621682863658"><span class="hs-identifier hs-var">blocks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[GenCmmDecl RawCmmStatics h g]
</span><a href="#local-6989586621682863659"><span class="hs-identifier hs-var">statics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.html#BasicBlock"><span class="hs-identifier hs-type">BasicBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863615"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863640"><span class="hs-identifier hs-type">top</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621682863641"><span class="hs-identifier hs-type">other_blocks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682863642"><span class="hs-identifier hs-type">statics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span id="local-6989586621682862707"><span id="local-6989586621682862708"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#stmtsToInstrs"><span class="hs-identifier hs-type">stmtsToInstrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmNode"><span class="hs-identifier hs-type">CmmNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682862707"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682862708"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span></span></span><span>
</span><span id="line-155"></span><span id="stmtsToInstrs"><span class="annot"><span class="annottext">stmtsToInstrs :: forall (e :: Extensibility) (x :: Extensibility).
[CmmNode e x] -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#stmtsToInstrs"><span class="hs-identifier hs-var hs-var">stmtsToInstrs</span></a></span></span><span> </span><span id="local-6989586621682863665"><span class="annot"><span class="annottext">[CmmNode e x]
</span><a href="#local-6989586621682863665"><span class="hs-identifier hs-var">stmts</span></a></span></span><span>
</span><span id="line-156"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682863666"><span class="annot"><a href="#local-6989586621682863666"><span class="hs-identifier hs-var">instrss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(CmmNode e x -&gt; NatM (OrdList Instr))
-&gt; [CmmNode e x] -&gt; NatM [OrdList Instr]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">CmmNode e x -&gt; NatM (OrdList Instr)
forall (e :: Extensibility) (x :: Extensibility).
CmmNode e x -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#stmtToInstrs"><span class="hs-identifier hs-var">stmtToInstrs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmNode e x]
</span><a href="#local-6989586621682863665"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-157"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#concatOL"><span class="hs-identifier hs-type">concatOL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863666"><span class="hs-identifier hs-type">instrss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span id="local-6989586621682862709"><span id="local-6989586621682862710"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#stmtToInstrs"><span class="hs-identifier hs-type">stmtToInstrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmNode"><span class="hs-identifier hs-type">CmmNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682862709"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682862710"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span></span></span><span>
</span><span id="line-160"></span><span id="stmtToInstrs"><span class="annot"><span class="annottext">stmtToInstrs :: forall (e :: Extensibility) (x :: Extensibility).
CmmNode e x -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#stmtToInstrs"><span class="hs-identifier hs-var hs-var">stmtToInstrs</span></a></span></span><span> </span><span id="local-6989586621682863673"><span class="annot"><span class="annottext">CmmNode e x
</span><a href="#local-6989586621682863673"><span class="hs-identifier hs-var">stmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621682863674"><span class="annot"><a href="#local-6989586621682863674"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM NCGConfig
</span><a href="GHC.CmmToAsm.Monad.html#getConfig"><span class="hs-identifier hs-var">getConfig</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span id="local-6989586621682863675"><span class="annot"><a href="#local-6989586621682863675"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-type">getPlatform</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682863673"><span class="hs-identifier hs-type">stmt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-164"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmComment"><span class="hs-identifier hs-type">CmmComment</span></a></span><span> </span><span id="local-6989586621682863680"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682863680"><span class="hs-identifier hs-var">s</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#COMMENT"><span class="hs-identifier hs-var">COMMENT</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682863680"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmTick"><span class="hs-identifier hs-type">CmmTick</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmUnwind"><span class="hs-identifier hs-type">CmmUnwind</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmAssign"><span class="hs-identifier hs-type">CmmAssign</span></a></span><span> </span><span id="local-6989586621682863693"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863693"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621682863694"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863694"><span class="hs-identifier hs-var">src</span></a></span></span><span>
</span><span id="line-169"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloatType"><span class="hs-identifier hs-var">isFloatType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863696"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmReg -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_FltCode"><span class="hs-identifier hs-var">assignReg_FltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863698"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863693"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863694"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-170"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863675"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-171"></span><span>        </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier hs-var">isWord64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863696"><span class="hs-identifier hs-var">ty</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_I64Code"><span class="hs-identifier hs-var">assignReg_I64Code</span></a></span><span>      </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863693"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863694"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-172"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmReg -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_IntCode"><span class="hs-identifier hs-var">assignReg_IntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863698"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863693"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863694"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-173"></span><span>        </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682863696"><span class="annot"><span class="annottext">ty :: CmmType
</span><a href="#local-6989586621682863696"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; CmmType
</span><a href="GHC.Cmm.Reg.html#cmmRegType"><span class="hs-identifier hs-var">cmmRegType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863693"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-174"></span><span>              </span><span id="local-6989586621682863698"><span class="annot"><span class="annottext">format :: Format
</span><a href="#local-6989586621682863698"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863696"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmStore"><span class="hs-identifier hs-type">CmmStore</span></a></span><span> </span><span id="local-6989586621682863709"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863709"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682863710"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863710"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621682863711"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621682863711"><span class="hs-identifier hs-var">_alignment</span></a></span></span><span>
</span><span id="line-177"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloatType"><span class="hs-identifier hs-var">isFloatType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863712"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_FltCode"><span class="hs-identifier hs-var">assignMem_FltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863714"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863709"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863710"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-178"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863675"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-179"></span><span>        </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier hs-var">isWord64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863712"><span class="hs-identifier hs-var">ty</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_I64Code"><span class="hs-identifier hs-var">assignMem_I64Code</span></a></span><span>      </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863709"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863710"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-180"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_IntCode"><span class="hs-identifier hs-var">assignMem_IntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863714"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863709"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863710"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-181"></span><span>        </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682863712"><span class="annot"><span class="annottext">ty :: CmmType
</span><a href="#local-6989586621682863712"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; CmmExpr -&gt; CmmType
</span><a href="GHC.Cmm.Expr.html#cmmExprType"><span class="hs-identifier hs-var">cmmExprType</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863675"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863710"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-182"></span><span>              </span><span id="local-6989586621682863714"><span class="annot"><span class="annottext">format :: Format
</span><a href="#local-6989586621682863714"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863712"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmUnsafeForeignCall"><span class="hs-identifier hs-type">CmmUnsafeForeignCall</span></a></span><span> </span><span id="local-6989586621682863721"><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621682863721"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621682863722"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682863722"><span class="hs-identifier hs-var">result_regs</span></a></span></span><span> </span><span id="local-6989586621682863723"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682863723"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-185"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignTarget -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621682863721"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682863722"><span class="hs-identifier hs-var">result_regs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682863723"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmBranch"><span class="hs-identifier hs-type">CmmBranch</span></a></span><span> </span><span id="local-6989586621682863728"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863728"><span class="hs-identifier hs-var">id</span></a></span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genBranch"><span class="hs-identifier hs-var">genBranch</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863728"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmCondBranch"><span class="hs-identifier hs-type">CmmCondBranch</span></a></span><span> </span><span id="local-6989586621682863736"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863736"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621682863737"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863737"><span class="hs-identifier hs-var">true</span></a></span></span><span> </span><span id="local-6989586621682863738"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863738"><span class="hs-identifier hs-var">false</span></a></span></span><span> </span><span id="local-6989586621682863739"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621682863739"><span class="hs-identifier hs-var">prediction</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-189"></span><span>      </span><span id="local-6989586621682863740"><span class="annot"><a href="#local-6989586621682863740"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; CmmExpr -&gt; Maybe Bool -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCondJump"><span class="hs-identifier hs-var">genCondJump</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863737"><span class="hs-identifier hs-var">true</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863736"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621682863739"><span class="hs-identifier hs-var">prediction</span></a></span><span>
</span><span id="line-190"></span><span>      </span><span id="local-6989586621682863742"><span class="annot"><a href="#local-6989586621682863742"><span class="hs-identifier hs-var">b2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genBranch"><span class="hs-identifier hs-type">genBranch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863738"><span class="hs-identifier hs-type">false</span></a></span><span>
</span><span id="line-191"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682863740"><span class="hs-identifier hs-type">b1</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863742"><span class="hs-identifier hs-type">b2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmSwitch"><span class="hs-identifier hs-type">CmmSwitch</span></a></span><span> </span><span id="local-6989586621682863746"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863746"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621682863747"><span class="annot"><span class="annottext">SwitchTargets
</span><a href="#local-6989586621682863747"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NCGConfig -&gt; CmmExpr -&gt; SwitchTargets -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genSwitch"><span class="hs-identifier hs-var">genSwitch</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682863674"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863746"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">SwitchTargets
</span><a href="#local-6989586621682863747"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmCall"><span class="hs-identifier hs-type">CmmCall</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cml_target :: CmmNode O C -&gt; CmmExpr
</span><a href="GHC.Cmm.Node.html#cml_target"><span class="hs-identifier hs-var">cml_target</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682863753"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863753"><span class="hs-identifier hs-var">arg</span></a></span></span><span>
</span><span id="line-194"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cml_args_regs :: CmmNode O C -&gt; [GlobalRegUse]
</span><a href="GHC.Cmm.Node.html#cml_args_regs"><span class="hs-identifier hs-var">cml_args_regs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682863755"><span class="annot"><span class="annottext">[GlobalRegUse]
</span><a href="#local-6989586621682863755"><span class="hs-identifier hs-var">gregs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; [RegWithFormat] -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genJump"><span class="hs-identifier hs-var">genJump</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863753"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; [GlobalRegUse] -&gt; [RegWithFormat]
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#jumpRegs"><span class="hs-identifier hs-var">jumpRegs</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863675"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRegUse]
</span><a href="#local-6989586621682863755"><span class="hs-identifier hs-var">gregs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="annottext">CmmNode e x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;stmtToInstrs: statement should have been cps'd away&quot;</span></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#jumpRegs"><span class="hs-identifier hs-type">jumpRegs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Reg.html#GlobalRegUse"><span class="hs-identifier hs-type">GlobalRegUse</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#RegWithFormat"><span class="hs-identifier hs-type">RegWithFormat</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-199"></span><span id="jumpRegs"><span class="annot"><span class="annottext">jumpRegs :: Platform -&gt; [GlobalRegUse] -&gt; [RegWithFormat]
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#jumpRegs"><span class="hs-identifier hs-var hs-var">jumpRegs</span></a></span></span><span> </span><span id="local-6989586621682863758"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863758"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621682863759"><span class="annot"><span class="annottext">[GlobalRegUse]
</span><a href="#local-6989586621682863759"><span class="hs-identifier hs-var">gregs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Format -&gt; RegWithFormat
</span><a href="GHC.CmmToAsm.Format.html#RegWithFormat"><span class="hs-identifier hs-var">RegWithFormat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealReg -&gt; Reg
</span><a href="GHC.Platform.Reg.html#RegReal"><span class="hs-identifier hs-var">RegReal</span></a></span><span> </span><span class="annot"><span class="annottext">RealReg
</span><a href="#local-6989586621682863762"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863763"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#GlobalRegUse"><span class="hs-identifier hs-type">GlobalRegUse</span></a></span><span> </span><span id="local-6989586621682863765"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621682863765"><span class="hs-identifier hs-var">gr</span></a></span></span><span> </span><span id="local-6989586621682863763"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863763"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalRegUse]
</span><a href="#local-6989586621682863759"><span class="hs-identifier hs-var">gregs</span></a></span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682863762"><span class="annot"><span class="annottext">RealReg
</span><a href="#local-6989586621682863762"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Platform -&gt; GlobalReg -&gt; Maybe RealReg
</span><a href="GHC.Platform.Regs.html#globalRegMaybe"><span class="hs-identifier hs-var">globalRegMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863758"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621682863765"><span class="hs-identifier hs-var">gr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-205"></span><span class="hs-comment">-- | 'InstrBlock's are the insn sequences generated by the insn selectors.</span><span>
</span><span id="line-206"></span><span class="hs-comment">--      They are really trees of insns to facilitate fast appending, where a</span><span>
</span><span id="line-207"></span><span class="hs-comment">--      left-to-right traversal yields the insns in the correct order.</span><span>
</span><span id="line-208"></span><span class="hs-comment">--</span><span>
</span><span id="line-209"></span><span class="hs-keyword">type</span><span> </span><span id="InstrBlock"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-var">InstrBlock</span></a></span></span><span>
</span><span id="line-210"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-comment">-- | Register's passed up the tree.  If the stix code forces the register</span><span>
</span><span id="line-214"></span><span class="hs-comment">--      to live in a pre-decided machine register, it comes out as @Fixed@;</span><span>
</span><span id="line-215"></span><span class="hs-comment">--      otherwise, it comes out as @Any@, and the parent can decide which</span><span>
</span><span id="line-216"></span><span class="hs-comment">--      register to put it in.</span><span>
</span><span id="line-217"></span><span class="hs-comment">--</span><span>
</span><span id="line-218"></span><span class="hs-keyword">data</span><span> </span><span id="Register"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-var">Register</span></a></span></span><span>
</span><span id="line-219"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span id="Fixed"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-var">Fixed</span></a></span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-220"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span id="Any"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-var">Any</span></a></span></span><span>   </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#swizzleRegisterRep"><span class="hs-identifier hs-type">swizzleRegisterRep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-224"></span><span id="swizzleRegisterRep"><span class="annot"><span class="annottext">swizzleRegisterRep :: Register -&gt; Format -&gt; Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#swizzleRegisterRep"><span class="hs-identifier hs-var hs-var">swizzleRegisterRep</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-type">Fixed</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682863770"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863770"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621682863771"><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863771"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682863772"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863772"><span class="hs-identifier hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; OrdList Instr -&gt; Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-var">Fixed</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863772"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863770"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863771"><span class="hs-identifier hs-var">code</span></a></span><span>
</span><span id="line-225"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#swizzleRegisterRep"><span class="hs-identifier hs-var">swizzleRegisterRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682863773"><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682863773"><span class="hs-identifier hs-var">codefn</span></a></span></span><span class="hs-special">)</span><span>     </span><span id="local-6989586621682863774"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863774"><span class="hs-identifier hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; (Reg -&gt; OrdList Instr) -&gt; Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span>   </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863774"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682863773"><span class="hs-identifier hs-var">codefn</span></a></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-type">getLocalRegReg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#LocalReg"><span class="hs-identifier hs-type">LocalReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span>
</span><span id="line-228"></span><span id="getLocalRegReg"><span class="annot"><span class="annottext">getLocalRegReg :: CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var hs-var">getLocalRegReg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#LocalReg"><span class="hs-identifier hs-type">LocalReg</span></a></span><span> </span><span id="local-6989586621682863778"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682863778"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682863779"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863779"><span class="hs-identifier hs-var">pk</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VirtualReg -&gt; Reg
</span><a href="GHC.Platform.Reg.html#RegVirtual"><span class="hs-identifier hs-var">RegVirtual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique -&gt; Format -&gt; VirtualReg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#mkVirtualReg"><span class="hs-identifier hs-var">mkVirtualReg</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682863778"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863779"><span class="hs-identifier hs-var">pk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="annot"><span class="hs-comment">-- | Grab the Reg for a CmmReg</span></span><span>
</span><span id="line-232"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegisterReg"><span class="hs-identifier hs-type">getRegisterReg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span id="getRegisterReg"><span class="annot"><span class="annottext">getRegisterReg :: Platform -&gt; CmmReg -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegisterReg"><span class="hs-identifier hs-var hs-var">getRegisterReg</span></a></span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-type">CmmLocal</span></a></span><span> </span><span id="local-6989586621682863784"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682863784"><span class="hs-identifier hs-var">local_reg</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682863784"><span class="hs-identifier hs-var">local_reg</span></a></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegisterReg"><span class="hs-identifier hs-var">getRegisterReg</span></a></span><span> </span><span id="local-6989586621682863785"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863785"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621682863787"><span class="annot"><span class="annottext">GlobalRegUse
</span><a href="#local-6989586621682863787"><span class="hs-identifier hs-var">mid</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; GlobalReg -&gt; Maybe RealReg
</span><a href="GHC.Platform.Regs.html#globalRegMaybe"><span class="hs-identifier hs-var">globalRegMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863785"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRegUse -&gt; GlobalReg
</span><a href="GHC.Cmm.Reg.html#globalRegUse_reg"><span class="hs-identifier hs-var">globalRegUse_reg</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRegUse
</span><a href="#local-6989586621682863787"><span class="hs-identifier hs-var">mid</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-239"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682863789"><span class="annot"><span class="annottext">RealReg
</span><a href="#local-6989586621682863789"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RealReg -&gt; Reg
</span><a href="GHC.Platform.Reg.html#RegReal"><span class="hs-identifier hs-var">RegReal</span></a></span><span> </span><span class="annot"><span class="annottext">RealReg
</span><a href="#local-6989586621682863789"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-240"></span><span>        </span><span class="annot"><span class="annottext">Maybe RealReg
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Reg
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;getRegisterReg-memory&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmReg -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmReg -&gt; SDoc) -&gt; CmmReg -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRegUse -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-var">CmmGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRegUse
</span><a href="#local-6989586621682863787"><span class="hs-identifier hs-var">mid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>        </span><span class="hs-comment">-- By this stage, the only MagicIds remaining should be the</span><span>
</span><span id="line-242"></span><span>        </span><span class="hs-comment">-- ones which map to a real machine register on this</span><span>
</span><span id="line-243"></span><span>        </span><span class="hs-comment">-- platform.  Hence ...</span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="annot"><span class="hs-comment">-- | Convert a BlockId to some CmmStatic data</span></span><span>
</span><span id="line-246"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#jumpTableEntry"><span class="hs-identifier hs-type">jumpTableEntry</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Config.html#NCGConfig"><span class="hs-identifier hs-type">NCGConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Cmm.BlockId.html#BlockId"><span class="hs-identifier hs-type">BlockId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.html#CmmStatic"><span class="hs-identifier hs-type">CmmStatic</span></a></span><span>
</span><span id="line-247"></span><span id="jumpTableEntry"><span class="annot"><span class="annottext">jumpTableEntry :: NCGConfig -&gt; Maybe BlockId -&gt; CmmStatic
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#jumpTableEntry"><span class="hs-identifier hs-var hs-var">jumpTableEntry</span></a></span></span><span> </span><span id="local-6989586621682863793"><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682863793"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe BlockId
</span><span class="hs-identifier hs-var">Nothing</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; CmmStatic
</span><a href="GHC.Cmm.html#CmmStaticLit"><span class="hs-identifier hs-var">CmmStaticLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Width -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-var">CmmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NCGConfig -&gt; Width
</span><a href="GHC.CmmToAsm.Config.html#ncgWordWidth"><span class="hs-identifier hs-var">ncgWordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682863793"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#jumpTableEntry"><span class="hs-identifier hs-var">jumpTableEntry</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682863797"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863797"><span class="hs-identifier hs-var">blockid</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; CmmStatic
</span><a href="GHC.Cmm.html#CmmStaticLit"><span class="hs-identifier hs-var">CmmStaticLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-var">CmmLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682863799"><span class="hs-identifier hs-var">blockLabel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682863799"><span class="annot"><span class="annottext">blockLabel :: CLabel
</span><a href="#local-6989586621682863799"><span class="hs-identifier hs-var hs-var">blockLabel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; CLabel
</span><a href="GHC.Cmm.BlockId.html#blockLbl"><span class="hs-identifier hs-var">blockLbl</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682863797"><span class="hs-identifier hs-var">blockid</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- General things for putting together code sequences</span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span class="hs-comment">-- Expand CmmRegOff.  ToDo: should we do it this way around, or convert</span><span>
</span><span id="line-257"></span><span class="hs-comment">-- CmmExprs into CmmRegOff?</span><span>
</span><span id="line-258"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#mangleIndexTree"><span class="hs-identifier hs-type">mangleIndexTree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-259"></span><span id="mangleIndexTree"><span class="annot"><span class="annottext">mangleIndexTree :: CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#mangleIndexTree"><span class="hs-identifier hs-var hs-var">mangleIndexTree</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmRegOff"><span class="hs-identifier hs-type">CmmRegOff</span></a></span><span> </span><span id="local-6989586621682863802"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863802"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621682863803"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682863803"><span class="hs-identifier hs-var">off</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MachOp -&gt; [CmmExpr] -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-var">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; MachOp
</span><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-var">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682863806"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmReg -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-var">CmmReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863802"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-var">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Width -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-var">CmmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682863803"><span class="hs-identifier hs-var">off</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682863806"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-261"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682863806"><span class="annot"><span class="annottext">width :: Width
</span><a href="#local-6989586621682863806"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Width
</span><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier hs-var">typeWidth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmReg -&gt; CmmType
</span><a href="GHC.Cmm.Reg.html#cmmRegType"><span class="hs-identifier hs-var">cmmRegType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863802"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#mangleIndexTree"><span class="hs-identifier hs-var">mangleIndexTree</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-264"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; CmmExpr
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.mangleIndexTree: no match&quot;</span></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-267"></span><span class="hs-comment">--  Code gen for 64-bit arithmetic on 32-bit platforms</span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-comment">{-
Simple support for generating 64-bit code (ie, 64 bit values and 64
bit assignments) on 32-bit platforms.  Unlike the main code generator
we merely shoot for generating working code as simply as possible, and
pay little attention to code quality.  Specifically, there is no
attempt to deal cleverly with the fixed-vs-floating register
distinction; all values are generated into (pairs of) floating
registers, even if this would mean some redundant reg-reg moves as a
result.  Only one of the VRegUniques is returned, since it will be
of the VRegUniqueLo form, and the upper-half VReg can be determined
by applying getHiVRegFromLo to it.
-}</span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="hs-comment">-- | Compute an expression into a register, but</span><span>
</span><span id="line-283"></span><span class="hs-comment">--      we don't mind which one it is.</span><span>
</span><span id="line-284"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span id="getSomeReg"><span class="annot"><span class="annottext">getSomeReg :: CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var hs-var">getSomeReg</span></a></span></span><span> </span><span id="local-6989586621682863811"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863811"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-286"></span><span>  </span><span id="local-6989586621682863812"><span class="annot"><a href="#local-6989586621682863812"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister"><span class="hs-identifier hs-var">getRegister</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863811"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682863812"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-288"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span id="local-6989586621682863814"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863814"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span id="local-6989586621682863815"><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682863815"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-289"></span><span>        </span><span id="local-6989586621682863816"><span class="annot"><a href="#local-6989586621682863816"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-var">getNewRegNat</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863814"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-290"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682863816"><span class="hs-identifier hs-type">tmp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682863815"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863816"><span class="hs-identifier hs-type">tmp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-type">Fixed</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682863817"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863817"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621682863818"><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863818"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-292"></span><span>        </span><span class="annot"><span class="annottext">(Reg, OrdList Instr) -&gt; NatM (Reg, OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863817"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863818"><span class="hs-identifier hs-var">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getI64Amodes"><span class="hs-identifier hs-type">getI64Amodes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrMode"><span class="hs-identifier hs-type">AddrMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrMode"><span class="hs-identifier hs-type">AddrMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span id="getI64Amodes"><span class="annot"><span class="annottext">getI64Amodes :: CmmExpr -&gt; NatM (AddrMode, AddrMode, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getI64Amodes"><span class="hs-identifier hs-var hs-var">getI64Amodes</span></a></span></span><span> </span><span id="local-6989586621682863820"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863820"><span class="hs-identifier hs-var">addrTree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-296"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682863822"><span class="annot"><a href="#local-6989586621682863822"><span class="hs-identifier hs-var">hi_addr</span></a></span></span><span> </span><span id="local-6989586621682863823"><span class="annot"><a href="#local-6989586621682863823"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863820"><span class="hs-identifier hs-var">addrTree</span></a></span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#addrOffset"><span class="hs-identifier hs-type">addrOffset</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863822"><span class="hs-identifier hs-type">hi_addr</span></a></span><span> </span><span class="annot"><span class="hs-number">4</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-298"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682863827"><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863827"><span class="hs-identifier hs-var">lo_addr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(AddrMode, AddrMode, OrdList Instr)
-&gt; NatM (AddrMode, AddrMode, OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863822"><span class="hs-identifier hs-var">hi_addr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863827"><span class="hs-identifier hs-var">lo_addr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863823"><span class="hs-identifier hs-var">addr_code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>        </span><span class="annot"><span class="annottext">Maybe AddrMode
</span><span class="hs-identifier hs-var">Nothing</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682863828"><span class="annot"><a href="#local-6989586621682863828"><span class="hs-identifier hs-var">hi_ptr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682863829"><span class="annot"><a href="#local-6989586621682863829"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863820"><span class="hs-identifier hs-var">addrTree</span></a></span><span>
</span><span id="line-300"></span><span>                           </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863828"><span class="hs-identifier hs-type">hi_ptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-301"></span><span>                                   </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863828"><span class="hs-identifier hs-type">hi_ptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">4</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-302"></span><span>                                   </span><span class="annot"><a href="#local-6989586621682863829"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_I64Code"><span class="hs-identifier hs-type">assignMem_I64Code</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-306"></span><span id="assignMem_I64Code"><span class="annot"><span class="annottext">assignMem_I64Code :: CmmExpr -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_I64Code"><span class="hs-identifier hs-var hs-var">assignMem_I64Code</span></a></span></span><span> </span><span id="local-6989586621682863832"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863832"><span class="hs-identifier hs-var">addrTree</span></a></span></span><span> </span><span id="local-6989586621682863833"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863833"><span class="hs-identifier hs-var">valueTree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-307"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682863834"><span class="annot"><a href="#local-6989586621682863834"><span class="hs-identifier hs-var">hi_addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682863835"><span class="annot"><a href="#local-6989586621682863835"><span class="hs-identifier hs-var">lo_addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682863836"><span class="annot"><a href="#local-6989586621682863836"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (AddrMode, AddrMode, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getI64Amodes"><span class="hs-identifier hs-var">getI64Amodes</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863832"><span class="hs-identifier hs-var">addrTree</span></a></span><span>
</span><span id="line-308"></span><span>        </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682863838"><span class="annot"><a href="#local-6989586621682863838"><span class="hs-identifier hs-var">vcode</span></a></span></span><span> </span><span id="local-6989586621682863839"><span class="annot"><a href="#local-6989586621682863839"><span class="hs-identifier hs-var">rhi</span></a></span></span><span> </span><span id="local-6989586621682863840"><span class="annot"><a href="#local-6989586621682863840"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-type">iselExpr64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863833"><span class="hs-identifier hs-type">valueTree</span></a></span><span>
</span><span id="line-309"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-310"></span><span>                </span><span class="hs-comment">-- Big-endian store</span><span>
</span><span id="line-311"></span><span>                </span><span id="local-6989586621682863842"><span class="annot"><a href="#local-6989586621682863842"><span class="hs-identifier hs-var hs-var">mov_hi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863839"><span class="hs-identifier hs-var">rhi</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863834"><span class="hs-identifier hs-var">hi_addr</span></a></span><span>
</span><span id="line-312"></span><span>                </span><span id="local-6989586621682863845"><span class="annot"><a href="#local-6989586621682863845"><span class="hs-identifier hs-var hs-var">mov_lo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863840"><span class="hs-identifier hs-var">rlo</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863835"><span class="hs-identifier hs-var">lo_addr</span></a></span><span>
</span><span id="line-313"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682863838"><span class="hs-identifier hs-type">vcode</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863836"><span class="hs-identifier hs-type">addr_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863845"><span class="hs-identifier hs-type">mov_lo</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863842"><span class="hs-identifier hs-type">mov_hi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_I64Code"><span class="hs-identifier hs-type">assignReg_I64Code</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-317"></span><span id="assignReg_I64Code"><span class="annot"><span class="annottext">assignReg_I64Code :: CmmReg -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_I64Code"><span class="hs-identifier hs-var hs-var">assignReg_I64Code</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-type">CmmLocal</span></a></span><span> </span><span id="local-6989586621682863847"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682863847"><span class="hs-identifier hs-var">lreg</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682863848"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863848"><span class="hs-identifier hs-var">valueTree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-318"></span><span>   </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682863849"><span class="annot"><a href="#local-6989586621682863849"><span class="hs-identifier hs-var">vcode</span></a></span></span><span> </span><span id="local-6989586621682863850"><span class="annot"><a href="#local-6989586621682863850"><span class="hs-identifier hs-var">r_src_hi</span></a></span></span><span> </span><span id="local-6989586621682863851"><span class="annot"><a href="#local-6989586621682863851"><span class="hs-identifier hs-var">r_src_lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863848"><span class="hs-identifier hs-var">valueTree</span></a></span><span>
</span><span id="line-319"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#Reg64"><span class="hs-identifier hs-type">Reg64</span></a></span><span> </span><span id="local-6989586621682863853"><span class="annot"><a href="#local-6989586621682863853"><span class="hs-identifier hs-var">r_dst_hi</span></a></span></span><span> </span><span id="local-6989586621682863854"><span class="annot"><a href="#local-6989586621682863854"><span class="hs-identifier hs-var">r_dst_lo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#localReg64"><span class="hs-identifier hs-type">localReg64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863847"><span class="hs-identifier hs-type">lreg</span></a></span><span>
</span><span id="line-320"></span><span>       </span><span id="local-6989586621682863855"><span class="annot"><a href="#local-6989586621682863855"><span class="hs-identifier hs-var hs-var">mov_lo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863854"><span class="hs-identifier hs-var">r_dst_lo</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863851"><span class="hs-identifier hs-var">r_src_lo</span></a></span><span>
</span><span id="line-321"></span><span>       </span><span id="local-6989586621682863857"><span class="annot"><a href="#local-6989586621682863857"><span class="hs-identifier hs-var hs-var">mov_hi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863853"><span class="hs-identifier hs-var">r_dst_hi</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863850"><span class="hs-identifier hs-var">r_src_hi</span></a></span><span>
</span><span id="line-322"></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-323"></span><span>        </span><span class="annot"><a href="#local-6989586621682863849"><span class="hs-identifier hs-type">vcode</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863855"><span class="hs-identifier hs-type">mov_lo</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863857"><span class="hs-identifier hs-type">mov_hi</span></a></span><span>
</span><span id="line-324"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_I64Code"><span class="hs-identifier hs-var">assignReg_I64Code</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-327"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;assignReg_I64Code(powerpc): invalid lvalue&quot;</span></span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-type">iselExpr64</span></a></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span id="iselExpr64"><span class="annot"><span class="annottext">iselExpr64 :: CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var hs-var">iselExpr64</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682863859"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863859"><span class="hs-identifier hs-var">addrTree</span></a></span></span><span> </span><span id="local-6989586621682863860"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863860"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier hs-var">isWord64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863860"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-332"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682863861"><span class="annot"><a href="#local-6989586621682863861"><span class="hs-identifier hs-var">hi_addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682863862"><span class="annot"><a href="#local-6989586621682863862"><span class="hs-identifier hs-var">lo_addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682863863"><span class="annot"><a href="#local-6989586621682863863"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (AddrMode, AddrMode, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getI64Amodes"><span class="hs-identifier hs-var">getI64Amodes</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863859"><span class="hs-identifier hs-var">addrTree</span></a></span><span>
</span><span id="line-333"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#Reg64"><span class="hs-identifier hs-type">Reg64</span></a></span><span> </span><span id="local-6989586621682863864"><span class="annot"><a href="#local-6989586621682863864"><span class="hs-identifier hs-var">rhi</span></a></span></span><span> </span><span id="local-6989586621682863865"><span class="annot"><a href="#local-6989586621682863865"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewReg64"><span class="hs-identifier hs-type">getNewReg64</span></a></span><span>
</span><span id="line-334"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863866"><span class="annot"><a href="#local-6989586621682863866"><span class="hs-identifier hs-var hs-var">mov_hi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863864"><span class="hs-identifier hs-var">rhi</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863861"><span class="hs-identifier hs-var">hi_addr</span></a></span><span>
</span><span id="line-335"></span><span>        </span><span id="local-6989586621682863868"><span class="annot"><a href="#local-6989586621682863868"><span class="hs-identifier hs-var hs-var">mov_lo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863865"><span class="hs-identifier hs-var">rlo</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863862"><span class="hs-identifier hs-var">lo_addr</span></a></span><span>
</span><span id="line-336"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682863863"><span class="hs-identifier hs-type">addr_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863868"><span class="hs-identifier hs-type">mov_lo</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863866"><span class="hs-identifier hs-type">mov_hi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>                         </span><span class="annot"><a href="#local-6989586621682863864"><span class="hs-identifier hs-type">rhi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863865"><span class="hs-identifier hs-type">rlo</span></a></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-type">CmmLocal</span></a></span><span> </span><span id="local-6989586621682863869"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682863869"><span class="hs-identifier hs-var">local_reg</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#Reg64"><span class="hs-identifier hs-type">Reg64</span></a></span><span> </span><span id="local-6989586621682863870"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863870"><span class="hs-identifier hs-var">hi</span></a></span></span><span> </span><span id="local-6989586621682863871"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863871"><span class="hs-identifier hs-var">lo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; CmmFormal -&gt; Reg64
CmmFormal -&gt; Reg64
</span><a href="GHC.CmmToAsm.Monad.html#localReg64"><span class="hs-identifier hs-var">localReg64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682863869"><span class="hs-identifier hs-var">local_reg</span></a></span><span>
</span><span id="line-341"></span><span>  </span><span class="annot"><span class="annottext">RegCode64 (OrdList Instr) -&gt; NatM (RegCode64 (OrdList Instr))
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList Instr -&gt; Reg -&gt; Reg -&gt; RegCode64 (OrdList Instr)
forall code. code -&gt; Reg -&gt; Reg -&gt; RegCode64 code
</span><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-var">RegCode64</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863870"><span class="hs-identifier hs-var">hi</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863871"><span class="hs-identifier hs-var">lo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682863872"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682863872"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-344"></span><span>  </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#Reg64"><span class="hs-identifier hs-type">Reg64</span></a></span><span> </span><span id="local-6989586621682863873"><span class="annot"><a href="#local-6989586621682863873"><span class="hs-identifier hs-var">rhi</span></a></span></span><span> </span><span id="local-6989586621682863874"><span class="annot"><a href="#local-6989586621682863874"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Reg64
</span><a href="GHC.CmmToAsm.Monad.html#getNewReg64"><span class="hs-identifier hs-var">getNewReg64</span></a></span><span>
</span><span id="line-345"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-346"></span><span>        </span><span id="local-6989586621682863875"><span class="annot"><a href="#local-6989586621682863875"><span class="hs-identifier hs-var hs-var">half0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Word16
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682863872"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word16</span></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>        </span><span id="local-6989586621682863876"><span class="annot"><a href="#local-6989586621682863876"><span class="hs-identifier hs-var hs-var">half1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Word16
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682863872"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="GHC.Prelude.Basic.html#shiftR"><span class="hs-operator hs-var">`shiftR`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word16</span></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>        </span><span id="local-6989586621682863878"><span class="annot"><a href="#local-6989586621682863878"><span class="hs-identifier hs-var hs-var">half2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Word16
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682863872"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="GHC.Prelude.Basic.html#shiftR"><span class="hs-operator hs-var">`shiftR`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word16</span></span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span>        </span><span id="local-6989586621682863879"><span class="annot"><a href="#local-6989586621682863879"><span class="hs-identifier hs-var hs-var">half3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Word16
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682863872"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="GHC.Prelude.Basic.html#shiftR"><span class="hs-operator hs-var">`shiftR`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">48</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word16</span></span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span>        </span><span id="local-6989586621682863880"><span class="annot"><a href="#local-6989586621682863880"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-352"></span><span>                </span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LIS"><span class="hs-identifier hs-var">LIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863874"><span class="hs-identifier hs-var">rlo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682863876"><span class="hs-identifier hs-var">half1</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-353"></span><span>                </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#OR"><span class="hs-identifier hs-var">OR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863874"><span class="hs-identifier hs-var">rlo</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863874"><span class="hs-identifier hs-var">rlo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="annot"><span class="annottext">(Imm -&gt; RI) -&gt; Imm -&gt; RI
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682863875"><span class="hs-identifier hs-var">half0</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-354"></span><span>                </span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LIS"><span class="hs-identifier hs-var">LIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863873"><span class="hs-identifier hs-var">rhi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682863879"><span class="hs-identifier hs-var">half3</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-355"></span><span>                </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#OR"><span class="hs-identifier hs-var">OR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863873"><span class="hs-identifier hs-var">rhi</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863873"><span class="hs-identifier hs-var">rhi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="annot"><span class="annottext">(Imm -&gt; RI) -&gt; Imm -&gt; RI
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682863878"><span class="hs-identifier hs-var">half2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-357"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863880"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863873"><span class="hs-identifier hs-type">rhi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863874"><span class="hs-identifier hs-type">rlo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682863885"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863885"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863886"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863886"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-360"></span><span>   </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682863887"><span class="annot"><a href="#local-6989586621682863887"><span class="hs-identifier hs-var">code1</span></a></span></span><span> </span><span id="local-6989586621682863888"><span class="annot"><a href="#local-6989586621682863888"><span class="hs-identifier hs-var">r1hi</span></a></span></span><span> </span><span id="local-6989586621682863889"><span class="annot"><a href="#local-6989586621682863889"><span class="hs-identifier hs-var">r1lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863885"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-361"></span><span>   </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682863890"><span class="annot"><a href="#local-6989586621682863890"><span class="hs-identifier hs-var">code2</span></a></span></span><span> </span><span id="local-6989586621682863891"><span class="annot"><a href="#local-6989586621682863891"><span class="hs-identifier hs-var">r2hi</span></a></span></span><span> </span><span id="local-6989586621682863892"><span class="annot"><a href="#local-6989586621682863892"><span class="hs-identifier hs-var">r2lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-type">iselExpr64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863886"><span class="hs-identifier hs-type">e2</span></a></span><span>
</span><span id="line-362"></span><span>   </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#Reg64"><span class="hs-identifier hs-type">Reg64</span></a></span><span> </span><span id="local-6989586621682863893"><span class="annot"><a href="#local-6989586621682863893"><span class="hs-identifier hs-var">rhi</span></a></span></span><span> </span><span id="local-6989586621682863894"><span class="annot"><a href="#local-6989586621682863894"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewReg64"><span class="hs-identifier hs-type">getNewReg64</span></a></span><span>
</span><span id="line-363"></span><span>   </span><span class="hs-keyword">let</span><span>
</span><span id="line-364"></span><span>        </span><span id="local-6989586621682863895"><span class="annot"><a href="#local-6989586621682863895"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863887"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>
</span><span id="line-365"></span><span>                </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863890"><span class="hs-identifier hs-var">code2</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>
</span><span id="line-366"></span><span>                </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADDC"><span class="hs-identifier hs-var">ADDC</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863894"><span class="hs-identifier hs-var">rlo</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863889"><span class="hs-identifier hs-var">r1lo</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863892"><span class="hs-identifier hs-var">r2lo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-367"></span><span>                       </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADDE"><span class="hs-identifier hs-var">ADDE</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863893"><span class="hs-identifier hs-var">rhi</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863888"><span class="hs-identifier hs-var">r1hi</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863891"><span class="hs-identifier hs-var">r2hi</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-368"></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863895"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863893"><span class="hs-identifier hs-type">rhi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863894"><span class="hs-identifier hs-type">rlo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Sub"><span class="hs-identifier hs-type">MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682863899"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863899"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863900"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863900"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-371"></span><span>   </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682863901"><span class="annot"><a href="#local-6989586621682863901"><span class="hs-identifier hs-var">code1</span></a></span></span><span> </span><span id="local-6989586621682863902"><span class="annot"><a href="#local-6989586621682863902"><span class="hs-identifier hs-var">r1hi</span></a></span></span><span> </span><span id="local-6989586621682863903"><span class="annot"><a href="#local-6989586621682863903"><span class="hs-identifier hs-var">r1lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863899"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-372"></span><span>   </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682863904"><span class="annot"><a href="#local-6989586621682863904"><span class="hs-identifier hs-var">code2</span></a></span></span><span> </span><span id="local-6989586621682863905"><span class="annot"><a href="#local-6989586621682863905"><span class="hs-identifier hs-var">r2hi</span></a></span></span><span> </span><span id="local-6989586621682863906"><span class="annot"><a href="#local-6989586621682863906"><span class="hs-identifier hs-var">r2lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-type">iselExpr64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863900"><span class="hs-identifier hs-type">e2</span></a></span><span>
</span><span id="line-373"></span><span>   </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#Reg64"><span class="hs-identifier hs-type">Reg64</span></a></span><span> </span><span id="local-6989586621682863907"><span class="annot"><a href="#local-6989586621682863907"><span class="hs-identifier hs-var">rhi</span></a></span></span><span> </span><span id="local-6989586621682863908"><span class="annot"><a href="#local-6989586621682863908"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewReg64"><span class="hs-identifier hs-type">getNewReg64</span></a></span><span>
</span><span id="line-374"></span><span>   </span><span class="hs-keyword">let</span><span>
</span><span id="line-375"></span><span>        </span><span id="local-6989586621682863909"><span class="annot"><a href="#local-6989586621682863909"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863901"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>
</span><span id="line-376"></span><span>                </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863904"><span class="hs-identifier hs-var">code2</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>
</span><span id="line-377"></span><span>                </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SUBFC"><span class="hs-identifier hs-var">SUBFC</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863908"><span class="hs-identifier hs-var">rlo</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863906"><span class="hs-identifier hs-var">r2lo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863903"><span class="hs-identifier hs-var">r1lo</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-378"></span><span>                       </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SUBFE"><span class="hs-identifier hs-var">SUBFE</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863907"><span class="hs-identifier hs-var">rhi</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863905"><span class="hs-identifier hs-var">r2hi</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863902"><span class="hs-identifier hs-var">r1hi</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-379"></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863909"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863907"><span class="hs-identifier hs-type">rhi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863908"><span class="hs-identifier hs-type">rlo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682863916"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863916"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682863917"><span class="annot"><a href="#local-6989586621682863917"><span class="hs-identifier hs-var">expr_reg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863918"><span class="annot"><a href="#local-6989586621682863918"><span class="hs-identifier hs-var">expr_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863916"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-383"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#Reg64"><span class="hs-identifier hs-type">Reg64</span></a></span><span> </span><span id="local-6989586621682863919"><span class="annot"><a href="#local-6989586621682863919"><span class="hs-identifier hs-var">rhi</span></a></span></span><span> </span><span id="local-6989586621682863920"><span class="annot"><a href="#local-6989586621682863920"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewReg64"><span class="hs-identifier hs-type">getNewReg64</span></a></span><span>
</span><span id="line-384"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863921"><span class="annot"><a href="#local-6989586621682863921"><span class="hs-identifier hs-var hs-var">mov_hi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LI"><span class="hs-identifier hs-var">LI</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863919"><span class="hs-identifier hs-var">rhi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>        </span><span id="local-6989586621682863923"><span class="annot"><a href="#local-6989586621682863923"><span class="hs-identifier hs-var hs-var">mov_lo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863920"><span class="hs-identifier hs-var">rlo</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863917"><span class="hs-identifier hs-var">expr_reg</span></a></span><span>
</span><span id="line-386"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682863918"><span class="hs-identifier hs-type">expr_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863923"><span class="hs-identifier hs-type">mov_lo</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863921"><span class="hs-identifier hs-type">mov_hi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>                       </span><span class="annot"><a href="#local-6989586621682863919"><span class="hs-identifier hs-type">rhi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863920"><span class="hs-identifier hs-type">rlo</span></a></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-type">MO_SS_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682863925"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863925"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-390"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682863926"><span class="annot"><a href="#local-6989586621682863926"><span class="hs-identifier hs-var">expr_reg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682863927"><span class="annot"><a href="#local-6989586621682863927"><span class="hs-identifier hs-var">expr_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863925"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-391"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#Reg64"><span class="hs-identifier hs-type">Reg64</span></a></span><span> </span><span id="local-6989586621682863928"><span class="annot"><a href="#local-6989586621682863928"><span class="hs-identifier hs-var">rhi</span></a></span></span><span> </span><span id="local-6989586621682863929"><span class="annot"><a href="#local-6989586621682863929"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewReg64"><span class="hs-identifier hs-type">getNewReg64</span></a></span><span>
</span><span id="line-392"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863930"><span class="annot"><a href="#local-6989586621682863930"><span class="hs-identifier hs-var hs-var">mov_hi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SRA"><span class="hs-identifier hs-var">SRA</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863928"><span class="hs-identifier hs-var">rhi</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863926"><span class="hs-identifier hs-var">expr_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">31</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>        </span><span id="local-6989586621682863932"><span class="annot"><a href="#local-6989586621682863932"><span class="hs-identifier hs-var hs-var">mov_lo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863929"><span class="hs-identifier hs-var">rlo</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863926"><span class="hs-identifier hs-var">expr_reg</span></a></span><span>
</span><span id="line-394"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682863927"><span class="hs-identifier hs-type">expr_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863932"><span class="hs-identifier hs-type">mov_lo</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863930"><span class="hs-identifier hs-type">mov_hi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>                       </span><span class="annot"><a href="#local-6989586621682863928"><span class="hs-identifier hs-type">rhi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863929"><span class="hs-identifier hs-type">rlo</span></a></span><span>
</span><span id="line-396"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span id="local-6989586621682863933"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863933"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-397"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-398"></span><span>     </span><span id="local-6989586621682863934"><span class="annot"><a href="#local-6989586621682863934"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-399"></span><span>     </span><span class="annot"><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-type">pprPanic</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;iselExpr64(powerpc)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#pdoc"><span class="hs-identifier hs-type">pdoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863934"><span class="hs-identifier hs-type">platform</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863933"><span class="hs-identifier hs-type">expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span class="hs-keyword">data</span><span> </span><span id="MinOrMax"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#MinOrMax"><span class="hs-identifier hs-var">MinOrMax</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Min"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Min"><span class="hs-identifier hs-var">Min</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Max"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Max"><span class="hs-identifier hs-var">Max</span></a></span></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister"><span class="hs-identifier hs-type">getRegister</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-404"></span><span id="getRegister"><span class="annot"><span class="annottext">getRegister :: CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister"><span class="hs-identifier hs-var hs-var">getRegister</span></a></span></span><span> </span><span id="local-6989586621682863938"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863938"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682863939"><span class="annot"><a href="#local-6989586621682863939"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM NCGConfig
</span><a href="GHC.CmmToAsm.Monad.html#getConfig"><span class="hs-identifier hs-var">getConfig</span></a></span><span>
</span><span id="line-405"></span><span>                   </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-type">getRegister'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863939"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Config.html#ncgPlatform"><span class="hs-identifier hs-var">ncgPlatform</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863939"><span class="hs-identifier hs-type">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682863938"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-type">getRegister'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Config.html#NCGConfig"><span class="hs-identifier hs-type">NCGConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span id="getRegister%27"><span class="annot"><span class="annottext">getRegister' :: NCGConfig -&gt; Platform -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var hs-var">getRegister'</span></a></span></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682863942"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863942"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#GlobalRegUse"><span class="hs-identifier hs-type">GlobalRegUse</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="GHC.Cmm.Reg.html#PicBaseReg"><span class="hs-identifier hs-var">PicBaseReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier hs-var">OSAIX</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OS
</span><a href="GHC.Platform.html#platformOS"><span class="hs-identifier hs-var">platformOS</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863942"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-411"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863944"><span class="annot"><span class="annottext">code :: Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682863944"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682863945"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863945"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863945"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863946"><span class="hs-identifier hs-var">tocAddr</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-412"></span><span>            </span><span id="local-6989586621682863946"><span class="annot"><span class="annottext">tocAddr :: AddrMode
</span><a href="#local-6989586621682863946"><span class="hs-identifier hs-var hs-var">tocAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-var">toc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmLit"><span class="hs-identifier hs-var">ImmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ghc_toc_table[TC]&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>        </span><span class="annot"><span class="annottext">Register -&gt; NatM Register
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Format -&gt; (Reg -&gt; OrdList Instr) -&gt; Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682863944"><span class="hs-identifier hs-var">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863942"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-415"></span><span>      </span><span id="local-6989586621682863950"><span class="annot"><a href="#local-6989586621682863950"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getPicBaseNat"><span class="hs-identifier hs-var">getPicBaseNat</span></a></span><span> </span><span class="annot"><span class="annottext">(Format -&gt; NatM Reg) -&gt; Format -&gt; NatM Reg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Format
</span><a href="GHC.CmmToAsm.PPC.Instr.html#archWordFormat"><span class="hs-identifier hs-var">archWordFormat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863942"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-type">Fixed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#archWordFormat"><span class="hs-identifier hs-type">archWordFormat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-type">target32Bit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863942"><span class="hs-identifier hs-type">platform</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span>                    </span><span class="annot"><a href="#local-6989586621682863950"><span class="hs-identifier hs-type">reg</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-type">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Register -&gt; NatM Register
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; OrdList Instr -&gt; Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-var">Fixed</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-var">toc</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682863953"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863953"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span id="local-6989586621682863954"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863954"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Register -&gt; NatM Register
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; OrdList Instr -&gt; Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-var">Fixed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmReg -&gt; CmmType
</span><a href="GHC.Cmm.Reg.html#cmmRegType"><span class="hs-identifier hs-var">cmmRegType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863954"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; CmmReg -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegisterReg"><span class="hs-identifier hs-var">getRegisterReg</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863953"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682863954"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span id="local-6989586621682863955"><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682863955"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621682863956"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863956"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621682863957"><span class="annot"><span class="annottext">tree :: CmmExpr
</span><a href="#local-6989586621682863957"><span class="hs-identifier hs-var">tree</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmRegOff"><span class="hs-identifier hs-type">CmmRegOff</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-425"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NCGConfig -&gt; Platform -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682863955"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863956"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#mangleIndexTree"><span class="hs-identifier hs-var">mangleIndexTree</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863957"><span class="hs-identifier hs-var">tree</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span>    </span><span class="hs-comment">-- for 32-bit architectures, support some 64 -&gt; 32 bit conversions:</span><span>
</span><span id="line-428"></span><span>    </span><span class="hs-comment">-- TO_W_(x), TO_W_(x &gt;&gt; 32)</span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682863958"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863958"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Shr"><span class="hs-identifier hs-type">MO_U_Shr</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682863960"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863960"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">32</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863958"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-433"></span><span>  </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682863961"><span class="annot"><a href="#local-6989586621682863961"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682863962"><span class="annot"><a href="#local-6989586621682863962"><span class="hs-identifier hs-var">_rhi</span></a></span></span><span> </span><span id="local-6989586621682863963"><span class="annot"><a href="#local-6989586621682863963"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863960"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-434"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-type">Fixed</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-type">II32</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Platform.Reg.html#getHiVRegFromLo"><span class="hs-identifier hs-type">getHiVRegFromLo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863963"><span class="hs-identifier hs-type">rlo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682863961"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682863965"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863965"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-type">MO_SS_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Shr"><span class="hs-identifier hs-type">MO_U_Shr</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682863966"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863966"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">32</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-438"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863965"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-439"></span><span>  </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682863967"><span class="annot"><a href="#local-6989586621682863967"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682863968"><span class="annot"><a href="#local-6989586621682863968"><span class="hs-identifier hs-var">_rhi</span></a></span></span><span> </span><span id="local-6989586621682863969"><span class="annot"><a href="#local-6989586621682863969"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863966"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-440"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-type">Fixed</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-type">II32</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Platform.Reg.html#getHiVRegFromLo"><span class="hs-identifier hs-type">getHiVRegFromLo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863969"><span class="hs-identifier hs-type">rlo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682863967"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682863970"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863970"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682863971"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863971"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-443"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863970"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-444"></span><span>  </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682863972"><span class="annot"><a href="#local-6989586621682863972"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682863973"><span class="annot"><a href="#local-6989586621682863973"><span class="hs-identifier hs-var">_rhi</span></a></span></span><span> </span><span id="local-6989586621682863974"><span class="annot"><a href="#local-6989586621682863974"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863971"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-445"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-type">Fixed</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-type">II32</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863974"><span class="hs-identifier hs-type">rlo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863972"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682863975"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863975"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-type">MO_SS_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682863976"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863976"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863975"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-449"></span><span>  </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682863977"><span class="annot"><a href="#local-6989586621682863977"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682863978"><span class="annot"><a href="#local-6989586621682863978"><span class="hs-identifier hs-var">_rhi</span></a></span></span><span> </span><span id="local-6989586621682863979"><span class="annot"><a href="#local-6989586621682863979"><span class="hs-identifier hs-var">rlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863976"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-450"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-type">Fixed</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-type">II32</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863979"><span class="hs-identifier hs-type">rlo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863977"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682863980"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863980"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682863981"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863981"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span id="local-6989586621682863982"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863982"><span class="hs-identifier hs-var">pk</span></a></span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier hs-var">isWord64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863982"><span class="hs-identifier hs-var">pk</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-454"></span><span>        </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682863984"><span class="annot"><a href="#local-6989586621682863984"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682863985"><span class="annot"><a href="#local-6989586621682863985"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863981"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-455"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863986"><span class="annot"><a href="#local-6989586621682863986"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863982"><span class="hs-identifier hs-var">pk</span></a></span><span>
</span><span id="line-456"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863987"><span class="annot"><a href="#local-6989586621682863987"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682863988"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863988"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; OrdList Instr -&gt; OrdList Instr
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Reg -&gt; RegClass
</span><a href="GHC.CmmToAsm.Reg.Target.html#targetClassOfReg"><span class="hs-identifier hs-var">targetClassOfReg</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863980"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863988"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">RegClass -&gt; RegClass -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RegClass
</span><a href="GHC.Platform.Reg.Class.Unified.html#RcFloatOrVector"><span class="hs-identifier hs-var">RcFloatOrVector</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloatType"><span class="hs-identifier hs-var">isFloatType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682863982"><span class="hs-identifier hs-var">pk</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(OrdList Instr -&gt; OrdList Instr) -&gt; OrdList Instr -&gt; OrdList Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-457"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863985"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682863986"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863988"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863984"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-458"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863986"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863987"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682863980"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-460"></span><span>        </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682863992"><span class="annot"><a href="#local-6989586621682863992"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682863993"><span class="annot"><a href="#local-6989586621682863993"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#DS"><span class="hs-identifier hs-var">DS</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863981"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-461"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682863995"><span class="annot"><a href="#local-6989586621682863995"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682863996"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863996"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863993"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682863996"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863992"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-462"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682863995"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>
</span><span id="line-464"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- 32-bit arch &amp; 64-bit load</span><span>
</span><span id="line-465"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682863997"><span class="annot"><a href="#local-6989586621682863997"><span class="hs-identifier hs-var">hi_addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682863998"><span class="annot"><a href="#local-6989586621682863998"><span class="hs-identifier hs-var">lo_addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682863999"><span class="annot"><a href="#local-6989586621682863999"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (AddrMode, AddrMode, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getI64Amodes"><span class="hs-identifier hs-var">getI64Amodes</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682863981"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-466"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864000"><span class="annot"><a href="#local-6989586621682864000"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864001"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864001"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682863999"><span class="hs-identifier hs-var">addr_code</span></a></span><span>
</span><span id="line-467"></span><span>                        </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864001"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863998"><span class="hs-identifier hs-var">lo_addr</span></a></span><span>
</span><span id="line-468"></span><span>                        </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg
</span><a href="GHC.Platform.Reg.html#getHiVRegFromLo"><span class="hs-identifier hs-var">getHiVRegFromLo</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864001"><span class="hs-identifier hs-var">dst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682863997"><span class="hs-identifier hs-var">hi_addr</span></a></span><span>
</span><span id="line-469"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864000"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="hs-comment">-- catch simple cases of zero- or sign-extended load</span><span>
</span><span id="line-472"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682864003"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864003"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-473"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864004"><span class="annot"><a href="#local-6989586621682864004"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864005"><span class="annot"><a href="#local-6989586621682864005"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864003"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-474"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-type">II32</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682864006"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864006"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864005"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II8"><span class="hs-identifier hs-var">II8</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864006"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864004"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_XX_Conv"><span class="hs-identifier hs-type">MO_XX_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682864009"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864009"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-477"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864010"><span class="annot"><a href="#local-6989586621682864010"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864011"><span class="annot"><a href="#local-6989586621682864011"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864009"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-478"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-type">II32</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682864012"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864012"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864011"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II8"><span class="hs-identifier hs-var">II8</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864012"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864010"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682864013"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864013"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-481"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864014"><span class="annot"><a href="#local-6989586621682864014"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864015"><span class="annot"><a href="#local-6989586621682864015"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864013"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-482"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682864016"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864016"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864015"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II8"><span class="hs-identifier hs-var">II8</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864016"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864014"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_XX_Conv"><span class="hs-identifier hs-type">MO_XX_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682864017"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864017"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-485"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864018"><span class="annot"><a href="#local-6989586621682864018"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864019"><span class="annot"><a href="#local-6989586621682864019"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864017"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-486"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682864020"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864020"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864019"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II8"><span class="hs-identifier hs-var">II8</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864020"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864018"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-comment">-- Note: there is no Load Byte Arithmetic instruction, so no signed case here</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682864022"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864022"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-491"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864023"><span class="annot"><a href="#local-6989586621682864023"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864024"><span class="annot"><a href="#local-6989586621682864024"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864022"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-492"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-type">II32</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682864025"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864025"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864024"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II16"><span class="hs-identifier hs-var">II16</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864025"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864023"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-type">MO_SS_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682864027"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864027"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-495"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864028"><span class="annot"><a href="#local-6989586621682864028"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864029"><span class="annot"><a href="#local-6989586621682864029"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864027"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-496"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-type">II32</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682864030"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864030"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864029"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LA"><span class="hs-identifier hs-var">LA</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II16"><span class="hs-identifier hs-var">II16</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864030"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864028"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682864032"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864032"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-499"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864033"><span class="annot"><a href="#local-6989586621682864033"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864034"><span class="annot"><a href="#local-6989586621682864034"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864032"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-500"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682864035"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864035"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864034"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II16"><span class="hs-identifier hs-var">II16</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864035"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864033"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-type">MO_SS_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682864036"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864036"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864037"><span class="annot"><a href="#local-6989586621682864037"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864038"><span class="annot"><a href="#local-6989586621682864038"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864036"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-504"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682864039"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864039"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864038"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LA"><span class="hs-identifier hs-var">LA</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II16"><span class="hs-identifier hs-var">II16</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864039"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864037"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682864040"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864040"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-507"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864041"><span class="annot"><a href="#local-6989586621682864041"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864042"><span class="annot"><a href="#local-6989586621682864042"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864040"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-508"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682864043"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864043"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864042"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864043"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864041"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-type">MO_SS_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621682864044"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864044"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-comment">-- lwa is DS-form. See Note [Power instruction format]</span><span>
</span><span id="line-512"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864045"><span class="annot"><a href="#local-6989586621682864045"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864046"><span class="annot"><a href="#local-6989586621682864046"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#DS"><span class="hs-identifier hs-var">DS</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864044"><span class="hs-identifier hs-var">mem</span></a></span><span>
</span><span id="line-513"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682864047"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864047"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864046"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LA"><span class="hs-identifier hs-var">LA</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864047"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864045"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span id="local-6989586621682864048"><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864048"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621682864049"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864049"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_RelaxedRead"><span class="hs-identifier hs-type">MO_RelaxedRead</span></a></span><span> </span><span id="local-6989586621682864051"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864051"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864052"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864052"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-516"></span><span>      </span><span class="annot"><span class="annottext">NCGConfig -&gt; Platform -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864048"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864049"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmExpr -&gt; CmmType -&gt; AlignmentSpec -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-var">CmmLoad</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864052"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864051"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="GHC.Cmm.Expr.html#NaturallyAligned"><span class="hs-identifier hs-var">NaturallyAligned</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span id="local-6989586621682864055"><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864055"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621682864056"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864056"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span id="local-6989586621682864057"><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621682864057"><span class="hs-identifier hs-var">mop</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864058"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- unary MachOps</span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621682864057"><span class="hs-identifier hs-var">mop</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-520"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Not"><span class="hs-identifier hs-type">MO_Not</span></a></span><span> </span><span id="local-6989586621682864060"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864060"><span class="hs-identifier hs-var">rep</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; (Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864061"><span class="hs-identifier hs-var">triv_ucode_int</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864060"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NOT"><span class="hs-identifier hs-var">NOT</span></a></span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Neg"><span class="hs-identifier hs-type">MO_F_Neg</span></a></span><span> </span><span id="local-6989586621682864064"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864064"><span class="hs-identifier hs-var">w</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; (Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864065"><span class="hs-identifier hs-var">triv_ucode_float</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864064"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FNEG"><span class="hs-identifier hs-var">FNEG</span></a></span><span>
</span><span id="line-523"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Neg"><span class="hs-identifier hs-type">MO_S_Neg</span></a></span><span> </span><span id="local-6989586621682864068"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864068"><span class="hs-identifier hs-var">w</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; (Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864061"><span class="hs-identifier hs-var">triv_ucode_int</span></a></span><span>   </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864068"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEG"><span class="hs-identifier hs-var">NEG</span></a></span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_FF_Conv"><span class="hs-identifier hs-type">MO_FF_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Format -&gt; (Reg -&gt; Reg -&gt; Instr) -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialUCode"><span class="hs-identifier hs-var">trivialUCode</span></a></span><span>  </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF32"><span class="hs-identifier hs-var">FF32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FRSP"><span class="hs-identifier hs-var">FRSP</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-526"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_FF_Conv"><span class="hs-identifier hs-type">MO_FF_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864074"><span class="hs-identifier hs-var">conversionNop</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-var">FF64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_FS_Truncate"><span class="hs-identifier hs-type">MO_FS_Truncate</span></a></span><span> </span><span id="local-6989586621682864077"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864077"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621682864078"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864078"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceFP2Int"><span class="hs-identifier hs-var">coerceFP2Int</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864077"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864078"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-529"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SF_Round"><span class="hs-identifier hs-type">MO_SF_Round</span></a></span><span>    </span><span id="local-6989586621682864081"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864081"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621682864082"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864082"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceInt2FP"><span class="hs-identifier hs-var">coerceInt2FP</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864081"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864082"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-type">MO_SS_Conv</span></a></span><span> </span><span id="local-6989586621682864084"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864084"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621682864085"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864085"><span class="hs-identifier hs-var">to</span></a></span></span><span>
</span><span id="line-532"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864084"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864085"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864074"><span class="hs-identifier hs-var">conversionNop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864085"><span class="hs-identifier hs-var">to</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-533"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; (Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864061"><span class="hs-identifier hs-var">triv_ucode_int</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864085"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#EXTS"><span class="hs-identifier hs-var">EXTS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864084"><span class="hs-identifier hs-var">from</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span id="local-6989586621682864088"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864088"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621682864089"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864089"><span class="hs-identifier hs-var">to</span></a></span></span><span>
</span><span id="line-536"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864088"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864089"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864074"><span class="hs-identifier hs-var">conversionNop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864089"><span class="hs-identifier hs-var">to</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-537"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; NatM Register
</span><a href="#local-6989586621682864090"><span class="hs-identifier hs-var">clearLeft</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864088"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864089"><span class="hs-identifier hs-var">to</span></a></span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_XX_Conv"><span class="hs-identifier hs-type">MO_XX_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864091"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864091"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864074"><span class="hs-identifier hs-var">conversionNop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864091"><span class="hs-identifier hs-var">to</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-540"></span><span>
</span><span id="line-541"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Broadcast"><span class="hs-identifier hs-type">MO_V_Broadcast</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864093"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-542"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Broadcast"><span class="hs-identifier hs-type">MO_VF_Broadcast</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864093"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-543"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Neg"><span class="hs-identifier hs-type">MO_VF_Neg</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864093"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span>      </span><span class="annot"><span class="annottext">MachOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM Register
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.getRegister: no match&quot;</span></span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-548"></span><span>        </span><span id="local-6989586621682864093"><span class="annot"><span class="annottext">vectorsNeedLlvm :: a
</span><a href="#local-6989586621682864093"><span class="hs-identifier hs-var hs-var">vectorsNeedLlvm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-549"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#sorry"><span class="hs-identifier hs-var">sorry</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SIMD operations on PowerPC currently require the LLVM backend&quot;</span></span><span>
</span><span id="line-550"></span><span>        </span><span id="local-6989586621682864061"><span class="annot"><span class="annottext">triv_ucode_int :: Width -&gt; (Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864061"><span class="hs-identifier hs-var hs-var">triv_ucode_int</span></a></span></span><span>   </span><span id="local-6989586621682864099"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864099"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682864100"><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682864100"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; (Reg -&gt; Reg -&gt; Instr) -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialUCode"><span class="hs-identifier hs-var">trivialUCode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span>    </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864099"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682864100"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-551"></span><span>        </span><span id="local-6989586621682864065"><span class="annot"><span class="annottext">triv_ucode_float :: Width -&gt; (Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864065"><span class="hs-identifier hs-var hs-var">triv_ucode_float</span></a></span></span><span> </span><span id="local-6989586621682864101"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864101"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682864102"><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682864102"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; (Reg -&gt; Reg -&gt; Instr) -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialUCode"><span class="hs-identifier hs-var">trivialUCode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#floatFormat"><span class="hs-identifier hs-var">floatFormat</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864101"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682864102"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-552"></span><span>
</span><span id="line-553"></span><span>        </span><span id="local-6989586621682864074"><span class="annot"><span class="annottext">conversionNop :: Format -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864074"><span class="hs-identifier hs-var hs-var">conversionNop</span></a></span></span><span> </span><span id="local-6989586621682864104"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864104"><span class="hs-identifier hs-var">new_format</span></a></span></span><span> </span><span id="local-6989586621682864105"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864105"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-554"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682864106"><span class="annot"><a href="#local-6989586621682864106"><span class="hs-identifier hs-var">e_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NCGConfig -&gt; Platform -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864055"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864056"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864105"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-555"></span><span>                 </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#swizzleRegisterRep"><span class="hs-identifier hs-type">swizzleRegisterRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864106"><span class="hs-identifier hs-type">e_code</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864104"><span class="hs-identifier hs-type">new_format</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span>        </span><span id="local-6989586621682864090"><span class="annot"><span class="annottext">clearLeft :: Width -&gt; Width -&gt; NatM Register
</span><a href="#local-6989586621682864090"><span class="hs-identifier hs-var hs-var">clearLeft</span></a></span></span><span> </span><span id="local-6989586621682864107"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864107"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621682864108"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864108"><span class="hs-identifier hs-var">to</span></a></span></span><span>
</span><span id="line-558"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682864109"><span class="annot"><a href="#local-6989586621682864109"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864110"><span class="annot"><a href="#local-6989586621682864110"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864058"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-559"></span><span>                 </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864111"><span class="annot"><a href="#local-6989586621682864111"><span class="hs-identifier hs-var hs-var">arch_fmt</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#wordWidth"><span class="hs-identifier hs-var">wordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864056"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-560"></span><span>                     </span><span id="local-6989586621682864113"><span class="annot"><a href="#local-6989586621682864113"><span class="hs-identifier hs-var hs-var">arch_bits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#wordWidth"><span class="hs-identifier hs-var">wordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864056"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-561"></span><span>                     </span><span id="local-6989586621682864115"><span class="annot"><a href="#local-6989586621682864115"><span class="hs-identifier hs-var hs-var">size</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864107"><span class="hs-identifier hs-var">from</span></a></span><span>
</span><span id="line-562"></span><span>                     </span><span id="local-6989586621682864116"><span class="annot"><a href="#local-6989586621682864116"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864117"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864117"><span class="hs-identifier hs-var">dst</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864110"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span>
</span><span id="line-563"></span><span>                                 </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Int -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CLRLI"><span class="hs-identifier hs-var">CLRLI</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864111"><span class="hs-identifier hs-var">arch_fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864117"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864109"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864113"><span class="hs-identifier hs-var">arch_bits</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864115"><span class="hs-identifier hs-var">size</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>                 </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-type">intFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864108"><span class="hs-identifier hs-type">to</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864116"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span id="local-6989586621682864119"><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621682864119"><span class="hs-identifier hs-var">mop</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864120"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864121"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- dyadic PrimOps</span><span>
</span><span id="line-567"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621682864119"><span class="hs-identifier hs-var">mop</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-568"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Eq"><span class="hs-identifier hs-type">MO_F_Eq</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltReg"><span class="hs-identifier hs-var">condFltReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#EQQ"><span class="hs-identifier hs-var">EQQ</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-569"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Ne"><span class="hs-identifier hs-type">MO_F_Ne</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltReg"><span class="hs-identifier hs-var">condFltReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-570"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Gt"><span class="hs-identifier hs-type">MO_F_Gt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltReg"><span class="hs-identifier hs-var">condFltReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GTT"><span class="hs-identifier hs-var">GTT</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-571"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Ge"><span class="hs-identifier hs-type">MO_F_Ge</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltReg"><span class="hs-identifier hs-var">condFltReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GE"><span class="hs-identifier hs-var">GE</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-572"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Lt"><span class="hs-identifier hs-type">MO_F_Lt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltReg"><span class="hs-identifier hs-var">condFltReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LTT"><span class="hs-identifier hs-var">LTT</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-573"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Le"><span class="hs-identifier hs-type">MO_F_Le</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltReg"><span class="hs-identifier hs-var">condFltReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LE"><span class="hs-identifier hs-var">LE</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-574"></span><span>
</span><span id="line-575"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Eq"><span class="hs-identifier hs-type">MO_Eq</span></a></span><span> </span><span id="local-6989586621682864136"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864136"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var">condIntReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#EQQ"><span class="hs-identifier hs-var">EQQ</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864136"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-576"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Ne"><span class="hs-identifier hs-type">MO_Ne</span></a></span><span> </span><span id="local-6989586621682864139"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864139"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var">condIntReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864139"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Gt"><span class="hs-identifier hs-type">MO_S_Gt</span></a></span><span> </span><span id="local-6989586621682864141"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864141"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var">condIntReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GTT"><span class="hs-identifier hs-var">GTT</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864141"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-579"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Ge"><span class="hs-identifier hs-type">MO_S_Ge</span></a></span><span> </span><span id="local-6989586621682864143"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864143"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var">condIntReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GE"><span class="hs-identifier hs-var">GE</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864143"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-580"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Lt"><span class="hs-identifier hs-type">MO_S_Lt</span></a></span><span> </span><span id="local-6989586621682864145"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864145"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var">condIntReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LTT"><span class="hs-identifier hs-var">LTT</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864145"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-581"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Le"><span class="hs-identifier hs-type">MO_S_Le</span></a></span><span> </span><span id="local-6989586621682864147"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864147"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var">condIntReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LE"><span class="hs-identifier hs-var">LE</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864147"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-582"></span><span>
</span><span id="line-583"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Gt"><span class="hs-identifier hs-type">MO_U_Gt</span></a></span><span> </span><span id="local-6989586621682864149"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864149"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var">condIntReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GU"><span class="hs-identifier hs-var">GU</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864149"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-584"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Ge"><span class="hs-identifier hs-type">MO_U_Ge</span></a></span><span> </span><span id="local-6989586621682864152"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864152"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var">condIntReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GEU"><span class="hs-identifier hs-var">GEU</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864152"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-585"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Lt"><span class="hs-identifier hs-type">MO_U_Lt</span></a></span><span> </span><span id="local-6989586621682864155"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864155"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var">condIntReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LU"><span class="hs-identifier hs-var">LU</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864155"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-586"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Le"><span class="hs-identifier hs-type">MO_U_Le</span></a></span><span> </span><span id="local-6989586621682864158"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864158"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var">condIntReg</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LEU"><span class="hs-identifier hs-var">LEU</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864158"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Add"><span class="hs-identifier hs-type">MO_F_Add</span></a></span><span> </span><span id="local-6989586621682864161"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864161"><span class="hs-identifier hs-var">w</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864162"><span class="hs-identifier hs-var">triv_float</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864161"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FADD"><span class="hs-identifier hs-var">FADD</span></a></span><span>
</span><span id="line-589"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Sub"><span class="hs-identifier hs-type">MO_F_Sub</span></a></span><span> </span><span id="local-6989586621682864165"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864165"><span class="hs-identifier hs-var">w</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864162"><span class="hs-identifier hs-var">triv_float</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864165"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FSUB"><span class="hs-identifier hs-var">FSUB</span></a></span><span>
</span><span id="line-590"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Mul"><span class="hs-identifier hs-type">MO_F_Mul</span></a></span><span> </span><span id="local-6989586621682864168"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864168"><span class="hs-identifier hs-var">w</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864162"><span class="hs-identifier hs-var">triv_float</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864168"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FMUL"><span class="hs-identifier hs-var">FMUL</span></a></span><span>
</span><span id="line-591"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Quot"><span class="hs-identifier hs-type">MO_F_Quot</span></a></span><span> </span><span id="local-6989586621682864171"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864171"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864162"><span class="hs-identifier hs-var">triv_float</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864171"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FDIV"><span class="hs-identifier hs-var">FDIV</span></a></span><span>
</span><span id="line-592"></span><span>
</span><span id="line-593"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Min"><span class="hs-identifier hs-type">MO_F_Min</span></a></span><span> </span><span id="local-6989586621682864174"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864174"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MinOrMax -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864175"><span class="hs-identifier hs-var">minmax_float</span></a></span><span> </span><span class="annot"><span class="annottext">MinOrMax
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Min"><span class="hs-identifier hs-var">Min</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864174"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-594"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Max"><span class="hs-identifier hs-type">MO_F_Max</span></a></span><span> </span><span id="local-6989586621682864177"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864177"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MinOrMax -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864175"><span class="hs-identifier hs-var">minmax_float</span></a></span><span> </span><span class="annot"><span class="annottext">MinOrMax
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Max"><span class="hs-identifier hs-var">Max</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864177"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-595"></span><span>
</span><span id="line-596"></span><span>         </span><span class="hs-comment">-- optimize addition with 32-bit immediate</span><span>
</span><span id="line-597"></span><span>         </span><span class="hs-comment">-- (needed for PIC)</span><span>
</span><span id="line-598"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-599"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-600"></span><span>          </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864178"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864178"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span id="local-6989586621682864179"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864179"><span class="hs-identifier hs-var">immrep</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Imm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864178"><span class="hs-identifier hs-var">imm</span></a></span><span>
</span><span id="line-601"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-var">trivialCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmLit -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-var">CmmLit</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmLit -&gt; CmmExpr) -&gt; CmmLit -&gt; CmmExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Width -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-var">CmmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864178"><span class="hs-identifier hs-var">imm</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864179"><span class="hs-identifier hs-var">immrep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>          </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span id="local-6989586621682864183"><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864183"><span class="hs-identifier hs-var">lit</span></a></span></span><span>
</span><span id="line-603"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-604"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621682864184"><span class="annot"><a href="#local-6989586621682864184"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864185"><span class="annot"><a href="#local-6989586621682864185"><span class="hs-identifier hs-var">srcCode</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-605"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864186"><span class="annot"><a href="#local-6989586621682864186"><span class="hs-identifier hs-var hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#litToImm"><span class="hs-identifier hs-var">litToImm</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864183"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-606"></span><span>                    </span><span id="local-6989586621682864188"><span class="annot"><a href="#local-6989586621682864188"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864189"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864189"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864185"><span class="hs-identifier hs-var">srcCode</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-607"></span><span>                                    </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADDIS"><span class="hs-identifier hs-var">ADDIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864189"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864184"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#HA"><span class="hs-identifier hs-var">HA</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864186"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-608"></span><span>                                    </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864189"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864189"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#LO"><span class="hs-identifier hs-var">LO</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864186"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-609"></span><span>                                </span><span class="hs-special">]</span><span>
</span><span id="line-610"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-type">II32</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864188"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span>          </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-var">trivialCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span id="local-6989586621682864193"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864193"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-var">trivialCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864193"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-614"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Sub"><span class="hs-identifier hs-type">MO_Sub</span></a></span><span> </span><span id="local-6989586621682864194"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864194"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-615"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-616"></span><span>          </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864195"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864195"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span id="local-6989586621682864196"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864196"><span class="hs-identifier hs-var">immrep</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Imm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864194"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864195"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-617"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-var">trivialCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864194"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmLit -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-var">CmmLit</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmLit -&gt; CmmExpr) -&gt; CmmLit -&gt; CmmExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Width -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-var">CmmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864195"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864196"><span class="hs-identifier hs-var">immrep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-618"></span><span>          </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-619"></span><span>                 </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864197"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864197"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Imm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864194"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864197"><span class="hs-identifier hs-var">imm</span></a></span><span>
</span><span id="line-621"></span><span>                   </span><span class="hs-comment">-- subfi ('subtract from' with immediate) doesn't exist</span><span>
</span><span id="line-622"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-var">trivialCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864194"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SUBFC"><span class="hs-identifier hs-var">SUBFC</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-623"></span><span>                 </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Format
-&gt; (Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCodeNoImm%27"><span class="hs-identifier hs-var">trivialCodeNoImm'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864194"><span class="hs-identifier hs-var">rep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SUBF"><span class="hs-identifier hs-var">SUBF</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Mul"><span class="hs-identifier hs-type">MO_Mul</span></a></span><span> </span><span id="local-6989586621682864201"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864201"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#shiftMulCode"><span class="hs-identifier hs-var">shiftMulCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864201"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MULL"><span class="hs-identifier hs-var">MULL</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-626"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_MulMayOflo"><span class="hs-identifier hs-type">MO_S_MulMayOflo</span></a></span><span> </span><span id="local-6989586621682864205"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864205"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-627"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864206"><span class="annot"><a href="#local-6989586621682864206"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864207"><span class="annot"><a href="#local-6989586621682864207"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-628"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864208"><span class="annot"><a href="#local-6989586621682864208"><span class="hs-identifier hs-var">src2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864209"><span class="annot"><a href="#local-6989586621682864209"><span class="hs-identifier hs-var">code2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864121"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-629"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-630"></span><span>          </span><span id="local-6989586621682864210"><span class="annot"><a href="#local-6989586621682864210"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864205"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-631"></span><span>          </span><span id="local-6989586621682864211"><span class="annot"><a href="#local-6989586621682864211"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864212"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864212"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864207"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864209"><span class="hs-identifier hs-var">code2</span></a></span><span>
</span><span id="line-632"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MULLO"><span class="hs-identifier hs-var">MULLO</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864210"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864212"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864206"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864208"><span class="hs-identifier hs-var">src2</span></a></span><span>
</span><span id="line-633"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MFOV"><span class="hs-identifier hs-var">MFOV</span></a></span><span>  </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864210"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864212"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-634"></span><span>                                    </span><span class="hs-special">]</span><span>
</span><span id="line-635"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864210"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864211"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-636"></span><span>
</span><span id="line-637"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Quot"><span class="hs-identifier hs-type">MO_S_Quot</span></a></span><span> </span><span id="local-6989586621682864216"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864216"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#divCode"><span class="hs-identifier hs-var">divCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864216"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-638"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Quot"><span class="hs-identifier hs-type">MO_U_Quot</span></a></span><span> </span><span id="local-6989586621682864219"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864219"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#divCode"><span class="hs-identifier hs-var">divCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864219"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-639"></span><span>
</span><span id="line-640"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Rem"><span class="hs-identifier hs-type">MO_S_Rem</span></a></span><span> </span><span id="local-6989586621682864221"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864221"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864222"><span class="hs-identifier hs-var">remainder</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864221"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-641"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Rem"><span class="hs-identifier hs-type">MO_U_Rem</span></a></span><span> </span><span id="local-6989586621682864224"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864224"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864222"><span class="hs-identifier hs-var">remainder</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864224"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-642"></span><span>
</span><span id="line-643"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_And"><span class="hs-identifier hs-type">MO_And</span></a></span><span> </span><span id="local-6989586621682864226"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864226"><span class="hs-identifier hs-var">rep</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-644"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864227"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864227"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864227"><span class="hs-identifier hs-var">imm</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864227"><span class="hs-identifier hs-var">imm</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">4</span></span><span>
</span><span id="line-645"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-646"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621682864229"><span class="annot"><a href="#local-6989586621682864229"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864230"><span class="annot"><a href="#local-6989586621682864230"><span class="hs-identifier hs-var">srcCode</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-647"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864231"><span class="annot"><a href="#local-6989586621682864231"><span class="hs-identifier hs-var hs-var">clear_mask</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864227"><span class="hs-identifier hs-var">imm</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">4</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-648"></span><span>                    </span><span id="local-6989586621682864232"><span class="annot"><a href="#local-6989586621682864232"><span class="hs-identifier hs-var hs-var">fmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864226"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-649"></span><span>                    </span><span id="local-6989586621682864233"><span class="annot"><a href="#local-6989586621682864233"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864234"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864234"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864230"><span class="hs-identifier hs-var">srcCode</span></a></span><span>
</span><span id="line-650"></span><span>                               </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Int -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CLRRI"><span class="hs-identifier hs-var">CLRRI</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864232"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864234"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864229"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864231"><span class="hs-identifier hs-var">clear_mask</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-651"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864232"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864233"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span>        </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-var">trivialCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864226"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#AND"><span class="hs-identifier hs-var">AND</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-653"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Or"><span class="hs-identifier hs-type">MO_Or</span></a></span><span> </span><span id="local-6989586621682864238"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864238"><span class="hs-identifier hs-var">rep</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-var">trivialCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864238"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#OR"><span class="hs-identifier hs-var">OR</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-654"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Xor"><span class="hs-identifier hs-type">MO_Xor</span></a></span><span> </span><span id="local-6989586621682864240"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864240"><span class="hs-identifier hs-var">rep</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-var">trivialCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864240"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#XOR"><span class="hs-identifier hs-var">XOR</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-655"></span><span>
</span><span id="line-656"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Shl"><span class="hs-identifier hs-type">MO_Shl</span></a></span><span> </span><span id="local-6989586621682864243"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864243"><span class="hs-identifier hs-var">rep</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#shiftMulCode"><span class="hs-identifier hs-var">shiftMulCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864243"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-var">SL</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-657"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Shr"><span class="hs-identifier hs-type">MO_S_Shr</span></a></span><span> </span><span id="local-6989586621682864246"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864246"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#srCode"><span class="hs-identifier hs-var">srCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864246"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SRA"><span class="hs-identifier hs-var">SRA</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-658"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Shr"><span class="hs-identifier hs-type">MO_U_Shr</span></a></span><span> </span><span id="local-6989586621682864248"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864248"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; Bool
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#srCode"><span class="hs-identifier hs-var">srCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864248"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SR"><span class="hs-identifier hs-var">SR</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-659"></span><span>
</span><span id="line-660"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Extract"><span class="hs-identifier hs-type">MO_V_Extract</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-661"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Add"><span class="hs-identifier hs-type">MO_V_Add</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-662"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Sub"><span class="hs-identifier hs-type">MO_V_Sub</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-663"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Mul"><span class="hs-identifier hs-type">MO_V_Mul</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-664"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Quot"><span class="hs-identifier hs-type">MO_VS_Quot</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-665"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Rem"><span class="hs-identifier hs-type">MO_VS_Rem</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-666"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Neg"><span class="hs-identifier hs-type">MO_VS_Neg</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-667"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VU_Quot"><span class="hs-identifier hs-type">MO_VU_Quot</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-668"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VU_Rem"><span class="hs-identifier hs-type">MO_VU_Rem</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-669"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Extract"><span class="hs-identifier hs-type">MO_VF_Extract</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-670"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Add"><span class="hs-identifier hs-type">MO_VF_Add</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-671"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Sub"><span class="hs-identifier hs-type">MO_VF_Sub</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-672"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Neg"><span class="hs-identifier hs-type">MO_VF_Neg</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-673"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Mul"><span class="hs-identifier hs-type">MO_VF_Mul</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-674"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Quot"><span class="hs-identifier hs-type">MO_VF_Quot</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-675"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Shuffle"><span class="hs-identifier hs-type">MO_V_Shuffle</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-676"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Shuffle"><span class="hs-identifier hs-type">MO_VF_Shuffle</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-677"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VU_Min"><span class="hs-identifier hs-type">MO_VU_Min</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-678"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VU_Max"><span class="hs-identifier hs-type">MO_VU_Max</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-679"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Min"><span class="hs-identifier hs-type">MO_VS_Min</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-680"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Max"><span class="hs-identifier hs-type">MO_VS_Max</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-681"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Min"><span class="hs-identifier hs-type">MO_VF_Min</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-682"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Max"><span class="hs-identifier hs-type">MO_VF_Max</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-683"></span><span>
</span><span id="line-684"></span><span>      </span><span class="annot"><span class="annottext">MachOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM Register
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.getRegister: no match&quot;</span></span><span>
</span><span id="line-685"></span><span>
</span><span id="line-686"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-687"></span><span>    </span><span id="local-6989586621682864251"><span class="annot"><span class="annottext">vectorsNeedLlvm :: a
</span><a href="#local-6989586621682864251"><span class="hs-identifier hs-var hs-var">vectorsNeedLlvm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-688"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#sorry"><span class="hs-identifier hs-var">sorry</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SIMD operations on PowerPC currently require the LLVM backend&quot;</span></span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span>    </span><span class="annot"><a href="#local-6989586621682864162"><span class="hs-identifier hs-type">triv_float</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-691"></span><span>    </span><span id="local-6989586621682864162"><span class="annot"><span class="annottext">triv_float :: Width -&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr) -&gt; NatM Register
</span><a href="#local-6989586621682864162"><span class="hs-identifier hs-var hs-var">triv_float</span></a></span></span><span> </span><span id="local-6989586621682864275"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864275"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682864276"><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682864276"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCodeNoImm"><span class="hs-identifier hs-var">trivialCodeNoImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#floatFormat"><span class="hs-identifier hs-var">floatFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864275"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682864276"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864120"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864121"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-692"></span><span>
</span><span id="line-693"></span><span>    </span><span class="annot"><a href="#local-6989586621682864222"><span class="hs-identifier hs-type">remainder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-694"></span><span>    </span><span id="local-6989586621682864222"><span class="annot"><span class="annottext">remainder :: Width -&gt; Bool -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864222"><span class="hs-identifier hs-var hs-var">remainder</span></a></span></span><span> </span><span id="local-6989586621682864278"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864278"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span id="local-6989586621682864279"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682864279"><span class="hs-identifier hs-var">sgn</span></a></span></span><span> </span><span id="local-6989586621682864280"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864280"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682864281"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864281"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-695"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864282"><span class="annot"><span class="annottext">fmt :: Format
</span><a href="#local-6989586621682864282"><span class="hs-identifier hs-var hs-var hs-var">fmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864278"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-696"></span><span>      </span><span id="local-6989586621682864283"><span class="annot"><a href="#local-6989586621682864283"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-var">getNewRegNat</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864282"><span class="hs-identifier hs-var">fmt</span></a></span><span>
</span><span id="line-697"></span><span>      </span><span id="local-6989586621682864284"><span class="annot"><a href="#local-6989586621682864284"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#remainderCode"><span class="hs-identifier hs-type">remainderCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864278"><span class="hs-identifier hs-type">rep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864279"><span class="hs-identifier hs-type">sgn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864283"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864280"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864281"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-698"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864282"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864284"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>
</span><span id="line-700"></span><span>    </span><span class="annot"><a href="#local-6989586621682864175"><span class="hs-identifier hs-type">minmax_float</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#MinOrMax"><span class="hs-identifier hs-type">MinOrMax</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-701"></span><span>    </span><span id="local-6989586621682864175"><span class="annot"><span class="annottext">minmax_float :: MinOrMax -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="#local-6989586621682864175"><span class="hs-identifier hs-var hs-var">minmax_float</span></a></span></span><span> </span><span id="local-6989586621682864286"><span class="annot"><span class="annottext">MinOrMax
</span><a href="#local-6989586621682864286"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682864287"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864287"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682864288"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864288"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682864289"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864289"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-702"></span><span>      </span><span class="hs-keyword">do</span><span>
</span><span id="line-703"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864290"><span class="annot"><a href="#local-6989586621682864290"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864291"><span class="annot"><a href="#local-6989586621682864291"><span class="hs-identifier hs-var">src1Code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864288"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-704"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864292"><span class="annot"><a href="#local-6989586621682864292"><span class="hs-identifier hs-var">src2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864293"><span class="annot"><a href="#local-6989586621682864293"><span class="hs-identifier hs-var">src2Code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864289"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-705"></span><span>        </span><span id="local-6989586621682864294"><span class="annot"><a href="#local-6989586621682864294"><span class="hs-identifier hs-var">l1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-706"></span><span>        </span><span id="local-6989586621682864295"><span class="annot"><a href="#local-6989586621682864295"><span class="hs-identifier hs-var">l2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-707"></span><span>        </span><span id="local-6989586621682864296"><span class="annot"><a href="#local-6989586621682864296"><span class="hs-identifier hs-var">end</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-708"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864297"><span class="annot"><a href="#local-6989586621682864297"><span class="hs-identifier hs-var hs-var">cond</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MinOrMax
</span><a href="#local-6989586621682864286"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-709"></span><span>                     </span><span class="annot"><span class="annottext">MinOrMax
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Min"><span class="hs-identifier hs-var">Min</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LTT"><span class="hs-identifier hs-var">LTT</span></a></span><span>
</span><span id="line-710"></span><span>                     </span><span class="annot"><span class="annottext">MinOrMax
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Max"><span class="hs-identifier hs-var">Max</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GTT"><span class="hs-identifier hs-var">GTT</span></a></span><span>
</span><span id="line-711"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864298"><span class="annot"><a href="#local-6989586621682864298"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864299"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864299"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864291"><span class="hs-identifier hs-var">src1Code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864293"><span class="hs-identifier hs-var">src2Code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>
</span><span id="line-712"></span><span>                       </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FCMP"><span class="hs-identifier hs-var">FCMP</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864290"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864292"><span class="hs-identifier hs-var">src2</span></a></span><span>
</span><span id="line-713"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864297"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864294"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-714"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864295"><span class="hs-identifier hs-var">l2</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-715"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864295"><span class="hs-identifier hs-var">l2</span></a></span><span>
</span><span id="line-716"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864299"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864292"><span class="hs-identifier hs-var">src2</span></a></span><span>
</span><span id="line-717"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864296"><span class="hs-identifier hs-var">end</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-718"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864294"><span class="hs-identifier hs-var">l1</span></a></span><span>
</span><span id="line-719"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864299"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864290"><span class="hs-identifier hs-var">src1</span></a></span><span>
</span><span id="line-720"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864296"><span class="hs-identifier hs-var">end</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-721"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864296"><span class="hs-identifier hs-var">end</span></a></span><span>
</span><span id="line-722"></span><span>                            </span><span class="hs-special">]</span><span>
</span><span id="line-723"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#floatFormat"><span class="hs-identifier hs-type">floatFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864287"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864298"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>
</span><span id="line-725"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span id="local-6989586621682864303"><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621682864303"><span class="hs-identifier hs-var">mop</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864304"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864304"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864305"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864305"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864306"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864306"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ternary PrimOps</span><span>
</span><span id="line-726"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621682864303"><span class="hs-identifier hs-var">mop</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span>      </span><span class="hs-comment">-- x86 fmadd    x * y + z &lt;&gt; PPC fmadd  rt =   ra * rc + rb</span><span>
</span><span id="line-729"></span><span>      </span><span class="hs-comment">-- x86 fmsub    x * y - z &lt;&gt; PPC fmsub  rt =   ra * rc - rb</span><span>
</span><span id="line-730"></span><span>      </span><span class="hs-comment">-- x86 fnmadd - x * y + z ~~ PPC fnmsub rt = -(ra * rc - rb)</span><span>
</span><span id="line-731"></span><span>      </span><span class="hs-comment">-- x86 fnmsub - x * y - z ~~ PPC fnmadd rt = -(ra * rc + rb)</span><span>
</span><span id="line-732"></span><span>
</span><span id="line-733"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_FMA"><span class="hs-identifier hs-type">MO_FMA</span></a></span><span> </span><span id="local-6989586621682864308"><span class="annot"><span class="annottext">FMASign
</span><a href="#local-6989586621682864308"><span class="hs-identifier hs-var">variant</span></a></span></span><span> </span><span id="local-6989586621682864309"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864309"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682864310"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864310"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864309"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-734"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FMASign
</span><a href="#local-6989586621682864308"><span class="hs-identifier hs-var">variant</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-735"></span><span>          </span><span class="annot"><span class="annottext">FMASign
</span><a href="GHC.Cmm.MachOp.html#FMAdd"><span class="hs-identifier hs-var">FMAdd</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#fma_code"><span class="hs-identifier hs-var">fma_code</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864310"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FMASign -&gt; Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FMADD"><span class="hs-identifier hs-var">FMADD</span></a></span><span> </span><span class="annot"><span class="annottext">FMASign
</span><a href="GHC.Cmm.MachOp.html#FMAdd"><span class="hs-identifier hs-var">FMAdd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864304"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864305"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864306"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-736"></span><span>          </span><span class="annot"><span class="annottext">FMASign
</span><a href="GHC.Cmm.MachOp.html#FMSub"><span class="hs-identifier hs-var">FMSub</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#fma_code"><span class="hs-identifier hs-var">fma_code</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864310"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FMASign -&gt; Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FMADD"><span class="hs-identifier hs-var">FMADD</span></a></span><span> </span><span class="annot"><span class="annottext">FMASign
</span><a href="GHC.Cmm.MachOp.html#FMSub"><span class="hs-identifier hs-var">FMSub</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864304"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864305"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864306"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-737"></span><span>          </span><span class="annot"><span class="annottext">FMASign
</span><a href="GHC.Cmm.MachOp.html#FNMAdd"><span class="hs-identifier hs-var">FNMAdd</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#fma_code"><span class="hs-identifier hs-var">fma_code</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864310"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FMASign -&gt; Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FMADD"><span class="hs-identifier hs-var">FMADD</span></a></span><span> </span><span class="annot"><span class="annottext">FMASign
</span><a href="GHC.Cmm.MachOp.html#FNMAdd"><span class="hs-identifier hs-var">FNMAdd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864304"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864305"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864306"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-738"></span><span>          </span><span class="annot"><span class="annottext">FMASign
</span><a href="GHC.Cmm.MachOp.html#FNMSub"><span class="hs-identifier hs-var">FNMSub</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#fma_code"><span class="hs-identifier hs-var">fma_code</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864310"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FMASign -&gt; Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FMADD"><span class="hs-identifier hs-var">FMADD</span></a></span><span> </span><span class="annot"><span class="annottext">FMASign
</span><a href="GHC.Cmm.MachOp.html#FNMSub"><span class="hs-identifier hs-var">FNMSub</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864304"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864305"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864306"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-739"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-740"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864317"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Insert"><span class="hs-identifier hs-type">MO_V_Insert</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864317"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-743"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Insert"><span class="hs-identifier hs-type">MO_VF_Insert</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NatM Register
forall {a}. a
</span><a href="#local-6989586621682864317"><span class="hs-identifier hs-var">vectorsNeedLlvm</span></a></span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span>      </span><span class="annot"><span class="annottext">MachOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM Register
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.getRegister: no match&quot;</span></span><span>
</span><span id="line-746"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-747"></span><span>    </span><span id="local-6989586621682864317"><span class="annot"><span class="annottext">vectorsNeedLlvm :: a
</span><a href="#local-6989586621682864317"><span class="hs-identifier hs-var hs-var">vectorsNeedLlvm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-748"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#sorry"><span class="hs-identifier hs-var">sorry</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SIMD operations on PowerPC currently require the LLVM backend&quot;</span></span><span>
</span><span id="line-749"></span><span>
</span><span id="line-750"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864322"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864322"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682864323"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864323"><span class="hs-identifier hs-var">rep</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-751"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864324"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864324"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864323"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864322"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-752"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-753"></span><span>        </span><span id="local-6989586621682864325"><span class="annot"><span class="annottext">code :: Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682864325"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864326"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864326"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LI"><span class="hs-identifier hs-var">LI</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864326"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864324"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>    </span><span class="hs-keyword">in</span><span>
</span><span id="line-755"></span><span>        </span><span class="annot"><span class="annottext">Register -&gt; NatM Register
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Format -&gt; (Reg -&gt; OrdList Instr) -&gt; Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864323"><span class="hs-identifier hs-var">rep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682864325"><span class="hs-identifier hs-var">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-756"></span><span>
</span><span id="line-757"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span id="local-6989586621682864327"><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864327"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmFloat"><span class="hs-identifier hs-type">CmmFloat</span></a></span><span> </span><span id="local-6989586621682864329"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682864329"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682864330"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864330"><span class="hs-identifier hs-var">frep</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-758"></span><span>    </span><span id="local-6989586621682864331"><span class="annot"><a href="#local-6989586621682864331"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM CLabel
</span><a href="GHC.CmmToAsm.Monad.html#getNewLabelNat"><span class="hs-identifier hs-var">getNewLabelNat</span></a></span><span>
</span><span id="line-759"></span><span>    </span><span id="local-6989586621682864332"><span class="annot"><a href="#local-6989586621682864332"><span class="hs-identifier hs-var">dynRef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html#cmmMakeDynamicReference"><span class="hs-identifier hs-type">cmmMakeDynamicReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864327"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html#DataReference"><span class="hs-identifier hs-type">DataReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864331"><span class="hs-identifier hs-type">lbl</span></a></span><span>
</span><span id="line-760"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864335"><span class="annot"><a href="#local-6989586621682864335"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864336"><span class="annot"><a href="#local-6989586621682864336"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-type">getAmode</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864332"><span class="hs-identifier hs-type">dynRef</span></a></span><span>
</span><span id="line-761"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864337"><span class="annot"><a href="#local-6989586621682864337"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#floatFormat"><span class="hs-identifier hs-var">floatFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864330"><span class="hs-identifier hs-var">frep</span></a></span><span>
</span><span id="line-762"></span><span>        </span><span id="local-6989586621682864338"><span class="annot"><a href="#local-6989586621682864338"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864339"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864339"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-763"></span><span>            </span><span class="annot"><span class="annottext">Section -&gt; RawCmmStatics -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LDATA"><span class="hs-identifier hs-var">LDATA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SectionType -&gt; CLabel -&gt; Section
</span><a href="GHC.Cmm.html#Section"><span class="hs-identifier hs-var">Section</span></a></span><span> </span><span class="annot"><span class="annottext">SectionType
</span><a href="GHC.Cmm.html#ReadOnlyData"><span class="hs-identifier hs-var">ReadOnlyData</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682864331"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; [CmmStatic] -&gt; RawCmmStatics
forall (rawOnly :: Bool).
CLabel -&gt; [CmmStatic] -&gt; GenCmmStatics rawOnly
</span><a href="GHC.Cmm.html#CmmStaticsRaw"><span class="hs-identifier hs-var">CmmStaticsRaw</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682864331"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmLit -&gt; CmmStatic
</span><a href="GHC.Cmm.html#CmmStaticLit"><span class="hs-identifier hs-var">CmmStaticLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Width -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmFloat"><span class="hs-identifier hs-var">CmmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682864329"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864330"><span class="hs-identifier hs-var">frep</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>            </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#consOL"><span class="hs-operator hs-var">`consOL`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864336"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864337"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864339"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864335"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-766"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864337"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864338"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>
</span><span id="line-768"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span id="local-6989586621682864344"><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864344"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621682864345"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864345"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span id="local-6989586621682864346"><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864346"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-769"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864345"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-770"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864347"><span class="annot"><span class="annottext">rep :: CmmType
</span><a href="#local-6989586621682864347"><span class="hs-identifier hs-var hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; CmmLit -&gt; CmmType
</span><a href="GHC.Cmm.Expr.html#cmmLitType"><span class="hs-identifier hs-var">cmmLitType</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864345"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864346"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-771"></span><span>        </span><span id="local-6989586621682864349"><span class="annot"><span class="annottext">imm :: Imm
</span><a href="#local-6989586621682864349"><span class="hs-identifier hs-var hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#litToImm"><span class="hs-identifier hs-var">litToImm</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864346"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-772"></span><span>        </span><span id="local-6989586621682864350"><span class="annot"><span class="annottext">code :: Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682864350"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864351"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864351"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-773"></span><span>              </span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LIS"><span class="hs-identifier hs-var">LIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864351"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#HA"><span class="hs-identifier hs-var">HA</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864349"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-774"></span><span>              </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864351"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864351"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#LO"><span class="hs-identifier hs-var">LO</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864349"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-776"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Register -&gt; NatM Register
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Format -&gt; (Reg -&gt; OrdList Instr) -&gt; Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-var">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682864347"><span class="hs-identifier hs-var">rep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682864350"><span class="hs-identifier hs-var">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-777"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-778"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682864352"><span class="annot"><a href="#local-6989586621682864352"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM CLabel
</span><a href="GHC.CmmToAsm.Monad.html#getNewLabelNat"><span class="hs-identifier hs-var">getNewLabelNat</span></a></span><span>
</span><span id="line-779"></span><span>       </span><span id="local-6989586621682864353"><span class="annot"><a href="#local-6989586621682864353"><span class="hs-identifier hs-var">dynRef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html#cmmMakeDynamicReference"><span class="hs-identifier hs-type">cmmMakeDynamicReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864344"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html#DataReference"><span class="hs-identifier hs-type">DataReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864352"><span class="hs-identifier hs-type">lbl</span></a></span><span>
</span><span id="line-780"></span><span>       </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864354"><span class="annot"><a href="#local-6989586621682864354"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864355"><span class="annot"><a href="#local-6989586621682864355"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-type">getAmode</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864353"><span class="hs-identifier hs-type">dynRef</span></a></span><span>
</span><span id="line-781"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864356"><span class="annot"><a href="#local-6989586621682864356"><span class="hs-identifier hs-var hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; CmmLit -&gt; CmmType
</span><a href="GHC.Cmm.Expr.html#cmmLitType"><span class="hs-identifier hs-var">cmmLitType</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864345"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864346"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-782"></span><span>           </span><span id="local-6989586621682864357"><span class="annot"><a href="#local-6989586621682864357"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682864356"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-783"></span><span>           </span><span id="local-6989586621682864358"><span class="annot"><a href="#local-6989586621682864358"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864359"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864359"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-784"></span><span>            </span><span class="annot"><span class="annottext">Section -&gt; RawCmmStatics -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LDATA"><span class="hs-identifier hs-var">LDATA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SectionType -&gt; CLabel -&gt; Section
</span><a href="GHC.Cmm.html#Section"><span class="hs-identifier hs-var">Section</span></a></span><span> </span><span class="annot"><span class="annottext">SectionType
</span><a href="GHC.Cmm.html#ReadOnlyData"><span class="hs-identifier hs-var">ReadOnlyData</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682864352"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; [CmmStatic] -&gt; RawCmmStatics
forall (rawOnly :: Bool).
CLabel -&gt; [CmmStatic] -&gt; GenCmmStatics rawOnly
</span><a href="GHC.Cmm.html#CmmStaticsRaw"><span class="hs-identifier hs-var">CmmStaticsRaw</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682864352"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmLit -&gt; CmmStatic
</span><a href="GHC.Cmm.html#CmmStaticLit"><span class="hs-identifier hs-var">CmmStaticLit</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864346"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-785"></span><span>            </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#consOL"><span class="hs-operator hs-var">`consOL`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864355"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864357"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864359"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682864354"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-786"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864357"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864358"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-787"></span><span>
</span><span id="line-788"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister%27"><span class="hs-identifier hs-var">getRegister'</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864360"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864360"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621682864361"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864361"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; NatM Register
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;getRegister(ppc)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; CmmExpr -&gt; SDoc
forall env a. OutputableP env a =&gt; env -&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pdoc"><span class="hs-identifier hs-var">pdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864360"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864361"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-789"></span><span>
</span><span id="line-790"></span><span>    </span><span class="hs-comment">-- extend?Rep: wrap integer expression of type `from`</span><span>
</span><span id="line-791"></span><span>    </span><span class="hs-comment">-- in a conversion to `to`</span><span>
</span><span id="line-792"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendSExpr"><span class="hs-identifier hs-type">extendSExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-793"></span><span id="extendSExpr"><span class="annot"><span class="annottext">extendSExpr :: Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendSExpr"><span class="hs-identifier hs-var hs-var">extendSExpr</span></a></span></span><span> </span><span id="local-6989586621682864363"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864363"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621682864364"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864364"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span id="local-6989586621682864365"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864365"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MachOp -&gt; [CmmExpr] -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-var">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; MachOp
</span><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-var">MO_SS_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864363"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864364"><span class="hs-identifier hs-var">to</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864365"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-794"></span><span>
</span><span id="line-795"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendUExpr"><span class="hs-identifier hs-type">extendUExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-796"></span><span id="extendUExpr"><span class="annot"><span class="annottext">extendUExpr :: Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendUExpr"><span class="hs-identifier hs-var hs-var">extendUExpr</span></a></span></span><span> </span><span id="local-6989586621682864367"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864367"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621682864368"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864368"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span id="local-6989586621682864369"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864369"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MachOp -&gt; [CmmExpr] -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-var">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; MachOp
</span><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-var">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864367"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864368"><span class="hs-identifier hs-var">to</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864369"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-797"></span><span>
</span><span id="line-798"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-799"></span><span class="hs-comment">--  The 'Amode' type: Memory addressing modes passed up the tree.</span><span>
</span><span id="line-800"></span><span>
</span><span id="line-801"></span><span class="hs-keyword">data</span><span> </span><span id="Amode"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-var">Amode</span></a></span></span><span>
</span><span id="line-802"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span id="Amode"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-var">Amode</span></a></span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrMode"><span class="hs-identifier hs-type">AddrMode</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-803"></span><span>
</span><span id="line-804"></span><span class="hs-comment">{-
Now, given a tree (the argument to a CmmLoad) that references memory,
produce a suitable addressing mode.

A Rule of the Game (tm) for Amodes: use of the addr bit must
immediately follow use of the code part, since the code part puts
values in registers which the addr then refers to.  So you can't put
anything in between, lest it overwrite some of those registers.  If
you need to do some other computation between the code part and use of
the addr bit, first store the effective address from the amode in a
temporary, then do the other computation, and then use the temporary:

    code
    LEA amode, tmp
    ... other computation ...
    ... (tmp) ...
-}</span><span>
</span><span id="line-821"></span><span>
</span><span id="line-822"></span><span class="hs-comment">{- Note [Power instruction format]
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In some instructions the 16 bit offset must be a multiple of 4, i.e.
the two least significant bits must be zero. The &quot;Power ISA&quot; specification
calls these instruction formats &quot;DS-FORM&quot; and the instructions with
arbitrary 16 bit offsets are &quot;D-FORM&quot;.

The Power ISA specification document can be obtained from www.power.org.
-}</span><span>
</span><span id="line-831"></span><span class="hs-keyword">data</span><span> </span><span id="InstrForm"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrForm"><span class="hs-identifier hs-var">InstrForm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="D"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="DS"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#DS"><span class="hs-identifier hs-var">DS</span></a></span></span><span>
</span><span id="line-832"></span><span>
</span><span id="line-833"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-type">getAmode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrForm"><span class="hs-identifier hs-type">InstrForm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span>
</span><span id="line-834"></span><span id="getAmode"><span class="annot"><span class="annottext">getAmode :: InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var hs-var">getAmode</span></a></span></span><span> </span><span id="local-6989586621682864370"><span class="annot"><span class="annottext">InstrForm
</span><a href="#local-6989586621682864370"><span class="hs-identifier hs-var">inf</span></a></span></span><span> </span><span id="local-6989586621682864371"><span class="annot"><span class="annottext">tree :: CmmExpr
</span><a href="#local-6989586621682864371"><span class="hs-identifier hs-var">tree</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmRegOff"><span class="hs-identifier hs-type">CmmRegOff</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-835"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="#local-6989586621682864370"><span class="hs-identifier hs-var">inf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#mangleIndexTree"><span class="hs-identifier hs-var">mangleIndexTree</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864371"><span class="hs-identifier hs-var">tree</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-836"></span><span>
</span><span id="line-837"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Sub"><span class="hs-identifier hs-type">MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864372"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864372"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864373"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864373"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-838"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864374"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864374"><span class="hs-identifier hs-var">off</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864373"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-839"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-840"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864375"><span class="annot"><a href="#local-6989586621682864375"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864376"><span class="annot"><a href="#local-6989586621682864376"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864372"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-841"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864375"><span class="hs-identifier hs-type">reg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864374"><span class="hs-identifier hs-type">off</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864376"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-842"></span><span>
</span><span id="line-843"></span><span>
</span><span id="line-844"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864377"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864377"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864378"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864378"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864379"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864379"><span class="hs-identifier hs-var">off</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864378"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-846"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-847"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864380"><span class="annot"><a href="#local-6989586621682864380"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864381"><span class="annot"><a href="#local-6989586621682864381"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864377"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-848"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864380"><span class="hs-identifier hs-type">reg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864379"><span class="hs-identifier hs-type">off</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864381"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-849"></span><span>
</span><span id="line-850"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Sub"><span class="hs-identifier hs-type">MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864382"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864382"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864383"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864383"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-851"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864384"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864384"><span class="hs-identifier hs-var">off</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864383"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-852"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-853"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864385"><span class="annot"><a href="#local-6989586621682864385"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864386"><span class="annot"><a href="#local-6989586621682864386"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864382"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-854"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864385"><span class="hs-identifier hs-type">reg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864384"><span class="hs-identifier hs-type">off</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864386"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-855"></span><span>
</span><span id="line-856"></span><span>
</span><span id="line-857"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864387"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864387"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864388"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864388"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-858"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864389"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864389"><span class="hs-identifier hs-var">off</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864388"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-859"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-860"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864390"><span class="annot"><a href="#local-6989586621682864390"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864391"><span class="annot"><a href="#local-6989586621682864391"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864387"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-861"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864390"><span class="hs-identifier hs-type">reg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864389"><span class="hs-identifier hs-type">off</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864391"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-862"></span><span>
</span><span id="line-863"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#DS"><span class="hs-identifier hs-var">DS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Sub"><span class="hs-identifier hs-type">MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864392"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864392"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864393"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864393"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-864"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864394"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864394"><span class="hs-identifier hs-var">off</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864393"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-865"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-866"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864395"><span class="annot"><a href="#local-6989586621682864395"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864396"><span class="annot"><a href="#local-6989586621682864396"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864392"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-867"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864397"><span class="annot"><a href="#local-6989586621682864397"><span class="hs-identifier hs-var">reg'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864398"><span class="annot"><a href="#local-6989586621682864398"><span class="hs-identifier hs-var">off'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864399"><span class="annot"><a href="#local-6989586621682864399"><span class="hs-identifier hs-var">code'</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-868"></span><span>                     </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682864393"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`mod`</span></span><span> </span><span class="annot"><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-869"></span><span>                      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864395"><span class="hs-identifier hs-type">reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682864394"><span class="hs-identifier hs-type">off</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682864396"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-870"></span><span>                      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-871"></span><span>                           </span><span id="local-6989586621682864401"><span class="annot"><a href="#local-6989586621682864401"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span>
</span><span id="line-872"></span><span>                           </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864401"><span class="hs-identifier hs-type">tmp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">,</span><span>
</span><span id="line-873"></span><span>                                  </span><span class="annot"><a href="#local-6989586621682864396"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864401"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864395"><span class="hs-identifier hs-type">reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864394"><span class="hs-identifier hs-type">off</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-874"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864397"><span class="hs-identifier hs-type">reg'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864398"><span class="hs-identifier hs-type">off'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864399"><span class="hs-identifier hs-type">code'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-875"></span><span>
</span><span id="line-876"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#DS"><span class="hs-identifier hs-var">DS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864402"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864402"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864403"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864403"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-877"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864404"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864404"><span class="hs-identifier hs-var">off</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864403"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-878"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-879"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864405"><span class="annot"><a href="#local-6989586621682864405"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864406"><span class="annot"><a href="#local-6989586621682864406"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864402"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-880"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864407"><span class="annot"><a href="#local-6989586621682864407"><span class="hs-identifier hs-var">reg'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864408"><span class="annot"><a href="#local-6989586621682864408"><span class="hs-identifier hs-var">off'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864409"><span class="annot"><a href="#local-6989586621682864409"><span class="hs-identifier hs-var">code'</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-881"></span><span>                     </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682864403"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`mod`</span></span><span> </span><span class="annot"><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-882"></span><span>                      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864405"><span class="hs-identifier hs-type">reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682864404"><span class="hs-identifier hs-type">off</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682864406"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-883"></span><span>                      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-884"></span><span>                           </span><span id="local-6989586621682864410"><span class="annot"><a href="#local-6989586621682864410"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span>
</span><span id="line-885"></span><span>                           </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864410"><span class="hs-identifier hs-type">tmp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">,</span><span>
</span><span id="line-886"></span><span>                                  </span><span class="annot"><a href="#local-6989586621682864406"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864410"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864405"><span class="hs-identifier hs-type">reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864404"><span class="hs-identifier hs-type">off</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864407"><span class="hs-identifier hs-type">reg'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864408"><span class="hs-identifier hs-type">off'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864409"><span class="hs-identifier hs-type">code'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-888"></span><span>
</span><span id="line-889"></span><span>   </span><span class="hs-comment">-- optimize addition with 32-bit immediate</span><span>
</span><span id="line-890"></span><span>   </span><span class="hs-comment">-- (needed for PIC)</span><span>
</span><span id="line-891"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864411"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864411"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span id="local-6989586621682864412"><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864412"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-893"></span><span>        </span><span id="local-6989586621682864413"><span class="annot"><a href="#local-6989586621682864413"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-894"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864414"><span class="annot"><a href="#local-6989586621682864414"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864415"><span class="annot"><a href="#local-6989586621682864415"><span class="hs-identifier hs-var">srcCode</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864411"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-895"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864416"><span class="annot"><a href="#local-6989586621682864416"><span class="hs-identifier hs-var hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#litToImm"><span class="hs-identifier hs-var">litToImm</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864412"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-896"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-897"></span><span>            </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier hs-var">OSAIX</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OS
</span><a href="GHC.Platform.html#platformOS"><span class="hs-identifier hs-var">platformOS</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864413"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-898"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; Bool
</span><a href="#local-6989586621682864417"><span class="hs-identifier hs-var">isCmmLabelType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864412"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-899"></span><span>                    </span><span class="hs-comment">-- HA16/LO16 relocations on labels not supported on AIX</span><span>
</span><span id="line-900"></span><span>                    </span><span class="annot"><span class="annottext">Amode -&gt; NatM Amode
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddrMode -&gt; OrdList Instr -&gt; Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-var">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864414"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864416"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864415"><span class="hs-identifier hs-var">srcCode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-901"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-902"></span><span>                    </span><span id="local-6989586621682864418"><span class="annot"><a href="#local-6989586621682864418"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-var">getNewRegNat</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span>
</span><span id="line-903"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864419"><span class="annot"><a href="#local-6989586621682864419"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864415"><span class="hs-identifier hs-var">srcCode</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADDIS"><span class="hs-identifier hs-var">ADDIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864418"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864414"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#HA"><span class="hs-identifier hs-var">HA</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864416"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-904"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864418"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#LO"><span class="hs-identifier hs-type">LO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864416"><span class="hs-identifier hs-type">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864419"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-905"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-906"></span><span>      </span><span id="local-6989586621682864417"><span class="annot"><span class="annottext">isCmmLabelType :: CmmLit -&gt; Bool
</span><a href="#local-6989586621682864417"><span class="hs-identifier hs-var hs-var">isCmmLabelType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-type">CmmLabel</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-907"></span><span>      </span><span class="annot"><a href="#local-6989586621682864417"><span class="hs-identifier hs-var">isCmmLabelType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabelOff"><span class="hs-identifier hs-type">CmmLabelOff</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-908"></span><span>      </span><span class="annot"><a href="#local-6989586621682864417"><span class="hs-identifier hs-var">isCmmLabelType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabelDiffOff"><span class="hs-identifier hs-type">CmmLabelDiffOff</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-909"></span><span>      </span><span class="annot"><a href="#local-6989586621682864417"><span class="hs-identifier hs-var">isCmmLabelType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><span class="hs-identifier">_</span></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-910"></span><span>
</span><span id="line-911"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span id="local-6989586621682864422"><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864422"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-912"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-913"></span><span>        </span><span id="local-6989586621682864423"><span class="annot"><a href="#local-6989586621682864423"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-914"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Platform.html#platformArch"><span class="hs-identifier hs-type">platformArch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864423"><span class="hs-identifier hs-type">platform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-915"></span><span>             </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier hs-var">ArchPPC</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-916"></span><span>                 </span><span id="local-6989586621682864424"><span class="annot"><a href="#local-6989586621682864424"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-var">getNewRegNat</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span>
</span><span id="line-917"></span><span>                 </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864425"><span class="annot"><a href="#local-6989586621682864425"><span class="hs-identifier hs-var hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#litToImm"><span class="hs-identifier hs-var">litToImm</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864422"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-918"></span><span>                     </span><span id="local-6989586621682864426"><span class="annot"><a href="#local-6989586621682864426"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LIS"><span class="hs-identifier hs-var">LIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864424"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#HA"><span class="hs-identifier hs-var">HA</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864425"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-919"></span><span>                 </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864424"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#LO"><span class="hs-identifier hs-type">LO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864425"><span class="hs-identifier hs-type">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864426"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-920"></span><span>             </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- TODO: Load from TOC,</span><span>
</span><span id="line-921"></span><span>                            </span><span class="hs-comment">-- see getRegister' _ (CmmLit lit)</span><span>
</span><span id="line-922"></span><span>                 </span><span id="local-6989586621682864427"><span class="annot"><a href="#local-6989586621682864427"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-var">getNewRegNat</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span>
</span><span id="line-923"></span><span>                 </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864428"><span class="annot"><a href="#local-6989586621682864428"><span class="hs-identifier hs-var hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#litToImm"><span class="hs-identifier hs-var">litToImm</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621682864422"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-924"></span><span>                     </span><span id="local-6989586621682864429"><span class="annot"><a href="#local-6989586621682864429"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-925"></span><span>                          </span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LIS"><span class="hs-identifier hs-var">LIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864427"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#HIGHESTA"><span class="hs-identifier hs-var">HIGHESTA</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864428"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-926"></span><span>                          </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#OR"><span class="hs-identifier hs-var">OR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864427"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864427"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#HIGHERA"><span class="hs-identifier hs-var">HIGHERA</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864428"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-927"></span><span>                          </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-var">SL</span></a></span><span>  </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864427"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864427"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-928"></span><span>                          </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ORIS"><span class="hs-identifier hs-var">ORIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864427"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864427"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#HA"><span class="hs-identifier hs-var">HA</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864428"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-929"></span><span>                          </span><span class="hs-special">]</span><span>
</span><span id="line-930"></span><span>                 </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864427"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#LO"><span class="hs-identifier hs-type">LO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864428"><span class="hs-identifier hs-type">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864429"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-931"></span><span>
</span><span id="line-932"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864433"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864433"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864434"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864434"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-933"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-934"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864435"><span class="annot"><a href="#local-6989586621682864435"><span class="hs-identifier hs-var">regX</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864436"><span class="annot"><a href="#local-6989586621682864436"><span class="hs-identifier hs-var">codeX</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864433"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-935"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864437"><span class="annot"><a href="#local-6989586621682864437"><span class="hs-identifier hs-var">regY</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864438"><span class="annot"><a href="#local-6989586621682864438"><span class="hs-identifier hs-var">codeY</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864434"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-936"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegReg"><span class="hs-identifier hs-type">AddrRegReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864435"><span class="hs-identifier hs-type">regX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864437"><span class="hs-identifier hs-type">regY</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864436"><span class="hs-identifier hs-type">codeX</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864438"><span class="hs-identifier hs-type">codeY</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-937"></span><span>
</span><span id="line-938"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864440"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864440"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864441"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864441"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-939"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-940"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864442"><span class="annot"><a href="#local-6989586621682864442"><span class="hs-identifier hs-var">regX</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864443"><span class="annot"><a href="#local-6989586621682864443"><span class="hs-identifier hs-var">codeX</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864440"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-941"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864444"><span class="annot"><a href="#local-6989586621682864444"><span class="hs-identifier hs-var">regY</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864445"><span class="annot"><a href="#local-6989586621682864445"><span class="hs-identifier hs-var">codeY</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864441"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-942"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegReg"><span class="hs-identifier hs-type">AddrRegReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864442"><span class="hs-identifier hs-type">regX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864444"><span class="hs-identifier hs-type">regY</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864443"><span class="hs-identifier hs-type">codeX</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864445"><span class="hs-identifier hs-type">codeY</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-943"></span><span>
</span><span id="line-944"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864446"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864446"><span class="hs-identifier hs-var">other</span></a></span></span><span>
</span><span id="line-945"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-946"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864447"><span class="annot"><a href="#local-6989586621682864447"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864448"><span class="annot"><a href="#local-6989586621682864448"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864446"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-947"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-948"></span><span>            </span><span id="local-6989586621682864449"><span class="annot"><a href="#local-6989586621682864449"><span class="hs-identifier hs-var hs-var">off</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-949"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864447"><span class="hs-identifier hs-type">reg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864449"><span class="hs-identifier hs-type">off</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864448"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-950"></span><span>
</span><span id="line-951"></span><span>
</span><span id="line-952"></span><span class="hs-comment">--  The 'CondCode' type:  Condition codes passed up the tree.</span><span>
</span><span id="line-953"></span><span class="hs-keyword">data</span><span> </span><span id="CondCode"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-var">CondCode</span></a></span></span><span>
</span><span id="line-954"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span id="CondCode"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-var">CondCode</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#Cond"><span class="hs-identifier hs-type">Cond</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-955"></span><span>
</span><span id="line-956"></span><span class="hs-comment">-- Set up a condition code for a conditional branch.</span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getCondCode"><span class="hs-identifier hs-type">getCondCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span>
</span><span id="line-959"></span><span>
</span><span id="line-960"></span><span class="hs-comment">-- almost the same as everywhere else - but we need to</span><span>
</span><span id="line-961"></span><span class="hs-comment">-- extend small integers to 32 bit or 64 bit first</span><span>
</span><span id="line-962"></span><span>
</span><span id="line-963"></span><span id="getCondCode"><span class="annot"><span class="annottext">getCondCode :: CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getCondCode"><span class="hs-identifier hs-var hs-var">getCondCode</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span id="local-6989586621682864452"><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621682864452"><span class="hs-identifier hs-var">mop</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864453"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864454"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-964"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621682864452"><span class="hs-identifier hs-var">mop</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-965"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Eq"><span class="hs-identifier hs-type">MO_F_Eq</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#EQQ"><span class="hs-identifier hs-var">EQQ</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-966"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Ne"><span class="hs-identifier hs-type">MO_F_Ne</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-967"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Gt"><span class="hs-identifier hs-type">MO_F_Gt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GTT"><span class="hs-identifier hs-var">GTT</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-968"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Ge"><span class="hs-identifier hs-type">MO_F_Ge</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GE"><span class="hs-identifier hs-var">GE</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-969"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Lt"><span class="hs-identifier hs-type">MO_F_Lt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LTT"><span class="hs-identifier hs-var">LTT</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-970"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Le"><span class="hs-identifier hs-type">MO_F_Le</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LE"><span class="hs-identifier hs-var">LE</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-971"></span><span>
</span><span id="line-972"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Eq"><span class="hs-identifier hs-type">MO_F_Eq</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#EQQ"><span class="hs-identifier hs-var">EQQ</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-973"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Ne"><span class="hs-identifier hs-type">MO_F_Ne</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-974"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Gt"><span class="hs-identifier hs-type">MO_F_Gt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GTT"><span class="hs-identifier hs-var">GTT</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-975"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Ge"><span class="hs-identifier hs-type">MO_F_Ge</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GE"><span class="hs-identifier hs-var">GE</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-976"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Lt"><span class="hs-identifier hs-type">MO_F_Lt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LTT"><span class="hs-identifier hs-var">LTT</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-977"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Le"><span class="hs-identifier hs-type">MO_F_Le</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LE"><span class="hs-identifier hs-var">LE</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-978"></span><span>
</span><span id="line-979"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Eq"><span class="hs-identifier hs-type">MO_Eq</span></a></span><span> </span><span id="local-6989586621682864456"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864456"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#EQQ"><span class="hs-identifier hs-var">EQQ</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864456"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-980"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Ne"><span class="hs-identifier hs-type">MO_Ne</span></a></span><span> </span><span id="local-6989586621682864458"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864458"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864458"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-981"></span><span>
</span><span id="line-982"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Gt"><span class="hs-identifier hs-type">MO_S_Gt</span></a></span><span> </span><span id="local-6989586621682864459"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864459"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GTT"><span class="hs-identifier hs-var">GTT</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864459"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-983"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Ge"><span class="hs-identifier hs-type">MO_S_Ge</span></a></span><span> </span><span id="local-6989586621682864460"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864460"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GE"><span class="hs-identifier hs-var">GE</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864460"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-984"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Lt"><span class="hs-identifier hs-type">MO_S_Lt</span></a></span><span> </span><span id="local-6989586621682864461"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864461"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LTT"><span class="hs-identifier hs-var">LTT</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864461"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-985"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Le"><span class="hs-identifier hs-type">MO_S_Le</span></a></span><span> </span><span id="local-6989586621682864462"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864462"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LE"><span class="hs-identifier hs-var">LE</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864462"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-986"></span><span>
</span><span id="line-987"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Gt"><span class="hs-identifier hs-type">MO_U_Gt</span></a></span><span> </span><span id="local-6989586621682864463"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864463"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GU"><span class="hs-identifier hs-var">GU</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864463"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-988"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Ge"><span class="hs-identifier hs-type">MO_U_Ge</span></a></span><span> </span><span id="local-6989586621682864464"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864464"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GEU"><span class="hs-identifier hs-var">GEU</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864464"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-989"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Lt"><span class="hs-identifier hs-type">MO_U_Lt</span></a></span><span> </span><span id="local-6989586621682864465"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864465"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LU"><span class="hs-identifier hs-var">LU</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864465"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-990"></span><span>      </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Le"><span class="hs-identifier hs-type">MO_U_Le</span></a></span><span> </span><span id="local-6989586621682864466"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864466"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LEU"><span class="hs-identifier hs-var">LEU</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864466"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864453"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864454"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-991"></span><span>
</span><span id="line-992"></span><span>      </span><span class="annot"><span class="annottext">MachOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; NatM CondCode
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;getCondCode(powerpc)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MachOp -&gt; SDoc
</span><a href="GHC.Cmm.MachOp.html#pprMachOp"><span class="hs-identifier hs-var">pprMachOp</span></a></span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621682864452"><span class="hs-identifier hs-var">mop</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-993"></span><span>
</span><span id="line-994"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getCondCode"><span class="hs-identifier hs-var">getCondCode</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM CondCode
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;getCondCode(2)(powerpc)&quot;</span></span><span>
</span><span id="line-995"></span><span>
</span><span id="line-996"></span><span>
</span><span id="line-997"></span><span class="hs-comment">-- @cond(Int|Flt)Code@: Turn a boolean expression into a condition, to be</span><span>
</span><span id="line-998"></span><span class="hs-comment">-- passed back up the tree.</span><span>
</span><span id="line-999"></span><span>
</span><span id="line-1000"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-type">condIntCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#Cond"><span class="hs-identifier hs-type">Cond</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span>
</span><span id="line-1001"></span><span id="condIntCode"><span class="annot"><span class="annottext">condIntCode :: Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var hs-var">condIntCode</span></a></span></span><span> </span><span id="local-6989586621682864468"><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864468"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621682864469"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864469"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682864470"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864470"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682864471"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864471"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1002"></span><span>  </span><span id="local-6989586621682864472"><span class="annot"><a href="#local-6989586621682864472"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1003"></span><span>  </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode%27"><span class="hs-identifier hs-type">condIntCode'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-type">target32Bit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864472"><span class="hs-identifier hs-type">platform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864468"><span class="hs-identifier hs-type">cond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864469"><span class="hs-identifier hs-type">width</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864470"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864471"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-1004"></span><span>
</span><span id="line-1005"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode%27"><span class="hs-identifier hs-type">condIntCode'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#Cond"><span class="hs-identifier hs-type">Cond</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span>
</span><span id="line-1006"></span><span>
</span><span id="line-1007"></span><span class="hs-comment">-- simple code for 64-bit on 32-bit platforms</span><span>
</span><span id="line-1008"></span><span id="condIntCode%27"><span class="annot"><span class="annottext">condIntCode' :: Bool -&gt; Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode%27"><span class="hs-identifier hs-var hs-var">condIntCode'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span id="local-6989586621682864474"><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864474"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span id="local-6989586621682864475"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864475"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682864476"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864476"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-1009"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Bool
</span><a href="GHC.CmmToAsm.PPC.Cond.html#condUnsigned"><span class="hs-identifier hs-var">condUnsigned</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864474"><span class="hs-identifier hs-var">cond</span></a></span><span>
</span><span id="line-1010"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1011"></span><span>      </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682864478"><span class="annot"><a href="#local-6989586621682864478"><span class="hs-identifier hs-var">code_x</span></a></span></span><span> </span><span id="local-6989586621682864479"><span class="annot"><a href="#local-6989586621682864479"><span class="hs-identifier hs-var">x_hi</span></a></span></span><span> </span><span id="local-6989586621682864480"><span class="annot"><a href="#local-6989586621682864480"><span class="hs-identifier hs-var">x_lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864475"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1012"></span><span>      </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682864481"><span class="annot"><a href="#local-6989586621682864481"><span class="hs-identifier hs-var">code_y</span></a></span></span><span> </span><span id="local-6989586621682864482"><span class="annot"><a href="#local-6989586621682864482"><span class="hs-identifier hs-var">y_hi</span></a></span></span><span> </span><span id="local-6989586621682864483"><span class="annot"><a href="#local-6989586621682864483"><span class="hs-identifier hs-var">y_lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-type">iselExpr64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864476"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-1013"></span><span>      </span><span id="local-6989586621682864484"><span class="annot"><a href="#local-6989586621682864484"><span class="hs-identifier hs-var">end_lbl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1014"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864485"><span class="annot"><a href="#local-6989586621682864485"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864478"><span class="hs-identifier hs-var">code_x</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864481"><span class="hs-identifier hs-var">code_y</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span>
</span><span id="line-1015"></span><span>                 </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-var">CMPL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864479"><span class="hs-identifier hs-var">x_hi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864482"><span class="hs-identifier hs-var">y_hi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1016"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864484"><span class="hs-identifier hs-var">end_lbl</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1017"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-var">CMPL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864480"><span class="hs-identifier hs-var">x_lo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864483"><span class="hs-identifier hs-var">y_lo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1018"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864484"><span class="hs-identifier hs-var">end_lbl</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1019"></span><span>
</span><span id="line-1020"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864484"><span class="hs-identifier hs-var">end_lbl</span></a></span><span>
</span><span id="line-1021"></span><span>                 </span><span class="hs-special">]</span><span>
</span><span id="line-1022"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="annot"><a href="#local-6989586621682864474"><span class="hs-identifier hs-type">cond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864485"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1023"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1024"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1025"></span><span>      </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682864487"><span class="annot"><a href="#local-6989586621682864487"><span class="hs-identifier hs-var">code_x</span></a></span></span><span> </span><span id="local-6989586621682864488"><span class="annot"><a href="#local-6989586621682864488"><span class="hs-identifier hs-var">x_hi</span></a></span></span><span> </span><span id="local-6989586621682864489"><span class="annot"><a href="#local-6989586621682864489"><span class="hs-identifier hs-var">x_lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864475"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1026"></span><span>      </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682864490"><span class="annot"><a href="#local-6989586621682864490"><span class="hs-identifier hs-var">code_y</span></a></span></span><span> </span><span id="local-6989586621682864491"><span class="annot"><a href="#local-6989586621682864491"><span class="hs-identifier hs-var">y_hi</span></a></span></span><span> </span><span id="local-6989586621682864492"><span class="annot"><a href="#local-6989586621682864492"><span class="hs-identifier hs-var">y_lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-type">iselExpr64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864476"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-1027"></span><span>      </span><span id="local-6989586621682864493"><span class="annot"><a href="#local-6989586621682864493"><span class="hs-identifier hs-var">end_lbl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1028"></span><span>      </span><span id="local-6989586621682864494"><span class="annot"><a href="#local-6989586621682864494"><span class="hs-identifier hs-var">cmp_lo</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1029"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864495"><span class="annot"><a href="#local-6989586621682864495"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864487"><span class="hs-identifier hs-var">code_x</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864490"><span class="hs-identifier hs-var">code_y</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span>
</span><span id="line-1030"></span><span>                 </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMP"><span class="hs-identifier hs-var">CMP</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864488"><span class="hs-identifier hs-var">x_hi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864491"><span class="hs-identifier hs-var">y_hi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1031"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864493"><span class="hs-identifier hs-var">end_lbl</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1032"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMP"><span class="hs-identifier hs-var">CMP</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864488"><span class="hs-identifier hs-var">x_hi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1033"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LE"><span class="hs-identifier hs-var">LE</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864494"><span class="hs-identifier hs-var">cmp_lo</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1034"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-var">CMPL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864489"><span class="hs-identifier hs-var">x_lo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864492"><span class="hs-identifier hs-var">y_lo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1035"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864493"><span class="hs-identifier hs-var">end_lbl</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1036"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864494"><span class="hs-identifier hs-var">cmp_lo</span></a></span><span>
</span><span id="line-1037"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-var">CMPL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864492"><span class="hs-identifier hs-var">y_lo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864489"><span class="hs-identifier hs-var">x_lo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1038"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864493"><span class="hs-identifier hs-var">end_lbl</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1039"></span><span>
</span><span id="line-1040"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864493"><span class="hs-identifier hs-var">end_lbl</span></a></span><span>
</span><span id="line-1041"></span><span>                 </span><span class="hs-special">]</span><span>
</span><span id="line-1042"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="annot"><a href="#local-6989586621682864474"><span class="hs-identifier hs-type">cond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864495"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1043"></span><span>
</span><span id="line-1044"></span><span class="hs-comment">-- optimize pointer tag checks. Operation andi. sets condition register</span><span>
</span><span id="line-1045"></span><span class="hs-comment">-- so cmpi ..., 0 is redundant.</span><span>
</span><span id="line-1046"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode%27"><span class="hs-identifier hs-var">condIntCode'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864497"><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864497"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_And"><span class="hs-identifier hs-type">MO_And</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864498"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864498"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864499"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864499"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span id="local-6989586621682864500"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864500"><span class="hs-identifier hs-var">rep</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1047"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1048"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Bool
</span><a href="GHC.CmmToAsm.PPC.Cond.html#condUnsigned"><span class="hs-identifier hs-var">condUnsigned</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864497"><span class="hs-identifier hs-var">cond</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1049"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864501"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864501"><span class="hs-identifier hs-var">src2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864500"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864499"><span class="hs-identifier hs-var">imm</span></a></span><span>
</span><span id="line-1050"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1051"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682864502"><span class="annot"><a href="#local-6989586621682864502"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864503"><span class="annot"><a href="#local-6989586621682864503"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864498"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1052"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864504"><span class="annot"><a href="#local-6989586621682864504"><span class="hs-identifier hs-var hs-var">code'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864503"><span class="hs-identifier hs-var">code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#AND"><span class="hs-identifier hs-var">AND</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r0"><span class="hs-identifier hs-var">r0</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864502"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864501"><span class="hs-identifier hs-var">src2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1053"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="annot"><a href="#local-6989586621682864497"><span class="hs-identifier hs-type">cond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864504"><span class="hs-identifier hs-type">code'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1054"></span><span>
</span><span id="line-1055"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode%27"><span class="hs-identifier hs-var">condIntCode'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864506"><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864506"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621682864507"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864507"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682864508"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864508"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864509"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864509"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621682864510"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864510"><span class="hs-identifier hs-var">rep</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1056"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864511"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864511"><span class="hs-identifier hs-var">src2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864510"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Bool
</span><a href="GHC.CmmToAsm.PPC.Cond.html#condUnsigned"><span class="hs-identifier hs-var">condUnsigned</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864506"><span class="hs-identifier hs-var">cond</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864509"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-1057"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1058"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864512"><span class="annot"><span class="annottext">op_len :: Width
</span><a href="#local-6989586621682864512"><span class="hs-identifier hs-var hs-var hs-var">op_len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Width
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864507"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1059"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864514"><span class="annot"><span class="annottext">extend :: CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682864514"><span class="hs-identifier hs-var hs-var hs-var">extend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Bool
</span><a href="GHC.CmmToAsm.PPC.Cond.html#condUnsigned"><span class="hs-identifier hs-var">condUnsigned</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864506"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendUExpr"><span class="hs-identifier hs-var">extendUExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864507"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864512"><span class="hs-identifier hs-var">op_len</span></a></span><span>
</span><span id="line-1060"></span><span>                   </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendSExpr"><span class="hs-identifier hs-var">extendSExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864507"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864512"><span class="hs-identifier hs-var">op_len</span></a></span><span>
</span><span id="line-1061"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682864515"><span class="annot"><a href="#local-6989586621682864515"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864516"><span class="annot"><a href="#local-6989586621682864516"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682864514"><span class="hs-identifier hs-var">extend</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864508"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1062"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864517"><span class="annot"><a href="#local-6989586621682864517"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864512"><span class="hs-identifier hs-var">op_len</span></a></span><span>
</span><span id="line-1063"></span><span>          </span><span id="local-6989586621682864518"><span class="annot"><a href="#local-6989586621682864518"><span class="hs-identifier hs-var hs-var">code'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864516"><span class="hs-identifier hs-var">code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span>
</span><span id="line-1064"></span><span>            </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Bool
</span><a href="GHC.CmmToAsm.PPC.Cond.html#condUnsigned"><span class="hs-identifier hs-var">condUnsigned</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864506"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-var">CMPL</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMP"><span class="hs-identifier hs-var">CMP</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864517"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864515"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864511"><span class="hs-identifier hs-var">src2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1065"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="annot"><a href="#local-6989586621682864506"><span class="hs-identifier hs-type">cond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864518"><span class="hs-identifier hs-type">code'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1066"></span><span>
</span><span id="line-1067"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode%27"><span class="hs-identifier hs-var">condIntCode'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864519"><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864519"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621682864520"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864520"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682864521"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864521"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682864522"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864522"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1068"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864523"><span class="annot"><span class="annottext">op_len :: Width
</span><a href="#local-6989586621682864523"><span class="hs-identifier hs-var hs-var hs-var">op_len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Width
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864520"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1069"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864524"><span class="annot"><span class="annottext">extend :: CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682864524"><span class="hs-identifier hs-var hs-var hs-var">extend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Bool
</span><a href="GHC.CmmToAsm.PPC.Cond.html#condUnsigned"><span class="hs-identifier hs-var">condUnsigned</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864519"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendUExpr"><span class="hs-identifier hs-var">extendUExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864520"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864523"><span class="hs-identifier hs-var">op_len</span></a></span><span>
</span><span id="line-1070"></span><span>               </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendSExpr"><span class="hs-identifier hs-var">extendSExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864520"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864523"><span class="hs-identifier hs-var">op_len</span></a></span><span>
</span><span id="line-1071"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682864525"><span class="annot"><a href="#local-6989586621682864525"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864526"><span class="annot"><a href="#local-6989586621682864526"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682864524"><span class="hs-identifier hs-var">extend</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864521"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1072"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682864527"><span class="annot"><a href="#local-6989586621682864527"><span class="hs-identifier hs-var">src2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864528"><span class="annot"><a href="#local-6989586621682864528"><span class="hs-identifier hs-var">code2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864524"><span class="hs-identifier hs-type">extend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864522"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1073"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864529"><span class="annot"><a href="#local-6989586621682864529"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864523"><span class="hs-identifier hs-var">op_len</span></a></span><span>
</span><span id="line-1074"></span><span>      </span><span id="local-6989586621682864530"><span class="annot"><a href="#local-6989586621682864530"><span class="hs-identifier hs-var hs-var">code'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864526"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864528"><span class="hs-identifier hs-var">code2</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span>
</span><span id="line-1075"></span><span>        </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; Bool
</span><a href="GHC.CmmToAsm.PPC.Cond.html#condUnsigned"><span class="hs-identifier hs-var">condUnsigned</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864519"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-var">CMPL</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMP"><span class="hs-identifier hs-var">CMP</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864529"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864525"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864527"><span class="hs-identifier hs-var">src2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1076"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="annot"><a href="#local-6989586621682864519"><span class="hs-identifier hs-type">cond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864530"><span class="hs-identifier hs-type">code'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1077"></span><span>
</span><span id="line-1078"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-type">condFltCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#Cond"><span class="hs-identifier hs-type">Cond</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span>
</span><span id="line-1079"></span><span id="condFltCode"><span class="annot"><span class="annottext">condFltCode :: Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var hs-var">condFltCode</span></a></span></span><span> </span><span id="local-6989586621682864531"><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864531"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621682864532"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864532"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682864533"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864533"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1080"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682864534"><span class="annot"><a href="#local-6989586621682864534"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864535"><span class="annot"><a href="#local-6989586621682864535"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864532"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1081"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682864536"><span class="annot"><a href="#local-6989586621682864536"><span class="hs-identifier hs-var">src2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864537"><span class="annot"><a href="#local-6989586621682864537"><span class="hs-identifier hs-var">code2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864533"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-1082"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-1083"></span><span>        </span><span id="local-6989586621682864538"><span class="annot"><a href="#local-6989586621682864538"><span class="hs-identifier hs-var hs-var">code'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864535"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864537"><span class="hs-identifier hs-var">code2</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FCMP"><span class="hs-identifier hs-var">FCMP</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864534"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864536"><span class="hs-identifier hs-var">src2</span></a></span><span>
</span><span id="line-1084"></span><span>        </span><span id="local-6989586621682864539"><span class="annot"><a href="#local-6989586621682864539"><span class="hs-identifier hs-var hs-var">code''</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682864531"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-comment">-- twiddle CR to handle unordered case</span><span>
</span><span id="line-1085"></span><span>                    </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GE"><span class="hs-identifier hs-var">GE</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864538"><span class="hs-identifier hs-var">code'</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CRNOR"><span class="hs-identifier hs-var">CRNOR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864541"><span class="hs-identifier hs-var">ltbit</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864542"><span class="hs-identifier hs-var">eqbit</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864543"><span class="hs-identifier hs-var">gtbit</span></a></span><span>
</span><span id="line-1086"></span><span>                    </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LE"><span class="hs-identifier hs-var">LE</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864538"><span class="hs-identifier hs-var">code'</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CRNOR"><span class="hs-identifier hs-var">CRNOR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864543"><span class="hs-identifier hs-var">gtbit</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864542"><span class="hs-identifier hs-var">eqbit</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864541"><span class="hs-identifier hs-var">ltbit</span></a></span><span>
</span><span id="line-1087"></span><span>                    </span><span class="annot"><span class="annottext">Cond
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864538"><span class="hs-identifier hs-var">code'</span></a></span><span>
</span><span id="line-1088"></span><span>                 </span><span class="hs-keyword">where</span><span>
</span><span id="line-1089"></span><span>                    </span><span id="local-6989586621682864541"><span class="annot"><span class="annottext">ltbit :: Int
</span><a href="#local-6989586621682864541"><span class="hs-identifier hs-var hs-var">ltbit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682864542"><span class="annot"><span class="annottext">eqbit :: Int
</span><a href="#local-6989586621682864542"><span class="hs-identifier hs-var hs-var">eqbit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682864543"><span class="annot"><span class="annottext">gtbit :: Int
</span><a href="#local-6989586621682864543"><span class="hs-identifier hs-var hs-var">gtbit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1090"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span> </span><span class="annot"><a href="#local-6989586621682864531"><span class="hs-identifier hs-type">cond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864539"><span class="hs-identifier hs-type">code''</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1091"></span><span>
</span><span id="line-1092"></span><span>
</span><span id="line-1093"></span><span>
</span><span id="line-1094"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1095"></span><span class="hs-comment">-- Generating assignments</span><span>
</span><span id="line-1096"></span><span>
</span><span id="line-1097"></span><span class="hs-comment">-- Assignments are really at the heart of the whole code generation</span><span>
</span><span id="line-1098"></span><span class="hs-comment">-- business.  Almost all top-level nodes of any real importance are</span><span>
</span><span id="line-1099"></span><span class="hs-comment">-- assignments, which correspond to loads, stores, or register</span><span>
</span><span id="line-1100"></span><span class="hs-comment">-- transfers.  If we're really lucky, some of the register transfers</span><span>
</span><span id="line-1101"></span><span class="hs-comment">-- will go away, because we can use the destination register to</span><span>
</span><span id="line-1102"></span><span class="hs-comment">-- complete the code generation for the right hand side.  This only</span><span>
</span><span id="line-1103"></span><span class="hs-comment">-- fails when the right hand side is forced into a fixed register</span><span>
</span><span id="line-1104"></span><span class="hs-comment">-- (e.g. the result of a call).</span><span>
</span><span id="line-1105"></span><span>
</span><span id="line-1106"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_IntCode"><span class="hs-identifier hs-type">assignMem_IntCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-1107"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_IntCode"><span class="hs-identifier hs-type">assignReg_IntCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-1108"></span><span>
</span><span id="line-1109"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_FltCode"><span class="hs-identifier hs-type">assignMem_FltCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-1110"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_FltCode"><span class="hs-identifier hs-type">assignReg_FltCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-1111"></span><span>
</span><span id="line-1112"></span><span id="assignMem_IntCode"><span class="annot"><span class="annottext">assignMem_IntCode :: Format -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_IntCode"><span class="hs-identifier hs-var hs-var">assignMem_IntCode</span></a></span></span><span> </span><span id="local-6989586621682864547"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864547"><span class="hs-identifier hs-var">pk</span></a></span></span><span> </span><span id="local-6989586621682864548"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864548"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682864549"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864549"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1113"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682864550"><span class="annot"><a href="#local-6989586621682864550"><span class="hs-identifier hs-var">srcReg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864551"><span class="annot"><a href="#local-6989586621682864551"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864549"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-1114"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864552"><span class="annot"><a href="#local-6989586621682864552"><span class="hs-identifier hs-var">dstAddr</span></a></span></span><span> </span><span id="local-6989586621682864553"><span class="annot"><a href="#local-6989586621682864553"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682864547"><span class="hs-identifier hs-type">pk</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1115"></span><span>                                </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#DS"><span class="hs-identifier hs-var">DS</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864548"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-1116"></span><span>                                </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864548"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-1117"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864551"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864553"><span class="hs-identifier hs-type">addr_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-type">ST</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864547"><span class="hs-identifier hs-type">pk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864550"><span class="hs-identifier hs-type">srcReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864552"><span class="hs-identifier hs-type">dstAddr</span></a></span><span>
</span><span id="line-1118"></span><span>
</span><span id="line-1119"></span><span class="hs-comment">-- dst is a reg, but src could be anything</span><span>
</span><span id="line-1120"></span><span id="assignReg_IntCode"><span class="annot"><span class="annottext">assignReg_IntCode :: Format -&gt; CmmReg -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_IntCode"><span class="hs-identifier hs-var hs-var">assignReg_IntCode</span></a></span></span><span> </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864554"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682864554"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621682864555"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864555"><span class="hs-identifier hs-var">src</span></a></span></span><span>
</span><span id="line-1121"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1122"></span><span>        </span><span id="local-6989586621682864556"><span class="annot"><a href="#local-6989586621682864556"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1123"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864557"><span class="annot"><a href="#local-6989586621682864557"><span class="hs-identifier hs-var hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; CmmReg -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegisterReg"><span class="hs-identifier hs-var">getRegisterReg</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864556"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621682864554"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-1124"></span><span>        </span><span id="local-6989586621682864558"><span class="annot"><a href="#local-6989586621682864558"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister"><span class="hs-identifier hs-type">getRegister</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864555"><span class="hs-identifier hs-type">src</span></a></span><span>
</span><span id="line-1125"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682864558"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1126"></span><span>            </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864559"><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682864559"><span class="hs-identifier hs-var">code</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682864559"><span class="hs-identifier hs-var">code</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864557"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-1127"></span><span>            </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-type">Fixed</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864560"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864560"><span class="hs-identifier hs-var">freg</span></a></span></span><span> </span><span id="local-6989586621682864561"><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864561"><span class="hs-identifier hs-var">fcode</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864561"><span class="hs-identifier hs-var">fcode</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864557"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864560"><span class="hs-identifier hs-var">freg</span></a></span><span>
</span><span id="line-1128"></span><span>
</span><span id="line-1129"></span><span>
</span><span id="line-1130"></span><span>
</span><span id="line-1131"></span><span class="hs-comment">-- Easy, isn't it?</span><span>
</span><span id="line-1132"></span><span id="assignMem_FltCode"><span class="annot"><span class="annottext">assignMem_FltCode :: Format -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_FltCode"><span class="hs-identifier hs-var hs-var">assignMem_FltCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_IntCode"><span class="hs-identifier hs-var">assignMem_IntCode</span></a></span><span>
</span><span id="line-1133"></span><span id="assignReg_FltCode"><span class="annot"><span class="annottext">assignReg_FltCode :: Format -&gt; CmmReg -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_FltCode"><span class="hs-identifier hs-var hs-var">assignReg_FltCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmReg -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignReg_IntCode"><span class="hs-identifier hs-var">assignReg_IntCode</span></a></span><span>
</span><span id="line-1134"></span><span>
</span><span id="line-1135"></span><span>
</span><span id="line-1136"></span><span>
</span><span id="line-1137"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genJump"><span class="hs-identifier hs-type">genJump</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span class="hs-comment">{-the branch target-}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#RegWithFormat"><span class="hs-identifier hs-type">RegWithFormat</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-1138"></span><span>
</span><span id="line-1139"></span><span id="genJump"><span class="annot"><span class="annottext">genJump :: CmmExpr -&gt; [RegWithFormat] -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genJump"><span class="hs-identifier hs-var hs-var">genJump</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-type">CmmLabel</span></a></span><span> </span><span id="local-6989586621682864562"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682864562"><span class="hs-identifier hs-var">lbl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682864563"><span class="annot"><span class="annottext">[RegWithFormat]
</span><a href="#local-6989586621682864563"><span class="hs-identifier hs-var">regs</span></a></span></span><span>
</span><span id="line-1140"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(Instr -&gt; OrdList Instr) -&gt; Instr -&gt; OrdList Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; [RegWithFormat] -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#JMP"><span class="hs-identifier hs-var">JMP</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682864562"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="annot"><span class="annottext">[RegWithFormat]
</span><a href="#local-6989586621682864563"><span class="hs-identifier hs-var">regs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1141"></span><span>
</span><span id="line-1142"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genJump"><span class="hs-identifier hs-var">genJump</span></a></span><span> </span><span id="local-6989586621682864565"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864565"><span class="hs-identifier hs-var">tree</span></a></span></span><span> </span><span id="local-6989586621682864566"><span class="annot"><span class="annottext">[RegWithFormat]
</span><a href="#local-6989586621682864566"><span class="hs-identifier hs-var">gregs</span></a></span></span><span>
</span><span id="line-1143"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1144"></span><span>        </span><span id="local-6989586621682864567"><span class="annot"><a href="#local-6989586621682864567"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1145"></span><span>        </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genJump%27"><span class="hs-identifier hs-type">genJump'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864565"><span class="hs-identifier hs-type">tree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#platformToGCP"><span class="hs-identifier hs-type">platformToGCP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864567"><span class="hs-identifier hs-type">platform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864566"><span class="hs-identifier hs-type">gregs</span></a></span><span>
</span><span id="line-1146"></span><span>
</span><span id="line-1147"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genJump%27"><span class="hs-identifier hs-type">genJump'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GenCCallPlatform"><span class="hs-identifier hs-type">GenCCallPlatform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#RegWithFormat"><span class="hs-identifier hs-type">RegWithFormat</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-1148"></span><span>
</span><span id="line-1149"></span><span id="genJump%27"><span class="annot"><span class="annottext">genJump' :: CmmExpr
-&gt; GenCCallPlatform -&gt; [RegWithFormat] -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genJump%27"><span class="hs-identifier hs-var hs-var">genJump'</span></a></span></span><span> </span><span id="local-6989586621682864570"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864570"><span class="hs-identifier hs-var">tree</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682864572"><span class="annot"><span class="annottext">[RegWithFormat]
</span><a href="#local-6989586621682864572"><span class="hs-identifier hs-var">regs</span></a></span></span><span>
</span><span id="line-1150"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1151"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864573"><span class="annot"><a href="#local-6989586621682864573"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682864574"><span class="annot"><a href="#local-6989586621682864574"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864570"><span class="hs-identifier hs-var">tree</span></a></span><span>
</span><span id="line-1152"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864574"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-1153"></span><span>               </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-type">LD</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#r11"><span class="hs-identifier hs-type">r11</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864573"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1154"></span><span>               </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-type">LD</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-type">toc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864573"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">8</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1155"></span><span>               </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MTCTR"><span class="hs-identifier hs-type">MTCTR</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#r11"><span class="hs-identifier hs-type">r11</span></a></span><span>
</span><span id="line-1156"></span><span>               </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-type">LD</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#r11"><span class="hs-identifier hs-type">r11</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-type">AddrRegImm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864573"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">16</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1157"></span><span>               </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCTR"><span class="hs-identifier hs-type">BCTR</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="#local-6989586621682864572"><span class="hs-identifier hs-type">regs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1158"></span><span>
</span><span id="line-1159"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genJump%27"><span class="hs-identifier hs-var">genJump'</span></a></span><span> </span><span id="local-6989586621682864578"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864578"><span class="hs-identifier hs-var">tree</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682864579"><span class="annot"><span class="annottext">[RegWithFormat]
</span><a href="#local-6989586621682864579"><span class="hs-identifier hs-var">regs</span></a></span></span><span>
</span><span id="line-1160"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1161"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864580"><span class="annot"><a href="#local-6989586621682864580"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682864581"><span class="annot"><a href="#local-6989586621682864581"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864578"><span class="hs-identifier hs-var">tree</span></a></span><span>
</span><span id="line-1162"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864581"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-1163"></span><span>               </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-type">MR</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#r12"><span class="hs-identifier hs-type">r12</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864580"><span class="hs-identifier hs-type">target</span></a></span><span>
</span><span id="line-1164"></span><span>               </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MTCTR"><span class="hs-identifier hs-type">MTCTR</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#r12"><span class="hs-identifier hs-type">r12</span></a></span><span>
</span><span id="line-1165"></span><span>               </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCTR"><span class="hs-identifier hs-type">BCTR</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="#local-6989586621682864579"><span class="hs-identifier hs-type">regs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1166"></span><span>
</span><span id="line-1167"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genJump%27"><span class="hs-identifier hs-var">genJump'</span></a></span><span> </span><span id="local-6989586621682864583"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864583"><span class="hs-identifier hs-var">tree</span></a></span></span><span> </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864584"><span class="annot"><span class="annottext">[RegWithFormat]
</span><a href="#local-6989586621682864584"><span class="hs-identifier hs-var">regs</span></a></span></span><span>
</span><span id="line-1168"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1169"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864585"><span class="annot"><a href="#local-6989586621682864585"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682864586"><span class="annot"><a href="#local-6989586621682864586"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864583"><span class="hs-identifier hs-var">tree</span></a></span><span>
</span><span id="line-1170"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864586"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MTCTR"><span class="hs-identifier hs-type">MTCTR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864585"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCTR"><span class="hs-identifier hs-type">BCTR</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="#local-6989586621682864584"><span class="hs-identifier hs-type">regs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1171"></span><span>
</span><span id="line-1172"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1173"></span><span class="hs-comment">--  Unconditional branches</span><span>
</span><span id="line-1174"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genBranch"><span class="hs-identifier hs-type">genBranch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.BlockId.html#BlockId"><span class="hs-identifier hs-type">BlockId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-1175"></span><span id="genBranch"><span class="annot"><span class="annottext">genBranch :: BlockId -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genBranch"><span class="hs-identifier hs-var hs-var">genBranch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(OrdList Instr -&gt; NatM (OrdList Instr))
-&gt; (BlockId -&gt; OrdList Instr) -&gt; BlockId -&gt; NatM (OrdList Instr)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="annot"><span class="annottext">([Instr] -&gt; OrdList Instr)
-&gt; (BlockId -&gt; [Instr]) -&gt; BlockId -&gt; OrdList Instr
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; [Instr]
</span><a href="GHC.CmmToAsm.PPC.Instr.html#mkJumpInstr"><span class="hs-identifier hs-var">mkJumpInstr</span></a></span><span>
</span><span id="line-1176"></span><span>
</span><span id="line-1177"></span><span>
</span><span id="line-1178"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1179"></span><span class="hs-comment">--  Conditional jumps</span><span>
</span><span id="line-1180"></span><span>
</span><span id="line-1181"></span><span class="hs-comment">{-
Conditional jumps are always to local labels, so we can use branch
instructions.  We peek at the arguments to decide what kind of
comparison to do.
-}</span><span>
</span><span id="line-1186"></span><span>
</span><span id="line-1187"></span><span>
</span><span id="line-1188"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCondJump"><span class="hs-identifier hs-type">genCondJump</span></a></span><span>
</span><span id="line-1189"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.BlockId.html#BlockId"><span class="hs-identifier hs-type">BlockId</span></a></span><span>      </span><span class="hs-comment">-- the branch target</span><span>
</span><span id="line-1190"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>      </span><span class="hs-comment">-- the condition on which to branch</span><span>
</span><span id="line-1191"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1192"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-1193"></span><span>
</span><span id="line-1194"></span><span id="genCondJump"><span class="annot"><span class="annottext">genCondJump :: BlockId -&gt; CmmExpr -&gt; Maybe Bool -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCondJump"><span class="hs-identifier hs-var hs-var">genCondJump</span></a></span></span><span> </span><span id="local-6989586621682864589"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864589"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621682864590"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864590"><span class="hs-identifier hs-var">bool</span></a></span></span><span> </span><span id="local-6989586621682864591"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621682864591"><span class="hs-identifier hs-var">prediction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1195"></span><span>  </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682864592"><span class="annot"><a href="#local-6989586621682864592"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621682864593"><span class="annot"><a href="#local-6989586621682864593"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getCondCode"><span class="hs-identifier hs-var">getCondCode</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864590"><span class="hs-identifier hs-var">bool</span></a></span><span>
</span><span id="line-1196"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864593"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864592"><span class="hs-identifier hs-type">cond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864589"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864591"><span class="hs-identifier hs-type">prediction</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1197"></span><span>
</span><span id="line-1198"></span><span>
</span><span id="line-1199"></span><span>
</span><span id="line-1200"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1201"></span><span class="hs-comment">--  Generating C calls</span><span>
</span><span id="line-1202"></span><span>
</span><span id="line-1203"></span><span class="hs-comment">-- Now the biggest nightmare---calls.  Most of the nastiness is buried in</span><span>
</span><span id="line-1204"></span><span class="hs-comment">-- @get_arg@, which moves the arguments to the correct registers/stack</span><span>
</span><span id="line-1205"></span><span class="hs-comment">-- locations.  Apart from that, the code is easy.</span><span>
</span><span id="line-1206"></span><span>
</span><span id="line-1207"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-type">genCCall</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span>      </span><span class="hs-comment">-- function to call</span><span>
</span><span id="line-1208"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmFormal"><span class="hs-identifier hs-type">CmmFormal</span></a></span><span class="hs-special">]</span><span>        </span><span class="hs-comment">-- where to put the result</span><span>
</span><span id="line-1209"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmActual"><span class="hs-identifier hs-type">CmmActual</span></a></span><span class="hs-special">]</span><span>        </span><span class="hs-comment">-- arguments (of mixed type)</span><span>
</span><span id="line-1210"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-1211"></span><span id="genCCall"><span class="annot"><span class="annottext">genCCall :: ForeignTarget -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var hs-var">genCCall</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_AcquireFence"><span class="hs-identifier hs-var">MO_AcquireFence</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1212"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(OrdList Instr -&gt; NatM (OrdList Instr))
-&gt; OrdList Instr -&gt; NatM (OrdList Instr)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LWSYNC"><span class="hs-identifier hs-var">LWSYNC</span></a></span><span>
</span><span id="line-1213"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_ReleaseFence"><span class="hs-identifier hs-var">MO_ReleaseFence</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1214"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(OrdList Instr -&gt; NatM (OrdList Instr))
-&gt; OrdList Instr -&gt; NatM (OrdList Instr)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LWSYNC"><span class="hs-identifier hs-var">LWSYNC</span></a></span><span>
</span><span id="line-1215"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_SeqCstFence"><span class="hs-identifier hs-var">MO_SeqCstFence</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1216"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(OrdList Instr -&gt; NatM (OrdList Instr))
-&gt; OrdList Instr -&gt; NatM (OrdList Instr)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#HWSYNC"><span class="hs-identifier hs-var">HWSYNC</span></a></span><span>
</span><span id="line-1217"></span><span>
</span><span id="line-1218"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_Touch"><span class="hs-identifier hs-var">MO_Touch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1219"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(OrdList Instr -&gt; NatM (OrdList Instr))
-&gt; OrdList Instr -&gt; NatM (OrdList Instr)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-1220"></span><span>
</span><span id="line-1221"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Prefetch_Data"><span class="hs-identifier hs-type">MO_Prefetch_Data</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1222"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(OrdList Instr -&gt; NatM (OrdList Instr))
-&gt; OrdList Instr -&gt; NatM (OrdList Instr)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-1223"></span><span>
</span><span id="line-1224"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicRMW"><span class="hs-identifier hs-type">MO_AtomicRMW</span></a></span><span> </span><span id="local-6989586621682864604"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864604"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682864605"><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="#local-6989586621682864605"><span class="hs-identifier hs-var">amop</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864606"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864606"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864607"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864607"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864608"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864608"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1225"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864609"><span class="annot"><span class="annottext">fmt :: Format
</span><a href="#local-6989586621682864609"><span class="hs-identifier hs-var hs-var hs-var">fmt</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864604"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1226"></span><span>          </span><span id="local-6989586621682864610"><span class="annot"><span class="annottext">reg_dst :: Reg
</span><a href="#local-6989586621682864610"><span class="hs-identifier hs-var hs-var hs-var">reg_dst</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864606"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-1227"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682864611"><span class="annot"><a href="#local-6989586621682864611"><span class="hs-identifier hs-var">instr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864612"><span class="annot"><a href="#local-6989586621682864612"><span class="hs-identifier hs-var">n_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="#local-6989586621682864605"><span class="hs-identifier hs-var">amop</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1228"></span><span>            </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_Add"><span class="hs-identifier hs-var">AMO_Add</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; Bool -&gt; Reg -&gt; NatM (Instr, OrdList Instr)
</span><a href="#local-6989586621682864614"><span class="hs-identifier hs-var">getSomeRegOrImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864610"><span class="hs-identifier hs-var">reg_dst</span></a></span><span>
</span><span id="line-1229"></span><span>            </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_Sub"><span class="hs-identifier hs-var">AMO_Sub</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864608"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1230"></span><span>                </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864616"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864616"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1231"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864617"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864617"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864604"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864616"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1232"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Instr, OrdList Instr) -&gt; NatM (Instr, OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864610"><span class="hs-identifier hs-var">reg_dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864610"><span class="hs-identifier hs-var">reg_dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864617"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1233"></span><span>                </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1234"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1235"></span><span>                         </span><span class="hs-special">(</span><span id="local-6989586621682864618"><span class="annot"><a href="#local-6989586621682864618"><span class="hs-identifier hs-var">n_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864619"><span class="annot"><a href="#local-6989586621682864619"><span class="hs-identifier hs-var">n_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864608"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1236"></span><span>                         </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SUBF"><span class="hs-identifier hs-type">SUBF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864610"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864618"><span class="hs-identifier hs-type">n_reg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864610"><span class="hs-identifier hs-type">reg_dst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682864619"><span class="hs-identifier hs-type">n_code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1237"></span><span>            </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_And"><span class="hs-identifier hs-var">AMO_And</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; Bool -&gt; Reg -&gt; NatM (Instr, OrdList Instr)
</span><a href="#local-6989586621682864614"><span class="hs-identifier hs-var">getSomeRegOrImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#AND"><span class="hs-identifier hs-var">AND</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864610"><span class="hs-identifier hs-var">reg_dst</span></a></span><span>
</span><span id="line-1238"></span><span>            </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_Nand"><span class="hs-identifier hs-var">AMO_Nand</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682864622"><span class="annot"><a href="#local-6989586621682864622"><span class="hs-identifier hs-var">n_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864623"><span class="annot"><a href="#local-6989586621682864623"><span class="hs-identifier hs-var">n_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864608"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1239"></span><span>                           </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NAND"><span class="hs-identifier hs-type">NAND</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864610"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864610"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864622"><span class="hs-identifier hs-type">n_reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682864623"><span class="hs-identifier hs-type">n_code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1240"></span><span>            </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_Or"><span class="hs-identifier hs-var">AMO_Or</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; Bool -&gt; Reg -&gt; NatM (Instr, OrdList Instr)
</span><a href="#local-6989586621682864614"><span class="hs-identifier hs-var">getSomeRegOrImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#OR"><span class="hs-identifier hs-var">OR</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864610"><span class="hs-identifier hs-var">reg_dst</span></a></span><span>
</span><span id="line-1241"></span><span>            </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_Xor"><span class="hs-identifier hs-var">AMO_Xor</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; Bool -&gt; Reg -&gt; NatM (Instr, OrdList Instr)
</span><a href="#local-6989586621682864614"><span class="hs-identifier hs-var">getSomeRegOrImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#XOR"><span class="hs-identifier hs-var">XOR</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864610"><span class="hs-identifier hs-var">reg_dst</span></a></span><span>
</span><span id="line-1242"></span><span>      </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864627"><span class="annot"><a href="#local-6989586621682864627"><span class="hs-identifier hs-var">addr_reg</span></a></span></span><span> </span><span id="local-6989586621682864628"><span class="annot"><a href="#local-6989586621682864628"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682864629"><span class="hs-identifier hs-type">getAmodeIndex</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864607"><span class="hs-identifier hs-type">addr</span></a></span><span>
</span><span id="line-1243"></span><span>      </span><span id="local-6989586621682864630"><span class="annot"><a href="#local-6989586621682864630"><span class="hs-identifier hs-var">lbl_retry</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1244"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864612"><span class="hs-identifier hs-type">n_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864628"><span class="hs-identifier hs-type">addr_code</span></a></span><span>
</span><span id="line-1245"></span><span>        </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-type">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#HWSYNC"><span class="hs-identifier hs-type">HWSYNC</span></a></span><span>
</span><span id="line-1246"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-type">ALWAYS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864630"><span class="hs-identifier hs-type">lbl_retry</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1247"></span><span>
</span><span id="line-1248"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864630"><span class="hs-identifier hs-type">lbl_retry</span></a></span><span>
</span><span id="line-1249"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#LDR"><span class="hs-identifier hs-type">LDR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864609"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864610"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864627"><span class="hs-identifier hs-type">addr_reg</span></a></span><span>
</span><span id="line-1250"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682864611"><span class="hs-identifier hs-type">instr</span></a></span><span>
</span><span id="line-1251"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#STC"><span class="hs-identifier hs-type">STC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864609"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864610"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864627"><span class="hs-identifier hs-type">addr_reg</span></a></span><span>
</span><span id="line-1252"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-type">NE</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864630"><span class="hs-identifier hs-type">lbl_retry</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1253"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ISYNC"><span class="hs-identifier hs-type">ISYNC</span></a></span><span>
</span><span id="line-1254"></span><span>                     </span><span class="hs-special">]</span><span>
</span><span id="line-1255"></span><span>         </span><span class="hs-keyword">where</span><span>
</span><span id="line-1256"></span><span>           </span><span id="local-6989586621682864629"><span class="annot"><span class="annottext">getAmodeIndex :: CmmExpr -&gt; NatM Amode
</span><a href="#local-6989586621682864629"><span class="hs-identifier hs-var hs-var">getAmodeIndex</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864639"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864639"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864640"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864640"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1257"></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1258"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621682864641"><span class="annot"><a href="#local-6989586621682864641"><span class="hs-identifier hs-var">regX</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864642"><span class="annot"><a href="#local-6989586621682864642"><span class="hs-identifier hs-var">codeX</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864639"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1259"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621682864643"><span class="annot"><a href="#local-6989586621682864643"><span class="hs-identifier hs-var">regY</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864644"><span class="annot"><a href="#local-6989586621682864644"><span class="hs-identifier hs-var">codeY</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864640"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-1260"></span><span>                 </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegReg"><span class="hs-identifier hs-type">AddrRegReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864641"><span class="hs-identifier hs-type">regX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864643"><span class="hs-identifier hs-type">regY</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864642"><span class="hs-identifier hs-type">codeX</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864644"><span class="hs-identifier hs-type">codeY</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1261"></span><span>           </span><span class="annot"><a href="#local-6989586621682864629"><span class="hs-identifier hs-var">getAmodeIndex</span></a></span><span> </span><span id="local-6989586621682864645"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864645"><span class="hs-identifier hs-var">other</span></a></span></span><span>
</span><span id="line-1262"></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1263"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621682864646"><span class="annot"><a href="#local-6989586621682864646"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864647"><span class="annot"><a href="#local-6989586621682864647"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864645"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-1264"></span><span>                 </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegReg"><span class="hs-identifier hs-type">AddrRegReg</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#r0"><span class="hs-identifier hs-type">r0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864646"><span class="hs-identifier hs-type">reg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864647"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- NB: r0 is 0 here!</span><span>
</span><span id="line-1265"></span><span>           </span><span id="local-6989586621682864614"><span class="annot"><span class="annottext">getSomeRegOrImm :: (Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; Bool -&gt; Reg -&gt; NatM (Instr, OrdList Instr)
</span><a href="#local-6989586621682864614"><span class="hs-identifier hs-var hs-var">getSomeRegOrImm</span></a></span></span><span> </span><span id="local-6989586621682864648"><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682864648"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621682864649"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682864649"><span class="hs-identifier hs-var">sign</span></a></span></span><span> </span><span id="local-6989586621682864650"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864650"><span class="hs-identifier hs-var">dst</span></a></span></span><span>
</span><span id="line-1266"></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864608"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1267"></span><span>                 </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682864651"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864651"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682864652"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864652"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864604"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682864649"><span class="hs-identifier hs-var">sign</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682864651"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1268"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Instr, OrdList Instr) -&gt; NatM (Instr, OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682864648"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864650"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864650"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682864652"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1269"></span><span>                 </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1270"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1271"></span><span>                          </span><span class="hs-special">(</span><span id="local-6989586621682864653"><span class="annot"><a href="#local-6989586621682864653"><span class="hs-identifier hs-var">n_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864654"><span class="annot"><a href="#local-6989586621682864654"><span class="hs-identifier hs-var">n_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864608"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1272"></span><span>                          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864648"><span class="hs-identifier hs-type">op</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864650"><span class="hs-identifier hs-type">dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864650"><span class="hs-identifier hs-type">dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864653"><span class="hs-identifier hs-type">n_reg</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682864654"><span class="hs-identifier hs-type">n_code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1273"></span><span>
</span><span id="line-1274"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicRead"><span class="hs-identifier hs-type">MO_AtomicRead</span></a></span><span> </span><span id="local-6989586621682864656"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864656"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864657"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864657"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864658"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864658"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1275"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864659"><span class="annot"><span class="annottext">fmt :: Format
</span><a href="#local-6989586621682864659"><span class="hs-identifier hs-var hs-var hs-var">fmt</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864656"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1276"></span><span>          </span><span id="local-6989586621682864660"><span class="annot"><span class="annottext">reg_dst :: Reg
</span><a href="#local-6989586621682864660"><span class="hs-identifier hs-var hs-var hs-var">reg_dst</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864657"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-1277"></span><span>          </span><span id="local-6989586621682864661"><span class="annot"><span class="annottext">form :: InstrForm
</span><a href="#local-6989586621682864661"><span class="hs-identifier hs-var hs-var hs-var">form</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864656"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">64</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#DS"><span class="hs-identifier hs-var">DS</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-var">D</span></a></span><span>
</span><span id="line-1278"></span><span>      </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682864662"><span class="annot"><a href="#local-6989586621682864662"><span class="hs-identifier hs-var">addr_reg</span></a></span></span><span> </span><span id="local-6989586621682864663"><span class="annot"><a href="#local-6989586621682864663"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstrForm -&gt; CmmExpr -&gt; NatM Amode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-var">getAmode</span></a></span><span> </span><span class="annot"><span class="annottext">InstrForm
</span><a href="#local-6989586621682864661"><span class="hs-identifier hs-var">form</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864658"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-1279"></span><span>      </span><span id="local-6989586621682864664"><span class="annot"><a href="#local-6989586621682864664"><span class="hs-identifier hs-var">lbl_end</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1280"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864663"><span class="hs-identifier hs-type">addr_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-type">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#HWSYNC"><span class="hs-identifier hs-type">HWSYNC</span></a></span><span>
</span><span id="line-1281"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-type">LD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864659"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864660"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864662"><span class="hs-identifier hs-type">addr_reg</span></a></span><span>
</span><span id="line-1282"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CMP"><span class="hs-identifier hs-type">CMP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864659"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864660"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864660"><span class="hs-identifier hs-type">reg_dst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1283"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-type">NE</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864664"><span class="hs-identifier hs-type">lbl_end</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1284"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-type">ALWAYS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864664"><span class="hs-identifier hs-type">lbl_end</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1285"></span><span>                            </span><span class="hs-comment">-- See Note [Seemingly useless cmp and bne]</span><span>
</span><span id="line-1286"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864664"><span class="hs-identifier hs-type">lbl_end</span></a></span><span>
</span><span id="line-1287"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ISYNC"><span class="hs-identifier hs-type">ISYNC</span></a></span><span>
</span><span id="line-1288"></span><span>                                      </span><span class="hs-special">]</span><span>
</span><span id="line-1289"></span><span>
</span><span id="line-1290"></span><span class="hs-comment">-- Note [Seemingly useless cmp and bne]</span><span>
</span><span id="line-1291"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-1292"></span><span class="hs-comment">-- In Power ISA, Book II, Section 4.4.1, Instruction Synchronize Instruction</span><span>
</span><span id="line-1293"></span><span class="hs-comment">-- the second paragraph says that isync may complete before storage accesses</span><span>
</span><span id="line-1294"></span><span class="hs-comment">-- &quot;associated&quot; with a preceding instruction have been performed. The cmp</span><span>
</span><span id="line-1295"></span><span class="hs-comment">-- operation and the following bne introduce a data and control dependency</span><span>
</span><span id="line-1296"></span><span class="hs-comment">-- on the load instruction (See also Power ISA, Book II, Appendix B.2.3, Safe</span><span>
</span><span id="line-1297"></span><span class="hs-comment">-- Fetch).</span><span>
</span><span id="line-1298"></span><span class="hs-comment">-- This is also what gcc does.</span><span>
</span><span id="line-1299"></span><span>
</span><span id="line-1300"></span><span>
</span><span id="line-1301"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicWrite"><span class="hs-identifier hs-type">MO_AtomicWrite</span></a></span><span> </span><span id="local-6989586621682864666"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864666"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864667"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864667"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864668"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864668"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1302"></span><span>    </span><span id="local-6989586621682864669"><span class="annot"><a href="#local-6989586621682864669"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#assignMem_IntCode"><span class="hs-identifier hs-var">assignMem_IntCode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864666"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864667"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864668"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-1303"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#HWSYNC"><span class="hs-identifier hs-type">HWSYNC</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864669"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-1304"></span><span>
</span><span id="line-1305"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Cmpxchg"><span class="hs-identifier hs-type">MO_Cmpxchg</span></a></span><span> </span><span id="local-6989586621682864671"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864671"><span class="hs-identifier hs-var">width</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864672"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864672"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864673"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864673"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864674"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864674"><span class="hs-identifier hs-var">old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864675"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864675"><span class="hs-identifier hs-var">new</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1306"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864671"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864671"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>
</span><span id="line-1307"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1308"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682864676"><span class="annot"><a href="#local-6989586621682864676"><span class="hs-identifier hs-var">old_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864677"><span class="annot"><a href="#local-6989586621682864677"><span class="hs-identifier hs-var">old_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864674"><span class="hs-identifier hs-var">old</span></a></span><span>
</span><span id="line-1309"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682864678"><span class="annot"><a href="#local-6989586621682864678"><span class="hs-identifier hs-var">new_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864679"><span class="annot"><a href="#local-6989586621682864679"><span class="hs-identifier hs-var">new_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864675"><span class="hs-identifier hs-type">new</span></a></span><span>
</span><span id="line-1310"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682864680"><span class="annot"><a href="#local-6989586621682864680"><span class="hs-identifier hs-var">addr_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864681"><span class="annot"><a href="#local-6989586621682864681"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864673"><span class="hs-identifier hs-type">addr</span></a></span><span>
</span><span id="line-1311"></span><span>      </span><span id="local-6989586621682864682"><span class="annot"><a href="#local-6989586621682864682"><span class="hs-identifier hs-var">lbl_retry</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1312"></span><span>      </span><span id="local-6989586621682864683"><span class="annot"><a href="#local-6989586621682864683"><span class="hs-identifier hs-var">lbl_eq</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1313"></span><span>      </span><span id="local-6989586621682864684"><span class="annot"><a href="#local-6989586621682864684"><span class="hs-identifier hs-var">lbl_end</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1314"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864685"><span class="annot"><a href="#local-6989586621682864685"><span class="hs-identifier hs-var hs-var">reg_dst</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864672"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-1315"></span><span>          </span><span id="local-6989586621682864686"><span class="annot"><a href="#local-6989586621682864686"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span>
</span><span id="line-1316"></span><span>                      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#HWSYNC"><span class="hs-identifier hs-var">HWSYNC</span></a></span><span>
</span><span id="line-1317"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864682"><span class="hs-identifier hs-var">lbl_retry</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1318"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864682"><span class="hs-identifier hs-var">lbl_retry</span></a></span><span>
</span><span id="line-1319"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LDR"><span class="hs-identifier hs-var">LDR</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864687"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864685"><span class="hs-identifier hs-var">reg_dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegReg"><span class="hs-identifier hs-var">AddrRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r0"><span class="hs-identifier hs-var">r0</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864680"><span class="hs-identifier hs-var">addr_reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1320"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMP"><span class="hs-identifier hs-var">CMP</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864687"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864685"><span class="hs-identifier hs-var">reg_dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864676"><span class="hs-identifier hs-var">old_reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1321"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864684"><span class="hs-identifier hs-var">lbl_end</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1322"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864683"><span class="hs-identifier hs-var">lbl_eq</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1323"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864683"><span class="hs-identifier hs-var">lbl_eq</span></a></span><span>
</span><span id="line-1324"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#STC"><span class="hs-identifier hs-var">STC</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864687"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864678"><span class="hs-identifier hs-var">new_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegReg"><span class="hs-identifier hs-var">AddrRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r0"><span class="hs-identifier hs-var">r0</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864680"><span class="hs-identifier hs-var">addr_reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1325"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864682"><span class="hs-identifier hs-var">lbl_retry</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1326"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864684"><span class="hs-identifier hs-var">lbl_end</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1327"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864684"><span class="hs-identifier hs-var">lbl_end</span></a></span><span>
</span><span id="line-1328"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ISYNC"><span class="hs-identifier hs-var">ISYNC</span></a></span><span>
</span><span id="line-1329"></span><span>                      </span><span class="hs-special">]</span><span>
</span><span id="line-1330"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864681"><span class="hs-identifier hs-type">addr_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864679"><span class="hs-identifier hs-type">new_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864677"><span class="hs-identifier hs-type">old_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864686"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-1331"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1332"></span><span>    </span><span id="local-6989586621682864687"><span class="annot"><span class="annottext">format :: Format
</span><a href="#local-6989586621682864687"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864671"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1333"></span><span>
</span><span id="line-1334"></span><span>
</span><span id="line-1335"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Clz"><span class="hs-identifier hs-type">MO_Clz</span></a></span><span> </span><span id="local-6989586621682864689"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864689"><span class="hs-identifier hs-var">width</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864690"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864690"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864691"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864691"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1336"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682864692"><span class="annot"><a href="#local-6989586621682864692"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1337"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864693"><span class="annot"><a href="#local-6989586621682864693"><span class="hs-identifier hs-var hs-var">reg_dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864690"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-1338"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-type">target32Bit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864692"><span class="hs-identifier hs-type">platform</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><a href="#local-6989586621682864689"><span class="hs-identifier hs-type">width</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-type">W64</span></a></span><span>
</span><span id="line-1339"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1340"></span><span>          </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682864694"><span class="annot"><a href="#local-6989586621682864694"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864695"><span class="annot"><a href="#local-6989586621682864695"><span class="hs-identifier hs-var">vr_hi</span></a></span></span><span> </span><span id="local-6989586621682864696"><span class="annot"><a href="#local-6989586621682864696"><span class="hs-identifier hs-var">vr_lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-type">iselExpr64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864691"><span class="hs-identifier hs-type">src</span></a></span><span>
</span><span id="line-1341"></span><span>          </span><span id="local-6989586621682864697"><span class="annot"><a href="#local-6989586621682864697"><span class="hs-identifier hs-var">lbl1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1342"></span><span>          </span><span id="local-6989586621682864698"><span class="annot"><a href="#local-6989586621682864698"><span class="hs-identifier hs-var">lbl2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1343"></span><span>          </span><span id="local-6989586621682864699"><span class="annot"><a href="#local-6989586621682864699"><span class="hs-identifier hs-var">lbl3</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1344"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864700"><span class="annot"><a href="#local-6989586621682864700"><span class="hs-identifier hs-var hs-var">cntlz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-var">CMPL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864695"><span class="hs-identifier hs-var">vr_hi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1345"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864698"><span class="hs-identifier hs-var">lbl2</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1346"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864697"><span class="hs-identifier hs-var">lbl1</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1347"></span><span>
</span><span id="line-1348"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864697"><span class="hs-identifier hs-var">lbl1</span></a></span><span>
</span><span id="line-1349"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CNTLZ"><span class="hs-identifier hs-var">CNTLZ</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864693"><span class="hs-identifier hs-var">reg_dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864696"><span class="hs-identifier hs-var">vr_lo</span></a></span><span>
</span><span id="line-1350"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864693"><span class="hs-identifier hs-var">reg_dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864693"><span class="hs-identifier hs-var">reg_dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1351"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864699"><span class="hs-identifier hs-var">lbl3</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1352"></span><span>
</span><span id="line-1353"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864698"><span class="hs-identifier hs-var">lbl2</span></a></span><span>
</span><span id="line-1354"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CNTLZ"><span class="hs-identifier hs-var">CNTLZ</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864693"><span class="hs-identifier hs-var">reg_dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864695"><span class="hs-identifier hs-var">vr_hi</span></a></span><span>
</span><span id="line-1355"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864699"><span class="hs-identifier hs-var">lbl3</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1356"></span><span>
</span><span id="line-1357"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864699"><span class="hs-identifier hs-var">lbl3</span></a></span><span>
</span><span id="line-1358"></span><span>                           </span><span class="hs-special">]</span><span>
</span><span id="line-1359"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864694"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864700"><span class="hs-identifier hs-type">cntlz</span></a></span><span>
</span><span id="line-1360"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1361"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864702"><span class="annot"><a href="#local-6989586621682864702"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864689"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span>
</span><span id="line-1362"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621682864703"><span class="annot"><a href="#local-6989586621682864703"><span class="hs-identifier hs-var">s_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864704"><span class="annot"><a href="#local-6989586621682864704"><span class="hs-identifier hs-var">s_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864691"><span class="hs-identifier hs-type">src</span></a></span><span>
</span><span id="line-1363"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621682864705"><span class="annot"><a href="#local-6989586621682864705"><span class="hs-identifier hs-var">pre</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864706"><span class="annot"><a href="#local-6989586621682864706"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864707"><span class="annot"><a href="#local-6989586621682864707"><span class="hs-identifier hs-var">post</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1364"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682864689"><span class="hs-identifier hs-type">width</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1365"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(OrdList Instr, Reg, OrdList Instr)
-&gt; NatM (OrdList Instr, Reg, OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864703"><span class="hs-identifier hs-var">s_reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1366"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(OrdList Instr, Reg, OrdList Instr)
-&gt; NatM (OrdList Instr, Reg, OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864703"><span class="hs-identifier hs-var">s_reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1367"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1368"></span><span>                </span><span id="local-6989586621682864708"><span class="annot"><a href="#local-6989586621682864708"><span class="hs-identifier hs-var">reg_tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-var">getNewRegNat</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864702"><span class="hs-identifier hs-var">format</span></a></span><span>
</span><span id="line-1369"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span>
</span><span id="line-1370"></span><span>                  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#AND"><span class="hs-identifier hs-type">AND</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864708"><span class="hs-identifier hs-type">reg_tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864703"><span class="hs-identifier hs-type">s_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">65535</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1371"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682864708"><span class="hs-identifier hs-type">reg_tmp</span></a></span><span>
</span><span id="line-1372"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864693"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864693"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="hs-number">16</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1373"></span><span>                  </span><span class="hs-special">)</span><span>
</span><span id="line-1374"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1375"></span><span>                </span><span id="local-6989586621682864709"><span class="annot"><a href="#local-6989586621682864709"><span class="hs-identifier hs-var">reg_tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-var">getNewRegNat</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864702"><span class="hs-identifier hs-var">format</span></a></span><span>
</span><span id="line-1376"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span>
</span><span id="line-1377"></span><span>                  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#AND"><span class="hs-identifier hs-type">AND</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864709"><span class="hs-identifier hs-type">reg_tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864703"><span class="hs-identifier hs-type">s_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">255</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1378"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682864709"><span class="hs-identifier hs-type">reg_tmp</span></a></span><span>
</span><span id="line-1379"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864693"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864693"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="hs-number">24</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1380"></span><span>                  </span><span class="hs-special">)</span><span>
</span><span id="line-1381"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr, Reg, OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: Clz wrong format&quot;</span></span><span>
</span><span id="line-1382"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864710"><span class="annot"><a href="#local-6989586621682864710"><span class="hs-identifier hs-var hs-var">cntlz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CNTLZ"><span class="hs-identifier hs-var">CNTLZ</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864702"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864693"><span class="hs-identifier hs-var">reg_dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864706"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1383"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864704"><span class="hs-identifier hs-type">s_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864705"><span class="hs-identifier hs-type">pre</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864710"><span class="hs-identifier hs-type">cntlz</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864707"><span class="hs-identifier hs-type">post</span></a></span><span>
</span><span id="line-1384"></span><span>
</span><span id="line-1385"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Ctz"><span class="hs-identifier hs-type">MO_Ctz</span></a></span><span> </span><span id="local-6989586621682864712"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864712"><span class="hs-identifier hs-var">width</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864713"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864713"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864714"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864714"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1386"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682864715"><span class="annot"><a href="#local-6989586621682864715"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1387"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864716"><span class="annot"><a href="#local-6989586621682864716"><span class="hs-identifier hs-var hs-var">reg_dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864713"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-1388"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-type">target32Bit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864715"><span class="hs-identifier hs-type">platform</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><a href="#local-6989586621682864712"><span class="hs-identifier hs-type">width</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-type">W64</span></a></span><span>
</span><span id="line-1389"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1390"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864717"><span class="annot"><a href="#local-6989586621682864717"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span>
</span><span id="line-1391"></span><span>          </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682864718"><span class="annot"><a href="#local-6989586621682864718"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682864719"><span class="annot"><a href="#local-6989586621682864719"><span class="hs-identifier hs-var">vr_hi</span></a></span></span><span> </span><span id="local-6989586621682864720"><span class="annot"><a href="#local-6989586621682864720"><span class="hs-identifier hs-var">vr_lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-type">iselExpr64</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864714"><span class="hs-identifier hs-type">src</span></a></span><span>
</span><span id="line-1392"></span><span>          </span><span id="local-6989586621682864721"><span class="annot"><a href="#local-6989586621682864721"><span class="hs-identifier hs-var">lbl1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1393"></span><span>          </span><span id="local-6989586621682864722"><span class="annot"><a href="#local-6989586621682864722"><span class="hs-identifier hs-var">lbl2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1394"></span><span>          </span><span id="local-6989586621682864723"><span class="annot"><a href="#local-6989586621682864723"><span class="hs-identifier hs-var">lbl3</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1395"></span><span>          </span><span id="local-6989586621682864724"><span class="annot"><a href="#local-6989586621682864724"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864717"><span class="hs-identifier hs-type">format</span></a></span><span>
</span><span id="line-1396"></span><span>          </span><span id="local-6989586621682864725"><span class="annot"><a href="#local-6989586621682864725"><span class="hs-identifier hs-var">x''</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864717"><span class="hs-identifier hs-type">format</span></a></span><span>
</span><span id="line-1397"></span><span>          </span><span id="local-6989586621682864726"><span class="annot"><a href="#local-6989586621682864726"><span class="hs-identifier hs-var">r'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864717"><span class="hs-identifier hs-type">format</span></a></span><span>
</span><span id="line-1398"></span><span>          </span><span id="local-6989586621682864727"><span class="annot"><a href="#local-6989586621682864727"><span class="hs-identifier hs-var">cnttzlo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682864728"><span class="hs-identifier hs-type">cnttz</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864717"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864716"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864720"><span class="hs-identifier hs-type">vr_lo</span></a></span><span>
</span><span id="line-1399"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864729"><span class="annot"><a href="#local-6989586621682864729"><span class="hs-identifier hs-var hs-var">cnttz64</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-var">CMPL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864717"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864720"><span class="hs-identifier hs-var">vr_lo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1400"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864722"><span class="hs-identifier hs-var">lbl2</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1401"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864721"><span class="hs-identifier hs-var">lbl1</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1402"></span><span>
</span><span id="line-1403"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864721"><span class="hs-identifier hs-var">lbl1</span></a></span><span>
</span><span id="line-1404"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864724"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864719"><span class="hs-identifier hs-var">vr_hi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1405"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ANDC"><span class="hs-identifier hs-var">ANDC</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864725"><span class="hs-identifier hs-var">x''</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864724"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864719"><span class="hs-identifier hs-var">vr_hi</span></a></span><span>
</span><span id="line-1406"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CNTLZ"><span class="hs-identifier hs-var">CNTLZ</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864717"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864726"><span class="hs-identifier hs-var">r'</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864725"><span class="hs-identifier hs-var">x''</span></a></span><span>
</span><span id="line-1407"></span><span>                               </span><span class="hs-comment">-- 32 + (32 - clz(x''))</span><span>
</span><span id="line-1408"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SUBFC"><span class="hs-identifier hs-var">SUBFC</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864716"><span class="hs-identifier hs-var">reg_dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864726"><span class="hs-identifier hs-var">r'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">64</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1409"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864723"><span class="hs-identifier hs-var">lbl3</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1410"></span><span>
</span><span id="line-1411"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864722"><span class="hs-identifier hs-var">lbl2</span></a></span><span>
</span><span id="line-1412"></span><span>                             </span><span class="hs-special">]</span><span>
</span><span id="line-1413"></span><span>                        </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864727"><span class="hs-identifier hs-var">cnttzlo</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>
</span><span id="line-1414"></span><span>                        </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864723"><span class="hs-identifier hs-var">lbl3</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1415"></span><span>
</span><span id="line-1416"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682864723"><span class="hs-identifier hs-var">lbl3</span></a></span><span>
</span><span id="line-1417"></span><span>                             </span><span class="hs-special">]</span><span>
</span><span id="line-1418"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864718"><span class="hs-identifier hs-type">code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864729"><span class="hs-identifier hs-type">cnttz64</span></a></span><span>
</span><span id="line-1419"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1420"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864731"><span class="annot"><a href="#local-6989586621682864731"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864712"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span>
</span><span id="line-1421"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621682864732"><span class="annot"><a href="#local-6989586621682864732"><span class="hs-identifier hs-var">s_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864733"><span class="annot"><a href="#local-6989586621682864733"><span class="hs-identifier hs-var">s_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864714"><span class="hs-identifier hs-type">src</span></a></span><span>
</span><span id="line-1422"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621682864734"><span class="annot"><a href="#local-6989586621682864734"><span class="hs-identifier hs-var">reg_ctz</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864735"><span class="annot"><a href="#local-6989586621682864735"><span class="hs-identifier hs-var">pre_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1423"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682864712"><span class="hs-identifier hs-type">width</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1424"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Reg, OrdList Instr) -&gt; NatM (Reg, OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864732"><span class="hs-identifier hs-var">s_reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1425"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Reg, OrdList Instr) -&gt; NatM (Reg, OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864732"><span class="hs-identifier hs-var">s_reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1426"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1427"></span><span>                </span><span id="local-6989586621682864736"><span class="annot"><a href="#local-6989586621682864736"><span class="hs-identifier hs-var">reg_tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-var">getNewRegNat</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864731"><span class="hs-identifier hs-var">format</span></a></span><span>
</span><span id="line-1428"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864736"><span class="hs-identifier hs-type">reg_tmp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ORIS"><span class="hs-identifier hs-type">ORIS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864736"><span class="hs-identifier hs-type">reg_tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864732"><span class="hs-identifier hs-type">s_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1429"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1430"></span><span>                </span><span id="local-6989586621682864737"><span class="annot"><a href="#local-6989586621682864737"><span class="hs-identifier hs-var">reg_tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-var">getNewRegNat</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864731"><span class="hs-identifier hs-var">format</span></a></span><span>
</span><span id="line-1431"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864737"><span class="hs-identifier hs-type">reg_tmp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#OR"><span class="hs-identifier hs-type">OR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864737"><span class="hs-identifier hs-type">reg_tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864732"><span class="hs-identifier hs-type">s_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">256</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1432"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (Reg, OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: Ctz wrong format&quot;</span></span><span>
</span><span id="line-1433"></span><span>          </span><span id="local-6989586621682864738"><span class="annot"><a href="#local-6989586621682864738"><span class="hs-identifier hs-var">ctz_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682864728"><span class="hs-identifier hs-type">cnttz</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864731"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864716"><span class="hs-identifier hs-type">reg_dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864734"><span class="hs-identifier hs-type">reg_ctz</span></a></span><span>
</span><span id="line-1434"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864733"><span class="hs-identifier hs-type">s_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864735"><span class="hs-identifier hs-type">pre_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864738"><span class="hs-identifier hs-type">ctz_code</span></a></span><span>
</span><span id="line-1435"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1436"></span><span>          </span><span class="hs-comment">-- cnttz(x) = sizeof(x) - cntlz(~x &amp; (x - 1))</span><span>
</span><span id="line-1437"></span><span>          </span><span class="hs-comment">-- see Henry S. Warren, Hacker's Delight, p 107</span><span>
</span><span id="line-1438"></span><span>          </span><span id="local-6989586621682864728"><span class="annot"><span class="annottext">cnttz :: Format -&gt; Reg -&gt; Reg -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864728"><span class="hs-identifier hs-var hs-var">cnttz</span></a></span></span><span> </span><span id="local-6989586621682864747"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864747"><span class="hs-identifier hs-var">format</span></a></span></span><span> </span><span id="local-6989586621682864748"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864748"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span id="local-6989586621682864749"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864749"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1439"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864750"><span class="annot"><span class="annottext">format_bits :: Int
</span><a href="#local-6989586621682864750"><span class="hs-identifier hs-var hs-var hs-var">format_bits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Int
</span><a href="GHC.CmmToAsm.Format.html#formatInBytes"><span class="hs-identifier hs-var">formatInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864747"><span class="hs-identifier hs-var">format</span></a></span><span>
</span><span id="line-1440"></span><span>            </span><span id="local-6989586621682864753"><span class="annot"><a href="#local-6989586621682864753"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-var">getNewRegNat</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864747"><span class="hs-identifier hs-var">format</span></a></span><span>
</span><span id="line-1441"></span><span>            </span><span id="local-6989586621682864754"><span class="annot"><a href="#local-6989586621682864754"><span class="hs-identifier hs-var">x''</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864747"><span class="hs-identifier hs-type">format</span></a></span><span>
</span><span id="line-1442"></span><span>            </span><span id="local-6989586621682864755"><span class="annot"><a href="#local-6989586621682864755"><span class="hs-identifier hs-var">r'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864747"><span class="hs-identifier hs-type">format</span></a></span><span>
</span><span id="line-1443"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-type">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864753"><span class="hs-identifier hs-type">x'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864749"><span class="hs-identifier hs-type">src</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1444"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ANDC"><span class="hs-identifier hs-type">ANDC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864754"><span class="hs-identifier hs-type">x''</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864753"><span class="hs-identifier hs-type">x'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864749"><span class="hs-identifier hs-type">src</span></a></span><span>
</span><span id="line-1445"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CNTLZ"><span class="hs-identifier hs-type">CNTLZ</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864747"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864755"><span class="hs-identifier hs-type">r'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864754"><span class="hs-identifier hs-type">x''</span></a></span><span>
</span><span id="line-1446"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SUBFC"><span class="hs-identifier hs-type">SUBFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864748"><span class="hs-identifier hs-type">dst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864755"><span class="hs-identifier hs-type">r'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682864750"><span class="hs-identifier hs-type">format_bits</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1447"></span><span>                          </span><span class="hs-special">]</span><span>
</span><span id="line-1448"></span><span>
</span><span id="line-1449"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall"><span class="hs-identifier hs-var">genCCall</span></a></span><span> </span><span id="local-6989586621682864756"><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621682864756"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621682864757"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span></span><span> </span><span id="local-6989586621682864758"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span></span><span>
</span><span id="line-1450"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682864759"><span class="annot"><a href="#local-6989586621682864759"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1451"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682864756"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1452"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_QuotRem"><span class="hs-identifier hs-type">MO_S_QuotRem</span></a></span><span>  </span><span id="local-6989586621682864761"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864761"><span class="hs-identifier hs-var">width</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Width -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864762"><span class="hs-identifier hs-var">divOp1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864761"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1453"></span><span>                                                   </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1454"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_QuotRem"><span class="hs-identifier hs-type">MO_U_QuotRem</span></a></span><span>  </span><span id="local-6989586621682864764"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864764"><span class="hs-identifier hs-var">width</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Width -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864762"><span class="hs-identifier hs-var">divOp1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864764"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1455"></span><span>                                                   </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1456"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_QuotRem2"><span class="hs-identifier hs-type">MO_U_QuotRem2</span></a></span><span> </span><span id="local-6989586621682864766"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864766"><span class="hs-identifier hs-var">width</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864767"><span class="hs-identifier hs-var">divOp2</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864766"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span>
</span><span id="line-1457"></span><span>                                                   </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1458"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Mul2"><span class="hs-identifier hs-type">MO_U_Mul2</span></a></span><span> </span><span id="local-6989586621682864769"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864769"><span class="hs-identifier hs-var">width</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864770"><span class="hs-identifier hs-var">multOp2</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864769"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span>
</span><span id="line-1459"></span><span>                                                </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1460"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add2"><span class="hs-identifier hs-type">MO_Add2</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864772"><span class="hs-identifier hs-var">add2Op</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1461"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AddWordC"><span class="hs-identifier hs-type">MO_AddWordC</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864774"><span class="hs-identifier hs-var">addcOp</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1462"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SubWordC"><span class="hs-identifier hs-type">MO_SubWordC</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864776"><span class="hs-identifier hs-var">subcOp</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1463"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AddIntC"><span class="hs-identifier hs-type">MO_AddIntC</span></a></span><span> </span><span id="local-6989586621682864778"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864778"><span class="hs-identifier hs-var">width</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; Width -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864779"><span class="hs-identifier hs-var">addSubCOp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADDO"><span class="hs-identifier hs-var">ADDO</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864778"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1464"></span><span>                                                   </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1465"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SubIntC"><span class="hs-identifier hs-type">MO_SubIntC</span></a></span><span> </span><span id="local-6989586621682864782"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864782"><span class="hs-identifier hs-var">width</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; Width -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864779"><span class="hs-identifier hs-var">addSubCOp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SUBFO"><span class="hs-identifier hs-var">SUBFO</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864782"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1466"></span><span>                                                   </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1467"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Fabs"><span class="hs-identifier hs-var">MO_F64_Fabs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864785"><span class="hs-identifier hs-var">fabs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1468"></span><span>        </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Fabs"><span class="hs-identifier hs-var">MO_F32_Fabs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864785"><span class="hs-identifier hs-var">fabs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864757"><span class="hs-identifier hs-var">dest_regs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864758"><span class="hs-identifier hs-var">argsAndHints</span></a></span><span>
</span><span id="line-1469"></span><span>        </span><span class="annot"><span class="annottext">ForeignTarget
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682864787"><span class="annot"><a href="#local-6989586621682864787"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM NCGConfig
</span><a href="GHC.CmmToAsm.Monad.html#getConfig"><span class="hs-identifier hs-var">getConfig</span></a></span><span>
</span><span id="line-1470"></span><span>                </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall%27"><span class="hs-identifier hs-type">genCCall'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864787"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#platformToGCP"><span class="hs-identifier hs-type">platformToGCP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864759"><span class="hs-identifier hs-type">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1471"></span><span>                       </span><span class="annot"><a href="#local-6989586621682864756"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864757"><span class="hs-identifier hs-type">dest_regs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864758"><span class="hs-identifier hs-type">argsAndHints</span></a></span><span>
</span><span id="line-1472"></span><span>        </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682864762"><span class="annot"><span class="annottext">divOp1 :: Bool -&gt; Width -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864762"><span class="hs-identifier hs-var hs-var">divOp1</span></a></span></span><span> </span><span id="local-6989586621682864793"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682864793"><span class="hs-identifier hs-var">signed</span></a></span></span><span> </span><span id="local-6989586621682864794"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864794"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864795"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864795"><span class="hs-identifier hs-var">res_q</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864796"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864796"><span class="hs-identifier hs-var">res_r</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864797"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864797"><span class="hs-identifier hs-var">arg_x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864798"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864798"><span class="hs-identifier hs-var">arg_y</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1473"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864799"><span class="annot"><span class="annottext">reg_q :: Reg
</span><a href="#local-6989586621682864799"><span class="hs-identifier hs-var hs-var">reg_q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864795"><span class="hs-identifier hs-var">res_q</span></a></span><span>
</span><span id="line-1474"></span><span>                         </span><span id="local-6989586621682864800"><span class="annot"><span class="annottext">reg_r :: Reg
</span><a href="#local-6989586621682864800"><span class="hs-identifier hs-var hs-var">reg_r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864796"><span class="hs-identifier hs-var">res_r</span></a></span><span>
</span><span id="line-1475"></span><span>                     </span><span class="annot"><span class="annottext">Width
-&gt; Bool -&gt; Reg -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM (Reg -&gt; OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#remainderCode"><span class="hs-identifier hs-var">remainderCode</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864794"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682864793"><span class="hs-identifier hs-var">signed</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864799"><span class="hs-identifier hs-var">reg_q</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864797"><span class="hs-identifier hs-var">arg_x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864798"><span class="hs-identifier hs-var">arg_y</span></a></span><span>
</span><span id="line-1476"></span><span>                       </span><span class="annot"><span class="annottext">NatM (Reg -&gt; OrdList Instr) -&gt; NatM Reg -&gt; NatM (OrdList Instr)
forall a b. NatM (a -&gt; b) -&gt; NatM a -&gt; NatM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; NatM Reg
forall a. a -&gt; NatM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864800"><span class="hs-identifier hs-var">reg_r</span></a></span><span>
</span><span id="line-1477"></span><span>
</span><span id="line-1478"></span><span>              </span><span class="annot"><a href="#local-6989586621682864762"><span class="hs-identifier hs-var">divOp1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1479"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall: Wrong number of arguments for divOp1&quot;</span></span><span>
</span><span id="line-1480"></span><span>              </span><span id="local-6989586621682864767"><span class="annot"><span class="annottext">divOp2 :: Width -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864767"><span class="hs-identifier hs-var hs-var">divOp2</span></a></span></span><span> </span><span id="local-6989586621682864838"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864838"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864839"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864839"><span class="hs-identifier hs-var">res_q</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864840"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864840"><span class="hs-identifier hs-var">res_r</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1481"></span><span>                                    </span><span class="hs-special">[</span><span id="local-6989586621682864841"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864841"><span class="hs-identifier hs-var">arg_x_high</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864842"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864842"><span class="hs-identifier hs-var">arg_x_low</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864843"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864843"><span class="hs-identifier hs-var">arg_y</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1482"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864844"><span class="annot"><span class="annottext">reg_q :: Reg
</span><a href="#local-6989586621682864844"><span class="hs-identifier hs-var hs-var hs-var">reg_q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864839"><span class="hs-identifier hs-var">res_q</span></a></span><span>
</span><span id="line-1483"></span><span>                         </span><span id="local-6989586621682864845"><span class="annot"><span class="annottext">reg_r :: Reg
</span><a href="#local-6989586621682864845"><span class="hs-identifier hs-var hs-var hs-var">reg_r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864840"><span class="hs-identifier hs-var">res_r</span></a></span><span>
</span><span id="line-1484"></span><span>                         </span><span id="local-6989586621682864846"><span class="annot"><span class="annottext">fmt :: Format
</span><a href="#local-6989586621682864846"><span class="hs-identifier hs-var hs-var hs-var">fmt</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864838"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1485"></span><span>                         </span><span id="local-6989586621682864847"><span class="annot"><span class="annottext">half :: Int
</span><a href="#local-6989586621682864847"><span class="hs-identifier hs-var hs-var hs-var">half</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Format -&gt; Int
</span><a href="GHC.CmmToAsm.Format.html#formatInBytes"><span class="hs-identifier hs-var">formatInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864846"><span class="hs-identifier hs-var">fmt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1486"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864848"><span class="annot"><a href="#local-6989586621682864848"><span class="hs-identifier hs-var">xh_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864849"><span class="annot"><a href="#local-6989586621682864849"><span class="hs-identifier hs-var">xh_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864841"><span class="hs-identifier hs-var">arg_x_high</span></a></span><span>
</span><span id="line-1487"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864850"><span class="annot"><a href="#local-6989586621682864850"><span class="hs-identifier hs-var">xl_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864851"><span class="annot"><a href="#local-6989586621682864851"><span class="hs-identifier hs-var">xl_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864842"><span class="hs-identifier hs-type">arg_x_low</span></a></span><span>
</span><span id="line-1488"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864852"><span class="annot"><a href="#local-6989586621682864852"><span class="hs-identifier hs-var">y_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864853"><span class="annot"><a href="#local-6989586621682864853"><span class="hs-identifier hs-var">y_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864843"><span class="hs-identifier hs-type">arg_y</span></a></span><span>
</span><span id="line-1489"></span><span>                     </span><span id="local-6989586621682864854"><span class="annot"><a href="#local-6989586621682864854"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1490"></span><span>                     </span><span id="local-6989586621682864855"><span class="annot"><a href="#local-6989586621682864855"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1491"></span><span>                     </span><span id="local-6989586621682864856"><span class="annot"><a href="#local-6989586621682864856"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1492"></span><span>                     </span><span id="local-6989586621682864857"><span class="annot"><a href="#local-6989586621682864857"><span class="hs-identifier hs-var">vn1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1493"></span><span>                     </span><span id="local-6989586621682864858"><span class="annot"><a href="#local-6989586621682864858"><span class="hs-identifier hs-var">vn0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1494"></span><span>                     </span><span id="local-6989586621682864859"><span class="annot"><a href="#local-6989586621682864859"><span class="hs-identifier hs-var">un32</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1495"></span><span>                     </span><span id="local-6989586621682864860"><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-var">tmp</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1496"></span><span>                     </span><span id="local-6989586621682864861"><span class="annot"><a href="#local-6989586621682864861"><span class="hs-identifier hs-var">un10</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1497"></span><span>                     </span><span id="local-6989586621682864862"><span class="annot"><a href="#local-6989586621682864862"><span class="hs-identifier hs-var">un1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1498"></span><span>                     </span><span id="local-6989586621682864863"><span class="annot"><a href="#local-6989586621682864863"><span class="hs-identifier hs-var">un0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1499"></span><span>                     </span><span id="local-6989586621682864864"><span class="annot"><a href="#local-6989586621682864864"><span class="hs-identifier hs-var">q1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1500"></span><span>                     </span><span id="local-6989586621682864865"><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-var">rhat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1501"></span><span>                     </span><span id="local-6989586621682864866"><span class="annot"><a href="#local-6989586621682864866"><span class="hs-identifier hs-var">tmp1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1502"></span><span>                     </span><span id="local-6989586621682864867"><span class="annot"><a href="#local-6989586621682864867"><span class="hs-identifier hs-var">q0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1503"></span><span>                     </span><span id="local-6989586621682864868"><span class="annot"><a href="#local-6989586621682864868"><span class="hs-identifier hs-var">un21</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-1504"></span><span>                     </span><span id="local-6989586621682864869"><span class="annot"><a href="#local-6989586621682864869"><span class="hs-identifier hs-var">again1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1505"></span><span>                     </span><span id="local-6989586621682864870"><span class="annot"><a href="#local-6989586621682864870"><span class="hs-identifier hs-var">no1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1506"></span><span>                     </span><span id="local-6989586621682864871"><span class="annot"><a href="#local-6989586621682864871"><span class="hs-identifier hs-var">then1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1507"></span><span>                     </span><span id="local-6989586621682864872"><span class="annot"><a href="#local-6989586621682864872"><span class="hs-identifier hs-var">endif1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1508"></span><span>                     </span><span id="local-6989586621682864873"><span class="annot"><a href="#local-6989586621682864873"><span class="hs-identifier hs-var">again2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1509"></span><span>                     </span><span id="local-6989586621682864874"><span class="annot"><a href="#local-6989586621682864874"><span class="hs-identifier hs-var">no2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1510"></span><span>                     </span><span id="local-6989586621682864875"><span class="annot"><a href="#local-6989586621682864875"><span class="hs-identifier hs-var">then2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1511"></span><span>                     </span><span id="local-6989586621682864876"><span class="annot"><a href="#local-6989586621682864876"><span class="hs-identifier hs-var">endif2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-1512"></span><span>                     </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864853"><span class="hs-identifier hs-type">y_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864851"><span class="hs-identifier hs-type">xl_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864849"><span class="hs-identifier hs-type">xh_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span>
</span><span id="line-1513"></span><span>                              </span><span class="hs-comment">-- see Hacker's Delight p 196 Figure 9-3</span><span>
</span><span id="line-1514"></span><span>                              </span><span class="annot"><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-type">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-comment">-- b = 2 ^ (bits_in_word / 2)</span><span>
</span><span id="line-1515"></span><span>                                     </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#LI"><span class="hs-identifier hs-type">LI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864855"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1516"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864855"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864855"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864847"><span class="hs-identifier hs-type">half</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1517"></span><span>                                     </span><span class="hs-comment">-- s = clz(y)</span><span>
</span><span id="line-1518"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CNTLZ"><span class="hs-identifier hs-type">CNTLZ</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864854"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864852"><span class="hs-identifier hs-type">y_reg</span></a></span><span>
</span><span id="line-1519"></span><span>                                     </span><span class="hs-comment">-- v = y &lt;&lt; s</span><span>
</span><span id="line-1520"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864856"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864852"><span class="hs-identifier hs-type">y_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864854"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1521"></span><span>                                     </span><span class="hs-comment">-- vn1 = upper half of v</span><span>
</span><span id="line-1522"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SR"><span class="hs-identifier hs-type">SR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864857"><span class="hs-identifier hs-type">vn1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864856"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864847"><span class="hs-identifier hs-type">half</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1523"></span><span>                                     </span><span class="hs-comment">-- vn0 = lower half of v</span><span>
</span><span id="line-1524"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CLRLI"><span class="hs-identifier hs-type">CLRLI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864858"><span class="hs-identifier hs-type">vn0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864856"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864847"><span class="hs-identifier hs-type">half</span></a></span><span>
</span><span id="line-1525"></span><span>                                     </span><span class="hs-comment">-- un32 = (u1 &lt;&lt; s)</span><span>
</span><span id="line-1526"></span><span>                                     </span><span class="hs-comment">--      | (u0 &gt;&gt; (bits_in_word - s))</span><span>
</span><span id="line-1527"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864859"><span class="hs-identifier hs-type">un32</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864848"><span class="hs-identifier hs-type">xh_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864854"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1528"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SUBFC"><span class="hs-identifier hs-type">SUBFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864854"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-1529"></span><span>                                        </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">*</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#formatInBytes"><span class="hs-identifier hs-type">formatInBytes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1530"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SR"><span class="hs-identifier hs-type">SR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864850"><span class="hs-identifier hs-type">xl_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1531"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#OR"><span class="hs-identifier hs-type">OR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864859"><span class="hs-identifier hs-type">un32</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864859"><span class="hs-identifier hs-type">un32</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1532"></span><span>                                     </span><span class="hs-comment">-- un10 = u0 &lt;&lt; s</span><span>
</span><span id="line-1533"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864861"><span class="hs-identifier hs-type">un10</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864850"><span class="hs-identifier hs-type">xl_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864854"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1534"></span><span>                                     </span><span class="hs-comment">-- un1 = upper half of un10</span><span>
</span><span id="line-1535"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SR"><span class="hs-identifier hs-type">SR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864862"><span class="hs-identifier hs-type">un1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864861"><span class="hs-identifier hs-type">un10</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864847"><span class="hs-identifier hs-type">half</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1536"></span><span>                                     </span><span class="hs-comment">-- un0 = lower half of un10</span><span>
</span><span id="line-1537"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CLRLI"><span class="hs-identifier hs-type">CLRLI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864863"><span class="hs-identifier hs-type">un0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864861"><span class="hs-identifier hs-type">un10</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864847"><span class="hs-identifier hs-type">half</span></a></span><span>
</span><span id="line-1538"></span><span>                                     </span><span class="hs-comment">-- q1 = un32/vn1</span><span>
</span><span id="line-1539"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#DIV"><span class="hs-identifier hs-type">DIV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="annot"><a href="#local-6989586621682864864"><span class="hs-identifier hs-type">q1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864859"><span class="hs-identifier hs-type">un32</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864857"><span class="hs-identifier hs-type">vn1</span></a></span><span>
</span><span id="line-1540"></span><span>                                     </span><span class="hs-comment">-- rhat = un32 - q1*vn1</span><span>
</span><span id="line-1541"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MULL"><span class="hs-identifier hs-type">MULL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864864"><span class="hs-identifier hs-type">q1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864857"><span class="hs-identifier hs-type">vn1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1542"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SUBF"><span class="hs-identifier hs-type">SUBF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-type">rhat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864859"><span class="hs-identifier hs-type">un32</span></a></span><span>
</span><span id="line-1543"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-type">ALWAYS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864869"><span class="hs-identifier hs-type">again1</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1544"></span><span>
</span><span id="line-1545"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864869"><span class="hs-identifier hs-type">again1</span></a></span><span>
</span><span id="line-1546"></span><span>                                     </span><span class="hs-comment">-- if (q1 &gt;= b || q1*vn0 &gt; b*rhat + un1)</span><span>
</span><span id="line-1547"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-type">CMPL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864864"><span class="hs-identifier hs-type">q1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864855"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1548"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#GEU"><span class="hs-identifier hs-type">GEU</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864871"><span class="hs-identifier hs-type">then1</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1549"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-type">ALWAYS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864870"><span class="hs-identifier hs-type">no1</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1550"></span><span>
</span><span id="line-1551"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864870"><span class="hs-identifier hs-type">no1</span></a></span><span>
</span><span id="line-1552"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MULL"><span class="hs-identifier hs-type">MULL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864864"><span class="hs-identifier hs-type">q1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864858"><span class="hs-identifier hs-type">vn0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864866"><span class="hs-identifier hs-type">tmp1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-type">rhat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864847"><span class="hs-identifier hs-type">half</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1554"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864866"><span class="hs-identifier hs-type">tmp1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864866"><span class="hs-identifier hs-type">tmp1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864862"><span class="hs-identifier hs-type">un1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1555"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-type">CMPL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864866"><span class="hs-identifier hs-type">tmp1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1556"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#LEU"><span class="hs-identifier hs-type">LEU</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864872"><span class="hs-identifier hs-type">endif1</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1557"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-type">ALWAYS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864871"><span class="hs-identifier hs-type">then1</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864871"><span class="hs-identifier hs-type">then1</span></a></span><span>
</span><span id="line-1560"></span><span>                                     </span><span class="hs-comment">-- q1 = q1 - 1</span><span>
</span><span id="line-1561"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864864"><span class="hs-identifier hs-type">q1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864864"><span class="hs-identifier hs-type">q1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1562"></span><span>                                     </span><span class="hs-comment">-- rhat = rhat + vn1</span><span>
</span><span id="line-1563"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-type">rhat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-type">rhat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864857"><span class="hs-identifier hs-type">vn1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1564"></span><span>                                     </span><span class="hs-comment">-- if (rhat &lt; b) goto again1</span><span>
</span><span id="line-1565"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-type">CMPL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-type">rhat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864855"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1566"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#LTT"><span class="hs-identifier hs-type">LTT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864869"><span class="hs-identifier hs-type">again1</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1567"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-type">ALWAYS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864872"><span class="hs-identifier hs-type">endif1</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1568"></span><span>
</span><span id="line-1569"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864872"><span class="hs-identifier hs-type">endif1</span></a></span><span>
</span><span id="line-1570"></span><span>                                     </span><span class="hs-comment">-- un21 = un32*b + un1 - q1*v</span><span>
</span><span id="line-1571"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864868"><span class="hs-identifier hs-type">un21</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864859"><span class="hs-identifier hs-type">un32</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864847"><span class="hs-identifier hs-type">half</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1572"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864868"><span class="hs-identifier hs-type">un21</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864868"><span class="hs-identifier hs-type">un21</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864862"><span class="hs-identifier hs-type">un1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1573"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MULL"><span class="hs-identifier hs-type">MULL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864864"><span class="hs-identifier hs-type">q1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864856"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1574"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SUBF"><span class="hs-identifier hs-type">SUBF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864868"><span class="hs-identifier hs-type">un21</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864868"><span class="hs-identifier hs-type">un21</span></a></span><span>
</span><span id="line-1575"></span><span>                                     </span><span class="hs-comment">-- compute second quotient digit</span><span>
</span><span id="line-1576"></span><span>                                     </span><span class="hs-comment">-- q0 = un21/vn1</span><span>
</span><span id="line-1577"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#DIV"><span class="hs-identifier hs-type">DIV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="annot"><a href="#local-6989586621682864867"><span class="hs-identifier hs-type">q0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864868"><span class="hs-identifier hs-type">un21</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864857"><span class="hs-identifier hs-type">vn1</span></a></span><span>
</span><span id="line-1578"></span><span>                                     </span><span class="hs-comment">-- rhat = un21- q0*vn1</span><span>
</span><span id="line-1579"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MULL"><span class="hs-identifier hs-type">MULL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864867"><span class="hs-identifier hs-type">q0</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864857"><span class="hs-identifier hs-type">vn1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1580"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SUBF"><span class="hs-identifier hs-type">SUBF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-type">rhat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864868"><span class="hs-identifier hs-type">un21</span></a></span><span>
</span><span id="line-1581"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-type">ALWAYS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864873"><span class="hs-identifier hs-type">again2</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1582"></span><span>
</span><span id="line-1583"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864873"><span class="hs-identifier hs-type">again2</span></a></span><span>
</span><span id="line-1584"></span><span>                                     </span><span class="hs-comment">-- if (q0&gt;b || q0*vn0 &gt; b*rhat + un0)</span><span>
</span><span id="line-1585"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-type">CMPL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864867"><span class="hs-identifier hs-type">q0</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864855"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1586"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#GEU"><span class="hs-identifier hs-type">GEU</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864875"><span class="hs-identifier hs-type">then2</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1587"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-type">ALWAYS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864874"><span class="hs-identifier hs-type">no2</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1588"></span><span>
</span><span id="line-1589"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864874"><span class="hs-identifier hs-type">no2</span></a></span><span>
</span><span id="line-1590"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MULL"><span class="hs-identifier hs-type">MULL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864867"><span class="hs-identifier hs-type">q0</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864858"><span class="hs-identifier hs-type">vn0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1591"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864866"><span class="hs-identifier hs-type">tmp1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-type">rhat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864847"><span class="hs-identifier hs-type">half</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1592"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864866"><span class="hs-identifier hs-type">tmp1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864866"><span class="hs-identifier hs-type">tmp1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864863"><span class="hs-identifier hs-type">un0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1593"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-type">CMPL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864866"><span class="hs-identifier hs-type">tmp1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1594"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#LEU"><span class="hs-identifier hs-type">LEU</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864876"><span class="hs-identifier hs-type">endif2</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1595"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-type">ALWAYS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864875"><span class="hs-identifier hs-type">then2</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1596"></span><span>
</span><span id="line-1597"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864875"><span class="hs-identifier hs-type">then2</span></a></span><span>
</span><span id="line-1598"></span><span>                                     </span><span class="hs-comment">-- q0 = q0 - 1</span><span>
</span><span id="line-1599"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864867"><span class="hs-identifier hs-type">q0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864867"><span class="hs-identifier hs-type">q0</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1600"></span><span>                                     </span><span class="hs-comment">-- rhat = rhat + vn1</span><span>
</span><span id="line-1601"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-type">rhat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-type">rhat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864857"><span class="hs-identifier hs-type">vn1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1602"></span><span>                                     </span><span class="hs-comment">-- if (rhat&lt;b) goto again2</span><span>
</span><span id="line-1603"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-type">CMPL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864865"><span class="hs-identifier hs-type">rhat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864855"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1604"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#LTT"><span class="hs-identifier hs-type">LTT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864873"><span class="hs-identifier hs-type">again2</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1605"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-type">BCC</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-type">ALWAYS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864876"><span class="hs-identifier hs-type">endif2</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1606"></span><span>
</span><span id="line-1607"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-type">NEWBLOCK</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864876"><span class="hs-identifier hs-type">endif2</span></a></span><span>
</span><span id="line-1608"></span><span>                                     </span><span class="hs-comment">-- compute remainder</span><span>
</span><span id="line-1609"></span><span>                                     </span><span class="hs-comment">-- r = (un21*b + un0 - q0*v) &gt;&gt; s</span><span>
</span><span id="line-1610"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864845"><span class="hs-identifier hs-type">reg_r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864868"><span class="hs-identifier hs-type">un21</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864847"><span class="hs-identifier hs-type">half</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1611"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864845"><span class="hs-identifier hs-type">reg_r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864845"><span class="hs-identifier hs-type">reg_r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864863"><span class="hs-identifier hs-type">un0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1612"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MULL"><span class="hs-identifier hs-type">MULL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864867"><span class="hs-identifier hs-type">q0</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864856"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1613"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SUBF"><span class="hs-identifier hs-type">SUBF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864845"><span class="hs-identifier hs-type">reg_r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864860"><span class="hs-identifier hs-type">tmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864845"><span class="hs-identifier hs-type">reg_r</span></a></span><span>
</span><span id="line-1614"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SR"><span class="hs-identifier hs-type">SR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864845"><span class="hs-identifier hs-type">reg_r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864845"><span class="hs-identifier hs-type">reg_r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864854"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1615"></span><span>                                     </span><span class="hs-comment">-- compute quotient</span><span>
</span><span id="line-1616"></span><span>                                     </span><span class="hs-comment">-- q = q1*b + q0</span><span>
</span><span id="line-1617"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-type">SL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864846"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864844"><span class="hs-identifier hs-type">reg_q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864864"><span class="hs-identifier hs-type">q1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864847"><span class="hs-identifier hs-type">half</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1618"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-type">ADD</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864844"><span class="hs-identifier hs-type">reg_q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864844"><span class="hs-identifier hs-type">reg_q</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864867"><span class="hs-identifier hs-type">q0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1619"></span><span>                                   </span><span class="hs-special">]</span><span>
</span><span id="line-1620"></span><span>              </span><span class="annot"><a href="#local-6989586621682864767"><span class="hs-identifier hs-var">divOp2</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1621"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall: Wrong number of arguments for divOp2&quot;</span></span><span>
</span><span id="line-1622"></span><span>              </span><span id="local-6989586621682864770"><span class="annot"><span class="annottext">multOp2 :: Width -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864770"><span class="hs-identifier hs-var hs-var">multOp2</span></a></span></span><span> </span><span id="local-6989586621682864883"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864883"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864884"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864884"><span class="hs-identifier hs-var">res_h</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864885"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864885"><span class="hs-identifier hs-var">res_l</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864886"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864886"><span class="hs-identifier hs-var">arg_x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864887"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864887"><span class="hs-identifier hs-var">arg_y</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1623"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864888"><span class="annot"><span class="annottext">reg_h :: Reg
</span><a href="#local-6989586621682864888"><span class="hs-identifier hs-var hs-var hs-var">reg_h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864884"><span class="hs-identifier hs-var">res_h</span></a></span><span>
</span><span id="line-1624"></span><span>                         </span><span id="local-6989586621682864889"><span class="annot"><span class="annottext">reg_l :: Reg
</span><a href="#local-6989586621682864889"><span class="hs-identifier hs-var hs-var hs-var">reg_l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864885"><span class="hs-identifier hs-var">res_l</span></a></span><span>
</span><span id="line-1625"></span><span>                         </span><span id="local-6989586621682864890"><span class="annot"><span class="annottext">fmt :: Format
</span><a href="#local-6989586621682864890"><span class="hs-identifier hs-var hs-var hs-var">fmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864883"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-1626"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864891"><span class="annot"><a href="#local-6989586621682864891"><span class="hs-identifier hs-var">x_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864892"><span class="annot"><a href="#local-6989586621682864892"><span class="hs-identifier hs-var">x_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864886"><span class="hs-identifier hs-var">arg_x</span></a></span><span>
</span><span id="line-1627"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864893"><span class="annot"><a href="#local-6989586621682864893"><span class="hs-identifier hs-var">y_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864894"><span class="annot"><a href="#local-6989586621682864894"><span class="hs-identifier hs-var">y_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864887"><span class="hs-identifier hs-type">arg_y</span></a></span><span>
</span><span id="line-1628"></span><span>                     </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864894"><span class="hs-identifier hs-type">y_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864892"><span class="hs-identifier hs-type">x_code</span></a></span><span>
</span><span id="line-1629"></span><span>                            </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-type">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MULL"><span class="hs-identifier hs-type">MULL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864890"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864889"><span class="hs-identifier hs-type">reg_l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864891"><span class="hs-identifier hs-type">x_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864893"><span class="hs-identifier hs-type">y_reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1630"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MULHU"><span class="hs-identifier hs-type">MULHU</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864890"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864888"><span class="hs-identifier hs-type">reg_h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864891"><span class="hs-identifier hs-type">x_reg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864893"><span class="hs-identifier hs-type">y_reg</span></a></span><span>
</span><span id="line-1631"></span><span>                                         </span><span class="hs-special">]</span><span>
</span><span id="line-1632"></span><span>              </span><span class="annot"><a href="#local-6989586621682864770"><span class="hs-identifier hs-var">multOp2</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1633"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: Wrong number of arguments for multOp2&quot;</span></span><span>
</span><span id="line-1634"></span><span>              </span><span id="local-6989586621682864772"><span class="annot"><span class="annottext">add2Op :: [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864772"><span class="hs-identifier hs-var hs-var">add2Op</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864901"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864901"><span class="hs-identifier hs-var">res_h</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864902"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864902"><span class="hs-identifier hs-var">res_l</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864903"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864903"><span class="hs-identifier hs-var">arg_x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864904"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864904"><span class="hs-identifier hs-var">arg_y</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1635"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864905"><span class="annot"><span class="annottext">reg_h :: Reg
</span><a href="#local-6989586621682864905"><span class="hs-identifier hs-var hs-var hs-var">reg_h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864901"><span class="hs-identifier hs-var">res_h</span></a></span><span>
</span><span id="line-1636"></span><span>                         </span><span id="local-6989586621682864906"><span class="annot"><span class="annottext">reg_l :: Reg
</span><a href="#local-6989586621682864906"><span class="hs-identifier hs-var hs-var hs-var">reg_l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864902"><span class="hs-identifier hs-var">res_l</span></a></span><span>
</span><span id="line-1637"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864907"><span class="annot"><a href="#local-6989586621682864907"><span class="hs-identifier hs-var">x_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864908"><span class="annot"><a href="#local-6989586621682864908"><span class="hs-identifier hs-var">x_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864903"><span class="hs-identifier hs-var">arg_x</span></a></span><span>
</span><span id="line-1638"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864909"><span class="annot"><a href="#local-6989586621682864909"><span class="hs-identifier hs-var">y_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864910"><span class="annot"><a href="#local-6989586621682864910"><span class="hs-identifier hs-var">y_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864904"><span class="hs-identifier hs-type">arg_y</span></a></span><span>
</span><span id="line-1639"></span><span>                     </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864910"><span class="hs-identifier hs-type">y_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864908"><span class="hs-identifier hs-type">x_code</span></a></span><span>
</span><span id="line-1640"></span><span>                            </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-type">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#LI"><span class="hs-identifier hs-type">LI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864905"><span class="hs-identifier hs-type">reg_h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-1641"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADDC"><span class="hs-identifier hs-type">ADDC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864906"><span class="hs-identifier hs-type">reg_l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864907"><span class="hs-identifier hs-type">x_reg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864909"><span class="hs-identifier hs-type">y_reg</span></a></span><span>
</span><span id="line-1642"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADDZE"><span class="hs-identifier hs-type">ADDZE</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864905"><span class="hs-identifier hs-type">reg_h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864905"><span class="hs-identifier hs-type">reg_h</span></a></span><span>
</span><span id="line-1643"></span><span>                                         </span><span class="hs-special">]</span><span>
</span><span id="line-1644"></span><span>              </span><span class="annot"><a href="#local-6989586621682864772"><span class="hs-identifier hs-var">add2Op</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1645"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall: Wrong number of arguments/results for add2&quot;</span></span><span>
</span><span id="line-1646"></span><span>
</span><span id="line-1647"></span><span>              </span><span id="local-6989586621682864774"><span class="annot"><span class="annottext">addcOp :: [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864774"><span class="hs-identifier hs-var hs-var">addcOp</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864914"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864914"><span class="hs-identifier hs-var">res_r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864915"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864915"><span class="hs-identifier hs-var">res_c</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864916"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864916"><span class="hs-identifier hs-var">arg_x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864917"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864917"><span class="hs-identifier hs-var">arg_y</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1648"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864772"><span class="hs-identifier hs-var">add2Op</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864915"><span class="hs-identifier hs-var">res_c</span></a></span><span> </span><span class="hs-comment">{-hi-}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864914"><span class="hs-identifier hs-var">res_r</span></a></span><span> </span><span class="hs-comment">{-lo-}</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864916"><span class="hs-identifier hs-var">arg_x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864917"><span class="hs-identifier hs-var">arg_y</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1649"></span><span>              </span><span class="annot"><a href="#local-6989586621682864774"><span class="hs-identifier hs-var">addcOp</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1650"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall: Wrong number of arguments/results for addc&quot;</span></span><span>
</span><span id="line-1651"></span><span>
</span><span id="line-1652"></span><span>              </span><span class="hs-comment">-- PowerPC subfc sets the carry for rT = ~(rA) + rB + 1,</span><span>
</span><span id="line-1653"></span><span>              </span><span class="hs-comment">-- which is 0 for borrow and 1 otherwise. We need 1 and 0</span><span>
</span><span id="line-1654"></span><span>              </span><span class="hs-comment">-- so xor with 1.</span><span>
</span><span id="line-1655"></span><span>              </span><span id="local-6989586621682864776"><span class="annot"><span class="annottext">subcOp :: [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864776"><span class="hs-identifier hs-var hs-var">subcOp</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864923"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864923"><span class="hs-identifier hs-var">res_r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864924"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864924"><span class="hs-identifier hs-var">res_c</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864925"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864925"><span class="hs-identifier hs-var">arg_x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864926"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864926"><span class="hs-identifier hs-var">arg_y</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1656"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864927"><span class="annot"><span class="annottext">reg_r :: Reg
</span><a href="#local-6989586621682864927"><span class="hs-identifier hs-var hs-var hs-var">reg_r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864923"><span class="hs-identifier hs-var">res_r</span></a></span><span>
</span><span id="line-1657"></span><span>                         </span><span id="local-6989586621682864928"><span class="annot"><span class="annottext">reg_c :: Reg
</span><a href="#local-6989586621682864928"><span class="hs-identifier hs-var hs-var hs-var">reg_c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864924"><span class="hs-identifier hs-var">res_c</span></a></span><span>
</span><span id="line-1658"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864929"><span class="annot"><a href="#local-6989586621682864929"><span class="hs-identifier hs-var">x_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864930"><span class="annot"><a href="#local-6989586621682864930"><span class="hs-identifier hs-var">x_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864925"><span class="hs-identifier hs-var">arg_x</span></a></span><span>
</span><span id="line-1659"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864931"><span class="annot"><a href="#local-6989586621682864931"><span class="hs-identifier hs-var">y_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864932"><span class="annot"><a href="#local-6989586621682864932"><span class="hs-identifier hs-var">y_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864926"><span class="hs-identifier hs-type">arg_y</span></a></span><span>
</span><span id="line-1660"></span><span>                     </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864932"><span class="hs-identifier hs-type">y_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864930"><span class="hs-identifier hs-type">x_code</span></a></span><span>
</span><span id="line-1661"></span><span>                            </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-type">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#LI"><span class="hs-identifier hs-type">LI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864928"><span class="hs-identifier hs-type">reg_c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-1662"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#SUBFC"><span class="hs-identifier hs-type">SUBFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864927"><span class="hs-identifier hs-type">reg_r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864931"><span class="hs-identifier hs-type">y_reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-type">RIReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864929"><span class="hs-identifier hs-type">x_reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1663"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ADDZE"><span class="hs-identifier hs-type">ADDZE</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864928"><span class="hs-identifier hs-type">reg_c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864928"><span class="hs-identifier hs-type">reg_c</span></a></span><span>
</span><span id="line-1664"></span><span>                                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#XOR"><span class="hs-identifier hs-type">XOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864928"><span class="hs-identifier hs-type">reg_c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864928"><span class="hs-identifier hs-type">reg_c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-type">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-type">ImmInt</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1665"></span><span>                                         </span><span class="hs-special">]</span><span>
</span><span id="line-1666"></span><span>              </span><span class="annot"><a href="#local-6989586621682864776"><span class="hs-identifier hs-var">subcOp</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1667"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall: Wrong number of arguments/results for subc&quot;</span></span><span>
</span><span id="line-1668"></span><span>              </span><span id="local-6989586621682864779"><span class="annot"><span class="annottext">addSubCOp :: (Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; Width -&gt; [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864779"><span class="hs-identifier hs-var hs-var">addSubCOp</span></a></span></span><span> </span><span id="local-6989586621682864938"><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682864938"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682864939"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682864939"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864940"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864940"><span class="hs-identifier hs-var">res_r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864941"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864941"><span class="hs-identifier hs-var">res_c</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864942"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864942"><span class="hs-identifier hs-var">arg_x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864943"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864943"><span class="hs-identifier hs-var">arg_y</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1669"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864944"><span class="annot"><span class="annottext">reg_r :: Reg
</span><a href="#local-6989586621682864944"><span class="hs-identifier hs-var hs-var hs-var">reg_r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864940"><span class="hs-identifier hs-var">res_r</span></a></span><span>
</span><span id="line-1670"></span><span>                         </span><span id="local-6989586621682864945"><span class="annot"><span class="annottext">reg_c :: Reg
</span><a href="#local-6989586621682864945"><span class="hs-identifier hs-var hs-var hs-var">reg_c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864941"><span class="hs-identifier hs-var">res_c</span></a></span><span>
</span><span id="line-1671"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864946"><span class="annot"><a href="#local-6989586621682864946"><span class="hs-identifier hs-var">x_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864947"><span class="annot"><a href="#local-6989586621682864947"><span class="hs-identifier hs-var">x_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864942"><span class="hs-identifier hs-var">arg_x</span></a></span><span>
</span><span id="line-1672"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864948"><span class="annot"><a href="#local-6989586621682864948"><span class="hs-identifier hs-var">y_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864949"><span class="annot"><a href="#local-6989586621682864949"><span class="hs-identifier hs-var">y_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864943"><span class="hs-identifier hs-type">arg_y</span></a></span><span>
</span><span id="line-1673"></span><span>                     </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864949"><span class="hs-identifier hs-type">y_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864947"><span class="hs-identifier hs-type">x_code</span></a></span><span>
</span><span id="line-1674"></span><span>                            </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-type">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="#local-6989586621682864938"><span class="hs-identifier hs-type">instr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864944"><span class="hs-identifier hs-type">reg_r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864948"><span class="hs-identifier hs-type">y_reg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864946"><span class="hs-identifier hs-type">x_reg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1675"></span><span>                                           </span><span class="hs-comment">-- SUBFO argument order reversed!</span><span>
</span><span id="line-1676"></span><span>                                           </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#MFOV"><span class="hs-identifier hs-type">MFOV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-type">intFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864939"><span class="hs-identifier hs-type">width</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682864945"><span class="hs-identifier hs-type">reg_c</span></a></span><span>
</span><span id="line-1677"></span><span>                                         </span><span class="hs-special">]</span><span>
</span><span id="line-1678"></span><span>              </span><span class="annot"><a href="#local-6989586621682864779"><span class="hs-identifier hs-var">addSubCOp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1679"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: Wrong number of arguments/results for addC&quot;</span></span><span>
</span><span id="line-1680"></span><span>              </span><span id="local-6989586621682864785"><span class="annot"><span class="annottext">fabs :: [CmmFormal] -&gt; [CmmExpr] -&gt; NatM (OrdList Instr)
</span><a href="#local-6989586621682864785"><span class="hs-identifier hs-var hs-var">fabs</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864954"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864954"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682864955"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864955"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-1681"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864956"><span class="annot"><span class="annottext">res_r :: Reg
</span><a href="#local-6989586621682864956"><span class="hs-identifier hs-var hs-var hs-var">res_r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682864954"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-1682"></span><span>                     </span><span class="hs-special">(</span><span id="local-6989586621682864957"><span class="annot"><a href="#local-6989586621682864957"><span class="hs-identifier hs-var">arg_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864958"><span class="annot"><a href="#local-6989586621682864958"><span class="hs-identifier hs-var">arg_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864955"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1683"></span><span>                     </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682864958"><span class="hs-identifier hs-type">arg_code</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#FABS"><span class="hs-identifier hs-type">FABS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864956"><span class="hs-identifier hs-type">res_r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682864957"><span class="hs-identifier hs-type">arg_reg</span></a></span><span>
</span><span id="line-1684"></span><span>              </span><span class="annot"><a href="#local-6989586621682864785"><span class="hs-identifier hs-var">fabs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1685"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (OrdList Instr)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: Wrong number of arguments/results for fabs&quot;</span></span><span>
</span><span id="line-1686"></span><span>
</span><span id="line-1687"></span><span class="hs-comment">-- TODO: replace 'Int' by an enum such as 'PPC_64ABI'</span><span>
</span><span id="line-1688"></span><span class="hs-keyword">data</span><span> </span><span id="GenCCallPlatform"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GenCCallPlatform"><span class="hs-identifier hs-var">GenCCallPlatform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GCP32ELF"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP32ELF"><span class="hs-identifier hs-var">GCP32ELF</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="GCP64ELF"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-var">GCP64ELF</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="GCPAIX"><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCPAIX"><span class="hs-identifier hs-var">GCPAIX</span></a></span></span><span>
</span><span id="line-1689"></span><span>
</span><span id="line-1690"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#platformToGCP"><span class="hs-identifier hs-type">platformToGCP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GenCCallPlatform"><span class="hs-identifier hs-type">GenCCallPlatform</span></a></span><span>
</span><span id="line-1691"></span><span id="platformToGCP"><span class="annot"><span class="annottext">platformToGCP :: Platform -&gt; GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#platformToGCP"><span class="hs-identifier hs-var hs-var">platformToGCP</span></a></span></span><span> </span><span id="local-6989586621682864962"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864962"><span class="hs-identifier hs-var">platform</span></a></span></span><span>
</span><span id="line-1692"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OS
</span><a href="GHC.Platform.html#platformOS"><span class="hs-identifier hs-var">platformOS</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864962"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1693"></span><span>      </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier hs-var">OSAIX</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCPAIX"><span class="hs-identifier hs-var">GCPAIX</span></a></span><span>
</span><span id="line-1694"></span><span>      </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Arch
</span><a href="GHC.Platform.html#platformArch"><span class="hs-identifier hs-var">platformArch</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864962"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1695"></span><span>             </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier hs-var">ArchPPC</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP32ELF"><span class="hs-identifier hs-var">GCP32ELF</span></a></span><span>
</span><span id="line-1696"></span><span>             </span><span class="annot"><span class="hs-identifier hs-type">ArchPPC_64</span></span><span> </span><span class="annot"><span class="annottext">PPC_64ABI
</span><span class="hs-identifier hs-var">ELF_V1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-var">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1697"></span><span>             </span><span class="annot"><span class="hs-identifier hs-type">ArchPPC_64</span></span><span> </span><span class="annot"><span class="annottext">PPC_64ABI
</span><span class="hs-identifier hs-var">ELF_V2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-var">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1698"></span><span>             </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; GenCCallPlatform
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;platformToGCP: Not PowerPC&quot;</span></span><span>
</span><span id="line-1699"></span><span>
</span><span id="line-1700"></span><span>
</span><span id="line-1701"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall%27"><span class="hs-identifier hs-type">genCCall'</span></a></span><span>
</span><span id="line-1702"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Config.html#NCGConfig"><span class="hs-identifier hs-type">NCGConfig</span></a></span><span>
</span><span id="line-1703"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GenCCallPlatform"><span class="hs-identifier hs-type">GenCCallPlatform</span></a></span><span>
</span><span id="line-1704"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span>            </span><span class="hs-comment">-- function to call</span><span>
</span><span id="line-1705"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmFormal"><span class="hs-identifier hs-type">CmmFormal</span></a></span><span class="hs-special">]</span><span>        </span><span class="hs-comment">-- where to put the result</span><span>
</span><span id="line-1706"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmActual"><span class="hs-identifier hs-type">CmmActual</span></a></span><span class="hs-special">]</span><span>        </span><span class="hs-comment">-- arguments (of mixed type)</span><span>
</span><span id="line-1707"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-1708"></span><span>
</span><span id="line-1709"></span><span class="hs-comment">{-
    PowerPC Linux uses the System V Release 4 Calling Convention
    for PowerPC. It is described in the
    &quot;System V Application Binary Interface PowerPC Processor Supplement&quot;.

    PowerPC 64 Linux uses the System V Release 4 Calling Convention for
    64-bit PowerPC. It is specified in
    &quot;64-bit PowerPC ELF Application Binary Interface Supplement 1.9&quot;
    (PPC64 ELF v1.9).

    PowerPC 64 Linux in little endian mode uses the &quot;Power Architecture 64-Bit
    ELF V2 ABI Specification -- OpenPOWER ABI for Linux Supplement&quot;
    (PPC64 ELF v2).

    AIX follows the &quot;PowerOpen ABI: Application Binary Interface Big-Endian
    32-Bit Hardware Implementation&quot;

    All four conventions are similar:
    Parameters may be passed in general-purpose registers starting at r3, in
    floating point registers starting at f1, or on the stack.

    But there are substantial differences:
    * The number of registers used for parameter passing and the exact set of
      nonvolatile registers differs (see MachRegs.hs).
    * On AIX and 64-bit ELF, stack space is always reserved for parameters,
      even if they are passed in registers. The called routine may choose to
      save parameters from registers to the corresponding space on the stack.
    * On AIX and 64-bit ELF, a corresponding amount of GPRs is skipped when
      a floating point parameter is passed in an FPR.
    * SysV insists on either passing I64 arguments on the stack, or in two GPRs,
      starting with an odd-numbered GPR. It may skip a GPR to achieve this.
      AIX just treats an I64 likt two separate I32s (high word first).
    * I64 and FF64 arguments are 8-byte aligned on the stack for SysV, but only
      4-byte aligned like everything else on AIX.
    * The SysV spec claims that FF32 is represented as FF64 on the stack. GCC on
      PowerPC Linux does not agree, so neither do we.

    According to all conventions, the parameter area should be part of the
    caller's stack frame, allocated in the caller's prologue code (large enough
    to hold the parameter lists for all called routines). The NCG already
    uses the stack for register spilling, leaving 64 bytes free at the top.
    If we need a larger parameter area than that, we increase the size
    of the stack frame just before ccalling.
-}</span><span>
</span><span id="line-1753"></span><span>
</span><span id="line-1754"></span><span>
</span><span id="line-1755"></span><span id="genCCall%27"><span class="annot"><span class="annottext">genCCall' :: NCGConfig
-&gt; GenCCallPlatform
-&gt; ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genCCall%27"><span class="hs-identifier hs-var hs-var">genCCall'</span></a></span></span><span> </span><span id="local-6989586621682864963"><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864963"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621682864964"><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="#local-6989586621682864964"><span class="hs-identifier hs-var">gcp</span></a></span></span><span> </span><span id="local-6989586621682864965"><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621682864965"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621682864966"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864966"><span class="hs-identifier hs-var">dest_regs</span></a></span></span><span> </span><span id="local-6989586621682864967"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864967"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1756"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1757"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864968"><span class="annot"><a href="#local-6989586621682864968"><span class="hs-identifier hs-var">finalStack</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682864969"><span class="annot"><a href="#local-6989586621682864969"><span class="hs-identifier hs-var">passArgumentsCode</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682864970"><span class="annot"><a href="#local-6989586621682864970"><span class="hs-identifier hs-var">usedRegs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
-&gt; [Reg]
-&gt; [Reg]
-&gt; Int
-&gt; OrdList Instr
-&gt; [Reg]
-&gt; NatM (Int, OrdList Instr, [Reg])
</span><a href="#local-6989586621682864971"><span class="hs-identifier hs-var">passArguments</span></a></span><span>
</span><span id="line-1758"></span><span>                                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CmmExpr]
-&gt; [CmmType] -&gt; [ForeignHint] -&gt; [(CmmExpr, CmmType, ForeignHint)]
forall a b c. [a] -&gt; [b] -&gt; [c] -&gt; [(a, b, c)]
</span><span class="hs-identifier hs-var">zip3</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864967"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmType]
</span><a href="#local-6989586621682864973"><span class="hs-identifier hs-var">argReps</span></a></span><span> </span><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621682864974"><span class="hs-identifier hs-var">argHints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1759"></span><span>                                                   </span><span class="annot"><span class="annottext">[Reg]
</span><a href="GHC.CmmToAsm.PPC.Regs.html#allArgRegs"><span class="hs-identifier hs-var">allArgRegs</span></a></span><span>
</span><span id="line-1760"></span><span>                                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; [Reg]
</span><a href="GHC.CmmToAsm.PPC.Regs.html#allFPArgRegs"><span class="hs-identifier hs-var">allFPArgRegs</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1761"></span><span>                                                   </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864978"><span class="hs-identifier hs-var">initialStackOffset</span></a></span><span>
</span><span id="line-1762"></span><span>                                                   </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1763"></span><span>
</span><span id="line-1764"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682864979"><span class="annot"><a href="#local-6989586621682864979"><span class="hs-identifier hs-var">labelOrExpr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864980"><span class="annot"><a href="#local-6989586621682864980"><span class="hs-identifier hs-var">reduceToFF32</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682864965"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1765"></span><span>            </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-type">CmmLabel</span></a></span><span> </span><span id="local-6989586621682864982"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682864982"><span class="hs-identifier hs-var">lbl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ForeignConvention
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1766"></span><span>                </span><span class="annot"><span class="annottext">NatM ()
</span><a href="#local-6989586621682864983"><span class="hs-identifier hs-var">uses_pic_base_implicitly</span></a></span><span>
</span><span id="line-1767"></span><span>                </span><span class="annot"><span class="annottext">(Either CLabel CmmExpr, Bool) -&gt; NatM (Either CLabel CmmExpr, Bool)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; Either CLabel CmmExpr
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682864982"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1768"></span><span>            </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span> </span><span id="local-6989586621682864984"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864984"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForeignConvention
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1769"></span><span>                </span><span class="annot"><span class="annottext">NatM ()
</span><a href="#local-6989586621682864983"><span class="hs-identifier hs-var">uses_pic_base_implicitly</span></a></span><span>
</span><span id="line-1770"></span><span>                </span><span class="annot"><span class="annottext">(Either CLabel CmmExpr, Bool) -&gt; NatM (Either CLabel CmmExpr, Bool)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmExpr -&gt; Either CLabel CmmExpr
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864984"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1771"></span><span>            </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span id="local-6989586621682864985"><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621682864985"><span class="hs-identifier hs-var">mop</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CallishMachOp -&gt; NatM (Either CLabel CmmExpr, Bool)
</span><a href="#local-6989586621682864986"><span class="hs-identifier hs-var">outOfLineMachOp</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621682864985"><span class="hs-identifier hs-var">mop</span></a></span><span>
</span><span id="line-1772"></span><span>
</span><span id="line-1773"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682864987"><span class="annot"><a href="#local-6989586621682864987"><span class="hs-identifier hs-var hs-var">codeBefore</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; OrdList Instr
</span><a href="#local-6989586621682864988"><span class="hs-identifier hs-var">move_sp_down</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864968"><span class="hs-identifier hs-var">finalStack</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864969"><span class="hs-identifier hs-var">passArgumentsCode</span></a></span><span>
</span><span id="line-1774"></span><span>            </span><span id="local-6989586621682864989"><span class="annot"><a href="#local-6989586621682864989"><span class="hs-identifier hs-var hs-var">codeAfter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; OrdList Instr
</span><a href="#local-6989586621682864990"><span class="hs-identifier hs-var">move_sp_up</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682864968"><span class="hs-identifier hs-var">finalStack</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; OrdList Instr
</span><a href="#local-6989586621682864991"><span class="hs-identifier hs-var">moveResult</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682864980"><span class="hs-identifier hs-var">reduceToFF32</span></a></span><span>
</span><span id="line-1775"></span><span>
</span><span id="line-1776"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682864979"><span class="hs-identifier hs-type">labelOrExpr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1777"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621682864992"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682864992"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- the linker does all the work for us</span><span>
</span><span id="line-1778"></span><span>                </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span>         </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864987"><span class="hs-identifier hs-var">codeBefore</span></a></span><span>
</span><span id="line-1779"></span><span>                        </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; [Reg] -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BL"><span class="hs-identifier hs-var">BL</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682864992"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682864970"><span class="hs-identifier hs-var">usedRegs</span></a></span><span>
</span><span id="line-1780"></span><span>                        </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864994"><span class="hs-identifier hs-var">maybeNOP</span></a></span><span> </span><span class="hs-comment">-- some ABI require a NOP after BL</span><span>
</span><span id="line-1781"></span><span>                        </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864989"><span class="hs-identifier hs-var">codeAfter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1782"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621682864995"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864995"><span class="hs-identifier hs-var">dyn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- implement call through function pointer</span><span>
</span><span id="line-1783"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621682864996"><span class="annot"><a href="#local-6989586621682864996"><span class="hs-identifier hs-var">dynReg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864997"><span class="annot"><a href="#local-6989586621682864997"><span class="hs-identifier hs-var">dynCode</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682864995"><span class="hs-identifier hs-var">dyn</span></a></span><span>
</span><span id="line-1784"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682864964"><span class="hs-identifier hs-type">gcp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1785"></span><span>                     </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864997"><span class="hs-identifier hs-var">dynCode</span></a></span><span>
</span><span id="line-1786"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864987"><span class="hs-identifier hs-var">codeBefore</span></a></span><span>
</span><span id="line-1787"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864998"><span class="hs-identifier hs-var">spFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-var">toc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1788"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r11"><span class="hs-identifier hs-var">r11</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864996"><span class="hs-identifier hs-var">dynReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1789"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-var">toc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864996"><span class="hs-identifier hs-var">dynReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1790"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MTCTR"><span class="hs-identifier hs-var">MTCTR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r11"><span class="hs-identifier hs-var">r11</span></a></span><span>
</span><span id="line-1791"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r11"><span class="hs-identifier hs-var">r11</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864996"><span class="hs-identifier hs-var">dynReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1792"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg] -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCTRL"><span class="hs-identifier hs-var">BCTRL</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682864970"><span class="hs-identifier hs-var">usedRegs</span></a></span><span>
</span><span id="line-1793"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864998"><span class="hs-identifier hs-var">spFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-var">toc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1794"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864989"><span class="hs-identifier hs-var">codeAfter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1795"></span><span>                     </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864997"><span class="hs-identifier hs-var">dynCode</span></a></span><span>
</span><span id="line-1796"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864987"><span class="hs-identifier hs-var">codeBefore</span></a></span><span>
</span><span id="line-1797"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864998"><span class="hs-identifier hs-var">spFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-var">toc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">24</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1798"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r12"><span class="hs-identifier hs-var">r12</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864996"><span class="hs-identifier hs-var">dynReg</span></a></span><span>
</span><span id="line-1799"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MTCTR"><span class="hs-identifier hs-var">MTCTR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r12"><span class="hs-identifier hs-var">r12</span></a></span><span>
</span><span id="line-1800"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg] -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCTRL"><span class="hs-identifier hs-var">BCTRL</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682864970"><span class="hs-identifier hs-var">usedRegs</span></a></span><span>
</span><span id="line-1801"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864998"><span class="hs-identifier hs-var">spFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-var">toc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">24</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1802"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864989"><span class="hs-identifier hs-var">codeAfter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1803"></span><span>                     </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCPAIX"><span class="hs-identifier hs-var">GCPAIX</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864997"><span class="hs-identifier hs-var">dynCode</span></a></span><span>
</span><span id="line-1804"></span><span>                       </span><span class="hs-comment">-- AIX/XCOFF follows the PowerOPEN ABI</span><span>
</span><span id="line-1805"></span><span>                       </span><span class="hs-comment">-- which is quite similar to LinuxPPC64/ELFv1</span><span>
</span><span id="line-1806"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864987"><span class="hs-identifier hs-var">codeBefore</span></a></span><span>
</span><span id="line-1807"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864998"><span class="hs-identifier hs-var">spFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-var">toc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1808"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r11"><span class="hs-identifier hs-var">r11</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864996"><span class="hs-identifier hs-var">dynReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1809"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-var">toc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864996"><span class="hs-identifier hs-var">dynReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1810"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MTCTR"><span class="hs-identifier hs-var">MTCTR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r11"><span class="hs-identifier hs-var">r11</span></a></span><span>
</span><span id="line-1811"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r11"><span class="hs-identifier hs-var">r11</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864996"><span class="hs-identifier hs-var">dynReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1812"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg] -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCTRL"><span class="hs-identifier hs-var">BCTRL</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682864970"><span class="hs-identifier hs-var">usedRegs</span></a></span><span>
</span><span id="line-1813"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864998"><span class="hs-identifier hs-var">spFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#toc"><span class="hs-identifier hs-var">toc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1814"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864989"><span class="hs-identifier hs-var">codeAfter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1815"></span><span>                     </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; NatM (OrdList Instr)
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864997"><span class="hs-identifier hs-var">dynCode</span></a></span><span>
</span><span id="line-1816"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MTCTR"><span class="hs-identifier hs-var">MTCTR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682864996"><span class="hs-identifier hs-var">dynReg</span></a></span><span>
</span><span id="line-1817"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864987"><span class="hs-identifier hs-var">codeBefore</span></a></span><span>
</span><span id="line-1818"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg] -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCTRL"><span class="hs-identifier hs-var">BCTRL</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682864970"><span class="hs-identifier hs-var">usedRegs</span></a></span><span>
</span><span id="line-1819"></span><span>                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>  </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682864989"><span class="hs-identifier hs-var">codeAfter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1820"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1821"></span><span>        </span><span id="local-6989586621682864977"><span class="annot"><span class="annottext">platform :: Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NCGConfig -&gt; Platform
</span><a href="GHC.CmmToAsm.Config.html#ncgPlatform"><span class="hs-identifier hs-var">ncgPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864963"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-1822"></span><span>
</span><span id="line-1823"></span><span>        </span><span id="local-6989586621682864983"><span class="annot"><span class="annottext">uses_pic_base_implicitly :: NatM ()
</span><a href="#local-6989586621682864983"><span class="hs-identifier hs-var hs-var">uses_pic_base_implicitly</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1824"></span><span>            </span><span class="hs-comment">-- See Note [implicit register in PPC PIC code]</span><span>
</span><span id="line-1825"></span><span>            </span><span class="hs-comment">-- on why we claim to use PIC register here</span><span>
</span><span id="line-1826"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; NatM () -&gt; NatM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NCGConfig -&gt; Bool
</span><a href="GHC.CmmToAsm.Config.html#ncgPIC"><span class="hs-identifier hs-var">ncgPIC</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864963"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NatM () -&gt; NatM ()) -&gt; NatM () -&gt; NatM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1827"></span><span>                </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Format -&gt; NatM Reg
</span><a href="GHC.CmmToAsm.Monad.html#getPicBaseNat"><span class="hs-identifier hs-var">getPicBaseNat</span></a></span><span> </span><span class="annot"><span class="annottext">(Format -&gt; NatM Reg) -&gt; Format -&gt; NatM Reg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Format
</span><a href="GHC.CmmToAsm.PPC.Instr.html#archWordFormat"><span class="hs-identifier hs-var">archWordFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1828"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1829"></span><span>
</span><span id="line-1830"></span><span>        </span><span id="local-6989586621682864978"><span class="annot"><span class="annottext">initialStackOffset :: Int
</span><a href="#local-6989586621682864978"><span class="hs-identifier hs-var hs-var">initialStackOffset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="#local-6989586621682864964"><span class="hs-identifier hs-var">gcp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1831"></span><span>                             </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCPAIX"><span class="hs-identifier hs-var">GCPAIX</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">24</span></span><span>
</span><span id="line-1832"></span><span>                             </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP32ELF"><span class="hs-identifier hs-var">GCP32ELF</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span>
</span><span id="line-1833"></span><span>                             </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">48</span></span><span>
</span><span id="line-1834"></span><span>                             </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span>
</span><span id="line-1835"></span><span>                             </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall': unknown calling convention&quot;</span></span><span>
</span><span id="line-1836"></span><span>            </span><span class="hs-comment">-- size of linkage area + size of arguments, in bytes</span><span>
</span><span id="line-1837"></span><span>        </span><span id="local-6989586621682865002"><span class="annot"><span class="annottext">stackDelta :: Int -&gt; Int
</span><a href="#local-6989586621682865002"><span class="hs-identifier hs-var hs-var">stackDelta</span></a></span></span><span> </span><span id="local-6989586621682865003"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865003"><span class="hs-identifier hs-var">finalStack</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="#local-6989586621682864964"><span class="hs-identifier hs-var">gcp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1838"></span><span>                                </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCPAIX"><span class="hs-identifier hs-var">GCPAIX</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1839"></span><span>                                    </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="#local-6989586621682865004"><span class="hs-identifier hs-var">roundTo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">24</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">sum</span></span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; Int) -&gt; [Int] -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1840"></span><span>                                    </span><span class="annot"><span class="annottext">(CmmType -&gt; Int) -&gt; [CmmType] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">(Width -&gt; Int) -&gt; (CmmType -&gt; Width) -&gt; CmmType -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Width
</span><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier hs-var">typeWidth</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmType]
</span><a href="#local-6989586621682864973"><span class="hs-identifier hs-var">argReps</span></a></span><span>
</span><span id="line-1841"></span><span>                                </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP32ELF"><span class="hs-identifier hs-var">GCP32ELF</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="#local-6989586621682865004"><span class="hs-identifier hs-var">roundTo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865003"><span class="hs-identifier hs-var">finalStack</span></a></span><span>
</span><span id="line-1842"></span><span>                                </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1843"></span><span>                                    </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="#local-6989586621682865004"><span class="hs-identifier hs-var">roundTo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">48</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">64</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">sum</span></span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; Int) -&gt; [Int] -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1844"></span><span>                                    </span><span class="annot"><span class="annottext">(CmmType -&gt; Int) -&gt; [CmmType] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="#local-6989586621682865004"><span class="hs-identifier hs-var">roundTo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; (CmmType -&gt; Int) -&gt; CmmType -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">(Width -&gt; Int) -&gt; (CmmType -&gt; Width) -&gt; CmmType -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Width
</span><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier hs-var">typeWidth</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1845"></span><span>                                        </span><span class="annot"><span class="annottext">[CmmType]
</span><a href="#local-6989586621682864973"><span class="hs-identifier hs-var">argReps</span></a></span><span>
</span><span id="line-1846"></span><span>                                </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1847"></span><span>                                    </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="#local-6989586621682865004"><span class="hs-identifier hs-var">roundTo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">64</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">sum</span></span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; Int) -&gt; [Int] -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1848"></span><span>                                    </span><span class="annot"><span class="annottext">(CmmType -&gt; Int) -&gt; [CmmType] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="#local-6989586621682865004"><span class="hs-identifier hs-var">roundTo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; (CmmType -&gt; Int) -&gt; CmmType -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">(Width -&gt; Int) -&gt; (CmmType -&gt; Width) -&gt; CmmType -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Width
</span><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier hs-var">typeWidth</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1849"></span><span>                                        </span><span class="annot"><span class="annottext">[CmmType]
</span><a href="#local-6989586621682864973"><span class="hs-identifier hs-var">argReps</span></a></span><span>
</span><span id="line-1850"></span><span>                                </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall': unknown calling conv.&quot;</span></span><span>
</span><span id="line-1851"></span><span>
</span><span id="line-1852"></span><span>        </span><span id="local-6989586621682864973"><span class="annot"><span class="annottext">argReps :: [CmmType]
</span><a href="#local-6989586621682864973"><span class="hs-identifier hs-var hs-var">argReps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CmmExpr -&gt; CmmType) -&gt; [CmmExpr] -&gt; [CmmType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; CmmExpr -&gt; CmmType
</span><a href="GHC.Cmm.Expr.html#cmmExprType"><span class="hs-identifier hs-var">cmmExprType</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621682864967"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1853"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ForeignHint]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682864974"><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621682864974"><span class="hs-identifier hs-var">argHints</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignTarget -&gt; ([ForeignHint], [ForeignHint])
</span><a href="GHC.Cmm.Node.html#foreignTargetHints"><span class="hs-identifier hs-var">foreignTargetHints</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621682864965"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-1854"></span><span>
</span><span id="line-1855"></span><span>        </span><span id="local-6989586621682865004"><span class="annot"><span class="annottext">roundTo :: a -&gt; a -&gt; a
</span><a href="#local-6989586621682865004"><span class="hs-identifier hs-var hs-var">roundTo</span></a></span></span><span> </span><span id="local-6989586621682865031"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682865031"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682865032"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682865032"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682865032"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mod`</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682865031"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682865032"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1856"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682865032"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682865031"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682865032"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mod`</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682865031"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1857"></span><span>
</span><span id="line-1858"></span><span>        </span><span id="local-6989586621682864998"><span class="annot"><span class="annottext">spFormat :: Format
</span><a href="#local-6989586621682864998"><span class="hs-identifier hs-var hs-var">spFormat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span>
</span><span id="line-1859"></span><span>
</span><span id="line-1860"></span><span>        </span><span class="hs-comment">-- TODO: Do not create a new stack frame if delta is too large.</span><span>
</span><span id="line-1861"></span><span>        </span><span id="local-6989586621682864988"><span class="annot"><span class="annottext">move_sp_down :: Int -&gt; OrdList Instr
</span><a href="#local-6989586621682864988"><span class="hs-identifier hs-var hs-var">move_sp_down</span></a></span></span><span> </span><span id="local-6989586621682865033"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865033"><span class="hs-identifier hs-var">finalStack</span></a></span></span><span>
</span><span id="line-1862"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865034"><span class="hs-identifier hs-var">delta</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Int
</span><a href="GHC.CmmToAsm.PPC.Instr.html#stackFrameHeaderSize"><span class="hs-identifier hs-var">stackFrameHeaderSize</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1863"></span><span>                        </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#STU"><span class="hs-identifier hs-var">STU</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682864998"><span class="hs-identifier hs-var">spFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865034"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1864"></span><span>                              </span><span class="annot"><span class="annottext">Int -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#DELTA"><span class="hs-identifier hs-var">DELTA</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865034"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1865"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-1866"></span><span>               </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682865034"><span class="annot"><span class="annottext">delta :: Int
</span><a href="#local-6989586621682865034"><span class="hs-identifier hs-var hs-var">delta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621682865002"><span class="hs-identifier hs-var">stackDelta</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865033"><span class="hs-identifier hs-var">finalStack</span></a></span><span>
</span><span id="line-1867"></span><span>        </span><span id="local-6989586621682864990"><span class="annot"><span class="annottext">move_sp_up :: Int -&gt; OrdList Instr
</span><a href="#local-6989586621682864990"><span class="hs-identifier hs-var hs-var">move_sp_up</span></a></span></span><span> </span><span id="local-6989586621682865039"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865039"><span class="hs-identifier hs-var">finalStack</span></a></span></span><span>
</span><span id="line-1868"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865040"><span class="hs-identifier hs-var">delta</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Int
</span><a href="GHC.CmmToAsm.PPC.Instr.html#stackFrameHeaderSize"><span class="hs-identifier hs-var">stackFrameHeaderSize</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1869"></span><span>                        </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865040"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1870"></span><span>                              </span><span class="annot"><span class="annottext">Int -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#DELTA"><span class="hs-identifier hs-var">DELTA</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">]</span><span>
</span><span id="line-1871"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-1872"></span><span>               </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682865040"><span class="annot"><span class="annottext">delta :: Int
</span><a href="#local-6989586621682865040"><span class="hs-identifier hs-var hs-var">delta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621682865002"><span class="hs-identifier hs-var">stackDelta</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865039"><span class="hs-identifier hs-var">finalStack</span></a></span><span>
</span><span id="line-1873"></span><span>
</span><span id="line-1874"></span><span>        </span><span class="hs-comment">-- A NOP instruction is required after a call (bl instruction)</span><span>
</span><span id="line-1875"></span><span>        </span><span class="hs-comment">-- on AIX and 64-Bit Linux.</span><span>
</span><span id="line-1876"></span><span>        </span><span class="hs-comment">-- If the call is to a function with a different TOC (r2) the</span><span>
</span><span id="line-1877"></span><span>        </span><span class="hs-comment">-- link editor replaces the NOP instruction with a load of the TOC</span><span>
</span><span id="line-1878"></span><span>        </span><span class="hs-comment">-- from the stack to restore the TOC.</span><span>
</span><span id="line-1879"></span><span>        </span><span id="local-6989586621682864994"><span class="annot"><span class="annottext">maybeNOP :: OrdList Instr
</span><a href="#local-6989586621682864994"><span class="hs-identifier hs-var hs-var">maybeNOP</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="#local-6989586621682864964"><span class="hs-identifier hs-var">gcp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1880"></span><span>           </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP32ELF"><span class="hs-identifier hs-var">GCP32ELF</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-1881"></span><span>           </span><span class="hs-comment">-- See Section 3.9.4 of OpenPower ABI</span><span>
</span><span id="line-1882"></span><span>           </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCPAIX"><span class="hs-identifier hs-var">GCPAIX</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NOP"><span class="hs-identifier hs-var">NOP</span></a></span><span>
</span><span id="line-1883"></span><span>           </span><span class="hs-comment">-- See Section 3.5.11 of PPC64 ELF v1.9</span><span>
</span><span id="line-1884"></span><span>           </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NOP"><span class="hs-identifier hs-var">NOP</span></a></span><span>
</span><span id="line-1885"></span><span>           </span><span class="hs-comment">-- See Section 2.3.6 of PPC64 ELF v2</span><span>
</span><span id="line-1886"></span><span>           </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NOP"><span class="hs-identifier hs-var">NOP</span></a></span><span>
</span><span id="line-1887"></span><span>           </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; OrdList Instr
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;maybeNOP: Unknown PowerPC 64-bit ABI&quot;</span></span><span>
</span><span id="line-1888"></span><span>
</span><span id="line-1889"></span><span>        </span><span id="local-6989586621682864971"><span class="annot"><span class="annottext">passArguments :: [(CmmExpr, CmmType, ForeignHint)]
-&gt; [Reg]
-&gt; [Reg]
-&gt; Int
-&gt; OrdList Instr
-&gt; [Reg]
-&gt; NatM (Int, OrdList Instr, [Reg])
</span><a href="#local-6989586621682864971"><span class="hs-identifier hs-var hs-var">passArguments</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682865042"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865042"><span class="hs-identifier hs-var">stackOffset</span></a></span></span><span> </span><span id="local-6989586621682865043"><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865043"><span class="hs-identifier hs-var">accumCode</span></a></span></span><span> </span><span id="local-6989586621682865044"><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865044"><span class="hs-identifier hs-var">accumUsed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, OrdList Instr, [Reg]) -&gt; NatM (Int, OrdList Instr, [Reg])
forall a. a -&gt; NatM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865042"><span class="hs-identifier hs-var">stackOffset</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865043"><span class="hs-identifier hs-var">accumCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865044"><span class="hs-identifier hs-var">accumUsed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1890"></span><span>        </span><span class="annot"><a href="#local-6989586621682864971"><span class="hs-identifier hs-var">passArguments</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621682865045"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865045"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682865046"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865046"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ForeignHint
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682865047"><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
</span><a href="#local-6989586621682865047"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682865048"><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865048"><span class="hs-identifier hs-var">gprs</span></a></span></span><span> </span><span id="local-6989586621682865049"><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865049"><span class="hs-identifier hs-var">fprs</span></a></span></span><span> </span><span id="local-6989586621682865050"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865050"><span class="hs-identifier hs-var">stackOffset</span></a></span></span><span>
</span><span id="line-1891"></span><span>               </span><span id="local-6989586621682865051"><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865051"><span class="hs-identifier hs-var">accumCode</span></a></span></span><span> </span><span id="local-6989586621682865052"><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865052"><span class="hs-identifier hs-var">accumUsed</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier hs-var">isWord64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865046"><span class="hs-identifier hs-var">arg_ty</span></a></span><span>
</span><span id="line-1892"></span><span>                                     </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NCGConfig -&gt; Platform
</span><a href="GHC.CmmToAsm.Config.html#ncgPlatform"><span class="hs-identifier hs-var">ncgPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864963"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1893"></span><span>            </span><span class="hs-keyword">do</span><span>
</span><span id="line-1894"></span><span>                </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#RegCode64"><span class="hs-identifier hs-type">RegCode64</span></a></span><span> </span><span id="local-6989586621682865053"><span class="annot"><a href="#local-6989586621682865053"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682865054"><span class="annot"><a href="#local-6989586621682865054"><span class="hs-identifier hs-var">vr_hi</span></a></span></span><span> </span><span id="local-6989586621682865055"><span class="annot"><a href="#local-6989586621682865055"><span class="hs-identifier hs-var">vr_lo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (RegCode64 (OrdList Instr))
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#iselExpr64"><span class="hs-identifier hs-var">iselExpr64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865045"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1895"></span><span>
</span><span id="line-1896"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682864964"><span class="hs-identifier hs-type">gcp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1897"></span><span>                    </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCPAIX"><span class="hs-identifier hs-var">GCPAIX</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1898"></span><span>                        </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865056"><span class="annot"><span class="annottext">storeWord :: Reg -&gt; [Reg] -&gt; Int -&gt; Instr
</span><a href="#local-6989586621682865056"><span class="hs-identifier hs-var hs-var">storeWord</span></a></span></span><span> </span><span id="local-6989586621682865057"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865057"><span class="hs-identifier hs-var">vr</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682865058"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865058"><span class="hs-identifier hs-var">gpr</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Reg]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865058"><span class="hs-identifier hs-var">gpr</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865057"><span class="hs-identifier hs-var">vr</span></a></span><span>
</span><span id="line-1899"></span><span>                               </span><span class="annot"><a href="#local-6989586621682865056"><span class="hs-identifier hs-var">storeWord</span></a></span><span> </span><span id="local-6989586621682865059"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865059"><span class="hs-identifier hs-var">vr</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621682865060"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865060"><span class="hs-identifier hs-var">offset</span></a></span></span><span>
</span><span id="line-1900"></span><span>                                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865059"><span class="hs-identifier hs-var">vr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865060"><span class="hs-identifier hs-var">offset</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1901"></span><span>                           </span><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
-&gt; [Reg]
-&gt; [Reg]
-&gt; Int
-&gt; OrdList Instr
-&gt; [Reg]
-&gt; NatM (Int, OrdList Instr, [Reg])
</span><a href="#local-6989586621682864971"><span class="hs-identifier hs-var">passArguments</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
</span><a href="#local-6989586621682865047"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1902"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Reg] -&gt; [Reg]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865048"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1903"></span><span>                                         </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865049"><span class="hs-identifier hs-var">fprs</span></a></span><span>
</span><span id="line-1904"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865050"><span class="hs-identifier hs-var">stackOffset</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span>
</span><span id="line-1905"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865051"><span class="hs-identifier hs-var">accumCode</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865053"><span class="hs-identifier hs-var">code</span></a></span><span>
</span><span id="line-1906"></span><span>                                               </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; [Reg] -&gt; Int -&gt; Instr
</span><a href="#local-6989586621682865056"><span class="hs-identifier hs-var">storeWord</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865054"><span class="hs-identifier hs-var">vr_hi</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865048"><span class="hs-identifier hs-var">gprs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865050"><span class="hs-identifier hs-var">stackOffset</span></a></span><span>
</span><span id="line-1907"></span><span>                                               </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; [Reg] -&gt; Int -&gt; Instr
</span><a href="#local-6989586621682865056"><span class="hs-identifier hs-var">storeWord</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865055"><span class="hs-identifier hs-var">vr_lo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Reg] -&gt; [Reg]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865048"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865050"><span class="hs-identifier hs-var">stackOffset</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1908"></span><span>                                         </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Reg] -&gt; [Reg]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865048"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Reg] -&gt; [Reg] -&gt; [Reg]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865052"><span class="hs-identifier hs-var">accumUsed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1909"></span><span>                    </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP32ELF"><span class="hs-identifier hs-var">GCP32ELF</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1910"></span><span>                        </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865063"><span class="annot"><span class="annottext">stackOffset' :: Int
</span><a href="#local-6989586621682865063"><span class="hs-identifier hs-var hs-var">stackOffset'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="#local-6989586621682865004"><span class="hs-identifier hs-var">roundTo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865050"><span class="hs-identifier hs-var">stackOffset</span></a></span><span>
</span><span id="line-1911"></span><span>                               </span><span id="local-6989586621682865064"><span class="annot"><span class="annottext">stackCode :: OrdList Instr
</span><a href="#local-6989586621682865064"><span class="hs-identifier hs-var hs-var">stackCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865051"><span class="hs-identifier hs-var">accumCode</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865053"><span class="hs-identifier hs-var">code</span></a></span><span>
</span><span id="line-1912"></span><span>                                   </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865054"><span class="hs-identifier hs-var">vr_hi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865063"><span class="hs-identifier hs-var">stackOffset'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1913"></span><span>                                   </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865055"><span class="hs-identifier hs-var">vr_lo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865063"><span class="hs-identifier hs-var">stackOffset'</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1914"></span><span>                               </span><span id="local-6989586621682865065"><span class="annot"><span class="annottext">regCode :: Reg -&gt; Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682865065"><span class="hs-identifier hs-var hs-var">regCode</span></a></span></span><span> </span><span id="local-6989586621682865066"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865066"><span class="hs-identifier hs-var">hireg</span></a></span></span><span> </span><span id="local-6989586621682865067"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865067"><span class="hs-identifier hs-var">loreg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1915"></span><span>                                   </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865051"><span class="hs-identifier hs-var">accumCode</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865053"><span class="hs-identifier hs-var">code</span></a></span><span>
</span><span id="line-1916"></span><span>                                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865066"><span class="hs-identifier hs-var">hireg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865054"><span class="hs-identifier hs-var">vr_hi</span></a></span><span>
</span><span id="line-1917"></span><span>                                       </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865067"><span class="hs-identifier hs-var">loreg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865055"><span class="hs-identifier hs-var">vr_lo</span></a></span><span>
</span><span id="line-1918"></span><span>
</span><span id="line-1919"></span><span>                           </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865048"><span class="hs-identifier hs-var">gprs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1920"></span><span>                               </span><span id="local-6989586621682865068"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865068"><span class="hs-identifier hs-var">hireg</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682865069"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865069"><span class="hs-identifier hs-var">loreg</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682865070"><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865070"><span class="hs-identifier hs-var">regs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Bool
forall a. Integral a =&gt; a -&gt; Bool
</span><span class="hs-identifier hs-var">even</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Reg] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865048"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1921"></span><span>                                   </span><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
-&gt; [Reg]
-&gt; [Reg]
-&gt; Int
-&gt; OrdList Instr
-&gt; [Reg]
-&gt; NatM (Int, OrdList Instr, [Reg])
</span><a href="#local-6989586621682864971"><span class="hs-identifier hs-var">passArguments</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
</span><a href="#local-6989586621682865047"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865070"><span class="hs-identifier hs-var">regs</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865049"><span class="hs-identifier hs-var">fprs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865050"><span class="hs-identifier hs-var">stackOffset</span></a></span><span>
</span><span id="line-1922"></span><span>                                                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682865065"><span class="hs-identifier hs-var">regCode</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865068"><span class="hs-identifier hs-var">hireg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865069"><span class="hs-identifier hs-var">loreg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865068"><span class="hs-identifier hs-var">hireg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; [Reg] -&gt; [Reg]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865069"><span class="hs-identifier hs-var">loreg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; [Reg] -&gt; [Reg]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865052"><span class="hs-identifier hs-var">accumUsed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1923"></span><span>                               </span><span id="local-6989586621682865073"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865073"><span class="hs-identifier hs-var">_skipped</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682865074"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865074"><span class="hs-identifier hs-var">hireg</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682865075"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865075"><span class="hs-identifier hs-var">loreg</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682865076"><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865076"><span class="hs-identifier hs-var">regs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1924"></span><span>                                   </span><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
-&gt; [Reg]
-&gt; [Reg]
-&gt; Int
-&gt; OrdList Instr
-&gt; [Reg]
-&gt; NatM (Int, OrdList Instr, [Reg])
</span><a href="#local-6989586621682864971"><span class="hs-identifier hs-var">passArguments</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
</span><a href="#local-6989586621682865047"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865076"><span class="hs-identifier hs-var">regs</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865049"><span class="hs-identifier hs-var">fprs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865050"><span class="hs-identifier hs-var">stackOffset</span></a></span><span>
</span><span id="line-1925"></span><span>                                                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682865065"><span class="hs-identifier hs-var">regCode</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865074"><span class="hs-identifier hs-var">hireg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865075"><span class="hs-identifier hs-var">loreg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865074"><span class="hs-identifier hs-var">hireg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; [Reg] -&gt; [Reg]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865075"><span class="hs-identifier hs-var">loreg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; [Reg] -&gt; [Reg]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865052"><span class="hs-identifier hs-var">accumUsed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1926"></span><span>                               </span><span class="annot"><span class="annottext">[Reg]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- only one or no regs left</span><span>
</span><span id="line-1927"></span><span>                                   </span><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
-&gt; [Reg]
-&gt; [Reg]
-&gt; Int
-&gt; OrdList Instr
-&gt; [Reg]
-&gt; NatM (Int, OrdList Instr, [Reg])
</span><a href="#local-6989586621682864971"><span class="hs-identifier hs-var">passArguments</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
</span><a href="#local-6989586621682865047"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865049"><span class="hs-identifier hs-var">fprs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865063"><span class="hs-identifier hs-var">stackOffset'</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span>
</span><span id="line-1928"></span><span>                                                 </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865064"><span class="hs-identifier hs-var">stackCode</span></a></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865052"><span class="hs-identifier hs-var">accumUsed</span></a></span><span>
</span><span id="line-1929"></span><span>                    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM (Int, OrdList Instr, [Reg])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;passArguments: 32 bit code&quot;</span></span><span>
</span><span id="line-1930"></span><span>
</span><span id="line-1931"></span><span>        </span><span class="annot"><a href="#local-6989586621682864971"><span class="hs-identifier hs-var">passArguments</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621682865077"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865077"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682865078"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682865079"><span class="annot"><span class="annottext">ForeignHint
</span><a href="#local-6989586621682865079"><span class="hs-identifier hs-var">hint</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682865080"><span class="annot"><span class="annottext">[(CmmExpr, CmmType, ForeignHint)]
</span><a href="#local-6989586621682865080"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682865081"><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span></span><span> </span><span id="local-6989586621682865082"><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865082"><span class="hs-identifier hs-var">fprs</span></a></span></span><span> </span><span id="local-6989586621682865083"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865083"><span class="hs-identifier hs-var">stackOffset</span></a></span></span><span> </span><span id="local-6989586621682865084"><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865084"><span class="hs-identifier hs-var">accumCode</span></a></span></span><span> </span><span id="local-6989586621682865085"><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865085"><span class="hs-identifier hs-var">accumUsed</span></a></span></span><span>
</span><span id="line-1932"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682865086"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865086"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865087"><span class="hs-identifier hs-var">regs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1933"></span><span>                </span><span id="local-6989586621682865088"><span class="annot"><a href="#local-6989586621682865088"><span class="hs-identifier hs-var">register</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getRegister"><span class="hs-identifier hs-var">getRegister</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865089"><span class="hs-identifier hs-var">arg_pro</span></a></span><span>
</span><span id="line-1934"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865090"><span class="annot"><a href="#local-6989586621682865090"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Register
</span><a href="#local-6989586621682865088"><span class="hs-identifier hs-var">register</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1935"></span><span>                            </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Fixed"><span class="hs-identifier hs-type">Fixed</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682865091"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865091"><span class="hs-identifier hs-var">freg</span></a></span></span><span> </span><span id="local-6989586621682865092"><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865092"><span class="hs-identifier hs-var">fcode</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865092"><span class="hs-identifier hs-var">fcode</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865086"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865091"><span class="hs-identifier hs-var">freg</span></a></span><span>
</span><span id="line-1936"></span><span>                            </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682865093"><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682865093"><span class="hs-identifier hs-var">acode</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682865093"><span class="hs-identifier hs-var">acode</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865086"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-1937"></span><span>                    </span><span id="local-6989586621682865094"><span class="annot"><a href="#local-6989586621682865094"><span class="hs-identifier hs-var hs-var">stackOffsetRes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="#local-6989586621682864964"><span class="hs-identifier hs-var">gcp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1938"></span><span>                                     </span><span class="hs-comment">-- The PowerOpen ABI requires that we</span><span>
</span><span id="line-1939"></span><span>                                     </span><span class="hs-comment">-- reserve stack slots for register</span><span>
</span><span id="line-1940"></span><span>                                     </span><span class="hs-comment">-- parameters</span><span>
</span><span id="line-1941"></span><span>                                     </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCPAIX"><span class="hs-identifier hs-var">GCPAIX</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865083"><span class="hs-identifier hs-var">stackOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865095"><span class="hs-identifier hs-var">stackBytes</span></a></span><span>
</span><span id="line-1942"></span><span>                                     </span><span class="hs-comment">-- ... the SysV ABI 32-bit doesn't.</span><span>
</span><span id="line-1943"></span><span>                                     </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP32ELF"><span class="hs-identifier hs-var">GCP32ELF</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865083"><span class="hs-identifier hs-var">stackOffset</span></a></span><span>
</span><span id="line-1944"></span><span>                                     </span><span class="hs-comment">-- ... but SysV ABI 64-bit does.</span><span>
</span><span id="line-1945"></span><span>                                     </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865083"><span class="hs-identifier hs-var">stackOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865095"><span class="hs-identifier hs-var">stackBytes</span></a></span><span>
</span><span id="line-1946"></span><span>                </span><span class="annot"><a href="#local-6989586621682864971"><span class="hs-identifier hs-type">passArguments</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865080"><span class="hs-identifier hs-type">args</span></a></span><span>
</span><span id="line-1947"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">drop</span></span><span> </span><span class="annot"><a href="#local-6989586621682865096"><span class="hs-identifier hs-type">nGprs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865081"><span class="hs-identifier hs-type">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1948"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">drop</span></span><span> </span><span class="annot"><a href="#local-6989586621682865097"><span class="hs-identifier hs-type">nFprs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865082"><span class="hs-identifier hs-type">fprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1949"></span><span>                              </span><span class="annot"><a href="#local-6989586621682865094"><span class="hs-identifier hs-type">stackOffsetRes</span></a></span><span>
</span><span id="line-1950"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682865084"><span class="hs-identifier hs-type">accumCode</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865090"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1951"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682865086"><span class="hs-identifier hs-type">reg</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621682865085"><span class="hs-identifier hs-type">accumUsed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1952"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1953"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621682865098"><span class="annot"><a href="#local-6989586621682865098"><span class="hs-identifier hs-var">vr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865099"><span class="annot"><a href="#local-6989586621682865099"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865089"><span class="hs-identifier hs-var">arg_pro</span></a></span><span>
</span><span id="line-1954"></span><span>                </span><span class="annot"><a href="#local-6989586621682864971"><span class="hs-identifier hs-type">passArguments</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865080"><span class="hs-identifier hs-type">args</span></a></span><span>
</span><span id="line-1955"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">drop</span></span><span> </span><span class="annot"><a href="#local-6989586621682865096"><span class="hs-identifier hs-type">nGprs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865081"><span class="hs-identifier hs-type">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1956"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">drop</span></span><span> </span><span class="annot"><a href="#local-6989586621682865097"><span class="hs-identifier hs-type">nFprs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865082"><span class="hs-identifier hs-type">fprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1957"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682865100"><span class="hs-identifier hs-type">stackOffset'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">+</span></span><span> </span><span class="annot"><a href="#local-6989586621682865095"><span class="hs-identifier hs-type">stackBytes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1958"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682865084"><span class="hs-identifier hs-type">accumCode</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-type">`appOL`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865099"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-1959"></span><span>                                         </span><span class="annot"><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-type">`snocOL`</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-type">ST</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865101"><span class="hs-identifier hs-type">format_pro</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865098"><span class="hs-identifier hs-type">vr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865102"><span class="hs-identifier hs-type">stackSlot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1960"></span><span>                              </span><span class="annot"><a href="#local-6989586621682865085"><span class="hs-identifier hs-type">accumUsed</span></a></span><span>
</span><span id="line-1961"></span><span>            </span><span class="hs-keyword">where</span><span>
</span><span id="line-1962"></span><span>                </span><span id="local-6989586621682865089"><span class="annot"><span class="annottext">arg_pro :: CmmExpr
</span><a href="#local-6989586621682865089"><span class="hs-identifier hs-var hs-var">arg_pro</span></a></span></span><span>
</span><span id="line-1963"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isBitsType"><span class="hs-identifier hs-var">isBitsType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MachOp -&gt; [CmmExpr] -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-var">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; MachOp
</span><a href="#local-6989586621682865104"><span class="hs-identifier hs-var">conv_op</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmType -&gt; Width
</span><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier hs-var">typeWidth</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#wordWidth"><span class="hs-identifier hs-var">wordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865077"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1964"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865077"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1965"></span><span>                </span><span id="local-6989586621682865101"><span class="annot"><span class="annottext">format_pro :: Format
</span><a href="#local-6989586621682865101"><span class="hs-identifier hs-var hs-var">format_pro</span></a></span></span><span>
</span><span id="line-1966"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isBitsType"><span class="hs-identifier hs-var">isBitsType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#wordWidth"><span class="hs-identifier hs-var">wordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1967"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-1968"></span><span>                </span><span id="local-6989586621682865104"><span class="annot"><span class="annottext">conv_op :: Width -&gt; Width -&gt; MachOp
</span><a href="#local-6989586621682865104"><span class="hs-identifier hs-var hs-var">conv_op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><a href="#local-6989586621682865079"><span class="hs-identifier hs-var">hint</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1969"></span><span>                            </span><span class="annot"><span class="annottext">ForeignHint
</span><a href="GHC.Cmm.Type.html#SignedHint"><span class="hs-identifier hs-var">SignedHint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; MachOp
</span><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-var">MO_SS_Conv</span></a></span><span>
</span><span id="line-1970"></span><span>                            </span><span class="annot"><span class="annottext">ForeignHint
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; MachOp
</span><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-var">MO_UU_Conv</span></a></span><span>
</span><span id="line-1971"></span><span>
</span><span id="line-1972"></span><span>                </span><span id="local-6989586621682865100"><span class="annot"><span class="annottext">stackOffset' :: Int
</span><a href="#local-6989586621682865100"><span class="hs-identifier hs-var hs-var">stackOffset'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="#local-6989586621682864964"><span class="hs-identifier hs-var">gcp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1973"></span><span>                               </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCPAIX"><span class="hs-identifier hs-var">GCPAIX</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1974"></span><span>                                   </span><span class="hs-comment">-- The 32bit PowerOPEN ABI is happy with</span><span>
</span><span id="line-1975"></span><span>                                   </span><span class="hs-comment">-- 32bit-alignment ...</span><span>
</span><span id="line-1976"></span><span>                                   </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865083"><span class="hs-identifier hs-var">stackOffset</span></a></span><span>
</span><span id="line-1977"></span><span>                               </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP32ELF"><span class="hs-identifier hs-var">GCP32ELF</span></a></span><span>
</span><span id="line-1978"></span><span>                                   </span><span class="hs-comment">-- ... the SysV ABI requires 8-byte</span><span>
</span><span id="line-1979"></span><span>                                   </span><span class="hs-comment">-- alignment for doubles.</span><span>
</span><span id="line-1980"></span><span>                                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloatType"><span class="hs-identifier hs-var">isFloatType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Width
</span><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier hs-var">typeWidth</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1981"></span><span>                                   </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="#local-6989586621682865004"><span class="hs-identifier hs-var">roundTo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865083"><span class="hs-identifier hs-var">stackOffset</span></a></span><span>
</span><span id="line-1982"></span><span>                                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1983"></span><span>                                   </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865083"><span class="hs-identifier hs-var">stackOffset</span></a></span><span>
</span><span id="line-1984"></span><span>                               </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1985"></span><span>                                   </span><span class="hs-comment">-- Everything on the stack is mapped to</span><span>
</span><span id="line-1986"></span><span>                                   </span><span class="hs-comment">-- 8-byte aligned doublewords</span><span>
</span><span id="line-1987"></span><span>                                   </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865083"><span class="hs-identifier hs-var">stackOffset</span></a></span><span>
</span><span id="line-1988"></span><span>                </span><span id="local-6989586621682865106"><span class="annot"><span class="annottext">stackOffset'' :: Int
</span><a href="#local-6989586621682865106"><span class="hs-identifier hs-var hs-var">stackOffset''</span></a></span></span><span>
</span><span id="line-1989"></span><span>                     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloatType"><span class="hs-identifier hs-var">isFloatType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Width
</span><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier hs-var">typeWidth</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1990"></span><span>                         </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="#local-6989586621682864964"><span class="hs-identifier hs-var">gcp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1991"></span><span>                         </span><span class="hs-comment">-- The ELF v1 ABI Section 3.2.3 requires:</span><span>
</span><span id="line-1992"></span><span>                         </span><span class="hs-comment">-- &quot;Single precision floating point values</span><span>
</span><span id="line-1993"></span><span>                         </span><span class="hs-comment">-- are mapped to the second word in a single</span><span>
</span><span id="line-1994"></span><span>                         </span><span class="hs-comment">-- doubleword&quot;</span><span>
</span><span id="line-1995"></span><span>                         </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865100"><span class="hs-identifier hs-var">stackOffset'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>
</span><span id="line-1996"></span><span>                         </span><span class="hs-comment">-- ELF v2 ABI Revision 1.5 Section 2.2.3.3. requires</span><span>
</span><span id="line-1997"></span><span>                         </span><span class="hs-comment">-- a single-precision floating-point value</span><span>
</span><span id="line-1998"></span><span>                         </span><span class="hs-comment">-- to be mapped to the least-significant</span><span>
</span><span id="line-1999"></span><span>                         </span><span class="hs-comment">-- word in a single doubleword.</span><span>
</span><span id="line-2000"></span><span>                         </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; ByteOrder
</span><a href="GHC.Platform.html#platformByteOrder"><span class="hs-identifier hs-var">platformByteOrder</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2001"></span><span>                                       </span><span class="annot"><span class="annottext">ByteOrder
</span><span class="hs-identifier hs-var">BigEndian</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865100"><span class="hs-identifier hs-var">stackOffset'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>
</span><span id="line-2002"></span><span>                                       </span><span class="annot"><span class="annottext">ByteOrder
</span><span class="hs-identifier hs-var">LittleEndian</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865100"><span class="hs-identifier hs-var">stackOffset'</span></a></span><span>
</span><span id="line-2003"></span><span>                         </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865100"><span class="hs-identifier hs-var">stackOffset'</span></a></span><span>
</span><span id="line-2004"></span><span>                     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865100"><span class="hs-identifier hs-var">stackOffset'</span></a></span><span>
</span><span id="line-2005"></span><span>
</span><span id="line-2006"></span><span>                </span><span id="local-6989586621682865102"><span class="annot"><span class="annottext">stackSlot :: AddrMode
</span><a href="#local-6989586621682865102"><span class="hs-identifier hs-var hs-var">stackSlot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#sp"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865106"><span class="hs-identifier hs-var">stackOffset''</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2007"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621682865096"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865096"><span class="hs-identifier hs-var">nGprs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865097"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865097"><span class="hs-identifier hs-var">nFprs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865095"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865095"><span class="hs-identifier hs-var">stackBytes</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865087"><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865087"><span class="hs-identifier hs-var">regs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2008"></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="#local-6989586621682864964"><span class="hs-identifier hs-var">gcp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2009"></span><span>                      </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCPAIX"><span class="hs-identifier hs-var">GCPAIX</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2010"></span><span>                          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2011"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II8"><span class="hs-identifier hs-var">II8</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2012"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II16"><span class="hs-identifier hs-var">II16</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2013"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2014"></span><span>                          </span><span class="hs-comment">-- The PowerOpen ABI requires that we skip a</span><span>
</span><span id="line-2015"></span><span>                          </span><span class="hs-comment">-- corresponding number of GPRs when we use</span><span>
</span><span id="line-2016"></span><span>                          </span><span class="hs-comment">-- the FPRs.</span><span>
</span><span id="line-2017"></span><span>                          </span><span class="hs-comment">--</span><span>
</span><span id="line-2018"></span><span>                          </span><span class="hs-comment">-- E.g. for a `double` two GPRs are skipped,</span><span>
</span><span id="line-2019"></span><span>                          </span><span class="hs-comment">-- whereas for a `float` one GPR is skipped</span><span>
</span><span id="line-2020"></span><span>                          </span><span class="hs-comment">-- when parameters are assigned to</span><span>
</span><span id="line-2021"></span><span>                          </span><span class="hs-comment">-- registers.</span><span>
</span><span id="line-2022"></span><span>                          </span><span class="hs-comment">--</span><span>
</span><span id="line-2023"></span><span>                          </span><span class="hs-comment">-- The PowerOpen ABI specification can be found at</span><span>
</span><span id="line-2024"></span><span>                          </span><span class="hs-comment">-- ftp://www.sourceware.org/pub/binutils/ppc-docs/ppc-poweropen/</span><span>
</span><span id="line-2025"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF32"><span class="hs-identifier hs-var">FF32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865082"><span class="hs-identifier hs-var">fprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2026"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-var">FF64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865082"><span class="hs-identifier hs-var">fprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2027"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Int, Int, Int, [Reg])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall' passArguments II64&quot;</span></span><span>
</span><span id="line-2028"></span><span>                          </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#VecFormat"><span class="hs-identifier hs-type">VecFormat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-2029"></span><span>                               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Int, Int, Int, [Reg])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall' passArguments vector format&quot;</span></span><span>
</span><span id="line-2030"></span><span>
</span><span id="line-2031"></span><span>                      </span><span class="annot"><span class="annottext">GenCCallPlatform
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP32ELF"><span class="hs-identifier hs-var">GCP32ELF</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2032"></span><span>                          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2033"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II8"><span class="hs-identifier hs-var">II8</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2034"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II16"><span class="hs-identifier hs-var">II16</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2035"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2036"></span><span>                          </span><span class="hs-comment">-- ... the SysV ABI doesn't.</span><span>
</span><span id="line-2037"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF32"><span class="hs-identifier hs-var">FF32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865082"><span class="hs-identifier hs-var">fprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2038"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-var">FF64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865082"><span class="hs-identifier hs-var">fprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2039"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Int, Int, Int, [Reg])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall' passArguments II64&quot;</span></span><span>
</span><span id="line-2040"></span><span>                          </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#VecFormat"><span class="hs-identifier hs-type">VecFormat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-2041"></span><span>                               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Int, Int, Int, [Reg])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall' passArguments vector format&quot;</span></span><span>
</span><span id="line-2042"></span><span>
</span><span id="line-2043"></span><span>                      </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#GCP64ELF"><span class="hs-identifier hs-type">GCP64ELF</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2044"></span><span>                          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#cmmTypeFormat"><span class="hs-identifier hs-var">cmmTypeFormat</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865078"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2045"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II8"><span class="hs-identifier hs-var">II8</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2046"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II16"><span class="hs-identifier hs-var">II16</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2047"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2048"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865081"><span class="hs-identifier hs-var">gprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2049"></span><span>                          </span><span class="hs-comment">-- The ELFv1 ABI requires that we skip a</span><span>
</span><span id="line-2050"></span><span>                          </span><span class="hs-comment">-- corresponding number of GPRs when we use</span><span>
</span><span id="line-2051"></span><span>                          </span><span class="hs-comment">-- the FPRs.</span><span>
</span><span id="line-2052"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF32"><span class="hs-identifier hs-var">FF32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865082"><span class="hs-identifier hs-var">fprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2053"></span><span>                          </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-var">FF64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Reg]
</span><a href="#local-6989586621682865082"><span class="hs-identifier hs-var">fprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2054"></span><span>                          </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#VecFormat"><span class="hs-identifier hs-type">VecFormat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-2055"></span><span>                               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Int, Int, Int, [Reg])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall' passArguments vector format&quot;</span></span><span>
</span><span id="line-2056"></span><span>
</span><span id="line-2057"></span><span>        </span><span id="local-6989586621682864991"><span class="annot"><span class="annottext">moveResult :: Bool -&gt; OrdList Instr
</span><a href="#local-6989586621682864991"><span class="hs-identifier hs-var hs-var">moveResult</span></a></span></span><span> </span><span id="local-6989586621682865111"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865111"><span class="hs-identifier hs-var">reduceToFF32</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2058"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621682864966"><span class="hs-identifier hs-var">dest_regs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2059"></span><span>                </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-2060"></span><span>                </span><span class="hs-special">[</span><span id="local-6989586621682865112"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682865112"><span class="hs-identifier hs-var">dest</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-2061"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865111"><span class="hs-identifier hs-var">reduceToFF32</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloat32"><span class="hs-identifier hs-var">isFloat32</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865114"><span class="hs-identifier hs-var">rep</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FRSP"><span class="hs-identifier hs-var">FRSP</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865115"><span class="hs-identifier hs-var">r_dest</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#f1"><span class="hs-identifier hs-var">f1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2062"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloat32"><span class="hs-identifier hs-var">isFloat32</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865114"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloat64"><span class="hs-identifier hs-var">isFloat64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865114"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865115"><span class="hs-identifier hs-var">r_dest</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#f1"><span class="hs-identifier hs-var">f1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2063"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier hs-var">isWord64</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621682865114"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682864977"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2064"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg
</span><a href="GHC.Platform.Reg.html#getHiVRegFromLo"><span class="hs-identifier hs-var">getHiVRegFromLo</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865115"><span class="hs-identifier hs-var">r_dest</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r3"><span class="hs-identifier hs-var">r3</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2065"></span><span>                                </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865115"><span class="hs-identifier hs-var">r_dest</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r4"><span class="hs-identifier hs-var">r4</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2066"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865115"><span class="hs-identifier hs-var">r_dest</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="GHC.CmmToAsm.PPC.Regs.html#r3"><span class="hs-identifier hs-var">r3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2067"></span><span>                    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682865114"><span class="annot"><span class="annottext">rep :: CmmType
</span><a href="#local-6989586621682865114"><span class="hs-identifier hs-var hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; CmmType
</span><a href="GHC.Cmm.Reg.html#cmmRegType"><span class="hs-identifier hs-var">cmmRegType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682865112"><span class="hs-identifier hs-var">dest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2068"></span><span>                          </span><span id="local-6989586621682865115"><span class="annot"><span class="annottext">r_dest :: Reg
</span><a href="#local-6989586621682865115"><span class="hs-identifier hs-var hs-var">r_dest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; Reg
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getLocalRegReg"><span class="hs-identifier hs-var">getLocalRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621682865112"><span class="hs-identifier hs-var">dest</span></a></span><span>
</span><span id="line-2069"></span><span>                </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; OrdList Instr
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCCall' moveResult: Bad dest_regs&quot;</span></span><span>
</span><span id="line-2070"></span><span>
</span><span id="line-2071"></span><span>        </span><span id="local-6989586621682864986"><span class="annot"><span class="annottext">outOfLineMachOp :: CallishMachOp -&gt; NatM (Either CLabel CmmExpr, Bool)
</span><a href="#local-6989586621682864986"><span class="hs-identifier hs-var hs-var">outOfLineMachOp</span></a></span></span><span> </span><span id="local-6989586621682865120"><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621682865120"><span class="hs-identifier hs-var">mop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2072"></span><span>            </span><span class="hs-keyword">do</span><span>
</span><span id="line-2073"></span><span>                </span><span id="local-6989586621682865121"><span class="annot"><a href="#local-6989586621682865121"><span class="hs-identifier hs-var">mopExpr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NCGConfig -&gt; ReferenceKind -&gt; CLabel -&gt; NatM CmmExpr
forall (m :: * -&gt; *).
CmmMakeDynamicReferenceM m =&gt;
NCGConfig -&gt; ReferenceKind -&gt; CLabel -&gt; m CmmExpr
</span><a href="GHC.CmmToAsm.PIC.html#cmmMakeDynamicReference"><span class="hs-identifier hs-var">cmmMakeDynamicReference</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682864963"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceKind
</span><a href="GHC.CmmToAsm.PIC.html#CallReference"><span class="hs-identifier hs-var">CallReference</span></a></span><span> </span><span class="annot"><span class="annottext">(CLabel -&gt; NatM CmmExpr) -&gt; CLabel -&gt; NatM CmmExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2074"></span><span>                              </span><span class="annot"><span class="annottext">FastString -&gt; ForeignLabelSource -&gt; FunctionOrData -&gt; CLabel
</span><a href="GHC.Cmm.CLabel.html#mkForeignLabel"><span class="hs-identifier hs-var">mkForeignLabel</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682865124"><span class="hs-identifier hs-var">functionName</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLabelSource
</span><a href="GHC.Cmm.CLabel.html#ForeignLabelInThisPackage"><span class="hs-identifier hs-var">ForeignLabelInThisPackage</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionOrData
</span><a href="GHC.Types.Basic.html#IsFunction"><span class="hs-identifier hs-var">IsFunction</span></a></span><span>
</span><span id="line-2075"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865127"><span class="annot"><a href="#local-6989586621682865127"><span class="hs-identifier hs-var hs-var">mopLabelOrExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865121"><span class="hs-identifier hs-var">mopExpr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2076"></span><span>                        </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-type">CmmLabel</span></a></span><span> </span><span id="local-6989586621682865128"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865128"><span class="hs-identifier hs-var">lbl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; Either CLabel CmmExpr
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865128"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-2077"></span><span>                        </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; Either CLabel CmmExpr
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865121"><span class="hs-identifier hs-var">mopExpr</span></a></span><span>
</span><span id="line-2078"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682865127"><span class="hs-identifier hs-type">mopLabelOrExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682865129"><span class="hs-identifier hs-type">reduce</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2079"></span><span>            </span><span class="hs-keyword">where</span><span>
</span><span id="line-2080"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621682865124"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682865124"><span class="hs-identifier hs-var">functionName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865129"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865129"><span class="hs-identifier hs-var">reduce</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621682865120"><span class="hs-identifier hs-var">mop</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2081"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Exp"><span class="hs-identifier hs-var">MO_F32_Exp</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2082"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_ExpM1"><span class="hs-identifier hs-var">MO_F32_ExpM1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expm1&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2083"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Log"><span class="hs-identifier hs-var">MO_F32_Log</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;log&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2084"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Log1P"><span class="hs-identifier hs-var">MO_F32_Log1P</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;log1p&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2085"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Sqrt"><span class="hs-identifier hs-var">MO_F32_Sqrt</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sqrt&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2086"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Fabs"><span class="hs-identifier hs-var">MO_F32_Fabs</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2087"></span><span>
</span><span id="line-2088"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Sin"><span class="hs-identifier hs-var">MO_F32_Sin</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sin&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2089"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Cos"><span class="hs-identifier hs-var">MO_F32_Cos</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cos&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2090"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Tan"><span class="hs-identifier hs-var">MO_F32_Tan</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tan&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2091"></span><span>
</span><span id="line-2092"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Asin"><span class="hs-identifier hs-var">MO_F32_Asin</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asin&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2093"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Acos"><span class="hs-identifier hs-var">MO_F32_Acos</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acos&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2094"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Atan"><span class="hs-identifier hs-var">MO_F32_Atan</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;atan&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2095"></span><span>
</span><span id="line-2096"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Sinh"><span class="hs-identifier hs-var">MO_F32_Sinh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sinh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2097"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Cosh"><span class="hs-identifier hs-var">MO_F32_Cosh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cosh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2098"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Tanh"><span class="hs-identifier hs-var">MO_F32_Tanh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tanh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2099"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Pwr"><span class="hs-identifier hs-var">MO_F32_Pwr</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pow&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2100"></span><span>
</span><span id="line-2101"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Asinh"><span class="hs-identifier hs-var">MO_F32_Asinh</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asinh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2102"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Acosh"><span class="hs-identifier hs-var">MO_F32_Acosh</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acosh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2103"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Atanh"><span class="hs-identifier hs-var">MO_F32_Atanh</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;atanh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2104"></span><span>
</span><span id="line-2105"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Exp"><span class="hs-identifier hs-var">MO_F64_Exp</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2106"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_ExpM1"><span class="hs-identifier hs-var">MO_F64_ExpM1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expm1&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2107"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Log"><span class="hs-identifier hs-var">MO_F64_Log</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;log&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2108"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Log1P"><span class="hs-identifier hs-var">MO_F64_Log1P</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;log1p&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2109"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Sqrt"><span class="hs-identifier hs-var">MO_F64_Sqrt</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sqrt&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2110"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Fabs"><span class="hs-identifier hs-var">MO_F64_Fabs</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2111"></span><span>
</span><span id="line-2112"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Sin"><span class="hs-identifier hs-var">MO_F64_Sin</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sin&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2113"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Cos"><span class="hs-identifier hs-var">MO_F64_Cos</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cos&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2114"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Tan"><span class="hs-identifier hs-var">MO_F64_Tan</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tan&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2115"></span><span>
</span><span id="line-2116"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Asin"><span class="hs-identifier hs-var">MO_F64_Asin</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asin&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2117"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Acos"><span class="hs-identifier hs-var">MO_F64_Acos</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acos&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2118"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Atan"><span class="hs-identifier hs-var">MO_F64_Atan</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;atan&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2119"></span><span>
</span><span id="line-2120"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Sinh"><span class="hs-identifier hs-var">MO_F64_Sinh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sinh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2121"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Cosh"><span class="hs-identifier hs-var">MO_F64_Cosh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cosh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2122"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Tanh"><span class="hs-identifier hs-var">MO_F64_Tanh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tanh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2123"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Pwr"><span class="hs-identifier hs-var">MO_F64_Pwr</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pow&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2124"></span><span>
</span><span id="line-2125"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Asinh"><span class="hs-identifier hs-var">MO_F64_Asinh</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asinh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2126"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Acosh"><span class="hs-identifier hs-var">MO_F64_Acosh</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acosh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2127"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Atanh"><span class="hs-identifier hs-var">MO_F64_Atanh</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;atanh&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2128"></span><span>
</span><span id="line-2129"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_ToI"><span class="hs-identifier hs-var">MO_I64_ToI</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_int64ToInt&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2130"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_FromI"><span class="hs-identifier hs-var">MO_I64_FromI</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_intToInt64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2131"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_ToW"><span class="hs-identifier hs-var">MO_W64_ToW</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_word64ToWord&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2132"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_FromW"><span class="hs-identifier hs-var">MO_W64_FromW</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_wordToWord64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2133"></span><span>
</span><span id="line-2134"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Neg"><span class="hs-identifier hs-var">MO_x64_Neg</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_neg64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2135"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Add"><span class="hs-identifier hs-var">MO_x64_Add</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_add64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2136"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Sub"><span class="hs-identifier hs-var">MO_x64_Sub</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_sub64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2137"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Mul"><span class="hs-identifier hs-var">MO_x64_Mul</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_mul64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2138"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Quot"><span class="hs-identifier hs-var">MO_I64_Quot</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_quotInt64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2139"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Rem"><span class="hs-identifier hs-var">MO_I64_Rem</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_remInt64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2140"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Quot"><span class="hs-identifier hs-var">MO_W64_Quot</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_quotWord64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2141"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Rem"><span class="hs-identifier hs-var">MO_W64_Rem</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_remWord64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2142"></span><span>
</span><span id="line-2143"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_And"><span class="hs-identifier hs-var">MO_x64_And</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_and64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2144"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Or"><span class="hs-identifier hs-var">MO_x64_Or</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_or64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2145"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Xor"><span class="hs-identifier hs-var">MO_x64_Xor</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_xor64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2146"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Not"><span class="hs-identifier hs-var">MO_x64_Not</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_not64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2147"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Shl"><span class="hs-identifier hs-var">MO_x64_Shl</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_uncheckedShiftL64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2148"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Shr"><span class="hs-identifier hs-var">MO_I64_Shr</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_uncheckedIShiftRA64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2149"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Shr"><span class="hs-identifier hs-var">MO_W64_Shr</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_uncheckedShiftRL64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2150"></span><span>
</span><span id="line-2151"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Eq"><span class="hs-identifier hs-var">MO_x64_Eq</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_eq64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2152"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Ne"><span class="hs-identifier hs-var">MO_x64_Ne</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_ne64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2153"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Ge"><span class="hs-identifier hs-var">MO_I64_Ge</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_geInt64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2154"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Gt"><span class="hs-identifier hs-var">MO_I64_Gt</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_gtInt64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2155"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Le"><span class="hs-identifier hs-var">MO_I64_Le</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_leInt64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2156"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Lt"><span class="hs-identifier hs-var">MO_I64_Lt</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_ltInt64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2157"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Ge"><span class="hs-identifier hs-var">MO_W64_Ge</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_geWord64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2158"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Gt"><span class="hs-identifier hs-var">MO_W64_Gt</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_gtWord64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2159"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Le"><span class="hs-identifier hs-var">MO_W64_Le</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_leWord64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2160"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Lt"><span class="hs-identifier hs-var">MO_W64_Lt</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_ltWord64&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2161"></span><span>
</span><span id="line-2162"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UF_Conv"><span class="hs-identifier hs-type">MO_UF_Conv</span></a></span><span> </span><span id="local-6989586621682865197"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865197"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; FastString
</span><a href="GHC.CmmToAsm.CPrim.html#word2FloatLabel"><span class="hs-identifier hs-var">word2FloatLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865197"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2163"></span><span>
</span><span id="line-2164"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Memcpy"><span class="hs-identifier hs-type">MO_Memcpy</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;memcpy&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2165"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Memset"><span class="hs-identifier hs-type">MO_Memset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;memset&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2166"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Memmove"><span class="hs-identifier hs-type">MO_Memmove</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;memmove&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2167"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Memcmp"><span class="hs-identifier hs-type">MO_Memcmp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;memcmp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2168"></span><span>
</span><span id="line-2169"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_SuspendThread"><span class="hs-identifier hs-var">MO_SuspendThread</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;suspendThread&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2170"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_ResumeThread"><span class="hs-identifier hs-var">MO_ResumeThread</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;resumeThread&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2171"></span><span>
</span><span id="line-2172"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_BSwap"><span class="hs-identifier hs-type">MO_BSwap</span></a></span><span> </span><span id="local-6989586621682865206"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865206"><span class="hs-identifier hs-var">w</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; FastString
</span><a href="GHC.CmmToAsm.CPrim.html#bSwapLabel"><span class="hs-identifier hs-var">bSwapLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865206"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2173"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_BRev"><span class="hs-identifier hs-type">MO_BRev</span></a></span><span> </span><span id="local-6989586621682865209"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865209"><span class="hs-identifier hs-var">w</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; FastString
</span><a href="GHC.CmmToAsm.CPrim.html#bRevLabel"><span class="hs-identifier hs-var">bRevLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865209"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2174"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_PopCnt"><span class="hs-identifier hs-type">MO_PopCnt</span></a></span><span> </span><span id="local-6989586621682865212"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865212"><span class="hs-identifier hs-var">w</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; FastString
</span><a href="GHC.CmmToAsm.CPrim.html#popCntLabel"><span class="hs-identifier hs-var">popCntLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865212"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2175"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Pdep"><span class="hs-identifier hs-type">MO_Pdep</span></a></span><span> </span><span id="local-6989586621682865215"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865215"><span class="hs-identifier hs-var">w</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; FastString
</span><a href="GHC.CmmToAsm.CPrim.html#pdepLabel"><span class="hs-identifier hs-var">pdepLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865215"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2176"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Pext"><span class="hs-identifier hs-type">MO_Pext</span></a></span><span> </span><span id="local-6989586621682865218"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865218"><span class="hs-identifier hs-var">w</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; FastString
</span><a href="GHC.CmmToAsm.CPrim.html#pextLabel"><span class="hs-identifier hs-var">pextLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865218"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2177"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Clz"><span class="hs-identifier hs-type">MO_Clz</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2178"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Ctz"><span class="hs-identifier hs-type">MO_Ctz</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2179"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicRMW"><span class="hs-identifier hs-type">MO_AtomicRMW</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2180"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Cmpxchg"><span class="hs-identifier hs-type">MO_Cmpxchg</span></a></span><span> </span><span id="local-6989586621682865220"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865220"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; FastString
</span><a href="GHC.CmmToAsm.CPrim.html#cmpxchgLabel"><span class="hs-identifier hs-var">cmpxchgLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865220"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2181"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Xchg"><span class="hs-identifier hs-type">MO_Xchg</span></a></span><span> </span><span id="local-6989586621682865223"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865223"><span class="hs-identifier hs-var">w</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; FastString
</span><a href="GHC.CmmToAsm.CPrim.html#xchgLabel"><span class="hs-identifier hs-var">xchgLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865223"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2182"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicRead"><span class="hs-identifier hs-type">MO_AtomicRead</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2183"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicWrite"><span class="hs-identifier hs-type">MO_AtomicWrite</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2184"></span><span>
</span><span id="line-2185"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Mul2"><span class="hs-identifier hs-type">MO_S_Mul2</span></a></span><span>    </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2186"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_QuotRem"><span class="hs-identifier hs-type">MO_S_QuotRem</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2187"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_QuotRem"><span class="hs-identifier hs-type">MO_U_QuotRem</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2188"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_QuotRem2"><span class="hs-identifier hs-type">MO_U_QuotRem2</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2189"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add2"><span class="hs-identifier hs-type">MO_Add2</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2190"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AddWordC"><span class="hs-identifier hs-type">MO_AddWordC</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2191"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SubWordC"><span class="hs-identifier hs-type">MO_SubWordC</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2192"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AddIntC"><span class="hs-identifier hs-type">MO_AddIntC</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2193"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SubIntC"><span class="hs-identifier hs-type">MO_SubIntC</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2194"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Mul2"><span class="hs-identifier hs-type">MO_U_Mul2</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2195"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_AcquireFence"><span class="hs-identifier hs-var">MO_AcquireFence</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2196"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_ReleaseFence"><span class="hs-identifier hs-var">MO_ReleaseFence</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2197"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_SeqCstFence"><span class="hs-identifier hs-var">MO_SeqCstFence</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2198"></span><span>                    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_Touch"><span class="hs-identifier hs-var">MO_Touch</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2199"></span><span>                    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Prefetch_Data"><span class="hs-identifier hs-type">MO_Prefetch_Data</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-2200"></span><span>                </span><span id="local-6989586621682865135"><span class="annot"><span class="annottext">unsupported :: (FastString, Bool)
</span><a href="#local-6989586621682865135"><span class="hs-identifier hs-var hs-var">unsupported</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (FastString, Bool)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;outOfLineCmmOp: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">CallishMachOp -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621682865120"><span class="hs-identifier hs-var">mop</span></a></span><span>
</span><span id="line-2201"></span><span>                                  </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; not supported&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-2202"></span><span>
</span><span id="line-2203"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-2204"></span><span class="hs-comment">-- Generating a table-branch</span><span>
</span><span id="line-2205"></span><span>
</span><span id="line-2206"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#genSwitch"><span class="hs-identifier hs-type">genSwitch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Config.html#NCGConfig"><span class="hs-identifier hs-type">NCGConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Switch.html#SwitchTargets"><span class="hs-identifier hs-type">SwitchTargets</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span>
</span><span id="line-2207"></span><span id="genSwitch"><span class="annot"><span class="annottext">genSwitch :: NCGConfig -&gt; CmmExpr -&gt; SwitchTargets -&gt; NatM (OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#genSwitch"><span class="hs-identifier hs-var hs-var">genSwitch</span></a></span></span><span> </span><span id="local-6989586621682865227"><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682865227"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621682865228"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865228"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621682865229"><span class="annot"><span class="annottext">SwitchTargets
</span><a href="#local-6989586621682865229"><span class="hs-identifier hs-var">targets</span></a></span></span><span>
</span><span id="line-2208"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier hs-var">OSAIX</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OS
</span><a href="GHC.Platform.html#platformOS"><span class="hs-identifier hs-var">platformOS</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2209"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2210"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682865231"><span class="annot"><a href="#local-6989586621682865231"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682865232"><span class="annot"><a href="#local-6989586621682865232"><span class="hs-identifier hs-var">e_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865233"><span class="hs-identifier hs-var">indexExpr</span></a></span><span>
</span><span id="line-2211"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865234"><span class="annot"><a href="#local-6989586621682865234"><span class="hs-identifier hs-var hs-var">fmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Format
</span><a href="GHC.CmmToAsm.PPC.Instr.html#archWordFormat"><span class="hs-identifier hs-var">archWordFormat</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Format) -&gt; Bool -&gt; Format
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2212"></span><span>            </span><span id="local-6989586621682865235"><span class="annot"><a href="#local-6989586621682865235"><span class="hs-identifier hs-var hs-var">sha</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-2213"></span><span>        </span><span id="local-6989586621682865236"><span class="annot"><a href="#local-6989586621682865236"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865234"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-2214"></span><span>        </span><span id="local-6989586621682865237"><span class="annot"><a href="#local-6989586621682865237"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewLabelNat"><span class="hs-identifier hs-type">getNewLabelNat</span></a></span><span>
</span><span id="line-2215"></span><span>        </span><span id="local-6989586621682865238"><span class="annot"><a href="#local-6989586621682865238"><span class="hs-identifier hs-var">dynRef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html#cmmMakeDynamicReference"><span class="hs-identifier hs-type">cmmMakeDynamicReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865227"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html#DataReference"><span class="hs-identifier hs-type">DataReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865237"><span class="hs-identifier hs-type">lbl</span></a></span><span>
</span><span id="line-2216"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682865239"><span class="annot"><a href="#local-6989586621682865239"><span class="hs-identifier hs-var">tableReg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682865240"><span class="annot"><a href="#local-6989586621682865240"><span class="hs-identifier hs-var">t_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682865238"><span class="hs-identifier hs-type">dynRef</span></a></span><span>
</span><span id="line-2217"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865241"><span class="annot"><a href="#local-6989586621682865241"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865232"><span class="hs-identifier hs-var">e_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865240"><span class="hs-identifier hs-var">t_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2218"></span><span>                            </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-var">SL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865234"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865236"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865231"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865235"><span class="hs-identifier hs-var">sha</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2219"></span><span>                            </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865234"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865236"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegReg"><span class="hs-identifier hs-var">AddrRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865239"><span class="hs-identifier hs-var">tableReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865236"><span class="hs-identifier hs-var">tmp</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2220"></span><span>                            </span><span class="annot"><span class="annottext">Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MTCTR"><span class="hs-identifier hs-var">MTCTR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865236"><span class="hs-identifier hs-var">tmp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2221"></span><span>                            </span><span class="annot"><span class="annottext">[Maybe BlockId] -&gt; Maybe CLabel -&gt; [RegWithFormat] -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCTR"><span class="hs-identifier hs-var">BCTR</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe BlockId]
</span><a href="#local-6989586621682865242"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; Maybe CLabel
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865237"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2222"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-2223"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682865241"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-2224"></span><span>
</span><span id="line-2225"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NCGConfig -&gt; Bool
</span><a href="GHC.CmmToAsm.Config.html#ncgPIC"><span class="hs-identifier hs-var">ncgPIC</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682865227"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2226"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2227"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682865243"><span class="annot"><a href="#local-6989586621682865243"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682865244"><span class="annot"><a href="#local-6989586621682865244"><span class="hs-identifier hs-var">e_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865233"><span class="hs-identifier hs-var">indexExpr</span></a></span><span>
</span><span id="line-2228"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865245"><span class="annot"><a href="#local-6989586621682865245"><span class="hs-identifier hs-var hs-var">fmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Format
</span><a href="GHC.CmmToAsm.PPC.Instr.html#archWordFormat"><span class="hs-identifier hs-var">archWordFormat</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Format) -&gt; Bool -&gt; Format
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2229"></span><span>            </span><span id="local-6989586621682865246"><span class="annot"><a href="#local-6989586621682865246"><span class="hs-identifier hs-var hs-var">sha</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-2230"></span><span>        </span><span id="local-6989586621682865247"><span class="annot"><a href="#local-6989586621682865247"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865245"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-2231"></span><span>        </span><span id="local-6989586621682865248"><span class="annot"><a href="#local-6989586621682865248"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewLabelNat"><span class="hs-identifier hs-type">getNewLabelNat</span></a></span><span>
</span><span id="line-2232"></span><span>        </span><span id="local-6989586621682865249"><span class="annot"><a href="#local-6989586621682865249"><span class="hs-identifier hs-var">dynRef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html#cmmMakeDynamicReference"><span class="hs-identifier hs-type">cmmMakeDynamicReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865227"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html#DataReference"><span class="hs-identifier hs-type">DataReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865248"><span class="hs-identifier hs-type">lbl</span></a></span><span>
</span><span id="line-2233"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682865250"><span class="annot"><a href="#local-6989586621682865250"><span class="hs-identifier hs-var">tableReg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682865251"><span class="annot"><a href="#local-6989586621682865251"><span class="hs-identifier hs-var">t_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682865249"><span class="hs-identifier hs-type">dynRef</span></a></span><span>
</span><span id="line-2234"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865252"><span class="annot"><a href="#local-6989586621682865252"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865244"><span class="hs-identifier hs-var">e_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865251"><span class="hs-identifier hs-var">t_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2235"></span><span>                            </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-var">SL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865245"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865247"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865243"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865246"><span class="hs-identifier hs-var">sha</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2236"></span><span>                            </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865245"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865247"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegReg"><span class="hs-identifier hs-var">AddrRegReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865250"><span class="hs-identifier hs-var">tableReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865247"><span class="hs-identifier hs-var">tmp</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2237"></span><span>                            </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865247"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865247"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865250"><span class="hs-identifier hs-var">tableReg</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2238"></span><span>                            </span><span class="annot"><span class="annottext">Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MTCTR"><span class="hs-identifier hs-var">MTCTR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865247"><span class="hs-identifier hs-var">tmp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2239"></span><span>                            </span><span class="annot"><span class="annottext">[Maybe BlockId] -&gt; Maybe CLabel -&gt; [RegWithFormat] -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCTR"><span class="hs-identifier hs-var">BCTR</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe BlockId]
</span><a href="#local-6989586621682865242"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; Maybe CLabel
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865248"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2240"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-2241"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682865252"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-2242"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-2243"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2244"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682865253"><span class="annot"><a href="#local-6989586621682865253"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682865254"><span class="annot"><a href="#local-6989586621682865254"><span class="hs-identifier hs-var">e_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865233"><span class="hs-identifier hs-var">indexExpr</span></a></span><span>
</span><span id="line-2245"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865255"><span class="annot"><a href="#local-6989586621682865255"><span class="hs-identifier hs-var hs-var">fmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Format
</span><a href="GHC.CmmToAsm.PPC.Instr.html#archWordFormat"><span class="hs-identifier hs-var">archWordFormat</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Format) -&gt; Bool -&gt; Format
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2246"></span><span>            </span><span id="local-6989586621682865256"><span class="annot"><a href="#local-6989586621682865256"><span class="hs-identifier hs-var hs-var">sha</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-2247"></span><span>        </span><span id="local-6989586621682865257"><span class="annot"><a href="#local-6989586621682865257"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865255"><span class="hs-identifier hs-type">fmt</span></a></span><span>
</span><span id="line-2248"></span><span>        </span><span id="local-6989586621682865258"><span class="annot"><a href="#local-6989586621682865258"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewLabelNat"><span class="hs-identifier hs-type">getNewLabelNat</span></a></span><span>
</span><span id="line-2249"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865259"><span class="annot"><a href="#local-6989586621682865259"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865254"><span class="hs-identifier hs-var">e_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2250"></span><span>                            </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SL"><span class="hs-identifier hs-var">SL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865255"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865257"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865253"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865256"><span class="hs-identifier hs-var">sha</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2251"></span><span>                            </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADDIS"><span class="hs-identifier hs-var">ADDIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865257"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865257"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#HA"><span class="hs-identifier hs-var">HA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmCLbl"><span class="hs-identifier hs-var">ImmCLbl</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865258"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2252"></span><span>                            </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865255"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865257"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#AddrRegImm"><span class="hs-identifier hs-var">AddrRegImm</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865257"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#LO"><span class="hs-identifier hs-var">LO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmCLbl"><span class="hs-identifier hs-var">ImmCLbl</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865258"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2253"></span><span>                            </span><span class="annot"><span class="annottext">Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MTCTR"><span class="hs-identifier hs-var">MTCTR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865257"><span class="hs-identifier hs-var">tmp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2254"></span><span>                            </span><span class="annot"><span class="annottext">[Maybe BlockId] -&gt; Maybe CLabel -&gt; [RegWithFormat] -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCTR"><span class="hs-identifier hs-var">BCTR</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe BlockId]
</span><a href="#local-6989586621682865242"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; Maybe CLabel
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865258"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2255"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-2256"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682865259"><span class="hs-identifier hs-type">code</span></a></span><span>
</span><span id="line-2257"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2258"></span><span>    </span><span class="hs-comment">-- See Note [Sub-word subtlety during jump-table indexing] in</span><span>
</span><span id="line-2259"></span><span>    </span><span class="hs-comment">-- GHC.CmmToAsm.X86.CodeGen for why we must first offset, then widen.</span><span>
</span><span id="line-2260"></span><span>    </span><span id="local-6989586621682865261"><span class="annot"><span class="annottext">indexExpr0 :: CmmExpr
</span><a href="#local-6989586621682865261"><span class="hs-identifier hs-var hs-var">indexExpr0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; CmmExpr -&gt; Int -&gt; CmmExpr
</span><a href="GHC.Cmm.Utils.html#cmmOffset"><span class="hs-identifier hs-var">cmmOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865228"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865263"><span class="hs-identifier hs-var">offset</span></a></span><span>
</span><span id="line-2261"></span><span>    </span><span class="hs-comment">-- We widen to a native-width register to sanitize the high bits</span><span>
</span><span id="line-2262"></span><span>    </span><span id="local-6989586621682865233"><span class="annot"><span class="annottext">indexExpr :: CmmExpr
</span><a href="#local-6989586621682865233"><span class="hs-identifier hs-var hs-var">indexExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MachOp -&gt; [CmmExpr] -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-var">CmmMachOp</span></a></span><span>
</span><span id="line-2263"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; MachOp
</span><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-var">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865264"><span class="hs-identifier hs-var">expr_w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Width
</span><a href="GHC.CmmToAsm.Config.html#platformWordWidth"><span class="hs-identifier hs-var">platformWordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2264"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865261"><span class="hs-identifier hs-var">indexExpr0</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2265"></span><span>    </span><span id="local-6989586621682865264"><span class="annot"><span class="annottext">expr_w :: Width
</span><a href="#local-6989586621682865264"><span class="hs-identifier hs-var hs-var">expr_w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; CmmExpr -&gt; Width
</span><a href="GHC.Cmm.Expr.html#cmmExprWidth"><span class="hs-identifier hs-var">cmmExprWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865228"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-2266"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865263"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865263"><span class="hs-identifier hs-var">offset</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865242"><span class="annot"><span class="annottext">[Maybe BlockId]
</span><a href="#local-6989586621682865242"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SwitchTargets -&gt; (Int, [Maybe BlockId])
</span><a href="GHC.Cmm.Switch.html#switchTargetsToTable"><span class="hs-identifier hs-var">switchTargetsToTable</span></a></span><span> </span><span class="annot"><span class="annottext">SwitchTargets
</span><a href="#local-6989586621682865229"><span class="hs-identifier hs-var">targets</span></a></span><span>
</span><span id="line-2267"></span><span>    </span><span id="local-6989586621682865230"><span class="annot"><span class="annottext">platform :: Platform
</span><a href="#local-6989586621682865230"><span class="hs-identifier hs-var hs-var">platform</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NCGConfig -&gt; Platform
</span><a href="GHC.CmmToAsm.Config.html#ncgPlatform"><span class="hs-identifier hs-var">ncgPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682865227"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-2268"></span><span>
</span><span id="line-2269"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#generateJumpTableForInstr"><span class="hs-identifier hs-type">generateJumpTableForInstr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Config.html#NCGConfig"><span class="hs-identifier hs-type">NCGConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span>
</span><span id="line-2270"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Types.html#NatCmmDecl"><span class="hs-identifier hs-type">NatCmmDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.html#RawCmmStatics"><span class="hs-identifier hs-type">RawCmmStatics</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2271"></span><span id="generateJumpTableForInstr"><span class="annot"><span class="annottext">generateJumpTableForInstr :: NCGConfig -&gt; Instr -&gt; Maybe (NatCmmDecl RawCmmStatics Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#generateJumpTableForInstr"><span class="hs-identifier hs-var hs-var">generateJumpTableForInstr</span></a></span></span><span> </span><span id="local-6989586621682865268"><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682865268"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#BCTR"><span class="hs-identifier hs-type">BCTR</span></a></span><span> </span><span id="local-6989586621682865269"><span class="annot"><span class="annottext">[Maybe BlockId]
</span><a href="#local-6989586621682865269"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682865270"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865270"><span class="hs-identifier hs-var">lbl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RegWithFormat]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2272"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865271"><span class="annot"><span class="annottext">jumpTable :: [CmmStatic]
</span><a href="#local-6989586621682865271"><span class="hs-identifier hs-var hs-var">jumpTable</span></a></span></span><span>
</span><span id="line-2273"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NCGConfig -&gt; Bool
</span><a href="GHC.CmmToAsm.Config.html#ncgPIC"><span class="hs-identifier hs-var">ncgPIC</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682865268"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">(Platform -&gt; Bool) -&gt; Platform -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NCGConfig -&gt; Platform
</span><a href="GHC.CmmToAsm.Config.html#ncgPlatform"><span class="hs-identifier hs-var">ncgPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682865268"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2274"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe BlockId -&gt; CmmStatic) -&gt; [Maybe BlockId] -&gt; [CmmStatic]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Maybe BlockId -&gt; CmmStatic
</span><a href="#local-6989586621682865272"><span class="hs-identifier hs-var">jumpTableEntryRel</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe BlockId]
</span><a href="#local-6989586621682865269"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-2275"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe BlockId -&gt; CmmStatic) -&gt; [Maybe BlockId] -&gt; [CmmStatic]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NCGConfig -&gt; Maybe BlockId -&gt; CmmStatic
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#jumpTableEntry"><span class="hs-identifier hs-var">jumpTableEntry</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682865268"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Maybe BlockId]
</span><a href="#local-6989586621682865269"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-2276"></span><span>                </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682865272"><span class="annot"><span class="annottext">jumpTableEntryRel :: Maybe BlockId -&gt; CmmStatic
</span><a href="#local-6989586621682865272"><span class="hs-identifier hs-var hs-var">jumpTableEntryRel</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe BlockId
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2277"></span><span>                        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; CmmStatic
</span><a href="GHC.Cmm.html#CmmStaticLit"><span class="hs-identifier hs-var">CmmStaticLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Width -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-var">CmmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NCGConfig -&gt; Width
</span><a href="GHC.CmmToAsm.Config.html#ncgWordWidth"><span class="hs-identifier hs-var">ncgWordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682865268"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2278"></span><span>                      </span><span class="annot"><a href="#local-6989586621682865272"><span class="hs-identifier hs-var">jumpTableEntryRel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682865273"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682865273"><span class="hs-identifier hs-var">blockid</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2279"></span><span>                        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; CmmStatic
</span><a href="GHC.Cmm.html#CmmStaticLit"><span class="hs-identifier hs-var">CmmStaticLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; CLabel -&gt; Int -&gt; Width -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmLabelDiffOff"><span class="hs-identifier hs-var">CmmLabelDiffOff</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865274"><span class="hs-identifier hs-var">blockLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865270"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-2280"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NCGConfig -&gt; Width
</span><a href="GHC.CmmToAsm.Config.html#ncgWordWidth"><span class="hs-identifier hs-var">ncgWordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><a href="#local-6989586621682865268"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2281"></span><span>                            </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682865274"><span class="annot"><span class="annottext">blockLabel :: CLabel
</span><a href="#local-6989586621682865274"><span class="hs-identifier hs-var hs-var">blockLabel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; CLabel
</span><a href="GHC.Cmm.BlockId.html#blockLbl"><span class="hs-identifier hs-var">blockLbl</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682865273"><span class="hs-identifier hs-var">blockid</span></a></span><span>
</span><span id="line-2282"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">NatCmmDecl RawCmmStatics Instr
-&gt; Maybe (NatCmmDecl RawCmmStatics Instr)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Section -&gt; RawCmmStatics -&gt; NatCmmDecl RawCmmStatics Instr
forall d h g. Section -&gt; d -&gt; GenCmmDecl d h g
</span><a href="GHC.Cmm.html#CmmData"><span class="hs-identifier hs-var">CmmData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SectionType -&gt; CLabel -&gt; Section
</span><a href="GHC.Cmm.html#Section"><span class="hs-identifier hs-var">Section</span></a></span><span> </span><span class="annot"><span class="annottext">SectionType
</span><a href="GHC.Cmm.html#ReadOnlyData"><span class="hs-identifier hs-var">ReadOnlyData</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865270"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; [CmmStatic] -&gt; RawCmmStatics
forall (rawOnly :: Bool).
CLabel -&gt; [CmmStatic] -&gt; GenCmmStatics rawOnly
</span><a href="GHC.Cmm.html#CmmStaticsRaw"><span class="hs-identifier hs-var">CmmStaticsRaw</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865270"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmStatic]
</span><a href="#local-6989586621682865271"><span class="hs-identifier hs-var">jumpTable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2283"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#generateJumpTableForInstr"><span class="hs-identifier hs-var">generateJumpTableForInstr</span></a></span><span> </span><span class="annot"><span class="annottext">NCGConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Instr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (NatCmmDecl RawCmmStatics Instr)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2284"></span><span>
</span><span id="line-2285"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-2286"></span><span class="hs-comment">-- 'condIntReg' and 'condFltReg': condition codes into registers</span><span>
</span><span id="line-2287"></span><span>
</span><span id="line-2288"></span><span class="hs-comment">-- Turn those condition codes into integers now (when they appear on</span><span>
</span><span id="line-2289"></span><span class="hs-comment">-- the right hand side of an assignment).</span><span>
</span><span id="line-2290"></span><span>
</span><span id="line-2291"></span><span>
</span><span id="line-2292"></span><span>
</span><span id="line-2293"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#condReg"><span class="hs-identifier hs-type">condReg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2294"></span><span id="condReg"><span class="annot"><span class="annottext">condReg :: NatM CondCode -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condReg"><span class="hs-identifier hs-var hs-var">condReg</span></a></span></span><span> </span><span id="local-6989586621682865276"><span class="annot"><span class="annottext">NatM CondCode
</span><a href="#local-6989586621682865276"><span class="hs-identifier hs-var">getCond</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2295"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#CondCode"><span class="hs-identifier hs-type">CondCode</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682865277"><span class="annot"><a href="#local-6989586621682865277"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621682865278"><span class="annot"><a href="#local-6989586621682865278"><span class="hs-identifier hs-var">cond_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM CondCode
</span><a href="#local-6989586621682865276"><span class="hs-identifier hs-var">getCond</span></a></span><span>
</span><span id="line-2296"></span><span>    </span><span id="local-6989586621682865279"><span class="annot"><a href="#local-6989586621682865279"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-type">getPlatform</span></a></span><span>
</span><span id="line-2297"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-2298"></span><span>        </span><span id="local-6989586621682865280"><span class="annot"><a href="#local-6989586621682865280"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682865281"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865281"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865278"><span class="hs-identifier hs-var">cond_code</span></a></span><span>
</span><span id="line-2299"></span><span>            </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865282"><span class="hs-identifier hs-var">negate_code</span></a></span><span>
</span><span id="line-2300"></span><span>            </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2301"></span><span>                </span><span class="annot"><span class="annottext">Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MFCR"><span class="hs-identifier hs-var">MFCR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865281"><span class="hs-identifier hs-var">dst</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2302"></span><span>                </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Int -&gt; Int -&gt; Int -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RLWINM"><span class="hs-identifier hs-var">RLWINM</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865281"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865281"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865285"><span class="hs-identifier hs-var">bit</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">31</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">31</span></span><span>
</span><span id="line-2303"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-2304"></span><span>
</span><span id="line-2305"></span><span>        </span><span id="local-6989586621682865282"><span class="annot"><a href="#local-6989586621682865282"><span class="hs-identifier hs-var hs-var">negate_code</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865286"><span class="hs-identifier hs-var">do_negate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CRNOR"><span class="hs-identifier hs-var">CRNOR</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865285"><span class="hs-identifier hs-var">bit</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865285"><span class="hs-identifier hs-var">bit</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682865285"><span class="hs-identifier hs-var">bit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2306"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-2307"></span><span>
</span><span id="line-2308"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682865285"><span class="annot"><a href="#local-6989586621682865285"><span class="hs-identifier hs-var">bit</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865286"><span class="annot"><a href="#local-6989586621682865286"><span class="hs-identifier hs-var">do_negate</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682865277"><span class="hs-identifier hs-type">cond</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2309"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LTT"><span class="hs-identifier hs-var">LTT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2310"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LE"><span class="hs-identifier hs-var">LE</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2311"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#EQQ"><span class="hs-identifier hs-var">EQQ</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2312"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GE"><span class="hs-identifier hs-var">GE</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2313"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GTT"><span class="hs-identifier hs-var">GTT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2314"></span><span>
</span><span id="line-2315"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#NE"><span class="hs-identifier hs-var">NE</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2316"></span><span>
</span><span id="line-2317"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LU"><span class="hs-identifier hs-var">LU</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2318"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LEU"><span class="hs-identifier hs-var">LEU</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2319"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GEU"><span class="hs-identifier hs-var">GEU</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-2320"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#GU"><span class="hs-identifier hs-var">GU</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-2321"></span><span>            </span><span class="annot"><span class="annottext">Cond
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Int, Bool)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.codeReg: no match&quot;</span></span><span>
</span><span id="line-2322"></span><span>
</span><span id="line-2323"></span><span>        </span><span id="local-6989586621682865287"><span class="annot"><a href="#local-6989586621682865287"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Format
</span><a href="GHC.CmmToAsm.PPC.Instr.html#archWordFormat"><span class="hs-identifier hs-var">archWordFormat</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Format) -&gt; Bool -&gt; Format
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#target32Bit"><span class="hs-identifier hs-var">target32Bit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865279"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2324"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865287"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865280"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2325"></span><span>
</span><span id="line-2326"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-type">condIntReg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#Cond"><span class="hs-identifier hs-type">Cond</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2327"></span><span id="condIntReg"><span class="annot"><span class="annottext">condIntReg :: Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntReg"><span class="hs-identifier hs-var hs-var">condIntReg</span></a></span></span><span> </span><span id="local-6989586621682865288"><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682865288"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621682865289"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865289"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682865290"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865290"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682865291"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865291"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NatM CondCode -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condReg"><span class="hs-identifier hs-var">condReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Cond -&gt; Width -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condIntCode"><span class="hs-identifier hs-var">condIntCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682865288"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865289"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865290"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865291"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2328"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltReg"><span class="hs-identifier hs-type">condFltReg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Cond.html#Cond"><span class="hs-identifier hs-type">Cond</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2329"></span><span id="condFltReg"><span class="annot"><span class="annottext">condFltReg :: Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltReg"><span class="hs-identifier hs-var hs-var">condFltReg</span></a></span></span><span> </span><span id="local-6989586621682865292"><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682865292"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621682865293"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865293"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682865294"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865294"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NatM CondCode -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condReg"><span class="hs-identifier hs-var">condReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Cond -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM CondCode
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#condFltCode"><span class="hs-identifier hs-var">condFltCode</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="#local-6989586621682865292"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865293"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865294"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2330"></span><span>
</span><span id="line-2331"></span><span>
</span><span id="line-2332"></span><span>
</span><span id="line-2333"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-2334"></span><span class="hs-comment">-- 'trivial*Code': deal with trivial instructions</span><span>
</span><span id="line-2335"></span><span>
</span><span id="line-2336"></span><span class="hs-comment">-- Trivial (dyadic: 'trivialCode', floating-point: 'trivialFCode',</span><span>
</span><span id="line-2337"></span><span class="hs-comment">-- unary: 'trivialUCode', unary fl-pt:'trivialUFCode') instructions.</span><span>
</span><span id="line-2338"></span><span class="hs-comment">-- Only look for constants on the right hand side, because that's</span><span>
</span><span id="line-2339"></span><span class="hs-comment">-- where the generic optimizer will have put them.</span><span>
</span><span id="line-2340"></span><span>
</span><span id="line-2341"></span><span class="hs-comment">-- Similarly, for unary instructions, we don't have to worry about</span><span>
</span><span id="line-2342"></span><span class="hs-comment">-- matching an StInt as the argument, because genericOpt will already</span><span>
</span><span id="line-2343"></span><span class="hs-comment">-- have handled the constant-folding.</span><span>
</span><span id="line-2344"></span><span>
</span><span id="line-2345"></span><span>
</span><span id="line-2346"></span><span>
</span><span id="line-2347"></span><span class="hs-comment">{-
Wolfgang's PowerPC version of The Rules:

A slightly modified version of The Rules to take advantage of the fact
that PowerPC instructions work on all registers and don't implicitly
clobber any fixed registers.

* The only expression for which getRegister returns Fixed is (CmmReg reg).

* If getRegister returns Any, then the code it generates may modify only:
        (a) fresh temporaries
        (b) the destination register
  It may *not* modify global registers, unless the global
  register happens to be the destination register.
  It may not clobber any other registers. In fact, only ccalls clobber any
  fixed registers.
  Also, it may not modify the counter register (used by genCCall).

  Corollary: If a getRegister for a subexpression returns Fixed, you need
  not move it to a fresh temporary before evaluating the next subexpression.
  The Fixed register won't be modified.
  Therefore, we don't need a counterpart for the x86's getStableReg on PPC.

* SDM's First Rule is valid for PowerPC, too: subexpressions can depend on
  the value of the destination register.
-}</span><span>
</span><span id="line-2373"></span><span>
</span><span id="line-2374"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-type">trivialCode</span></a></span><span>
</span><span id="line-2375"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-2376"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2377"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RI"><span class="hs-identifier hs-type">RI</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2378"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-2379"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-2380"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2381"></span><span>
</span><span id="line-2382"></span><span id="trivialCode"><span class="annot"><span class="annottext">trivialCode :: Width
-&gt; Bool
-&gt; (Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-var hs-var">trivialCode</span></a></span></span><span> </span><span id="local-6989586621682865295"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865295"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span id="local-6989586621682865296"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865296"><span class="hs-identifier hs-var">signed</span></a></span></span><span> </span><span id="local-6989586621682865297"><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865297"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682865298"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865298"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682865299"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682865299"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2383"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682865300"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682865300"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865295"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865296"><span class="hs-identifier hs-var">signed</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682865299"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-2384"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2385"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682865301"><span class="annot"><a href="#local-6989586621682865301"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865302"><span class="annot"><a href="#local-6989586621682865302"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865298"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2386"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865303"><span class="annot"><a href="#local-6989586621682865303"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682865304"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865304"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865302"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865297"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865304"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865301"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682865300"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2387"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-type">intFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865295"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682865303"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2388"></span><span>
</span><span id="line-2389"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCode"><span class="hs-identifier hs-var">trivialCode</span></a></span><span> </span><span id="local-6989586621682865305"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865305"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682865306"><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865306"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682865307"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865307"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682865308"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865308"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2390"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865309"><span class="annot"><a href="#local-6989586621682865309"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865310"><span class="annot"><a href="#local-6989586621682865310"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865307"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2391"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865311"><span class="annot"><a href="#local-6989586621682865311"><span class="hs-identifier hs-var">src2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865312"><span class="annot"><a href="#local-6989586621682865312"><span class="hs-identifier hs-var">code2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865308"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-2392"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865313"><span class="annot"><a href="#local-6989586621682865313"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682865314"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865314"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865310"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865312"><span class="hs-identifier hs-var">code2</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865306"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865314"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865309"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865311"><span class="hs-identifier hs-var">src2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2393"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-type">intFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865305"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682865313"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2394"></span><span>
</span><span id="line-2395"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#shiftMulCode"><span class="hs-identifier hs-type">shiftMulCode</span></a></span><span>
</span><span id="line-2396"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-2397"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2398"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RI"><span class="hs-identifier hs-type">RI</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2399"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-2400"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-2401"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2402"></span><span id="shiftMulCode"><span class="annot"><span class="annottext">shiftMulCode :: Width
-&gt; Bool
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#shiftMulCode"><span class="hs-identifier hs-var hs-var">shiftMulCode</span></a></span></span><span> </span><span id="local-6989586621682865315"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865315"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682865316"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865316"><span class="hs-identifier hs-var">sign</span></a></span></span><span> </span><span id="local-6989586621682865317"><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865317"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682865318"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865318"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682865319"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682865319"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2403"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682865320"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682865320"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865315"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865316"><span class="hs-identifier hs-var">sign</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682865319"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-2404"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2405"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682865321"><span class="annot"><a href="#local-6989586621682865321"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865322"><span class="annot"><a href="#local-6989586621682865322"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865318"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2406"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865323"><span class="annot"><a href="#local-6989586621682865323"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865315"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-2407"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865324"><span class="annot"><a href="#local-6989586621682865324"><span class="hs-identifier hs-var hs-var">ins_fmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Width
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865315"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2408"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865325"><span class="annot"><a href="#local-6989586621682865325"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682865326"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865326"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865322"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865317"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865324"><span class="hs-identifier hs-var">ins_fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865326"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865321"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682865320"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2409"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865323"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865325"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2410"></span><span>
</span><span id="line-2411"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#shiftMulCode"><span class="hs-identifier hs-var">shiftMulCode</span></a></span><span> </span><span id="local-6989586621682865327"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865327"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682865328"><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865328"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682865329"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865329"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682865330"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865330"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2412"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865331"><span class="annot"><a href="#local-6989586621682865331"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865332"><span class="annot"><a href="#local-6989586621682865332"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865329"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2413"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865333"><span class="annot"><a href="#local-6989586621682865333"><span class="hs-identifier hs-var">src2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865334"><span class="annot"><a href="#local-6989586621682865334"><span class="hs-identifier hs-var">code2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865330"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-2414"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865335"><span class="annot"><a href="#local-6989586621682865335"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865327"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-2415"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865336"><span class="annot"><a href="#local-6989586621682865336"><span class="hs-identifier hs-var hs-var">ins_fmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Width
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865327"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2416"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865337"><span class="annot"><a href="#local-6989586621682865337"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682865338"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865338"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865332"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865334"><span class="hs-identifier hs-var">code2</span></a></span><span>
</span><span id="line-2417"></span><span>                   </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865328"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865336"><span class="hs-identifier hs-var">ins_fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865338"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865331"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865333"><span class="hs-identifier hs-var">src2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2418"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865335"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865337"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2419"></span><span>
</span><span id="line-2420"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCodeNoImm%27"><span class="hs-identifier hs-type">trivialCodeNoImm'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2421"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2422"></span><span id="trivialCodeNoImm%27"><span class="annot"><span class="annottext">trivialCodeNoImm' :: Format
-&gt; (Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCodeNoImm%27"><span class="hs-identifier hs-var hs-var">trivialCodeNoImm'</span></a></span></span><span> </span><span id="local-6989586621682865339"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865339"><span class="hs-identifier hs-var">format</span></a></span></span><span> </span><span id="local-6989586621682865340"><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682865340"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682865341"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865341"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682865342"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865342"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2423"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865343"><span class="annot"><a href="#local-6989586621682865343"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865344"><span class="annot"><a href="#local-6989586621682865344"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865341"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2424"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865345"><span class="annot"><a href="#local-6989586621682865345"><span class="hs-identifier hs-var">src2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865346"><span class="annot"><a href="#local-6989586621682865346"><span class="hs-identifier hs-var">code2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865342"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-2425"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865347"><span class="annot"><a href="#local-6989586621682865347"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682865348"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865348"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865344"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865346"><span class="hs-identifier hs-var">code2</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682865340"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865348"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865343"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865345"><span class="hs-identifier hs-var">src2</span></a></span><span>
</span><span id="line-2426"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865339"><span class="hs-identifier hs-type">format</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865347"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2427"></span><span>
</span><span id="line-2428"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCodeNoImm"><span class="hs-identifier hs-type">trivialCodeNoImm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2429"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2430"></span><span id="trivialCodeNoImm"><span class="annot"><span class="annottext">trivialCodeNoImm :: Format
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCodeNoImm"><span class="hs-identifier hs-var hs-var">trivialCodeNoImm</span></a></span></span><span> </span><span id="local-6989586621682865349"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865349"><span class="hs-identifier hs-var">format</span></a></span></span><span> </span><span id="local-6989586621682865350"><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682865350"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682865351"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865351"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682865352"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865352"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-2431"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Format
-&gt; (Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialCodeNoImm%27"><span class="hs-identifier hs-var">trivialCodeNoImm'</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865349"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682865350"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865349"><span class="hs-identifier hs-var">format</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865351"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865352"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-2432"></span><span>
</span><span id="line-2433"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#srCode"><span class="hs-identifier hs-type">srCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#RI"><span class="hs-identifier hs-type">RI</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2434"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2435"></span><span id="srCode"><span class="annot"><span class="annottext">srCode :: Width
-&gt; Bool
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#srCode"><span class="hs-identifier hs-var hs-var">srCode</span></a></span></span><span> </span><span id="local-6989586621682865353"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865353"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682865354"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865354"><span class="hs-identifier hs-var">sgn</span></a></span></span><span> </span><span id="local-6989586621682865355"><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865355"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682865356"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865356"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621682865357"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682865357"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2436"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682865358"><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682865358"><span class="hs-identifier hs-var">imm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Bool -&gt; Integer -&gt; Maybe Imm
forall a. Integral a =&gt; Width -&gt; Bool -&gt; a -&gt; Maybe Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#makeImmediate"><span class="hs-identifier hs-var">makeImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865353"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865354"><span class="hs-identifier hs-var">sgn</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682865357"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-2437"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2438"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865359"><span class="annot"><span class="annottext">op_len :: Width
</span><a href="#local-6989586621682865359"><span class="hs-identifier hs-var hs-var hs-var">op_len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Width
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865353"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-2439"></span><span>            </span><span id="local-6989586621682865360"><span class="annot"><span class="annottext">extend :: Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682865360"><span class="hs-identifier hs-var hs-var hs-var">extend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865354"><span class="hs-identifier hs-var">sgn</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendSExpr"><span class="hs-identifier hs-var">extendSExpr</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendUExpr"><span class="hs-identifier hs-var">extendUExpr</span></a></span><span>
</span><span id="line-2440"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682865361"><span class="annot"><a href="#local-6989586621682865361"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865362"><span class="annot"><a href="#local-6989586621682865362"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682865360"><span class="hs-identifier hs-var">extend</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865353"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865359"><span class="hs-identifier hs-var">op_len</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865356"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2441"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865363"><span class="annot"><a href="#local-6989586621682865363"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682865364"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865364"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865362"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span>
</span><span id="line-2442"></span><span>                       </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865355"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865359"><span class="hs-identifier hs-var">op_len</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865364"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865361"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="annot"><span class="annottext">Imm
</span><a href="#local-6989586621682865358"><span class="hs-identifier hs-var">imm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2443"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-type">intFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865353"><span class="hs-identifier hs-type">width</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682865363"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2444"></span><span>
</span><span id="line-2445"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#srCode"><span class="hs-identifier hs-var">srCode</span></a></span><span> </span><span id="local-6989586621682865365"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865365"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682865366"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865366"><span class="hs-identifier hs-var">sgn</span></a></span></span><span> </span><span id="local-6989586621682865367"><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865367"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682865368"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865368"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682865369"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865369"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2446"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865370"><span class="annot"><span class="annottext">op_len :: Width
</span><a href="#local-6989586621682865370"><span class="hs-identifier hs-var hs-var hs-var">op_len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Width
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865365"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-2447"></span><span>      </span><span id="local-6989586621682865371"><span class="annot"><span class="annottext">extend :: Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682865371"><span class="hs-identifier hs-var hs-var hs-var">extend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865366"><span class="hs-identifier hs-var">sgn</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendSExpr"><span class="hs-identifier hs-var">extendSExpr</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendUExpr"><span class="hs-identifier hs-var">extendUExpr</span></a></span><span>
</span><span id="line-2448"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682865372"><span class="annot"><a href="#local-6989586621682865372"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865373"><span class="annot"><a href="#local-6989586621682865373"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682865371"><span class="hs-identifier hs-var">extend</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865365"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865370"><span class="hs-identifier hs-var">op_len</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865368"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2449"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682865374"><span class="annot"><a href="#local-6989586621682865374"><span class="hs-identifier hs-var">src2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865375"><span class="annot"><a href="#local-6989586621682865375"><span class="hs-identifier hs-var">code2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendUExpr"><span class="hs-identifier hs-type">extendUExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865365"><span class="hs-identifier hs-type">width</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865370"><span class="hs-identifier hs-type">op_len</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865369"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2450"></span><span>  </span><span class="hs-comment">-- Note: Shift amount `y` is unsigned</span><span>
</span><span id="line-2451"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865376"><span class="annot"><a href="#local-6989586621682865376"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682865377"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865377"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865373"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865375"><span class="hs-identifier hs-var">code2</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span>
</span><span id="line-2452"></span><span>                 </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="#local-6989586621682865367"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865370"><span class="hs-identifier hs-var">op_len</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865377"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865372"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865374"><span class="hs-identifier hs-var">src2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2453"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-type">intFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865365"><span class="hs-identifier hs-type">width</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682865376"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2454"></span><span>
</span><span id="line-2455"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#divCode"><span class="hs-identifier hs-type">divCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2456"></span><span id="divCode"><span class="annot"><span class="annottext">divCode :: Width -&gt; Bool -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#divCode"><span class="hs-identifier hs-var hs-var">divCode</span></a></span></span><span> </span><span id="local-6989586621682865378"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865378"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621682865379"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865379"><span class="hs-identifier hs-var">sgn</span></a></span></span><span> </span><span id="local-6989586621682865380"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865380"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682865381"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865381"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2457"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865382"><span class="annot"><span class="annottext">op_len :: Width
</span><a href="#local-6989586621682865382"><span class="hs-identifier hs-var hs-var hs-var">op_len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Width
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865378"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-2458"></span><span>      </span><span id="local-6989586621682865383"><span class="annot"><span class="annottext">extend :: Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682865383"><span class="hs-identifier hs-var hs-var hs-var">extend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865379"><span class="hs-identifier hs-var">sgn</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendSExpr"><span class="hs-identifier hs-var">extendSExpr</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendUExpr"><span class="hs-identifier hs-var">extendUExpr</span></a></span><span>
</span><span id="line-2459"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682865384"><span class="annot"><a href="#local-6989586621682865384"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865385"><span class="annot"><a href="#local-6989586621682865385"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682865383"><span class="hs-identifier hs-var">extend</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865378"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865382"><span class="hs-identifier hs-var">op_len</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865380"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2460"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682865386"><span class="annot"><a href="#local-6989586621682865386"><span class="hs-identifier hs-var">src2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865387"><span class="annot"><a href="#local-6989586621682865387"><span class="hs-identifier hs-var">code2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682865383"><span class="hs-identifier hs-type">extend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865378"><span class="hs-identifier hs-type">width</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865382"><span class="hs-identifier hs-type">op_len</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865381"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2461"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865388"><span class="annot"><a href="#local-6989586621682865388"><span class="hs-identifier hs-var hs-var">code</span></a></span></span><span> </span><span id="local-6989586621682865389"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865389"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865385"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865387"><span class="hs-identifier hs-var">code2</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span>
</span><span id="line-2462"></span><span>                 </span><span class="annot"><span class="annottext">Format -&gt; Bool -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#DIV"><span class="hs-identifier hs-var">DIV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865382"><span class="hs-identifier hs-var">op_len</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865379"><span class="hs-identifier hs-var">sgn</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865389"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865384"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865386"><span class="hs-identifier hs-var">src2</span></a></span><span>
</span><span id="line-2463"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-type">intFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865378"><span class="hs-identifier hs-type">width</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682865388"><span class="hs-identifier hs-type">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2464"></span><span>
</span><span id="line-2465"></span><span>
</span><span id="line-2466"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialUCode"><span class="hs-identifier hs-type">trivialUCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span>
</span><span id="line-2467"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2468"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-2469"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2470"></span><span id="trivialUCode"><span class="annot"><span class="annottext">trivialUCode :: Format -&gt; (Reg -&gt; Reg -&gt; Instr) -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#trivialUCode"><span class="hs-identifier hs-var hs-var">trivialUCode</span></a></span></span><span> </span><span id="local-6989586621682865390"><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865390"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span id="local-6989586621682865391"><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682865391"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682865392"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865392"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2471"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865393"><span class="annot"><a href="#local-6989586621682865393"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865394"><span class="annot"><a href="#local-6989586621682865394"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865392"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2472"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865395"><span class="annot"><a href="#local-6989586621682865395"><span class="hs-identifier hs-var hs-var">code'</span></a></span></span><span> </span><span id="local-6989586621682865396"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865396"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865394"><span class="hs-identifier hs-var">code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682865391"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865396"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865393"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-2473"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865390"><span class="hs-identifier hs-type">rep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865395"><span class="hs-identifier hs-type">code'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2474"></span><span>
</span><span id="line-2475"></span><span class="hs-comment">-- | Generate code for a 4-register FMA instruction,</span><span>
</span><span id="line-2476"></span><span class="hs-comment">-- e.g. @fmadd rt ra rc rb := rt &lt;- ra * rc + rb@.</span><span>
</span><span id="line-2477"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#fma_code"><span class="hs-identifier hs-type">fma_code</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-2478"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#Format"><span class="hs-identifier hs-type">Format</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.Instr.html#Instr"><span class="hs-identifier hs-type">Instr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2479"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-2480"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-2481"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-2482"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2483"></span><span id="fma_code"><span class="annot"><span class="annottext">fma_code :: Width
-&gt; (Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr)
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; CmmExpr
-&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#fma_code"><span class="hs-identifier hs-var hs-var">fma_code</span></a></span></span><span> </span><span id="local-6989586621682865397"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865397"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682865398"><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682865398"><span class="hs-identifier hs-var">instr</span></a></span></span><span> </span><span id="local-6989586621682865399"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865399"><span class="hs-identifier hs-var">ra</span></a></span></span><span> </span><span id="local-6989586621682865400"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865400"><span class="hs-identifier hs-var">rc</span></a></span></span><span> </span><span id="local-6989586621682865401"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865401"><span class="hs-identifier hs-var">rb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2484"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865402"><span class="annot"><span class="annottext">rep :: Format
</span><a href="#local-6989586621682865402"><span class="hs-identifier hs-var hs-var hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#floatFormat"><span class="hs-identifier hs-var">floatFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865397"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-2485"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865403"><span class="annot"><a href="#local-6989586621682865403"><span class="hs-identifier hs-var">src1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865404"><span class="annot"><a href="#local-6989586621682865404"><span class="hs-identifier hs-var">code1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865399"><span class="hs-identifier hs-var">ra</span></a></span><span>
</span><span id="line-2486"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865405"><span class="annot"><a href="#local-6989586621682865405"><span class="hs-identifier hs-var">src2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865406"><span class="annot"><a href="#local-6989586621682865406"><span class="hs-identifier hs-var">code2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865400"><span class="hs-identifier hs-type">rc</span></a></span><span>
</span><span id="line-2487"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865407"><span class="annot"><a href="#local-6989586621682865407"><span class="hs-identifier hs-var">src3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865408"><span class="annot"><a href="#local-6989586621682865408"><span class="hs-identifier hs-var">code3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865401"><span class="hs-identifier hs-type">rb</span></a></span><span>
</span><span id="line-2488"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865409"><span class="annot"><a href="#local-6989586621682865409"><span class="hs-identifier hs-var hs-var">instrCode</span></a></span></span><span> </span><span id="local-6989586621682865410"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865410"><span class="hs-identifier hs-var">rt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2489"></span><span>          </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865404"><span class="hs-identifier hs-var">code1</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>
</span><span id="line-2490"></span><span>          </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865406"><span class="hs-identifier hs-var">code2</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span>
</span><span id="line-2491"></span><span>          </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865408"><span class="hs-identifier hs-var">code3</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="#local-6989586621682865398"><span class="hs-identifier hs-var">instr</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865402"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865410"><span class="hs-identifier hs-var">rt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865403"><span class="hs-identifier hs-var">src1</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865405"><span class="hs-identifier hs-var">src2</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865407"><span class="hs-identifier hs-var">src3</span></a></span><span>
</span><span id="line-2492"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865402"><span class="hs-identifier hs-type">rep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865409"><span class="hs-identifier hs-type">instrCode</span></a></span><span>
</span><span id="line-2493"></span><span>
</span><span id="line-2494"></span><span class="hs-comment">-- There is no &quot;remainder&quot; instruction on the PPC, so we have to do</span><span>
</span><span id="line-2495"></span><span class="hs-comment">-- it the hard way.</span><span>
</span><span id="line-2496"></span><span class="hs-comment">-- The &quot;sgn&quot; parameter is the signedness for the division instruction</span><span>
</span><span id="line-2497"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#remainderCode"><span class="hs-identifier hs-type">remainderCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-2498"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Platform.Reg.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#InstrBlock"><span class="hs-identifier hs-type">InstrBlock</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2499"></span><span id="remainderCode"><span class="annot"><span class="annottext">remainderCode :: Width
-&gt; Bool -&gt; Reg -&gt; CmmExpr -&gt; CmmExpr -&gt; NatM (Reg -&gt; OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#remainderCode"><span class="hs-identifier hs-var hs-var">remainderCode</span></a></span></span><span> </span><span id="local-6989586621682865411"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865411"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span id="local-6989586621682865412"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865412"><span class="hs-identifier hs-var">sgn</span></a></span></span><span> </span><span id="local-6989586621682865413"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865413"><span class="hs-identifier hs-var">reg_q</span></a></span></span><span> </span><span id="local-6989586621682865414"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865414"><span class="hs-identifier hs-var">arg_x</span></a></span></span><span> </span><span id="local-6989586621682865415"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865415"><span class="hs-identifier hs-var">arg_y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2500"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865416"><span class="annot"><span class="annottext">op_len :: Width
</span><a href="#local-6989586621682865416"><span class="hs-identifier hs-var hs-var hs-var">op_len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Width
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865411"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-2501"></span><span>      </span><span id="local-6989586621682865417"><span class="annot"><span class="annottext">fmt :: Format
</span><a href="#local-6989586621682865417"><span class="hs-identifier hs-var hs-var hs-var">fmt</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Format
</span><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-var">intFormat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865416"><span class="hs-identifier hs-var">op_len</span></a></span><span>
</span><span id="line-2502"></span><span>      </span><span id="local-6989586621682865418"><span class="annot"><span class="annottext">extend :: Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682865418"><span class="hs-identifier hs-var hs-var hs-var">extend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865412"><span class="hs-identifier hs-var">sgn</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendSExpr"><span class="hs-identifier hs-var">extendSExpr</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#extendUExpr"><span class="hs-identifier hs-var">extendUExpr</span></a></span><span>
</span><span id="line-2503"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682865419"><span class="annot"><a href="#local-6989586621682865419"><span class="hs-identifier hs-var">x_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865420"><span class="annot"><a href="#local-6989586621682865420"><span class="hs-identifier hs-var">x_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; CmmExpr -&gt; CmmExpr
</span><a href="#local-6989586621682865418"><span class="hs-identifier hs-var">extend</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865411"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865416"><span class="hs-identifier hs-var">op_len</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865414"><span class="hs-identifier hs-var">arg_x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2504"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682865421"><span class="annot"><a href="#local-6989586621682865421"><span class="hs-identifier hs-var">y_reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865422"><span class="annot"><a href="#local-6989586621682865422"><span class="hs-identifier hs-var">y_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682865418"><span class="hs-identifier hs-type">extend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865411"><span class="hs-identifier hs-type">rep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865416"><span class="hs-identifier hs-type">op_len</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865415"><span class="hs-identifier hs-type">arg_y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2505"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682865423"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865423"><span class="hs-identifier hs-var">reg_r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865422"><span class="hs-identifier hs-var">y_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865420"><span class="hs-identifier hs-var">x_code</span></a></span><span>
</span><span id="line-2506"></span><span>                     </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Bool -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#DIV"><span class="hs-identifier hs-var">DIV</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865417"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682865412"><span class="hs-identifier hs-var">sgn</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865413"><span class="hs-identifier hs-var">reg_q</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865419"><span class="hs-identifier hs-var">x_reg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865421"><span class="hs-identifier hs-var">y_reg</span></a></span><span>
</span><span id="line-2507"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MULL"><span class="hs-identifier hs-var">MULL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="#local-6989586621682865417"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865423"><span class="hs-identifier hs-var">reg_r</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865413"><span class="hs-identifier hs-var">reg_q</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865421"><span class="hs-identifier hs-var">y_reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2508"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SUBF"><span class="hs-identifier hs-var">SUBF</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865423"><span class="hs-identifier hs-var">reg_r</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865423"><span class="hs-identifier hs-var">reg_r</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865419"><span class="hs-identifier hs-var">x_reg</span></a></span><span>
</span><span id="line-2509"></span><span>                                  </span><span class="hs-special">]</span><span>
</span><span id="line-2510"></span><span>
</span><span id="line-2511"></span><span>
</span><span id="line-2512"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceInt2FP"><span class="hs-identifier hs-type">coerceInt2FP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2513"></span><span id="coerceInt2FP"><span class="annot"><span class="annottext">coerceInt2FP :: Width -&gt; Width -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceInt2FP"><span class="hs-identifier hs-var hs-var">coerceInt2FP</span></a></span></span><span> </span><span id="local-6989586621682865424"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865424"><span class="hs-identifier hs-var">fromRep</span></a></span></span><span> </span><span id="local-6989586621682865425"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865425"><span class="hs-identifier hs-var">toRep</span></a></span></span><span> </span><span id="local-6989586621682865426"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865426"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2514"></span><span>    </span><span id="local-6989586621682865427"><span class="annot"><a href="#local-6989586621682865427"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-2515"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865428"><span class="annot"><a href="#local-6989586621682865428"><span class="hs-identifier hs-var hs-var">arch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Arch
</span><a href="GHC.Platform.html#platformArch"><span class="hs-identifier hs-var">platformArch</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865427"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2516"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceInt2FP%27"><span class="hs-identifier hs-type">coerceInt2FP'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865428"><span class="hs-identifier hs-type">arch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865424"><span class="hs-identifier hs-type">fromRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865425"><span class="hs-identifier hs-type">toRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865426"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-2517"></span><span>
</span><span id="line-2518"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceInt2FP%27"><span class="hs-identifier hs-type">coerceInt2FP'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Arch</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2519"></span><span id="coerceInt2FP%27"><span class="annot"><span class="annottext">coerceInt2FP' :: Arch -&gt; Width -&gt; Width -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceInt2FP%27"><span class="hs-identifier hs-var hs-var">coerceInt2FP'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier hs-var">ArchPPC</span></span><span> </span><span id="local-6989586621682865430"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865430"><span class="hs-identifier hs-var">fromRep</span></a></span></span><span> </span><span id="local-6989586621682865431"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865431"><span class="hs-identifier hs-var">toRep</span></a></span></span><span> </span><span id="local-6989586621682865432"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865432"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2520"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865433"><span class="annot"><a href="#local-6989586621682865433"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865434"><span class="annot"><a href="#local-6989586621682865434"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865432"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2521"></span><span>    </span><span id="local-6989586621682865435"><span class="annot"><a href="#local-6989586621682865435"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewLabelNat"><span class="hs-identifier hs-type">getNewLabelNat</span></a></span><span>
</span><span id="line-2522"></span><span>    </span><span id="local-6989586621682865436"><span class="annot"><a href="#local-6989586621682865436"><span class="hs-identifier hs-var">itmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-type">II32</span></a></span><span>
</span><span id="line-2523"></span><span>    </span><span id="local-6989586621682865437"><span class="annot"><a href="#local-6989586621682865437"><span class="hs-identifier hs-var">ftmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-type">FF64</span></a></span><span>
</span><span id="line-2524"></span><span>    </span><span id="local-6989586621682865438"><span class="annot"><a href="#local-6989586621682865438"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getConfig"><span class="hs-identifier hs-type">getConfig</span></a></span><span>
</span><span id="line-2525"></span><span>    </span><span id="local-6989586621682865439"><span class="annot"><a href="#local-6989586621682865439"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-type">getPlatform</span></a></span><span>
</span><span id="line-2526"></span><span>    </span><span id="local-6989586621682865440"><span class="annot"><a href="#local-6989586621682865440"><span class="hs-identifier hs-var">dynRef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html#cmmMakeDynamicReference"><span class="hs-identifier hs-type">cmmMakeDynamicReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865438"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PIC.html#DataReference"><span class="hs-identifier hs-type">DataReference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865435"><span class="hs-identifier hs-type">lbl</span></a></span><span>
</span><span id="line-2527"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Amode"><span class="hs-identifier hs-type">Amode</span></a></span><span> </span><span id="local-6989586621682865441"><span class="annot"><a href="#local-6989586621682865441"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621682865442"><span class="annot"><a href="#local-6989586621682865442"><span class="hs-identifier hs-var">addr_code</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getAmode"><span class="hs-identifier hs-type">getAmode</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865440"><span class="hs-identifier hs-type">dynRef</span></a></span><span>
</span><span id="line-2528"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-2529"></span><span>        </span><span id="local-6989586621682865443"><span class="annot"><a href="#local-6989586621682865443"><span class="hs-identifier hs-var hs-var">code'</span></a></span></span><span> </span><span id="local-6989586621682865444"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865444"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865434"><span class="hs-identifier hs-var">code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865445"><span class="hs-identifier hs-var">maybe_exts</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2530"></span><span>                </span><span class="annot"><span class="annottext">Section -&gt; RawCmmStatics -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LDATA"><span class="hs-identifier hs-var">LDATA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SectionType -&gt; CLabel -&gt; Section
</span><a href="GHC.Cmm.html#Section"><span class="hs-identifier hs-var">Section</span></a></span><span> </span><span class="annot"><span class="annottext">SectionType
</span><a href="GHC.Cmm.html#ReadOnlyData"><span class="hs-identifier hs-var">ReadOnlyData</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865435"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RawCmmStatics -&gt; Instr) -&gt; RawCmmStatics -&gt; Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; [CmmStatic] -&gt; RawCmmStatics
forall (rawOnly :: Bool).
CLabel -&gt; [CmmStatic] -&gt; GenCmmStatics rawOnly
</span><a href="GHC.Cmm.html#CmmStaticsRaw"><span class="hs-identifier hs-var">CmmStaticsRaw</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621682865435"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-2531"></span><span>                                 </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmLit -&gt; CmmStatic
</span><a href="GHC.Cmm.html#CmmStaticLit"><span class="hs-identifier hs-var">CmmStaticLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Width -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-var">CmmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0x43300000</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2532"></span><span>                                  </span><span class="annot"><span class="annottext">CmmLit -&gt; CmmStatic
</span><a href="GHC.Cmm.html#CmmStaticLit"><span class="hs-identifier hs-var">CmmStaticLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Width -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-var">CmmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0x80000000</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-2533"></span><span>                </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#XORIS"><span class="hs-identifier hs-var">XORIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865436"><span class="hs-identifier hs-var">itmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865433"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0x8000</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2534"></span><span>                </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865436"><span class="hs-identifier hs-var">itmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#spRel"><span class="hs-identifier hs-var">spRel</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865439"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2535"></span><span>                </span><span class="annot"><span class="annottext">Reg -&gt; Imm -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LIS"><span class="hs-identifier hs-var">LIS</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865436"><span class="hs-identifier hs-var">itmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0x4330</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2536"></span><span>                </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865436"><span class="hs-identifier hs-var">itmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#spRel"><span class="hs-identifier hs-var">spRel</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865439"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2537"></span><span>                </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-var">FF64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865437"><span class="hs-identifier hs-var">ftmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#spRel"><span class="hs-identifier hs-var">spRel</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865439"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span>
</span><span id="line-2538"></span><span>            </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865442"><span class="hs-identifier hs-var">addr_code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2539"></span><span>                </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-var">FF64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865444"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">AddrMode
</span><a href="#local-6989586621682865441"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2540"></span><span>                </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FSUB"><span class="hs-identifier hs-var">FSUB</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-var">FF64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865444"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865437"><span class="hs-identifier hs-var">ftmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865444"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-2541"></span><span>            </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682865448"><span class="hs-identifier hs-var">maybe_frsp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865444"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-2542"></span><span>
</span><span id="line-2543"></span><span>        </span><span id="local-6989586621682865445"><span class="annot"><a href="#local-6989586621682865445"><span class="hs-identifier hs-var hs-var">maybe_exts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865430"><span class="hs-identifier hs-var">fromRep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2544"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(Instr -&gt; OrdList Instr) -&gt; Instr -&gt; OrdList Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#EXTS"><span class="hs-identifier hs-var">EXTS</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II8"><span class="hs-identifier hs-var">II8</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865433"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865433"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-2545"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(Instr -&gt; OrdList Instr) -&gt; Instr -&gt; OrdList Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#EXTS"><span class="hs-identifier hs-var">EXTS</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II16"><span class="hs-identifier hs-var">II16</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865433"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865433"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-2546"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-2547"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; OrdList Instr
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.coerceInt2FP: no match&quot;</span></span><span>
</span><span id="line-2548"></span><span>
</span><span id="line-2549"></span><span>        </span><span id="local-6989586621682865448"><span class="annot"><a href="#local-6989586621682865448"><span class="hs-identifier hs-var hs-var">maybe_frsp</span></a></span></span><span> </span><span id="local-6989586621682865449"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865449"><span class="hs-identifier hs-var">dst</span></a></span></span><span>
</span><span id="line-2550"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865431"><span class="hs-identifier hs-var">toRep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2551"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(Instr -&gt; OrdList Instr) -&gt; Instr -&gt; OrdList Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FRSP"><span class="hs-identifier hs-var">FRSP</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865449"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865449"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-2552"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-2553"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; OrdList Instr
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.coerceInt2FP: no match&quot;</span></span><span>
</span><span id="line-2554"></span><span>
</span><span id="line-2555"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#floatFormat"><span class="hs-identifier hs-type">floatFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865431"><span class="hs-identifier hs-type">toRep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682865443"><span class="hs-identifier hs-type">code'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2556"></span><span>
</span><span id="line-2557"></span><span class="hs-comment">-- On an ELF v1 Linux we use the compiler doubleword in the stack frame</span><span>
</span><span id="line-2558"></span><span class="hs-comment">-- this is the TOC pointer doubleword on ELF v2 Linux. The latter is only</span><span>
</span><span id="line-2559"></span><span class="hs-comment">-- set right before a call and restored right after return from the call.</span><span>
</span><span id="line-2560"></span><span class="hs-comment">-- So it is fine.</span><span>
</span><span id="line-2561"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceInt2FP%27"><span class="hs-identifier hs-var">coerceInt2FP'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ArchPPC_64</span></span><span> </span><span class="annot"><span class="annottext">PPC_64ABI
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682865450"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865450"><span class="hs-identifier hs-var">fromRep</span></a></span></span><span> </span><span id="local-6989586621682865451"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865451"><span class="hs-identifier hs-var">toRep</span></a></span></span><span> </span><span id="local-6989586621682865452"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865452"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2562"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865453"><span class="annot"><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865454"><span class="annot"><a href="#local-6989586621682865454"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; NatM (Reg, OrdList Instr)
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-var">getSomeReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865452"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2563"></span><span>    </span><span id="local-6989586621682865455"><span class="annot"><a href="#local-6989586621682865455"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-type">getPlatform</span></a></span><span>
</span><span id="line-2564"></span><span>    </span><span id="local-6989586621682865456"><span class="annot"><a href="#local-6989586621682865456"><span class="hs-identifier hs-var">upper</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span>
</span><span id="line-2565"></span><span>    </span><span id="local-6989586621682865457"><span class="annot"><a href="#local-6989586621682865457"><span class="hs-identifier hs-var">lower</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-type">II64</span></a></span><span>
</span><span id="line-2566"></span><span>    </span><span id="local-6989586621682865458"><span class="annot"><a href="#local-6989586621682865458"><span class="hs-identifier hs-var">l1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-2567"></span><span>    </span><span id="local-6989586621682865459"><span class="annot"><a href="#local-6989586621682865459"><span class="hs-identifier hs-var">l2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getBlockIdNat"><span class="hs-identifier hs-type">getBlockIdNat</span></a></span><span>
</span><span id="line-2568"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-2569"></span><span>        </span><span id="local-6989586621682865460"><span class="annot"><a href="#local-6989586621682865460"><span class="hs-identifier hs-var hs-var">code'</span></a></span></span><span> </span><span id="local-6989586621682865461"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865461"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865454"><span class="hs-identifier hs-var">code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865462"><span class="hs-identifier hs-var">maybe_exts</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2570"></span><span>                </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#spRel"><span class="hs-identifier hs-var">spRel</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865455"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2571"></span><span>                </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-var">FF64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865461"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#spRel"><span class="hs-identifier hs-var">spRel</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865455"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2572"></span><span>                </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FCFID"><span class="hs-identifier hs-var">FCFID</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865461"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865461"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-2573"></span><span>            </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; OrdList Instr
</span><a href="#local-6989586621682865464"><span class="hs-identifier hs-var">maybe_frsp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865461"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-2574"></span><span>
</span><span id="line-2575"></span><span>        </span><span id="local-6989586621682865462"><span class="annot"><a href="#local-6989586621682865462"><span class="hs-identifier hs-var hs-var">maybe_exts</span></a></span></span><span>
</span><span id="line-2576"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865450"><span class="hs-identifier hs-var">fromRep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2577"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(Instr -&gt; OrdList Instr) -&gt; Instr -&gt; OrdList Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#EXTS"><span class="hs-identifier hs-var">EXTS</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II8"><span class="hs-identifier hs-var">II8</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-2578"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(Instr -&gt; OrdList Instr) -&gt; Instr -&gt; OrdList Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#EXTS"><span class="hs-identifier hs-var">EXTS</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II16"><span class="hs-identifier hs-var">II16</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-2579"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(Instr -&gt; OrdList Instr) -&gt; Instr -&gt; OrdList Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#EXTS"><span class="hs-identifier hs-var">EXTS</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-2580"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865451"><span class="hs-identifier hs-var">toRep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2581"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#SRA"><span class="hs-identifier hs-var">SRA</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865456"><span class="hs-identifier hs-var">upper</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">53</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2582"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Int -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CLRLI"><span class="hs-identifier hs-var">CLRLI</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865457"><span class="hs-identifier hs-var">lower</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">53</span></span><span>
</span><span id="line-2583"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865456"><span class="hs-identifier hs-var">upper</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865456"><span class="hs-identifier hs-var">upper</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2584"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ADD"><span class="hs-identifier hs-var">ADD</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865457"><span class="hs-identifier hs-var">lower</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865457"><span class="hs-identifier hs-var">lower</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2047</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2585"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CMPL"><span class="hs-identifier hs-var">CMPL</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865456"><span class="hs-identifier hs-var">upper</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imm -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIImm"><span class="hs-identifier hs-var">RIImm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Imm
</span><a href="GHC.CmmToAsm.PPC.Regs.html#ImmInt"><span class="hs-identifier hs-var">ImmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2586"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; RI -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#OR"><span class="hs-identifier hs-var">OR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865457"><span class="hs-identifier hs-var">lower</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865457"><span class="hs-identifier hs-var">lower</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reg -&gt; RI
</span><a href="GHC.CmmToAsm.PPC.Instr.html#RIReg"><span class="hs-identifier hs-var">RIReg</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2587"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; Reg -&gt; Int -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#CLRRI"><span class="hs-identifier hs-var">CLRRI</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865457"><span class="hs-identifier hs-var">lower</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865457"><span class="hs-identifier hs-var">lower</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span>
</span><span id="line-2588"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#LTT"><span class="hs-identifier hs-var">LTT</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682865459"><span class="hs-identifier hs-var">l2</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2589"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682865458"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2590"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682865458"><span class="hs-identifier hs-var">l1</span></a></span><span>
</span><span id="line-2591"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#MR"><span class="hs-identifier hs-var">MR</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865453"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865457"><span class="hs-identifier hs-var">lower</span></a></span><span>
</span><span id="line-2592"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Cond -&gt; BlockId -&gt; Maybe Bool -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#BCC"><span class="hs-identifier hs-var">BCC</span></a></span><span> </span><span class="annot"><span class="annottext">Cond
</span><a href="GHC.CmmToAsm.PPC.Cond.html#ALWAYS"><span class="hs-identifier hs-var">ALWAYS</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682865459"><span class="hs-identifier hs-var">l2</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2593"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#NEWBLOCK"><span class="hs-identifier hs-var">NEWBLOCK</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621682865459"><span class="hs-identifier hs-var">l2</span></a></span><span>
</span><span id="line-2594"></span><span>                                    </span><span class="hs-special">]</span><span>
</span><span id="line-2595"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-2596"></span><span>              </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; OrdList Instr
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.coerceInt2FP: no match&quot;</span></span><span>
</span><span id="line-2597"></span><span>
</span><span id="line-2598"></span><span>        </span><span id="local-6989586621682865464"><span class="annot"><a href="#local-6989586621682865464"><span class="hs-identifier hs-var hs-var">maybe_frsp</span></a></span></span><span> </span><span id="local-6989586621682865465"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865465"><span class="hs-identifier hs-var">dst</span></a></span></span><span>
</span><span id="line-2599"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865451"><span class="hs-identifier hs-var">toRep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2600"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Instr -&gt; OrdList Instr
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(Instr -&gt; OrdList Instr) -&gt; Instr -&gt; OrdList Instr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FRSP"><span class="hs-identifier hs-var">FRSP</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865465"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865465"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-2601"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span>
</span><span id="line-2602"></span><span>                        </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; OrdList Instr
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.coerceInt2FP: no match&quot;</span></span><span>
</span><span id="line-2603"></span><span>
</span><span id="line-2604"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#floatFormat"><span class="hs-identifier hs-type">floatFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865451"><span class="hs-identifier hs-type">toRep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682865460"><span class="hs-identifier hs-type">code'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2605"></span><span>
</span><span id="line-2606"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceInt2FP%27"><span class="hs-identifier hs-var">coerceInt2FP'</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM Register
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.coerceInt2FP: unknown arch&quot;</span></span><span>
</span><span id="line-2607"></span><span>
</span><span id="line-2608"></span><span>
</span><span id="line-2609"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceFP2Int"><span class="hs-identifier hs-type">coerceFP2Int</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2610"></span><span id="coerceFP2Int"><span class="annot"><span class="annottext">coerceFP2Int :: Width -&gt; Width -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceFP2Int"><span class="hs-identifier hs-var hs-var">coerceFP2Int</span></a></span></span><span> </span><span id="local-6989586621682865466"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865466"><span class="hs-identifier hs-var">fromRep</span></a></span></span><span> </span><span id="local-6989586621682865467"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865467"><span class="hs-identifier hs-var">toRep</span></a></span></span><span> </span><span id="local-6989586621682865468"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865468"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2611"></span><span>    </span><span id="local-6989586621682865469"><span class="annot"><a href="#local-6989586621682865469"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-2612"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682865470"><span class="annot"><a href="#local-6989586621682865470"><span class="hs-identifier hs-var hs-var">arch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">Platform -&gt; Arch
</span><a href="GHC.Platform.html#platformArch"><span class="hs-identifier hs-var">platformArch</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865469"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2613"></span><span>    </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceFP2Int%27"><span class="hs-identifier hs-type">coerceFP2Int'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865470"><span class="hs-identifier hs-type">arch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865466"><span class="hs-identifier hs-type">fromRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865467"><span class="hs-identifier hs-type">toRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865468"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-2614"></span><span>
</span><span id="line-2615"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceFP2Int%27"><span class="hs-identifier hs-type">coerceFP2Int'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Arch</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#NatM"><span class="hs-identifier hs-type">NatM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Register"><span class="hs-identifier hs-type">Register</span></a></span><span>
</span><span id="line-2616"></span><span id="coerceFP2Int%27"><span class="annot"><span class="annottext">coerceFP2Int' :: Arch -&gt; Width -&gt; Width -&gt; CmmExpr -&gt; NatM Register
</span><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceFP2Int%27"><span class="hs-identifier hs-var hs-var">coerceFP2Int'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier hs-var">ArchPPC</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682865472"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865472"><span class="hs-identifier hs-var">toRep</span></a></span></span><span> </span><span id="local-6989586621682865473"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865473"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2617"></span><span>    </span><span id="local-6989586621682865474"><span class="annot"><a href="#local-6989586621682865474"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-2618"></span><span>    </span><span class="hs-comment">-- the reps don't really matter: F*-&gt;FF64 and II32-&gt;I* are no-ops</span><span>
</span><span id="line-2619"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865475"><span class="annot"><a href="#local-6989586621682865475"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865476"><span class="annot"><a href="#local-6989586621682865476"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865473"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-2620"></span><span>    </span><span id="local-6989586621682865477"><span class="annot"><a href="#local-6989586621682865477"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-type">FF64</span></a></span><span>
</span><span id="line-2621"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-2622"></span><span>        </span><span id="local-6989586621682865478"><span class="annot"><a href="#local-6989586621682865478"><span class="hs-identifier hs-var hs-var">code'</span></a></span></span><span> </span><span id="local-6989586621682865479"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865479"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865476"><span class="hs-identifier hs-var">code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2623"></span><span>                </span><span class="hs-comment">-- convert to int in FP reg</span><span>
</span><span id="line-2624"></span><span>            </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FCTIWZ"><span class="hs-identifier hs-var">FCTIWZ</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865477"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865475"><span class="hs-identifier hs-var">src</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2625"></span><span>                </span><span class="hs-comment">-- store value (64bit) from FP to stack</span><span>
</span><span id="line-2626"></span><span>            </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-var">FF64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865477"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#spRel"><span class="hs-identifier hs-var">spRel</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865474"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2627"></span><span>                </span><span class="hs-comment">-- read low word of value (high word is undefined)</span><span>
</span><span id="line-2628"></span><span>            </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II32"><span class="hs-identifier hs-var">II32</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865479"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#spRel"><span class="hs-identifier hs-var">spRel</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865474"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2629"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-type">intFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865472"><span class="hs-identifier hs-type">toRep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682865478"><span class="hs-identifier hs-type">code'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2630"></span><span>
</span><span id="line-2631"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceFP2Int%27"><span class="hs-identifier hs-var">coerceFP2Int'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ArchPPC_64</span></span><span> </span><span class="annot"><span class="annottext">PPC_64ABI
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682865481"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621682865481"><span class="hs-identifier hs-var">toRep</span></a></span></span><span> </span><span id="local-6989586621682865482"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621682865482"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2632"></span><span>    </span><span id="local-6989586621682865483"><span class="annot"><a href="#local-6989586621682865483"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NatM Platform
</span><a href="GHC.CmmToAsm.Monad.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-2633"></span><span>    </span><span class="hs-comment">-- the reps don't really matter: F*-&gt;FF64 and II64-&gt;I* are no-ops</span><span>
</span><span id="line-2634"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682865484"><span class="annot"><a href="#local-6989586621682865484"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682865485"><span class="annot"><a href="#local-6989586621682865485"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#getSomeReg"><span class="hs-identifier hs-type">getSomeReg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865482"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-2635"></span><span>    </span><span id="local-6989586621682865486"><span class="annot"><a href="#local-6989586621682865486"><span class="hs-identifier hs-var">tmp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Monad.html#getNewRegNat"><span class="hs-identifier hs-type">getNewRegNat</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-type">FF64</span></a></span><span>
</span><span id="line-2636"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-2637"></span><span>        </span><span id="local-6989586621682865487"><span class="annot"><a href="#local-6989586621682865487"><span class="hs-identifier hs-var hs-var">code'</span></a></span></span><span> </span><span id="local-6989586621682865488"><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865488"><span class="hs-identifier hs-var">dst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList Instr
</span><a href="#local-6989586621682865485"><span class="hs-identifier hs-var">code</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList Instr -&gt; OrdList Instr -&gt; OrdList Instr
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">[Instr] -&gt; OrdList Instr
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-2638"></span><span>                </span><span class="hs-comment">-- convert to int in FP reg</span><span>
</span><span id="line-2639"></span><span>            </span><span class="annot"><span class="annottext">Reg -&gt; Reg -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#FCTIDZ"><span class="hs-identifier hs-var">FCTIDZ</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865486"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865484"><span class="hs-identifier hs-var">src</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2640"></span><span>                </span><span class="hs-comment">-- store value (64bit) from FP to compiler word on stack</span><span>
</span><span id="line-2641"></span><span>            </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#ST"><span class="hs-identifier hs-var">ST</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#FF64"><span class="hs-identifier hs-var">FF64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865486"><span class="hs-identifier hs-var">tmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#spRel"><span class="hs-identifier hs-var">spRel</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865483"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2642"></span><span>            </span><span class="annot"><span class="annottext">Format -&gt; Reg -&gt; AddrMode -&gt; Instr
</span><a href="GHC.CmmToAsm.PPC.Instr.html#LD"><span class="hs-identifier hs-var">LD</span></a></span><span> </span><span class="annot"><span class="annottext">Format
</span><a href="GHC.CmmToAsm.Format.html#II64"><span class="hs-identifier hs-var">II64</span></a></span><span> </span><span class="annot"><span class="annottext">Reg
</span><a href="#local-6989586621682865488"><span class="hs-identifier hs-var">dst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; AddrMode
</span><a href="GHC.CmmToAsm.PPC.Regs.html#spRel"><span class="hs-identifier hs-var">spRel</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682865483"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2643"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToAsm.Format.html#intFormat"><span class="hs-identifier hs-type">intFormat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682865481"><span class="hs-identifier hs-type">toRep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682865487"><span class="hs-identifier hs-type">code'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2644"></span><span>
</span><span id="line-2645"></span><span class="annot"><a href="GHC.CmmToAsm.PPC.CodeGen.html#coerceFP2Int%27"><span class="hs-identifier hs-var">coerceFP2Int'</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NatM Register
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PPC.CodeGen.coerceFP2Int: unknown arch&quot;</span></span><span>
</span><span id="line-2646"></span><span>
</span><span id="line-2647"></span><span class="hs-comment">-- Note [.LCTOC1 in PPC PIC code]</span><span>
</span><span id="line-2648"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-2649"></span><span class="hs-comment">-- The .LCTOC1 label is defined to point 32768 bytes into the GOT table</span><span>
</span><span id="line-2650"></span><span class="hs-comment">-- to make the most of the PPC's 16-bit displacements.</span><span>
</span><span id="line-2651"></span><span class="hs-comment">-- As 16-bit signed offset is used (usually via addi/lwz instructions)</span><span>
</span><span id="line-2652"></span><span class="hs-comment">-- first element will have '-32768' offset against .LCTOC1.</span><span>
</span><span id="line-2653"></span><span>
</span><span id="line-2654"></span><span class="hs-comment">-- Note [implicit register in PPC PIC code]</span><span>
</span><span id="line-2655"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-2656"></span><span class="hs-comment">-- PPC generates calls by labels in assembly</span><span>
</span><span id="line-2657"></span><span class="hs-comment">-- in form of:</span><span>
</span><span id="line-2658"></span><span class="hs-comment">--     bl puts+32768@plt</span><span>
</span><span id="line-2659"></span><span class="hs-comment">-- in this form it's not seen directly (by GHC NCG)</span><span>
</span><span id="line-2660"></span><span class="hs-comment">-- that r30 (PicBaseReg) is used,</span><span>
</span><span id="line-2661"></span><span class="hs-comment">-- but r30 is a required part of PLT code setup:</span><span>
</span><span id="line-2662"></span><span class="hs-comment">--   puts+32768@plt:</span><span>
</span><span id="line-2663"></span><span class="hs-comment">--       lwz     r11,-30484(r30) ; offset in .LCTOC1</span><span>
</span><span id="line-2664"></span><span class="hs-comment">--       mtctr   r11</span><span>
</span><span id="line-2665"></span><span class="hs-comment">--       bctr</span><span>
</span><span id="line-2666"></span></pre></body></html>