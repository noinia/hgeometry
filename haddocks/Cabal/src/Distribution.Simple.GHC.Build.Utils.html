<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html"><span class="hs-identifier">Distribution.Simple.GHC.Build.Utils</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Compat.Prelude.html"><span class="hs-identifier">Distribution.Compat.Prelude</span></a></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Prelude.html"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">msum</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Char.html"><span class="hs-identifier">Data.Char</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">isLower</span></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.ModuleName.html"><span class="hs-identifier">Distribution.ModuleName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.ModuleName.html#ModuleName"><span class="hs-identifier">ModuleName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.ModuleName.html"><span class="hs-identifier">Distribution.ModuleName</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ModuleName</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.PackageDescription.html"><span class="hs-identifier">Distribution.PackageDescription</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PD</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.PackageDescription.Utils.html"><span class="hs-identifier">Distribution.PackageDescription.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.PackageDescription.Utils.html#cabalBug"><span class="hs-identifier">cabalBug</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.BuildPaths.html"><span class="hs-identifier">Distribution.Simple.BuildPaths</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.BuildWay.html"><span class="hs-identifier">Distribution.Simple.BuildWay</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html"><span class="hs-identifier">Distribution.Simple.Compiler</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Distribution.Simple.GHC.Internal.html"><span class="hs-identifier">Distribution.Simple.GHC.Internal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Internal</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.GHC.html"><span class="hs-identifier">Distribution.Simple.Program.GHC</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Setup.Common.html"><span class="hs-identifier">Distribution.Simple.Setup.Common</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.Utils.html"><span class="hs-identifier">Distribution.Simple.Utils</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.System.html"><span class="hs-identifier">Distribution.System</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html"><span class="hs-identifier">Distribution.Types.LocalBuildInfo</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier">LocalBuildInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier">hostPlatform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html"><span class="hs-identifier">Distribution.Utils.Path</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html"><span class="hs-identifier">Distribution.Verbosity</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.html"><span class="hs-identifier">System.FilePath</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#replaceExtension"><span class="hs-identifier">replaceExtension</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#takeExtension"><span class="hs-identifier">takeExtension</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-comment">-- | Find the path to the entry point of an executable (typically specified in</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- @main-is@, and found in @hs-source-dirs@ -- yes, even when @main-is@ is not a Haskell file).</span><span>
</span><span id="line-35"></span><span id="local-6989586621679551789"><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#findExecutableMain"><span class="hs-identifier hs-type">findExecutableMain</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier hs-type">SymbolicPath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#CWD"><span class="hs-identifier hs-type">CWD</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Dir"><span class="hs-identifier hs-type">Dir</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier hs-type">Pkg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier hs-type">SymbolicPath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier hs-type">Pkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Dir"><span class="hs-identifier hs-type">Dir</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679551789"><span class="hs-identifier hs-type">build</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Build directory</span></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.BuildInfo.html#BuildInfo"><span class="hs-identifier hs-type">BuildInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#RelativePath"><span class="hs-identifier hs-type">RelativePath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#File"><span class="hs-identifier hs-type">File</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The build info and module path of an executable-like component (Exe, Test, Bench)</span></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier hs-type">SymbolicPath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier hs-type">Pkg</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#File"><span class="hs-identifier hs-type">File</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The path to the main source file.</span></span><span>
</span><span id="line-44"></span><span id="findExecutableMain"><span class="annot"><span class="annottext">findExecutableMain :: forall build.
Verbosity
-&gt; Maybe (SymbolicPath CWD ('Dir Pkg))
-&gt; SymbolicPath Pkg ('Dir build)
-&gt; (BuildInfo, RelativePath Source 'File)
-&gt; IO (SymbolicPath Pkg 'File)
</span><a href="Distribution.Simple.GHC.Build.Utils.html#findExecutableMain"><span class="hs-identifier hs-var hs-var">findExecutableMain</span></a></span></span><span> </span><span id="local-6989586621679551915"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679551915"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679551916"><span class="annot"><span class="annottext">Maybe (SymbolicPath CWD ('Dir Pkg))
</span><a href="#local-6989586621679551916"><span class="hs-identifier hs-var">mbWorkDir</span></a></span></span><span> </span><span id="local-6989586621679551917"><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir build)
</span><a href="#local-6989586621679551917"><span class="hs-identifier hs-var">buildDir</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679551918"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679551918"><span class="hs-identifier hs-var">bnfo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679551919"><span class="annot"><span class="annottext">RelativePath Source 'File
</span><a href="#local-6989586621679551919"><span class="hs-identifier hs-var">modPath</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><span class="annottext">Verbosity
-&gt; Maybe (SymbolicPath CWD ('Dir Pkg))
-&gt; [SymbolicPathX 'AllowAbsolute Pkg ('Dir Source)]
-&gt; RelativePath Source 'File
-&gt; IO (SymbolicPath Pkg 'File)
forall searchDir (allowAbsolute :: AllowAbsolute).
Verbosity
-&gt; Maybe (SymbolicPath CWD ('Dir Pkg))
-&gt; [SymbolicPathX allowAbsolute Pkg ('Dir searchDir)]
-&gt; RelativePath searchDir 'File
-&gt; IO (SymbolicPathX allowAbsolute Pkg 'File)
</span><a href="Distribution.Simple.Utils.html#findFileCwd"><span class="hs-identifier hs-var">findFileCwd</span></a></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679551915"><span class="hs-identifier hs-var">verbosity</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SymbolicPath CWD ('Dir Pkg))
</span><a href="#local-6989586621679551916"><span class="hs-identifier hs-var">mbWorkDir</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir build)
-&gt; SymbolicPathX 'AllowAbsolute Pkg ('Dir Source)
forall (allowAbsolute :: AllowAbsolute) from (to1 :: FileOrDir)
       (to2 :: FileOrDir).
SymbolicPathX allowAbsolute from to1
-&gt; SymbolicPathX allowAbsolute from to2
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#coerceSymbolicPath"><span class="hs-identifier hs-var">coerceSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir build)
</span><a href="#local-6989586621679551917"><span class="hs-identifier hs-var">buildDir</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPathX 'AllowAbsolute Pkg ('Dir Source)
-&gt; [SymbolicPathX 'AllowAbsolute Pkg ('Dir Source)]
-&gt; [SymbolicPathX 'AllowAbsolute Pkg ('Dir Source)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">BuildInfo -&gt; [SymbolicPathX 'AllowAbsolute Pkg ('Dir Source)]
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.BuildInfo.html#hsSourceDirs"><span class="hs-identifier hs-var">hsSourceDirs</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679551918"><span class="hs-identifier hs-var">bnfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RelativePath Source 'File
</span><a href="#local-6989586621679551919"><span class="hs-identifier hs-var">modPath</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="annot"><span class="hs-comment">-- | Does this compiler support the @-dynamic-too@ option</span></span><span>
</span><span id="line-48"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#supportsDynamicToo"><span class="hs-identifier hs-type">supportsDynamicToo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-49"></span><span id="supportsDynamicToo"><span class="annot"><span class="annottext">supportsDynamicToo :: Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.Build.Utils.html#supportsDynamicToo"><span class="hs-identifier hs-var hs-var">supportsDynamicToo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.Internal.html#ghcLookupProperty"><span class="hs-identifier hs-var">Internal.ghcLookupProperty</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;Support dynamic-too&quot;</span></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#compilerBuildWay"><span class="hs-identifier hs-type">compilerBuildWay</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.BuildWay.html#BuildWay"><span class="hs-identifier hs-type">BuildWay</span></a></span><span>
</span><span id="line-52"></span><span id="compilerBuildWay"><span class="annot"><span class="annottext">compilerBuildWay :: Compiler -&gt; BuildWay
</span><a href="Distribution.Simple.GHC.Build.Utils.html#compilerBuildWay"><span class="hs-identifier hs-var hs-var">compilerBuildWay</span></a></span></span><span> </span><span id="local-6989586621679551926"><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679551926"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.Build.Utils.html#isDynamic"><span class="hs-identifier hs-var">isDynamic</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679551926"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.Build.Utils.html#isProfiled"><span class="hs-identifier hs-var">isProfiled</span></a></span><span> </span><span class="annot"><span class="annottext">Compiler
</span><a href="#local-6989586621679551926"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuildWay
</span><a href="Distribution.Simple.BuildWay.html#ProfDynWay"><span class="hs-identifier hs-var">ProfDynWay</span></a></span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuildWay
</span><a href="Distribution.Simple.BuildWay.html#DynWay"><span class="hs-identifier hs-var">DynWay</span></a></span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuildWay
</span><a href="Distribution.Simple.BuildWay.html#ProfWay"><span class="hs-identifier hs-var">ProfWay</span></a></span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuildWay
</span><a href="Distribution.Simple.BuildWay.html#StaticWay"><span class="hs-identifier hs-var">StaticWay</span></a></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="annot"><span class="hs-comment">-- | Is this compiler's RTS dynamically linked?</span></span><span>
</span><span id="line-60"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#isDynamic"><span class="hs-identifier hs-type">isDynamic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-61"></span><span id="isDynamic"><span class="annot"><span class="annottext">isDynamic :: Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.Build.Utils.html#isDynamic"><span class="hs-identifier hs-var hs-var">isDynamic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.Internal.html#ghcLookupProperty"><span class="hs-identifier hs-var">Internal.ghcLookupProperty</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;GHC Dynamic&quot;</span></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#isProfiled"><span class="hs-identifier hs-type">isProfiled</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.Compiler.html#Compiler"><span class="hs-identifier hs-type">Compiler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-64"></span><span id="isProfiled"><span class="annot"><span class="annottext">isProfiled :: Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.Build.Utils.html#isProfiled"><span class="hs-identifier hs-var hs-var">isProfiled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Compiler -&gt; Bool
</span><a href="Distribution.Simple.GHC.Internal.html#ghcLookupProperty"><span class="hs-identifier hs-var">Internal.ghcLookupProperty</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;GHC Profiled&quot;</span></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="annot"><span class="hs-comment">-- | Should we dynamically link the foreign library, based on its 'foreignLibType'?</span></span><span>
</span><span id="line-67"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#withDynFLib"><span class="hs-identifier hs-type">withDynFLib</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-68"></span><span id="withDynFLib"><span class="annot"><span class="annottext">withDynFLib :: ForeignLib -&gt; Bool
</span><a href="Distribution.Simple.GHC.Build.Utils.html#withDynFLib"><span class="hs-identifier hs-var hs-var">withDynFLib</span></a></span></span><span> </span><span id="local-6989586621679551935"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551935"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551935"><span class="hs-identifier hs-var">flib</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-71"></span><span>      </span><span class="annot"><span class="annottext">ForeignLibOption
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibOption.html#ForeignLibStandalone"><span class="hs-identifier hs-var">ForeignLibStandalone</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLibOption -&gt; [ForeignLibOption] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; [ForeignLibOption]
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#foreignLibOptions"><span class="hs-identifier hs-var">foreignLibOptions</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551935"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibType.html#ForeignLibNativeStatic"><span class="hs-identifier hs-var">ForeignLibNativeStatic</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-73"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibType.html#ForeignLibTypeUnknown"><span class="hs-identifier hs-var">ForeignLibTypeUnknown</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-75"></span><span>      </span><span class="annot"><span class="annottext">FilePath -&gt; Bool
forall a. FilePath -&gt; a
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.PackageDescription.Utils.html#cabalBug"><span class="hs-identifier hs-var">cabalBug</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;unknown foreign lib type&quot;</span></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="annot"><span class="hs-comment">-- | Is this file a C++ source file, i.e. ends with .cpp, .cxx, or .c++?</span></span><span>
</span><span id="line-78"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#isCxx"><span class="hs-identifier hs-type">isCxx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-79"></span><span id="isCxx"><span class="annot"><span class="annottext">isCxx :: FilePath -&gt; Bool
</span><a href="Distribution.Simple.GHC.Build.Utils.html#isCxx"><span class="hs-identifier hs-var hs-var">isCxx</span></a></span></span><span> </span><span id="local-6989586621679551943"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551943"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; [FilePath] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">elem</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
</span><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#takeExtension"><span class="hs-identifier hs-var">takeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551943"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;.cpp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;.cxx&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;.c++&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="annot"><span class="hs-comment">-- | Is this a C source file, i.e. ends with .c?</span></span><span>
</span><span id="line-82"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#isC"><span class="hs-identifier hs-type">isC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-83"></span><span id="isC"><span class="annot"><span class="annottext">isC :: FilePath -&gt; Bool
</span><a href="Distribution.Simple.GHC.Build.Utils.html#isC"><span class="hs-identifier hs-var hs-var">isC</span></a></span></span><span> </span><span id="local-6989586621679551946"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551946"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; [FilePath] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">elem</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
</span><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#takeExtension"><span class="hs-identifier hs-var">takeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551946"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;.c&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="annot"><span class="hs-comment">-- | FilePath has a Haskell extension: .hs or .lhs</span></span><span>
</span><span id="line-86"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#isHaskell"><span class="hs-identifier hs-type">isHaskell</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-87"></span><span id="isHaskell"><span class="annot"><span class="annottext">isHaskell :: FilePath -&gt; Bool
</span><a href="Distribution.Simple.GHC.Build.Utils.html#isHaskell"><span class="hs-identifier hs-var hs-var">isHaskell</span></a></span></span><span> </span><span id="local-6989586621679551948"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551948"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; [FilePath] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">elem</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
</span><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#takeExtension"><span class="hs-identifier hs-var">takeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551948"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;.hs&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;.lhs&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-comment">-- | Returns True if the modification date of the given source file is newer than</span><span>
</span><span id="line-90"></span><span class="hs-comment">-- the object file we last compiled for it, or if no object file exists yet.</span><span>
</span><span id="line-91"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#checkNeedsRecompilation"><span class="hs-identifier hs-type">checkNeedsRecompilation</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier hs-type">SymbolicPath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#CWD"><span class="hs-identifier hs-type">CWD</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Dir"><span class="hs-identifier hs-type">Dir</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier hs-type">Pkg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier hs-type">SymbolicPath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier hs-type">Pkg</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#File"><span class="hs-identifier hs-type">File</span></a></span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.GHC.html#GhcOptions"><span class="hs-identifier hs-type">GhcOptions</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-96"></span><span id="checkNeedsRecompilation"><span class="annot"><span class="annottext">checkNeedsRecompilation :: Maybe (SymbolicPath CWD ('Dir Pkg))
-&gt; SymbolicPath Pkg 'File -&gt; GhcOptions -&gt; IO Bool
</span><a href="Distribution.Simple.GHC.Build.Utils.html#checkNeedsRecompilation"><span class="hs-identifier hs-var hs-var">checkNeedsRecompilation</span></a></span></span><span> </span><span id="local-6989586621679551950"><span class="annot"><span class="annottext">Maybe (SymbolicPath CWD ('Dir Pkg))
</span><a href="#local-6989586621679551950"><span class="hs-identifier hs-var">mbWorkDir</span></a></span></span><span> </span><span id="local-6989586621679551951"><span class="annot"><span class="annottext">SymbolicPath Pkg 'File
</span><a href="#local-6989586621679551951"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span id="local-6989586621679551952"><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679551952"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-97"></span><span>  </span><span class="annot"><span class="annottext">SymbolicPath Pkg 'File -&gt; FilePath
forall {allowAbsolute :: AllowAbsolute} {to :: FileOrDir}.
SymbolicPathX allowAbsolute Pkg to -&gt; FilePath
</span><a href="#local-6989586621679551953"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg 'File
</span><a href="#local-6989586621679551951"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; IO Bool
</span><a href="Distribution.Simple.Utils.html#moreRecentFile"><span class="hs-operator hs-var">`moreRecentFile`</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551955"><span class="hs-identifier hs-var">oname</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-99"></span><span>    </span><span id="local-6989586621679551955"><span class="annot"><span class="annottext">oname :: FilePath
</span><a href="#local-6989586621679551955"><span class="hs-identifier hs-var hs-var">oname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (SymbolicPath CWD ('Dir Pkg))
-&gt; SymbolicPath Pkg 'File -&gt; GhcOptions -&gt; FilePath
</span><a href="Distribution.Simple.GHC.Build.Utils.html#getObjectFileName"><span class="hs-identifier hs-var">getObjectFileName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SymbolicPath CWD ('Dir Pkg))
</span><a href="#local-6989586621679551950"><span class="hs-identifier hs-var">mbWorkDir</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg 'File
</span><a href="#local-6989586621679551951"><span class="hs-identifier hs-var">filename</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679551952"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span id="local-6989586621679551953"><span class="annot"><span class="annottext">i :: SymbolicPathX allowAbsolute Pkg to -&gt; FilePath
</span><a href="#local-6989586621679551953"><span class="hs-identifier hs-var hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (SymbolicPath CWD ('Dir Pkg))
-&gt; SymbolicPathX allowAbsolute Pkg to -&gt; FilePath
forall from (allowAbsolute :: AllowAbsolute) (to :: FileOrDir).
Maybe (SymbolicPath CWD ('Dir from))
-&gt; SymbolicPathX allowAbsolute from to -&gt; FilePath
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#interpretSymbolicPath"><span class="hs-identifier hs-var">interpretSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SymbolicPath CWD ('Dir Pkg))
</span><a href="#local-6989586621679551950"><span class="hs-identifier hs-var">mbWorkDir</span></a></span><span> </span><span class="hs-comment">-- See Note [Symbolic paths] in Distribution.Utils.Path</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="annot"><span class="hs-comment">-- | Finds the object file name of the given source file</span></span><span>
</span><span id="line-103"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#getObjectFileName"><span class="hs-identifier hs-type">getObjectFileName</span></a></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier hs-type">SymbolicPath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#CWD"><span class="hs-identifier hs-type">CWD</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Dir"><span class="hs-identifier hs-type">Dir</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier hs-type">Pkg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier hs-type">SymbolicPath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier hs-type">Pkg</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#File"><span class="hs-identifier hs-type">File</span></a></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.Program.GHC.html#GhcOptions"><span class="hs-identifier hs-type">GhcOptions</span></a></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-108"></span><span id="getObjectFileName"><span class="annot"><span class="annottext">getObjectFileName :: Maybe (SymbolicPath CWD ('Dir Pkg))
-&gt; SymbolicPath Pkg 'File -&gt; GhcOptions -&gt; FilePath
</span><a href="Distribution.Simple.GHC.Build.Utils.html#getObjectFileName"><span class="hs-identifier hs-var hs-var">getObjectFileName</span></a></span></span><span> </span><span id="local-6989586621679551958"><span class="annot"><span class="annottext">Maybe (SymbolicPath CWD ('Dir Pkg))
</span><a href="#local-6989586621679551958"><span class="hs-identifier hs-var">mbWorkDir</span></a></span></span><span> </span><span id="local-6989586621679551959"><span class="annot"><span class="annottext">SymbolicPath Pkg 'File
</span><a href="#local-6989586621679551959"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span id="local-6989586621679551960"><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679551960"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551961"><span class="hs-identifier hs-var">oname</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-110"></span><span>    </span><span id="local-6989586621679551962"><span class="annot"><span class="annottext">i :: SymbolicPathX allowAbsolute Pkg to -&gt; FilePath
</span><a href="#local-6989586621679551962"><span class="hs-identifier hs-var hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (SymbolicPath CWD ('Dir Pkg))
-&gt; SymbolicPathX allowAbsolute Pkg to -&gt; FilePath
forall from (allowAbsolute :: AllowAbsolute) (to :: FileOrDir).
Maybe (SymbolicPath CWD ('Dir from))
-&gt; SymbolicPathX allowAbsolute from to -&gt; FilePath
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#interpretSymbolicPath"><span class="hs-identifier hs-var">interpretSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SymbolicPath CWD ('Dir Pkg))
</span><a href="#local-6989586621679551958"><span class="hs-identifier hs-var">mbWorkDir</span></a></span><span> </span><span class="hs-comment">-- See Note [Symbolic paths] in Distribution.Utils.Path</span><span>
</span><span id="line-111"></span><span>    </span><span id="local-6989586621679551965"><span class="annot"><span class="annottext">odir :: FilePath
</span><a href="#local-6989586621679551965"><span class="hs-identifier hs-var hs-var">odir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SymbolicPathX 'AllowAbsolute Pkg ('Dir Artifacts) -&gt; FilePath
forall {allowAbsolute :: AllowAbsolute} {to :: FileOrDir}.
SymbolicPathX allowAbsolute Pkg to -&gt; FilePath
</span><a href="#local-6989586621679551962"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(SymbolicPathX 'AllowAbsolute Pkg ('Dir Artifacts) -&gt; FilePath)
-&gt; SymbolicPathX 'AllowAbsolute Pkg ('Dir Artifacts) -&gt; FilePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Flag (SymbolicPathX 'AllowAbsolute Pkg ('Dir Artifacts))
-&gt; SymbolicPathX 'AllowAbsolute Pkg ('Dir Artifacts)
forall a. WithCallStack (Flag a -&gt; a)
</span><a href="Distribution.Simple.Flag.html#fromFlag"><span class="hs-identifier hs-var">fromFlag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions
-&gt; Flag (SymbolicPathX 'AllowAbsolute Pkg ('Dir Artifacts))
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjDir"><span class="hs-identifier hs-var">ghcOptObjDir</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679551960"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>    </span><span id="local-6989586621679551968"><span class="annot"><span class="annottext">oext :: FilePath
</span><a href="#local-6989586621679551968"><span class="hs-identifier hs-var hs-var">oext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Flag FilePath -&gt; FilePath
forall a. a -&gt; Flag a -&gt; a
</span><a href="Distribution.Simple.Flag.html#fromFlagOrDefault"><span class="hs-identifier hs-var">fromFlagOrDefault</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;o&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GhcOptions -&gt; Flag FilePath
</span><a href="Distribution.Simple.Program.GHC.html#ghcOptObjSuffix"><span class="hs-identifier hs-var">ghcOptObjSuffix</span></a></span><span> </span><span class="annot"><span class="annottext">GhcOptions
</span><a href="#local-6989586621679551960"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-comment">-- NB: the filepath might be absolute, e.g. if it is the path to</span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-comment">-- an autogenerated .hs file.</span><span>
</span><span id="line-115"></span><span>    </span><span id="local-6989586621679551961"><span class="annot"><span class="annottext">oname :: FilePath
</span><a href="#local-6989586621679551961"><span class="hs-identifier hs-var hs-var">oname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551965"><span class="hs-identifier hs-var">odir</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall p q r. PathLike p q r =&gt; p -&gt; q -&gt; r
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
</span><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#replaceExtension"><span class="hs-identifier hs-var">replaceExtension</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SymbolicPath Pkg 'File -&gt; FilePath
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; FilePath
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg 'File
</span><a href="#local-6989586621679551959"><span class="hs-identifier hs-var">filename</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551968"><span class="hs-identifier hs-var">oext</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-comment">-- | Target name for a foreign library (the actual file name)</span><span>
</span><span id="line-118"></span><span class="hs-comment">--</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- We do not use mkLibName and co here because the naming for foreign libraries</span><span>
</span><span id="line-120"></span><span class="hs-comment">-- is slightly different (we don't use &quot;_p&quot; or compiler version suffices, and we</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- don't want the &quot;lib&quot; prefix on Windows).</span><span>
</span><span id="line-122"></span><span class="hs-comment">--</span><span>
</span><span id="line-123"></span><span class="hs-comment">-- TODO: We do use `dllExtension` and co here, but really that's wrong: they</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- use the OS used to build cabal to determine which extension to use, rather</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- than the target OS (but this is wrong elsewhere in Cabal as well).</span><span>
</span><span id="line-126"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#flibTargetName"><span class="hs-identifier hs-type">flibTargetName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-127"></span><span id="flibTargetName"><span class="annot"><span class="annottext">flibTargetName :: LocalBuildInfo -&gt; ForeignLib -&gt; FilePath
</span><a href="Distribution.Simple.GHC.Build.Utils.html#flibTargetName"><span class="hs-identifier hs-var hs-var">flibTargetName</span></a></span></span><span> </span><span id="local-6989586621679551977"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679551977"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679551978"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551978"><span class="hs-identifier hs-var">flib</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679551979"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551978"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551981"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall p. FileLike p =&gt; p -&gt; FilePath -&gt; p
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;dll&quot;</span></span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.System.html#Windows"><span class="hs-identifier hs-var">Windows</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibType.html#ForeignLibNativeStatic"><span class="hs-identifier hs-var">ForeignLibNativeStatic</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551981"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall p. FileLike p =&gt; p -&gt; FilePath -&gt; p
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;lib&quot;</span></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.System.html#Linux"><span class="hs-identifier hs-var">Linux</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551981"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall p. FileLike p =&gt; p -&gt; FilePath -&gt; p
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551984"><span class="hs-identifier hs-var">versionedExt</span></a></span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679551985"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679551985"><span class="hs-identifier hs-var">_other</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-133"></span><span>      </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551981"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall p. FileLike p =&gt; p -&gt; FilePath -&gt; p
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; FilePath
</span><a href="Distribution.Simple.BuildPaths.html#dllExtension"><span class="hs-identifier hs-var">dllExtension</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679551977"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679551986"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679551986"><span class="hs-identifier hs-var">_other</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibType.html#ForeignLibNativeStatic"><span class="hs-identifier hs-var">ForeignLibNativeStatic</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-135"></span><span>      </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679551981"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall p. FileLike p =&gt; p -&gt; FilePath -&gt; p
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; FilePath
</span><a href="Distribution.Simple.BuildPaths.html#staticLibExtension"><span class="hs-identifier hs-var">staticLibExtension</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679551977"><span class="hs-identifier hs-var">lbi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679551988"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679551988"><span class="hs-identifier hs-var">_any</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibType.html#ForeignLibTypeUnknown"><span class="hs-identifier hs-var">ForeignLibTypeUnknown</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
forall a. FilePath -&gt; a
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.PackageDescription.Utils.html#cabalBug"><span class="hs-identifier hs-var">cabalBug</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;unknown foreign lib type&quot;</span></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><a href="#local-6989586621679551981"><span class="hs-identifier hs-type">nm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-139"></span><span>    </span><span id="local-6989586621679551981"><span class="annot"><span class="annottext">nm :: FilePath
</span><a href="#local-6989586621679551981"><span class="hs-identifier hs-var hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; FilePath
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">(UnqualComponentName -&gt; FilePath)
-&gt; UnqualComponentName -&gt; FilePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; UnqualComponentName
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#foreignLibName"><span class="hs-identifier hs-var">foreignLibName</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551978"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><a href="#local-6989586621679551979"><span class="hs-identifier hs-type">os</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.System.html#OS"><span class="hs-identifier hs-type">OS</span></a></span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679551979"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679551979"><span class="hs-identifier hs-var">os</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679551977"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-comment">-- If a foreign lib foo has lib-version-info 5:1:2 or</span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-comment">-- lib-version-linux 3.2.1, it should be built as libfoo.so.3.2.1</span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-comment">-- Libtool's version-info data is translated into library versions in a</span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-comment">-- nontrivial way: so refer to libtool documentation.</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="#local-6989586621679551984"><span class="hs-identifier hs-type">versionedExt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-149"></span><span>    </span><span id="local-6989586621679551984"><span class="annot"><span class="annottext">versionedExt :: FilePath
</span><a href="#local-6989586621679551984"><span class="hs-identifier hs-var hs-var">versionedExt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-150"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679551992"><span class="annot"><span class="annottext">nums :: [Int]
</span><a href="#local-6989586621679551992"><span class="hs-identifier hs-var hs-var">nums</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; OS -&gt; [Int]
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#foreignLibVersion"><span class="hs-identifier hs-var">foreignLibVersion</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551978"><span class="hs-identifier hs-var">flib</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679551979"><span class="hs-identifier hs-var">os</span></a></span><span>
</span><span id="line-151"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; FilePath -&gt; FilePath)
-&gt; FilePath -&gt; [FilePath] -&gt; FilePath
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall p. FileLike p =&gt; p -&gt; FilePath -&gt; p
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C.%3E"><span class="hs-operator hs-var">(&lt;.&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;so&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int -&gt; FilePath) -&gt; [Int] -&gt; [FilePath]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; FilePath
forall a. Show a =&gt; a -&gt; FilePath
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679551992"><span class="hs-identifier hs-var">nums</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-comment">-- | Name for the library when building.</span><span>
</span><span id="line-154"></span><span class="hs-comment">--</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- If the `lib-version-info` field or the `lib-version-linux` field of</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- a foreign library target is set, we need to incorporate that</span><span>
</span><span id="line-157"></span><span class="hs-comment">-- version into the SONAME field.</span><span>
</span><span id="line-158"></span><span class="hs-comment">--</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- If a foreign library foo has lib-version-info 5:1:2, it should be</span><span>
</span><span id="line-160"></span><span class="hs-comment">-- built as libfoo.so.3.2.1.  We want it to get soname libfoo.so.3.</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- However, GHC does not allow overriding soname by setting linker</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- options, as it sets a soname of its own (namely the output</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- filename), after the user-supplied linker options.  Hence, we have</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- to compile the library with the soname as its filename.  We rename</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- the compiled binary afterwards.</span><span>
</span><span id="line-166"></span><span class="hs-comment">--</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- This method allows to adjust the name of the library at build time</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- such that the correct soname can be set.</span><span>
</span><span id="line-169"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#flibBuildName"><span class="hs-identifier hs-type">flibBuildName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Types.LocalBuildInfo.html#LocalBuildInfo"><span class="hs-identifier hs-type">LocalBuildInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#ForeignLib"><span class="hs-identifier hs-type">ForeignLib</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-170"></span><span id="flibBuildName"><span class="annot"><span class="annottext">flibBuildName :: LocalBuildInfo -&gt; ForeignLib -&gt; FilePath
</span><a href="Distribution.Simple.GHC.Build.Utils.html#flibBuildName"><span class="hs-identifier hs-var hs-var">flibBuildName</span></a></span></span><span> </span><span id="local-6989586621679551997"><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679551997"><span class="hs-identifier hs-var">lbi</span></a></span></span><span> </span><span id="local-6989586621679551998"><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551998"><span class="hs-identifier hs-var">flib</span></a></span></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-comment">-- On linux, if a foreign-library has version data, the first digit is used</span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-comment">-- to produce the SONAME.</span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679551999"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#foreignLibType"><span class="hs-identifier hs-var">foreignLibType</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551998"><span class="hs-identifier hs-var">flib</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>      </span><span class="annot"><span class="annottext">(OS, ForeignLibType) -&gt; (OS, ForeignLibType) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OS
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.System.html#Linux"><span class="hs-identifier hs-var">Linux</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignLibType
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLibType.html#ForeignLibNativeShared"><span class="hs-identifier hs-var">ForeignLibNativeShared</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-175"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679552000"><span class="annot"><span class="annottext">nums :: [Int]
</span><a href="#local-6989586621679552000"><span class="hs-identifier hs-var hs-var">nums</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; OS -&gt; [Int]
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#foreignLibVersion"><span class="hs-identifier hs-var">foreignLibVersion</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551998"><span class="hs-identifier hs-var">flib</span></a></span><span> </span><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679551999"><span class="hs-identifier hs-var">os</span></a></span><span>
</span><span id="line-176"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552001"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall p. FileLike p =&gt; p -&gt; FilePath -&gt; p
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; FilePath -&gt; FilePath)
-&gt; FilePath -&gt; [FilePath] -&gt; FilePath
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall p. FileLike p =&gt; p -&gt; FilePath -&gt; p
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C.%3E"><span class="hs-operator hs-var">(&lt;.&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;so&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int -&gt; FilePath) -&gt; [Int] -&gt; [FilePath]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; FilePath
forall a. Show a =&gt; a -&gt; FilePath
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Int] -&gt; [Int]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621679552000"><span class="hs-identifier hs-var">nums</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; ForeignLib -&gt; FilePath
</span><a href="Distribution.Simple.GHC.Build.Utils.html#flibTargetName"><span class="hs-identifier hs-var">flibTargetName</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679551997"><span class="hs-identifier hs-var">lbi</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551998"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><a href="#local-6989586621679551999"><span class="hs-identifier hs-type">os</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.System.html#OS"><span class="hs-identifier hs-type">OS</span></a></span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679551999"><span class="annot"><span class="annottext">OS
</span><a href="#local-6989586621679551999"><span class="hs-identifier hs-var">os</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo -&gt; Platform
</span><a href="Distribution.Types.LocalBuildInfo.html#hostPlatform"><span class="hs-identifier hs-var">hostPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">LocalBuildInfo
</span><a href="#local-6989586621679551997"><span class="hs-identifier hs-var">lbi</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><a href="#local-6989586621679552001"><span class="hs-identifier hs-type">nm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-183"></span><span>    </span><span id="local-6989586621679552001"><span class="annot"><span class="annottext">nm :: FilePath
</span><a href="#local-6989586621679552001"><span class="hs-identifier hs-var hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; FilePath
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">(UnqualComponentName -&gt; FilePath)
-&gt; UnqualComponentName -&gt; FilePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ForeignLib -&gt; UnqualComponentName
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.ForeignLib.html#foreignLibName"><span class="hs-identifier hs-var">foreignLibName</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignLib
</span><a href="#local-6989586621679551998"><span class="hs-identifier hs-var">flib</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- | Gets the target name (name of actual executable file) from the name of an</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- executable-like component ('Executable', 'TestSuite', 'Benchmark').</span><span>
</span><span id="line-187"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#exeTargetName"><span class="hs-identifier hs-type">exeTargetName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.System.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.UnqualComponentName.html#UnqualComponentName"><span class="hs-identifier hs-type">UnqualComponentName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-188"></span><span id="exeTargetName"><span class="annot"><span class="annottext">exeTargetName :: Platform -&gt; UnqualComponentName -&gt; FilePath
</span><a href="Distribution.Simple.GHC.Build.Utils.html#exeTargetName"><span class="hs-identifier hs-var hs-var">exeTargetName</span></a></span></span><span> </span><span id="local-6989586621679552010"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679552010"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621679552011"><span class="annot"><span class="annottext">UnqualComponentName
</span><a href="#local-6989586621679552011"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnqualComponentName -&gt; FilePath
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.UnqualComponentName.html#unUnqualComponentName"><span class="hs-identifier hs-var">unUnqualComponentName</span></a></span><span> </span><span class="annot"><span class="annottext">UnqualComponentName
</span><a href="#local-6989586621679552011"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
</span><a href="#local-6989586621679552012"><span class="hs-operator hs-var">`withExt`</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; FilePath
</span><a href="Distribution.Simple.BuildPaths.html#exeExtension"><span class="hs-identifier hs-var">exeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621679552010"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-190"></span><span>    </span><span class="annot"><a href="#local-6989586621679552012"><span class="hs-identifier hs-type">withExt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-191"></span><span>    </span><span id="local-6989586621679552012"><span class="annot"><span class="annottext">withExt :: FilePath -&gt; FilePath -&gt; FilePath
</span><a href="#local-6989586621679552012"><span class="hs-identifier hs-var hs-var">withExt</span></a></span></span><span> </span><span id="local-6989586621679552014"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552014"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679552015"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552015"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552014"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall p. FileLike p =&gt; p -&gt; FilePath -&gt; p
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
</span><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#takeExtension"><span class="hs-identifier hs-var">takeExtension</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552014"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'.'</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; FilePath -&gt; FilePath
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552015"><span class="hs-identifier hs-var">ext</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552015"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-comment">-- | &quot;Main&quot; module name when overridden by @ghc-options: -main-is ...@</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- or 'Nothing' if no @-main-is@ flag could be found.</span><span>
</span><span id="line-195"></span><span class="hs-comment">--</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- In case of 'Nothing', 'Distribution.ModuleName.main' can be assumed.</span><span>
</span><span id="line-197"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#exeMainModuleName"><span class="hs-identifier hs-type">exeMainModuleName</span></a></span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.BuildInfo.html#BuildInfo"><span class="hs-identifier hs-type">BuildInfo</span></a></span><span>
</span><span id="line-199"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The build info of the executable-like component (Exe, Test, Bench)</span></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-201"></span><span id="exeMainModuleName"><span class="annot"><span class="annottext">exeMainModuleName :: BuildInfo -&gt; ModuleName
</span><a href="Distribution.Simple.GHC.Build.Utils.html#exeMainModuleName"><span class="hs-identifier hs-var hs-var">exeMainModuleName</span></a></span></span><span> </span><span id="local-6989586621679552018"><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679552018"><span class="hs-identifier hs-var">bnfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-comment">-- GHC honors the last occurrence of a module name updated via -main-is</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-comment">-- Moreover, -main-is when parsed left-to-right can update either</span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-comment">-- the &quot;Main&quot; module name, or the &quot;main&quot; function name, or both,</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-comment">-- see also 'decodeMainIsArg'.</span><span>
</span><span id="line-207"></span><span>  </span><span class="annot"><span class="annottext">ModuleName -&gt; Maybe ModuleName -&gt; ModuleName
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.ModuleName.html#main"><span class="hs-identifier hs-var">ModuleName.main</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ModuleName -&gt; ModuleName) -&gt; Maybe ModuleName -&gt; ModuleName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Maybe ModuleName] -&gt; Maybe ModuleName
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, MonadPlus m) =&gt;
t (m a) -&gt; m a
</span><span class="hs-identifier hs-var">msum</span></span><span> </span><span class="annot"><span class="annottext">([Maybe ModuleName] -&gt; Maybe ModuleName)
-&gt; [Maybe ModuleName] -&gt; Maybe ModuleName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Maybe ModuleName] -&gt; [Maybe ModuleName]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">([Maybe ModuleName] -&gt; [Maybe ModuleName])
-&gt; [Maybe ModuleName] -&gt; [Maybe ModuleName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; Maybe ModuleName) -&gt; [FilePath] -&gt; [Maybe ModuleName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Maybe ModuleName
</span><a href="Distribution.Simple.GHC.Build.Utils.html#decodeMainIsArg"><span class="hs-identifier hs-var">decodeMainIsArg</span></a></span><span> </span><span class="annot"><span class="annottext">([FilePath] -&gt; [Maybe ModuleName])
-&gt; [FilePath] -&gt; [Maybe ModuleName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[FilePath] -&gt; [FilePath]
</span><a href="#local-6989586621679552023"><span class="hs-identifier hs-var">findIsMainArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679552024"><span class="hs-identifier hs-var">ghcopts</span></a></span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-209"></span><span>    </span><span id="local-6989586621679552024"><span class="annot"><span class="annottext">ghcopts :: [FilePath]
</span><a href="#local-6989586621679552024"><span class="hs-identifier hs-var hs-var">ghcopts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerFlavor -&gt; BuildInfo -&gt; [FilePath]
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.BuildInfo.html#hcOptions"><span class="hs-identifier hs-var">hcOptions</span></a></span><span> </span><span class="annot"><span class="annottext">CompilerFlavor
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Compiler.html#GHC"><span class="hs-identifier hs-var">GHC</span></a></span><span> </span><span class="annot"><span class="annottext">BuildInfo
</span><a href="#local-6989586621679552018"><span class="hs-identifier hs-var">bnfo</span></a></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span>    </span><span id="local-6989586621679552023"><span class="annot"><span class="annottext">findIsMainArgs :: [FilePath] -&gt; [FilePath]
</span><a href="#local-6989586621679552023"><span class="hs-identifier hs-var hs-var">findIsMainArgs</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><a href="#local-6989586621679552023"><span class="hs-identifier hs-var">findIsMainArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;-main-is&quot;</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679552027"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552027"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679552028"><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679552028"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552027"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; [FilePath] -&gt; [FilePath]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[FilePath] -&gt; [FilePath]
</span><a href="#local-6989586621679552023"><span class="hs-identifier hs-var">findIsMainArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679552028"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><a href="#local-6989586621679552023"><span class="hs-identifier hs-var">findIsMainArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679552029"><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679552029"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FilePath] -&gt; [FilePath]
</span><a href="#local-6989586621679552023"><span class="hs-identifier hs-var">findIsMainArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679552029"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="hs-comment">-- | Decode argument to '-main-is'</span><span>
</span><span id="line-216"></span><span class="hs-comment">--</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- Returns 'Nothing' if argument set only the function name.</span><span>
</span><span id="line-218"></span><span class="hs-comment">--</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- This code has been stolen/refactored from GHC's DynFlags.setMainIs</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- function. The logic here is deliberately imperfect as it is</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- intended to be bug-compatible with GHC's parser. See discussion in</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- https://github.com/haskell/cabal/pull/4539#discussion_r118981753.</span><span>
</span><span id="line-223"></span><span class="annot"><a href="Distribution.Simple.GHC.Build.Utils.html#decodeMainIsArg"><span class="hs-identifier hs-type">decodeMainIsArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-224"></span><span id="decodeMainIsArg"><span class="annot"><span class="annottext">decodeMainIsArg :: FilePath -&gt; Maybe ModuleName
</span><a href="Distribution.Simple.GHC.Build.Utils.html#decodeMainIsArg"><span class="hs-identifier hs-var hs-var">decodeMainIsArg</span></a></span></span><span> </span><span id="local-6989586621679552030"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552030"><span class="hs-identifier hs-var">arg</span></a></span></span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; (Char -&gt; Bool) -&gt; Bool
</span><a href="#local-6989586621679552031"><span class="hs-identifier hs-var">headOf</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552032"><span class="hs-identifier hs-var">main_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isLower</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-226"></span><span>      </span><span class="hs-comment">-- The arg looked like &quot;Foo.Bar.baz&quot;</span><span>
</span><span id="line-227"></span><span>      </span><span class="annot"><span class="annottext">ModuleName -&gt; Maybe ModuleName
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; ModuleName
forall a. IsString a =&gt; FilePath -&gt; a
</span><span class="hs-identifier hs-var">ModuleName.fromString</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552033"><span class="hs-identifier hs-var">main_mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; (Char -&gt; Bool) -&gt; Bool
</span><a href="#local-6989586621679552031"><span class="hs-identifier hs-var">headOf</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552030"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isUpper</span></span><span> </span><span class="hs-comment">-- The arg looked like &quot;Foo&quot; or &quot;Foo.Bar&quot;</span><span>
</span><span id="line-229"></span><span>    </span><span class="hs-glyph">=</span><span>
</span><span id="line-230"></span><span>      </span><span class="annot"><span class="annottext">ModuleName -&gt; Maybe ModuleName
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; ModuleName
forall a. IsString a =&gt; FilePath -&gt; a
</span><span class="hs-identifier hs-var">ModuleName.fromString</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552030"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-comment">-- The arg looked like &quot;baz&quot;</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-glyph">=</span><span>
</span><span id="line-233"></span><span>      </span><span class="annot"><span class="annottext">Maybe ModuleName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><a href="#local-6989586621679552031"><span class="hs-identifier hs-type">headOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-236"></span><span>    </span><span id="local-6989586621679552031"><span class="annot"><span class="annottext">headOf :: FilePath -&gt; (Char -&gt; Bool) -&gt; Bool
</span><a href="#local-6989586621679552031"><span class="hs-identifier hs-var hs-var">headOf</span></a></span></span><span> </span><span id="local-6989586621679552035"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552035"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621679552036"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679552036"><span class="hs-identifier hs-var">pred'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Maybe Char -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679552036"><span class="hs-identifier hs-var">pred'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Maybe Char
forall a. [a] -&gt; Maybe a
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Generic.html#safeHead"><span class="hs-identifier hs-var">safeHead</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552035"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679552033"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552033"><span class="hs-identifier hs-var">main_mod</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679552032"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552032"><span class="hs-identifier hs-var">main_fn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; (Char -&gt; Bool) -&gt; (FilePath, FilePath)
</span><a href="#local-6989586621679552040"><span class="hs-identifier hs-var">splitLongestPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552030"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'.'</span></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span>    </span><span class="annot"><a href="#local-6989586621679552040"><span class="hs-identifier hs-type">splitLongestPrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>    </span><span id="local-6989586621679552040"><span class="annot"><span class="annottext">splitLongestPrefix :: FilePath -&gt; (Char -&gt; Bool) -&gt; (FilePath, FilePath)
</span><a href="#local-6989586621679552040"><span class="hs-identifier hs-var hs-var">splitLongestPrefix</span></a></span></span><span> </span><span id="local-6989586621679552041"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552041"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621679552042"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679552042"><span class="hs-identifier hs-var">pred'</span></a></span></span><span>
</span><span id="line-242"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552044"><span class="hs-identifier hs-var">r_pre</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552041"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
forall a. [a] -&gt; [a]
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Generic.html#safeTail"><span class="hs-identifier hs-var">safeTail</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552044"><span class="hs-identifier hs-var">r_pre</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552046"><span class="hs-identifier hs-var">r_suf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-245"></span><span>        </span><span class="hs-comment">-- 'safeTail' drops the char satisfying 'pred'</span><span>
</span><span id="line-246"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679552046"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552046"><span class="hs-identifier hs-var">r_suf</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679552044"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552044"><span class="hs-identifier hs-var">r_pre</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; FilePath -&gt; (FilePath, FilePath)
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">break</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679552042"><span class="hs-identifier hs-var">pred'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; FilePath
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679552041"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-247"></span></pre></body></html>