<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE InstanceSigs #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE KindSignatures #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE MultiWayIf #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints #-}</span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-20"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-21"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-22"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-23"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilyDependencies #-}</span><span>
</span><span id="line-24"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-25"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- Module: Distribution.Simple.SetupHooks.Rule</span><span>
</span><span id="line-29"></span><span class="hs-comment">--</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- Internal module that defines fine-grained rules for setup hooks.</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- Users should import 'Distribution.Simple.SetupHooks' instead.</span><span>
</span><span id="line-32"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html"><span class="hs-identifier">Distribution.Simple.SetupHooks.Rule</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Rules</span></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Rule</span></span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier">Rule</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleData"><span class="hs-identifier">RuleData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleId"><span class="hs-identifier">RuleId</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#staticRule"><span class="hs-identifier">staticRule</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRule"><span class="hs-identifier">dynamicRule</span></a></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Commands</span></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier">RuleCommands</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier">Command</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier">CommandData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#runCommand"><span class="hs-identifier">runCommand</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#mkCommand"><span class="hs-identifier">mkCommand</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier">Dict</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Helpers for executing commands</span></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCmds"><span class="hs-identifier">RuleCmds</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleDynDepsCmd"><span class="hs-identifier">RuleDynDepsCmd</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleExecCmd"><span class="hs-identifier">RuleExecCmd</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier">DynDepsCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DepsRes"><span class="hs-identifier">DepsRes</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ruleDepsCmd"><span class="hs-identifier">ruleDepsCmd</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#runRuleDynDepsCmd"><span class="hs-identifier">runRuleDynDepsCmd</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ruleExecCmd"><span class="hs-identifier">ruleExecCmd</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#runRuleExecCmd"><span class="hs-identifier">runRuleExecCmd</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Collections of rules</span></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier">Rules</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dependency"><span class="hs-identifier">Dependency</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleOutput"><span class="hs-identifier">RuleOutput</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#rules"><span class="hs-identifier">rules</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#noRules"><span class="hs-identifier">noRules</span></a></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Rule inputs/outputs</span></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier">Location</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#location"><span class="hs-identifier">location</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** File/directory monitoring</span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.FileMonitor.Types.html#MonitorFilePath"><span class="hs-identifier">MonitorFilePath</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.FileMonitor.Types.html#MonitorKindFile"><span class="hs-identifier">MonitorKindFile</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.FileMonitor.Types.html#MonitorKindDir"><span class="hs-identifier">MonitorKindDir</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Monadic API for generation of 'ActionId'</span></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesM"><span class="hs-identifier">RulesM</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesT"><span class="hs-identifier">RulesT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesEnv"><span class="hs-identifier">RulesEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#computeRules"><span class="hs-identifier">computeRules</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Internals</span></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier">Scope</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#SScope"><span class="hs-identifier">SScope</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier">Static</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleBinary"><span class="hs-identifier">RuleBinary</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ruleBinary"><span class="hs-identifier">ruleBinary</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">where</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Compat.Binary.html"><span class="hs-identifier">Distribution.Compat.Binary</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Binary</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Compat.Prelude.html"><span class="hs-identifier">Distribution.Compat.Prelude</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.ModuleName.html"><span class="hs-identifier">Distribution.ModuleName</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.ModuleName.html#ModuleName"><span class="hs-identifier">ModuleName</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Simple.FileMonitor.Types.html"><span class="hs-identifier">Distribution.Simple.FileMonitor.Types</span></a></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.UnitId.html"><span class="hs-identifier">Distribution.Types.UnitId</span></a></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html"><span class="hs-identifier">Distribution.Utils.Path</span></a></span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#FileOrDir"><span class="hs-identifier">FileOrDir</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier">Pkg</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#RelativePath"><span class="hs-identifier">RelativePath</span></a></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier">SymbolicPath</span></a></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier">getSymbolicPath</span></a></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C%2F%3E"><span class="hs-operator">(&lt;/&gt;)</span></a></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.ShortText.html"><span class="hs-identifier">Distribution.Utils.ShortText</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.ShortText.html#ShortText"><span class="hs-identifier">ShortText</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html"><span class="hs-identifier">Distribution.Utils.Structured</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#Structure"><span class="hs-identifier">Structure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#Structured"><span class="hs-identifier">Structured</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#nominalStructure"><span class="hs-identifier">nominalStructure</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html"><span class="hs-identifier">Distribution.Verbosity</span></a></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier">Verbosity</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.Fix.html"><span class="hs-identifier">Control.Monad.Fix</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadFix</span></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../mtl-2.3.1-fdf9/src/Control.Monad.Trans.html"><span class="hs-identifier">Control.Monad.Trans</span></a></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#MonadTrans"><span class="hs-identifier">MonadTrans</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Reader.html"><span class="hs-identifier">Control.Monad.Trans.Reader</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Reader</span></span><span>
</span><span id="line-128"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.State.html"><span class="hs-identifier">Control.Monad.Trans.State</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">State</span></span><span class="hs-cpp">
#if MIN_VERSION_transformers(0,5,6)
</span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Writer.CPS.html"><span class="hs-identifier">Control.Monad.Trans.Writer.CPS</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Writer</span></span><span class="hs-cpp">
#else
</span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Control.Monad.Trans.Writer.Strict</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Writer</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.html"><span class="hs-identifier">Data.ByteString.Lazy</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LBS</span></span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#empty"><span class="hs-identifier">empty</span></a></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Kind.html"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Hs</span></span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Type.Bool.html"><span class="hs-identifier">Data.Type.Bool</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">If</span></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Type.Equality.html"><span class="hs-identifier">Data.Type.Equality</span></a></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-operator">(:~~:)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HRefl</span></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">type</span><span> </span><span class="annot"><span class="hs-operator">(==)</span></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/GHC.Show.html"><span class="hs-identifier">GHC.Show</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">showCommaSpace</span></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/GHC.StaticPtr.html"><span class="hs-identifier">GHC.StaticPtr</span></a></span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/GHC.TypeLits.html"><span class="hs-identifier">GHC.TypeLits</span></a></span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Symbol</span></span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/System.IO.Unsafe.html"><span class="hs-identifier">System.IO.Unsafe</span></a></span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">unsafePerformIO</span></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Type.Reflection.html"><span class="hs-identifier">Type.Reflection</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Typeable</span></span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TypeRep</span></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">eqTypeRep</span></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">typeRep</span></span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">typeRepKind</span></span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">withTypeable</span></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><span class="hs-identifier">App</span></span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.html"><span class="hs-identifier">System.FilePath</span></a></span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#normalise"><span class="hs-identifier">normalise</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-comment">{- Note [Fine-grained hooks]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
To best understand how the framework of fine-grained build rules
fits into Cabal and the greater Haskell ecosystem, it is helpful to think
that we want build tools (such as cabal-install or HLS) to be able to call
individual build rules on-demand, so that e.g. when a user modifies a .xyz file
the associated preprocessor is re-run.

To do this, we need to perform two different kinds of invocations:

  Query: query the package for the rules that it provides, with their
         dependency information. This allows one to determine when each
         rule should be rerun.

         (For example, if one rule preprocesses *.xyz into *.hs, we need to
         re-run the rule whenever *.xyz is modified.)

  Run: run the relevant action, once one has determined that the rule
       has gone stale.

To do this, any Cabal package with Hooks build-type provides a SetupHooks
module which supports these queries; for example it can be compiled into
a separate executable which can be invoked in the manner described above.
-}</span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">---------</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- Rules</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="annot"><span class="hs-comment">-- | A unique identifier for a t'Rule'.</span></span><span>
</span><span id="line-203"></span><span class="hs-keyword">data</span><span> </span><span id="RuleId"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleId"><span class="hs-identifier hs-var">RuleId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RuleId"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleId"><span class="hs-identifier hs-var">RuleId</span></a></span></span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="ruleNameSpace"><span class="annot"><span class="annottext">RuleId -&gt; RulesNameSpace
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ruleNameSpace"><span class="hs-identifier hs-var hs-var">ruleNameSpace</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesNameSpace"><span class="hs-identifier hs-type">RulesNameSpace</span></a></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ruleName"><span class="annot"><span class="annottext">RuleId -&gt; ShortText
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ruleName"><span class="hs-identifier hs-var hs-var">ruleName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.ShortText.html#ShortText"><span class="hs-identifier hs-type">ShortText</span></a></span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504638"><span id="local-6989586621679504646"><span id="local-6989586621679504650"><span class="annot"><span class="annottext">Int -&gt; RuleId -&gt; ShowS
[RuleId] -&gt; ShowS
RuleId -&gt; String
(Int -&gt; RuleId -&gt; ShowS)
-&gt; (RuleId -&gt; String) -&gt; ([RuleId] -&gt; ShowS) -&gt; Show RuleId
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; RuleId -&gt; ShowS
showsPrec :: Int -&gt; RuleId -&gt; ShowS
$cshow :: RuleId -&gt; String
show :: RuleId -&gt; String
$cshowList :: [RuleId] -&gt; ShowS
showList :: [RuleId] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504655"><span id="local-6989586621679504661"><span class="annot"><span class="annottext">RuleId -&gt; RuleId -&gt; Bool
(RuleId -&gt; RuleId -&gt; Bool)
-&gt; (RuleId -&gt; RuleId -&gt; Bool) -&gt; Eq RuleId
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: RuleId -&gt; RuleId -&gt; Bool
== :: RuleId -&gt; RuleId -&gt; Bool
$c/= :: RuleId -&gt; RuleId -&gt; Bool
/= :: RuleId -&gt; RuleId -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504668"><span id="local-6989586621679504674"><span id="local-6989586621679504678"><span id="local-6989586621679504682"><span id="local-6989586621679504685"><span id="local-6989586621679504688"><span id="local-6989586621679504691"><span class="annot"><span class="annottext">Eq RuleId
Eq RuleId =&gt;
(RuleId -&gt; RuleId -&gt; Ordering)
-&gt; (RuleId -&gt; RuleId -&gt; Bool)
-&gt; (RuleId -&gt; RuleId -&gt; Bool)
-&gt; (RuleId -&gt; RuleId -&gt; Bool)
-&gt; (RuleId -&gt; RuleId -&gt; Bool)
-&gt; (RuleId -&gt; RuleId -&gt; RuleId)
-&gt; (RuleId -&gt; RuleId -&gt; RuleId)
-&gt; Ord RuleId
RuleId -&gt; RuleId -&gt; Bool
RuleId -&gt; RuleId -&gt; Ordering
RuleId -&gt; RuleId -&gt; RuleId
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: RuleId -&gt; RuleId -&gt; Ordering
compare :: RuleId -&gt; RuleId -&gt; Ordering
$c&lt; :: RuleId -&gt; RuleId -&gt; Bool
&lt; :: RuleId -&gt; RuleId -&gt; Bool
$c&lt;= :: RuleId -&gt; RuleId -&gt; Bool
&lt;= :: RuleId -&gt; RuleId -&gt; Bool
$c&gt; :: RuleId -&gt; RuleId -&gt; Bool
&gt; :: RuleId -&gt; RuleId -&gt; Bool
$c&gt;= :: RuleId -&gt; RuleId -&gt; Bool
&gt;= :: RuleId -&gt; RuleId -&gt; Bool
$cmax :: RuleId -&gt; RuleId -&gt; RuleId
max :: RuleId -&gt; RuleId -&gt; RuleId
$cmin :: RuleId -&gt; RuleId -&gt; RuleId
min :: RuleId -&gt; RuleId -&gt; RuleId
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504699"><span id="local-6989586621679504701"><span class="annot"><span class="annottext">(forall x. RuleId -&gt; Rep RuleId x)
-&gt; (forall x. Rep RuleId x -&gt; RuleId) -&gt; Generic RuleId
forall x. Rep RuleId x -&gt; RuleId
forall x. RuleId -&gt; Rep RuleId x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. RuleId -&gt; Rep RuleId x
from :: forall x. RuleId -&gt; Rep RuleId x
$cto :: forall x. Rep RuleId x -&gt; RuleId
to :: forall x. Rep RuleId x -&gt; RuleId
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504707"><span id="local-6989586621679504714"><span id="local-6989586621679504720"><span class="annot"><span class="annottext">Get RuleId
[RuleId] -&gt; Put
RuleId -&gt; Put
(RuleId -&gt; Put) -&gt; Get RuleId -&gt; ([RuleId] -&gt; Put) -&gt; Binary RuleId
forall t. (t -&gt; Put) -&gt; Get t -&gt; ([t] -&gt; Put) -&gt; Binary t
$cput :: RuleId -&gt; Put
put :: RuleId -&gt; Put
$cget :: Get RuleId
get :: Get RuleId
$cputList :: [RuleId] -&gt; Put
putList :: [RuleId] -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Binary</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504750"><span id="local-6989586621679504757"><span class="annot"><span class="annottext">Typeable RuleId
Tagged RuleId MD5
Typeable RuleId =&gt;
(Proxy RuleId -&gt; Structure)
-&gt; Tagged RuleId MD5 -&gt; Structured RuleId
Proxy RuleId -&gt; Structure
forall a.
Typeable a =&gt;
(Proxy a -&gt; Structure) -&gt; Tagged a MD5 -&gt; Structured a
$cstructure :: Proxy RuleId -&gt; Structure
structure :: Proxy RuleId -&gt; Structure
$cstructureHash' :: Tagged RuleId MD5
structureHash' :: Tagged RuleId MD5
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#Structured"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Structured</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-keyword">data</span><span> </span><span id="RulesNameSpace"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesNameSpace"><span class="hs-identifier hs-var">RulesNameSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RulesNameSpace"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesNameSpace"><span class="hs-identifier hs-var">RulesNameSpace</span></a></span></span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="rulesUnitId"><span class="annot"><span class="annottext">RulesNameSpace -&gt; UnitId
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesUnitId"><span class="hs-identifier hs-var hs-var">rulesUnitId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.UnitId.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="rulesModuleName"><span class="annot"><span class="annottext">RulesNameSpace -&gt; ModuleName
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesModuleName"><span class="hs-identifier hs-var hs-var">rulesModuleName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.ModuleName.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="rulesSrcLoc"><span class="annot"><span class="annottext">RulesNameSpace -&gt; (Int, Int)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesSrcLoc"><span class="hs-identifier hs-var hs-var">rulesSrcLoc</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504797"><span id="local-6989586621679504808"><span id="local-6989586621679504811"><span class="annot"><span class="annottext">Int -&gt; RulesNameSpace -&gt; ShowS
[RulesNameSpace] -&gt; ShowS
RulesNameSpace -&gt; String
(Int -&gt; RulesNameSpace -&gt; ShowS)
-&gt; (RulesNameSpace -&gt; String)
-&gt; ([RulesNameSpace] -&gt; ShowS)
-&gt; Show RulesNameSpace
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; RulesNameSpace -&gt; ShowS
showsPrec :: Int -&gt; RulesNameSpace -&gt; ShowS
$cshow :: RulesNameSpace -&gt; String
show :: RulesNameSpace -&gt; String
$cshowList :: [RulesNameSpace] -&gt; ShowS
showList :: [RulesNameSpace] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504815"><span id="local-6989586621679504825"><span class="annot"><span class="annottext">RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
(RulesNameSpace -&gt; RulesNameSpace -&gt; Bool)
-&gt; (RulesNameSpace -&gt; RulesNameSpace -&gt; Bool) -&gt; Eq RulesNameSpace
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
== :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
$c/= :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
/= :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504831"><span id="local-6989586621679504841"><span id="local-6989586621679504848"><span id="local-6989586621679504851"><span id="local-6989586621679504854"><span id="local-6989586621679504857"><span id="local-6989586621679504860"><span class="annot"><span class="annottext">Eq RulesNameSpace
Eq RulesNameSpace =&gt;
(RulesNameSpace -&gt; RulesNameSpace -&gt; Ordering)
-&gt; (RulesNameSpace -&gt; RulesNameSpace -&gt; Bool)
-&gt; (RulesNameSpace -&gt; RulesNameSpace -&gt; Bool)
-&gt; (RulesNameSpace -&gt; RulesNameSpace -&gt; Bool)
-&gt; (RulesNameSpace -&gt; RulesNameSpace -&gt; Bool)
-&gt; (RulesNameSpace -&gt; RulesNameSpace -&gt; RulesNameSpace)
-&gt; (RulesNameSpace -&gt; RulesNameSpace -&gt; RulesNameSpace)
-&gt; Ord RulesNameSpace
RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
RulesNameSpace -&gt; RulesNameSpace -&gt; Ordering
RulesNameSpace -&gt; RulesNameSpace -&gt; RulesNameSpace
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: RulesNameSpace -&gt; RulesNameSpace -&gt; Ordering
compare :: RulesNameSpace -&gt; RulesNameSpace -&gt; Ordering
$c&lt; :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
&lt; :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
$c&lt;= :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
&lt;= :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
$c&gt; :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
&gt; :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
$c&gt;= :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
&gt;= :: RulesNameSpace -&gt; RulesNameSpace -&gt; Bool
$cmax :: RulesNameSpace -&gt; RulesNameSpace -&gt; RulesNameSpace
max :: RulesNameSpace -&gt; RulesNameSpace -&gt; RulesNameSpace
$cmin :: RulesNameSpace -&gt; RulesNameSpace -&gt; RulesNameSpace
min :: RulesNameSpace -&gt; RulesNameSpace -&gt; RulesNameSpace
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504863"><span id="local-6989586621679504865"><span class="annot"><span class="annottext">(forall x. RulesNameSpace -&gt; Rep RulesNameSpace x)
-&gt; (forall x. Rep RulesNameSpace x -&gt; RulesNameSpace)
-&gt; Generic RulesNameSpace
forall x. Rep RulesNameSpace x -&gt; RulesNameSpace
forall x. RulesNameSpace -&gt; Rep RulesNameSpace x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. RulesNameSpace -&gt; Rep RulesNameSpace x
from :: forall x. RulesNameSpace -&gt; Rep RulesNameSpace x
$cto :: forall x. Rep RulesNameSpace x -&gt; RulesNameSpace
to :: forall x. Rep RulesNameSpace x -&gt; RulesNameSpace
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504868"><span id="local-6989586621679504874"><span id="local-6989586621679504880"><span class="annot"><span class="annottext">Get RulesNameSpace
[RulesNameSpace] -&gt; Put
RulesNameSpace -&gt; Put
(RulesNameSpace -&gt; Put)
-&gt; Get RulesNameSpace
-&gt; ([RulesNameSpace] -&gt; Put)
-&gt; Binary RulesNameSpace
forall t. (t -&gt; Put) -&gt; Get t -&gt; ([t] -&gt; Put) -&gt; Binary t
$cput :: RulesNameSpace -&gt; Put
put :: RulesNameSpace -&gt; Put
$cget :: Get RulesNameSpace
get :: Get RulesNameSpace
$cputList :: [RulesNameSpace] -&gt; Put
putList :: [RulesNameSpace] -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Binary</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679504917"><span id="local-6989586621679504923"><span class="annot"><span class="annottext">Typeable RulesNameSpace
Tagged RulesNameSpace MD5
Typeable RulesNameSpace =&gt;
(Proxy RulesNameSpace -&gt; Structure)
-&gt; Tagged RulesNameSpace MD5 -&gt; Structured RulesNameSpace
Proxy RulesNameSpace -&gt; Structure
forall a.
Typeable a =&gt;
(Proxy a -&gt; Structure) -&gt; Tagged a MD5 -&gt; Structured a
$cstructure :: Proxy RulesNameSpace -&gt; Structure
structure :: Proxy RulesNameSpace -&gt; Structure
$cstructureHash' :: Tagged RulesNameSpace MD5
structureHash' :: Tagged RulesNameSpace MD5
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#Structured"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Structured</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="annot"><span class="hs-comment">-- | Internal function: create a 'RulesNameSpace' from a 'StaticPtrInfo'.</span></span><span>
</span><span id="line-219"></span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#staticPtrNameSpace"><span class="hs-identifier hs-type">staticPtrNameSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StaticPtrInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesNameSpace"><span class="hs-identifier hs-type">RulesNameSpace</span></a></span><span>
</span><span id="line-220"></span><span id="staticPtrNameSpace"><span class="annot"><span class="annottext">staticPtrNameSpace :: StaticPtrInfo -&gt; RulesNameSpace
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticPtrNameSpace"><span class="hs-identifier hs-var hs-var">staticPtrNameSpace</span></a></span></span><span>
</span><span id="line-221"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">StaticPtrInfo</span></span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">spInfoUnitId :: StaticPtrInfo -&gt; String
</span><span class="hs-identifier hs-var">spInfoUnitId</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679504958"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679504958"><span class="hs-identifier hs-var">unitId</span></a></span></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spInfoModuleName :: StaticPtrInfo -&gt; String
</span><span class="hs-identifier hs-var">spInfoModuleName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679504960"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679504960"><span class="hs-identifier hs-var">modName</span></a></span></span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">spInfoSrcLoc :: StaticPtrInfo -&gt; (Int, Int)
</span><span class="hs-identifier hs-var">spInfoSrcLoc</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679504962"><span class="annot"><span class="annottext">(Int, Int)
</span><a href="#local-6989586621679504962"><span class="hs-identifier hs-var">srcLoc</span></a></span></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-226"></span><span>    </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesNameSpace"><span class="hs-identifier hs-type">RulesNameSpace</span></a></span><span>
</span><span id="line-227"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rulesUnitId :: UnitId
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesUnitId"><span class="hs-identifier hs-var">rulesUnitId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; UnitId
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.UnitId.html#mkUnitId"><span class="hs-identifier hs-var">mkUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679504958"><span class="hs-identifier hs-var">unitId</span></a></span><span>
</span><span id="line-228"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rulesModuleName :: ModuleName
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesModuleName"><span class="hs-identifier hs-var">rulesModuleName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ModuleName
forall a. IsString a =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">fromString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679504960"><span class="hs-identifier hs-var">modName</span></a></span><span>
</span><span id="line-229"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rulesSrcLoc :: (Int, Int)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesSrcLoc"><span class="hs-identifier hs-var">rulesSrcLoc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, Int)
</span><a href="#local-6989586621679504962"><span class="hs-identifier hs-var">srcLoc</span></a></span><span>
</span><span id="line-230"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-comment">-- | 'Rule's are defined with rich types by the package.</span><span>
</span><span id="line-233"></span><span class="hs-comment">--</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- The build system only has a limited view of these; most data consists of</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- opaque 'ByteString's.</span><span>
</span><span id="line-236"></span><span class="hs-comment">--</span><span>
</span><span id="line-237"></span><span class="hs-comment">-- The 'Scope' data-type describes which side of this divide we are on.</span><span>
</span><span id="line-238"></span><span class="hs-keyword">data</span><span> </span><span id="Scope"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-var">Scope</span></a></span></span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | User space (with rich types).</span></span><span>
</span><span id="line-240"></span><span>    </span><span id="User"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-var">User</span></a></span></span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | Build-system space (manipulation of raw data).</span></span><span>
</span><span id="line-242"></span><span>    </span><span id="System"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-var">System</span></a></span></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-keyword">data</span><span> </span><span id="SScope"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#SScope"><span class="hs-identifier hs-var">SScope</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504964"><span class="annot"><a href="#local-6989586621679504964"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-type">Scope</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-245"></span><span>  </span><span id="SUser"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#SUser"><span class="hs-identifier hs-var">SUser</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#SScope"><span class="hs-identifier hs-type">SScope</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span>
</span><span id="line-246"></span><span>  </span><span id="SSystem"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#SSystem"><span class="hs-identifier hs-var">SSystem</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#SScope"><span class="hs-identifier hs-type">SScope</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-keyword">type</span><span> </span><span id="Rule"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier hs-var">Rule</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleData"><span class="hs-identifier hs-type">RuleData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span>
</span><span id="line-249"></span><span class="hs-keyword">type</span><span> </span><span id="RuleBinary"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleBinary"><span class="hs-identifier hs-var">RuleBinary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleData"><span class="hs-identifier hs-type">RuleData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="hs-comment">-- | A rule consists of:</span><span>
</span><span id="line-252"></span><span class="hs-comment">--</span><span>
</span><span id="line-253"></span><span class="hs-comment">--  - an action to run to execute the rule,</span><span>
</span><span id="line-254"></span><span class="hs-comment">--  - a description of the rule inputs and outputs.</span><span>
</span><span id="line-255"></span><span class="hs-comment">--</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- Use 'staticRule' or 'dynamicRule' to construct a rule, overriding specific</span><span>
</span><span id="line-257"></span><span class="hs-comment">-- fields, rather than directly using the 'Rule' constructor.</span><span>
</span><span id="line-258"></span><span class="hs-keyword">data</span><span> </span><span id="RuleData"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleData"><span class="hs-identifier hs-var">RuleData</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679503999"><span class="annot"><a href="#local-6989586621679503999"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-type">Scope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Please use the 'staticRule' or 'dynamicRule' smart constructors</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-comment">-- instead of this constructor, in order to avoid relying on internal</span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-comment">-- implementation details.</span><span>
</span><span id="line-262"></span><span>    </span><span id="Rule"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier hs-var">Rule</span></a></span></span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="ruleCommands"><span class="annot"><span class="annottext">forall (scope :: Scope). RuleData scope -&gt; RuleCmds scope
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ruleCommands"><span class="hs-identifier hs-var hs-var">ruleCommands</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCmds"><span class="hs-identifier hs-type">RuleCmds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679503999"><span class="hs-identifier hs-type">scope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ To run this rule, which t'Command's should we execute?</span></span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="staticDependencies"><span class="annot"><span class="annottext">forall (scope :: Scope). RuleData scope -&gt; [Dependency]
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticDependencies"><span class="hs-identifier hs-var hs-var">staticDependencies</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Static dependencies of this rule.</span></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="results"><span class="annot"><span class="annottext">forall (scope :: Scope). RuleData scope -&gt; NonEmpty Location
</span><a href="Distribution.Simple.SetupHooks.Rule.html#results"><span class="hs-identifier hs-var hs-var">results</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Results of this rule.</span></span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504972"><span id="local-6989586621679504974"><span class="annot"><span class="annottext">(forall x. RuleData scope -&gt; Rep (RuleData scope) x)
-&gt; (forall x. Rep (RuleData scope) x -&gt; RuleData scope)
-&gt; Generic (RuleData scope)
forall x. Rep (RuleData scope) x -&gt; RuleData scope
forall x. RuleData scope -&gt; Rep (RuleData scope) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall (scope :: Scope) x. Rep (RuleData scope) x -&gt; RuleData scope
forall (scope :: Scope) x. RuleData scope -&gt; Rep (RuleData scope) x
$cfrom :: forall (scope :: Scope) x. RuleData scope -&gt; Rep (RuleData scope) x
from :: forall x. RuleData scope -&gt; Rep (RuleData scope) x
$cto :: forall (scope :: Scope) x. Rep (RuleData scope) x -&gt; RuleData scope
to :: forall x. Rep (RuleData scope) x -&gt; RuleData scope
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span id="local-6989586621679504977"><span id="local-6989586621679504990"><span id="local-6989586621679504994"><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleData"><span class="hs-identifier hs-type">RuleData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-273"></span><span id="local-6989586621679504999"><span id="local-6989586621679505011"><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleData"><span class="hs-identifier hs-type">RuleData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-274"></span><span id="local-6989586621679505017"><span id="local-6989586621679505027"><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleData"><span class="hs-identifier hs-type">RuleData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-275"></span><span id="local-6989586621679505034"><span id="local-6989586621679505040"><span id="local-6989586621679505046"><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleData"><span class="hs-identifier hs-type">RuleData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-276"></span><span id="local-6989586621679505086"><span id="local-6989586621679505092"><span id="local-6989586621679505098"><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleData"><span class="hs-identifier hs-type">RuleData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="annot"><span class="hs-comment">-- | Trimmed down 'Show' instance, mostly for error messages.</span></span><span>
</span><span id="line-279"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679505139"><span id="local-6989586621679505144"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleBinary"><span class="hs-identifier hs-type">RuleBinary</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-280"></span><span>  </span><span id="local-6989586621679505151"><span class="annot"><span class="annottext">show :: RuleBinary -&gt; String
</span><a href="#local-6989586621679505151"><span class="hs-identifier hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">staticDependencies :: forall (scope :: Scope). RuleData scope -&gt; [Dependency]
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticDependencies"><span class="hs-identifier hs-var">staticDependencies</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679505153"><span class="annot"><span class="annottext">[Dependency]
</span><a href="#local-6989586621679505153"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">results :: forall (scope :: Scope). RuleData scope -&gt; NonEmpty Location
</span><a href="Distribution.Simple.SetupHooks.Rule.html#results"><span class="hs-identifier hs-var">results</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679505154"><span class="annot"><span class="annottext">NonEmpty Location
</span><a href="#local-6989586621679505154"><span class="hs-identifier hs-var">reslts</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ruleCommands :: forall (scope :: Scope). RuleData scope -&gt; RuleCmds scope
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ruleCommands"><span class="hs-identifier hs-var">ruleCommands</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679505155"><span class="annot"><span class="annottext">RuleCmds 'System
</span><a href="#local-6989586621679505155"><span class="hs-identifier hs-var">cmds</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679505156"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Dependency] -&gt; String
</span><a href="#local-6989586621679505157"><span class="hs-identifier hs-var">showDeps</span></a></span><span> </span><span class="annot"><span class="annottext">[Dependency]
</span><a href="#local-6989586621679505153"><span class="hs-identifier hs-var">deps</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; --&gt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Location] -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Location -&gt; [Location]
forall a. NonEmpty a -&gt; [a]
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#toList"><span class="hs-identifier hs-var">NE.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Location
</span><a href="#local-6989586621679505154"><span class="hs-identifier hs-var">reslts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-283"></span><span>      </span><span id="local-6989586621679505156"><span class="annot"><span class="annottext">what :: String
</span><a href="#local-6989586621679505156"><span class="hs-identifier hs-var hs-var">what</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RuleCmds 'System
</span><a href="#local-6989586621679505155"><span class="hs-identifier hs-var">cmds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-284"></span><span>        </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rule&quot;</span></span><span>
</span><span id="line-285"></span><span>        </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rule (dyn-deps)&quot;</span></span><span>
</span><span id="line-286"></span><span>      </span><span class="annot"><a href="#local-6989586621679505157"><span class="hs-identifier hs-type">showDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-287"></span><span>      </span><span id="local-6989586621679505157"><span class="annot"><span class="annottext">showDeps :: [Dependency] -&gt; String
</span><a href="#local-6989586621679505157"><span class="hs-identifier hs-var hs-var">showDeps</span></a></span></span><span> </span><span id="local-6989586621679505163"><span class="annot"><span class="annottext">[Dependency]
</span><a href="#local-6989586621679505163"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Dependency -&gt; String) -&gt; [Dependency] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Dependency -&gt; String
</span><a href="#local-6989586621679505165"><span class="hs-identifier hs-var">showDep</span></a></span><span> </span><span class="annot"><span class="annottext">[Dependency]
</span><a href="#local-6989586621679505163"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;]&quot;</span></span><span>
</span><span id="line-288"></span><span>      </span><span class="annot"><a href="#local-6989586621679505165"><span class="hs-identifier hs-type">showDep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-289"></span><span>      </span><span id="local-6989586621679505165"><span class="annot"><span class="annottext">showDep :: Dependency -&gt; String
</span><a href="#local-6989586621679505165"><span class="hs-identifier hs-var hs-var">showDep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-290"></span><span>        </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleDependency"><span class="hs-identifier hs-type">RuleDependency</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleOutput"><span class="hs-identifier hs-type">RuleOutput</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">outputOfRule :: RuleOutput -&gt; RuleId
</span><a href="Distribution.Simple.SetupHooks.Rule.html#outputOfRule"><span class="hs-identifier hs-var">outputOfRule</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679505169"><span class="annot"><span class="annottext">RuleId
</span><a href="#local-6989586621679505169"><span class="hs-identifier hs-var">rId</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">outputIndex :: RuleOutput -&gt; Word
</span><a href="Distribution.Simple.SetupHooks.Rule.html#outputIndex"><span class="hs-identifier hs-var">outputIndex</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679505171"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679505171"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-291"></span><span>          </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RuleId -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RuleId
</span><a href="#local-6989586621679505169"><span class="hs-identifier hs-var">rId</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)[&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679505171"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;]&quot;</span></span><span>
</span><span id="line-292"></span><span>        </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#FileDependency"><span class="hs-identifier hs-type">FileDependency</span></a></span><span> </span><span id="local-6989586621679505173"><span class="annot"><span class="annottext">Location
</span><a href="#local-6989586621679505173"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Location -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Location
</span><a href="#local-6989586621679505173"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span class="hs-comment">-- | A rule with static dependencies.</span><span>
</span><span id="line-295"></span><span class="hs-comment">--</span><span>
</span><span id="line-296"></span><span class="hs-comment">-- Prefer using this smart constructor instead of v'Rule' whenever possible.</span><span>
</span><span id="line-297"></span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#staticRule"><span class="hs-identifier hs-type">staticRule</span></a></span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504061"><span class="annot"><a href="#local-6989586621679504061"><span class="hs-identifier hs-type">arg</span></a></span></span><span>
</span><span id="line-299"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679504061"><span class="hs-identifier hs-type">arg</span></a></span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504061"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-302"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span>
</span><span id="line-304"></span><span id="staticRule"><span class="annot"><span class="annottext">staticRule :: forall arg.
Typeable arg =&gt;
Command arg (IO ()) -&gt; [Dependency] -&gt; NonEmpty Location -&gt; Rule
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRule"><span class="hs-identifier hs-var hs-var">staticRule</span></a></span></span><span> </span><span id="local-6989586621679505178"><span class="annot"><span class="annottext">Command arg (IO ())
</span><a href="#local-6989586621679505178"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span id="local-6989586621679505179"><span class="annot"><span class="annottext">[Dependency]
</span><a href="#local-6989586621679505179"><span class="hs-identifier hs-var">dep</span></a></span></span><span> </span><span id="local-6989586621679505180"><span class="annot"><span class="annottext">NonEmpty Location
</span><a href="#local-6989586621679505180"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ruleCommands :: RuleCmds 'User
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ruleCommands"><span class="hs-identifier hs-var">ruleCommands</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-307"></span><span>        </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span>
</span><span id="line-308"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">staticRuleCommand :: Command arg (IO ())
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Command arg (IO ())
</span><a href="#local-6989586621679505178"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-309"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticRuleArgRep :: If ('User == 'System) SomeTypeRep (TypeRep arg)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Typeable a =&gt; TypeRep a
forall {k} (a :: k). Typeable a =&gt; TypeRep a
</span><span class="hs-identifier hs-var">Typeable.typeRep</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679504061"><span class="hs-identifier hs-type">arg</span></a></span><span>
</span><span id="line-310"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticDependencies :: [Dependency]
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticDependencies"><span class="hs-identifier hs-var">staticDependencies</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Dependency]
</span><a href="#local-6989586621679505179"><span class="hs-identifier hs-var">dep</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">results :: NonEmpty Location
</span><a href="Distribution.Simple.SetupHooks.Rule.html#results"><span class="hs-identifier hs-var">results</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty Location
</span><a href="#local-6989586621679505180"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="hs-comment">-- | A rule with dynamic dependencies.</span><span>
</span><span id="line-316"></span><span class="hs-comment">--</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- Prefer using this smart constructor instead of v'Rule' whenever possible.</span><span>
</span><span id="line-318"></span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRule"><span class="hs-identifier hs-type">dynamicRule</span></a></span><span>
</span><span id="line-319"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504066"><span class="annot"><a href="#local-6989586621679504066"><span class="hs-identifier hs-type">depsArg</span></a></span></span><span> </span><span id="local-6989586621679504067"><span class="annot"><a href="#local-6989586621679504067"><span class="hs-identifier hs-type">depsRes</span></a></span></span><span> </span><span id="local-6989586621679504068"><span class="annot"><a href="#local-6989586621679504068"><span class="hs-identifier hs-type">arg</span></a></span></span><span>
</span><span id="line-320"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679504066"><span class="hs-identifier hs-type">depsArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679504067"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679504068"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StaticPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-type">Dict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="#local-6989586621679504067"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679504067"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679504067"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504066"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679504067"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504068"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504067"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span>
</span><span id="line-327"></span><span id="dynamicRule"><span class="annot"><span class="annottext">dynamicRule :: forall depsArg depsRes arg.
(Typeable depsArg, Typeable depsRes, Typeable arg) =&gt;
StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Command depsArg (IO ([Dependency], depsRes))
-&gt; Command arg (depsRes -&gt; IO ())
-&gt; [Dependency]
-&gt; NonEmpty Location
-&gt; Rule
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRule"><span class="hs-identifier hs-var hs-var">dynamicRule</span></a></span></span><span> </span><span id="local-6989586621679505192"><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679505192"><span class="hs-identifier hs-var">dict</span></a></span></span><span> </span><span id="local-6989586621679505193"><span class="annot"><span class="annottext">Command depsArg (IO ([Dependency], depsRes))
</span><a href="#local-6989586621679505193"><span class="hs-identifier hs-var">depsCmd</span></a></span></span><span> </span><span id="local-6989586621679505194"><span class="annot"><span class="annottext">Command arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679505194"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span id="local-6989586621679505195"><span class="annot"><span class="annottext">[Dependency]
</span><a href="#local-6989586621679505195"><span class="hs-identifier hs-var">dep</span></a></span></span><span> </span><span id="local-6989586621679505196"><span class="annot"><span class="annottext">NonEmpty Location
</span><a href="#local-6989586621679505196"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-328"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ruleCommands :: RuleCmds 'User
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ruleCommands"><span class="hs-identifier hs-var">ruleCommands</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-330"></span><span>        </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-331"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: Static 'User (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Static 'User (Dict (Binary depsRes, Show depsRes, Eq depsRes))
forall fnTy. StaticPtr fnTy -&gt; Static 'User fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-var">UserStatic</span></a></span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679505192"><span class="hs-identifier hs-var">dict</span></a></span><span>
</span><span id="line-332"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: DynDepsCmd 'User depsArg depsRes
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-type">DynDepsCmd</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">dynDepsCmd :: Command depsArg (IO ([Dependency], depsRes))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynDepsCmd"><span class="hs-identifier hs-var">dynDepsCmd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Command depsArg (IO ([Dependency], depsRes))
</span><a href="#local-6989586621679505193"><span class="hs-identifier hs-var">depsCmd</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-333"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: Command arg (depsRes -&gt; IO ())
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Command arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679505194"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-334"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleTypeRep :: If ('User == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Typeable a =&gt; TypeRep a
forall {k} (a :: k). Typeable a =&gt; TypeRep a
</span><span class="hs-identifier hs-var">Typeable.typeRep</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504066"><span class="hs-identifier hs-type">depsArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679504067"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679504068"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-335"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticDependencies :: [Dependency]
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticDependencies"><span class="hs-identifier hs-var">staticDependencies</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Dependency]
</span><a href="#local-6989586621679505195"><span class="hs-identifier hs-var">dep</span></a></span><span>
</span><span id="line-337"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">results :: NonEmpty Location
</span><a href="Distribution.Simple.SetupHooks.Rule.html#results"><span class="hs-identifier hs-var">results</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty Location
</span><a href="#local-6989586621679505196"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-338"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span class="hs-comment">-----------------------</span><span>
</span><span id="line-341"></span><span class="hs-comment">-- Rule inputs/outputs</span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="hs-comment">-- | A (fully resolved) location of a dependency or result of a rule,</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- consisting of a base directory and of a file path relative to that base</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- directory path.</span><span>
</span><span id="line-346"></span><span class="hs-comment">--</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- In practice, this will be something like @'Location' dir ('moduleNameSymbolicPath' mod &lt;.&gt; &quot;hs&quot;)@,</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- where:</span><span>
</span><span id="line-349"></span><span class="hs-comment">--</span><span>
</span><span id="line-350"></span><span class="hs-comment">--  - for a file dependency, @dir@ is one of the Cabal search directories,</span><span>
</span><span id="line-351"></span><span class="hs-comment">--  - for an output, @dir@ is a directory such as @autogenComponentModulesDir@</span><span>
</span><span id="line-352"></span><span class="hs-comment">--    or @componentBuildDir@.</span><span>
</span><span id="line-353"></span><span class="hs-keyword">data</span><span> </span><span id="Location"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-var">Location</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-354"></span><span>  </span><span id="local-6989586621679505205"><span id="Location"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-var">Location</span></a></span></span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">{</span><span> </span><span id="locationBaseDir"><span class="annot"><span class="annottext">()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#locationBaseDir"><span class="hs-identifier hs-var hs-var">locationBaseDir</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier hs-type">SymbolicPath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier hs-type">Pkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Dir"><span class="hs-identifier hs-type">Dir</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505205"><span class="hs-identifier hs-type">baseDir</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ Base directory.</span></span><span>
</span><span id="line-357"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="locationRelPath"><span class="annot"><span class="annottext">()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#locationRelPath"><span class="hs-identifier hs-var hs-var">locationRelPath</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#RelativePath"><span class="hs-identifier hs-type">RelativePath</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505205"><span class="hs-identifier hs-type">baseDir</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#File"><span class="hs-identifier hs-type">File</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ File path relative to base directory (including file extension).</span></span><span>
</span><span id="line-359"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span></span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679505210"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-363"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span> </span><span id="local-6989586621679505212"><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505212"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621679505213"><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505213"><span class="hs-identifier hs-var">l1</span></a></span></span><span> </span><span id="local-6989586621679505214"><span class="annot"><span class="annottext">== :: Location -&gt; Location -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span> </span><span id="local-6989586621679505219"><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505219"><span class="hs-identifier hs-var">b2</span></a></span></span><span> </span><span id="local-6989586621679505220"><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505220"><span class="hs-identifier hs-var">l2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-364"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir) -&gt; String
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; String
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505212"><span class="hs-identifier hs-var">b1</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir) -&gt; String
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; String
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505219"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelativePath baseDir 'File -&gt; String
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; String
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505213"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File -&gt; String
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; String
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505220"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679505226"><span id="local-6989586621679505230"><span id="local-6989586621679505233"><span id="local-6989586621679505236"><span id="local-6989586621679505239"><span id="local-6989586621679505242"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-367"></span><span>  </span><span id="local-6989586621679505244"><span class="annot"><span class="annottext">compare :: Location -&gt; Location -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var">compare</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span> </span><span id="local-6989586621679505245"><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505245"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621679505246"><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505246"><span class="hs-identifier hs-var">l1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span> </span><span id="local-6989586621679505253"><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505253"><span class="hs-identifier hs-var">b2</span></a></span></span><span> </span><span id="local-6989586621679505254"><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505254"><span class="hs-identifier hs-var">l2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-368"></span><span>    </span><span class="annot"><span class="annottext">(String, String) -&gt; (String, String) -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span>
</span><span id="line-369"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir) -&gt; String
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; String
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505245"><span class="hs-identifier hs-var">b1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File -&gt; String
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; String
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505246"><span class="hs-identifier hs-var">l1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir) -&gt; String
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; String
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505253"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File -&gt; String
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; String
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505254"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679505258"><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-372"></span><span>  </span><span id="local-6989586621679505260"><span class="annot"><span class="annottext">put :: Location -&gt; Put
</span><a href="#local-6989586621679505260"><span class="hs-identifier hs-var hs-var hs-var">put</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span> </span><span id="local-6989586621679505266"><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505266"><span class="hs-identifier hs-var">base</span></a></span></span><span> </span><span id="local-6989586621679505267"><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505267"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SymbolicPath Pkg ('Dir baseDir), RelativePath baseDir 'File)
-&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505266"><span class="hs-identifier hs-var">base</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505267"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>  </span><span id="local-6989586621679505274"><span class="annot"><span class="annottext">get :: Get Location
</span><a href="#local-6989586621679505274"><span class="hs-identifier hs-var hs-var hs-var">get</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir (ZonkAny 0))
-&gt; RelativePath (ZonkAny 0) 'File -&gt; Location
forall baseDir.
SymbolicPath Pkg ('Dir baseDir)
-&gt; RelativePath baseDir 'File -&gt; Location
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-var">Location</span></a></span><span> </span><span class="annot"><span class="annottext">(SymbolicPath Pkg ('Dir (ZonkAny 0))
 -&gt; RelativePath (ZonkAny 0) 'File -&gt; Location)
-&gt; Get (SymbolicPath Pkg ('Dir (ZonkAny 0)))
-&gt; Get (RelativePath (ZonkAny 0) 'File -&gt; Location)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get (SymbolicPath Pkg ('Dir (ZonkAny 0)))
forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span> </span><span class="annot"><span class="annottext">Get (RelativePath (ZonkAny 0) 'File -&gt; Location)
-&gt; Get (RelativePath (ZonkAny 0) 'File) -&gt; Get Location
forall a b. Get (a -&gt; b) -&gt; Get a -&gt; Get b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get (RelativePath (ZonkAny 0) 'File)
forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-374"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679505281"><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#Structured"><span class="hs-identifier hs-type">Structured</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-375"></span><span>  </span><span id="local-6989586621679505310"><span class="annot"><span class="annottext">structure :: Proxy Location -&gt; Structure
</span><a href="#local-6989586621679505310"><span class="hs-identifier hs-var hs-var hs-var">structure</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy Location
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-376"></span><span>    </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; TypeVersion -&gt; String -&gt; SopStructure -&gt; Structure
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#Structure"><span class="hs-identifier hs-var">Structure</span></a></span><span>
</span><span id="line-377"></span><span>      </span><span class="annot"><span class="annottext">SomeTypeRep
</span><a href="#local-6989586621679505313"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-378"></span><span>      </span><span class="annot"><span class="annottext">TypeVersion
</span><span class="hs-number">0</span></span><span>
</span><span id="line-379"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeTypeRep -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">SomeTypeRep
</span><a href="#local-6989586621679505313"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>      </span><span class="hs-special">[</span><span>
</span><span id="line-381"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Location&quot;</span></span><span>
</span><span id="line-382"></span><span>        </span><span class="hs-special">,</span><span>
</span><span id="line-383"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Proxy (SymbolicPath Pkg ('Dir (Tok &quot;baseDir&quot;))) -&gt; Structure
forall {k} (a :: k). Typeable a =&gt; Proxy a -&gt; Structure
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#nominalStructure"><span class="hs-identifier hs-var">nominalStructure</span></a></span><span> </span><span class="annot"><span class="annottext">(Proxy (SymbolicPath Pkg ('Dir (Tok &quot;baseDir&quot;))) -&gt; Structure)
-&gt; Proxy (SymbolicPath Pkg ('Dir (Tok &quot;baseDir&quot;))) -&gt; Structure
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier hs-type">SymbolicPath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier hs-type">Pkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Dir"><span class="hs-identifier hs-type">Dir</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Tok"><span class="hs-identifier hs-type">Tok</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;baseDir&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proxy (RelativePath (Tok &quot;baseDir&quot;) 'File) -&gt; Structure
forall {k} (a :: k). Typeable a =&gt; Proxy a -&gt; Structure
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#nominalStructure"><span class="hs-identifier hs-var">nominalStructure</span></a></span><span> </span><span class="annot"><span class="annottext">(Proxy (RelativePath (Tok &quot;baseDir&quot;) 'File) -&gt; Structure)
-&gt; Proxy (RelativePath (Tok &quot;baseDir&quot;) 'File) -&gt; Structure
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#RelativePath"><span class="hs-identifier hs-type">RelativePath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Tok"><span class="hs-identifier hs-type">Tok</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;baseDir&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#File"><span class="hs-identifier hs-type">File</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-386"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-389"></span><span>      </span><span id="local-6989586621679505313"><span class="annot"><span class="annottext">tr :: SomeTypeRep
</span><a href="#local-6989586621679505313"><span class="hs-identifier hs-var hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeRep Location -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">Typeable.SomeTypeRep</span></span><span> </span><span class="annot"><span class="annottext">(TypeRep Location -&gt; SomeTypeRep)
-&gt; TypeRep Location -&gt; SomeTypeRep
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Typeable a =&gt; TypeRep a
forall {k} (a :: k). Typeable a =&gt; TypeRep a
</span><span class="hs-identifier hs-var">Typeable.typeRep</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="annot"><span class="hs-comment">-- | Get a (relative or absolute) un-interpreted path to a 'Location'.</span></span><span>
</span><span id="line-392"></span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#location"><span class="hs-identifier hs-type">location</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#SymbolicPath"><span class="hs-identifier hs-type">SymbolicPath</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#Pkg"><span class="hs-identifier hs-type">Pkg</span></a></span><span> </span><span class="annot"><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#File"><span class="hs-identifier hs-type">File</span></a></span><span>
</span><span id="line-393"></span><span id="location"><span class="annot"><span class="annottext">location :: Location -&gt; SymbolicPath Pkg 'File
</span><a href="Distribution.Simple.SetupHooks.Rule.html#location"><span class="hs-identifier hs-var hs-var">location</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span> </span><span id="local-6989586621679505322"><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505322"><span class="hs-identifier hs-var">base</span></a></span></span><span> </span><span id="local-6989586621679505323"><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505323"><span class="hs-identifier hs-var">rel</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505322"><span class="hs-identifier hs-var">base</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
-&gt; RelativePath baseDir 'File -&gt; SymbolicPath Pkg 'File
forall p q r. PathLike p q r =&gt; p -&gt; q -&gt; r
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505323"><span class="hs-identifier hs-var">rel</span></a></span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679505326"><span id="local-6989586621679505329"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>  </span><span id="local-6989586621679505331"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; Location -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var">showsPrec</span></span></span><span> </span><span id="local-6989586621679505332"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679505332"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span> </span><span id="local-6989586621679505336"><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505336"><span class="hs-identifier hs-var">base</span></a></span></span><span> </span><span id="local-6989586621679505337"><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505337"><span class="hs-identifier hs-var">rel</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-397"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; ShowS -&gt; ShowS
</span><span class="hs-identifier hs-var">showParen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679505332"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ShowS -&gt; ShowS) -&gt; ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-398"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir) -&gt; String
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; String
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">SymbolicPath Pkg ('Dir baseDir)
</span><a href="#local-6989586621679505336"><span class="hs-identifier hs-var">base</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>        </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &lt;/&gt; &quot;</span></span><span>
</span><span id="line-400"></span><span>        </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File -&gt; String
forall (allowAbsolute :: AllowAbsolute) from (to :: FileOrDir).
SymbolicPathX allowAbsolute from to -&gt; String
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Path.html#getSymbolicPath"><span class="hs-identifier hs-var">getSymbolicPath</span></a></span><span> </span><span class="annot"><span class="annottext">RelativePath baseDir 'File
</span><a href="#local-6989586621679505337"><span class="hs-identifier hs-var">rel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="hs-comment">-- The reason for splitting it up this way is that some pre-processors don't</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- simply generate one output @.hs@ file from one input file, but have</span><span>
</span><span id="line-404"></span><span class="hs-comment">-- dependencies on other generated files (notably @c2hs@, where building one</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- @.hs@ file may require reading other @.chi@ files, and then compiling the</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- @.hs@ file may require reading a generated @.h@ file).</span><span>
</span><span id="line-407"></span><span class="hs-comment">-- In these cases, the generated files need to embed relative path names to each</span><span>
</span><span id="line-408"></span><span class="hs-comment">-- other (eg the generated @.hs@ file mentions the @.h@ file in the FFI imports).</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- This path must be relative to the base directory where the generated files</span><span>
</span><span id="line-410"></span><span class="hs-comment">-- are located; it cannot be relative to the top level of the build tree because</span><span>
</span><span id="line-411"></span><span class="hs-comment">-- the compilers do not look for @.h@ files relative to there, ie we do not use</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- @-I .@, instead we use @-I dist/build@ (or whatever dist dir has been set</span><span>
</span><span id="line-413"></span><span class="hs-comment">-- by the user).</span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span class="annot"><span class="hs-comment">-- | A dependency of a rule.</span></span><span>
</span><span id="line-416"></span><span class="hs-keyword">data</span><span> </span><span id="Dependency"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dependency"><span class="hs-identifier hs-var">Dependency</span></a></span></span><span>
</span><span id="line-417"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | A dependency on an output of another rule.</span></span><span>
</span><span id="line-418"></span><span>    </span><span id="RuleDependency"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleDependency"><span class="hs-identifier hs-var">RuleDependency</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleOutput"><span class="hs-identifier hs-type">RuleOutput</span></a></span><span>
</span><span id="line-419"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | A direct dependency on a file at a particular location on disk.</span><span>
</span><span id="line-420"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-421"></span><span>    </span><span class="hs-comment">-- This should not be used for files that are generated by other rules;</span><span>
</span><span id="line-422"></span><span>    </span><span class="hs-comment">-- use 'RuleDependency' instead.</span><span>
</span><span id="line-423"></span><span>    </span><span id="FileDependency"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#FileDependency"><span class="hs-identifier hs-var">FileDependency</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Location"><span class="hs-identifier hs-type">Location</span></a></span><span>
</span><span id="line-424"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679505342"><span id="local-6989586621679505349"><span id="local-6989586621679505352"><span class="annot"><span class="annottext">Int -&gt; Dependency -&gt; ShowS
[Dependency] -&gt; ShowS
Dependency -&gt; String
(Int -&gt; Dependency -&gt; ShowS)
-&gt; (Dependency -&gt; String)
-&gt; ([Dependency] -&gt; ShowS)
-&gt; Show Dependency
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Dependency -&gt; ShowS
showsPrec :: Int -&gt; Dependency -&gt; ShowS
$cshow :: Dependency -&gt; String
show :: Dependency -&gt; String
$cshowList :: [Dependency] -&gt; ShowS
showList :: [Dependency] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505355"><span id="local-6989586621679505363"><span class="annot"><span class="annottext">Dependency -&gt; Dependency -&gt; Bool
(Dependency -&gt; Dependency -&gt; Bool)
-&gt; (Dependency -&gt; Dependency -&gt; Bool) -&gt; Eq Dependency
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Dependency -&gt; Dependency -&gt; Bool
== :: Dependency -&gt; Dependency -&gt; Bool
$c/= :: Dependency -&gt; Dependency -&gt; Bool
/= :: Dependency -&gt; Dependency -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505368"><span id="local-6989586621679505373"><span id="local-6989586621679505377"><span id="local-6989586621679505381"><span id="local-6989586621679505384"><span id="local-6989586621679505387"><span id="local-6989586621679505390"><span class="annot"><span class="annottext">Eq Dependency
Eq Dependency =&gt;
(Dependency -&gt; Dependency -&gt; Ordering)
-&gt; (Dependency -&gt; Dependency -&gt; Bool)
-&gt; (Dependency -&gt; Dependency -&gt; Bool)
-&gt; (Dependency -&gt; Dependency -&gt; Bool)
-&gt; (Dependency -&gt; Dependency -&gt; Bool)
-&gt; (Dependency -&gt; Dependency -&gt; Dependency)
-&gt; (Dependency -&gt; Dependency -&gt; Dependency)
-&gt; Ord Dependency
Dependency -&gt; Dependency -&gt; Bool
Dependency -&gt; Dependency -&gt; Ordering
Dependency -&gt; Dependency -&gt; Dependency
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: Dependency -&gt; Dependency -&gt; Ordering
compare :: Dependency -&gt; Dependency -&gt; Ordering
$c&lt; :: Dependency -&gt; Dependency -&gt; Bool
&lt; :: Dependency -&gt; Dependency -&gt; Bool
$c&lt;= :: Dependency -&gt; Dependency -&gt; Bool
&lt;= :: Dependency -&gt; Dependency -&gt; Bool
$c&gt; :: Dependency -&gt; Dependency -&gt; Bool
&gt; :: Dependency -&gt; Dependency -&gt; Bool
$c&gt;= :: Dependency -&gt; Dependency -&gt; Bool
&gt;= :: Dependency -&gt; Dependency -&gt; Bool
$cmax :: Dependency -&gt; Dependency -&gt; Dependency
max :: Dependency -&gt; Dependency -&gt; Dependency
$cmin :: Dependency -&gt; Dependency -&gt; Dependency
min :: Dependency -&gt; Dependency -&gt; Dependency
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505393"><span id="local-6989586621679505395"><span class="annot"><span class="annottext">(forall x. Dependency -&gt; Rep Dependency x)
-&gt; (forall x. Rep Dependency x -&gt; Dependency) -&gt; Generic Dependency
forall x. Rep Dependency x -&gt; Dependency
forall x. Dependency -&gt; Rep Dependency x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. Dependency -&gt; Rep Dependency x
from :: forall x. Dependency -&gt; Rep Dependency x
$cto :: forall x. Rep Dependency x -&gt; Dependency
to :: forall x. Rep Dependency x -&gt; Dependency
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-425"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679505398"><span id="local-6989586621679505404"><span id="local-6989586621679505410"><span class="annot"><span class="annottext">Get Dependency
[Dependency] -&gt; Put
Dependency -&gt; Put
(Dependency -&gt; Put)
-&gt; Get Dependency -&gt; ([Dependency] -&gt; Put) -&gt; Binary Dependency
forall t. (t -&gt; Put) -&gt; Get t -&gt; ([t] -&gt; Put) -&gt; Binary t
$cput :: Dependency -&gt; Put
put :: Dependency -&gt; Put
$cget :: Get Dependency
get :: Get Dependency
$cputList :: [Dependency] -&gt; Put
putList :: [Dependency] -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Binary</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505443"><span id="local-6989586621679505450"><span class="annot"><span class="annottext">Typeable Dependency
Tagged Dependency MD5
Typeable Dependency =&gt;
(Proxy Dependency -&gt; Structure)
-&gt; Tagged Dependency MD5 -&gt; Structured Dependency
Proxy Dependency -&gt; Structure
forall a.
Typeable a =&gt;
(Proxy a -&gt; Structure) -&gt; Tagged a MD5 -&gt; Structured a
$cstructure :: Proxy Dependency -&gt; Structure
structure :: Proxy Dependency -&gt; Structure
$cstructureHash' :: Tagged Dependency MD5
structureHash' :: Tagged Dependency MD5
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#Structured"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Structured</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span class="annot"><span class="hs-comment">-- | A reference to an output of another rule.</span></span><span>
</span><span id="line-428"></span><span class="hs-keyword">data</span><span> </span><span id="RuleOutput"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleOutput"><span class="hs-identifier hs-var">RuleOutput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RuleOutput"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleOutput"><span class="hs-identifier hs-var">RuleOutput</span></a></span></span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="outputOfRule"><span class="annot"><span class="annottext">RuleOutput -&gt; RuleId
</span><a href="Distribution.Simple.SetupHooks.Rule.html#outputOfRule"><span class="hs-identifier hs-var hs-var">outputOfRule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleId"><span class="hs-identifier hs-type">RuleId</span></a></span><span>
</span><span id="line-430"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ which rule's outputs are we referring to?</span></span><span>
</span><span id="line-431"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="outputIndex"><span class="annot"><span class="annottext">RuleOutput -&gt; Word
</span><a href="Distribution.Simple.SetupHooks.Rule.html#outputIndex"><span class="hs-identifier hs-var hs-var">outputIndex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span>
</span><span id="line-432"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ which particular output of that rule?</span></span><span>
</span><span id="line-433"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-434"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679505479"><span id="local-6989586621679505484"><span id="local-6989586621679505487"><span class="annot"><span class="annottext">Int -&gt; RuleOutput -&gt; ShowS
[RuleOutput] -&gt; ShowS
RuleOutput -&gt; String
(Int -&gt; RuleOutput -&gt; ShowS)
-&gt; (RuleOutput -&gt; String)
-&gt; ([RuleOutput] -&gt; ShowS)
-&gt; Show RuleOutput
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; RuleOutput -&gt; ShowS
showsPrec :: Int -&gt; RuleOutput -&gt; ShowS
$cshow :: RuleOutput -&gt; String
show :: RuleOutput -&gt; String
$cshowList :: [RuleOutput] -&gt; ShowS
showList :: [RuleOutput] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505490"><span id="local-6989586621679505495"><span class="annot"><span class="annottext">RuleOutput -&gt; RuleOutput -&gt; Bool
(RuleOutput -&gt; RuleOutput -&gt; Bool)
-&gt; (RuleOutput -&gt; RuleOutput -&gt; Bool) -&gt; Eq RuleOutput
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: RuleOutput -&gt; RuleOutput -&gt; Bool
== :: RuleOutput -&gt; RuleOutput -&gt; Bool
$c/= :: RuleOutput -&gt; RuleOutput -&gt; Bool
/= :: RuleOutput -&gt; RuleOutput -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505500"><span id="local-6989586621679505505"><span id="local-6989586621679505509"><span id="local-6989586621679505512"><span id="local-6989586621679505515"><span id="local-6989586621679505518"><span id="local-6989586621679505521"><span class="annot"><span class="annottext">Eq RuleOutput
Eq RuleOutput =&gt;
(RuleOutput -&gt; RuleOutput -&gt; Ordering)
-&gt; (RuleOutput -&gt; RuleOutput -&gt; Bool)
-&gt; (RuleOutput -&gt; RuleOutput -&gt; Bool)
-&gt; (RuleOutput -&gt; RuleOutput -&gt; Bool)
-&gt; (RuleOutput -&gt; RuleOutput -&gt; Bool)
-&gt; (RuleOutput -&gt; RuleOutput -&gt; RuleOutput)
-&gt; (RuleOutput -&gt; RuleOutput -&gt; RuleOutput)
-&gt; Ord RuleOutput
RuleOutput -&gt; RuleOutput -&gt; Bool
RuleOutput -&gt; RuleOutput -&gt; Ordering
RuleOutput -&gt; RuleOutput -&gt; RuleOutput
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: RuleOutput -&gt; RuleOutput -&gt; Ordering
compare :: RuleOutput -&gt; RuleOutput -&gt; Ordering
$c&lt; :: RuleOutput -&gt; RuleOutput -&gt; Bool
&lt; :: RuleOutput -&gt; RuleOutput -&gt; Bool
$c&lt;= :: RuleOutput -&gt; RuleOutput -&gt; Bool
&lt;= :: RuleOutput -&gt; RuleOutput -&gt; Bool
$c&gt; :: RuleOutput -&gt; RuleOutput -&gt; Bool
&gt; :: RuleOutput -&gt; RuleOutput -&gt; Bool
$c&gt;= :: RuleOutput -&gt; RuleOutput -&gt; Bool
&gt;= :: RuleOutput -&gt; RuleOutput -&gt; Bool
$cmax :: RuleOutput -&gt; RuleOutput -&gt; RuleOutput
max :: RuleOutput -&gt; RuleOutput -&gt; RuleOutput
$cmin :: RuleOutput -&gt; RuleOutput -&gt; RuleOutput
min :: RuleOutput -&gt; RuleOutput -&gt; RuleOutput
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505524"><span id="local-6989586621679505526"><span class="annot"><span class="annottext">(forall x. RuleOutput -&gt; Rep RuleOutput x)
-&gt; (forall x. Rep RuleOutput x -&gt; RuleOutput) -&gt; Generic RuleOutput
forall x. Rep RuleOutput x -&gt; RuleOutput
forall x. RuleOutput -&gt; Rep RuleOutput x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. RuleOutput -&gt; Rep RuleOutput x
from :: forall x. RuleOutput -&gt; Rep RuleOutput x
$cto :: forall x. Rep RuleOutput x -&gt; RuleOutput
to :: forall x. Rep RuleOutput x -&gt; RuleOutput
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679505529"><span id="local-6989586621679505535"><span id="local-6989586621679505541"><span class="annot"><span class="annottext">Get RuleOutput
[RuleOutput] -&gt; Put
RuleOutput -&gt; Put
(RuleOutput -&gt; Put)
-&gt; Get RuleOutput -&gt; ([RuleOutput] -&gt; Put) -&gt; Binary RuleOutput
forall t. (t -&gt; Put) -&gt; Get t -&gt; ([t] -&gt; Put) -&gt; Binary t
$cput :: RuleOutput -&gt; Put
put :: RuleOutput -&gt; Put
$cget :: Get RuleOutput
get :: Get RuleOutput
$cputList :: [RuleOutput] -&gt; Put
putList :: [RuleOutput] -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Binary</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505563"><span id="local-6989586621679505569"><span class="annot"><span class="annottext">Typeable RuleOutput
Tagged RuleOutput MD5
Typeable RuleOutput =&gt;
(Proxy RuleOutput -&gt; Structure)
-&gt; Tagged RuleOutput MD5 -&gt; Structured RuleOutput
Proxy RuleOutput -&gt; Structure
forall a.
Typeable a =&gt;
(Proxy a -&gt; Structure) -&gt; Tagged a MD5 -&gt; Structured a
$cstructure :: Proxy RuleOutput -&gt; Structure
structure :: Proxy RuleOutput -&gt; Structure
$cstructureHash' :: Tagged RuleOutput MD5
structureHash' :: Tagged RuleOutput MD5
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Utils.Structured.html#Structured"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Structured</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-comment">---------</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- Rules</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span class="annot"><span class="hs-comment">-- | Monad for constructing rules.</span></span><span>
</span><span id="line-441"></span><span class="hs-keyword">type</span><span> </span><span id="RulesM"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesM"><span class="hs-identifier hs-var">RulesM</span></a></span></span><span> </span><span id="local-6989586621679505592"><span class="annot"><a href="#local-6989586621679505592"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesT"><span class="hs-identifier hs-type">RulesT</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679505592"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="annot"><span class="hs-comment">-- | The environment within the monadic API.</span></span><span>
</span><span id="line-444"></span><span class="hs-keyword">data</span><span> </span><span id="RulesEnv"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesEnv"><span class="hs-identifier hs-var">RulesEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RulesEnv"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesEnv"><span class="hs-identifier hs-var">RulesEnv</span></a></span></span><span>
</span><span id="line-445"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="rulesEnvVerbosity"><span class="annot"><span class="annottext">RulesEnv -&gt; Verbosity
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesEnvVerbosity"><span class="hs-identifier hs-var hs-var">rulesEnvVerbosity</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-446"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="rulesEnvNameSpace"><span class="annot"><span class="annottext">RulesEnv -&gt; RulesNameSpace
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesEnvNameSpace"><span class="hs-identifier hs-var hs-var">rulesEnvNameSpace</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesNameSpace"><span class="hs-identifier hs-type">RulesNameSpace</span></a></span><span>
</span><span id="line-447"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span class="hs-comment">-- | Monad transformer for defining rules. Usually wraps the 'IO' monad,</span><span>
</span><span id="line-450"></span><span class="hs-comment">-- allowing @IO@ actions to be performed using @liftIO@.</span><span>
</span><span id="line-451"></span><span class="hs-keyword">newtype</span><span> </span><span id="RulesT"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesT"><span class="hs-identifier hs-var">RulesT</span></a></span></span><span> </span><span id="local-6989586621679504154"><span class="annot"><a href="#local-6989586621679504154"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679504155"><span class="annot"><a href="#local-6989586621679504155"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RulesT"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesT"><span class="hs-identifier hs-var">RulesT</span></a></span></span><span>
</span><span id="line-452"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="runRulesT"><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
RulesT m a
-&gt; ReaderT
     RulesEnv (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m)) a
</span><a href="Distribution.Simple.SetupHooks.Rule.html#runRulesT"><span class="hs-identifier hs-var hs-var">runRulesT</span></a></span></span><span>
</span><span id="line-453"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Reader.html#ReaderT"><span class="hs-identifier hs-type">Reader.ReaderT</span></a></span><span>
</span><span id="line-454"></span><span>          </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesEnv"><span class="hs-identifier hs-type">RulesEnv</span></a></span><span>
</span><span id="line-455"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.State.Lazy.html#StateT"><span class="hs-identifier hs-type">State.StateT</span></a></span><span>
</span><span id="line-456"></span><span>              </span><span class="hs-special">(</span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleId"><span class="hs-identifier hs-type">RuleId</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>              </span><span class="hs-special">(</span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Writer.CPS.html#WriterT"><span class="hs-identifier hs-type">Writer.WriterT</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.FileMonitor.Types.html#MonitorFilePath"><span class="hs-identifier hs-type">MonitorFilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621679504154"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>          </span><span class="annot"><a href="#local-6989586621679504155"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-460"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-461"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679505600"><span id="local-6989586621679505606"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; RulesT m a -&gt; RulesT m b)
-&gt; (forall a b. a -&gt; RulesT m b -&gt; RulesT m a)
-&gt; Functor (RulesT m)
forall a b. a -&gt; RulesT m b -&gt; RulesT m a
forall a b. (a -&gt; b) -&gt; RulesT m a -&gt; RulesT m b
forall (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; RulesT m b -&gt; RulesT m a
forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; RulesT m a -&gt; RulesT m b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; RulesT m a -&gt; RulesT m b
fmap :: forall a b. (a -&gt; b) -&gt; RulesT m a -&gt; RulesT m b
$c&lt;$ :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; RulesT m b -&gt; RulesT m a
&lt;$ :: forall a b. a -&gt; RulesT m b -&gt; RulesT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505622"><span id="local-6989586621679505628"><span id="local-6989586621679505633"><span id="local-6989586621679505638"><span id="local-6989586621679505643"><span class="annot"><span class="annottext">Functor (RulesT m)
Functor (RulesT m) =&gt;
(forall a. a -&gt; RulesT m a)
-&gt; (forall a b. RulesT m (a -&gt; b) -&gt; RulesT m a -&gt; RulesT m b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; RulesT m a -&gt; RulesT m b -&gt; RulesT m c)
-&gt; (forall a b. RulesT m a -&gt; RulesT m b -&gt; RulesT m b)
-&gt; (forall a b. RulesT m a -&gt; RulesT m b -&gt; RulesT m a)
-&gt; Applicative (RulesT m)
forall a. a -&gt; RulesT m a
forall a b. RulesT m a -&gt; RulesT m b -&gt; RulesT m a
forall a b. RulesT m a -&gt; RulesT m b -&gt; RulesT m b
forall a b. RulesT m (a -&gt; b) -&gt; RulesT m a -&gt; RulesT m b
forall a b c.
(a -&gt; b -&gt; c) -&gt; RulesT m a -&gt; RulesT m b -&gt; RulesT m c
forall (m :: * -&gt; *). Monad m =&gt; Functor (RulesT m)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; RulesT m a
forall (m :: * -&gt; *) a b.
Monad m =&gt;
RulesT m a -&gt; RulesT m b -&gt; RulesT m a
forall (m :: * -&gt; *) a b.
Monad m =&gt;
RulesT m a -&gt; RulesT m b -&gt; RulesT m b
forall (m :: * -&gt; *) a b.
Monad m =&gt;
RulesT m (a -&gt; b) -&gt; RulesT m a -&gt; RulesT m b
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; b -&gt; c) -&gt; RulesT m a -&gt; RulesT m b -&gt; RulesT m c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; RulesT m a
pure :: forall a. a -&gt; RulesT m a
$c&lt;*&gt; :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
RulesT m (a -&gt; b) -&gt; RulesT m a -&gt; RulesT m b
&lt;*&gt; :: forall a b. RulesT m (a -&gt; b) -&gt; RulesT m a -&gt; RulesT m b
$cliftA2 :: forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; b -&gt; c) -&gt; RulesT m a -&gt; RulesT m b -&gt; RulesT m c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; RulesT m a -&gt; RulesT m b -&gt; RulesT m c
$c*&gt; :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
RulesT m a -&gt; RulesT m b -&gt; RulesT m b
*&gt; :: forall a b. RulesT m a -&gt; RulesT m b -&gt; RulesT m b
$c&lt;* :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
RulesT m a -&gt; RulesT m b -&gt; RulesT m a
&lt;* :: forall a b. RulesT m a -&gt; RulesT m b -&gt; RulesT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505670"><span id="local-6989586621679505676"><span id="local-6989586621679505681"><span class="annot"><span class="annottext">Applicative (RulesT m)
Applicative (RulesT m) =&gt;
(forall a b. RulesT m a -&gt; (a -&gt; RulesT m b) -&gt; RulesT m b)
-&gt; (forall a b. RulesT m a -&gt; RulesT m b -&gt; RulesT m b)
-&gt; (forall a. a -&gt; RulesT m a)
-&gt; Monad (RulesT m)
forall a. a -&gt; RulesT m a
forall a b. RulesT m a -&gt; RulesT m b -&gt; RulesT m b
forall a b. RulesT m a -&gt; (a -&gt; RulesT m b) -&gt; RulesT m b
forall (m :: * -&gt; *). Monad m =&gt; Applicative (RulesT m)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; RulesT m a
forall (m :: * -&gt; *) a b.
Monad m =&gt;
RulesT m a -&gt; RulesT m b -&gt; RulesT m b
forall (m :: * -&gt; *) a b.
Monad m =&gt;
RulesT m a -&gt; (a -&gt; RulesT m b) -&gt; RulesT m b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
RulesT m a -&gt; (a -&gt; RulesT m b) -&gt; RulesT m b
&gt;&gt;= :: forall a b. RulesT m a -&gt; (a -&gt; RulesT m b) -&gt; RulesT m b
$c&gt;&gt; :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
RulesT m a -&gt; RulesT m b -&gt; RulesT m b
&gt;&gt; :: forall a b. RulesT m a -&gt; RulesT m b -&gt; RulesT m b
$creturn :: forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; RulesT m a
return :: forall a. a -&gt; RulesT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505695"><span class="annot"><span class="annottext">Monad (RulesT m)
Monad (RulesT m) =&gt;
(forall a. IO a -&gt; RulesT m a) -&gt; MonadIO (RulesT m)
forall a. IO a -&gt; RulesT m a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
forall (m :: * -&gt; *). MonadIO m =&gt; Monad (RulesT m)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; RulesT m a
$cliftIO :: forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; RulesT m a
liftIO :: forall a. IO a -&gt; RulesT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505712"><span class="annot"><span class="annottext">Monad (RulesT m)
Monad (RulesT m) =&gt;
(forall a. (a -&gt; RulesT m a) -&gt; RulesT m a) -&gt; MonadFix (RulesT m)
forall a. (a -&gt; RulesT m a) -&gt; RulesT m a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. (a -&gt; m a) -&gt; m a) -&gt; MonadFix m
forall (m :: * -&gt; *). MonadFix m =&gt; Monad (RulesT m)
forall (m :: * -&gt; *) a.
MonadFix m =&gt;
(a -&gt; RulesT m a) -&gt; RulesT m a
$cmfix :: forall (m :: * -&gt; *) a.
MonadFix m =&gt;
(a -&gt; RulesT m a) -&gt; RulesT m a
mfix :: forall a. (a -&gt; RulesT m a) -&gt; RulesT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadFix</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#MonadTrans"><span class="hs-identifier hs-type">MonadTrans</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesT"><span class="hs-identifier hs-type">RulesT</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-464"></span><span>  </span><span id="local-6989586621679505739"><span class="annot"><span class="annottext">lift :: forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; RulesT m a
</span><a href="#local-6989586621679505739"><span class="hs-identifier hs-var hs-var hs-var">lift</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT
  RulesEnv (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m)) a
-&gt; RulesT m a
forall (m :: * -&gt; *) a.
ReaderT
  RulesEnv (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m)) a
-&gt; RulesT m a
</span><a href="Distribution.Simple.SetupHooks.Rule.html#RulesT"><span class="hs-identifier hs-var">RulesT</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT
   RulesEnv (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m)) a
 -&gt; RulesT m a)
-&gt; (m a
    -&gt; ReaderT
         RulesEnv
         (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m))
         a)
-&gt; m a
-&gt; RulesT m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m) a
-&gt; ReaderT
     RulesEnv (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m)) a
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ReaderT RulesEnv m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m) a
 -&gt; ReaderT
      RulesEnv
      (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m))
      a)
-&gt; (m a
    -&gt; StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m) a)
-&gt; m a
-&gt; ReaderT
     RulesEnv (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m)) a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">WriterT [MonitorFilePath] m a
-&gt; StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m) a
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; StateT (Map RuleId Rule) m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT [MonitorFilePath] m a
 -&gt; StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m) a)
-&gt; (m a -&gt; WriterT [MonitorFilePath] m a)
-&gt; m a
-&gt; StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m) a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m a -&gt; WriterT [MonitorFilePath] m a
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; WriterT [MonitorFilePath] m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span class="hs-comment">-- | A collection of t'Rule's.</span><span>
</span><span id="line-467"></span><span class="hs-comment">--</span><span>
</span><span id="line-468"></span><span class="hs-comment">-- Use the 'rules' smart constructor instead of directly using the v'Rules'</span><span>
</span><span id="line-469"></span><span class="hs-comment">-- constructor.</span><span>
</span><span id="line-470"></span><span class="hs-comment">--</span><span>
</span><span id="line-471"></span><span class="hs-comment">--   - Rules are registered using 'registerRule',</span><span>
</span><span id="line-472"></span><span class="hs-comment">--   - Monitored files or directories are declared using 'addRuleMonitors';</span><span>
</span><span id="line-473"></span><span class="hs-comment">--     a change in these will trigger the recomputation of all rules.</span><span>
</span><span id="line-474"></span><span class="hs-comment">--</span><span>
</span><span id="line-475"></span><span class="hs-comment">-- The @env@ type parameter represents an extra argument, which usually</span><span>
</span><span id="line-476"></span><span class="hs-comment">-- consists of information known to Cabal such as 'LocalBuildInfo' and</span><span>
</span><span id="line-477"></span><span class="hs-comment">-- 'ComponentLocalBuildInfo'.</span><span>
</span><span id="line-478"></span><span class="hs-keyword">newtype</span><span> </span><span id="Rules"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-var">Rules</span></a></span></span><span> </span><span id="local-6989586621679504255"><span class="annot"><a href="#local-6989586621679504255"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Rules"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-var">Rules</span></a></span></span><span> </span><span class="hs-special">{</span><span id="runRules"><span class="annot"><span class="annottext">forall env. Rules env -&gt; env -&gt; RulesM ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#runRules"><span class="hs-identifier hs-var hs-var">runRules</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504255"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesM"><span class="hs-identifier hs-type">RulesM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span class="annot"><span class="hs-comment">-- | __Warning__: this 'Semigroup' instance is not commutative.</span></span><span>
</span><span id="line-481"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504263"><span id="local-6989586621679505745"><span id="local-6989586621679505749"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-type">Rules</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504263"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-482"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-type">Rules</span></a></span><span> </span><span id="local-6989586621679505759"><span class="annot"><span class="annottext">env -&gt; RulesM ()
</span><a href="#local-6989586621679505759"><span class="hs-identifier hs-var">rs1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679505760"><span class="annot"><span class="annottext">&lt;&gt; :: Rules env -&gt; Rules env -&gt; Rules env
</span><span class="hs-operator hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-type">Rules</span></a></span><span> </span><span id="local-6989586621679505761"><span class="annot"><span class="annottext">env -&gt; RulesM ()
</span><a href="#local-6989586621679505761"><span class="hs-identifier hs-var">rs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-483"></span><span>    </span><span class="annot"><span class="annottext">(env -&gt; RulesM ()) -&gt; Rules env
forall env. (env -&gt; RulesM ()) -&gt; Rules env
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-var">Rules</span></a></span><span> </span><span class="annot"><span class="annottext">((env -&gt; RulesM ()) -&gt; Rules env)
-&gt; (env -&gt; RulesM ()) -&gt; Rules env
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679505762"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621679505762"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-484"></span><span>      </span><span id="local-6989586621679505763"><span class="annot"><a href="#local-6989586621679505763"><span class="hs-identifier hs-var">y1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">env -&gt; RulesM ()
</span><a href="#local-6989586621679505759"><span class="hs-identifier hs-var">rs1</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621679505762"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-485"></span><span>      </span><span id="local-6989586621679505764"><span class="annot"><a href="#local-6989586621679505764"><span class="hs-identifier hs-var">y2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621679505761"><span class="hs-identifier hs-type">rs2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505762"><span class="hs-identifier hs-type">inputs</span></a></span><span>
</span><span id="line-486"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621679505763"><span class="hs-identifier hs-type">y1</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679505764"><span class="hs-identifier hs-type">y2</span></a></span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504266"><span id="local-6989586621679505769"><span id="local-6989586621679505773"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-type">Rules</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504266"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-489"></span><span>  </span><span id="local-6989586621679505776"><span class="annot"><span class="annottext">mempty :: Rules env
</span><span class="hs-identifier hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(env -&gt; RulesM ()) -&gt; Rules env
forall env. (env -&gt; RulesM ()) -&gt; Rules env
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-var">Rules</span></a></span><span> </span><span class="annot"><span class="annottext">((env -&gt; RulesM ()) -&gt; Rules env)
-&gt; (env -&gt; RulesM ()) -&gt; Rules env
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RulesM () -&gt; env -&gt; RulesM ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">RulesM ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#noRules"><span class="hs-identifier hs-var">noRules</span></a></span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span class="annot"><span class="hs-comment">-- | An empty collection of rules.</span></span><span>
</span><span id="line-492"></span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#noRules"><span class="hs-identifier hs-type">noRules</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesM"><span class="hs-identifier hs-type">RulesM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span id="noRules"><span class="annot"><span class="annottext">noRules :: RulesM ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#noRules"><span class="hs-identifier hs-var hs-var">noRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; RulesM ()
forall a. a -&gt; RulesT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span class="hs-comment">-- | Construct a collection of rules with a given label.</span><span>
</span><span id="line-496"></span><span class="hs-comment">--</span><span>
</span><span id="line-497"></span><span class="hs-comment">-- A label for the rules can be constructed using the @static@ keyword,</span><span>
</span><span id="line-498"></span><span class="hs-comment">-- using the @StaticPointers@ extension.</span><span>
</span><span id="line-499"></span><span class="hs-comment">-- NB: separate calls to 'rules' should have different labels.</span><span>
</span><span id="line-500"></span><span class="hs-comment">--</span><span>
</span><span id="line-501"></span><span class="hs-comment">-- Example usage:</span><span>
</span><span id="line-502"></span><span class="hs-comment">--</span><span>
</span><span id="line-503"></span><span class="hs-comment">-- &gt; myRules :: Rules env</span><span>
</span><span id="line-504"></span><span class="hs-comment">-- &gt; myRules = rules (static ()) $ \ env -&gt; do { .. } -- use the monadic API here</span><span>
</span><span id="line-505"></span><span id="local-6989586621679504269"><span id="local-6989586621679504270"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#rules"><span class="hs-identifier hs-type">rules</span></a></span><span>
</span><span id="line-506"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StaticPtr</span></span><span> </span><span class="annot"><a href="#local-6989586621679504269"><span class="hs-keyword hs-type">label</span></a></span><span>
</span><span id="line-507"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ unique label for this collection of rules</span></span><span>
</span><span id="line-508"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504270"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesM"><span class="hs-identifier hs-type">RulesM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ the computation of rules</span></span><span>
</span><span id="line-510"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-type">Rules</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504270"><span class="hs-identifier hs-type">env</span></a></span></span></span><span>
</span><span id="line-511"></span><span id="rules"><span class="annot"><span class="annottext">rules :: forall label env.
StaticPtr label -&gt; (env -&gt; RulesM ()) -&gt; Rules env
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rules"><span class="hs-identifier hs-var hs-var">rules</span></a></span></span><span> </span><span id="local-6989586621679505778"><span class="annot"><span class="annottext">StaticPtr label
</span><a href="#local-6989586621679505778"><span class="hs-keyword hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RulesNameSpace -&gt; (env -&gt; RulesM ()) -&gt; Rules env
forall env. RulesNameSpace -&gt; (env -&gt; RulesM ()) -&gt; Rules env
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesInNameSpace"><span class="hs-identifier hs-var">rulesInNameSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StaticPtrInfo -&gt; RulesNameSpace
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticPtrNameSpace"><span class="hs-identifier hs-var">staticPtrNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">(StaticPtrInfo -&gt; RulesNameSpace)
-&gt; StaticPtrInfo -&gt; RulesNameSpace
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr label -&gt; StaticPtrInfo
forall a. StaticPtr a -&gt; StaticPtrInfo
</span><span class="hs-identifier hs-var">staticPtrInfo</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr label
</span><a href="#local-6989586621679505778"><span class="hs-keyword hs-var">label</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span class="hs-comment">-- | Internal function to create a collection of rules.</span><span>
</span><span id="line-514"></span><span class="hs-comment">--</span><span>
</span><span id="line-515"></span><span class="hs-comment">-- API users should go through the 'rules' function instead.</span><span>
</span><span id="line-516"></span><span id="local-6989586621679504273"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#rulesInNameSpace"><span class="hs-identifier hs-type">rulesInNameSpace</span></a></span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesNameSpace"><span class="hs-identifier hs-type">RulesNameSpace</span></a></span><span>
</span><span id="line-518"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ rule namespace</span></span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504273"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesM"><span class="hs-identifier hs-type">RulesM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ the computation of rules</span></span><span>
</span><span id="line-521"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-type">Rules</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504273"><span class="hs-identifier hs-type">env</span></a></span></span><span>
</span><span id="line-522"></span><span id="rulesInNameSpace"><span class="annot"><span class="annottext">rulesInNameSpace :: forall env. RulesNameSpace -&gt; (env -&gt; RulesM ()) -&gt; Rules env
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesInNameSpace"><span class="hs-identifier hs-var hs-var">rulesInNameSpace</span></a></span></span><span> </span><span id="local-6989586621679505781"><span class="annot"><span class="annottext">RulesNameSpace
</span><a href="#local-6989586621679505781"><span class="hs-identifier hs-var">nameSpace</span></a></span></span><span> </span><span id="local-6989586621679505782"><span class="annot"><span class="annottext">env -&gt; RulesM ()
</span><a href="#local-6989586621679505782"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-523"></span><span>  </span><span class="annot"><span class="annottext">(env -&gt; RulesM ()) -&gt; Rules env
forall env. (env -&gt; RulesM ()) -&gt; Rules env
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-var">Rules</span></a></span><span> </span><span class="annot"><span class="annottext">((env -&gt; RulesM ()) -&gt; Rules env)
-&gt; (env -&gt; RulesM ()) -&gt; Rules env
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679505783"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621679505783"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReaderT
  RulesEnv
  (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
  ()
-&gt; RulesM ()
forall (m :: * -&gt; *) a.
ReaderT
  RulesEnv (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m)) a
-&gt; RulesT m a
</span><a href="Distribution.Simple.SetupHooks.Rule.html#RulesT"><span class="hs-identifier hs-var">RulesT</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT
   RulesEnv
   (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
   ()
 -&gt; RulesM ())
-&gt; ReaderT
     RulesEnv
     (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
     ()
-&gt; RulesM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-524"></span><span>    </span><span class="annot"><span class="annottext">(RulesEnv -&gt; RulesEnv)
-&gt; ReaderT
     RulesEnv
     (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
     ()
-&gt; ReaderT
     RulesEnv
     (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
     ()
forall r' r (m :: * -&gt; *) a.
(r' -&gt; r) -&gt; ReaderT r m a -&gt; ReaderT r' m a
</span><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Reader.html#withReaderT"><span class="hs-identifier hs-var">Reader.withReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679505785"><span class="annot"><span class="annottext">RulesEnv
</span><a href="#local-6989586621679505785"><span class="hs-identifier hs-var">rulesEnv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RulesEnv
</span><a href="#local-6989586621679505785"><span class="hs-identifier hs-var">rulesEnv</span></a></span><span class="hs-special">{</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#rulesEnvNameSpace"><span class="hs-identifier hs-var">rulesEnvNameSpace</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679505781"><span class="hs-identifier hs-type">nameSpace</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ReaderT
   RulesEnv
   (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
   ()
 -&gt; ReaderT
      RulesEnv
      (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
      ())
-&gt; ReaderT
     RulesEnv
     (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
     ()
-&gt; ReaderT
     RulesEnv
     (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-525"></span><span>      </span><span class="annot"><span class="annottext">RulesM ()
-&gt; ReaderT
     RulesEnv
     (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
     ()
forall (m :: * -&gt; *) a.
RulesT m a
-&gt; ReaderT
     RulesEnv (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m)) a
</span><a href="Distribution.Simple.SetupHooks.Rule.html#runRulesT"><span class="hs-identifier hs-var">runRulesT</span></a></span><span> </span><span class="annot"><span class="annottext">(RulesM ()
 -&gt; ReaderT
      RulesEnv
      (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
      ())
-&gt; RulesM ()
-&gt; ReaderT
     RulesEnv
     (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-526"></span><span>        </span><span class="annot"><span class="annottext">env -&gt; RulesM ()
</span><a href="#local-6989586621679505782"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621679505783"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span class="hs-comment">-- | Internal function: run the monadic 'Rules' computations in order</span><span>
</span><span id="line-529"></span><span class="hs-comment">-- to obtain all the 'Rule's with their 'RuleId's.</span><span>
</span><span id="line-530"></span><span id="local-6989586621679504280"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#computeRules"><span class="hs-identifier hs-type">computeRules</span></a></span><span>
</span><span id="line-531"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Verbosity.html#Verbosity"><span class="hs-identifier hs-type">Verbosity</span></a></span><span>
</span><span id="line-532"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679504280"><span class="hs-identifier hs-type">env</span></a></span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-type">Rules</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504280"><span class="hs-identifier hs-type">env</span></a></span><span>
</span><span id="line-534"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleId"><span class="hs-identifier hs-type">RuleId</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.FileMonitor.Types.html#MonitorFilePath"><span class="hs-identifier hs-type">MonitorFilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-535"></span><span id="computeRules"><span class="annot"><span class="annottext">computeRules :: forall env.
Verbosity
-&gt; env -&gt; Rules env -&gt; IO (Map RuleId Rule, [MonitorFilePath])
</span><a href="Distribution.Simple.SetupHooks.Rule.html#computeRules"><span class="hs-identifier hs-var hs-var">computeRules</span></a></span></span><span> </span><span id="local-6989586621679505789"><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679505789"><span class="hs-identifier hs-var">verbosity</span></a></span></span><span> </span><span id="local-6989586621679505790"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621679505790"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rules"><span class="hs-identifier hs-type">Rules</span></a></span><span> </span><span id="local-6989586621679505791"><span class="annot"><span class="annottext">env -&gt; RulesM ()
</span><a href="#local-6989586621679505791"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-536"></span><span>  </span><span class="hs-comment">-- Bogus namespace to start with. This will be the first thing</span><span>
</span><span id="line-537"></span><span>  </span><span class="hs-comment">-- to be set when users use the 'rules' smart constructor.</span><span>
</span><span id="line-538"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679505793"><span class="annot"><span class="annottext">noNameSpace :: RulesNameSpace
</span><a href="#local-6989586621679505793"><span class="hs-identifier hs-var hs-var">noNameSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-539"></span><span>        </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesNameSpace"><span class="hs-identifier hs-type">RulesNameSpace</span></a></span><span>
</span><span id="line-540"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rulesUnitId :: UnitId
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesUnitId"><span class="hs-identifier hs-var">rulesUnitId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; UnitId
</span><a href="../../Cabal-syntax-3.14.1.0-ebb2/src/Distribution.Types.UnitId.html#mkUnitId"><span class="hs-identifier hs-var">mkUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-541"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rulesModuleName :: ModuleName
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesModuleName"><span class="hs-identifier hs-var">rulesModuleName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ModuleName
forall a. IsString a =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">fromString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-542"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rulesSrcLoc :: (Int, Int)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesSrcLoc"><span class="hs-identifier hs-var">rulesSrcLoc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-544"></span><span>      </span><span id="local-6989586621679505794"><span class="annot"><span class="annottext">env0 :: RulesEnv
</span><a href="#local-6989586621679505794"><span class="hs-identifier hs-var hs-var">env0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-545"></span><span>        </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RulesEnv"><span class="hs-identifier hs-type">RulesEnv</span></a></span><span>
</span><span id="line-546"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rulesEnvVerbosity :: Verbosity
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesEnvVerbosity"><span class="hs-identifier hs-var">rulesEnvVerbosity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621679505789"><span class="hs-identifier hs-var">verbosity</span></a></span><span>
</span><span id="line-547"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rulesEnvNameSpace :: RulesNameSpace
</span><a href="Distribution.Simple.SetupHooks.Rule.html#rulesEnvNameSpace"><span class="hs-identifier hs-var">rulesEnvNameSpace</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RulesNameSpace
</span><a href="#local-6989586621679505793"><span class="hs-identifier hs-var">noNameSpace</span></a></span><span>
</span><span id="line-548"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-549"></span><span>  </span><span class="annot"><span class="annottext">WriterT [MonitorFilePath] IO (Map RuleId Rule)
-&gt; IO (Map RuleId Rule, [MonitorFilePath])
forall w (m :: * -&gt; *) a. Monoid w =&gt; WriterT w m a -&gt; m (a, w)
</span><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Writer.CPS.html#runWriterT"><span class="hs-identifier hs-var">Writer.runWriterT</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT [MonitorFilePath] IO (Map RuleId Rule)
 -&gt; IO (Map RuleId Rule, [MonitorFilePath]))
-&gt; WriterT [MonitorFilePath] IO (Map RuleId Rule)
-&gt; IO (Map RuleId Rule, [MonitorFilePath])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-550"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO) ()
-&gt; Map RuleId Rule
-&gt; WriterT [MonitorFilePath] IO (Map RuleId Rule)
forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m s
</span><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.State.Lazy.html#execStateT"><span class="hs-operator hs-var">`State.execStateT`</span></a></span><span> </span><span class="annot"><span class="annottext">Map RuleId Rule
forall k a. Map k a
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO) ()
 -&gt; WriterT [MonitorFilePath] IO (Map RuleId Rule))
-&gt; StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO) ()
-&gt; WriterT [MonitorFilePath] IO (Map RuleId Rule)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-551"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReaderT
  RulesEnv
  (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
  ()
-&gt; RulesEnv
-&gt; StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO) ()
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Reader.html#runReaderT"><span class="hs-operator hs-var">`Reader.runReaderT`</span></a></span><span> </span><span class="annot"><span class="annottext">RulesEnv
</span><a href="#local-6989586621679505794"><span class="hs-identifier hs-var">env0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ReaderT
   RulesEnv
   (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
   ()
 -&gt; StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO) ())
-&gt; ReaderT
     RulesEnv
     (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
     ()
-&gt; StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-552"></span><span>        </span><span class="annot"><span class="annottext">RulesM ()
-&gt; ReaderT
     RulesEnv
     (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
     ()
forall (m :: * -&gt; *) a.
RulesT m a
-&gt; ReaderT
     RulesEnv (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] m)) a
</span><a href="Distribution.Simple.SetupHooks.Rule.html#runRulesT"><span class="hs-identifier hs-var">runRulesT</span></a></span><span> </span><span class="annot"><span class="annottext">(RulesM ()
 -&gt; ReaderT
      RulesEnv
      (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
      ())
-&gt; RulesM ()
-&gt; ReaderT
     RulesEnv
     (StateT (Map RuleId Rule) (WriterT [MonitorFilePath] IO))
     ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-553"></span><span>          </span><span class="annot"><span class="annottext">env -&gt; RulesM ()
</span><a href="#local-6989586621679505791"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621679505790"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span class="hs-comment">------------</span><span>
</span><span id="line-556"></span><span class="hs-comment">-- Commands</span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span class="annot"><span class="hs-comment">-- | A static pointer (in user scope) or its key (in system scope).</span></span><span>
</span><span id="line-559"></span><span class="hs-keyword">data</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="Static"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-var">Static</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679505798"><span class="annot"><a href="#local-6989586621679505798"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-type">Scope</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span class="hs-keyword">newtype</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Static"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-var">Static</span></a></span></span><span> </span><span id="local-6989586621679504074"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504074"><span class="hs-identifier hs-type">fnTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UserStatic"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-var">UserStatic</span></a></span></span><span> </span><span class="hs-special">{</span><span id="userStaticPtr"><span class="annot"><span class="annottext">forall fnTy. Static 'User fnTy -&gt; StaticPtr fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#userStaticPtr"><span class="hs-identifier hs-var hs-var">userStaticPtr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StaticPtr</span></span><span> </span><span class="annot"><a href="#local-6989586621679504074"><span class="hs-identifier hs-type">fnTy</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-562"></span><span class="hs-keyword">newtype</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Static"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-var">Static</span></a></span></span><span> </span><span id="local-6989586621679504296"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504296"><span class="hs-identifier hs-type">fnTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SystemStatic"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#SystemStatic"><span class="hs-identifier hs-var">SystemStatic</span></a></span></span><span> </span><span class="hs-special">{</span><span id="userStaticKey"><span class="annot"><span class="annottext">forall fnTy. Static 'System fnTy -&gt; MD5
</span><a href="Distribution.Simple.SetupHooks.Rule.html#userStaticKey"><span class="hs-identifier hs-var hs-var">userStaticKey</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StaticKey</span></span><span class="hs-special">}</span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679505804"><span id="local-6989586621679505809"><span class="annot"><span class="annottext">Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
(Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool)
-&gt; (Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool)
-&gt; Eq (Static 'System fnTy)
forall fnTy. Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall fnTy. Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
== :: Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
$c/= :: forall fnTy. Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
/= :: Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505817"><span id="local-6989586621679505822"><span id="local-6989586621679505826"><span id="local-6989586621679505830"><span id="local-6989586621679505834"><span id="local-6989586621679505838"><span id="local-6989586621679505842"><span class="annot"><span class="annottext">Eq (Static 'System fnTy)
Eq (Static 'System fnTy) =&gt;
(Static 'System fnTy -&gt; Static 'System fnTy -&gt; Ordering)
-&gt; (Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool)
-&gt; (Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool)
-&gt; (Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool)
-&gt; (Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool)
-&gt; (Static 'System fnTy
    -&gt; Static 'System fnTy -&gt; Static 'System fnTy)
-&gt; (Static 'System fnTy
    -&gt; Static 'System fnTy -&gt; Static 'System fnTy)
-&gt; Ord (Static 'System fnTy)
Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
Static 'System fnTy -&gt; Static 'System fnTy -&gt; Ordering
Static 'System fnTy -&gt; Static 'System fnTy -&gt; Static 'System fnTy
forall fnTy. Eq (Static 'System fnTy)
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall fnTy. Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
forall fnTy. Static 'System fnTy -&gt; Static 'System fnTy -&gt; Ordering
forall fnTy.
Static 'System fnTy -&gt; Static 'System fnTy -&gt; Static 'System fnTy
$ccompare :: forall fnTy. Static 'System fnTy -&gt; Static 'System fnTy -&gt; Ordering
compare :: Static 'System fnTy -&gt; Static 'System fnTy -&gt; Ordering
$c&lt; :: forall fnTy. Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
&lt; :: Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
$c&lt;= :: forall fnTy. Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
&lt;= :: Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
$c&gt; :: forall fnTy. Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
&gt; :: Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
$c&gt;= :: forall fnTy. Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
&gt;= :: Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
$cmax :: forall fnTy.
Static 'System fnTy -&gt; Static 'System fnTy -&gt; Static 'System fnTy
max :: Static 'System fnTy -&gt; Static 'System fnTy -&gt; Static 'System fnTy
$cmin :: forall fnTy.
Static 'System fnTy -&gt; Static 'System fnTy -&gt; Static 'System fnTy
min :: Static 'System fnTy -&gt; Static 'System fnTy -&gt; Static 'System fnTy
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505849"><span id="local-6989586621679505854"><span id="local-6989586621679505858"><span class="annot"><span class="annottext">Int -&gt; Static 'System fnTy -&gt; ShowS
[Static 'System fnTy] -&gt; ShowS
Static 'System fnTy -&gt; String
(Int -&gt; Static 'System fnTy -&gt; ShowS)
-&gt; (Static 'System fnTy -&gt; String)
-&gt; ([Static 'System fnTy] -&gt; ShowS)
-&gt; Show (Static 'System fnTy)
forall fnTy. Int -&gt; Static 'System fnTy -&gt; ShowS
forall fnTy. [Static 'System fnTy] -&gt; ShowS
forall fnTy. Static 'System fnTy -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall fnTy. Int -&gt; Static 'System fnTy -&gt; ShowS
showsPrec :: Int -&gt; Static 'System fnTy -&gt; ShowS
$cshow :: forall fnTy. Static 'System fnTy -&gt; String
show :: Static 'System fnTy -&gt; String
$cshowList :: forall fnTy. [Static 'System fnTy] -&gt; ShowS
showList :: [Static 'System fnTy] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505864"><span id="local-6989586621679505869"><span id="local-6989586621679505873"><span class="annot"><span class="annottext">Get (Static 'System fnTy)
[Static 'System fnTy] -&gt; Put
Static 'System fnTy -&gt; Put
(Static 'System fnTy -&gt; Put)
-&gt; Get (Static 'System fnTy)
-&gt; ([Static 'System fnTy] -&gt; Put)
-&gt; Binary (Static 'System fnTy)
forall fnTy. Get (Static 'System fnTy)
forall fnTy. [Static 'System fnTy] -&gt; Put
forall fnTy. Static 'System fnTy -&gt; Put
forall t. (t -&gt; Put) -&gt; Get t -&gt; ([t] -&gt; Put) -&gt; Binary t
$cput :: forall fnTy. Static 'System fnTy -&gt; Put
put :: Static 'System fnTy -&gt; Put
$cget :: forall fnTy. Get (Static 'System fnTy)
get :: Get (Static 'System fnTy)
$cputList :: forall fnTy. [Static 'System fnTy] -&gt; Put
putList :: [Static 'System fnTy] -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Binary</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span id="local-6989586621679504307"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#systemStatic"><span class="hs-identifier hs-type">systemStatic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-type">Static</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504307"><span class="hs-identifier hs-type">fnTy</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-type">Static</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504307"><span class="hs-identifier hs-type">fnTy</span></a></span></span><span>
</span><span id="line-566"></span><span id="systemStatic"><span class="annot"><span class="annottext">systemStatic :: forall fnTy. Static 'User fnTy -&gt; Static 'System fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#systemStatic"><span class="hs-identifier hs-var hs-var">systemStatic</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-type">UserStatic</span></a></span><span> </span><span id="local-6989586621679505879"><span class="annot"><span class="annottext">StaticPtr fnTy
</span><a href="#local-6989586621679505879"><span class="hs-identifier hs-var">ptr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MD5 -&gt; Static 'System fnTy
forall fnTy. MD5 -&gt; Static 'System fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#SystemStatic"><span class="hs-identifier hs-var">SystemStatic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StaticPtr fnTy -&gt; MD5
forall a. StaticPtr a -&gt; MD5
</span><span class="hs-identifier hs-var">staticKey</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr fnTy
</span><a href="#local-6989586621679505879"><span class="hs-identifier hs-var">ptr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>
</span><span id="line-568"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504311"><span id="local-6989586621679505883"><span id="local-6989586621679505887"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-type">Static</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504311"><span class="hs-identifier hs-type">fnTy</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-569"></span><span>  </span><span id="local-6989586621679505890"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; Static 'User fnTy -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var">showsPrec</span></span></span><span> </span><span id="local-6989586621679505891"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679505891"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679505892"><span class="annot"><span class="annottext">Static 'User fnTy
</span><a href="#local-6989586621679505892"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Static 'System fnTy -&gt; ShowS
forall a. Show a =&gt; Int -&gt; a -&gt; ShowS
</span><span class="hs-identifier hs-var">showsPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679505891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Static 'User fnTy -&gt; Static 'System fnTy
forall fnTy. Static 'User fnTy -&gt; Static 'System fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#systemStatic"><span class="hs-identifier hs-var">systemStatic</span></a></span><span> </span><span class="annot"><span class="annottext">Static 'User fnTy
</span><a href="#local-6989586621679505892"><span class="hs-identifier hs-var">ptr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-570"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504313"><span id="local-6989586621679505895"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-type">Static</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504313"><span class="hs-identifier hs-type">fnTy</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-571"></span><span>  </span><span id="local-6989586621679505899"><span class="annot"><span class="annottext">== :: Static 'User fnTy -&gt; Static 'User fnTy -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">(==)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(==)</span></span><span> </span><span class="annot"><span class="annottext">(Static 'System fnTy -&gt; Static 'System fnTy -&gt; Bool)
-&gt; (Static 'User fnTy -&gt; Static 'System fnTy)
-&gt; Static 'User fnTy
-&gt; Static 'User fnTy
-&gt; Bool
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-operator hs-var">`on`</span></span><span> </span><span class="annot"><span class="annottext">Static 'User fnTy -&gt; Static 'System fnTy
forall fnTy. Static 'User fnTy -&gt; Static 'System fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#systemStatic"><span class="hs-identifier hs-var">systemStatic</span></a></span><span>
</span><span id="line-572"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504318"><span id="local-6989586621679505905"><span id="local-6989586621679505909"><span id="local-6989586621679505912"><span id="local-6989586621679505915"><span id="local-6989586621679505918"><span id="local-6989586621679505921"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-type">Static</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504318"><span class="hs-identifier hs-type">fnTy</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-573"></span><span>  </span><span id="local-6989586621679505924"><span class="annot"><span class="annottext">compare :: Static 'User fnTy -&gt; Static 'User fnTy -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var">compare</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Static 'System fnTy -&gt; Static 'System fnTy -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">(Static 'System fnTy -&gt; Static 'System fnTy -&gt; Ordering)
-&gt; (Static 'User fnTy -&gt; Static 'System fnTy)
-&gt; Static 'User fnTy
-&gt; Static 'User fnTy
-&gt; Ordering
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-operator hs-var">`on`</span></span><span> </span><span class="annot"><span class="annottext">Static 'User fnTy -&gt; Static 'System fnTy
forall fnTy. Static 'User fnTy -&gt; Static 'System fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#systemStatic"><span class="hs-identifier hs-var">systemStatic</span></a></span><span>
</span><span id="line-574"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504320"><span id="local-6989586621679505928"><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-type">Static</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504320"><span class="hs-identifier hs-type">fnTy</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-575"></span><span>  </span><span id="local-6989586621679505932"><span class="annot"><span class="annottext">put :: Static 'User fnTy -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var">put</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Static 'System fnTy -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">(Static 'System fnTy -&gt; Put)
-&gt; (Static 'User fnTy -&gt; Static 'System fnTy)
-&gt; Static 'User fnTy
-&gt; Put
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Static 'User fnTy -&gt; Static 'System fnTy
forall fnTy. Static 'User fnTy -&gt; Static 'System fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#systemStatic"><span class="hs-identifier hs-var">systemStatic</span></a></span><span>
</span><span id="line-576"></span><span>  </span><span id="local-6989586621679505939"><span class="annot"><span class="annottext">get :: Get (Static 'User fnTy)
</span><span class="hs-identifier hs-var hs-var hs-var">get</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-577"></span><span>    </span><span id="local-6989586621679505940"><span class="annot"><a href="#local-6989586621679505940"><span class="hs-identifier hs-var">ptrKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">StaticKey</span></span><span>
</span><span id="line-578"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">unsafePerformIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">unsafeLookupStaticPtr</span></span><span> </span><span class="annot"><a href="#local-6989586621679505940"><span class="hs-identifier hs-type">ptrKey</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-579"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679505942"><span class="annot"><span class="annottext">StaticPtr fnTy
</span><a href="#local-6989586621679505942"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Static 'User fnTy -&gt; Get (Static 'User fnTy)
forall a. a -&gt; Get a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Static 'User fnTy -&gt; Get (Static 'User fnTy))
-&gt; Static 'User fnTy -&gt; Get (Static 'User fnTy)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr fnTy -&gt; Static 'User fnTy
forall fnTy. StaticPtr fnTy -&gt; Static 'User fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-var">UserStatic</span></a></span><span> </span><span class="annot"><span class="annottext">StaticPtr fnTy
</span><a href="#local-6989586621679505942"><span class="hs-identifier hs-var">ptr</span></a></span><span>
</span><span id="line-580"></span><span>      </span><span class="annot"><span class="annottext">Maybe (StaticPtr fnTy)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-581"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Get (Static 'User fnTy)
forall a. String -&gt; Get a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Get (Static 'User fnTy))
-&gt; String -&gt; Get (Static 'User fnTy)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-582"></span><span>          </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unlines</span></span><span>
</span><span id="line-583"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed to look up static pointer key for action.&quot;</span></span><span>
</span><span id="line-584"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NB: Binary instances for 'User' types cannot be used in external executables.&quot;</span></span><span>
</span><span id="line-585"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-586"></span><span>
</span><span id="line-587"></span><span class="hs-comment">-- | A command consists of a statically-known action together with a</span><span>
</span><span id="line-588"></span><span class="hs-comment">-- (possibly dynamic) argument to that action.</span><span>
</span><span id="line-589"></span><span class="hs-comment">--</span><span>
</span><span id="line-590"></span><span class="hs-comment">-- For example, the action can consist of running an executable</span><span>
</span><span id="line-591"></span><span class="hs-comment">-- (such as @happy@ or @c2hs@), while the argument consists of the variable</span><span>
</span><span id="line-592"></span><span class="hs-comment">-- component of the command, e.g. the specific file to run @happy@ on.</span><span>
</span><span id="line-593"></span><span class="hs-keyword">type</span><span> </span><span id="Command"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-var">Command</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="hs-comment">-- | Internal datatype used for commands, both for the Hooks API ('Command')</span><span>
</span><span id="line-596"></span><span class="hs-comment">-- and for the build system.</span><span>
</span><span id="line-597"></span><span class="hs-keyword">data</span><span> </span><span id="CommandData"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-var">CommandData</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504325"><span class="annot"><a href="#local-6989586621679504325"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-type">Scope</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504326"><span class="annot"><a href="#local-6989586621679504326"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504327"><span class="annot"><a href="#local-6989586621679504327"><span class="hs-identifier hs-type">res</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Command"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-var">Command</span></a></span></span><span>
</span><span id="line-598"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="actionPtr"><span class="annot"><span class="annottext">forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; Static scope (arg -&gt; res)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionPtr"><span class="hs-identifier hs-var hs-var">actionPtr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-type">Static</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504325"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504326"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679504327"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The (statically-known) action to execute.</span></span><span>
</span><span id="line-600"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="actionArg"><span class="annot"><span class="annottext">forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionArg"><span class="hs-identifier hs-var hs-var">actionArg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-type">ScopedArgument</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504325"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504326"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-601"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The (possibly dynamic) argument to pass to the action.</span></span><span>
</span><span id="line-602"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="cmdInstances"><span class="annot"><span class="annottext">forall (scope :: Scope) arg res.
CommandData scope arg res
-&gt; Static scope (Dict (Binary arg, Show arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#cmdInstances"><span class="hs-identifier hs-var hs-var">cmdInstances</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-type">Static</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504325"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-type">Dict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="#local-6989586621679504326"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679504326"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-603"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Static evidence that the argument can be serialised and deserialised.</span></span><span>
</span><span id="line-604"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-605"></span><span>
</span><span id="line-606"></span><span class="hs-comment">-- | Construct a command.</span><span>
</span><span id="line-607"></span><span class="hs-comment">--</span><span>
</span><span id="line-608"></span><span class="hs-comment">-- Prefer using this smart constructor instead of v'Command' whenever possible.</span><span>
</span><span id="line-609"></span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#mkCommand"><span class="hs-identifier hs-type">mkCommand</span></a></span><span>
</span><span id="line-610"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504338"><span class="annot"><a href="#local-6989586621679504338"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span id="local-6989586621679504339"><span class="annot"><a href="#local-6989586621679504339"><span class="hs-identifier hs-type">res</span></a></span></span><span>
</span><span id="line-611"></span><span>   </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StaticPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-type">Dict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="#local-6989586621679504338"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679504338"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StaticPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504338"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679504339"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-613"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679504338"><span class="hs-identifier hs-type">arg</span></a></span><span>
</span><span id="line-614"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504338"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504339"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-615"></span><span id="mkCommand"><span class="annot"><span class="annottext">mkCommand :: forall arg res.
StaticPtr (Dict (Binary arg, Show arg))
-&gt; StaticPtr (arg -&gt; res) -&gt; arg -&gt; Command arg res
</span><a href="Distribution.Simple.SetupHooks.Rule.html#mkCommand"><span class="hs-identifier hs-var hs-var">mkCommand</span></a></span></span><span> </span><span id="local-6989586621679505947"><span class="annot"><span class="annottext">StaticPtr (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679505947"><span class="hs-identifier hs-var">dict</span></a></span></span><span> </span><span id="local-6989586621679505948"><span class="annot"><span class="annottext">StaticPtr (arg -&gt; res)
</span><a href="#local-6989586621679505948"><span class="hs-identifier hs-var">actionPtr</span></a></span></span><span> </span><span id="local-6989586621679505949"><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621679505949"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-616"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span>
</span><span id="line-617"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">actionPtr :: Static 'User (arg -&gt; res)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionPtr"><span class="hs-identifier hs-var">actionPtr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaticPtr (arg -&gt; res) -&gt; Static 'User (arg -&gt; res)
forall fnTy. StaticPtr fnTy -&gt; Static 'User fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-var">UserStatic</span></a></span><span> </span><span class="annot"><span class="annottext">StaticPtr (arg -&gt; res)
</span><a href="#local-6989586621679505948"><span class="hs-identifier hs-var">actionPtr</span></a></span><span>
</span><span id="line-618"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">actionArg :: ScopedArgument 'User arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionArg"><span class="hs-identifier hs-var">actionArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">arg -&gt; ScopedArgument 'User arg
forall (scope :: Scope) arg. arg -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-var">ScopedArgument</span></a></span><span> </span><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621679505949"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-619"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cmdInstances :: Static 'User (Dict (Binary arg, Show arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#cmdInstances"><span class="hs-identifier hs-var">cmdInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary arg, Show arg))
-&gt; Static 'User (Dict (Binary arg, Show arg))
forall fnTy. StaticPtr fnTy -&gt; Static 'User fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-var">UserStatic</span></a></span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679505947"><span class="hs-identifier hs-var">dict</span></a></span><span>
</span><span id="line-620"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-621"></span><span>
</span><span id="line-622"></span><span class="annot"><span class="hs-comment">-- | Run a 'Command'.</span></span><span>
</span><span id="line-623"></span><span id="local-6989586621679504344"><span id="local-6989586621679504345"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#runCommand"><span class="hs-identifier hs-type">runCommand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504344"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504345"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679504345"><span class="hs-identifier hs-type">res</span></a></span></span></span><span>
</span><span id="line-624"></span><span id="runCommand"><span class="annot"><span class="annottext">runCommand :: forall args res. Command args res -&gt; res
</span><a href="Distribution.Simple.SetupHooks.Rule.html#runCommand"><span class="hs-identifier hs-var hs-var">runCommand</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">actionPtr :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; Static scope (arg -&gt; res)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionPtr"><span class="hs-identifier hs-var">actionPtr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-type">UserStatic</span></a></span><span> </span><span id="local-6989586621679505951"><span class="annot"><span class="annottext">StaticPtr (args -&gt; res)
</span><a href="#local-6989586621679505951"><span class="hs-identifier hs-var">ptr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">actionArg :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionArg"><span class="hs-identifier hs-var">actionArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-type">ScopedArgument</span></a></span><span> </span><span id="local-6989586621679505952"><span class="annot"><span class="annottext">args
</span><a href="#local-6989586621679505952"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-625"></span><span>  </span><span class="annot"><span class="annottext">StaticPtr (args -&gt; res) -&gt; args -&gt; res
forall a. StaticPtr a -&gt; a
</span><span class="hs-identifier hs-var">deRefStaticPtr</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr (args -&gt; res)
</span><a href="#local-6989586621679505951"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">args
</span><a href="#local-6989586621679505952"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span class="hs-comment">-- | Commands to execute a rule:</span><span>
</span><span id="line-628"></span><span class="hs-comment">--</span><span>
</span><span id="line-629"></span><span class="hs-comment">--   - for a rule with static dependencies, a single command,</span><span>
</span><span id="line-630"></span><span class="hs-comment">--   - for a rule with dynamic dependencies, a command for computing dynamic</span><span>
</span><span id="line-631"></span><span class="hs-comment">--     dependencies, and a command for executing the rule.</span><span>
</span><span id="line-632"></span><span class="hs-keyword">data</span><span>
</span><span id="line-633"></span><span>  </span><span id="RuleCommands"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-var">RuleCommands</span></a></span></span><span>
</span><span id="line-634"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679505954"><span class="annot"><a href="#local-6989586621679505954"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-type">Scope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-635"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679505955"><span class="annot"><a href="#local-6989586621679505955"><span class="hs-identifier hs-type">deps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-type">Scope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-636"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679505956"><span class="annot"><a href="#local-6989586621679505956"><span class="hs-identifier hs-type">ruleCmd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-type">Scope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-637"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-638"></span><span>  </span><span class="annot"><span class="hs-comment">-- | A rule with statically-known dependencies.</span></span><span>
</span><span id="line-639"></span><span>  </span><span id="StaticRuleCommand"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-var">StaticRuleCommand</span></a></span></span><span>
</span><span id="line-640"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679505957"><span class="annot"><a href="#local-6989586621679505957"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span id="local-6989586621679505958"><span class="annot"><a href="#local-6989586621679505958"><span class="hs-identifier hs-type">deps</span></a></span></span><span> </span><span id="local-6989586621679505959"><span class="annot"><a href="#local-6989586621679505959"><span class="hs-identifier hs-type">ruleCmd</span></a></span></span><span> </span><span id="local-6989586621679505960"><span class="annot"><a href="#local-6989586621679505960"><span class="hs-identifier hs-type">scope</span></a></span></span><span>
</span><span id="line-641"></span><span>     </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">If</span></span><span>
</span><span id="line-642"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505960"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-643"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505957"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Constraint</span></span><span class="hs-special">)</span><span>
</span><span id="line-645"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">{</span><span> </span><span id="staticRuleCommand"><span class="annot"><span class="annottext">()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var hs-var">staticRuleCommand</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505959"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505960"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505957"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-646"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ The command to execute the rule.</span></span><span>
</span><span id="line-647"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="staticRuleArgRep"><span class="annot"><span class="annottext">()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var hs-var">staticRuleArgRep</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">If</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505960"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable.SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable.TypeRep</span></span><span> </span><span class="annot"><a href="#local-6989586621679505957"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-648"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ A 'TypeRep' for 'arg'.</span></span><span>
</span><span id="line-649"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-650"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-type">RuleCommands</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505960"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505958"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505959"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span>
</span><span id="line-651"></span><span>  </span><span id="DynamicRuleCommands"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-var">DynamicRuleCommands</span></a></span></span><span>
</span><span id="line-652"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679505962"><span class="annot"><a href="#local-6989586621679505962"><span class="hs-identifier hs-type">depsArg</span></a></span></span><span> </span><span id="local-6989586621679505963"><span class="annot"><a href="#local-6989586621679505963"><span class="hs-identifier hs-type">depsRes</span></a></span></span><span> </span><span id="local-6989586621679505964"><span class="annot"><a href="#local-6989586621679505964"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span id="local-6989586621679505965"><span class="annot"><a href="#local-6989586621679505965"><span class="hs-identifier hs-type">deps</span></a></span></span><span> </span><span id="local-6989586621679505966"><span class="annot"><a href="#local-6989586621679505966"><span class="hs-identifier hs-type">ruleCmd</span></a></span></span><span> </span><span id="local-6989586621679505967"><span class="annot"><a href="#local-6989586621679505967"><span class="hs-identifier hs-type">scope</span></a></span></span><span>
</span><span id="line-653"></span><span>     </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">If</span></span><span>
</span><span id="line-654"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505967"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505962"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679505963"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679505964"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-656"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hs.Constraint</span></span><span class="hs-special">)</span><span>
</span><span id="line-657"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">{</span><span> </span><span id="dynamicRuleInstances"><span class="annot"><span class="annottext">()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var hs-var">dynamicRuleInstances</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Static"><span class="hs-identifier hs-type">Static</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505967"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-type">Dict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="#local-6989586621679505963"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679505963"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679505963"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-658"></span><span>        </span><span class="hs-comment">-- ^ A rule with dynamic dependencies, which consists of two parts:</span><span>
</span><span id="line-659"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-660"></span><span>        </span><span class="hs-comment">--  - a dynamic dependency computation, that returns additional edges to</span><span>
</span><span id="line-661"></span><span>        </span><span class="hs-comment">--    be added to the build graph together with an additional piece of data,</span><span>
</span><span id="line-662"></span><span>        </span><span class="hs-comment">--  - the command to execute the rule itself, which receives the additional</span><span>
</span><span id="line-663"></span><span>        </span><span class="hs-comment">--    piece of data returned by the dependency computation.</span><span>
</span><span id="line-664"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- \^ Static evidence used for serialisation, in order to pass the result</span><span>
</span><span id="line-665"></span><span>         </span><span class="hs-comment">-- of the dependency computation to the main rule action.</span><span>
</span><span id="line-666"></span><span>         </span><span id="dynamicDeps"><span class="annot"><span class="annottext">()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var hs-var">dynamicDeps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505965"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505967"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505962"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505963"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-667"></span><span>        </span><span class="hs-comment">-- ^ A dynamic dependency computation. The resulting dependencies</span><span>
</span><span id="line-668"></span><span>        </span><span class="hs-comment">-- will be injected into the build graph, and the result of the computation</span><span>
</span><span id="line-669"></span><span>        </span><span class="hs-comment">-- will be passed on to the command that executes the rule.</span><span>
</span><span id="line-670"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="dynamicRuleCommand"><span class="annot"><span class="annottext">()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var hs-var">dynamicRuleCommand</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505966"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505967"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505964"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505963"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-671"></span><span>        </span><span class="hs-comment">-- ^ The command to execute the rule. It will receive the result</span><span>
</span><span id="line-672"></span><span>        </span><span class="hs-comment">-- of the dynamic dependency computation.</span><span>
</span><span id="line-673"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="dynamicRuleTypeRep"><span class="annot"><span class="annottext">()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var hs-var">dynamicRuleTypeRep</span></a></span></span><span>
</span><span id="line-674"></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">If</span></span><span>
</span><span id="line-675"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505967"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Typeable.SomeTypeRep</span></span><span>
</span><span id="line-677"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable.TypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679505962"><span class="hs-identifier hs-type">depsArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679505963"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679505964"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ A 'TypeRep' for the triple @(depsArg,depsRes,arg)@.</span></span><span>
</span><span id="line-680"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-681"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-type">RuleCommands</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505967"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505965"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679505966"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span>
</span><span id="line-682"></span><span>
</span><span id="line-683"></span><span class="hs-comment">{- Note [Hooks Binary instances]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The Hooks API is strongly typed: users can declare rule commands with varying
types, e.g.

  staticRule
  :: forall arg
   . Typeable arg
  =&gt; Command arg (IO ())
  -&gt; [Dependency]
  -&gt; NE.NonEmpty Location
  -&gt; Rule

allows a user to declare a 'Command' that receives an argument of type 'arg'
of their choosing.

This all makes sense within the Hooks API, but when communicating with an
external build system (such as cabal-install or HLS), these arguments are
treated as opaque blobs of data (in particular if the Hooks are compiled into
a separate executable, then the static pointers that contain the relevant
instances for these user-chosen types can only be dereferenced from within that
executable, and not on the side of the build system).

This means that, to enable Hooks to be communicated between the package and the
build system, we need:

  1. Two representations of rules: one for the package author using the Hooks API,
     and one for the build system.
  2. Compatibility in the 'Binary' instances for these two types. One needs to be
     able to serialise a 'User'-side 'Rule', and de-serialise it on the build system
     into a 'System'-side 'Rule' which contains some opaque bits of data, and
     vice-versa.

(1) is achieved using the 'Scope' parameter to the 'RuleData' datatype.
@Rule = RuleData User@ is the API-side representation, whereas
@RuleBinary = RuleData System@ is the build-system-side representation.

For (2), note that when we serialise a value of known type and known size, e.g.
an 'Int64', we are nevertheless required to also serialise its size. This is because,
on the build-system side, we don't have access to any of the types, and thus don't know
how much to read in order to reconstruct the associated opaque 'ByteString'.
To ensure we always serialise/deserialise including the length of the data,
the 'ScopedArgument' newtype is used, with a custom 'Binary' instance that always
incldues the length. We use this newtype:

  - in the definition of 'CommandData', for arguments to rules,
  - in the definition of 'DepsRes', for the result of dynamic dependency computations.
-}</span><span>
</span><span id="line-731"></span><span>
</span><span id="line-732"></span><span class="hs-keyword">newtype</span><span> </span><span id="ScopedArgument"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-var">ScopedArgument</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504343"><span class="annot"><a href="#local-6989586621679504343"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-type">Scope</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679504342"><span class="annot"><a href="#local-6989586621679504342"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ScopedArgument"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-var">ScopedArgument</span></a></span></span><span> </span><span class="hs-special">{</span><span id="getArg"><span class="annot"><span class="annottext">forall (scope :: Scope) arg. ScopedArgument scope arg -&gt; arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#getArg"><span class="hs-identifier hs-var hs-var">getArg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504342"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-733"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679505971"><span id="local-6989586621679505975"><span class="annot"><span class="annottext">ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
(ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool)
-&gt; (ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool)
-&gt; Eq (ScopedArgument scope arg)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall (scope :: Scope) arg.
Eq arg =&gt;
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
$c== :: forall (scope :: Scope) arg.
Eq arg =&gt;
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
== :: ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
$c/= :: forall (scope :: Scope) arg.
Eq arg =&gt;
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
/= :: ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679505984"><span id="local-6989586621679505988"><span id="local-6989586621679505992"><span id="local-6989586621679505996"><span id="local-6989586621679506000"><span id="local-6989586621679506004"><span id="local-6989586621679506008"><span class="annot"><span class="annottext">Eq (ScopedArgument scope arg)
Eq (ScopedArgument scope arg) =&gt;
(ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Ordering)
-&gt; (ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool)
-&gt; (ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool)
-&gt; (ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool)
-&gt; (ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool)
-&gt; (ScopedArgument scope arg
    -&gt; ScopedArgument scope arg -&gt; ScopedArgument scope arg)
-&gt; (ScopedArgument scope arg
    -&gt; ScopedArgument scope arg -&gt; ScopedArgument scope arg)
-&gt; Ord (ScopedArgument scope arg)
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Ordering
ScopedArgument scope arg
-&gt; ScopedArgument scope arg -&gt; ScopedArgument scope arg
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall (scope :: Scope) arg.
Ord arg =&gt;
Eq (ScopedArgument scope arg)
forall (scope :: Scope) arg.
Ord arg =&gt;
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
forall (scope :: Scope) arg.
Ord arg =&gt;
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Ordering
forall (scope :: Scope) arg.
Ord arg =&gt;
ScopedArgument scope arg
-&gt; ScopedArgument scope arg -&gt; ScopedArgument scope arg
$ccompare :: forall (scope :: Scope) arg.
Ord arg =&gt;
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Ordering
compare :: ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Ordering
$c&lt; :: forall (scope :: Scope) arg.
Ord arg =&gt;
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
&lt; :: ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
$c&lt;= :: forall (scope :: Scope) arg.
Ord arg =&gt;
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
&lt;= :: ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
$c&gt; :: forall (scope :: Scope) arg.
Ord arg =&gt;
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
&gt; :: ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
$c&gt;= :: forall (scope :: Scope) arg.
Ord arg =&gt;
ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
&gt;= :: ScopedArgument scope arg -&gt; ScopedArgument scope arg -&gt; Bool
$cmax :: forall (scope :: Scope) arg.
Ord arg =&gt;
ScopedArgument scope arg
-&gt; ScopedArgument scope arg -&gt; ScopedArgument scope arg
max :: ScopedArgument scope arg
-&gt; ScopedArgument scope arg -&gt; ScopedArgument scope arg
$cmin :: forall (scope :: Scope) arg.
Ord arg =&gt;
ScopedArgument scope arg
-&gt; ScopedArgument scope arg -&gt; ScopedArgument scope arg
min :: ScopedArgument scope arg
-&gt; ScopedArgument scope arg -&gt; ScopedArgument scope arg
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679506015"><span id="local-6989586621679506019"><span id="local-6989586621679506023"><span class="annot"><span class="annottext">Int -&gt; ScopedArgument scope arg -&gt; ShowS
[ScopedArgument scope arg] -&gt; ShowS
ScopedArgument scope arg -&gt; String
(Int -&gt; ScopedArgument scope arg -&gt; ShowS)
-&gt; (ScopedArgument scope arg -&gt; String)
-&gt; ([ScopedArgument scope arg] -&gt; ShowS)
-&gt; Show (ScopedArgument scope arg)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall (scope :: Scope) arg.
Show arg =&gt;
Int -&gt; ScopedArgument scope arg -&gt; ShowS
forall (scope :: Scope) arg.
Show arg =&gt;
[ScopedArgument scope arg] -&gt; ShowS
forall (scope :: Scope) arg.
Show arg =&gt;
ScopedArgument scope arg -&gt; String
$cshowsPrec :: forall (scope :: Scope) arg.
Show arg =&gt;
Int -&gt; ScopedArgument scope arg -&gt; ShowS
showsPrec :: Int -&gt; ScopedArgument scope arg -&gt; ShowS
$cshow :: forall (scope :: Scope) arg.
Show arg =&gt;
ScopedArgument scope arg -&gt; String
show :: ScopedArgument scope arg -&gt; String
$cshowList :: forall (scope :: Scope) arg.
Show arg =&gt;
[ScopedArgument scope arg] -&gt; ShowS
showList :: [ScopedArgument scope arg] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span class="annot"><span class="hs-comment">-- | Serialise/deserialise, always including the length of the payload.</span></span><span>
</span><span id="line-736"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504364"><span id="local-6989586621679506031"><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="#local-6989586621679504364"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-type">ScopedArgument</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504364"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-737"></span><span>  </span><span id="local-6989586621679506037"><span class="annot"><span class="annottext">put :: ScopedArgument 'User arg -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var">put</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-type">ScopedArgument</span></a></span><span> </span><span id="local-6989586621679506038"><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621679506038"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">arg -&gt; ByteString
forall a. Binary a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">Binary.encode</span></span><span> </span><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621679506038"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span>  </span><span id="local-6989586621679506045"><span class="annot"><span class="annottext">get :: Get (ScopedArgument 'User arg)
</span><span class="hs-identifier hs-var hs-var hs-var">get</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-739"></span><span>    </span><span id="local-6989586621679506046"><span class="annot"><a href="#local-6989586621679506046"><span class="hs-identifier hs-var">dat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span>
</span><span id="line-740"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary.decodeOrFail</span></span><span> </span><span class="annot"><a href="#local-6989586621679506046"><span class="hs-identifier hs-type">dat</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-741"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteOffset
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679506048"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679506048"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Get (ScopedArgument 'User arg)
forall a. String -&gt; Get a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679506048"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-742"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteOffset
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679506049"><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621679506049"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'User arg -&gt; Get (ScopedArgument 'User arg)
forall a. a -&gt; Get a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(ScopedArgument 'User arg -&gt; Get (ScopedArgument 'User arg))
-&gt; ScopedArgument 'User arg -&gt; Get (ScopedArgument 'User arg)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">arg -&gt; ScopedArgument 'User arg
forall (scope :: Scope) arg. arg -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-var">ScopedArgument</span></a></span><span> </span><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621679506049"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-743"></span><span>
</span><span id="line-744"></span><span class="annot"><span class="hs-comment">-- | Serialise and deserialise a raw ByteString, leaving it untouched.</span></span><span>
</span><span id="line-745"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504369"><span id="local-6989586621679506054"><span class="annot"><a href="#local-6989586621679504369"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-type">ScopedArgument</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504369"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-746"></span><span>  </span><span id="local-6989586621679506062"><span class="annot"><span class="annottext">put :: ScopedArgument 'System arg -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var">put</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-type">ScopedArgument</span></a></span><span> </span><span id="local-6989586621679506063"><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621679506063"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">arg -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">arg
</span><a href="#local-6989586621679506063"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-747"></span><span>  </span><span id="local-6989586621679506067"><span class="annot"><span class="annottext">get :: Get (ScopedArgument 'System arg)
</span><span class="hs-identifier hs-var hs-var hs-var">get</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">arg -&gt; ScopedArgument 'System arg
forall (scope :: Scope) arg. arg -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-var">ScopedArgument</span></a></span><span> </span><span class="annot"><span class="annottext">(arg -&gt; ScopedArgument 'System arg)
-&gt; Get arg -&gt; Get (ScopedArgument 'System arg)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Get arg
forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-748"></span><span>
</span><span id="line-749"></span><span class="hs-comment">-- | A placeholder for a command that has been omitted, e.g. when we don't</span><span>
</span><span id="line-750"></span><span class="hs-comment">-- care about serialising/deserialising one particular command in a datatype.</span><span>
</span><span id="line-751"></span><span class="hs-keyword">data</span><span> </span><span id="NoCmd"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#NoCmd"><span class="hs-identifier hs-var">NoCmd</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504494"><span class="annot"><a href="#local-6989586621679504494"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-type">Scope</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679504495"><span class="annot"><a href="#local-6989586621679504495"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span id="local-6989586621679504496"><span class="annot"><a href="#local-6989586621679504496"><span class="hs-identifier hs-type">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CmdOmitted"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CmdOmitted"><span class="hs-identifier hs-var">CmdOmitted</span></a></span></span><span>
</span><span id="line-752"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679506070"><span id="local-6989586621679506072"><span class="annot"><span class="annottext">(forall x. NoCmd scope arg res -&gt; Rep (NoCmd scope arg res) x)
-&gt; (forall x. Rep (NoCmd scope arg res) x -&gt; NoCmd scope arg res)
-&gt; Generic (NoCmd scope arg res)
forall x. Rep (NoCmd scope arg res) x -&gt; NoCmd scope arg res
forall x. NoCmd scope arg res -&gt; Rep (NoCmd scope arg res) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall (scope :: Scope) k (arg :: k) k (res :: k) x.
Rep (NoCmd scope arg res) x -&gt; NoCmd scope arg res
forall (scope :: Scope) k (arg :: k) k (res :: k) x.
NoCmd scope arg res -&gt; Rep (NoCmd scope arg res) x
$cfrom :: forall (scope :: Scope) k (arg :: k) k (res :: k) x.
NoCmd scope arg res -&gt; Rep (NoCmd scope arg res) x
from :: forall x. NoCmd scope arg res -&gt; Rep (NoCmd scope arg res) x
$cto :: forall (scope :: Scope) k (arg :: k) k (res :: k) x.
Rep (NoCmd scope arg res) x -&gt; NoCmd scope arg res
to :: forall x. Rep (NoCmd scope arg res) x -&gt; NoCmd scope arg res
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679506075"><span id="local-6989586621679506077"><span class="annot"><span class="annottext">NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
(NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool)
-&gt; (NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool)
-&gt; Eq (NoCmd scope arg res)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
$c== :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
== :: NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
$c/= :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
/= :: NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679506083"><span id="local-6989586621679506085"><span id="local-6989586621679506087"><span id="local-6989586621679506091"><span id="local-6989586621679506094"><span id="local-6989586621679506097"><span id="local-6989586621679506100"><span class="annot"><span class="annottext">Eq (NoCmd scope arg res)
Eq (NoCmd scope arg res) =&gt;
(NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Ordering)
-&gt; (NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool)
-&gt; (NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool)
-&gt; (NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool)
-&gt; (NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool)
-&gt; (NoCmd scope arg res
    -&gt; NoCmd scope arg res -&gt; NoCmd scope arg res)
-&gt; (NoCmd scope arg res
    -&gt; NoCmd scope arg res -&gt; NoCmd scope arg res)
-&gt; Ord (NoCmd scope arg res)
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Ordering
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; NoCmd scope arg res
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall (scope :: Scope) k (arg :: k) k (res :: k).
Eq (NoCmd scope arg res)
forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Ordering
forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; NoCmd scope arg res
$ccompare :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Ordering
compare :: NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Ordering
$c&lt; :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
&lt; :: NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
$c&lt;= :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
&lt;= :: NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
$c&gt; :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
&gt; :: NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
$c&gt;= :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
&gt;= :: NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; Bool
$cmax :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; NoCmd scope arg res
max :: NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; NoCmd scope arg res
$cmin :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; NoCmd scope arg res
min :: NoCmd scope arg res -&gt; NoCmd scope arg res -&gt; NoCmd scope arg res
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679506103"><span id="local-6989586621679506105"><span id="local-6989586621679506109"><span class="annot"><span class="annottext">Int -&gt; NoCmd scope arg res -&gt; ShowS
[NoCmd scope arg res] -&gt; ShowS
NoCmd scope arg res -&gt; String
(Int -&gt; NoCmd scope arg res -&gt; ShowS)
-&gt; (NoCmd scope arg res -&gt; String)
-&gt; ([NoCmd scope arg res] -&gt; ShowS)
-&gt; Show (NoCmd scope arg res)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall (scope :: Scope) k (arg :: k) k (res :: k).
Int -&gt; NoCmd scope arg res -&gt; ShowS
forall (scope :: Scope) k (arg :: k) k (res :: k).
[NoCmd scope arg res] -&gt; ShowS
forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; String
$cshowsPrec :: forall (scope :: Scope) k (arg :: k) k (res :: k).
Int -&gt; NoCmd scope arg res -&gt; ShowS
showsPrec :: Int -&gt; NoCmd scope arg res -&gt; ShowS
$cshow :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; String
show :: NoCmd scope arg res -&gt; String
$cshowList :: forall (scope :: Scope) k (arg :: k) k (res :: k).
[NoCmd scope arg res] -&gt; ShowS
showList :: [NoCmd scope arg res] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679506112"><span id="local-6989586621679506119"><span id="local-6989586621679506125"><span class="annot"><span class="annottext">Get (NoCmd scope arg res)
[NoCmd scope arg res] -&gt; Put
NoCmd scope arg res -&gt; Put
(NoCmd scope arg res -&gt; Put)
-&gt; Get (NoCmd scope arg res)
-&gt; ([NoCmd scope arg res] -&gt; Put)
-&gt; Binary (NoCmd scope arg res)
forall t. (t -&gt; Put) -&gt; Get t -&gt; ([t] -&gt; Put) -&gt; Binary t
forall (scope :: Scope) k (arg :: k) k (res :: k).
Get (NoCmd scope arg res)
forall (scope :: Scope) k (arg :: k) k (res :: k).
[NoCmd scope arg res] -&gt; Put
forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; Put
$cput :: forall (scope :: Scope) k (arg :: k) k (res :: k).
NoCmd scope arg res -&gt; Put
put :: NoCmd scope arg res -&gt; Put
$cget :: forall (scope :: Scope) k (arg :: k) k (res :: k).
Get (NoCmd scope arg res)
get :: Get (NoCmd scope arg res)
$cputList :: forall (scope :: Scope) k (arg :: k) k (res :: k).
[NoCmd scope arg res] -&gt; Put
putList :: [NoCmd scope arg res] -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Binary</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>
</span><span id="line-755"></span><span class="annot"><span class="hs-comment">-- | A dynamic dependency command.</span></span><span>
</span><span id="line-756"></span><span class="hs-keyword">newtype</span><span> </span><span id="DynDepsCmd"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-var">DynDepsCmd</span></a></span></span><span> </span><span id="local-6989586621679504421"><span class="annot"><a href="#local-6989586621679504421"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span id="local-6989586621679504422"><span class="annot"><a href="#local-6989586621679504422"><span class="hs-identifier hs-type">depsArg</span></a></span></span><span> </span><span id="local-6989586621679504423"><span class="annot"><a href="#local-6989586621679504423"><span class="hs-identifier hs-type">depsRes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DynDepsCmd"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-var">DynDepsCmd</span></a></span></span><span>
</span><span id="line-757"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="dynDepsCmd"><span class="annot"><span class="annottext">forall (scope :: Scope) depsArg depsRes.
DynDepsCmd scope depsArg depsRes
-&gt; CommandData scope depsArg (IO ([Dependency], depsRes))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynDepsCmd"><span class="hs-identifier hs-var hs-var">dynDepsCmd</span></a></span></span><span>
</span><span id="line-758"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504421"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504422"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679504423"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-759"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-760"></span><span>
</span><span id="line-761"></span><span id="local-6989586621679506134"><span id="local-6989586621679506139"><span id="local-6989586621679506143"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679504429"><span id="local-6989586621679504430"><span class="annot"><a href="#local-6989586621679504429"><span class="hs-keyword hs-type hs-type">newtype</span></a></span></span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-type">DynDepsCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504429"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504430"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-762"></span><span id="local-6989586621679506148"><span id="local-6989586621679506153"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679504433"><span id="local-6989586621679504434"><span class="annot"><a href="#local-6989586621679504433"><span class="hs-keyword hs-type hs-type">newtype</span></a></span></span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-type">DynDepsCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504433"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504434"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-763"></span><span id="local-6989586621679506158"><span id="local-6989586621679506163"><span id="local-6989586621679506167"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679504437"><span id="local-6989586621679504438"><span class="annot"><a href="#local-6989586621679504437"><span class="hs-keyword hs-type hs-type">newtype</span></a></span></span></span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-type">DynDepsCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504437"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504438"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-764"></span><span id="local-6989586621679506174"><span id="local-6989586621679506182"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679504034"><span id="local-6989586621679504035"><span class="annot"><a href="#local-6989586621679504034"><span class="hs-keyword hs-type hs-type">newtype</span></a></span></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504034"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679504035"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-766"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-type">DynDepsCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504034"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504035"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-767"></span><span id="local-6989586621679506193"><span id="local-6989586621679506201"><span id="local-6989586621679506207"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679504047"><span id="local-6989586621679504048"><span class="annot"><a href="#local-6989586621679504047"><span class="hs-keyword hs-type hs-type">newtype</span></a></span></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-768"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504047"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679504048"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-769"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-type">DynDepsCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504047"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504048"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-770"></span><span>
</span><span id="line-771"></span><span class="annot"><span class="hs-comment">-- | The result of a dynamic dependency computation.</span></span><span>
</span><span id="line-772"></span><span class="hs-keyword">newtype</span><span> </span><span id="DepsRes"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DepsRes"><span class="hs-identifier hs-var">DepsRes</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679504448"><span class="annot"><a href="#local-6989586621679504448"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Scope"><span class="hs-identifier hs-type">Scope</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679504449"><span class="annot"><a href="#local-6989586621679504449"><span class="hs-identifier hs-type">depsArg</span></a></span></span><span> </span><span id="local-6989586621679504450"><span class="annot"><a href="#local-6989586621679504450"><span class="hs-identifier hs-type">depsRes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DepsRes"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DepsRes"><span class="hs-identifier hs-var">DepsRes</span></a></span></span><span>
</span><span id="line-773"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="depsRes"><span class="annot"><span class="annottext">forall {k} (scope :: Scope) (depsArg :: k) depsRes.
DepsRes scope depsArg depsRes -&gt; ScopedArgument scope depsRes
</span><a href="Distribution.Simple.SetupHooks.Rule.html#depsRes"><span class="hs-identifier hs-var hs-var">depsRes</span></a></span></span><span>
</span><span id="line-774"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-type">ScopedArgument</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504448"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504450"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-comment">-- See Note [Hooks Binary instances]</span><span>
</span><span id="line-775"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-776"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679506220"><span id="local-6989586621679506224"><span id="local-6989586621679506228"><span class="annot"><span class="annottext">Int -&gt; DepsRes scope depsArg depsRes -&gt; ShowS
[DepsRes scope depsArg depsRes] -&gt; ShowS
DepsRes scope depsArg depsRes -&gt; String
(Int -&gt; DepsRes scope depsArg depsRes -&gt; ShowS)
-&gt; (DepsRes scope depsArg depsRes -&gt; String)
-&gt; ([DepsRes scope depsArg depsRes] -&gt; ShowS)
-&gt; Show (DepsRes scope depsArg depsRes)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall (scope :: Scope) k (depsArg :: k) depsRes.
Show depsRes =&gt;
Int -&gt; DepsRes scope depsArg depsRes -&gt; ShowS
forall (scope :: Scope) k (depsArg :: k) depsRes.
Show depsRes =&gt;
[DepsRes scope depsArg depsRes] -&gt; ShowS
forall (scope :: Scope) k (depsArg :: k) depsRes.
Show depsRes =&gt;
DepsRes scope depsArg depsRes -&gt; String
$cshowsPrec :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Show depsRes =&gt;
Int -&gt; DepsRes scope depsArg depsRes -&gt; ShowS
showsPrec :: Int -&gt; DepsRes scope depsArg depsRes -&gt; ShowS
$cshow :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Show depsRes =&gt;
DepsRes scope depsArg depsRes -&gt; String
show :: DepsRes scope depsArg depsRes -&gt; String
$cshowList :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Show depsRes =&gt;
[DepsRes scope depsArg depsRes] -&gt; ShowS
showList :: [DepsRes scope depsArg depsRes] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679506234"><span id="local-6989586621679506238"><span class="annot"><span class="annottext">DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
(DepsRes scope depsArg depsRes
 -&gt; DepsRes scope depsArg depsRes -&gt; Bool)
-&gt; (DepsRes scope depsArg depsRes
    -&gt; DepsRes scope depsArg depsRes -&gt; Bool)
-&gt; Eq (DepsRes scope depsArg depsRes)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall (scope :: Scope) k (depsArg :: k) depsRes.
Eq depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
$c== :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Eq depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
== :: DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
$c/= :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Eq depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
/= :: DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679506247"><span id="local-6989586621679506251"><span id="local-6989586621679506255"><span id="local-6989586621679506259"><span id="local-6989586621679506263"><span id="local-6989586621679506267"><span id="local-6989586621679506271"><span class="annot"><span class="annottext">Eq (DepsRes scope depsArg depsRes)
Eq (DepsRes scope depsArg depsRes) =&gt;
(DepsRes scope depsArg depsRes
 -&gt; DepsRes scope depsArg depsRes -&gt; Ordering)
-&gt; (DepsRes scope depsArg depsRes
    -&gt; DepsRes scope depsArg depsRes -&gt; Bool)
-&gt; (DepsRes scope depsArg depsRes
    -&gt; DepsRes scope depsArg depsRes -&gt; Bool)
-&gt; (DepsRes scope depsArg depsRes
    -&gt; DepsRes scope depsArg depsRes -&gt; Bool)
-&gt; (DepsRes scope depsArg depsRes
    -&gt; DepsRes scope depsArg depsRes -&gt; Bool)
-&gt; (DepsRes scope depsArg depsRes
    -&gt; DepsRes scope depsArg depsRes -&gt; DepsRes scope depsArg depsRes)
-&gt; (DepsRes scope depsArg depsRes
    -&gt; DepsRes scope depsArg depsRes -&gt; DepsRes scope depsArg depsRes)
-&gt; Ord (DepsRes scope depsArg depsRes)
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Ordering
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; DepsRes scope depsArg depsRes
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
Eq (DepsRes scope depsArg depsRes)
forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Ordering
forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; DepsRes scope depsArg depsRes
$ccompare :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Ordering
compare :: DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Ordering
$c&lt; :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
&lt; :: DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
$c&lt;= :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
&lt;= :: DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
$c&gt; :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
&gt; :: DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
$c&gt;= :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
&gt;= :: DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; Bool
$cmax :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; DepsRes scope depsArg depsRes
max :: DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; DepsRes scope depsArg depsRes
$cmin :: forall (scope :: Scope) k (depsArg :: k) depsRes.
Ord depsRes =&gt;
DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; DepsRes scope depsArg depsRes
min :: DepsRes scope depsArg depsRes
-&gt; DepsRes scope depsArg depsRes -&gt; DepsRes scope depsArg depsRes
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-777"></span><span>
</span><span id="line-778"></span><span id="local-6989586621679506277"><span id="local-6989586621679506281"><span id="local-6989586621679506285"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679504485"><span id="local-6989586621679504486"><span id="local-6989586621679504487"><span class="annot"><a href="#local-6989586621679504485"><span class="hs-keyword hs-type hs-type hs-type">newtype</span></a></span></span></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-779"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-type">ScopedArgument</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504485"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504486"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-780"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DepsRes"><span class="hs-identifier hs-type">DepsRes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504485"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504487"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504486"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-781"></span><span>
</span><span id="line-782"></span><span class="annot"><span class="hs-comment">-- | Both the rule command and the (optional) dynamic dependency command.</span></span><span>
</span><span id="line-783"></span><span class="hs-keyword">type</span><span> </span><span id="RuleCmds"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCmds"><span class="hs-identifier hs-var">RuleCmds</span></a></span></span><span> </span><span id="local-6989586621679506289"><span class="annot"><a href="#local-6989586621679506289"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-type">RuleCommands</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506289"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-type">DynDepsCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span>
</span><span id="line-784"></span><span>
</span><span id="line-785"></span><span class="annot"><span class="hs-comment">-- | Only the (optional) dynamic dependency command.</span></span><span>
</span><span id="line-786"></span><span class="hs-keyword">type</span><span> </span><span id="RuleDynDepsCmd"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleDynDepsCmd"><span class="hs-identifier hs-var">RuleDynDepsCmd</span></a></span></span><span> </span><span id="local-6989586621679506290"><span class="annot"><a href="#local-6989586621679506290"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-type">RuleCommands</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506290"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-type">DynDepsCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#NoCmd"><span class="hs-identifier hs-type">NoCmd</span></a></span><span>
</span><span id="line-787"></span><span>
</span><span id="line-788"></span><span class="hs-comment">-- | The rule command together with the result of the (optional) dynamic</span><span>
</span><span id="line-789"></span><span class="hs-comment">-- dependency computation.</span><span>
</span><span id="line-790"></span><span class="hs-keyword">type</span><span> </span><span id="RuleExecCmd"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleExecCmd"><span class="hs-identifier hs-var">RuleExecCmd</span></a></span></span><span> </span><span id="local-6989586621679506291"><span class="annot"><a href="#local-6989586621679506291"><span class="hs-identifier hs-type">scope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-type">RuleCommands</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506291"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DepsRes"><span class="hs-identifier hs-type">DepsRes</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span>
</span><span id="line-791"></span><span>
</span><span id="line-792"></span><span class="hs-comment">-- | Project out the (optional) dependency computation command, so that</span><span>
</span><span id="line-793"></span><span class="hs-comment">-- it can be serialised without serialising anything else.</span><span>
</span><span id="line-794"></span><span id="local-6989586621679504488"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ruleDepsCmd"><span class="hs-identifier hs-type">ruleDepsCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCmds"><span class="hs-identifier hs-type">RuleCmds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504488"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleDynDepsCmd"><span class="hs-identifier hs-type">RuleDynDepsCmd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504488"><span class="hs-identifier hs-type">scope</span></a></span></span><span>
</span><span id="line-795"></span><span id="ruleDepsCmd"><span class="annot"><span class="annottext">ruleDepsCmd :: forall (scope :: Scope). RuleCmds scope -&gt; RuleDynDepsCmd scope
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ruleDepsCmd"><span class="hs-identifier hs-var hs-var">ruleDepsCmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-796"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span>
</span><span id="line-797"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">staticRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506294"><span id="local-6989586621679506295"><span class="annot"><span class="annottext">CommandData scope arg (IO ())
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506294"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506295"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-798"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticRuleArgRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506296"><span class="annot"><span class="annottext">If (scope == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506296"><span class="hs-identifier hs-var">tr</span></a></span></span><span>
</span><span id="line-799"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-800"></span><span>      </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span>
</span><span id="line-801"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">staticRuleCommand :: NoCmd scope arg (IO ())
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoCmd scope arg (IO ())
forall {k} {k} (scope :: Scope) (arg :: k) (res :: k).
NoCmd scope arg res
</span><a href="Distribution.Simple.SetupHooks.Rule.html#CmdOmitted"><span class="hs-identifier hs-var">CmdOmitted</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#NoCmd"><span class="hs-identifier hs-type">NoCmd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506294"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506295"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticRuleArgRep :: If (scope == 'System) SomeTypeRep (TypeRep arg)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">If (scope == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506296"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-803"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-804"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-805"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506299"><span id="local-6989586621679506300"><span id="local-6989586621679506301"><span class="annot"><span class="annottext">CommandData scope arg (depsRes -&gt; IO ())
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506299"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506300"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679506301"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-806"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506302"><span class="annot"><span class="annottext">Static scope (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506302"><span class="hs-identifier hs-var">instsPtr</span></a></span></span><span>
</span><span id="line-807"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506303"><span class="annot"><span class="annottext">DynDepsCmd scope depsArg depsRes
</span><a href="#local-6989586621679506303"><span class="hs-identifier hs-var">deps</span></a></span></span><span>
</span><span id="line-808"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleTypeRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506304"><span class="annot"><span class="annottext">If (scope == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506304"><span class="hs-identifier hs-var">tr</span></a></span></span><span>
</span><span id="line-809"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-810"></span><span>      </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-811"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: Static scope (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Static scope (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506302"><span class="hs-identifier hs-var">instsPtr</span></a></span><span>
</span><span id="line-812"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: DynDepsCmd scope depsArg depsRes
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynDepsCmd scope depsArg depsRes
</span><a href="#local-6989586621679506303"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-813"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: NoCmd scope arg (depsRes -&gt; IO ())
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoCmd scope arg (depsRes -&gt; IO ())
forall {k} {k} (scope :: Scope) (arg :: k) (res :: k).
NoCmd scope arg res
</span><a href="Distribution.Simple.SetupHooks.Rule.html#CmdOmitted"><span class="hs-identifier hs-var">CmdOmitted</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#NoCmd"><span class="hs-identifier hs-type">NoCmd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506299"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506300"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679506301"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-814"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleTypeRep :: If (scope == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">If (scope == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506304"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-815"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-816"></span><span>
</span><span id="line-817"></span><span class="annot"><span class="hs-comment">-- | Obtain the (optional) 'IO' action that computes dynamic dependencies.</span></span><span>
</span><span id="line-818"></span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#runRuleDynDepsCmd"><span class="hs-identifier hs-type">runRuleDynDepsCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleDynDepsCmd"><span class="hs-identifier hs-type">RuleDynDepsCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dependency"><span class="hs-identifier hs-type">Dependency</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-819"></span><span id="runRuleDynDepsCmd"><span class="annot"><span class="annottext">runRuleDynDepsCmd :: RuleDynDepsCmd 'User -&gt; Maybe (IO ([Dependency], ByteString))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#runRuleDynDepsCmd"><span class="hs-identifier hs-var hs-var">runRuleDynDepsCmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-820"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (IO ([Dependency], ByteString))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-821"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-822"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-type">UserStatic</span></a></span><span> </span><span id="local-6989586621679506307"><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506307"><span class="hs-identifier hs-var">instsPtr</span></a></span></span><span>
</span><span id="line-823"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-type">DynDepsCmd</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">dynDepsCmd :: forall (scope :: Scope) depsArg depsRes.
DynDepsCmd scope depsArg depsRes
-&gt; CommandData scope depsArg (IO ([Dependency], depsRes))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynDepsCmd"><span class="hs-identifier hs-var">dynDepsCmd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506308"><span class="annot"><span class="annottext">CommandData 'User depsArg (IO ([Dependency], depsRes))
</span><a href="#local-6989586621679506308"><span class="hs-identifier hs-var">depsCmd</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-824"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-825"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Dict (Binary depsRes, Show depsRes, Eq depsRes)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Dict (Binary depsRes, Show depsRes, Eq depsRes)
forall a. StaticPtr a -&gt; a
</span><span class="hs-identifier hs-var">deRefStaticPtr</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506307"><span class="hs-identifier hs-var">instsPtr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-826"></span><span>          </span><span class="annot"><span class="annottext">IO ([Dependency], ByteString)
-&gt; Maybe (IO ([Dependency], ByteString))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(IO ([Dependency], ByteString)
 -&gt; Maybe (IO ([Dependency], ByteString)))
-&gt; IO ([Dependency], ByteString)
-&gt; Maybe (IO ([Dependency], ByteString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-827"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679506315"><span class="annot"><a href="#local-6989586621679506315"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679506316"><span class="annot"><a href="#local-6989586621679506316"><span class="hs-identifier hs-var">depsRes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CommandData 'User depsArg (IO ([Dependency], depsRes))
-&gt; IO ([Dependency], depsRes)
forall args res. Command args res -&gt; res
</span><a href="Distribution.Simple.SetupHooks.Rule.html#runCommand"><span class="hs-identifier hs-var">runCommand</span></a></span><span> </span><span class="annot"><span class="annottext">CommandData 'User depsArg (IO ([Dependency], depsRes))
</span><a href="#local-6989586621679506308"><span class="hs-identifier hs-var">depsCmd</span></a></span><span>
</span><span id="line-828"></span><span>            </span><span class="hs-comment">-- See Note [Hooks Binary instances]</span><span>
</span><span id="line-829"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679506315"><span class="hs-identifier hs-type">deps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary.encode</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-type">ScopedArgument</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506316"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span>
</span><span id="line-831"></span><span class="hs-comment">-- | Project out the command for running the rule, passing in the result of</span><span>
</span><span id="line-832"></span><span class="hs-comment">-- the dependency computation if there was one.</span><span>
</span><span id="line-833"></span><span id="local-6989586621679504505"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ruleExecCmd"><span class="hs-identifier hs-type">ruleExecCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#SScope"><span class="hs-identifier hs-type">SScope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504505"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCmds"><span class="hs-identifier hs-type">RuleCmds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504505"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleExecCmd"><span class="hs-identifier hs-type">RuleExecCmd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504505"><span class="hs-identifier hs-type">scope</span></a></span></span><span>
</span><span id="line-834"></span><span id="ruleExecCmd"><span class="annot"><span class="annottext">ruleExecCmd :: forall (scope :: Scope).
SScope scope
-&gt; RuleCmds scope -&gt; Maybe ByteString -&gt; RuleExecCmd scope
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ruleExecCmd"><span class="hs-identifier hs-var hs-var">ruleExecCmd</span></a></span></span><span>
</span><span id="line-835"></span><span>  </span><span class="annot"><span class="annottext">SScope scope
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-836"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">staticRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506319"><span class="annot"><span class="annottext">CommandData scope arg (IO ())
</span><a href="#local-6989586621679506319"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticRuleArgRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506320"><span class="annot"><span class="annottext">If (scope == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506320"><span class="hs-identifier hs-var">tr</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-837"></span><span>  </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-838"></span><span>    </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">staticRuleCommand :: CommandData scope arg (IO ())
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommandData scope arg (IO ())
</span><a href="#local-6989586621679506319"><span class="hs-identifier hs-var">cmd</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticRuleArgRep :: If (scope == 'System) SomeTypeRep (TypeRep arg)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">If (scope == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506320"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-839"></span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ruleExecCmd"><span class="hs-identifier hs-var">ruleExecCmd</span></a></span><span>
</span><span id="line-840"></span><span>  </span><span id="local-6989586621679506321"><span class="annot"><span class="annottext">SScope scope
</span><a href="#local-6989586621679506321"><span class="hs-identifier hs-var">scope</span></a></span></span><span>
</span><span id="line-841"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-842"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506325"><span class="annot"><span class="annottext">Static scope (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506325"><span class="hs-identifier hs-var">instsPtr</span></a></span></span><span>
</span><span id="line-843"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506326"><span id="local-6989586621679506327"><span id="local-6989586621679506328"><span id="local-6989586621679506329"><span class="annot"><span class="annottext">CommandData scope arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506329"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506326"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506327"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679506328"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-844"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506330"><span class="annot"><span class="annottext">DynDepsCmd scope depsArg depsRes
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynDepsCmd"><span class="hs-identifier hs-type">DynDepsCmd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506326"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506330"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506328"><span class="hs-identifier hs-type">depsRes</span></a></span></span><span>
</span><span id="line-845"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleTypeRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506331"><span class="annot"><span class="annottext">If (scope == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506331"><span class="hs-identifier hs-var">tr</span></a></span></span><span>
</span><span id="line-846"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-847"></span><span>  </span><span id="local-6989586621679506332"><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621679506332"><span class="hs-identifier hs-var">mbDepsResBinary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-848"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621679506332"><span class="hs-identifier hs-var">mbDepsResBinary</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-849"></span><span>      </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-850"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; RuleCommands scope DepsRes CommandData
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; RuleCommands scope DepsRes CommandData)
-&gt; String -&gt; RuleCommands scope DepsRes CommandData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-851"></span><span>          </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unlines</span></span><span>
</span><span id="line-852"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Missing ByteString argument in 'ruleExecCmd'.&quot;</span></span><span>
</span><span id="line-853"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Run 'runRuleDynDepsCmd' on the rule to obtain this data.&quot;</span></span><span>
</span><span id="line-854"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-855"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679506334"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679506334"><span class="hs-identifier hs-var">depsResBinary</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-856"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SScope scope
</span><a href="#local-6989586621679506321"><span class="hs-identifier hs-var">scope</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-857"></span><span>          </span><span class="annot"><span class="annottext">SScope scope
</span><a href="Distribution.Simple.SetupHooks.Rule.html#SUser"><span class="hs-identifier hs-var">SUser</span></a></span><span>
</span><span id="line-858"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Dict (Binary depsRes, Show depsRes, Eq depsRes)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Dict (Binary depsRes, Show depsRes, Eq depsRes)
forall a. StaticPtr a -&gt; a
</span><span class="hs-identifier hs-var">deRefStaticPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Static 'User (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
forall fnTy. Static 'User fnTy -&gt; StaticPtr fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#userStaticPtr"><span class="hs-identifier hs-var">userStaticPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Static scope (Dict (Binary depsRes, Show depsRes, Eq depsRes))
Static 'User (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506325"><span class="hs-identifier hs-var">instsPtr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-859"></span><span>                </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-860"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: Static scope (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Static scope (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506325"><span class="hs-identifier hs-var">instsPtr</span></a></span><span>
</span><span id="line-861"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: CommandData scope arg (depsRes -&gt; IO ())
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommandData scope arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506329"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-862"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: DepsRes scope depsArg depsRes
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; DepsRes 'User depsArg depsRes
forall a. Binary a =&gt; ByteString -&gt; a
</span><span class="hs-identifier hs-var">Binary.decode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679506334"><span class="hs-identifier hs-var">depsResBinary</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DepsRes"><span class="hs-identifier hs-type">DepsRes</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506330"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506328"><span class="hs-identifier hs-type">depsRes</span></a></span><span>
</span><span id="line-863"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleTypeRep :: If (scope == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">If (scope == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506331"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-864"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-865"></span><span>          </span><span class="annot"><span class="annottext">SScope scope
</span><a href="Distribution.Simple.SetupHooks.Rule.html#SSystem"><span class="hs-identifier hs-var">SSystem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-866"></span><span>            </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-867"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: Static scope (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Static scope (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506325"><span class="hs-identifier hs-var">instsPtr</span></a></span><span>
</span><span id="line-868"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: CommandData scope arg (depsRes -&gt; IO ())
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommandData scope arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506329"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-869"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: DepsRes scope ByteString depsRes
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScopedArgument scope depsRes -&gt; DepsRes scope ByteString depsRes
forall {k} (scope :: Scope) (depsArg :: k) depsRes.
ScopedArgument scope depsRes -&gt; DepsRes scope depsArg depsRes
</span><a href="Distribution.Simple.SetupHooks.Rule.html#DepsRes"><span class="hs-identifier hs-var">DepsRes</span></a></span><span> </span><span class="annot"><span class="annottext">(ScopedArgument scope depsRes -&gt; DepsRes scope ByteString depsRes)
-&gt; ScopedArgument scope depsRes -&gt; DepsRes scope ByteString depsRes
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">depsRes -&gt; ScopedArgument scope depsRes
forall (scope :: Scope) arg. arg -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-var">ScopedArgument</span></a></span><span> </span><span class="annot"><span class="annottext">depsRes
ByteString
</span><a href="#local-6989586621679506334"><span class="hs-identifier hs-var">depsResBinary</span></a></span><span>
</span><span id="line-870"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleTypeRep :: If
  (scope == 'System) SomeTypeRep (TypeRep (ByteString, depsRes, arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">If (scope == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
If
  (scope == 'System) SomeTypeRep (TypeRep (ByteString, depsRes, arg))
</span><a href="#local-6989586621679506331"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-871"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-872"></span><span>
</span><span id="line-873"></span><span class="annot"><span class="hs-comment">-- | Obtain the 'IO' action that executes a rule.</span></span><span>
</span><span id="line-874"></span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#runRuleExecCmd"><span class="hs-identifier hs-type">runRuleExecCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleExecCmd"><span class="hs-identifier hs-type">RuleExecCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-875"></span><span id="runRuleExecCmd"><span class="annot"><span class="annottext">runRuleExecCmd :: RuleExecCmd 'User -&gt; IO ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#runRuleExecCmd"><span class="hs-identifier hs-var hs-var">runRuleExecCmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-876"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">staticRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506357"><span class="annot"><span class="annottext">CommandData 'User arg (IO ())
</span><a href="#local-6989586621679506357"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CommandData 'User arg (IO ()) -&gt; IO ()
forall args res. Command args res -&gt; res
</span><a href="Distribution.Simple.SetupHooks.Rule.html#runCommand"><span class="hs-identifier hs-var">runCommand</span></a></span><span> </span><span class="annot"><span class="annottext">CommandData 'User arg (IO ())
</span><a href="#local-6989586621679506357"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-877"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-878"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DepsRes"><span class="hs-identifier hs-type">DepsRes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ScopedArgument"><span class="hs-identifier hs-type">ScopedArgument</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">getArg :: forall (scope :: Scope) arg. ScopedArgument scope arg -&gt; arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#getArg"><span class="hs-identifier hs-var">getArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506359"><span class="annot"><span class="annottext">depsRes
</span><a href="#local-6989586621679506359"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-879"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506360"><span class="annot"><span class="annottext">CommandData 'User arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506360"><span class="hs-identifier hs-var">cmd</span></a></span></span><span>
</span><span id="line-880"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-881"></span><span>      </span><span class="annot"><span class="annottext">CommandData 'User arg (depsRes -&gt; IO ()) -&gt; depsRes -&gt; IO ()
forall args res. Command args res -&gt; res
</span><a href="Distribution.Simple.SetupHooks.Rule.html#runCommand"><span class="hs-identifier hs-var">runCommand</span></a></span><span> </span><span class="annot"><span class="annottext">CommandData 'User arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506360"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">depsRes
</span><a href="#local-6989586621679506359"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-882"></span><span>
</span><span id="line-883"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-884"></span><span class="hs-comment">-- Instances</span><span>
</span><span id="line-885"></span><span>
</span><span id="line-886"></span><span class="annot"><span class="hs-comment">-- | A wrapper used to pass evidence of a constraint as an explicit value.</span></span><span>
</span><span id="line-887"></span><span class="hs-keyword">data</span><span> </span><span id="Dict"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span></span><span> </span><span id="local-6989586621679506361"><span class="annot"><a href="#local-6989586621679506361"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-888"></span><span>  </span><span id="local-6989586621679506362"><span id="Dict"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679506362"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-type">Dict</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506362"><span class="hs-identifier hs-type">c</span></a></span></span><span>
</span><span id="line-889"></span><span>
</span><span id="line-890"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679506363"><span id="local-6989586621679506364"><span id="local-6989586621679506367"><span id="local-6989586621679506370"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506363"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506364"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-891"></span><span>  </span><span id="local-6989586621679506372"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; CommandData 'User arg res -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var">showsPrec</span></span></span><span> </span><span id="local-6989586621679506373"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679506373"><span class="hs-identifier hs-var">prec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">actionPtr :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; Static scope (arg -&gt; res)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionPtr"><span class="hs-identifier hs-var">actionPtr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506374"><span class="annot"><span class="annottext">Static 'User (arg -&gt; res)
</span><a href="#local-6989586621679506374"><span class="hs-identifier hs-var">cmdPtr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">actionArg :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionArg"><span class="hs-identifier hs-var">actionArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506375"><span class="annot"><span class="annottext">ScopedArgument 'User arg
</span><a href="#local-6989586621679506375"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cmdInstances :: forall (scope :: Scope) arg res.
CommandData scope arg res
-&gt; Static scope (Dict (Binary arg, Show arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#cmdInstances"><span class="hs-identifier hs-var">cmdInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506376"><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506376"><span class="hs-identifier hs-var">insts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Dict (Binary arg, Show arg)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary arg, Show arg))
-&gt; Dict (Binary arg, Show arg)
forall a. StaticPtr a -&gt; a
</span><span class="hs-identifier hs-var">deRefStaticPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
-&gt; StaticPtr (Dict (Binary arg, Show arg))
forall fnTy. Static 'User fnTy -&gt; StaticPtr fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#userStaticPtr"><span class="hs-identifier hs-var">userStaticPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506376"><span class="hs-identifier hs-var">insts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-893"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; ShowS -&gt; ShowS
</span><span class="hs-identifier hs-var">showParen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679506373"><span class="hs-identifier hs-var">prec</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ShowS -&gt; ShowS) -&gt; ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-894"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Command {&quot;</span></span><span>
</span><span id="line-895"></span><span>            </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;actionPtrKey = &quot;</span></span><span>
</span><span id="line-896"></span><span>            </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Static 'User (arg -&gt; res) -&gt; ShowS
forall a. Show a =&gt; a -&gt; ShowS
</span><span class="hs-identifier hs-var">shows</span></span><span> </span><span class="annot"><span class="annottext">Static 'User (arg -&gt; res)
</span><a href="#local-6989586621679506374"><span class="hs-identifier hs-var">cmdPtr</span></a></span><span>
</span><span id="line-897"></span><span>            </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">showCommaSpace</span></span><span>
</span><span id="line-898"></span><span>            </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;actionArg = &quot;</span></span><span>
</span><span id="line-899"></span><span>            </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'User arg -&gt; ShowS
forall a. Show a =&gt; a -&gt; ShowS
</span><span class="hs-identifier hs-var">shows</span></span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'User arg
</span><a href="#local-6989586621679506375"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-900"></span><span>            </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-901"></span><span>
</span><span id="line-902"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679506384"><span id="local-6989586621679506385"><span id="local-6989586621679506388"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506384"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506385"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-903"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">actionPtr :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; Static scope (arg -&gt; res)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionPtr"><span class="hs-identifier hs-var">actionPtr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506392"><span class="annot"><span class="annottext">Static 'User (arg -&gt; res)
</span><a href="#local-6989586621679506392"><span class="hs-identifier hs-var">cmdPtr1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">actionArg :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionArg"><span class="hs-identifier hs-var">actionArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506393"><span class="annot"><span class="annottext">ScopedArgument 'User arg
</span><a href="#local-6989586621679506393"><span class="hs-identifier hs-var">arg1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cmdInstances :: forall (scope :: Scope) arg res.
CommandData scope arg res
-&gt; Static scope (Dict (Binary arg, Show arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#cmdInstances"><span class="hs-identifier hs-var">cmdInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506394"><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506394"><span class="hs-identifier hs-var">insts1</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-904"></span><span>    </span><span id="local-6989586621679506395"><span class="annot"><span class="annottext">== :: CommandData 'User arg res -&gt; CommandData 'User arg res -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">actionPtr :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; Static scope (arg -&gt; res)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionPtr"><span class="hs-identifier hs-var">actionPtr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506396"><span class="annot"><span class="annottext">Static 'User (arg -&gt; res)
</span><a href="#local-6989586621679506396"><span class="hs-identifier hs-var">cmdPtr2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">actionArg :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionArg"><span class="hs-identifier hs-var">actionArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506397"><span class="annot"><span class="annottext">ScopedArgument 'User arg
</span><a href="#local-6989586621679506397"><span class="hs-identifier hs-var">arg2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cmdInstances :: forall (scope :: Scope) arg res.
CommandData scope arg res
-&gt; Static scope (Dict (Binary arg, Show arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#cmdInstances"><span class="hs-identifier hs-var">cmdInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506398"><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506398"><span class="hs-identifier hs-var">insts2</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-905"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Static 'User (arg -&gt; res)
</span><a href="#local-6989586621679506392"><span class="hs-identifier hs-var">cmdPtr1</span></a></span><span> </span><span class="annot"><span class="annottext">Static 'User (arg -&gt; res) -&gt; Static 'User (arg -&gt; res) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Static 'User (arg -&gt; res)
</span><a href="#local-6989586621679506396"><span class="hs-identifier hs-var">cmdPtr2</span></a></span><span>
</span><span id="line-906"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506394"><span class="hs-identifier hs-var">insts1</span></a></span><span> </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
-&gt; Static 'User (Dict (Binary arg, Show arg)) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506398"><span class="hs-identifier hs-var">insts2</span></a></span><span>
</span><span id="line-907"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dict (Binary arg, Show arg)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary arg, Show arg))
-&gt; Dict (Binary arg, Show arg)
forall a. StaticPtr a -&gt; a
</span><span class="hs-identifier hs-var">deRefStaticPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
-&gt; StaticPtr (Dict (Binary arg, Show arg))
forall fnTy. Static 'User fnTy -&gt; StaticPtr fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#userStaticPtr"><span class="hs-identifier hs-var">userStaticPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506394"><span class="hs-identifier hs-var">insts1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-908"></span><span>          </span><span class="annot"><span class="annottext">ScopedArgument 'User arg -&gt; ByteString
forall a. Binary a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">Binary.encode</span></span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'User arg
</span><a href="#local-6989586621679506393"><span class="hs-identifier hs-var">arg1</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'User arg -&gt; ByteString
forall a. Binary a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">Binary.encode</span></span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'User arg
</span><a href="#local-6989586621679506397"><span class="hs-identifier hs-var">arg2</span></a></span><span>
</span><span id="line-909"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-910"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-911"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504441"><span id="local-6989586621679504442"><span id="local-6989586621679506408"><span class="annot"><a href="#local-6989586621679504441"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504441"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504442"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-912"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span> </span><span id="local-6989586621679506420"><span class="annot"><span class="annottext">Static 'System (arg -&gt; res)
</span><a href="#local-6989586621679506420"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621679506421"><span class="annot"><span class="annottext">ScopedArgument 'System arg
</span><a href="#local-6989586621679506421"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621679506422"><span class="annot"><span class="annottext">Static 'System (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506422"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621679506423"><span class="annot"><span class="annottext">== :: CommandData 'System arg res -&gt; CommandData 'System arg res -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span> </span><span id="local-6989586621679506424"><span class="annot"><span class="annottext">Static 'System (arg -&gt; res)
</span><a href="#local-6989586621679506424"><span class="hs-identifier hs-var">a2</span></a></span></span><span> </span><span id="local-6989586621679506425"><span class="annot"><span class="annottext">ScopedArgument 'System arg
</span><a href="#local-6989586621679506425"><span class="hs-identifier hs-var">b2</span></a></span></span><span> </span><span id="local-6989586621679506426"><span class="annot"><span class="annottext">Static 'System (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506426"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-913"></span><span>    </span><span class="annot"><span class="annottext">Static 'System (arg -&gt; res)
</span><a href="#local-6989586621679506420"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">Static 'System (arg -&gt; res) -&gt; Static 'System (arg -&gt; res) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Static 'System (arg -&gt; res)
</span><a href="#local-6989586621679506424"><span class="hs-identifier hs-var">a2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'System arg
</span><a href="#local-6989586621679506421"><span class="hs-identifier hs-var">b1</span></a></span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'System arg -&gt; ScopedArgument 'System arg -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'System arg
</span><a href="#local-6989586621679506425"><span class="hs-identifier hs-var">b2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Static 'System (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506422"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Static 'System (Dict (Binary arg, Show arg))
-&gt; Static 'System (Dict (Binary arg, Show arg)) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Static 'System (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506426"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-914"></span><span>
</span><span id="line-915"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679506427"><span id="local-6989586621679506428"><span id="local-6989586621679506432"><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506427"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506428"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-916"></span><span>  </span><span id="local-6989586621679506434"><span class="annot"><span class="annottext">put :: CommandData 'User arg res -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var">put</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">actionPtr :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; Static scope (arg -&gt; res)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionPtr"><span class="hs-identifier hs-var">actionPtr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506435"><span class="annot"><span class="annottext">Static 'User (arg -&gt; res)
</span><a href="#local-6989586621679506435"><span class="hs-identifier hs-var">cmdPtr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">actionArg :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionArg"><span class="hs-identifier hs-var">actionArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506436"><span class="annot"><span class="annottext">ScopedArgument 'User arg
</span><a href="#local-6989586621679506436"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cmdInstances :: forall (scope :: Scope) arg res.
CommandData scope arg res
-&gt; Static scope (Dict (Binary arg, Show arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#cmdInstances"><span class="hs-identifier hs-var">cmdInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506437"><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506437"><span class="hs-identifier hs-var">insts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-917"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Dict (Binary arg, Show arg)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary arg, Show arg))
-&gt; Dict (Binary arg, Show arg)
forall a. StaticPtr a -&gt; a
</span><span class="hs-identifier hs-var">deRefStaticPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
-&gt; StaticPtr (Dict (Binary arg, Show arg))
forall fnTy. Static 'User fnTy -&gt; StaticPtr fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#userStaticPtr"><span class="hs-identifier hs-var">userStaticPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506437"><span class="hs-identifier hs-var">insts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-918"></span><span>        </span><span class="hs-keyword">do</span><span>
</span><span id="line-919"></span><span>          </span><span class="annot"><span class="annottext">Static 'User (arg -&gt; res) -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">Static 'User (arg -&gt; res)
</span><a href="#local-6989586621679506435"><span class="hs-identifier hs-var">cmdPtr</span></a></span><span>
</span><span id="line-920"></span><span>          </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg)) -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506437"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-921"></span><span>          </span><span class="annot"><span class="annottext">ScopedArgument 'User arg -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'User arg
</span><a href="#local-6989586621679506436"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-922"></span><span>  </span><span id="local-6989586621679506450"><span class="annot"><span class="annottext">get :: Get (CommandData 'User arg res)
</span><span class="hs-identifier hs-var hs-var hs-var">get</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-923"></span><span>    </span><span id="local-6989586621679506451"><span class="annot"><a href="#local-6989586621679506451"><span class="hs-identifier hs-var">cmdPtr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get (Static 'User (arg -&gt; res))
forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-924"></span><span>    </span><span id="local-6989586621679506452"><span class="annot"><a href="#local-6989586621679506452"><span class="hs-identifier hs-var">instsPtr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">get</span></span><span>
</span><span id="line-925"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">deRefStaticPtr</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-type">Dict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="#local-6989586621679506427"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679506427"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#userStaticPtr"><span class="hs-identifier hs-var">userStaticPtr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506452"><span class="hs-identifier hs-type">instsPtr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-926"></span><span>      </span><span class="annot"><span class="annottext">Dict (Binary arg, Show arg)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-927"></span><span>        </span><span id="local-6989586621679506458"><span class="annot"><a href="#local-6989586621679506458"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get (ScopedArgument 'User arg)
forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-928"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-929"></span><span>          </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span>
</span><span id="line-930"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#actionPtr"><span class="hs-identifier hs-var">actionPtr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506451"><span class="hs-identifier hs-type">cmdPtr</span></a></span><span>
</span><span id="line-931"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#actionArg"><span class="hs-identifier hs-var">actionArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506458"><span class="hs-identifier hs-type">arg</span></a></span><span>
</span><span id="line-932"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#cmdInstances"><span class="hs-identifier hs-var">cmdInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506452"><span class="hs-identifier hs-type">instsPtr</span></a></span><span>
</span><span id="line-933"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-934"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679504445"><span id="local-6989586621679504446"><span id="local-6989586621679506463"><span class="annot"><a href="#local-6989586621679504445"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#CommandData"><span class="hs-identifier hs-type">CommandData</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504445"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504446"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-935"></span><span>  </span><span id="local-6989586621679506477"><span class="annot"><span class="annottext">put :: CommandData 'System arg res -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var">put</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">actionPtr :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; Static scope (arg -&gt; res)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionPtr"><span class="hs-identifier hs-var">actionPtr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506478"><span class="annot"><span class="annottext">Static 'System (arg -&gt; res)
</span><a href="#local-6989586621679506478"><span class="hs-identifier hs-var">cmdPtr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">actionArg :: forall (scope :: Scope) arg res.
CommandData scope arg res -&gt; ScopedArgument scope arg
</span><a href="Distribution.Simple.SetupHooks.Rule.html#actionArg"><span class="hs-identifier hs-var">actionArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506479"><span class="annot"><span class="annottext">ScopedArgument 'System arg
</span><a href="#local-6989586621679506479"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cmdInstances :: forall (scope :: Scope) arg res.
CommandData scope arg res
-&gt; Static scope (Dict (Binary arg, Show arg))
</span><a href="Distribution.Simple.SetupHooks.Rule.html#cmdInstances"><span class="hs-identifier hs-var">cmdInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506480"><span class="annot"><span class="annottext">Static 'System (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506480"><span class="hs-identifier hs-var">insts</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-936"></span><span>    </span><span class="hs-keyword">do</span><span>
</span><span id="line-937"></span><span>      </span><span class="annot"><span class="annottext">Static 'System (arg -&gt; res) -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">Static 'System (arg -&gt; res)
</span><a href="#local-6989586621679506478"><span class="hs-identifier hs-var">cmdPtr</span></a></span><span>
</span><span id="line-938"></span><span>      </span><span class="annot"><span class="annottext">Static 'System (Dict (Binary arg, Show arg)) -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">Static 'System (Dict (Binary arg, Show arg))
</span><a href="#local-6989586621679506480"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-939"></span><span>      </span><span class="annot"><span class="annottext">ScopedArgument 'System arg -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">ScopedArgument 'System arg
</span><a href="#local-6989586621679506479"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-940"></span><span>  </span><span id="local-6989586621679506492"><span class="annot"><span class="annottext">get :: Get (CommandData 'System arg res)
</span><span class="hs-identifier hs-var hs-var hs-var">get</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-941"></span><span>    </span><span id="local-6989586621679506493"><span class="annot"><a href="#local-6989586621679506493"><span class="hs-identifier hs-var">cmdKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get (Static 'System (arg -&gt; res))
forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-942"></span><span>    </span><span id="local-6989586621679506494"><span class="annot"><a href="#local-6989586621679506494"><span class="hs-identifier hs-var">instsKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">get</span></span><span>
</span><span id="line-943"></span><span>    </span><span id="local-6989586621679506495"><span class="annot"><a href="#local-6989586621679506495"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">get</span></span><span>
</span><span id="line-944"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span class="hs-special">{</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#actionPtr"><span class="hs-identifier hs-var">actionPtr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506493"><span class="hs-identifier hs-type">cmdKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#actionArg"><span class="hs-identifier hs-var">actionArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506495"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#cmdInstances"><span class="hs-identifier hs-var">cmdInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506494"><span class="hs-identifier hs-type">instsKey</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-945"></span><span>
</span><span id="line-946"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-947"></span><span>  </span><span id="local-6989586621679504018"><span id="local-6989586621679504019"><span id="local-6989586621679506500"><span id="local-6989586621679506505"><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504010"><span class="annot"><a href="#local-6989586621679504010"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span id="local-6989586621679504011"><span class="annot"><a href="#local-6989586621679504011"><span class="hs-identifier hs-type">res</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504018"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504010"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504011"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-948"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504014"><span class="annot"><a href="#local-6989586621679504014"><span class="hs-identifier hs-type">depsArg</span></a></span></span><span> </span><span id="local-6989586621679504013"><span class="annot"><a href="#local-6989586621679504013"><span class="hs-identifier hs-type">depsRes</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679504013"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504019"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504014"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504013"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-949"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-950"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-type">RuleCommands</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504019"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504018"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-951"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-952"></span><span>  </span><span id="local-6989586621679506509"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; RuleCommands 'User deps ruleCmd -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var">showsPrec</span></span></span><span> </span><span id="local-6989586621679506510"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679506510"><span class="hs-identifier hs-var">prec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">staticRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506515"><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ())
</span><a href="#local-6989586621679506515"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-953"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; ShowS -&gt; ShowS
</span><span class="hs-identifier hs-var">showParen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679506510"><span class="hs-identifier hs-var">prec</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ShowS -&gt; ShowS) -&gt; ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-954"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;StaticRuleCommand {&quot;</span></span><span>
</span><span id="line-955"></span><span>        </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;staticRuleCommand = &quot;</span></span><span>
</span><span id="line-956"></span><span>        </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ()) -&gt; ShowS
forall a. Show a =&gt; a -&gt; ShowS
</span><span class="hs-identifier hs-var">shows</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ())
</span><a href="#local-6989586621679506515"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-957"></span><span>        </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-958"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">showsPrec</span></span><span>
</span><span id="line-959"></span><span>    </span><span id="local-6989586621679506516"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679506516"><span class="hs-identifier hs-var">prec</span></a></span></span><span>
</span><span id="line-960"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-961"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506518"><span class="annot"><span class="annottext">deps 'User depsArg depsRes
</span><a href="#local-6989586621679506518"><span class="hs-identifier hs-var">deps</span></a></span></span><span>
</span><span id="line-962"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506519"><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506519"><span class="hs-identifier hs-var">cmd</span></a></span></span><span>
</span><span id="line-963"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-type">UserStatic</span></a></span><span> </span><span id="local-6989586621679506520"><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506520"><span class="hs-identifier hs-var">instsPtr</span></a></span></span><span>
</span><span id="line-964"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-965"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-966"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Dict (Binary depsRes, Show depsRes, Eq depsRes)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Dict (Binary depsRes, Show depsRes, Eq depsRes)
forall a. StaticPtr a -&gt; a
</span><span class="hs-identifier hs-var">deRefStaticPtr</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506520"><span class="hs-identifier hs-var">instsPtr</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-967"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; ShowS -&gt; ShowS
</span><span class="hs-identifier hs-var">showParen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679506516"><span class="hs-identifier hs-var">prec</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ShowS -&gt; ShowS) -&gt; ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-968"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DynamicRuleCommands {&quot;</span></span><span>
</span><span id="line-969"></span><span>              </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dynamicDeps = &quot;</span></span><span>
</span><span id="line-970"></span><span>              </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">deps 'User depsArg depsRes -&gt; ShowS
forall a. Show a =&gt; a -&gt; ShowS
</span><span class="hs-identifier hs-var">shows</span></span><span> </span><span class="annot"><span class="annottext">deps 'User depsArg depsRes
</span><a href="#local-6989586621679506518"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-971"></span><span>              </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">showCommaSpace</span></span><span>
</span><span id="line-972"></span><span>              </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dynamicRuleCommand = &quot;</span></span><span>
</span><span id="line-973"></span><span>              </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ()) -&gt; ShowS
forall a. Show a =&gt; a -&gt; ShowS
</span><span class="hs-identifier hs-var">shows</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506519"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-974"></span><span>              </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-975"></span><span>
</span><span id="line-976"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-977"></span><span>  </span><span id="local-6989586621679504027"><span id="local-6989586621679504028"><span id="local-6989586621679506531"><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504021"><span class="annot"><a href="#local-6989586621679504021"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span id="local-6989586621679504022"><span class="annot"><a href="#local-6989586621679504022"><span class="hs-identifier hs-type">res</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504027"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504021"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504022"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-978"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504024"><span class="annot"><a href="#local-6989586621679504024"><span class="hs-identifier hs-type">depsArg</span></a></span></span><span> </span><span id="local-6989586621679504023"><span class="annot"><a href="#local-6989586621679504023"><span class="hs-identifier hs-type">depsRes</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679504023"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504028"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504024"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504023"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-979"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-980"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-type">RuleCommands</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504028"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504027"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-981"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-982"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">staticRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506536"><span id="local-6989586621679506537"><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ())
</span><a href="#local-6989586621679506537"><span class="hs-identifier hs-var">ruleCmd1</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504027"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506536"><span class="hs-identifier hs-type">arg1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticRuleArgRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506538"><span class="annot"><span class="annottext">If ('User == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506538"><span class="hs-identifier hs-var">tr1</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-983"></span><span>    </span><span id="local-6989586621679506539"><span class="annot"><span class="annottext">== :: RuleCommands 'User deps ruleCmd
-&gt; RuleCommands 'User deps ruleCmd -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">staticRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506541"><span id="local-6989586621679506542"><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ())
</span><a href="#local-6989586621679506542"><span class="hs-identifier hs-var">ruleCmd2</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504027"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506541"><span class="hs-identifier hs-type">arg2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticRuleArgRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506543"><span class="annot"><span class="annottext">If ('User == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506543"><span class="hs-identifier hs-var">tr2</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-984"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">arg :~~: arg
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeRep arg -&gt; TypeRep arg -&gt; Maybe (arg :~~: arg)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-identifier hs-var">Typeable.eqTypeRep</span></span><span> </span><span class="annot"><span class="annottext">TypeRep arg
If ('User == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506538"><span class="hs-identifier hs-var">tr1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep arg
If ('User == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506543"><span class="hs-identifier hs-var">tr2</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-985"></span><span>          </span><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ())
</span><a href="#local-6989586621679506537"><span class="hs-identifier hs-var">ruleCmd1</span></a></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ()) -&gt; ruleCmd 'User arg (IO ()) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ())
ruleCmd 'User arg (IO ())
</span><a href="#local-6989586621679506542"><span class="hs-identifier hs-var">ruleCmd2</span></a></span><span>
</span><span id="line-986"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-987"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506548"><span id="local-6989586621679506549"><span id="local-6989586621679506550"><span class="annot"><span class="annottext">deps 'User depsArg depsRes
</span><a href="#local-6989586621679506550"><span class="hs-identifier hs-var">depsCmd1</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504028"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506548"><span class="hs-identifier hs-type">depsArg1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506549"><span class="hs-identifier hs-type">depsRes1</span></a></span></span></span><span>
</span><span id="line-988"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506551"><span id="local-6989586621679506552"><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506552"><span class="hs-identifier hs-var">ruleCmd1</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504027"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506551"><span class="hs-identifier hs-type">arg1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679506549"><span class="hs-identifier hs-type">depsRes1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-989"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-type">UserStatic</span></a></span><span> </span><span id="local-6989586621679506553"><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506553"><span class="hs-identifier hs-var">instsPtr1</span></a></span></span><span>
</span><span id="line-990"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleTypeRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506554"><span class="annot"><span class="annottext">If ('User == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506554"><span class="hs-identifier hs-var">tr1</span></a></span></span><span>
</span><span id="line-991"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-992"></span><span>    </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-993"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506556"><span id="local-6989586621679506557"><span id="local-6989586621679506558"><span class="annot"><span class="annottext">deps 'User depsArg depsRes
</span><a href="#local-6989586621679506558"><span class="hs-identifier hs-var">depsCmd2</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504028"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506556"><span class="hs-identifier hs-type">depsArg2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506557"><span class="hs-identifier hs-type">depsRes2</span></a></span></span></span><span>
</span><span id="line-994"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506559"><span id="local-6989586621679506560"><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506560"><span class="hs-identifier hs-var">ruleCmd2</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504027"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506559"><span class="hs-identifier hs-type">arg2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679506557"><span class="hs-identifier hs-type">depsRes2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-995"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#UserStatic"><span class="hs-identifier hs-type">UserStatic</span></a></span><span> </span><span id="local-6989586621679506561"><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506561"><span class="hs-identifier hs-var">instsPtr2</span></a></span></span><span>
</span><span id="line-996"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleTypeRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506562"><span class="annot"><span class="annottext">If ('User == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506562"><span class="hs-identifier hs-var">tr2</span></a></span></span><span>
</span><span id="line-997"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-998"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">(depsArg, depsRes, arg) :~~: (depsArg, depsRes, arg)
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeRep (depsArg, depsRes, arg)
-&gt; TypeRep (depsArg, depsRes, arg)
-&gt; Maybe ((depsArg, depsRes, arg) :~~: (depsArg, depsRes, arg))
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-identifier hs-var">Typeable.eqTypeRep</span></span><span> </span><span class="annot"><span class="annottext">TypeRep (depsArg, depsRes, arg)
If ('User == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506554"><span class="hs-identifier hs-var">tr1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep (depsArg, depsRes, arg)
If ('User == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506562"><span class="hs-identifier hs-var">tr2</span></a></span><span>
</span><span id="line-999"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Dict (Binary depsRes, Show depsRes, Eq depsRes)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Dict (Binary depsRes, Show depsRes, Eq depsRes)
forall a. StaticPtr a -&gt; a
</span><span class="hs-identifier hs-var">deRefStaticPtr</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506553"><span class="hs-identifier hs-var">instsPtr1</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1000"></span><span>          </span><span class="annot"><span class="annottext">deps 'User depsArg depsRes
</span><a href="#local-6989586621679506550"><span class="hs-identifier hs-var">depsCmd1</span></a></span><span> </span><span class="annot"><span class="annottext">deps 'User depsArg depsRes -&gt; deps 'User depsArg depsRes -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">deps 'User depsArg depsRes
deps 'User depsArg depsRes
</span><a href="#local-6989586621679506558"><span class="hs-identifier hs-var">depsCmd2</span></a></span><span>
</span><span id="line-1001"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506552"><span class="hs-identifier hs-var">ruleCmd1</span></a></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ())
-&gt; ruleCmd 'User arg (depsRes -&gt; IO ()) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ())
ruleCmd 'User arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506560"><span class="hs-identifier hs-var">ruleCmd2</span></a></span><span>
</span><span id="line-1002"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes)) -&gt; MD5
forall a. StaticPtr a -&gt; MD5
</span><span class="hs-identifier hs-var">staticKey</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506553"><span class="hs-identifier hs-var">instsPtr1</span></a></span><span> </span><span class="annot"><span class="annottext">MD5 -&gt; MD5 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes)) -&gt; MD5
forall a. StaticPtr a -&gt; MD5
</span><span class="hs-identifier hs-var">staticKey</span></span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506561"><span class="hs-identifier hs-var">instsPtr2</span></a></span><span>
</span><span id="line-1003"></span><span>  </span><span class="annot"><span class="annottext">RuleCommands 'User deps ruleCmd
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RuleCommands 'User deps ruleCmd
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1004"></span><span>
</span><span id="line-1005"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-1006"></span><span>  </span><span id="local-6989586621679504032"><span id="local-6989586621679504033"><span id="local-6989586621679506577"><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504031"><span class="annot"><a href="#local-6989586621679504031"><span class="hs-identifier hs-type">res</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504032"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504031"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1007"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504033"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1008"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-1009"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-type">RuleCommands</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504033"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504032"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1010"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1011"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span> </span><span id="local-6989586621679506583"><span class="annot"><span class="annottext">ruleCmd 'System arg (IO ())
</span><a href="#local-6989586621679506583"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621679506584"><span class="annot"><span class="annottext">If ('System == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506584"><span class="hs-identifier hs-var">d1</span></a></span></span><span> </span><span id="local-6989586621679506585"><span class="annot"><span class="annottext">== :: RuleCommands 'System deps ruleCmd
-&gt; RuleCommands 'System deps ruleCmd -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span> </span><span id="local-6989586621679506593"><span class="annot"><span class="annottext">ruleCmd 'System arg (IO ())
</span><a href="#local-6989586621679506593"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span id="local-6989586621679506594"><span class="annot"><span class="annottext">If ('System == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506594"><span class="hs-identifier hs-var">d2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ruleCmd 'System arg (IO ())
</span><a href="#local-6989586621679506583"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'System arg (IO ()) -&gt; ruleCmd 'System arg (IO ()) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'System arg (IO ())
ruleCmd 'System arg (IO ())
</span><a href="#local-6989586621679506593"><span class="hs-identifier hs-var">c2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">SomeTypeRep
If ('System == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506584"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; SomeTypeRep -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SomeTypeRep
If ('System == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506594"><span class="hs-identifier hs-var">d2</span></a></span><span>
</span><span id="line-1012"></span><span>  </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span> </span><span id="local-6989586621679506603"><span class="annot"><span class="annottext">Static 'System (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506603"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621679506604"><span class="annot"><span class="annottext">deps 'System depsArg depsRes
</span><a href="#local-6989586621679506604"><span class="hs-identifier hs-var">b1</span></a></span></span><span> </span><span id="local-6989586621679506605"><span class="annot"><span class="annottext">ruleCmd 'System arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506605"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621679506606"><span class="annot"><span class="annottext">If
  ('System == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506606"><span class="hs-identifier hs-var">d1</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span> </span><span id="local-6989586621679506621"><span class="annot"><span class="annottext">Static 'System (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506621"><span class="hs-identifier hs-var">a2</span></a></span></span><span> </span><span id="local-6989586621679506622"><span class="annot"><span class="annottext">deps 'System depsArg depsRes
</span><a href="#local-6989586621679506622"><span class="hs-identifier hs-var">b2</span></a></span></span><span> </span><span id="local-6989586621679506623"><span class="annot"><span class="annottext">ruleCmd 'System arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506623"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span id="local-6989586621679506624"><span class="annot"><span class="annottext">If
  ('System == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506624"><span class="hs-identifier hs-var">d2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1013"></span><span>    </span><span class="annot"><span class="annottext">Static 'System (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506603"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">Static 'System (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Static 'System (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Static 'System (Dict (Binary depsRes, Show depsRes, Eq depsRes))
Static 'System (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506621"><span class="hs-identifier hs-var">a2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">deps 'System depsArg depsRes
</span><a href="#local-6989586621679506604"><span class="hs-identifier hs-var">b1</span></a></span><span> </span><span class="annot"><span class="annottext">deps 'System depsArg depsRes
-&gt; deps 'System depsArg depsRes -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">deps 'System depsArg depsRes
deps 'System depsArg depsRes
</span><a href="#local-6989586621679506622"><span class="hs-identifier hs-var">b2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'System arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506605"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'System arg (depsRes -&gt; IO ())
-&gt; ruleCmd 'System arg (depsRes -&gt; IO ()) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'System arg (depsRes -&gt; IO ())
ruleCmd 'System arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506623"><span class="hs-identifier hs-var">c2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">SomeTypeRep
If
  ('System == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506606"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; SomeTypeRep -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SomeTypeRep
If
  ('System == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506624"><span class="hs-identifier hs-var">d2</span></a></span><span>
</span><span id="line-1014"></span><span>  </span><span class="annot"><span class="annottext">RuleCommands 'System deps ruleCmd
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RuleCommands 'System deps ruleCmd
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1015"></span><span>
</span><span id="line-1016"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-1017"></span><span>  </span><span id="local-6989586621679504042"><span id="local-6989586621679504043"><span id="local-6989586621679506630"><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504036"><span class="annot"><a href="#local-6989586621679504036"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span id="local-6989586621679504037"><span class="annot"><a href="#local-6989586621679504037"><span class="hs-identifier hs-type">res</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504042"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504036"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504037"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1018"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504039"><span class="annot"><a href="#local-6989586621679504039"><span class="hs-identifier hs-type">depsArg</span></a></span></span><span> </span><span id="local-6989586621679504038"><span class="annot"><a href="#local-6989586621679504038"><span class="hs-identifier hs-type">depsRes</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="#local-6989586621679504038"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504043"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504039"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504038"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1019"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-1020"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-type">RuleCommands</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504043"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504042"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1021"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1022"></span><span>  </span><span id="local-6989586621679506634"><span class="annot"><span class="annottext">put :: RuleCommands 'User deps ruleCmd -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var">put</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1023"></span><span>    </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span>
</span><span id="line-1024"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">staticRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506642"><span id="local-6989586621679506643"><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ())
</span><a href="#local-6989586621679506643"><span class="hs-identifier hs-var">ruleCmd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504042"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506642"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1025"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticRuleArgRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506644"><span class="annot"><span class="annottext">If ('User == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506644"><span class="hs-identifier hs-var">tr</span></a></span></span><span>
</span><span id="line-1026"></span><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1027"></span><span>        </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1028"></span><span>        </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep arg -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">Typeable.SomeTypeRep</span></span><span> </span><span class="annot"><span class="annottext">TypeRep arg
If ('User == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506644"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1029"></span><span>        </span><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ()) -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (IO ())
</span><a href="#local-6989586621679506643"><span class="hs-identifier hs-var">ruleCmd</span></a></span><span>
</span><span id="line-1030"></span><span>    </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-1031"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506646"><span id="local-6989586621679506647"><span id="local-6989586621679506648"><span class="annot"><span class="annottext">deps 'User depsArg depsRes
</span><a href="#local-6989586621679506648"><span class="hs-identifier hs-var">deps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504043"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506646"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506647"><span class="hs-identifier hs-type">depsRes</span></a></span></span></span><span>
</span><span id="line-1032"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506649"><span id="local-6989586621679506650"><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506650"><span class="hs-identifier hs-var">ruleCmd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679504042"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506649"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679506647"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1033"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506651"><span class="annot"><span class="annottext">Static 'User (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506651"><span class="hs-identifier hs-var">instsPtr</span></a></span></span><span>
</span><span id="line-1034"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleTypeRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506652"><span class="annot"><span class="annottext">If ('User == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506652"><span class="hs-identifier hs-var">tr</span></a></span></span><span>
</span><span id="line-1035"></span><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Dict (Binary depsRes, Show depsRes, Eq depsRes)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Dict (Binary depsRes, Show depsRes, Eq depsRes)
forall a. StaticPtr a -&gt; a
</span><span class="hs-identifier hs-var">deRefStaticPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Static 'User (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; StaticPtr (Dict (Binary depsRes, Show depsRes, Eq depsRes))
forall fnTy. Static 'User fnTy -&gt; StaticPtr fnTy
</span><a href="Distribution.Simple.SetupHooks.Rule.html#userStaticPtr"><span class="hs-identifier hs-var">userStaticPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506651"><span class="hs-identifier hs-var">instsPtr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1036"></span><span>        </span><span class="hs-keyword">do</span><span>
</span><span id="line-1037"></span><span>          </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1038"></span><span>          </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep (depsArg, depsRes, arg) -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">Typeable.SomeTypeRep</span></span><span> </span><span class="annot"><span class="annottext">TypeRep (depsArg, depsRes, arg)
If ('User == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506652"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1039"></span><span>          </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">Static 'User (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506651"><span class="hs-identifier hs-var">instsPtr</span></a></span><span>
</span><span id="line-1040"></span><span>          </span><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ()) -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'User arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506650"><span class="hs-identifier hs-var">ruleCmd</span></a></span><span>
</span><span id="line-1041"></span><span>          </span><span class="annot"><span class="annottext">deps 'User depsArg depsRes -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">deps 'User depsArg depsRes
</span><a href="#local-6989586621679506648"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-1042"></span><span>  </span><span id="local-6989586621679506673"><span class="annot"><span class="annottext">get :: Get (RuleCommands 'User deps ruleCmd)
</span><span class="hs-identifier hs-var hs-var hs-var">get</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1043"></span><span>    </span><span id="local-6989586621679506674"><span class="annot"><a href="#local-6989586621679506674"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span>
</span><span id="line-1044"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621679506674"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1045"></span><span>      </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1046"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Typeable.SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679506683"><span class="annot"><a href="#local-6989586621679506683"><span class="hs-identifier hs-var">trArg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier">Typeable.TypeRep</span></span><span> </span><span class="annot"><span class="hs-identifier">arg</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get SomeTypeRep
forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-1047"></span><span>        </span><span class="hs-keyword">if</span><span>
</span><span id="line-1048"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HRefl</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable.eqTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable.typeRepKind</span></span><span> </span><span class="annot"><a href="#local-6989586621679506683"><span class="hs-identifier hs-type">trArg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable.typeRep</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Hs.Type</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1049"></span><span>                </span><span class="hs-keyword">do</span><span>
</span><span id="line-1050"></span><span>                  </span><span id="local-6989586621679506690"><span class="annot"><a href="#local-6989586621679506690"><span class="hs-identifier hs-var">ruleCmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">get</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504042"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506682"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1051"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1052"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Typeable.withTypeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679506683"><span class="hs-identifier hs-type">trArg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1053"></span><span>                      </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span>
</span><span id="line-1054"></span><span>                        </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506690"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span>
</span><span id="line-1055"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506683"><span class="hs-identifier hs-type">trArg</span></a></span><span>
</span><span id="line-1056"></span><span>                        </span><span class="hs-special">}</span><span>
</span><span id="line-1057"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1058"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">error</span></span><span> </span><span class="annot"><span class="hs-string">&quot;internal error when decoding static rule command&quot;</span></span><span>
</span><span id="line-1059"></span><span>      </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1060"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Typeable.SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679506700"><span class="annot"><a href="#local-6989586621679506700"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier">Typeable.TypeRep</span></span><span> </span><span class="annot"><span class="hs-identifier">ty</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get SomeTypeRep
forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-1061"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621679506700"><span class="hs-identifier hs-type">tr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1062"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Typeable.App</span></span><span>
</span><span id="line-1063"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable.App</span></span><span>
</span><span id="line-1064"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable.App</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679506708"><span id="local-6989586621679506709"><span class="annot"><span class="annottext">TypeRep a
</span><a href="#local-6989586621679506709"><span class="hs-identifier hs-var">tup3Tr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable.TypeRep</span></span><span> </span><span class="annot"><a href="#local-6989586621679506708"><span class="hs-identifier hs-type">tup3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679506710"><span id="local-6989586621679506711"><span class="annot"><span class="annottext">TypeRep b
</span><a href="#local-6989586621679506711"><span class="hs-identifier hs-var">trDepsArg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable.TypeRep</span></span><span> </span><span class="annot"><a href="#local-6989586621679506710"><span class="hs-identifier hs-type">depsArg</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1065"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621679506712"><span id="local-6989586621679506713"><span class="annot"><span class="annottext">TypeRep b
</span><a href="#local-6989586621679506713"><span class="hs-identifier hs-var">trDepsRes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable.TypeRep</span></span><span> </span><span class="annot"><a href="#local-6989586621679506712"><span class="hs-identifier hs-type">depsRes</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1066"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-1067"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679506714"><span id="local-6989586621679506715"><span class="annot"><span class="annottext">TypeRep b
</span><a href="#local-6989586621679506715"><span class="hs-identifier hs-var">trArg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable.TypeRep</span></span><span> </span><span class="annot"><a href="#local-6989586621679506714"><span class="hs-identifier hs-type">arg</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1068"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">a :~~: (,,)
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeRep a -&gt; TypeRep (,,) -&gt; Maybe (a :~~: (,,))
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-identifier hs-var">Typeable.eqTypeRep</span></span><span> </span><span class="annot"><span class="annottext">TypeRep a
</span><a href="#local-6989586621679506709"><span class="hs-identifier hs-var">tup3Tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (a :: k). Typeable a =&gt; TypeRep a
forall (a :: * -&gt; * -&gt; * -&gt; *). Typeable a =&gt; TypeRep a
</span><span class="hs-identifier hs-var">Typeable.typeRep</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1069"></span><span>                  </span><span id="local-6989586621679506732"><span class="annot"><a href="#local-6989586621679506732"><span class="hs-identifier hs-var">instsPtr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get (Static 'User (Dict (Binary b, Show b, Eq b)))
forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-1070"></span><span>                  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">deRefStaticPtr</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#userStaticPtr"><span class="hs-identifier hs-var">userStaticPtr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506732"><span class="hs-identifier hs-type">instsPtr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1071"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dict (Binary b, Show b, Eq b)
</span><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-var">Dict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Dict"><span class="hs-identifier hs-type">Dict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="annot"><a href="#local-6989586621679506712"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679506712"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679506712"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1072"></span><span>                      </span><span class="hs-keyword">do</span><span>
</span><span id="line-1073"></span><span>                        </span><span id="local-6989586621679506740"><span class="annot"><a href="#local-6989586621679506740"><span class="hs-identifier hs-var">ruleCmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504042"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506714"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679506712"><span class="hs-identifier hs-type">depsRes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1074"></span><span>                        </span><span id="local-6989586621679506741"><span class="annot"><a href="#local-6989586621679506741"><span class="hs-identifier hs-var">deps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">get</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504043"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506710"><span class="hs-identifier hs-type">depsArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679506712"><span class="hs-identifier hs-type">depsRes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1075"></span><span>                        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1076"></span><span>                          </span><span class="annot"><span class="hs-identifier hs-type">Typeable.withTypeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679506711"><span class="hs-identifier hs-type">trDepsArg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1077"></span><span>                            </span><span class="annot"><span class="hs-identifier hs-type">Typeable.withTypeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679506713"><span class="hs-identifier hs-type">trDepsRes</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1078"></span><span>                              </span><span class="annot"><span class="hs-identifier hs-type">Typeable.withTypeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679506715"><span class="hs-identifier hs-type">trArg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1079"></span><span>                                </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-1080"></span><span>                                  </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506741"><span class="hs-identifier hs-type">deps</span></a></span><span>
</span><span id="line-1081"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506740"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span>
</span><span id="line-1082"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506732"><span class="hs-identifier hs-type">instsPtr</span></a></span><span>
</span><span id="line-1083"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506700"><span class="hs-identifier hs-type">tr</span></a></span><span>
</span><span id="line-1084"></span><span>                                  </span><span class="hs-special">}</span><span>
</span><span id="line-1085"></span><span>          </span><span class="annot"><span class="annottext">TypeRep a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Get (RuleCommands 'User deps ruleCmd)
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;internal error when decoding dynamic rule commands&quot;</span></span><span>
</span><span id="line-1086"></span><span>
</span><span id="line-1087"></span><span class="hs-comment">-- | A token constructor used to define 'Structured' instances on types</span><span>
</span><span id="line-1088"></span><span class="hs-comment">-- that involve existential quantification.</span><span>
</span><span id="line-1089"></span><span class="hs-keyword">data</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="Tok"><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Tok"><span class="hs-identifier hs-var">Tok</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679506756"><span class="annot"><a href="#local-6989586621679506756"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679506757"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-1090"></span><span>
</span><span id="line-1091"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-1092"></span><span>  </span><span id="local-6989586621679504045"><span id="local-6989586621679504046"><span id="local-6989586621679506763"><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679504044"><span class="annot"><a href="#local-6989586621679504044"><span class="hs-identifier hs-type">res</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504045"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504044"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1093"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679504046"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span> </span><span class="annot"><a href="../../bytestring-0.12.2.0-7dd0/src/Data.ByteString.Lazy.Internal.html#ByteString"><span class="hs-identifier hs-type">LBS.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1094"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-1095"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleCommands"><span class="hs-identifier hs-type">RuleCommands</span></a></span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#System"><span class="hs-identifier hs-type">System</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504046"><span class="hs-identifier hs-type">deps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679504045"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1096"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1097"></span><span>  </span><span id="local-6989586621679506766"><span class="annot"><span class="annottext">put :: RuleCommands 'System deps ruleCmd -&gt; Put
</span><span class="hs-identifier hs-var hs-var hs-var">put</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1098"></span><span>    </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">staticRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506776"><span class="annot"><span class="annottext">ruleCmd 'System arg (IO ())
</span><a href="#local-6989586621679506776"><span class="hs-identifier hs-var">ruleCmd</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">staticRuleArgRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506777"><span class="annot"><span class="annottext">If ('System == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506777"><span class="hs-identifier hs-var">sTr</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1099"></span><span>      </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1100"></span><span>      </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">SomeTypeRep
If ('System == 'System) SomeTypeRep (TypeRep arg)
</span><a href="#local-6989586621679506777"><span class="hs-identifier hs-var">sTr</span></a></span><span>
</span><span id="line-1101"></span><span>      </span><span class="annot"><span class="annottext">ruleCmd 'System arg (IO ()) -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'System arg (IO ())
</span><a href="#local-6989586621679506776"><span class="hs-identifier hs-var">ruleCmd</span></a></span><span>
</span><span id="line-1102"></span><span>    </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-1103"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dynamicDeps :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506797"><span class="annot"><span class="annottext">deps 'System depsArg depsRes
</span><a href="#local-6989586621679506797"><span class="hs-identifier hs-var">deps</span></a></span></span><span>
</span><span id="line-1104"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleCommand :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506798"><span class="annot"><span class="annottext">ruleCmd 'System arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506798"><span class="hs-identifier hs-var">ruleCmd</span></a></span></span><span>
</span><span id="line-1105"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleInstances :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506799"><span class="annot"><span class="annottext">Static 'System (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506799"><span class="hs-identifier hs-var">instsKey</span></a></span></span><span>
</span><span id="line-1106"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dynamicRuleTypeRep :: ()
</span><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679506800"><span class="annot"><span class="annottext">If
  ('System == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506800"><span class="hs-identifier hs-var">sTr</span></a></span></span><span>
</span><span id="line-1107"></span><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1108"></span><span>        </span><span class="hs-keyword">do</span><span>
</span><span id="line-1109"></span><span>          </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1110"></span><span>          </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">SomeTypeRep
If
  ('System == 'System) SomeTypeRep (TypeRep (depsArg, depsRes, arg))
</span><a href="#local-6989586621679506800"><span class="hs-identifier hs-var">sTr</span></a></span><span>
</span><span id="line-1111"></span><span>          </span><span class="annot"><span class="annottext">Static 'System (Dict (Binary depsRes, Show depsRes, Eq depsRes))
-&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">Static 'System (Dict (Binary depsRes, Show depsRes, Eq depsRes))
</span><a href="#local-6989586621679506799"><span class="hs-identifier hs-var">instsKey</span></a></span><span>
</span><span id="line-1112"></span><span>          </span><span class="annot"><span class="annottext">ruleCmd 'System arg (depsRes -&gt; IO ()) -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">ruleCmd 'System arg (depsRes -&gt; IO ())
</span><a href="#local-6989586621679506798"><span class="hs-identifier hs-var">ruleCmd</span></a></span><span>
</span><span id="line-1113"></span><span>          </span><span class="annot"><span class="annottext">deps 'System depsArg depsRes -&gt; Put
forall t. Binary t =&gt; t -&gt; Put
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">deps 'System depsArg depsRes
</span><a href="#local-6989586621679506797"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-1114"></span><span>  </span><span id="local-6989586621679506826"><span class="annot"><span class="annottext">get :: Get (RuleCommands 'System deps ruleCmd)
</span><span class="hs-identifier hs-var hs-var hs-var">get</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1115"></span><span>    </span><span id="local-6989586621679506827"><span class="annot"><a href="#local-6989586621679506827"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span>
</span><span id="line-1116"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621679506827"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1117"></span><span>      </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1118"></span><span>        </span><span id="local-6989586621679506828"><span class="annot"><a href="#local-6989586621679506828"><span class="hs-identifier hs-var">sTr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Typeable.SomeTypeRep</span></span><span>
</span><span id="line-1119"></span><span>        </span><span id="local-6989586621679506829"><span class="annot"><a href="#local-6989586621679506829"><span class="hs-identifier hs-var">ruleCmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">get</span></span><span>
</span><span id="line-1120"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1121"></span><span>          </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#StaticRuleCommand"><span class="hs-identifier hs-type">StaticRuleCommand</span></a></span><span>
</span><span id="line-1122"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleCommand"><span class="hs-identifier hs-var">staticRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506829"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span>
</span><span id="line-1123"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#staticRuleArgRep"><span class="hs-identifier hs-var">staticRuleArgRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506828"><span class="hs-identifier hs-type">sTr</span></a></span><span>
</span><span id="line-1124"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-1125"></span><span>      </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1126"></span><span>        </span><span id="local-6989586621679506830"><span class="annot"><a href="#local-6989586621679506830"><span class="hs-identifier hs-var">sTr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. Binary t =&gt; Get t
</span><span class="hs-identifier hs-var">get</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Typeable.SomeTypeRep</span></span><span>
</span><span id="line-1127"></span><span>        </span><span id="local-6989586621679506831"><span class="annot"><a href="#local-6989586621679506831"><span class="hs-identifier hs-var">instsKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">get</span></span><span>
</span><span id="line-1128"></span><span>        </span><span id="local-6989586621679506832"><span class="annot"><a href="#local-6989586621679506832"><span class="hs-identifier hs-var">ruleCmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">get</span></span><span>
</span><span id="line-1129"></span><span>        </span><span id="local-6989586621679506833"><span class="annot"><a href="#local-6989586621679506833"><span class="hs-identifier hs-var">deps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">get</span></span><span>
</span><span id="line-1130"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1131"></span><span>          </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#DynamicRuleCommands"><span class="hs-identifier hs-type">DynamicRuleCommands</span></a></span><span>
</span><span id="line-1132"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicDeps"><span class="hs-identifier hs-var">dynamicDeps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506833"><span class="hs-identifier hs-type">deps</span></a></span><span>
</span><span id="line-1133"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleCommand"><span class="hs-identifier hs-var">dynamicRuleCommand</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506832"><span class="hs-identifier hs-type">ruleCmd</span></a></span><span>
</span><span id="line-1134"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleInstances"><span class="hs-identifier hs-var">dynamicRuleInstances</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506831"><span class="hs-identifier hs-type">instsKey</span></a></span><span>
</span><span id="line-1135"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#dynamicRuleTypeRep"><span class="hs-identifier hs-var">dynamicRuleTypeRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679506830"><span class="hs-identifier hs-type">sTr</span></a></span><span>
</span><span id="line-1136"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-1137"></span><span>
</span><span id="line-1138"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1139"></span><span class="hs-comment">-- Showing rules</span><span>
</span><span id="line-1140"></span><span>
</span><span id="line-1141"></span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#ruleBinary"><span class="hs-identifier hs-type">ruleBinary</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Distribution.Simple.SetupHooks.Rule.html#RuleBinary"><span class="hs-identifier hs-type">RuleBinary</span></a></span><span>
</span><span id="line-1142"></span><span id="ruleBinary"><span class="annot"><span class="annottext">ruleBinary :: Rule -&gt; RuleBinary
</span><a href="Distribution.Simple.SetupHooks.Rule.html#ruleBinary"><span class="hs-identifier hs-var hs-var">ruleBinary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; RuleBinary
forall a. Binary a =&gt; ByteString -&gt; a
</span><span class="hs-identifier hs-var">Binary.decode</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; RuleBinary)
-&gt; (Rule -&gt; ByteString) -&gt; Rule -&gt; RuleBinary
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rule -&gt; ByteString
forall a. Binary a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">Binary.encode</span></span><span>
</span><span id="line-1143"></span></pre></body></html>