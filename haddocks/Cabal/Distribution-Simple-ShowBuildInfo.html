<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Distribution.Simple.ShowBuildInfo</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">Cabal-3.14.1.0: A framework for packaging Haskell software</span><ul class="links" id="page-menu"><li><a href="src/Distribution.Simple.ShowBuildInfo.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Distribution.Simple.ShowBuildInfo</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module defines a simple JSON-based format for exporting basic
 information about a Cabal package and the compiler configuration Cabal
 would use to build it. This can be produced with the
 <code class="inline-code">cabal build --enable-build-info</code> command.</p><p>This format is intended for consumption by external tooling and should
 therefore be rather stable. Moreover, this allows tooling users to avoid
 linking against Cabal. This is an important advantage as direct API usage
 tends to be rather fragile in the presence of user-initiated upgrades of
 Cabal.</p><p>Below is an example of the output this module produces,</p><pre>{ &quot;cabal-lib-version&quot;: &quot;1.23.0.0&quot;,
  &quot;compiler&quot;: {
    &quot;flavour&quot;: <a href="GHC.html">GHC</a>,
    &quot;compiler-id&quot;: &quot;ghc-7.10.2&quot;,
    &quot;path&quot;: &quot;<em>usr</em>bin/ghc&quot;,
  },
  &quot;components&quot;: [
    { &quot;type&quot;: &quot;lib&quot;,
      &quot;name&quot;: &quot;lib:Cabal&quot;,
      &quot;compiler-args&quot;:
        [&quot;-O&quot;, &quot;-XHaskell98&quot;, &quot;-Wall&quot;,
         &quot;-package-id&quot;, &quot;parallel-3.2.0.6-b79c38c5c25fff77f3ea7271851879eb&quot;]
      &quot;modules&quot;: [<a href="Project-ModA.html">Project.ModA</a>, <a href="Project-ModB.html">Project.ModB</a>, <a href="Paths_project.html">Paths_project</a>],
      &quot;src-files&quot;: [],
      &quot;src-dirs&quot;: [&quot;src&quot;]
    }
  ]
}
</pre><p>The output format needs to be validated against 'doc<em>json-schemas</em>build-info.schema.json'.
 If the format changes, update the schema as well!</p><p>The <code class="inline-code">cabal-lib-version</code> property provides the version of the Cabal library
 which generated the output. The <code class="inline-code">compiler</code> property gives some basic
 information about the compiler Cabal would use to compile the package.</p><p>The <code class="inline-code">components</code> property gives a list of the Cabal <code><a href="Distribution-Simple-LocalBuildInfo.html#t:Component" title="Distribution.Simple.LocalBuildInfo">Component</a></code>s defined by
 the package. Each has,</p><ul><li><code class="inline-code">type</code>: the type of the component (one of <code class="inline-code">lib</code>, <code class="inline-code">exe</code>,
   <code class="inline-code">test</code>, <code class="inline-code">bench</code>, or <code class="inline-code">flib</code>)</li><li><code class="inline-code">name</code>: a string serving to uniquely identify the component within the
   package.</li><li><code class="inline-code">compiler-args</code>: the command-line arguments Cabal would pass to the
   compiler to compile the component</li><li><code class="inline-code">modules</code>: the modules belonging to the component</li><li><code class="inline-code">src-dirs</code>: a list of directories where the modules might be found</li><li><code class="inline-code">src-files</code>: any other Haskell sources needed by the component</li></ul><p>Note: At the moment this is only supported when using the GHC compiler.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:mkBuildInfo">mkBuildInfo</a> :: <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#t:AbsolutePath" title="Distribution.Utils.Path">AbsolutePath</a> ('<a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#v:Dir" title="Distribution.Utils.Path">Dir</a> <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#t:Pkg" title="Distribution.Utils.Path">Pkg</a>) -&gt; <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Simple-Setup.html#t:BuildFlags" title="Distribution.Simple.Setup">BuildFlags</a> -&gt; (<a href="Distribution-Simple-Program-Types.html#t:ConfiguredProgram" title="Distribution.Simple.Program.Types">ConfiguredProgram</a>, <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a>) -&gt; [<a href="Distribution-Types-TargetInfo.html#t:TargetInfo" title="Distribution.Types.TargetInfo">TargetInfo</a>] -&gt; ([<a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Compat-Prelude.html#t:String" title="Distribution.Compat.Prelude">String</a>], <a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a>)</li><li class="src short"><a href="#v:mkBuildInfo-39-">mkBuildInfo'</a> :: <a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a> -&gt; [<a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a>] -&gt; [(<a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Compat-Prelude.html#t:String" title="Distribution.Compat.Prelude">String</a>, <a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a>)]</li><li class="src short"><a href="#v:mkCompilerInfo">mkCompilerInfo</a> :: <a href="Distribution-Simple-Program-Types.html#t:ConfiguredProgram" title="Distribution.Simple.Program.Types">ConfiguredProgram</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a> -&gt; <a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a></li><li class="src short"><a href="#v:mkComponentInfo">mkComponentInfo</a> :: <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#t:AbsolutePath" title="Distribution.Utils.Path">AbsolutePath</a> ('<a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#v:Dir" title="Distribution.Utils.Path">Dir</a> <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#t:Pkg" title="Distribution.Utils.Path">Pkg</a>) -&gt; <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Types-ComponentLocalBuildInfo.html#t:ComponentLocalBuildInfo" title="Distribution.Types.ComponentLocalBuildInfo">ComponentLocalBuildInfo</a> -&gt; ([<a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Compat-Prelude.html#t:String" title="Distribution.Compat.Prelude">String</a>], <a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a>)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:mkBuildInfo" class="def">mkBuildInfo</a> <a href="src/Distribution.Simple.ShowBuildInfo.html#mkBuildInfo" class="link">Source</a> <a href="#v:mkBuildInfo" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#t:AbsolutePath" title="Distribution.Utils.Path">AbsolutePath</a> ('<a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#v:Dir" title="Distribution.Utils.Path">Dir</a> <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#t:Pkg" title="Distribution.Utils.Path">Pkg</a>)</td><td class="doc"><p>The source directory of the package</p></td></tr><tr><td class="src">-&gt; <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a></td><td class="doc"><p>Mostly information from the .cabal file</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a></td><td class="doc"><p>Configuration information</p></td></tr><tr><td class="src">-&gt; <a href="Distribution-Simple-Setup.html#t:BuildFlags" title="Distribution.Simple.Setup">BuildFlags</a></td><td class="doc"><p>Flags that the user passed to build</p></td></tr><tr><td class="src">-&gt; (<a href="Distribution-Simple-Program-Types.html#t:ConfiguredProgram" title="Distribution.Simple.Program.Types">ConfiguredProgram</a>, <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a>)</td><td class="doc"><p>Compiler information.
 Needs to be passed explicitly, as we can't extract that information here
 without some partial function.</p></td></tr><tr><td class="src">-&gt; [<a href="Distribution-Types-TargetInfo.html#t:TargetInfo" title="Distribution.Types.TargetInfo">TargetInfo</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; ([<a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Compat-Prelude.html#t:String" title="Distribution.Compat.Prelude">String</a>], <a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a>)</td><td class="doc"><p>Json representation of buildinfo alongside generated warnings</p></td></tr></table></div><div class="doc"><p>Construct a JSON document describing the build information for a
 package.</p></div></div><div class="top"><p class="src"><a id="v:mkBuildInfo-39-" class="def">mkBuildInfo'</a> <a href="src/Distribution.Simple.ShowBuildInfo.html#mkBuildInfo%27" class="link">Source</a> <a href="#v:mkBuildInfo-39-" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a></td><td class="doc"><p>The <code><a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a></code> from <code><a href="Distribution-Simple-ShowBuildInfo.html#v:mkCompilerInfo" title="Distribution.Simple.ShowBuildInfo">mkCompilerInfo</a></code></p></td></tr><tr><td class="src">-&gt; [<a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a>]</td><td class="doc"><p>The <code><a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a></code> from <code><a href="Distribution-Simple-ShowBuildInfo.html#v:mkComponentInfo" title="Distribution.Simple.ShowBuildInfo">mkComponentInfo</a></code></p></td></tr><tr><td class="src">-&gt; [(<a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Compat-Prelude.html#t:String" title="Distribution.Compat.Prelude">String</a>, <a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a>)]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>A variant of <code><a href="Distribution-Simple-ShowBuildInfo.html#v:mkBuildInfo" title="Distribution.Simple.ShowBuildInfo">mkBuildInfo</a></code> if you need to call <code><a href="Distribution-Simple-ShowBuildInfo.html#v:mkCompilerInfo" title="Distribution.Simple.ShowBuildInfo">mkCompilerInfo</a></code> and
 <code><a href="Distribution-Simple-ShowBuildInfo.html#v:mkComponentInfo" title="Distribution.Simple.ShowBuildInfo">mkComponentInfo</a></code> yourself.</p><p>If you change the format or any name in the output json, don't forget to update
 the schema at <code class="inline-code">/doc/json-schemas/build-info.schema.json</code> and the docs of
 <code class="inline-code">--enable-build-info</code>/<code class="inline-code">--disable-build-info</code>.</p></div></div><div class="top"><p class="src"><a id="v:mkCompilerInfo" class="def">mkCompilerInfo</a> :: <a href="Distribution-Simple-Program-Types.html#t:ConfiguredProgram" title="Distribution.Simple.Program.Types">ConfiguredProgram</a> -&gt; <a href="Distribution-Simple-Compiler.html#t:Compiler" title="Distribution.Simple.Compiler">Compiler</a> -&gt; <a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a> <a href="src/Distribution.Simple.ShowBuildInfo.html#mkCompilerInfo" class="link">Source</a> <a href="#v:mkCompilerInfo" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkComponentInfo" class="def">mkComponentInfo</a> :: <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#t:AbsolutePath" title="Distribution.Utils.Path">AbsolutePath</a> ('<a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#v:Dir" title="Distribution.Utils.Path">Dir</a> <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Utils-Path.html#t:Pkg" title="Distribution.Utils.Path">Pkg</a>) -&gt; <a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Types-PackageDescription.html#t:PackageDescription" title="Distribution.Types.PackageDescription">PackageDescription</a> -&gt; <a href="Distribution-Types-LocalBuildInfo.html#t:LocalBuildInfo" title="Distribution.Types.LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="Distribution-Types-ComponentLocalBuildInfo.html#t:ComponentLocalBuildInfo" title="Distribution.Types.ComponentLocalBuildInfo">ComponentLocalBuildInfo</a> -&gt; ([<a href="../Cabal-syntax-3.14.1.0-ebb2/Distribution-Compat-Prelude.html#t:String" title="Distribution.Compat.Prelude">String</a>], <a href="Distribution-Utils-Json.html#t:Json" title="Distribution.Utils.Json">Json</a>) <a href="src/Distribution.Simple.ShowBuildInfo.html#mkComponentInfo" class="link">Source</a> <a href="#v:mkComponentInfo" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.30.0</p></div></body></html>