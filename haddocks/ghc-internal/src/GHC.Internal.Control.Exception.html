<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE Trustworthy #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE NoImplicitPrelude, ExistentialQuantification #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Module      :  GHC.Internal.Control.Exception</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Copyright   :  (c) The University of Glasgow 2001</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- License     :  BSD-style (see the file libraries/base/LICENSE)</span><span>
</span><span id="line-9"></span><span class="hs-comment">--</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Maintainer  :  libraries@haskell.org</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- Stability   :  stable</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- Portability :  non-portable (extended exceptions)</span><span>
</span><span id="line-13"></span><span class="hs-comment">--</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- This module provides support for raising and catching both built-in</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- and user-defined exceptions.</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- In addition to exceptions thrown by 'IO' operations, exceptions may</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- be thrown by pure code (imprecise exceptions) or by external events</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- (asynchronous exceptions), but may only be caught in the 'IO' monad.</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- For more details, see:</span><span>
</span><span id="line-21"></span><span class="hs-comment">--</span><span>
</span><span id="line-22"></span><span class="hs-comment">--  * /A semantics for imprecise exceptions/, by Simon Peyton Jones,</span><span>
</span><span id="line-23"></span><span class="hs-comment">--    Alastair Reid, Tony Hoare, Simon Marlow, Fergus Henderson,</span><span>
</span><span id="line-24"></span><span class="hs-comment">--    in /PLDI'99/.</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">--  * /Asynchronous exceptions in Haskell/, by Simon Marlow, Simon Peyton</span><span>
</span><span id="line-27"></span><span class="hs-comment">--    Jones, Andy Moran and John Reppy, in /PLDI'01/.</span><span>
</span><span id="line-28"></span><span class="hs-comment">--</span><span>
</span><span id="line-29"></span><span class="hs-comment">--  * /An Extensible Dynamically-Typed Hierarchy of Exceptions/,</span><span>
</span><span id="line-30"></span><span class="hs-comment">--    by Simon Marlow, in /Haskell '06/.</span><span>
</span><span id="line-31"></span><span class="hs-comment">--</span><span>
</span><span id="line-32"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Internal.Control.Exception.html"><span class="hs-identifier">GHC.Internal.Control.Exception</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><span class="hs-comment">-- * The Exception type</span></span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="GHC.Internal.Exception.Type.html#SomeException"><span class="hs-identifier">SomeException</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Internal.Exception.Type.html#Exception"><span class="hs-identifier">Exception</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>          </span><span class="hs-comment">-- class</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#IOException"><span class="hs-identifier">IOException</span></a></span><span class="hs-special">,</span><span>            </span><span class="hs-comment">-- instance Eq, Ord, Show, Typeable, Exception</span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Internal.Exception.Type.html#ArithException"><span class="hs-identifier">ArithException</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- instance Eq, Ord, Show, Typeable, Exception</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#ArrayException"><span class="hs-identifier">ArrayException</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- instance Eq, Ord, Show, Typeable, Exception</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#AssertionFailed"><span class="hs-identifier">AssertionFailed</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#SomeAsyncException"><span class="hs-identifier">SomeAsyncException</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#AsyncException"><span class="hs-identifier">AsyncException</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- instance Eq, Ord, Show, Typeable, Exception</span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#asyncExceptionToException"><span class="hs-identifier">asyncExceptionToException</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#asyncExceptionFromException"><span class="hs-identifier">asyncExceptionFromException</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#NonTermination"><span class="hs-identifier">NonTermination</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#NestedAtomically"><span class="hs-identifier">NestedAtomically</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#BlockedIndefinitelyOnMVar"><span class="hs-identifier">BlockedIndefinitelyOnMVar</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#BlockedIndefinitelyOnSTM"><span class="hs-identifier">BlockedIndefinitelyOnSTM</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#AllocationLimitExceeded"><span class="hs-identifier">AllocationLimitExceeded</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#CompactionFailed"><span class="hs-identifier">CompactionFailed</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#Deadlock"><span class="hs-identifier">Deadlock</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#NoMethodError"><span class="hs-identifier">NoMethodError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#PatternMatchFail"><span class="hs-identifier">PatternMatchFail</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#RecConError"><span class="hs-identifier">RecConError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#RecSelError"><span class="hs-identifier">RecSelError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#RecUpdError"><span class="hs-identifier">RecUpdError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><a href="GHC.Internal.Exception.html#ErrorCall"><span class="hs-identifier">ErrorCall</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#TypeError"><span class="hs-identifier">TypeError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Throwing exceptions</span></span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><a href="GHC.Internal.Exception.html#throw"><span class="hs-identifier">throw</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#throwIO"><span class="hs-identifier">throwIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#rethrowIO"><span class="hs-identifier">rethrowIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.Exception.html#ioError"><span class="hs-identifier">ioError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>        </span><span class="annot"><a href="GHC.Internal.Conc.Sync.html#throwTo"><span class="hs-identifier">throwTo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** The @catch@ functions</span></span><span>
</span><span id="line-70"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#catch"><span class="hs-identifier">catch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#catchNoPropagate"><span class="hs-identifier">catchNoPropagate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.html#catches"><span class="hs-identifier">catches</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Internal.Control.Exception.html#Handler"><span class="hs-identifier">Handler</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#catchJust"><span class="hs-identifier">catchJust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Exception annotation</span></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** The @handle@ functions</span></span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#handle"><span class="hs-identifier">handle</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#handleJust"><span class="hs-identifier">handleJust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** The @try@ functions</span></span><span>
</span><span id="line-82"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#try"><span class="hs-identifier">try</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#tryWithContext"><span class="hs-identifier">tryWithContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#tryJust"><span class="hs-identifier">tryJust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** The @evaluate@ function</span></span><span>
</span><span id="line-87"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#evaluate"><span class="hs-identifier">evaluate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** The @mapException@ function</span></span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#mapException"><span class="hs-identifier">mapException</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Asynchronous exception control</span></span><span>
</span><span id="line-93"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#mask"><span class="hs-identifier">mask</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#mask_"><span class="hs-identifier">mask_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#uninterruptibleMask"><span class="hs-identifier">uninterruptibleMask</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#uninterruptibleMask_"><span class="hs-identifier">uninterruptibleMask_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#MaskingState"><span class="hs-identifier">MaskingState</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#getMaskingState"><span class="hs-identifier">getMaskingState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#interruptible"><span class="hs-identifier">interruptible</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.html#allowInterrupt"><span class="hs-identifier">allowInterrupt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Assertions</span></span><span>
</span><span id="line-103"></span><span>        </span><span class="annot"><a href="GHC.Internal.Base.html#assert"><span class="hs-identifier">assert</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Utilities</span></span><span>
</span><span id="line-106"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#bracket"><span class="hs-identifier">bracket</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#bracket_"><span class="hs-identifier">bracket_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#bracketOnError"><span class="hs-identifier">bracketOnError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#finally"><span class="hs-identifier">finally</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>        </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html#onException"><span class="hs-identifier">onException</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Annotating exceptions</span></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span>        </span><span class="annot"><a href="GHC.Internal.Exception.Context.html#ExceptionContext"><span class="hs-identifier">ExceptionContext</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>        </span><span class="annot"><a href="GHC.Internal.IO.html#annotateIO"><span class="hs-identifier">annotateIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>        </span><span class="annot"><a href="GHC.Internal.Exception.Type.html#WhileHandling"><span class="hs-identifier">WhileHandling</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Internal.Control.Exception.Base.html"><span class="hs-identifier">GHC.Internal.Control.Exception.Base</span></a></span><span>
</span><span id="line-122"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Internal.Exception.Type.html"><span class="hs-identifier">GHC.Internal.Exception.Type</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Internal.Exception.Type.html#ExceptionWithContext"><span class="hs-identifier">ExceptionWithContext</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Internal.Exception.Type.html#whileHandling"><span class="hs-identifier">whileHandling</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Internal.Base.html"><span class="hs-identifier">GHC.Internal.Base</span></a></span><span>
</span><span id="line-125"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Internal.IO.html"><span class="hs-identifier">GHC.Internal.IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Internal.IO.html#interruptible"><span class="hs-identifier">interruptible</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="annot"><span class="hs-comment">-- | You need this when using 'catches'.</span></span><span>
</span><span id="line-128"></span><span class="hs-keyword">data</span><span> </span><span id="Handler"><span class="annot"><a href="GHC.Internal.Control.Exception.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span></span><span> </span><span id="local-6989586621679817336"><span class="annot"><a href="#local-6989586621679817336"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679817422"><span class="annot"><a href="#local-6989586621679817422"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Internal.Exception.Type.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817422"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="Handler"><span class="annot"><a href="GHC.Internal.Control.Exception.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679817422"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817336"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="annot"><span class="hs-comment">-- | @since base-4.6.0.0</span></span><span>
</span><span id="line-131"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679817426"><span class="annot"><a href="GHC.Internal.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="GHC.Internal.Control.Exception.html#Handler"><span class="hs-identifier hs-type">Handler</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-132"></span><span>     </span><span id="local-6989586621679817430"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; Handler a -&gt; Handler b
</span><a href="GHC.Internal.Base.html#fmap"><span class="hs-identifier hs-var hs-var hs-var">fmap</span></a></span></span><span> </span><span id="local-6989586621679817431"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679817431"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Internal.Control.Exception.html#Handler"><span class="hs-identifier hs-type">Handler</span></a></span><span> </span><span id="local-6989586621679817436"><span class="annot"><span class="annottext">e -&gt; IO a
</span><a href="#local-6989586621679817436"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(e -&gt; IO b) -&gt; Handler b
forall a e. Exception e =&gt; (e -&gt; IO a) -&gt; Handler a
</span><a href="GHC.Internal.Control.Exception.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; IO a -&gt; IO b
forall a b. (a -&gt; b) -&gt; IO a -&gt; IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="GHC.Internal.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679817431"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; IO b) -&gt; (e -&gt; IO a) -&gt; e -&gt; IO b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="GHC.Internal.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; IO a
</span><a href="#local-6989586621679817436"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="annot"><span class="hs-comment">{- |
Sometimes you want to catch two different sorts of exception. You could
do something like

&gt; f = expr `catch` \ (ex :: ArithException) -&gt; handleArith ex
&gt;          `catch` \ (ex :: IOException)    -&gt; handleIO    ex

However, there are a couple of problems with this approach. The first is
that having two exception handlers is inefficient. However, the more
serious issue is that the second exception handler will catch exceptions
in the first, e.g. in the example above, if @handleArith@ throws an
@IOException@ then the second exception handler will catch it.

Instead, we provide a function 'catches', which would be used thus:

&gt; f = expr `catches` [Handler (\ (ex :: ArithException) -&gt; handleArith ex),
&gt;                     Handler (\ (ex :: IOException)    -&gt; handleIO    ex)]
-}</span></span><span>
</span><span id="line-152"></span><span id="local-6989586621679817340"><span class="annot"><a href="GHC.Internal.Control.Exception.html#catches"><span class="hs-identifier hs-type">catches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817340"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Internal.Control.Exception.html#Handler"><span class="hs-identifier hs-type">Handler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817340"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817340"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-153"></span><span id="catches"><span class="annot"><span class="annottext">catches :: forall a. IO a -&gt; [Handler a] -&gt; IO a
</span><a href="GHC.Internal.Control.Exception.html#catches"><span class="hs-identifier hs-var hs-var">catches</span></a></span></span><span> </span><span id="local-6989586621679817440"><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679817440"><span class="hs-identifier hs-var">io</span></a></span></span><span> </span><span id="local-6989586621679817441"><span class="annot"><span class="annottext">[Handler a]
</span><a href="#local-6989586621679817441"><span class="hs-identifier hs-var">handlers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679817440"><span class="hs-identifier hs-var">io</span></a></span><span> </span><span class="annot"><span class="annottext">IO a -&gt; (ExceptionWithContext SomeException -&gt; IO a) -&gt; IO a
forall e a.
Exception e =&gt;
IO a -&gt; (ExceptionWithContext e -&gt; IO a) -&gt; IO a
</span><a href="GHC.Internal.IO.html#catchNoPropagate"><span class="hs-operator hs-var">`catchNoPropagate`</span></a></span><span> </span><span class="annot"><span class="annottext">[Handler a] -&gt; ExceptionWithContext SomeException -&gt; IO a
forall a. [Handler a] -&gt; ExceptionWithContext SomeException -&gt; IO a
</span><a href="GHC.Internal.Control.Exception.html#catchesHandler"><span class="hs-identifier hs-var">catchesHandler</span></a></span><span> </span><span class="annot"><span class="annottext">[Handler a]
</span><a href="#local-6989586621679817441"><span class="hs-identifier hs-var">handlers</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span id="local-6989586621679817346"><span class="annot"><a href="GHC.Internal.Control.Exception.html#catchesHandler"><span class="hs-identifier hs-type">catchesHandler</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Internal.Control.Exception.html#Handler"><span class="hs-identifier hs-type">Handler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817346"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Internal.Exception.Type.html#ExceptionWithContext"><span class="hs-identifier hs-type">ExceptionWithContext</span></a></span><span> </span><span class="annot"><a href="GHC.Internal.Exception.Type.html#SomeException"><span class="hs-identifier hs-type">SomeException</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817346"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-156"></span><span id="catchesHandler"><span class="annot"><span class="annottext">catchesHandler :: forall a. [Handler a] -&gt; ExceptionWithContext SomeException -&gt; IO a
</span><a href="GHC.Internal.Control.Exception.html#catchesHandler"><span class="hs-identifier hs-var hs-var">catchesHandler</span></a></span></span><span> </span><span id="local-6989586621679817444"><span class="annot"><span class="annottext">[Handler a]
</span><a href="#local-6989586621679817444"><span class="hs-identifier hs-var">handlers</span></a></span></span><span> </span><span id="local-6989586621679817445"><span class="annot"><span class="annottext">ec :: ExceptionWithContext SomeException
</span><a href="#local-6989586621679817445"><span class="hs-identifier hs-var">ec</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Internal.Exception.Type.html#ExceptionWithContext"><span class="hs-identifier hs-type">ExceptionWithContext</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptionContext
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679817447"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679817447"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><span class="annottext">(Handler a -&gt; IO a -&gt; IO a) -&gt; IO a -&gt; [Handler a] -&gt; IO a
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
</span><a href="GHC.Internal.Base.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">Handler a -&gt; IO a -&gt; IO a
forall {a}. Handler a -&gt; IO a -&gt; IO a
</span><a href="#local-6989586621679817448"><span class="hs-identifier hs-var">tryHandler</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptionWithContext SomeException -&gt; IO a
forall e a. Exception e =&gt; ExceptionWithContext e -&gt; IO a
</span><a href="GHC.Internal.IO.html#rethrowIO"><span class="hs-identifier hs-var">rethrowIO</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptionWithContext SomeException
</span><a href="#local-6989586621679817445"><span class="hs-identifier hs-var">ec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Handler a]
</span><a href="#local-6989586621679817444"><span class="hs-identifier hs-var">handlers</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-159"></span><span>        </span><span id="local-6989586621679817448"><span class="annot"><span class="annottext">tryHandler :: Handler a -&gt; IO a -&gt; IO a
</span><a href="#local-6989586621679817448"><span class="hs-identifier hs-var hs-var">tryHandler</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Internal.Control.Exception.html#Handler"><span class="hs-identifier hs-type">Handler</span></a></span><span> </span><span id="local-6989586621679817454"><span class="annot"><span class="annottext">e -&gt; IO a
</span><a href="#local-6989586621679817454"><span class="hs-identifier hs-var">handler</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679817455"><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679817455"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-160"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe e
forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><a href="GHC.Internal.Exception.Type.html#fromException"><span class="hs-identifier hs-var">fromException</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679817447"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-161"></span><span>                </span><span class="annot"><a href="GHC.Internal.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679817457"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679817457"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WhileHandling -&gt; IO a -&gt; IO a
forall e a. ExceptionAnnotation e =&gt; e -&gt; IO a -&gt; IO a
</span><a href="GHC.Internal.IO.html#annotateIO"><span class="hs-identifier hs-var">annotateIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptionWithContext SomeException -&gt; WhileHandling
forall e. Exception e =&gt; ExceptionWithContext e -&gt; WhileHandling
</span><a href="GHC.Internal.Exception.Type.html#whileHandling"><span class="hs-identifier hs-var">whileHandling</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptionWithContext SomeException
</span><a href="#local-6989586621679817445"><span class="hs-identifier hs-var">ec</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; IO a
</span><a href="#local-6989586621679817454"><span class="hs-identifier hs-var">handler</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679817457"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>                </span><span class="annot"><span class="annottext">Maybe e
</span><a href="GHC.Internal.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679817455"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- Asynchronous exceptions</span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="hs-comment">-- | When invoked inside 'mask', this function allows a masked</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- asynchronous exception to be raised, if one exists.  It is</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- equivalent to performing an interruptible operation (see</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- #interruptible), but does not involve any actual blocking.</span><span>
</span><span id="line-171"></span><span class="hs-comment">--</span><span>
</span><span id="line-172"></span><span class="hs-comment">-- When called outside 'mask', or inside 'uninterruptibleMask', this</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- function has no effect.</span><span>
</span><span id="line-174"></span><span class="hs-comment">--</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- @since base-4.4.0.0</span><span>
</span><span id="line-176"></span><span class="annot"><a href="GHC.Internal.Control.Exception.html#allowInterrupt"><span class="hs-identifier hs-type">allowInterrupt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span id="allowInterrupt"><span class="annot"><span class="annottext">allowInterrupt :: IO ()
</span><a href="GHC.Internal.Control.Exception.html#allowInterrupt"><span class="hs-identifier hs-var hs-var">allowInterrupt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
forall a. IO a -&gt; IO a
</span><a href="GHC.Internal.IO.html#interruptible"><span class="hs-identifier hs-var">interruptible</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="GHC.Internal.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span></pre></body></html>