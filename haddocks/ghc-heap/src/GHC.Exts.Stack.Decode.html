<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span class="hs-cpp">
#if MIN_TOOL_VERSION_ghc(9,9,0)
</span><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DuplicateRecordFields #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE GHCForeignImportPrim #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MagicHash #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeInType #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE UnboxedTuples #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE UnliftedFFITypes #-}</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html"><span class="hs-identifier">GHC.Exts.Stack.Decode</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#decodeStack"><span class="hs-identifier">decodeStack</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">where</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Bits.html"><span class="hs-identifier">Data.Bits</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Foreign.html"><span class="hs-identifier">Foreign</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/GHC.Exts.html"><span class="hs-identifier">GHC.Exts</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.html"><span class="hs-identifier">GHC.Exts.Heap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#Box"><span class="hs-identifier">Box</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.ClosureTypes.html"><span class="hs-identifier">GHC.Exts.Heap.ClosureTypes</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html"><span class="hs-identifier">GHC.Exts.Heap.Closures</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StackFrame"><span class="hs-identifier">StackFrame</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#GenStackFrame"><span class="hs-identifier">GenStackFrame</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StgStackClosure"><span class="hs-identifier">StgStackClosure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#GenStgStackClosure"><span class="hs-identifier">GenStgStackClosure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StackField"><span class="hs-identifier">StackField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#GenStackField"><span class="hs-identifier">GenStackField</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Constants.html"><span class="hs-identifier">GHC.Exts.Heap.Constants</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Exts.Heap.Constants.html#wORD_SIZE_IN_BITS"><span class="hs-identifier">wORD_SIZE_IN_BITS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.InfoTable.html"><span class="hs-identifier">GHC.Exts.Heap.InfoTable</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html"><span class="hs-identifier">GHC.Exts.Stack.Constants</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/GHC.Stack.CloneStack.html"><span class="hs-identifier">GHC.Stack.CloneStack</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/GHC.Word.html"><span class="hs-identifier">GHC.Word</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Prelude.html"><span class="hs-identifier">Prelude</span></a></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-comment">{- Note [Decoding the stack]
   ~~~~~~~~~~~~~~~~~~~~~~~~~

The stack is represented by a chain of StgStack closures. Each of these closures
is subject to garbage collection. I.e. they can be moved in memory (in a
simplified perspective) at any time.

The array of closures inside an StgStack (that makeup the execution stack; the
stack frames) is moved as bare memory by the garbage collector. References
(pointers) to stack frames are not updated by the garbage collector.

As the StgStack closure is moved as whole, the relative offsets inside it stay
the same. (Though, the absolute addresses change!)

Decoding
========

Stack frames are defined by their `StackSnapshot#` (`StgStack*` in RTS) and
their relative offset. This tuple is described by `StackFrameLocation`.

`StackFrame` is an ADT for decoded stack frames. Regarding payload and fields we
have to deal with three cases:

- If the payload can only be a closure, we put it in a `Box` for later decoding
  by the heap closure functions.

- If the payload can either be a closure or a word-sized value (this happens for
  bitmap-encoded payloads), we use a `StackField` which is a sum type to
  represent either a `Word` or a `Box`.

- Fields that are just simple (i.e. non-closure) values are decoded as such.

The decoding happens in two phases:

1. The whole stack is decoded into `StackFrameLocation`s.

2. All `StackFrameLocation`s are decoded into `StackFrame`s.

`StackSnapshot#` parameters are updated by the garbage collector and thus safe
to hand around.

The head of the stack frame array has offset (index) 0. To traverse the stack
frames the latest stack frame's offset is incremented by the closure size. The
unit of the offset is machine words (32bit or 64bit.)

IO
==

Unfortunately, ghc-heap decodes `Closure`s in `IO`. This leads to `StackFrames`
also being decoded in `IO`, due to references to `Closure`s.

Technical details
=================

- All access to StgStack/StackSnapshot# closures is made through Cmm code. This
  keeps the closure from being moved by the garbage collector during the
  operation.

- As StgStacks are mainly used in Cmm and C code, much of the decoding logic is
  implemented in Cmm and C. It's just easier to reuse existing helper macros and
  functions, than reinventing them in Haskell.

- Offsets and sizes of closures are imported from DerivedConstants.h via HSC.
  This keeps the code very portable.
-}</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getUnderflowFrameNextChunkzh&quot;</span></span><span>
</span><span id="line-110"></span><span>  </span><span id="getUnderflowFrameNextChunk%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getUnderflowFrameNextChunk%23"><span class="hs-identifier hs-var">getUnderflowFrameNextChunk#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getUnderflowFrameNextChunk"><span class="hs-identifier hs-type">getUnderflowFrameNextChunk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Stack.CloneStack.html#StackSnapshot"><span class="hs-identifier hs-type">StackSnapshot</span></a></span><span>
</span><span id="line-114"></span><span id="getUnderflowFrameNextChunk"><span class="annot"><span class="annottext">getUnderflowFrameNextChunk :: StackSnapshot# -&gt; WordOffset -&gt; StackSnapshot
</span><a href="GHC.Exts.Stack.Decode.html#getUnderflowFrameNextChunk"><span class="hs-identifier hs-var hs-var">getUnderflowFrameNextChunk</span></a></span></span><span> </span><span id="local-6989586621679107812"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107812"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span> </span><span id="local-6989586621679107813"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107813"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; StackSnapshot
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Stack.CloneStack.html#StackSnapshot"><span class="hs-identifier hs-var">StackSnapshot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackSnapshot# -&gt; Word# -&gt; StackSnapshot#
</span><a href="GHC.Exts.Stack.Decode.html#getUnderflowFrameNextChunk%23"><span class="hs-identifier hs-var">getUnderflowFrameNextChunk#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107812"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#wordOffsetToWord%23"><span class="hs-identifier hs-var">wordOffsetToWord#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107813"><span class="hs-identifier hs-var">index</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getWordzh&quot;</span></span><span>
</span><span id="line-118"></span><span>  </span><span id="getWord%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getWord%23"><span class="hs-identifier hs-var">getWord#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getWord"><span class="hs-identifier hs-type">getWord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span>
</span><span id="line-122"></span><span id="getWord"><span class="annot"><span class="annottext">getWord :: StackSnapshot# -&gt; WordOffset -&gt; Word
</span><a href="GHC.Exts.Stack.Decode.html#getWord"><span class="hs-identifier hs-var hs-var">getWord</span></a></span></span><span> </span><span id="local-6989586621679107818"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107818"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span> </span><span id="local-6989586621679107819"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107819"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>  </span><span class="annot"><span class="annottext">Word# -&gt; Word
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#W%23"><span class="hs-identifier hs-var">W#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackSnapshot# -&gt; Word# -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#getWord%23"><span class="hs-identifier hs-var">getWord#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107818"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#wordOffsetToWord%23"><span class="hs-identifier hs-var">wordOffsetToWord#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107819"><span class="hs-identifier hs-var">index</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;isArgGenBigRetFunTypezh&quot;</span></span><span> </span><span id="isArgGenBigRetFunType%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#isArgGenBigRetFunType%23"><span class="hs-identifier hs-var">isArgGenBigRetFunType#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Int%23"><span class="hs-identifier hs-type">Int#</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#isArgGenBigRetFunType"><span class="hs-identifier hs-type">isArgGenBigRetFunType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-128"></span><span id="isArgGenBigRetFunType"><span class="annot"><span class="annottext">isArgGenBigRetFunType :: StackSnapshot# -&gt; WordOffset -&gt; Bool
</span><a href="GHC.Exts.Stack.Decode.html#isArgGenBigRetFunType"><span class="hs-identifier hs-var hs-var">isArgGenBigRetFunType</span></a></span></span><span> </span><span id="local-6989586621679107822"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107822"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span> </span><span id="local-6989586621679107823"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107823"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><span class="annottext">Int# -&gt; Int
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#I%23"><span class="hs-identifier hs-var">I#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackSnapshot# -&gt; Word# -&gt; Int#
</span><a href="GHC.Exts.Stack.Decode.html#isArgGenBigRetFunType%23"><span class="hs-identifier hs-var">isArgGenBigRetFunType#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107822"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#wordOffsetToWord%23"><span class="hs-identifier hs-var">wordOffsetToWord#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107823"><span class="hs-identifier hs-var">index</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Classes.html#%3E"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">-- | Gets contents of a `LargeBitmap` (@StgLargeBitmap@)</span><span>
</span><span id="line-132"></span><span class="hs-comment">--</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- The first two arguments identify the location of the frame on the stack.</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- Returned is the `Addr#` of the @StgWord[]@ (bitmap) and it's size.</span><span>
</span><span id="line-135"></span><span class="hs-keyword">type</span><span> </span><span id="LargeBitmapGetter"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#LargeBitmapGetter"><span class="hs-identifier hs-var">LargeBitmapGetter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Addr%23"><span class="hs-identifier hs-type">Addr#</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getLargeBitmapzh&quot;</span></span><span> </span><span id="getLargeBitmap%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getLargeBitmap%23"><span class="hs-identifier hs-var">getLargeBitmap#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#LargeBitmapGetter"><span class="hs-identifier hs-type">LargeBitmapGetter</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getBCOLargeBitmapzh&quot;</span></span><span> </span><span id="getBCOLargeBitmap%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getBCOLargeBitmap%23"><span class="hs-identifier hs-var">getBCOLargeBitmap#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#LargeBitmapGetter"><span class="hs-identifier hs-type">LargeBitmapGetter</span></a></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getRetFunLargeBitmapzh&quot;</span></span><span> </span><span id="getRetFunLargeBitmap%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getRetFunLargeBitmap%23"><span class="hs-identifier hs-var">getRetFunLargeBitmap#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#LargeBitmapGetter"><span class="hs-identifier hs-type">LargeBitmapGetter</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-comment">-- | Gets contents of a small bitmap (fitting in one @StgWord@)</span><span>
</span><span id="line-144"></span><span class="hs-comment">--</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- The first two arguments identify the location of the frame on the stack.</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- Returned is the bitmap and it's size.</span><span>
</span><span id="line-147"></span><span class="hs-keyword">type</span><span> </span><span id="SmallBitmapGetter"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#SmallBitmapGetter"><span class="hs-identifier hs-var">SmallBitmapGetter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getSmallBitmapzh&quot;</span></span><span> </span><span id="getSmallBitmap%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getSmallBitmap%23"><span class="hs-identifier hs-var">getSmallBitmap#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#SmallBitmapGetter"><span class="hs-identifier hs-type">SmallBitmapGetter</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getRetFunSmallBitmapzh&quot;</span></span><span> </span><span id="getRetFunSmallBitmap%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getRetFunSmallBitmap%23"><span class="hs-identifier hs-var">getRetFunSmallBitmap#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#SmallBitmapGetter"><span class="hs-identifier hs-type">SmallBitmapGetter</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getInfoTableAddrzh&quot;</span></span><span> </span><span id="getInfoTableAddr%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getInfoTableAddr%23"><span class="hs-identifier hs-var">getInfoTableAddr#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Addr%23"><span class="hs-identifier hs-type">Addr#</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getStackInfoTableAddrzh&quot;</span></span><span> </span><span id="getStackInfoTableAddr%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getStackInfoTableAddr%23"><span class="hs-identifier hs-var">getStackInfoTableAddr#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Addr%23"><span class="hs-identifier hs-type">Addr#</span></a></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getInfoTableOnStack"><span class="hs-identifier hs-type">getInfoTableOnStack</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="GHC.Exts.Heap.InfoTable.Types.html#StgInfoTable"><span class="hs-identifier hs-type">StgInfoTable</span></a></span><span>
</span><span id="line-158"></span><span id="getInfoTableOnStack"><span class="annot"><span class="annottext">getInfoTableOnStack :: StackSnapshot# -&gt; WordOffset -&gt; IO StgInfoTable
</span><a href="GHC.Exts.Stack.Decode.html#getInfoTableOnStack"><span class="hs-identifier hs-var hs-var">getInfoTableOnStack</span></a></span></span><span> </span><span id="local-6989586621679107834"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107834"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span> </span><span id="local-6989586621679107835"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107835"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107836"><span class="annot"><span class="annottext">infoTablePtr :: Ptr StgInfoTable
</span><a href="#local-6989586621679107836"><span class="hs-identifier hs-var hs-var">infoTablePtr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Addr# -&gt; Ptr StgInfoTable
forall a. Addr# -&gt; Ptr a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Ptr.html#Ptr"><span class="hs-identifier hs-var">Ptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackSnapshot# -&gt; Word# -&gt; Addr#
</span><a href="GHC.Exts.Stack.Decode.html#getInfoTableAddr%23"><span class="hs-identifier hs-var">getInfoTableAddr#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107834"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#wordOffsetToWord%23"><span class="hs-identifier hs-var">wordOffsetToWord#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107835"><span class="hs-identifier hs-var">index</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Ptr StgInfoTable -&gt; IO StgInfoTable
</span><a href="GHC.Exts.Heap.InfoTable.html#peekItbl"><span class="hs-identifier hs-var">peekItbl</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr StgInfoTable
</span><a href="#local-6989586621679107836"><span class="hs-identifier hs-var">infoTablePtr</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getInfoTableForStack"><span class="hs-identifier hs-type">getInfoTableForStack</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="GHC.Exts.Heap.InfoTable.Types.html#StgInfoTable"><span class="hs-identifier hs-type">StgInfoTable</span></a></span><span>
</span><span id="line-163"></span><span id="getInfoTableForStack"><span class="annot"><span class="annottext">getInfoTableForStack :: StackSnapshot# -&gt; IO StgInfoTable
</span><a href="GHC.Exts.Stack.Decode.html#getInfoTableForStack"><span class="hs-identifier hs-var hs-var">getInfoTableForStack</span></a></span></span><span> </span><span id="local-6989586621679107840"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107840"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><span class="annottext">Ptr StgInfoTable -&gt; IO StgInfoTable
</span><a href="GHC.Exts.Heap.InfoTable.html#peekItbl"><span class="hs-identifier hs-var">peekItbl</span></a></span><span> </span><span class="annot"><span class="annottext">(Ptr StgInfoTable -&gt; IO StgInfoTable)
-&gt; Ptr StgInfoTable -&gt; IO StgInfoTable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><span class="annottext">Addr# -&gt; Ptr StgInfoTable
forall a. Addr# -&gt; Ptr a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Ptr.html#Ptr"><span class="hs-identifier hs-var">Ptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackSnapshot# -&gt; Addr#
</span><a href="GHC.Exts.Stack.Decode.html#getStackInfoTableAddr%23"><span class="hs-identifier hs-var">getStackInfoTableAddr#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107840"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getStackClosurezh&quot;</span></span><span>
</span><span id="line-168"></span><span>  </span><span id="getStackClosure%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getStackClosure%23"><span class="hs-identifier hs-var">getStackClosure#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-169"></span><span>    </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;getStackFieldszh&quot;</span></span><span>
</span><span id="line-172"></span><span>  </span><span id="getStackFields%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getStackFields%23"><span class="hs-identifier hs-var">getStackFields#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word32%23"><span class="hs-identifier hs-type">Word32#</span></a></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getStackFields"><span class="hs-identifier hs-type">getStackFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span>
</span><span id="line-176"></span><span id="getStackFields"><span class="annot"><span class="annottext">getStackFields :: StackSnapshot# -&gt; Word32
</span><a href="GHC.Exts.Stack.Decode.html#getStackFields"><span class="hs-identifier hs-var hs-var">getStackFields</span></a></span></span><span> </span><span id="local-6989586621679107844"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107844"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; Word32#
</span><a href="GHC.Exts.Stack.Decode.html#getStackFields%23"><span class="hs-identifier hs-var">getStackFields#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107844"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-178"></span><span>    </span><span id="local-6989586621679107845"><span class="annot"><span class="annottext">Word32#
</span><a href="#local-6989586621679107845"><span class="hs-identifier hs-var">sSize#</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word32# -&gt; Word32
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Word.html#W32%23"><span class="hs-identifier hs-var">W32#</span></a></span><span> </span><span class="annot"><span class="annottext">Word32#
</span><a href="#local-6989586621679107845"><span class="hs-identifier hs-var">sSize#</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="annot"><span class="hs-comment">-- | `StackFrameLocation` of the top-most stack frame</span></span><span>
</span><span id="line-181"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#stackHead"><span class="hs-identifier hs-type">stackHead</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#StackFrameLocation"><span class="hs-identifier hs-type">StackFrameLocation</span></a></span><span>
</span><span id="line-182"></span><span id="stackHead"><span class="annot"><span class="annottext">stackHead :: StackSnapshot# -&gt; StackFrameLocation
</span><a href="GHC.Exts.Stack.Decode.html#stackHead"><span class="hs-identifier hs-var hs-var">stackHead</span></a></span></span><span> </span><span id="local-6989586621679107848"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107848"><span class="hs-identifier hs-var">s#</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackSnapshot# -&gt; StackSnapshot
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Stack.CloneStack.html#StackSnapshot"><span class="hs-identifier hs-var">StackSnapshot</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107848"><span class="hs-identifier hs-var">s#</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- GHC stacks are never empty</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- | Advance to the next stack frame (if any)</span><span>
</span><span id="line-185"></span><span class="hs-comment">--</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- The last `Int#` in the result tuple is meant to be treated as bool</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- (has_next).</span><span>
</span><span id="line-188"></span><span class="hs-keyword">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-keyword">prim</span></span><span> </span><span class="annot"><span class="hs-string">&quot;advanceStackFrameLocationzh&quot;</span></span><span>
</span><span id="line-189"></span><span>  </span><span id="advanceStackFrameLocation%23"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#advanceStackFrameLocation%23"><span class="hs-identifier hs-var">advanceStackFrameLocation#</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-190"></span><span>    </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Int%23"><span class="hs-identifier hs-type">Int#</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="annot"><span class="hs-comment">-- | Advance to the next stack frame (if any)</span></span><span>
</span><span id="line-193"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#advanceStackFrameLocation"><span class="hs-identifier hs-type">advanceStackFrameLocation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#StackFrameLocation"><span class="hs-identifier hs-type">StackFrameLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#StackFrameLocation"><span class="hs-identifier hs-type">StackFrameLocation</span></a></span><span>
</span><span id="line-194"></span><span id="advanceStackFrameLocation"><span class="annot"><span class="annottext">advanceStackFrameLocation :: StackFrameLocation -&gt; Maybe StackFrameLocation
</span><a href="GHC.Exts.Stack.Decode.html#advanceStackFrameLocation"><span class="hs-identifier hs-var hs-var">advanceStackFrameLocation</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Stack.CloneStack.html#StackSnapshot"><span class="hs-identifier hs-type">StackSnapshot</span></a></span><span> </span><span id="local-6989586621679107851"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107851"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107852"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107852"><span class="hs-identifier hs-var">index</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(#</span><span> </span><span id="local-6989586621679107853"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107853"><span class="hs-identifier hs-var">s'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107854"><span class="annot"><span class="annottext">Word#
</span><a href="#local-6989586621679107854"><span class="hs-identifier hs-var">i'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107855"><span class="annot"><span class="annottext">Int#
</span><a href="#local-6989586621679107855"><span class="hs-identifier hs-var">hasNext</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; Word# -&gt; (# StackSnapshot#, Word#, Int# #)
</span><a href="GHC.Exts.Stack.Decode.html#advanceStackFrameLocation%23"><span class="hs-identifier hs-var">advanceStackFrameLocation#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107851"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#wordOffsetToWord%23"><span class="hs-identifier hs-var">wordOffsetToWord#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107852"><span class="hs-identifier hs-var">index</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int# -&gt; Int
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#I%23"><span class="hs-identifier hs-var">I#</span></a></span><span> </span><span class="annot"><span class="annottext">Int#
</span><a href="#local-6989586621679107855"><span class="hs-identifier hs-var">hasNext</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Classes.html#%3E"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">StackFrameLocation -&gt; Maybe StackFrameLocation
forall a. a -&gt; Maybe a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackSnapshot# -&gt; StackSnapshot
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Stack.CloneStack.html#StackSnapshot"><span class="hs-identifier hs-var">StackSnapshot</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107853"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word# -&gt; WordOffset
</span><a href="#local-6989586621679107856"><span class="hs-identifier hs-var">primWordToWordOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Word#
</span><a href="#local-6989586621679107854"><span class="hs-identifier hs-var">i'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe StackFrameLocation
forall a. Maybe a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><a href="#local-6989586621679107856"><span class="hs-identifier hs-type">primWordToWordOffset</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span>
</span><span id="line-201"></span><span>    </span><span id="local-6989586621679107856"><span class="annot"><span class="annottext">primWordToWordOffset :: Word# -&gt; WordOffset
</span><a href="#local-6989586621679107856"><span class="hs-identifier hs-var hs-var">primWordToWordOffset</span></a></span></span><span> </span><span id="local-6989586621679107857"><span class="annot"><span class="annottext">Word#
</span><a href="#local-6989586621679107857"><span class="hs-identifier hs-var">w#</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; WordOffset
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word# -&gt; Word
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#W%23"><span class="hs-identifier hs-var">W#</span></a></span><span> </span><span class="annot"><span class="annottext">Word#
</span><a href="#local-6989586621679107857"><span class="hs-identifier hs-var">w#</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-type">getClosureBox</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#Box"><span class="hs-identifier hs-type">Box</span></a></span><span>
</span><span id="line-204"></span><span id="getClosureBox"><span class="annot"><span class="annottext">getClosureBox :: StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var hs-var">getClosureBox</span></a></span></span><span> </span><span id="local-6989586621679107859"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107859"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span> </span><span id="local-6989586621679107860"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107860"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; Word# -&gt; Any
</span><a href="GHC.Exts.Stack.Decode.html#getStackClosure%23"><span class="hs-identifier hs-var">getStackClosure#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107859"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#wordOffsetToWord%23"><span class="hs-identifier hs-var">wordOffsetToWord#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107860"><span class="hs-identifier hs-var">index</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-206"></span><span>          </span><span class="hs-comment">-- c needs to be strictly evaluated, otherwise a thunk gets boxed (and</span><span>
</span><span id="line-207"></span><span>          </span><span class="hs-comment">-- will later be decoded as such)</span><span>
</span><span id="line-208"></span><span>          </span><span class="hs-glyph">!</span><span id="local-6989586621679107861"><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679107861"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Any -&gt; Box
</span><a href="GHC.Exts.Heap.Closures.html#Box"><span class="hs-identifier hs-var">Box</span></a></span><span> </span><span class="annot"><span class="annottext">Any
</span><a href="#local-6989586621679107861"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="annot"><span class="hs-comment">-- | Representation of @StgLargeBitmap@ (RTS)</span></span><span>
</span><span id="line-211"></span><span class="hs-keyword">data</span><span> </span><span id="LargeBitmap"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#LargeBitmap"><span class="hs-identifier hs-var">LargeBitmap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LargeBitmap"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#LargeBitmap"><span class="hs-identifier hs-var">LargeBitmap</span></a></span></span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="largeBitmapSize"><span class="annot"><span class="annottext">LargeBitmap -&gt; Word
</span><a href="GHC.Exts.Stack.Decode.html#largeBitmapSize"><span class="hs-identifier hs-var hs-var">largeBitmapSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-213"></span><span>    </span><span id="largebitmapWords"><span class="annot"><span class="annottext">LargeBitmap -&gt; Ptr Word
</span><a href="GHC.Exts.Stack.Decode.html#largebitmapWords"><span class="hs-identifier hs-var hs-var">largebitmapWords</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Ptr.html#Ptr"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="annot"><span class="hs-comment">-- | Is a bitmap entry a closure pointer or a primitive non-pointer?</span></span><span>
</span><span id="line-217"></span><span class="hs-keyword">data</span><span> </span><span id="Pointerness"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#Pointerness"><span class="hs-identifier hs-var">Pointerness</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Pointer"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#Pointer"><span class="hs-identifier hs-var">Pointer</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="NonPointer"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#NonPointer"><span class="hs-identifier hs-var">NonPointer</span></a></span></span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679107868"><span id="local-6989586621679107870"><span id="local-6989586621679107874"><span class="annot"><span class="annottext">Int -&gt; Pointerness -&gt; ShowS
[Pointerness] -&gt; ShowS
Pointerness -&gt; String
(Int -&gt; Pointerness -&gt; ShowS)
-&gt; (Pointerness -&gt; String)
-&gt; ([Pointerness] -&gt; ShowS)
-&gt; Show Pointerness
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Pointerness -&gt; ShowS
showsPrec :: Int -&gt; Pointerness -&gt; ShowS
$cshow :: Pointerness -&gt; String
show :: Pointerness -&gt; String
$cshowList :: [Pointerness] -&gt; ShowS
showList :: [Pointerness] -&gt; ShowS
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#decodeLargeBitmap"><span class="hs-identifier hs-type">decodeLargeBitmap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#LargeBitmapGetter"><span class="hs-identifier hs-type">LargeBitmapGetter</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StackField"><span class="hs-identifier hs-type">StackField</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-221"></span><span id="decodeLargeBitmap"><span class="annot"><span class="annottext">decodeLargeBitmap :: LargeBitmapGetter
-&gt; StackSnapshot# -&gt; WordOffset -&gt; WordOffset -&gt; IO [StackField]
</span><a href="GHC.Exts.Stack.Decode.html#decodeLargeBitmap"><span class="hs-identifier hs-var hs-var">decodeLargeBitmap</span></a></span></span><span> </span><span id="local-6989586621679107879"><span class="annot"><span class="annottext">LargeBitmapGetter
</span><a href="#local-6989586621679107879"><span class="hs-identifier hs-var">getterFun#</span></a></span></span><span> </span><span id="local-6989586621679107880"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107880"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span> </span><span id="local-6989586621679107881"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107881"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span id="local-6989586621679107882"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107882"><span class="hs-identifier hs-var">relativePayloadOffset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-222"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107883"><span class="annot"><span class="annottext">largeBitmap :: LargeBitmap
</span><a href="#local-6989586621679107883"><span class="hs-identifier hs-var hs-var hs-var">largeBitmap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LargeBitmapGetter
</span><a href="#local-6989586621679107879"><span class="hs-identifier hs-var">getterFun#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107880"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#wordOffsetToWord%23"><span class="hs-identifier hs-var">wordOffsetToWord#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107881"><span class="hs-identifier hs-var">index</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-223"></span><span>        </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621679107884"><span class="annot"><span class="annottext">Addr#
</span><a href="#local-6989586621679107884"><span class="hs-identifier hs-var">wordsAddr#</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107885"><span class="annot"><span class="annottext">Word#
</span><a href="#local-6989586621679107885"><span class="hs-identifier hs-var">size#</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Ptr Word -&gt; LargeBitmap
</span><a href="GHC.Exts.Stack.Decode.html#LargeBitmap"><span class="hs-identifier hs-var">LargeBitmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word# -&gt; Word
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#W%23"><span class="hs-identifier hs-var">W#</span></a></span><span> </span><span class="annot"><span class="annottext">Word#
</span><a href="#local-6989586621679107885"><span class="hs-identifier hs-var">size#</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Addr# -&gt; Ptr Word
forall a. Addr# -&gt; Ptr a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Ptr.html#Ptr"><span class="hs-identifier hs-var">Ptr</span></a></span><span> </span><span class="annot"><span class="annottext">Addr#
</span><a href="#local-6989586621679107884"><span class="hs-identifier hs-var">wordsAddr#</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>  </span><span id="local-6989586621679107886"><span class="annot"><a href="#local-6989586621679107886"><span class="hs-identifier hs-var">bitmapWords</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LargeBitmap -&gt; IO [Word]
</span><a href="#local-6989586621679107887"><span class="hs-identifier hs-var">largeBitmapToList</span></a></span><span> </span><span class="annot"><span class="annottext">LargeBitmap
</span><a href="#local-6989586621679107883"><span class="hs-identifier hs-var">largeBitmap</span></a></span><span>
</span><span id="line-225"></span><span>  </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-type">pure</span></a></span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-type">$</span></a></span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#decodeBitmaps"><span class="hs-identifier hs-type">decodeBitmaps</span></a></span><span>
</span><span id="line-226"></span><span>          </span><span class="annot"><a href="#local-6989586621679107880"><span class="hs-identifier hs-type">stackSnapshot#</span></a></span><span>
</span><span id="line-227"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679107881"><span class="hs-identifier hs-type">index</span></a></span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-type">+</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679107882"><span class="hs-identifier hs-type">relativePayloadOffset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679107890"><span class="hs-identifier hs-type">bitmapWordsPointerness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#largeBitmapSize"><span class="hs-identifier hs-var">largeBitmapSize</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679107883"><span class="hs-identifier hs-type">largeBitmap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679107886"><span class="hs-identifier hs-type">bitmapWords</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><a href="#local-6989586621679107887"><span class="hs-identifier hs-type">largeBitmapToList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#LargeBitmap"><span class="hs-identifier hs-type">LargeBitmap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-231"></span><span>    </span><span id="local-6989586621679107887"><span class="annot"><span class="annottext">largeBitmapToList :: LargeBitmap -&gt; IO [Word]
</span><a href="#local-6989586621679107887"><span class="hs-identifier hs-var hs-var">largeBitmapToList</span></a></span></span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#LargeBitmap"><span class="hs-identifier hs-type">LargeBitmap</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679107891"><span id="local-6989586621679107892"><span class="annot"><span class="annottext">Word
Ptr Word
largeBitmapSize :: LargeBitmap -&gt; Word
largebitmapWords :: LargeBitmap -&gt; Ptr Word
largeBitmapSize :: Word
largebitmapWords :: Ptr Word
</span><a href="GHC.Exts.Stack.Decode.html#largeBitmapSize"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-232"></span><span>      </span><span class="annot"><span class="annottext">Ptr Word -&gt; Int -&gt; IO [Word]
</span><a href="#local-6989586621679107893"><span class="hs-identifier hs-var">cWordArrayToList</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word
</span><a href="#local-6989586621679107892"><span class="hs-identifier hs-var">largebitmapWords</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO [Word]) -&gt; Int -&gt; IO [Word]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-233"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621679107894"><span class="hs-identifier hs-var">usedBitmapWords</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; (Word -&gt; Int) -&gt; Word -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107891"><span class="hs-identifier hs-var">largeBitmapSize</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><a href="#local-6989586621679107893"><span class="hs-identifier hs-type">cWordArrayToList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Ptr.html#Ptr"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-236"></span><span>    </span><span id="local-6989586621679107893"><span class="annot"><span class="annottext">cWordArrayToList :: Ptr Word -&gt; Int -&gt; IO [Word]
</span><a href="#local-6989586621679107893"><span class="hs-identifier hs-var hs-var">cWordArrayToList</span></a></span></span><span> </span><span id="local-6989586621679107896"><span class="annot"><span class="annottext">Ptr Word
</span><a href="#local-6989586621679107896"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span id="local-6989586621679107897"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107897"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO Word) -&gt; [Int] -&gt; IO [Word]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ptr Word -&gt; Int -&gt; IO Word
forall a. Storable a =&gt; Ptr a -&gt; Int -&gt; IO a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Foreign.Storable.html#peekElemOff"><span class="hs-identifier hs-var">peekElemOff</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Word
</span><a href="#local-6989586621679107896"><span class="hs-identifier hs-var">ptr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107897"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><a href="#local-6989586621679107894"><span class="hs-identifier hs-type">usedBitmapWords</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-239"></span><span>    </span><span id="local-6989586621679107894"><span class="annot"><span class="annottext">usedBitmapWords :: Int -&gt; Int
</span><a href="#local-6989586621679107894"><span class="hs-identifier hs-var hs-var">usedBitmapWords</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid large bitmap size 0.&quot;</span></span><span>
</span><span id="line-240"></span><span>    </span><span class="annot"><a href="#local-6989586621679107894"><span class="hs-identifier hs-var">usedBitmapWords</span></a></span><span> </span><span id="local-6989586621679107901"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107901"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679107901"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Real.html#div"><span class="hs-operator hs-var">`div`</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="GHC.Exts.Heap.Constants.html#wORD_SIZE_IN_BITS"><span class="hs-identifier hs-var">wORD_SIZE_IN_BITS</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><a href="#local-6989586621679107890"><span class="hs-identifier hs-type">bitmapWordsPointerness</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#Pointerness"><span class="hs-identifier hs-type">Pointerness</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-243"></span><span>    </span><span id="local-6989586621679107890"><span class="annot"><span class="annottext">bitmapWordsPointerness :: Word -&gt; [Word] -&gt; [Pointerness]
</span><a href="#local-6989586621679107890"><span class="hs-identifier hs-var hs-var">bitmapWordsPointerness</span></a></span></span><span> </span><span id="local-6989586621679107903"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107903"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Word]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107903"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><a href="#local-6989586621679107890"><span class="hs-identifier hs-var">bitmapWordsPointerness</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><a href="#local-6989586621679107890"><span class="hs-identifier hs-var">bitmapWordsPointerness</span></a></span><span> </span><span id="local-6989586621679107905"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107905"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679107906"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107906"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#%3A"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621679107907"><span class="annot"><span class="annottext">[Word]
</span><a href="#local-6989586621679107907"><span class="hs-identifier hs-var">wds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-246"></span><span>      </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; [Pointerness]
</span><a href="GHC.Exts.Stack.Decode.html#bitmapWordPointerness"><span class="hs-identifier hs-var">bitmapWordPointerness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Classes.html#min"><span class="hs-identifier hs-var">min</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107905"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Word
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="GHC.Exts.Heap.Constants.html#wORD_SIZE_IN_BITS"><span class="hs-identifier hs-var">wORD_SIZE_IN_BITS</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107906"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-247"></span><span>        </span><span class="annot"><span class="annottext">[Pointerness] -&gt; [Pointerness] -&gt; [Pointerness]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; [Word] -&gt; [Pointerness]
</span><a href="#local-6989586621679107890"><span class="hs-identifier hs-var">bitmapWordsPointerness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107905"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="GHC.Exts.Heap.Constants.html#wORD_SIZE_IN_BITS"><span class="hs-identifier hs-var">wORD_SIZE_IN_BITS</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Word]
</span><a href="#local-6989586621679107907"><span class="hs-identifier hs-var">wds</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#bitmapWordPointerness"><span class="hs-identifier hs-type">bitmapWordPointerness</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Word"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#Pointerness"><span class="hs-identifier hs-type">Pointerness</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-250"></span><span id="bitmapWordPointerness"><span class="annot"><span class="annottext">bitmapWordPointerness :: Word -&gt; Word -&gt; [Pointerness]
</span><a href="GHC.Exts.Stack.Decode.html#bitmapWordPointerness"><span class="hs-identifier hs-var hs-var">bitmapWordPointerness</span></a></span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-251"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#bitmapWordPointerness"><span class="hs-identifier hs-var">bitmapWordPointerness</span></a></span><span> </span><span id="local-6989586621679107910"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107910"><span class="hs-identifier hs-var">bSize</span></a></span></span><span> </span><span id="local-6989586621679107911"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107911"><span class="hs-identifier hs-var">bitmapWord</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107911"><span class="hs-identifier hs-var">bitmapWord</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Bits.html#.%26."><span class="hs-operator hs-var">.&amp;.</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Classes.html#%2F%3D"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span>
</span><span id="line-253"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Pointerness
</span><a href="GHC.Exts.Stack.Decode.html#NonPointer"><span class="hs-identifier hs-var">NonPointer</span></a></span><span>
</span><span id="line-254"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Pointerness
</span><a href="GHC.Exts.Stack.Decode.html#Pointer"><span class="hs-identifier hs-var">Pointer</span></a></span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><span class="annottext">Pointerness -&gt; [Pointerness] -&gt; [Pointerness]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; [Pointerness]
</span><a href="GHC.Exts.Stack.Decode.html#bitmapWordPointerness"><span class="hs-identifier hs-var">bitmapWordPointerness</span></a></span><span>
</span><span id="line-257"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107910"><span class="hs-identifier hs-var">bSize</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107911"><span class="hs-identifier hs-var">bitmapWord</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Int -&gt; Word
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Bits.html#shiftR"><span class="hs-operator hs-var">`shiftR`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#decodeBitmaps"><span class="hs-identifier hs-type">decodeBitmaps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#Pointerness"><span class="hs-identifier hs-type">Pointerness</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StackField"><span class="hs-identifier hs-type">StackField</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-261"></span><span id="decodeBitmaps"><span class="annot"><span class="annottext">decodeBitmaps :: StackSnapshot# -&gt; WordOffset -&gt; [Pointerness] -&gt; [StackField]
</span><a href="GHC.Exts.Stack.Decode.html#decodeBitmaps"><span class="hs-identifier hs-var hs-var">decodeBitmaps</span></a></span></span><span> </span><span id="local-6989586621679107915"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107915"><span class="hs-identifier hs-var">stack#</span></a></span></span><span> </span><span id="local-6989586621679107916"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107916"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span id="local-6989586621679107917"><span class="annot"><span class="annottext">[Pointerness]
</span><a href="#local-6989586621679107917"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-262"></span><span>  </span><span class="annot"><span class="annottext">(Pointerness -&gt; WordOffset -&gt; StackField)
-&gt; [Pointerness] -&gt; [WordOffset] -&gt; [StackField]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.List.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a></span><span> </span><span class="annot"><span class="annottext">Pointerness -&gt; WordOffset -&gt; StackField
</span><a href="#local-6989586621679107919"><span class="hs-identifier hs-var">toPayload</span></a></span><span> </span><span class="annot"><span class="annottext">[Pointerness]
</span><a href="#local-6989586621679107917"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107916"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><a href="#local-6989586621679107919"><span class="hs-identifier hs-type">toPayload</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#Pointerness"><span class="hs-identifier hs-type">Pointerness</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StackField"><span class="hs-identifier hs-type">StackField</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span id="local-6989586621679107919"><span class="annot"><span class="annottext">toPayload :: Pointerness -&gt; WordOffset -&gt; StackField
</span><a href="#local-6989586621679107919"><span class="hs-identifier hs-var hs-var">toPayload</span></a></span></span><span> </span><span id="local-6989586621679107920"><span class="annot"><span class="annottext">Pointerness
</span><a href="#local-6989586621679107920"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679107921"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107921"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Pointerness
</span><a href="#local-6989586621679107920"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-266"></span><span>      </span><span class="annot"><span class="annottext">Pointerness
</span><a href="GHC.Exts.Stack.Decode.html#NonPointer"><span class="hs-identifier hs-var">NonPointer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word -&gt; StackField
forall b. Word -&gt; GenStackField b
</span><a href="GHC.Exts.Heap.Closures.html#StackWord"><span class="hs-identifier hs-var">StackWord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Word
</span><a href="GHC.Exts.Stack.Decode.html#getWord"><span class="hs-identifier hs-var">getWord</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107915"><span class="hs-identifier hs-var">stack#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107921"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>      </span><span class="annot"><span class="annottext">Pointerness
</span><a href="GHC.Exts.Stack.Decode.html#Pointer"><span class="hs-identifier hs-var">Pointer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Box -&gt; StackField
forall b. b -&gt; GenStackField b
</span><a href="GHC.Exts.Heap.Closures.html#StackBox"><span class="hs-identifier hs-var">StackBox</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107915"><span class="hs-identifier hs-var">stack#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107921"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#decodeSmallBitmap"><span class="hs-identifier hs-type">decodeSmallBitmap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#SmallBitmapGetter"><span class="hs-identifier hs-type">SmallBitmapGetter</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StackField"><span class="hs-identifier hs-type">StackField</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-270"></span><span id="decodeSmallBitmap"><span class="annot"><span class="annottext">decodeSmallBitmap :: SmallBitmapGetter
-&gt; StackSnapshot# -&gt; WordOffset -&gt; WordOffset -&gt; [StackField]
</span><a href="GHC.Exts.Stack.Decode.html#decodeSmallBitmap"><span class="hs-identifier hs-var hs-var">decodeSmallBitmap</span></a></span></span><span> </span><span id="local-6989586621679107925"><span class="annot"><span class="annottext">SmallBitmapGetter
</span><a href="#local-6989586621679107925"><span class="hs-identifier hs-var">getterFun#</span></a></span></span><span> </span><span id="local-6989586621679107926"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107926"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span> </span><span id="local-6989586621679107927"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107927"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span id="local-6989586621679107928"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107928"><span class="hs-identifier hs-var">relativePayloadOffset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679107929"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107929"><span class="hs-identifier hs-var">bitmap</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107930"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107930"><span class="hs-identifier hs-var">size</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SmallBitmapGetter
</span><a href="#local-6989586621679107925"><span class="hs-identifier hs-var">getterFun#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107926"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#wordOffsetToWord%23"><span class="hs-identifier hs-var">wordOffsetToWord#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107927"><span class="hs-identifier hs-var">index</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-272"></span><span>        </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621679107931"><span class="annot"><span class="annottext">Word#
</span><a href="#local-6989586621679107931"><span class="hs-identifier hs-var">b#</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107932"><span class="annot"><span class="annottext">Word#
</span><a href="#local-6989586621679107932"><span class="hs-identifier hs-var">s#</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word# -&gt; Word
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#W%23"><span class="hs-identifier hs-var">W#</span></a></span><span> </span><span class="annot"><span class="annottext">Word#
</span><a href="#local-6989586621679107931"><span class="hs-identifier hs-var">b#</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word# -&gt; Word
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#W%23"><span class="hs-identifier hs-var">W#</span></a></span><span> </span><span class="annot"><span class="annottext">Word#
</span><a href="#local-6989586621679107932"><span class="hs-identifier hs-var">s#</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; [Pointerness] -&gt; [StackField]
</span><a href="GHC.Exts.Stack.Decode.html#decodeBitmaps"><span class="hs-identifier hs-var">decodeBitmaps</span></a></span><span>
</span><span id="line-274"></span><span>      </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107926"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span>
</span><span id="line-275"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107927"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107928"><span class="hs-identifier hs-var">relativePayloadOffset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; [Pointerness]
</span><a href="GHC.Exts.Stack.Decode.html#bitmapWordPointerness"><span class="hs-identifier hs-var">bitmapWordPointerness</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107930"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107929"><span class="hs-identifier hs-var">bitmap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#unpackStackFrame"><span class="hs-identifier hs-type">unpackStackFrame</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#StackFrameLocation"><span class="hs-identifier hs-type">StackFrameLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StackFrame"><span class="hs-identifier hs-type">StackFrame</span></a></span><span>
</span><span id="line-279"></span><span id="unpackStackFrame"><span class="annot"><span class="annottext">unpackStackFrame :: StackFrameLocation -&gt; IO StackFrame
</span><a href="GHC.Exts.Stack.Decode.html#unpackStackFrame"><span class="hs-identifier hs-var hs-var">unpackStackFrame</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Stack.CloneStack.html#StackSnapshot"><span class="hs-identifier hs-type">StackSnapshot</span></a></span><span> </span><span id="local-6989586621679107934"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679107935"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-280"></span><span>  </span><span id="local-6989586621679107936"><span class="annot"><a href="#local-6989586621679107936"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; IO StgInfoTable
</span><a href="GHC.Exts.Stack.Decode.html#getInfoTableOnStack"><span class="hs-identifier hs-var">getInfoTableOnStack</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span>
</span><span id="line-281"></span><span>  </span><span class="annot"><a href="#local-6989586621679107937"><span class="hs-identifier hs-type">unpackStackFrame'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679107936"><span class="hs-identifier hs-type">info</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><a href="#local-6989586621679107937"><span class="hs-identifier hs-type">unpackStackFrame'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.InfoTable.Types.html#StgInfoTable"><span class="hs-identifier hs-type">StgInfoTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StackFrame"><span class="hs-identifier hs-type">StackFrame</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span id="local-6989586621679107937"><span class="annot"><span class="annottext">unpackStackFrame' :: StgInfoTable -&gt; IO StackFrame
</span><a href="#local-6989586621679107937"><span class="hs-identifier hs-var hs-var">unpackStackFrame'</span></a></span></span><span> </span><span id="local-6989586621679107938"><span class="annot"><span class="annottext">StgInfoTable
</span><a href="#local-6989586621679107938"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-285"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">StgInfoTable -&gt; ClosureType
</span><a href="GHC.Exts.Heap.InfoTable.Types.html#tipe"><span class="hs-identifier hs-var">tipe</span></a></span><span> </span><span class="annot"><span class="annottext">StgInfoTable
</span><a href="#local-6989586621679107938"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-286"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#RET_BCO"><span class="hs-identifier hs-var">RET_BCO</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-287"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107941"><span class="annot"><span class="annottext">bco' :: Box
</span><a href="#local-6989586621679107941"><span class="hs-identifier hs-var hs-var hs-var">bco'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgClosurePayload"><span class="hs-identifier hs-var">offsetStgClosurePayload</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>          </span><span class="hs-comment">-- The arguments begin directly after the payload's one element</span><span>
</span><span id="line-289"></span><span>          </span><span id="local-6989586621679107943"><span class="annot"><a href="#local-6989586621679107943"><span class="hs-identifier hs-var">bcoArgs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LargeBitmapGetter
-&gt; StackSnapshot# -&gt; WordOffset -&gt; WordOffset -&gt; IO [StackField]
</span><a href="GHC.Exts.Stack.Decode.html#decodeLargeBitmap"><span class="hs-identifier hs-var">decodeLargeBitmap</span></a></span><span> </span><span class="annot"><span class="annottext">LargeBitmapGetter
</span><a href="GHC.Exts.Stack.Decode.html#getBCOLargeBitmap%23"><span class="hs-identifier hs-var">getBCOLargeBitmap#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgClosurePayload"><span class="hs-identifier hs-var">offsetStgClosurePayload</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>          </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-type">pure</span></a></span><span>
</span><span id="line-291"></span><span>            </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#RetBCO"><span class="hs-identifier hs-type">RetBCO</span></a></span><span>
</span><span id="line-292"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107938"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-293"></span><span>                </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#bco"><span class="hs-identifier hs-var">bco</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107941"><span class="hs-identifier hs-type">bco'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-294"></span><span>                </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#bcoArgs"><span class="hs-identifier hs-var">bcoArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107943"><span class="hs-identifier hs-type">bcoArgs'</span></a></span><span>
</span><span id="line-295"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-296"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#RET_SMALL"><span class="hs-identifier hs-var">RET_SMALL</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-297"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107949"><span class="annot"><span class="annottext">payload' :: [StackField]
</span><a href="#local-6989586621679107949"><span class="hs-identifier hs-var hs-var">payload'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SmallBitmapGetter
-&gt; StackSnapshot# -&gt; WordOffset -&gt; WordOffset -&gt; [StackField]
</span><a href="GHC.Exts.Stack.Decode.html#decodeSmallBitmap"><span class="hs-identifier hs-var">decodeSmallBitmap</span></a></span><span> </span><span class="annot"><span class="annottext">SmallBitmapGetter
</span><a href="GHC.Exts.Stack.Decode.html#getSmallBitmap%23"><span class="hs-identifier hs-var">getSmallBitmap#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgClosurePayload"><span class="hs-identifier hs-var">offsetStgClosurePayload</span></a></span><span>
</span><span id="line-298"></span><span>          </span><span class="hs-keyword">in</span><span>
</span><span id="line-299"></span><span>            </span><span class="annot"><span class="annottext">StackFrame -&gt; IO StackFrame
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(StackFrame -&gt; IO StackFrame) -&gt; StackFrame -&gt; IO StackFrame
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-300"></span><span>              </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#RetSmall"><span class="hs-identifier hs-type">RetSmall</span></a></span><span>
</span><span id="line-301"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">info_tbl :: StgInfoTable
</span><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StgInfoTable
</span><a href="#local-6989586621679107938"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-302"></span><span>                  </span><span class="annot"><span class="annottext">stack_payload :: [StackField]
</span><a href="GHC.Exts.Heap.Closures.html#stack_payload"><span class="hs-identifier hs-var">stack_payload</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[StackField]
</span><a href="#local-6989586621679107949"><span class="hs-identifier hs-var">payload'</span></a></span><span>
</span><span id="line-303"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-304"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#RET_BIG"><span class="hs-identifier hs-var">RET_BIG</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-305"></span><span>          </span><span id="local-6989586621679107953"><span class="annot"><a href="#local-6989586621679107953"><span class="hs-identifier hs-var">payload'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LargeBitmapGetter
-&gt; StackSnapshot# -&gt; WordOffset -&gt; WordOffset -&gt; IO [StackField]
</span><a href="GHC.Exts.Stack.Decode.html#decodeLargeBitmap"><span class="hs-identifier hs-var">decodeLargeBitmap</span></a></span><span> </span><span class="annot"><span class="annottext">LargeBitmapGetter
</span><a href="GHC.Exts.Stack.Decode.html#getLargeBitmap%23"><span class="hs-identifier hs-var">getLargeBitmap#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgClosurePayload"><span class="hs-identifier hs-var">offsetStgClosurePayload</span></a></span><span>
</span><span id="line-306"></span><span>          </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-type">pure</span></a></span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-type">$</span></a></span><span>
</span><span id="line-307"></span><span>            </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#RetBig"><span class="hs-identifier hs-type">RetBig</span></a></span><span>
</span><span id="line-308"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107938"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-309"></span><span>                </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#stack_payload"><span class="hs-identifier hs-var">stack_payload</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107953"><span class="hs-identifier hs-type">payload'</span></a></span><span>
</span><span id="line-310"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-311"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#RET_FUN"><span class="hs-identifier hs-var">RET_FUN</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-312"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107956"><span class="annot"><span class="annottext">retFunSize' :: Word
</span><a href="#local-6989586621679107956"><span class="hs-identifier hs-var hs-var hs-var">retFunSize'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Word
</span><a href="GHC.Exts.Stack.Decode.html#getWord"><span class="hs-identifier hs-var">getWord</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgRetFunFrameSize"><span class="hs-identifier hs-var">offsetStgRetFunFrameSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span>              </span><span id="local-6989586621679107958"><span class="annot"><span class="annottext">retFunFun' :: Box
</span><a href="#local-6989586621679107958"><span class="hs-identifier hs-var hs-var hs-var">retFunFun'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgRetFunFrameFun"><span class="hs-identifier hs-var">offsetStgRetFunFrameFun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>          </span><span id="local-6989586621679107960"><span class="annot"><a href="#local-6989586621679107960"><span class="hs-identifier hs-var">retFunPayload'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-315"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Bool
</span><a href="GHC.Exts.Stack.Decode.html#isArgGenBigRetFunType"><span class="hs-identifier hs-var">isArgGenBigRetFunType</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-316"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LargeBitmapGetter
-&gt; StackSnapshot# -&gt; WordOffset -&gt; WordOffset -&gt; IO [StackField]
</span><a href="GHC.Exts.Stack.Decode.html#decodeLargeBitmap"><span class="hs-identifier hs-var">decodeLargeBitmap</span></a></span><span> </span><span class="annot"><span class="annottext">LargeBitmapGetter
</span><a href="GHC.Exts.Stack.Decode.html#getRetFunLargeBitmap%23"><span class="hs-identifier hs-var">getRetFunLargeBitmap#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgRetFunFramePayload"><span class="hs-identifier hs-var">offsetStgRetFunFramePayload</span></a></span><span>
</span><span id="line-317"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[StackField] -&gt; IO [StackField]
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">([StackField] -&gt; IO [StackField])
-&gt; [StackField] -&gt; IO [StackField]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SmallBitmapGetter
-&gt; StackSnapshot# -&gt; WordOffset -&gt; WordOffset -&gt; [StackField]
</span><a href="GHC.Exts.Stack.Decode.html#decodeSmallBitmap"><span class="hs-identifier hs-var">decodeSmallBitmap</span></a></span><span> </span><span class="annot"><span class="annottext">SmallBitmapGetter
</span><a href="GHC.Exts.Stack.Decode.html#getRetFunSmallBitmap%23"><span class="hs-identifier hs-var">getRetFunSmallBitmap#</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgRetFunFramePayload"><span class="hs-identifier hs-var">offsetStgRetFunFramePayload</span></a></span><span>
</span><span id="line-318"></span><span>          </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-type">pure</span></a></span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-type">$</span></a></span><span>
</span><span id="line-319"></span><span>            </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#RetFun"><span class="hs-identifier hs-type">RetFun</span></a></span><span>
</span><span id="line-320"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107938"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-321"></span><span>                </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#retFunSize"><span class="hs-identifier hs-var">retFunSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107956"><span class="hs-identifier hs-type">retFunSize'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-322"></span><span>                </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#retFunFun"><span class="hs-identifier hs-var">retFunFun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107958"><span class="hs-identifier hs-type">retFunFun'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-323"></span><span>                </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#retFunPayload"><span class="hs-identifier hs-var">retFunPayload</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107960"><span class="hs-identifier hs-type">retFunPayload'</span></a></span><span>
</span><span id="line-324"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-325"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#UPDATE_FRAME"><span class="hs-identifier hs-var">UPDATE_FRAME</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-326"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107967"><span class="annot"><span class="annottext">updatee' :: Box
</span><a href="#local-6989586621679107967"><span class="hs-identifier hs-var hs-var">updatee'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgUpdateFrameUpdatee"><span class="hs-identifier hs-var">offsetStgUpdateFrameUpdatee</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>          </span><span class="hs-keyword">in</span><span>
</span><span id="line-328"></span><span>            </span><span class="annot"><span class="annottext">StackFrame -&gt; IO StackFrame
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(StackFrame -&gt; IO StackFrame) -&gt; StackFrame -&gt; IO StackFrame
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-329"></span><span>              </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#UpdateFrame"><span class="hs-identifier hs-type">UpdateFrame</span></a></span><span>
</span><span id="line-330"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">info_tbl :: StgInfoTable
</span><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StgInfoTable
</span><a href="#local-6989586621679107938"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-331"></span><span>                  </span><span class="annot"><span class="annottext">updatee :: Box
</span><a href="GHC.Exts.Heap.Closures.html#updatee"><span class="hs-identifier hs-var">updatee</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Box
</span><a href="#local-6989586621679107967"><span class="hs-identifier hs-var">updatee'</span></a></span><span>
</span><span id="line-332"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-333"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#CATCH_FRAME"><span class="hs-identifier hs-var">CATCH_FRAME</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-334"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107972"><span class="annot"><span class="annottext">handler' :: Box
</span><a href="#local-6989586621679107972"><span class="hs-identifier hs-var hs-var">handler'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgCatchFrameHandler"><span class="hs-identifier hs-var">offsetStgCatchFrameHandler</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-335"></span><span>          </span><span class="annot"><span class="annottext">StackFrame -&gt; IO StackFrame
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(StackFrame -&gt; IO StackFrame) -&gt; StackFrame -&gt; IO StackFrame
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-336"></span><span>            </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#CatchFrame"><span class="hs-identifier hs-type">CatchFrame</span></a></span><span>
</span><span id="line-337"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">info_tbl :: StgInfoTable
</span><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StgInfoTable
</span><a href="#local-6989586621679107938"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-338"></span><span>                </span><span class="annot"><span class="annottext">handler :: Box
</span><a href="GHC.Exts.Heap.Closures.html#handler"><span class="hs-identifier hs-var">handler</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Box
</span><a href="#local-6989586621679107972"><span class="hs-identifier hs-var">handler'</span></a></span><span>
</span><span id="line-339"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-340"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#UNDERFLOW_FRAME"><span class="hs-identifier hs-var">UNDERFLOW_FRAME</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-341"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107977"><span class="annot"><span class="annottext">nextChunk' :: StackSnapshot
</span><a href="#local-6989586621679107977"><span class="hs-identifier hs-var hs-var hs-var">nextChunk'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; StackSnapshot
</span><a href="GHC.Exts.Stack.Decode.html#getUnderflowFrameNextChunk"><span class="hs-identifier hs-var">getUnderflowFrameNextChunk</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span>
</span><span id="line-342"></span><span>          </span><span id="local-6989586621679107978"><span class="annot"><a href="#local-6989586621679107978"><span class="hs-identifier hs-var">stackClosure</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StackSnapshot -&gt; IO StgStackClosure
</span><a href="GHC.Exts.Stack.Decode.html#decodeStack"><span class="hs-identifier hs-var">decodeStack</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot
</span><a href="#local-6989586621679107977"><span class="hs-identifier hs-var">nextChunk'</span></a></span><span>
</span><span id="line-343"></span><span>          </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-type">pure</span></a></span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-type">$</span></a></span><span>
</span><span id="line-344"></span><span>            </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#UnderflowFrame"><span class="hs-identifier hs-type">UnderflowFrame</span></a></span><span>
</span><span id="line-345"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107938"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-346"></span><span>                </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#nextChunk"><span class="hs-identifier hs-var">nextChunk</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679107978"><span class="hs-identifier hs-type">stackClosure</span></a></span><span>
</span><span id="line-347"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-348"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#STOP_FRAME"><span class="hs-identifier hs-var">STOP_FRAME</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StackFrame -&gt; IO StackFrame
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(StackFrame -&gt; IO StackFrame) -&gt; StackFrame -&gt; IO StackFrame
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StopFrame"><span class="hs-identifier hs-type">StopFrame</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">info_tbl :: StgInfoTable
</span><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StgInfoTable
</span><a href="#local-6989586621679107938"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#ATOMICALLY_FRAME"><span class="hs-identifier hs-var">ATOMICALLY_FRAME</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-350"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107984"><span class="annot"><span class="annottext">atomicallyFrameCode' :: Box
</span><a href="#local-6989586621679107984"><span class="hs-identifier hs-var hs-var">atomicallyFrameCode'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgAtomicallyFrameCode"><span class="hs-identifier hs-var">offsetStgAtomicallyFrameCode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-351"></span><span>              </span><span id="local-6989586621679107986"><span class="annot"><span class="annottext">result' :: Box
</span><a href="#local-6989586621679107986"><span class="hs-identifier hs-var hs-var">result'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgAtomicallyFrameResult"><span class="hs-identifier hs-var">offsetStgAtomicallyFrameResult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>          </span><span class="annot"><span class="annottext">StackFrame -&gt; IO StackFrame
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(StackFrame -&gt; IO StackFrame) -&gt; StackFrame -&gt; IO StackFrame
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-353"></span><span>            </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#AtomicallyFrame"><span class="hs-identifier hs-type">AtomicallyFrame</span></a></span><span>
</span><span id="line-354"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">info_tbl :: StgInfoTable
</span><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StgInfoTable
</span><a href="#local-6989586621679107938"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-355"></span><span>                </span><span class="annot"><span class="annottext">atomicallyFrameCode :: Box
</span><a href="GHC.Exts.Heap.Closures.html#atomicallyFrameCode"><span class="hs-identifier hs-var">atomicallyFrameCode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Box
</span><a href="#local-6989586621679107984"><span class="hs-identifier hs-var">atomicallyFrameCode'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-356"></span><span>                </span><span class="annot"><span class="annottext">result :: Box
</span><a href="GHC.Exts.Heap.Closures.html#result"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Box
</span><a href="#local-6989586621679107986"><span class="hs-identifier hs-var">result'</span></a></span><span>
</span><span id="line-357"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-358"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#CATCH_RETRY_FRAME"><span class="hs-identifier hs-var">CATCH_RETRY_FRAME</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-359"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679107992"><span class="annot"><span class="annottext">running_alt_code' :: Word
</span><a href="#local-6989586621679107992"><span class="hs-identifier hs-var hs-var">running_alt_code'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Word
</span><a href="GHC.Exts.Stack.Decode.html#getWord"><span class="hs-identifier hs-var">getWord</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgCatchRetryFrameRunningAltCode"><span class="hs-identifier hs-var">offsetStgCatchRetryFrameRunningAltCode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>              </span><span id="local-6989586621679107994"><span class="annot"><span class="annottext">first_code' :: Box
</span><a href="#local-6989586621679107994"><span class="hs-identifier hs-var hs-var">first_code'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgCatchRetryFrameRunningFirstCode"><span class="hs-identifier hs-var">offsetStgCatchRetryFrameRunningFirstCode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>              </span><span id="local-6989586621679107996"><span class="annot"><span class="annottext">alt_code' :: Box
</span><a href="#local-6989586621679107996"><span class="hs-identifier hs-var hs-var">alt_code'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgCatchRetryFrameAltCode"><span class="hs-identifier hs-var">offsetStgCatchRetryFrameAltCode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>          </span><span class="hs-keyword">in</span><span>
</span><span id="line-363"></span><span>            </span><span class="annot"><span class="annottext">StackFrame -&gt; IO StackFrame
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(StackFrame -&gt; IO StackFrame) -&gt; StackFrame -&gt; IO StackFrame
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-364"></span><span>              </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#CatchRetryFrame"><span class="hs-identifier hs-type">CatchRetryFrame</span></a></span><span>
</span><span id="line-365"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">info_tbl :: StgInfoTable
</span><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StgInfoTable
</span><a href="#local-6989586621679107938"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-366"></span><span>                  </span><span class="annot"><span class="annottext">running_alt_code :: Word
</span><a href="GHC.Exts.Heap.Closures.html#running_alt_code"><span class="hs-identifier hs-var">running_alt_code</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679107992"><span class="hs-identifier hs-var">running_alt_code'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-367"></span><span>                  </span><span class="annot"><span class="annottext">first_code :: Box
</span><a href="GHC.Exts.Heap.Closures.html#first_code"><span class="hs-identifier hs-var">first_code</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Box
</span><a href="#local-6989586621679107994"><span class="hs-identifier hs-var">first_code'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-368"></span><span>                  </span><span class="annot"><span class="annottext">alt_code :: Box
</span><a href="GHC.Exts.Heap.Closures.html#alt_code"><span class="hs-identifier hs-var">alt_code</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Box
</span><a href="#local-6989586621679107996"><span class="hs-identifier hs-var">alt_code'</span></a></span><span>
</span><span id="line-369"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-370"></span><span>        </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#CATCH_STM_FRAME"><span class="hs-identifier hs-var">CATCH_STM_FRAME</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-371"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679108003"><span class="annot"><span class="annottext">catchFrameCode' :: Box
</span><a href="#local-6989586621679108003"><span class="hs-identifier hs-var hs-var">catchFrameCode'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgCatchSTMFrameCode"><span class="hs-identifier hs-var">offsetStgCatchSTMFrameCode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>              </span><span id="local-6989586621679108005"><span class="annot"><span class="annottext">handler' :: Box
</span><a href="#local-6989586621679108005"><span class="hs-identifier hs-var hs-var">handler'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; WordOffset -&gt; Box
</span><a href="GHC.Exts.Stack.Decode.html#getClosureBox"><span class="hs-identifier hs-var">getClosureBox</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679107934"><span class="hs-identifier hs-var">stackSnapshot#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679107935"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset -&gt; WordOffset -&gt; WordOffset
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="GHC.Exts.Stack.Constants.html#offsetStgCatchSTMFrameHandler"><span class="hs-identifier hs-var">offsetStgCatchSTMFrameHandler</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>          </span><span class="hs-keyword">in</span><span>
</span><span id="line-374"></span><span>            </span><span class="annot"><span class="annottext">StackFrame -&gt; IO StackFrame
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(StackFrame -&gt; IO StackFrame) -&gt; StackFrame -&gt; IO StackFrame
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-375"></span><span>              </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#CatchStmFrame"><span class="hs-identifier hs-type">CatchStmFrame</span></a></span><span>
</span><span id="line-376"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">info_tbl :: StgInfoTable
</span><a href="GHC.Exts.Heap.Closures.html#info_tbl"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StgInfoTable
</span><a href="#local-6989586621679107938"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-377"></span><span>                  </span><span class="annot"><span class="annottext">catchFrameCode :: Box
</span><a href="GHC.Exts.Heap.Closures.html#catchFrameCode"><span class="hs-identifier hs-var">catchFrameCode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Box
</span><a href="#local-6989586621679108003"><span class="hs-identifier hs-var">catchFrameCode'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-378"></span><span>                  </span><span class="annot"><span class="annottext">handler :: Box
</span><a href="GHC.Exts.Heap.Closures.html#handler"><span class="hs-identifier hs-var">handler</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Box
</span><a href="#local-6989586621679108005"><span class="hs-identifier hs-var">handler'</span></a></span><span>
</span><span id="line-379"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-380"></span><span>        </span><span id="local-6989586621679108009"><span class="annot"><span class="annottext">ClosureType
</span><a href="#local-6989586621679108009"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO StackFrame
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO StackFrame) -&gt; String -&gt; IO StackFrame
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unexpected closure type on stack: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">ClosureType -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">ClosureType
</span><a href="#local-6989586621679108009"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span class="annot"><span class="hs-comment">-- | Unbox 'Int#' from 'Int'</span></span><span>
</span><span id="line-383"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#toInt%23"><span class="hs-identifier hs-type">toInt#</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Int%23"><span class="hs-identifier hs-type">Int#</span></a></span><span>
</span><span id="line-384"></span><span id="toInt%23"><span class="annot"><span class="annottext">toInt# :: Int -&gt; Int#
</span><a href="GHC.Exts.Stack.Decode.html#toInt%23"><span class="hs-identifier hs-var hs-var">toInt#</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#I%23"><span class="hs-identifier hs-type">I#</span></a></span><span> </span><span id="local-6989586621679108012"><span class="annot"><span class="annottext">Int#
</span><a href="#local-6989586621679108012"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int#
</span><a href="#local-6989586621679108012"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="annot"><span class="hs-comment">-- | Convert `Int` to `Word#`</span></span><span>
</span><span id="line-387"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#intToWord%23"><span class="hs-identifier hs-type">intToWord#</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span>
</span><span id="line-388"></span><span id="intToWord%23"><span class="annot"><span class="annottext">intToWord# :: Int -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#intToWord%23"><span class="hs-identifier hs-var hs-var">intToWord#</span></a></span></span><span> </span><span id="local-6989586621679108014"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679108014"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int# -&gt; Word#
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#int2Word%23"><span class="hs-identifier hs-var">int2Word#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int#
</span><a href="GHC.Exts.Stack.Decode.html#toInt%23"><span class="hs-identifier hs-var">toInt#</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679108014"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#wordOffsetToWord%23"><span class="hs-identifier hs-type">wordOffsetToWord#</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#Word%23"><span class="hs-identifier hs-type">Word#</span></a></span><span>
</span><span id="line-391"></span><span id="wordOffsetToWord%23"><span class="annot"><span class="annottext">wordOffsetToWord# :: WordOffset -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#wordOffsetToWord%23"><span class="hs-identifier hs-var hs-var">wordOffsetToWord#</span></a></span></span><span> </span><span id="local-6989586621679108015"><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679108015"><span class="hs-identifier hs-var">wo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word#
</span><a href="GHC.Exts.Stack.Decode.html#intToWord%23"><span class="hs-identifier hs-var">intToWord#</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WordOffset -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">WordOffset
</span><a href="#local-6989586621679108015"><span class="hs-identifier hs-var">wo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="hs-comment">-- | Location of a stackframe on the stack</span><span>
</span><span id="line-394"></span><span class="hs-comment">--</span><span>
</span><span id="line-395"></span><span class="hs-comment">-- It's defined by the `StackSnapshot` (@StgStack@) and the offset to the bottom</span><span>
</span><span id="line-396"></span><span class="hs-comment">-- of the stack.</span><span>
</span><span id="line-397"></span><span class="hs-keyword">type</span><span> </span><span id="StackFrameLocation"><span class="annot"><a href="GHC.Exts.Stack.Decode.html#StackFrameLocation"><span class="hs-identifier hs-var">StackFrameLocation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Stack.CloneStack.html#StackSnapshot"><span class="hs-identifier hs-type">StackSnapshot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Constants.html#WordOffset"><span class="hs-identifier hs-type">WordOffset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span class="hs-comment">-- | Decode `StackSnapshot` to a `StgStackClosure`</span><span>
</span><span id="line-400"></span><span class="hs-comment">--</span><span>
</span><span id="line-401"></span><span class="hs-comment">-- The return value is the representation of the @StgStack@ itself.</span><span>
</span><span id="line-402"></span><span class="hs-comment">--</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- See /Note [Decoding the stack]/.</span><span>
</span><span id="line-404"></span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#decodeStack"><span class="hs-identifier hs-type">decodeStack</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Stack.CloneStack.html#StackSnapshot"><span class="hs-identifier hs-type">StackSnapshot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#StgStackClosure"><span class="hs-identifier hs-type">StgStackClosure</span></a></span><span>
</span><span id="line-405"></span><span id="decodeStack"><span class="annot"><span class="annottext">decodeStack :: StackSnapshot -&gt; IO StgStackClosure
</span><a href="GHC.Exts.Stack.Decode.html#decodeStack"><span class="hs-identifier hs-var hs-var">decodeStack</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Stack.CloneStack.html#StackSnapshot"><span class="hs-identifier hs-type">StackSnapshot</span></a></span><span> </span><span id="local-6989586621679108016"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679108016"><span class="hs-identifier hs-var">stack#</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-406"></span><span>  </span><span id="local-6989586621679108017"><span class="annot"><a href="#local-6989586621679108017"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; IO StgInfoTable
</span><a href="GHC.Exts.Stack.Decode.html#getInfoTableForStack"><span class="hs-identifier hs-var">getInfoTableForStack</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679108016"><span class="hs-identifier hs-var">stack#</span></a></span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.InfoTable.Types.html#tipe"><span class="hs-identifier hs-var">tipe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108017"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-408"></span><span>    </span><span class="annot"><span class="annottext">ClosureType
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.ClosureTypes.html#STACK"><span class="hs-identifier hs-var">STACK</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-409"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679108019"><span class="annot"><span class="annottext">stack_size' :: Word32
</span><a href="#local-6989586621679108019"><span class="hs-identifier hs-var hs-var hs-var">stack_size'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; Word32
</span><a href="GHC.Exts.Stack.Decode.html#getStackFields"><span class="hs-identifier hs-var">getStackFields</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679108016"><span class="hs-identifier hs-var">stack#</span></a></span><span>
</span><span id="line-410"></span><span>          </span><span id="local-6989586621679108020"><span class="annot"><span class="annottext">sfls :: [StackFrameLocation]
</span><a href="#local-6989586621679108020"><span class="hs-identifier hs-var hs-var hs-var">sfls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; [StackFrameLocation]
</span><a href="#local-6989586621679108021"><span class="hs-identifier hs-var">stackFrameLocations</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679108016"><span class="hs-identifier hs-var">stack#</span></a></span><span>
</span><span id="line-411"></span><span>      </span><span id="local-6989586621679108022"><span class="annot"><a href="#local-6989586621679108022"><span class="hs-identifier hs-var">stack'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(StackFrameLocation -&gt; IO StackFrame)
-&gt; [StackFrameLocation] -&gt; IO [StackFrame]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">StackFrameLocation -&gt; IO StackFrame
</span><a href="GHC.Exts.Stack.Decode.html#unpackStackFrame"><span class="hs-identifier hs-var">unpackStackFrame</span></a></span><span> </span><span class="annot"><span class="annottext">[StackFrameLocation]
</span><a href="#local-6989586621679108020"><span class="hs-identifier hs-var">sfls</span></a></span><span>
</span><span id="line-412"></span><span>      </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#pure"><span class="hs-identifier hs-type">pure</span></a></span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-type">$</span></a></span><span>
</span><span id="line-413"></span><span>        </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#GenStgStackClosure"><span class="hs-identifier hs-type">GenStgStackClosure</span></a></span><span>
</span><span id="line-414"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#ssc_info"><span class="hs-identifier hs-var">ssc_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679108017"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-415"></span><span>            </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#ssc_stack_size"><span class="hs-identifier hs-var">ssc_stack_size</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679108019"><span class="hs-identifier hs-type">stack_size'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-416"></span><span>            </span><span class="annot"><a href="GHC.Exts.Heap.Closures.html#ssc_stack"><span class="hs-identifier hs-var">ssc_stack</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679108022"><span class="hs-identifier hs-type">stack'</span></a></span><span>
</span><span id="line-417"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-418"></span><span>    </span><span class="annot"><span class="annottext">ClosureType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO StgStackClosure
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO StgStackClosure) -&gt; String -&gt; IO StgStackClosure
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected STACK closure, got &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">StgInfoTable -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">StgInfoTable
</span><a href="#local-6989586621679108017"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-419"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-420"></span><span>    </span><span class="annot"><a href="#local-6989586621679108021"><span class="hs-identifier hs-type">stackFrameLocations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-prim-0.13.0-e168/src/GHC.Prim.html#StackSnapshot%23"><span class="hs-identifier hs-type">StackSnapshot#</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#StackFrameLocation"><span class="hs-identifier hs-type">StackFrameLocation</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-421"></span><span>    </span><span id="local-6989586621679108021"><span class="annot"><span class="annottext">stackFrameLocations :: StackSnapshot# -&gt; [StackFrameLocation]
</span><a href="#local-6989586621679108021"><span class="hs-identifier hs-var hs-var">stackFrameLocations</span></a></span></span><span> </span><span id="local-6989586621679108027"><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679108027"><span class="hs-identifier hs-var">s#</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-422"></span><span>      </span><span class="annot"><span class="annottext">StackSnapshot# -&gt; StackFrameLocation
</span><a href="GHC.Exts.Stack.Decode.html#stackHead"><span class="hs-identifier hs-var">stackHead</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679108027"><span class="hs-identifier hs-var">s#</span></a></span><span>
</span><span id="line-423"></span><span>        </span><span class="annot"><span class="annottext">StackFrameLocation -&gt; [StackFrameLocation] -&gt; [StackFrameLocation]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe StackFrameLocation -&gt; [StackFrameLocation]
</span><a href="#local-6989586621679108028"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackFrameLocation -&gt; Maybe StackFrameLocation
</span><a href="GHC.Exts.Stack.Decode.html#advanceStackFrameLocation"><span class="hs-identifier hs-var">advanceStackFrameLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackSnapshot# -&gt; StackFrameLocation
</span><a href="GHC.Exts.Stack.Decode.html#stackHead"><span class="hs-identifier hs-var">stackHead</span></a></span><span> </span><span class="annot"><span class="annottext">StackSnapshot#
</span><a href="#local-6989586621679108027"><span class="hs-identifier hs-var">s#</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-424"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-425"></span><span>        </span><span class="annot"><a href="#local-6989586621679108028"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#StackFrameLocation"><span class="hs-identifier hs-type">StackFrameLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Exts.Stack.Decode.html#StackFrameLocation"><span class="hs-identifier hs-type">StackFrameLocation</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-426"></span><span>        </span><span id="local-6989586621679108028"><span class="annot"><span class="annottext">go :: Maybe StackFrameLocation -&gt; [StackFrameLocation]
</span><a href="#local-6989586621679108028"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe StackFrameLocation
</span><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-427"></span><span>        </span><span class="annot"><a href="#local-6989586621679108028"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-internal-9.1202.0-1465/src/GHC.Internal.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679108029"><span class="annot"><span class="annottext">StackFrameLocation
</span><a href="#local-6989586621679108029"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StackFrameLocation
</span><a href="#local-6989586621679108029"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">StackFrameLocation -&gt; [StackFrameLocation] -&gt; [StackFrameLocation]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../ghc-prim-0.13.0-e168/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe StackFrameLocation -&gt; [StackFrameLocation]
</span><a href="#local-6989586621679108028"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StackFrameLocation -&gt; Maybe StackFrameLocation
</span><a href="GHC.Exts.Stack.Decode.html#advanceStackFrameLocation"><span class="hs-identifier hs-var">advanceStackFrameLocation</span></a></span><span> </span><span class="annot"><span class="annottext">StackFrameLocation
</span><a href="#local-6989586621679108029"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-cpp">

#else
</span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Exts.Stack.Decode</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">
#endif
</span></pre></body></html>